//Start with clean sketch object
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.name = "SketchObj";
  g.module = g.module || {};
  g.module.DOMMisc = function(d) {
    var a = d.util || (d.util = {});
    a.inherits = function(a, b) {
      function c() {}
      c.prototype = b.prototype;
      a.prototype = new c;
      a.prototype.constructor = a
    };
    a.errorHandler = function(a) {
      return function() {
        console.warn(a, arguments)
      }
    };
    a.requestKioskMode = function() {
      d.client.nodewebkit && require("nw.gui").Window.get().enterKioskMode()
    };
    a.diff = function(b, c, e) {
      if (b !== c) {
        var p = new b.constructor,
          h = new c.constructor,
          r = !0,
          k;
        for (k in b)
          if (e && -1 !== e.indexOf(k)) p[k] = b[k], h[k] =
            c[k];
          else if (!(k in c)) r = !1, p[k] = b[k], h[k] = c[k];
        else if (b[k] !== c[k])
          if ("object" === typeof b[k] && "object" === typeof c[k]) {
            var v = a.diff(b[k], c[k], e);
            void 0 !== v && (r = !1, p[k] = v.from, h[k] = v.to)
          } else r = !1, p[k] = b[k], h[k] = c[k];
        for (k in c) k in b || (r = !1, p[k] = b[k], h[k] = c[k]);
        if (!r) return {
          from: p,
          to: h
        }
      }
    };
    a.sort = function(a, b, c) {
      if (c) var e = a.sort(function(a, r) {
        return b(a[c], r[c])
      });
      else e = {}, Object.keys(a).sort(b).forEach(function(h) {
        e[h] = a[h]
      });
      return e
    };
    a.sort.natural = function(a, b) {
      var c =
        /(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,
        e = /(^[ ]*|[ ]*$)/g,
        h =
        /(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,
        r = /^0x[0-9a-f]+$/i,
        k = /^0/,
        v = a.toString().replace(e, "") || "",
        p = b.toString().replace(e, "") || "",
        e = v.replace(c, "\x00$1\x00").replace(/\0$/, "").replace(
          /^\0/, "").split("\x00"),
        c = p.replace(c, "\x00$1\x00").replace(/\0$/, "").replace(
          /^\0/, "").split("\x00"),
        v = parseInt(v.match(r)) || 1 != e.length && v.match(h) &&
        Date.parse(v);
      if (h = parseInt(p.match(r)) || v && p.match(h) && Date.parse(p) ||
        null) {
        if (v < h) return -1;
        if (v > h) return 1
      }
      h = 0;
      for (r = Math.max(e.length, c.length); h < r; h++) {
        v = !(e[h] || "").match(k) && parseFloat(e[h]) || e[h] || 0;
        p = !(c[h] || "").match(k) && parseFloat(c[h]) || c[h] || 0;
        if (isNaN(v) !== isNaN(p)) return isNaN(v) ? 1 : -1;
        typeof v !== typeof p && (v += "", p += "");
        if (v < p) return -1;
        if (v > p) return 1
      }
      return 0
    };
    a.getItems = function(b, c) {
      var e = b.length,
        p = {};
      a.foreach(b, function(h) {
        a.getItem(h, function(a) {
          p[h] = a;
          --e || c(p)
        })
      })
    };
    a.getItem = function(b, c) {
      c = c || function(a) {
        console.log(a)
      };
      a.exists("chrome.storage.local") ?
        chrome.storage.local.get(b, function(a) {
          c(a[b])
        }) : c(localStorage.getItem((d.feature && d.feature.prefix ||
          "") + "/" + b) || "")
    };
    a.setItem = function(b, c) {
      if (a.exists("chrome.storage.local")) {
        var e = {};
        e[b] = c;
        chrome.storage.local.set(e)
      } else localStorage.setItem((d.feature && d.feature.prefix ||
        "") + "/" + b, c)
    };
    a.Canvas = function(a, b) {
      if ("undefined" === typeof document) var c = new f;
      else c = document.createElement("canvas"), "function" ===
        typeof FlashCanvas && (c.onload = d.client.fn.init);
      c.ctx = c.getContext("2d");
      isFinite(a) &&
        (c.width = a || 1);
      isFinite(b) && (c.height = b || 1);
      return c
    };
    a.Canvas.blip = function(a, b, c) {
      b && c ? (a.width = b, a.height = c) : a.width = a.width
    };
    a.Canvas.clear = function(a) {
      a.ctx.clearRect(0, 0, a.width, a.height)
    };
    a.json = {};
    a.json.filterCircular = function(a, b) {
      return "object" === typeof b && (null == b || b.nodeName || b.tagName) ?
        void 0 : b
    };
    a.timestamp = function() {
      if ("object" === typeof window) {
        var a = window.performance;
        if (a && a.now) return a.now.bind(a)
      }
      return Date.now
    }();
    a.perf = function(b, c, e) {
      if (c && b) {
        for (var p = a.perf(), h = 0; h < c; h++) b();
        console.log(p() + "ms", e || "")
      } else {
        var r = a.timestamp();
        return function(h, b) {
          var c = a.timestamp(),
            m = Math.round(c - r);
          h && console.log(m + "ms", h);
          b && (r = c);
          return m
        }
      }
    };
    a.exists = function(a, b) {
      try {
        for (var c = a.split("."), e = b || window, h = 0, r = c.length; h <
          r; h++) {
          var k = c[h];
          if (void 0 === e[k] || null === e[k]) return !1;
          e = e[k]
        }
        return !0
      } catch (v) {
        return !1
      }
    };
    var e = "function" === typeof CanvasPattern;
    a.clone = function(b) {
      if (!b || "object" !== typeof b) return b;
      if (!(b.nodeType || e && b instanceof CanvasPattern)) {
        if (b.clone && "function" === typeof b.clone) return b.clone();
        if (b.constructor) {
          var c = new b.constructor,
            p;
          for (p in b) {
            var d = b[p];
            c[p] = d && "object" === typeof d ? a.clone(d) : d
          }
          return c
        }
      }
    };
    a.cloneInto = function(b, c, e) {
      if (!b || "object" !== typeof b) return c;
      for (var p in b) {
        var h = b[p],
          r = typeof h;
        if (h && "object" === r) {
          var k = h;
          k.nodeType || (c[p] = typeof c[p] === r ? a.cloneInto(h, c[p],
            e) : a.cloneInto(h, new k.constructor, e))
        } else {
          if (e)
            if (k = typeof c[p], e.typematch) {
              if (k !== r) continue
            } else if (e.type && k !== e.type) continue;
          c[p] = h
        }
      }
      return c
    };
    a.count = function(a, b, c) {
      if (!a) return 0;
      if (isFinite(a.length)) return a.length;
      if ("object" === typeof a) {
        var e = 0,
          h = void 0 !== b;
        if (h && void 0 !== c)
          for (var r in a) a[r] && a[r][b] === c && ++e;
        else if (h)
          for (r in a) void 0 !== a[r] && ++e;
        else
          for (r in a) ++e;
        return e
      }
    };
    a.isEmpty = function(a) {
      if (null == a) return !0;
      if (0 <= a.length) return !!a.length;
      for (var b in a) return !1;
      return !0
    };
    a.clamp = function(a, b, c) {
      return a < b ? b : a > c ? c : a
    };
    a.each = function(a, b) {
      if (!b) return console.warn("missing callback", arguments);
      if (!a) return console.warn("missing object", arguments);
      for (var c = 0; c < a.length; c++) b(a[c])
    };
    a.isArray =
      function(a) {
        return Array.isArray(a) || a instanceof NodeList
      };
    a.foreach = function(b, c) {
      if (a.isArray(b))
        for (var e = 0; e < b.length; e++) c(b[e], e);
      else
        for (e in b) c(b[e], e)
    };
    a.equals = function(b, c) {
      var e = a.json.filterCircular;
      return JSON.stringify(b, e) === JSON.stringify(c, e)
    };
    a.objectToArray = function(a) {
      var b = [],
        c;
      for (c in a) b.push(a[c]);
      return b
    };
    a.arrayToObject = function(a) {
      for (var b = {}, c = 0, e = a.length; c < e; c++) b[a[c]] = !0;
      return b
    };
    a.addFileInput = function(a, b) {
      d.uploader.addFileInput({
        target: a,
        onchange: function(a) {
          a.fileInput.value =
            "";
          a.addMedia({
            openAsNew: b,
            self: d.uploader
          })
        }
      })
    };
    a.bytesToSize = function(a) {
      var b = Math.floor(Math.log(a) / Math.log(1024));
      return Math.round(a / Math.pow(1024, b), 2) + ["Bytes", "KB",
        "MB", "GB", "TB"
      ][b]
    };
    a.getTimeFormat = function(a) {
      var b = a / 3600 >> 0,
        c = (a - 3600 * b) / 60 >> 0;
      a = a - 3600 * b - 60 * c;
      10 > b && (b = "0" + b);
      10 > c && (c = "0" + c);
      10 > a && (a = "0" + a);
      return b + ":" + c + ":" + a
    };
    a.require = function(a) {
      if (-1 !== a.indexOf(".css")) {
        var b = document.createElement("link");
        b.href = a;
        b.setAttribute("type", "text/css");
        b.setAttribute("rel", "stylesheet")
      } else b =
        document.createElement("script"), b.src = a, b.async = !1;
      document.head.appendChild(b)
    };
    a.isEditingText = function() {
      var a = document.activeElement;
      if (!a) return !1;
      var b = a.nodeName;
      return "INPUT" === b || "TEXTAREA" === b || "true" === a.contentEditable ?
        a.classList.contains("sk-dummy-canvas") ? !1 : !0 : !1
    };
    var q = d.dom = d.dom || {};
    q.$ = function(a, b) {
      return (b || document).querySelector(a)
    };
    q.$$ = function(a, b) {
      return (b || document).querySelectorAll(a)
    };
    var l = function(a, b) {
        "CANVAS" === a.nodeName && a.getContext("2d").drawImage(b, 0, 0)
      },
      b =
      function(a, c) {
        l(c, a);
        for (var e = c.childNodes, p = a.childNodes, h = 0; h < e.length; h++) {
          var r = e[h],
            k = p[h];
          r && k && (l(r, k), r.childNodes.length && k.childNodes && b(k,
            r))
        }
      };
    q.clone = function(a, c) {
      var e = a.cloneNode(!0);
      b(a, e);
      e.id = c;
      e.style.position = "absolute";
      e.style.opacity = 1;
      e.style.zIndex = 1E6;
      e.style.display = "block";
      return e
    };
    q.empty = function(a) {
      "string" === typeof a && (a = q.$(a));
      if (a) {
        for (; a.firstChild;) a.removeChild(a.firstChild);
        return a
      }
    };
    q.remove = function(b) {
      b instanceof Node && (b = [b]);
      if (b && a.isArray(b))
        for (var c =
            0, e = b.length; c < e; c++) {
          var p = b[c];
          p.parentNode && p.parentNode.removeChild(p)
        }
    };
    q.setCSS = function(a, b, c) {
      "string" === typeof a && (a = q.$$(a));
      for (var e = 0, h = a.length; e < h; e++) a[e].style[b] = c
    };
    q.measure = function(a) {
      "string" === typeof a && (a = q.$(a));
      if (!(a = a || this.selection && this.selection[0])) return {
        width: 0,
        height: 0
      };
      if (a === window || a === document) a = document.body;
      var b = {},
        e = a.getBoundingClientRect();
      b.width = e.width;
      b.height = e.height;
      b.x1 = e.left;
      b.y1 = e.top;
      b.scaleX = e.width / a.offsetWidth || 1;
      b.scaleY = e.height / a.offsetHeight ||
        1;
      b.scrollLeft = 0;
      b.scrollTop = 0;
      var e = window.getComputedStyle(a),
        p = c(e, "border-left-width"),
        h = c(e, "border-right-width"),
        r = c(e, "border-bottom-width"),
        k = c(e, "border-top-width");
      b.border = [p, h, k, r];
      b.x1 += p;
      b.y1 += k;
      b.width -= h + p;
      b.height -= r + k;
      p = c(e, "margin-left");
      h = c(e, "margin-right");
      r = c(e, "margin-bottom");
      k = c(e, "margin-top");
      b.margin = [p, h, k, r];
      b.x1 -= p;
      b.y1 -= k;
      b.width += h + p;
      b.height += r + k;
      p = c(e, "padding-left");
      h = c(e, "padding-right");
      r = c(e, "padding-bottom");
      k = c(e, "padding-top");
      b.padding = [p, h, k, r];
      b.x2 = b.x1 +
        b.width;
      b.y2 = b.y1 + b.height;
      e = e.getPropertyValue("position");
      for (a = "fixed" === e ? a : a.parentNode; null !== a && a !==
        document.body && void 0 !== a.scrollTop;) {
        e = window.getComputedStyle(a);
        e = e.getPropertyValue("position");
        if ("absolute" !== e)
          if ("fixed" === e) {
            b.scrollTop -= a.parentNode.scrollTop;
            b.scrollLeft -= a.parentNode.scrollLeft;
            break
          } else b.scrollLeft += a.scrollLeft, b.scrollTop += a.scrollTop;
        a = a.parentNode
      }
      eventjs.getDocumentScroll(b);
      b.scrollLeft -= b.pageXOffset;
      b.scrollTop -= b.pageYOffset;
      return b
    };
    var c = function(a,
      b) {
      var c = parseFloat(a.getPropertyValue(b), 10);
      return isFinite(c) ? c : 0
    };
    q.append = function(a, b, c) {
      var e = a;
      "string" === typeof e && (e = q.$(e));
      "string" === typeof b && (b = q.create(b, c));
      if (e && e.appendChild) return e.appendChild(b), b;
      console.warn("dom.append", arguments)
    };
    q.appendText = function(a, b) {
      q.append(a, document.createTextNode(b))
    };
    q.create = function(a, b) {
      if (-1 !== a.indexOf("<")) {
        var c = document.createElement("div");
        c.innerHTML = a;
        if (!(a = c.firstChild)) return
      } else a = -1 !== a.indexOf(" ") ? document.createTextNode(a) :
        document.createElement(a);
      b && q.setAttributes(a, b);
      return a
    };
    q.setAttributes = function(a, b) {
      for (var c in b) {
        var e = b[c];
        "function" === typeof e && 0 === c.indexOf("on") ? eventjs.add(
          a, c, e) : a.setAttribute(c, e)
      }
    };
    q.setClass = function(a) {
      if (a && a.target) var b = a.target,
        c = a.className,
        e = a.on,
        h = a.list,
        r = a.delay,
        k = a.callback;
      else b = arguments[0], c = arguments[1], e = arguments[2], h =
        arguments[3];
      void 0 === e && (e = !0);
      "string" === typeof b && (b = q.$(b));
      if (b && c)
        if (b.length) {
          for (h = 0; h < b.length; h++) {
            var v = b[h].classList;
            v && (e ? v.add(c) :
              v.remove(c))
          }
          p(k, r)
        } else {
          if ("string" === typeof h)
            if (b.parentNode) h = q.$$(h, b.parentNode);
            else {
              console.warn("setClass", a);
              return
            }
          h && h.length || (h = [b]);
          for (var v = b.classList, b = "toggle" === e && v.contains(c),
              x = 0, s = h.length; x < s; x++) {
            var d = h[x].classList;
            d && d.remove(c)
          }
          if (v) {
            if (!1 === e || b) return p(k, r), !1;
            v.add(c);
            p(k, r);
            return !0
          }
        } else console.warn("setClass", arguments)
    };
    var p = function(a, b) {
      "function" === typeof a && (b ? setTimeout(a, b) : a())
    }
  };
  if ("undefined" !== typeof module && module.exports) {
    var f = require("canvas");
    module.exports = g.module.DOMMisc
  } else g.module.DOMMisc(sketch)
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.util || (g.util = {}),
    d = "crossOrigin" in document.createElement("img"),
    a = {},
    e = {
      jpeg: !0,
      jpg: !0,
      gif: !0,
      png: !0,
      webp: !0,
      svg: !0
    };
  f.loadImage = function(q) {
    "string" === typeof q && (q = {
      src: q
    });
    if ("undefined" === typeof q.src) return console.warn(
      "image.src not defined");
    var b = q.image || document.createElement("img"),
      c = function() {
        var b = q.src;
        return f.loadImageBase64({
          url: b,
          onprogress: q.onprogress,
          onerror: function(b) {
            p(3);
            a[w.host] = 3
          },
          onload: function(c) {
            if (c) {
              var t = b.split(".").pop();
              e[t] || (t = "png");
              q.src = "data:image/" + t + ";base64," + c.responseText;
              p(0);
              a[w.host] = d ? 1 : 0
            }
          }
        })
      },
      p = function(a) {
        b.onload = q.onload;
        b.onerror = q.onerror;
        b.onprogress = q.onprogress;
        switch (a) {
          case 0:
            b.src = q.src;
            break;
          case 1:
            b.crossOrigin = "anonymous";
            b.src = q.src;
            break;
          case 2:
            c();
            break;
          case 3:
            if (!f.loadImage.proxyUrl) break;
            b.src = f.loadImage.proxyUrl + escape(q.src)
        }
        return b
      },
      w = document.createElement("a");
    w.href = q.src;
    return !g.loc || g.loc.isLocalUrl(q.src, !0) ? p(0) : function() {
      var b = q.src;
      if (!g.loc || g.loc.isLocalUrl(b, !0)) return p(0);
      b = a[w.host];
      if ("undefined" !== typeof b) return p(b);
      if (d) return p(1);
      try {
        var e = "withCredentials" in new XMLHttpRequest
      } catch (t) {
        e = !1
      }
      return e ? c() : p(3)
    }(d)
  };
  var q = function(a) {
    var b = "",
      c, e = Array(4),
      d = 0;
    for (c = 0; d < a.length;) {
      c = Array(3);
      for (var m = 0; m < c.length; m++) c[m] = d < a.length ? a.charCodeAt(
        d++) & 255 : 0;
      e[0] = c[0] >> 2;
      e[1] = (c[0] & 3) << 4 | c[1] >> 4;
      e[2] = (c[1] & 15) << 2 | c[2] >> 6;
      e[3] = c[2] & 63;
      c = d - (a.length - 1);
      switch (c) {
        case 2:
          e[3] = 64;
          e[2] = 64;
          break;
        case 1:
          e[3] = 64
      }
      for (m = 0; m < e.length; m++) b +=
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .charAt(e[m])
    }
    return b
  };
  f.loadImageBase64 = function(a) {
    var b = a.onload;
    a.asBinaryString = !0;
    a.onload = function(c) {
      if (c.target.responseText) {
        c = q(c.target.responseText);
        if (a.JS64) {
          c = "data:image/png;base64," + c;
          var e = document.createElement("canvas"),
            d = e.getContext("2d"),
            m = document.createElement("img");
          m.onload = function() {
            var a = this.offsetWidth,
              c = this.offsetHeight;
            e.width = a;
            e.height = c;
            e.style.width = a + "px";
            e.style.height = c + "px";
            document.getElementById("output");
            d.drawImage(this, 0, 0);
            for (var a = d.getImageData(0, 0, a, c).data, c = [], h = a
                .length,
                r = -1, k = 0; k < h; k += 4) 0 < a[k] && (c[++r] =
              String.fromCharCode(a[k]));
            a = c.join("");
            b({
              responseText: a
            });
            document.body.removeChild(m)
          };
          m.src = c;
          return !0
        }
        b({
          responseText: c
        })
      }
    };
    f.request(a)
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.util.loadImage)
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = {},
    d = {};
  (g.util || (g.util = {})).loadScript = function(e) {
    "string" === typeof e && (e = {
      url: e
    });
    a(e);
    return this
  };
  var a = function(a) {
    var q = a.urls;
    "undefined" === typeof q && (q = [{
      url: a.url,
      verify: a.verify
    }]);
    var l = document.getElementsByTagName("head")[0],
      b = function(a, b) {
        if (!(f[a.url] || b && "undefined" === typeof window[b])) {
          f[a.url] = !0;
          if (d[a.url]) d[a.url]();
          delete d[a.url];
          a.callback && a.callback();
          "undefined" !== typeof h && h()
        }
      },
      c = !1,
      p = [],
      w = function(h) {
        "string" === typeof h && (h = {
          url: h,
          verify: a.verify
        });
        if (/([\w\d.])$/.test(h.verify)) {
          var k = h.test = h.verify;
          if ("object" === typeof k)
            for (var v = 0; v < k.length; v++) p.push(k[v]);
          else p.push(k)
        }
        f[h.url] || (k = document.createElement("script"), k.onreadystatechange =
          function() {
            "loaded" !== this.readyState && "complete" !== this.readyState ||
              b(h)
          }, k.onload = function() {
            b(h)
          }, k.onerror = function(a) {
            c = !0;
            delete d[h.url];
            if ("object" === typeof h.test)
              for (var b in h.test) m(h.test[b]);
            else m(h.test)
          }, k.setAttribute("type", "text/javascript"), k.setAttribute(
            "src", h.url), l.appendChild(k),
          d[h.url] = function() {})
      },
      m = function(a) {
        for (var h = [], b = 0; b < p.length; b++) p[b] !== a && h.push(
          p[b]);
        p = h
      },
      u = function(h) {
        if (h) b(h, h.test);
        else
          for (var k = 0; k < q.length; k++) b(q[k], q[k].test);
        for (var v = !0, k = 0; k < p.length; k++) {
          var d = p[k];
          if (d && -1 !== d.indexOf(".")) {
            var d = d.split("."),
              s = window[d[0]];
            "undefined" !== typeof s && (2 === d.length ? "undefined" ===
              typeof s[d[1]] && (v = !1) : 3 === d.length && "undefined" ===
              typeof s[d[1]][d[2]] && (v = !1))
          } else "undefined" === typeof window[d] && (v = !1)
        }!a.strictOrder && v ? c ? a.error && a.error() : a.callback &&
          a.callback() : setTimeout(function() {
            u(h)
          }, 10)
      };
    if (a.strictOrder) {
      var t = -1,
        h = function() {
          t++;
          if (q[t]) {
            var b = q[t],
              k = b.url;
            d[k] ? d[k] = function() {
              b.callback && b.callback();
              h()
            } : f[k] ? h() : (w(b), u(b))
          } else c ? a.error && a.error() : a.callback && a.callback()
        };
      h()
    } else
      for (t = 0; t < q.length; t++) w(q[t]), u(q[t])
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.util.loadScript)
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  (sketchObj.util || (sketchObj.util = {})).request = function(d, a, e, q) {
    "string" === typeof d && (d = {
      url: d
    });
    console.debug("URL: " + d);
    var l = d.data,
      b = d.url,
      c = d.method || (d.data ? "POST" : "GET"),
      p = d.headers,
      w = d.responseType,
      m = d.withCredentials || !1,
      u = d.asBinaryString || !1;
    a = a || d.onload;
    e = e || d.onerror;
    q = q || d.onprogress;
    if ("undefined" !== typeof f && sketchObj.loc.isLocalUrl(b)) f.readFile(b,
      "utf8",
      function(h, b) {
        h ? e && e(h) : a && a({
          responseText: b
        })
      });
    else {
      var t = new XMLHttpRequest;
      t.open(c, b, !0);
      if (p)
        for (var h in p) t.setRequestHeader(h, p[h]);
      else l && t.setRequestHeader("Content-type",
        "application/x-www-form-urlencoded");
      u && t.overrideMimeType && t.overrideMimeType(
        "text/plain; charset=x-user-defined");
      w && (t.responseType = w);
      m && (t.withCredentials = "true");
      e && "onerror" in t && (t.onerror = e);
      q && t.upload && "onprogress" in t.upload && (l ? t.upload.onprogress =
        q : t.onprogress = q);
      t.onreadystatechange = function(h) {
        4 === t.readyState && (200 === t.status || 304 === t.status ||
          308 === t.status || 0 === t.status && sketchObj.client.cordova ? a &&
          a.call(t, h) : e && e.call(t, h))
      };
      t.send(l);
      return t
    }
  };
  if ("undefined" !== typeof module && module.exports) {
    var f = require("fs");
    XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest;
    module.exports = sketchObj.util.request;
  }
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.FiniteMath = function(f) {
    var d = f.util || (f.util = {});
    d.ZERO = 1E-10;
    d.RAD_DEG = 180 / Math.PI;
    d.DEG_RAD = 1 / d.RAD_DEG;
    d.INFINITY = 4294967295;
    d.INFINITY_MINUS_24bit = d.INFINITY - 16777215;
    d.INFINITY_MINUS_16bit = d.INFINITY - 65535;
    d.INFINITY_MINUS_8bit = d.INFINITY - 255;
    d.Random = function(a) {
      this.seed = "number" === typeof a ? a : d.Random.seed();
      this.n = Number(this.seed);
      return this
    };
    d.Random.seed = function() {
      return 2147483648 * Math.random() >> 0
    };
    d.Random.prototype = {
      toInt: function() {
        return this.n =
          16807 * this.n % 2147483647
      },
      toDouble: function() {
        this.n = 16807 * this.n % 2147483647;
        return this.n / 2147483647
      },
      intRange: function(a, e) {
        a -= .4999;
        this.n = 16807 * this.n % 2147483647;
        return Math.round(a + this.n / 2147483647 * (e + .4999 - a))
      },
      doubleRange: function(a, e) {
        this.n = 16807 * this.n % 2147483647;
        return a + this.n / 2147483647 * (e - a)
      }
    };
    d.getScreenMetrics = function() {
      if ("undefined" === typeof document) return {};
      var a = function(a) {
          try {
            q.style.fontSize = a
          } catch (b) {
            q.style.fontSize = ""
          }
          return q.offsetHeight / 1E4
        },
        e = document.createElement("div");
      e.style.cssText =
        "position: relative; width: 1px; height: 1px; overflow: scroll;";
      var q = document.createElement("div");
      q.style.cssText =
        "position: absolute; width: 100em; height: 10000em; overflow: hidden;";
      e.appendChild(q);
      document.body.appendChild(e);
      for (var l =
          "normal xx-small x-small small medium large x-large xx-large"
          .split(" "), b = {}, c = 0; c < l.length; c++) b[l[c] + "_px"] =
        a(l[c]);
      b["%>px"] = a("100%") / 100;
      b["px>pt"] = 1 / a("1pt");
      b["pt>pc"] = 1 / 12;
      b["px>in"] = 1 / a("72pt");
      b["in>ft"] = 1 / 12;
      b["ft>yd"] = 1 / 3;
      b["px>mm"] =
        25.4 * b["px>in"];
      b["mm>cm"] = .1;
      b["cm>m"] = .01;
      b["px>ex"] = 1 / a("1ex");
      b["ex>em"] = 1 / b["px>ex"] / a("1em");
      b["px>px"] = 1;
      document.body.removeChild(e);
      var p = function(a, b, c, e) {
        for (var h in b) "object" === typeof(e = b[h]) ? p(a, e, h) :
          (c && (a["px>" + h] = a["px>" + c] * a[c + ">" + h], a[c +
                ">" + e] = a[c + ">" + h] * a[h + ">" + e], a[c + ">px"] =
              1 / a["px>" + c], a[e + ">" + c] = 1 / a[h + ">" + e] * 1 /
              a[c + ">" + h], a[h + ">" + c] = 1 / a[c + ">" + h]), a[
              "px>" + e] = a["px>" + h] * a[h + ">" + e], a[h + ">px"] =
            1 / a["px>" + h], a[e + ">px"] = 1 / a["px>" + h] * 1 / a[h +
              ">" + e], a[e + ">" + h] = 1 / a[h + ">" + e])
      };
      p(b, {
        pt: "pc",
        mm: {
          cm: "m"
        },
        "in": {
          ft: "yd"
        },
        ex: "em"
      });
      return d.toMetric = b
    };
    d.hash = function(a) {
      if (!a) return 0;
      for (var e = 5381, d = 0, l = a.length; d < l; d++) var b = a[d]
        .charCodeAt(),
        e = (e << 5) + e + b;
      return e
    };
    d.uuid = function() {
      for (var a = Date.now(), e = 0, d = ""; 36 > e; e++) {
        var l = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx" [e];
        if ("-" === l || "4" === l) d += l;
        else var b = a * Math.random() * 16 % 16 | 0,
          d = d + ("x" === l ? b : b & 3 | 8).toString(16)
      }
      return d
    };
    (function() {
      var a = /inherit/,
        e = d.arrayToObject([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, "."]),
        q = d.arrayToObject(["-", "+", "*", "/"]),
        l = /(\d+)%/,
        b = /(\d+)px/g,
        c = /\((.*)\)/,
        p = function(a) {
          a = a.replace(c, function(a) {
            return p(a.slice(1, -1))
          });
          for (var b = [a[0]], d = [], t = 0, h = a.length, r = 1; r <
            h; r++) {
            var k = a[r];
            " " !== k && (e[k] || !b[t] ? b[t] += k : q[b[t]] ? b[t] =
              "" : (d[t] = k, b[++t] = ""))
          }
          a = parseFloat(b[0]);
          for (r = 0; r < d.length; r++) switch (t = parseFloat(b[r + 1]),
            d[r]) {
            case "+":
              a += t;
              break;
            case "-":
              a -= t;
              break;
            case "*":
              a *= t;
              break;
            case "/":
              a /= t
          }
          return a
        };
      d.parseMath = function(c, e) {
        c = c.replace(b, "$1");
        e && (e.inherit && (c = c.replace(a, e.inherit)), e.percent &&
          (c = c.replace(l, function(a) {
            return e.percent *
              (parseFloat(a) / 100)
          })));
        return p(c)
      }
    })()
  };
  "undefined" !== typeof module && module.exports ? module.exports =
    g.module.FiniteMath : g.module.FiniteMath(g)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g = g.util || (g.util = {});
  var f = g.string || (g.string = {});
  g.version = function(a, e) {
    function b(a, b) {
      b = b || 4;
      a = a.split(".").map(function(a) {
        var b = parseInt(a);
        return (a = a.replace(b, "")) ? b + a[0].charCodeAt() / 255 :
          b
      });
      for (var e = 0, d = 0; d < a.length && b !== d; ++d) e += a[d] /
        255 * Math.pow(255, b - d + 1);
      return e
    }
    this.value = a;
    this.hash = b(a, e);
    this.isGreaterThan = function(c, e) {
      return b(a, e) > b(c, e)
    };
    this.isLessThan = function(c, e) {
      return b(a, e) < b(c, e)
    };
    return this
  };
  var d = f.rxSplitByUppercase = /([A-Z]?[^A-Z]*)/g,
    a = f.rxAlphaNumeric =
    /[^A-Z0-9]+/gi;
  f.rxNumeric = /^-?\d*[\.]?\d+$/;
  f.toAlphaNumeric = function(e) {
    return e.replace(a, "")
  };
  f.spaceCamelCase = function(a) {
    return a.match(d).slice(0, -1).join(" ")
  };
  f.replaceAll = function(a, e, b) {
    if (a) {
      if ("object" === typeof e) {
        for (var c = 0; c < e.length; c++) a = a.split(e[c]).join(b[c]);
        return a
      }
      return a.split(e).join(b)
    }
  };
  f.ucfirst = function(a) {
    if (a) return a[0].toUpperCase() + a.substr(1)
  };
  f.ucwords = function(a) {
    if (a) return a.replace(/^(.)|\s(.)/g, function(a) {
      return a.toUpperCase()
    })
  };
  f.addslashes = function(a) {
    return a.replace(/([\\"'])/g,
      "\\$1").replace(/\0/g, "\\0")
  };
  f.stripslashes = function(a) {
    return a.replace(/\0/g, "0").replace(/\\([\\'"])/g, "$1")
  };
  f.dirpath = function(a) {
    return a.replace(/\\/g, "/").replace(/\/[^\/]*$/, "")
  };
  f.dirname = function(a) {
    return f.filename(f.dirpath(a))
  };
  f.filename = function(a) {
    return a ? a.replace(/^.*[\\\/]/, "") : ""
  };
  f.filenameSansExtension = function(a) {
    return f.filename(a).split(".").shift()
  };
  f.extension = function(a) {
    return a ? a.split(".").pop().toLowerCase() : ""
  };
  f.lpad = function(a, e, b) {
    for (; a.length < b;) a = e + a;
    return a
  };
  f.rpad = function(a, e, b) {
    for (; a.length < b;) a += e;
    return a
  };
  f.ellipse = function(a, e) {
    return a <= e ? a : a.substr(0, e - 3) + String.fromCharCode(8230)
  };
  f.encode_utf8 = function(a) {
    return unescape(encodeURIComponent(a))
  };
  f.decode_utf8 = function(a) {
    return decodeURIComponent(escape(a))
  };
  f.join = function(a, e) {
    return a.join(e)
  };
  if (!("trim" in String.prototype)) {
    var e = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
    String.prototype.trim = function(a) {
      return this.replace(e, "")
    }
  }
  "startsWith" in String.prototype || (String.prototype.startsWith =
    function(a, e) {
      e = e || 0;
      return this.lastIndexOf(a, e) === e
    });
  "undefined" !== typeof module && module.exports && (module.exports =
    f)
})(sketch);
(function(g) {
  "object" === typeof exports ? module.exports = g() : "function" ===
    typeof define && define.amd ? define(g) : (sketch.util = sketch.util || {},
      sketch.util.MD5 = g().hash)
})(function() {
  var g = function(a, b) {
      return a + b & 4294967295
    },
    f = function(a, b, h, c, k, e) {
      b = g(g(b, a), g(c, e));
      return g(b << k | b >>> 32 - k, h)
    },
    d = function(a, b, h, c, k, e, p) {
      return f(b & h | ~b & c, a, b, k, e, p)
    },
    a = function(a, b, h, c, k, e, p) {
      return f(b & c | h & ~c, a, b, k, e, p)
    },
    e = function(a, b, h, c, k, e, p) {
      return f(h ^ (b | ~c), a, b, k, e, p)
    },
    q = function(b, c) {
      var h = b[0],
        r = b[1],
        k = b[2],
        v = b[3],
        h = d(h, r, k, v, c[0], 7, -680876936),
        v = d(v, h, r, k, c[1], 12, -389564586),
        k = d(k, v, h, r, c[2], 17, 606105819),
        r = d(r, k, v, h, c[3], 22, -1044525330),
        h = d(h, r, k, v, c[4], 7, -176418897),
        v = d(v, h, r, k, c[5], 12, 1200080426),
        k = d(k, v, h, r, c[6], 17, -1473231341),
        r = d(r, k, v, h, c[7], 22, -45705983),
        h = d(h, r, k, v, c[8], 7, 1770035416),
        v = d(v, h, r, k, c[9], 12, -1958414417),
        k = d(k, v, h, r, c[10], 17, -42063),
        r = d(r, k, v, h, c[11], 22, -1990404162),
        h = d(h, r, k, v, c[12], 7, 1804603682),
        v = d(v, h, r, k, c[13], 12, -40341101),
        k = d(k, v, h, r, c[14], 17, -1502002290),
        r = d(r, k, v, h, c[15], 22, 1236535329),
        h = a(h, r, k, v, c[1], 5, -165796510),
        v = a(v, h, r, k, c[6], 9, -1069501632),
        k = a(k, v, h, r, c[11], 14, 643717713),
        r = a(r, k, v, h, c[0], 20, -373897302),
        h = a(h, r, k, v, c[5], 5, -701558691),
        v = a(v, h, r, k, c[10], 9, 38016083),
        k = a(k, v, h, r, c[15], 14, -660478335),
        r = a(r, k, v, h, c[4], 20, -405537848),
        h = a(h, r, k, v, c[9], 5, 568446438),
        v = a(v, h, r, k, c[14], 9, -1019803690),
        k = a(k, v, h, r, c[3], 14, -187363961),
        r = a(r, k, v, h, c[8], 20, 1163531501),
        h = a(h, r, k, v, c[13], 5, -1444681467),
        v = a(v, h, r, k, c[2], 9, -51403784),
        k = a(k, v, h, r, c[7], 14, 1735328473),
        r = a(r, k, v, h, c[12], 20, -1926607734),
        h = f(r ^ k ^ v, h, r, c[5], 4, -378558),
        v = f(h ^ r ^ k, v, h, c[8], 11, -2022574463),
        k = f(v ^ h ^ r, k, v, c[11], 16, 1839030562),
        r = f(k ^ v ^ h, r, k, c[14], 23, -35309556),
        h = f(r ^ k ^ v, h, r, c[1], 4, -1530992060),
        v = f(h ^ r ^ k, v, h, c[4], 11, 1272893353),
        k = f(v ^ h ^ r, k, v, c[7], 16, -155497632),
        r = f(k ^ v ^ h, r, k, c[10], 23, -1094730640),
        h = f(r ^ k ^ v, h, r, c[13], 4, 681279174),
        v = f(h ^ r ^ k, v, h, c[0], 11, -358537222),
        k = f(v ^ h ^ r, k, v, c[3], 16, -722521979),
        r = f(k ^ v ^ h, r, k, c[6], 23, 76029189),
        h = f(r ^ k ^ v, h, r, c[9], 4, -640364487),
        v = f(h ^ r ^ k, v, h, c[12], 11, -421815835),
        k = f(v ^ h ^ r, k, v, c[15], 16, 530742520),
        r = f(k ^ v ^ h, r, k, c[2], 23, -995338651),
        h = e(h, r, k, v, c[0], 6, -198630844),
        v = e(v, h, r, k, c[7], 10, 1126891415),
        k = e(k, v, h, r, c[14], 15, -1416354905),
        r = e(r, k, v, h, c[5], 21, -57434055),
        h = e(h, r, k, v, c[12], 6, 1700485571),
        v = e(v, h, r, k, c[3], 10, -1894986606),
        k = e(k, v, h, r, c[10], 15, -1051523),
        r = e(r, k, v, h, c[1], 21, -2054922799),
        h = e(h, r, k, v, c[8], 6, 1873313359),
        v = e(v, h, r, k, c[15], 10, -30611744),
        k = e(k, v, h, r, c[6], 15, -1560198380),
        r = e(r, k, v, h, c[13], 21, 1309151649),
        h = e(h, r, k, v, c[4], 6, -145523070),
        v = e(v, h, r, k, c[11], 10, -1120210379),
        k = e(k, v, h, r, c[2],
          15, 718787259),
        r = e(r, k, v, h, c[9], 21, -343485551);
      b[0] = g(h, b[0]);
      b[1] = g(r, b[1]);
      b[2] = g(k, b[2]);
      b[3] = g(v, b[3])
    },
    l = function(a) {
      var b = [],
        h;
      for (h = 0; 64 > h; h += 4) b[h >> 2] = a.charCodeAt(h) + (a.charCodeAt(
        h + 1) << 8) + (a.charCodeAt(h + 2) << 16) + (a.charCodeAt(h +
        3) << 24);
      return b
    },
    b = function(a) {
      var b = [],
        h;
      for (h = 0; 64 > h; h += 4) b[h >> 2] = a[h] + (a[h + 1] << 8) +
        (a[h + 2] << 16) + (a[h + 3] << 24);
      return b
    },
    c = function(a) {
      var b = a.length,
        h = [1732584193, -271733879, -1732584194, 271733878],
        c, k, e;
      for (c = 64; c <= b; c += 64) q(h, l(a.substring(c - 64, c)));
      a = a.substring(c -
        64);
      k = a.length;
      e = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
      for (c = 0; c < k; c += 1) e[c >> 2] |= a.charCodeAt(c) << (c % 4 <<
        3);
      e[c >> 2] |= 128 << (c % 4 << 3);
      if (55 < c)
        for (q(h, e), c = 0; 16 > c; c += 1) e[c] = 0;
      b = (8 * b).toString(16).match(/(.*?)(.{0,8})$/);
      a = parseInt(b[2], 16);
      b = parseInt(b[1], 16) || 0;
      e[14] = a;
      e[15] = b;
      q(h, e);
      return h
    },
    p = "0123456789abcdef".split(""),
    w = function(a) {
      var b;
      for (b = 0; b < a.length; b += 1) {
        for (var h = a, c = b, k = a[b], e = "", d = void 0, d = 0; 4 >
          d; d += 1) e += p[k >> 8 * d + 4 & 15] + p[k >> 8 * d & 15];
        h[c] = e
      }
      return a.join("")
    },
    m = function() {
      this.reset()
    };
  "5d41402abc4b2a76b9719d911017c592" !==
  w(c("hello")) && (g = function(a, b) {
    var h = (a & 65535) + (b & 65535);
    return (a >> 16) + (b >> 16) + (h >> 16) << 16 | h & 65535
  });
  m.prototype.append = function(a) {
    /[\u0080-\uFFFF]/.test(a) && (a = unescape(encodeURIComponent(a)));
    this.appendBinary(a);
    return this
  };
  m.prototype.appendBinary = function(a) {
    this._buff += a;
    this._length += a.length;
    a = this._buff.length;
    var b;
    for (b = 64; b <= a; b += 64) q(this._state, l(this._buff.substring(
      b - 64, b)));
    this._buff = this._buff.substr(b - 64);
    return this
  };
  m.prototype.end = function(a) {
    var b = this._buff,
      h = b.length,
      c, k = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    for (c = 0; c < h; c += 1) k[c >> 2] |= b.charCodeAt(c) << (c % 4 <<
      3);
    this._finish(k, h);
    a = a ? this._state : w(this._state);
    this.reset();
    return a
  };
  m.prototype._finish = function(a, b) {
    var h = b,
      c;
    a[h >> 2] |= 128 << (h % 4 << 3);
    if (55 < h)
      for (q(this._state, a), h = 0; 16 > h; h += 1) a[h] = 0;
    c = 8 * this._length;
    c = c.toString(16).match(/(.*?)(.{0,8})$/);
    h = parseInt(c[2], 16);
    c = parseInt(c[1], 16) || 0;
    a[14] = h;
    a[15] = c;
    q(this._state, a)
  };
  m.prototype.reset = function() {
    this._buff = "";
    this._length = 0;
    this._state = [1732584193, -271733879, -1732584194, 271733878];
    return this
  };
  m.prototype.destroy = function() {
    delete this._state;
    delete this._buff;
    delete this._length
  };
  m.hash = function(a, b) {
    /[\u0080-\uFFFF]/.test(a) && (a = unescape(encodeURIComponent(a)));
    var h = c(a);
    return b ? h : w(h)
  };
  m.hashBinary = function(a, b) {
    var h = c(a);
    return b ? h : w(h)
  };
  m.ArrayBuffer = function() {
    this.reset()
  };
  m.ArrayBuffer.prototype.append = function(a) {
    var c = this._concatArrayBuffer(this._buff, a),
      h = c.length;
    this._length += a.byteLength;
    for (a = 64; a <= h; a += 64) q(this._state, b(c.subarray(a -
      64, a)));
    this._buff = a - 64 < h ? c.subarray(a - 64) : new Uint8Array(0);
    return this
  };
  m.ArrayBuffer.prototype.end = function(a) {
    var b = this._buff,
      h = b.length,
      c = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      k;
    for (k = 0; k < h; k += 1) c[k >> 2] |= b[k] << (k % 4 << 3);
    this._finish(c, h);
    a = a ? this._state : w(this._state);
    this.reset();
    return a
  };
  m.ArrayBuffer.prototype._finish = m.prototype._finish;
  m.ArrayBuffer.prototype.reset = function() {
    this._buff = new Uint8Array(0);
    this._length = 0;
    this._state = [1732584193, -271733879, -1732584194, 271733878];
    return this
  };
  m.ArrayBuffer.prototype.destroy = m.prototype.destroy;
  m.ArrayBuffer.prototype._concatArrayBuffer = function(a, b) {
    var h = a.length,
      c = new Uint8Array(h + b.byteLength);
    c.set(a);
    c.set(new Uint8Array(b), h);
    return c
  };
  m.ArrayBuffer.hash = function(a, c) {
    var h = new Uint8Array(a),
      e = h.length,
      k = [1732584193, -271733879, -1732584194, 271733878],
      v, p, s;
    for (v = 64; v <= e; v += 64) q(k, b(h.subarray(v - 64, v)));
    h = v - 64 < e ? h.subarray(v - 64) : new Uint8Array(0);
    p = h.length;
    s = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    for (v = 0; v < p; v += 1) s[v >> 2] |= h[v] << (v % 4 <<
      3);
    s[v >> 2] |= 128 << (v % 4 << 3);
    if (55 < v)
      for (q(k, s), v = 0; 16 > v; v += 1) s[v] = 0;
    e = (8 * e).toString(16).match(/(.*?)(.{0,8})$/);
    h = parseInt(e[2], 16);
    e = parseInt(e[1], 16) || 0;
    s[14] = h;
    s[15] = e;
    q(k, s);
    return c ? k : w(k)
  };
  return m
});
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.util = g.util || {};
  g.util.Queue = function(f) {
    var d = this,
      a = f.oncomplete || f.callback,
      e = f.onprogress || f.progress,
      q = !1 === f.flatten ? !1 : !0;
    this.cancel = function() {
      if (!(d.canceled || 0 >= d.remaining)) {
        if (f.oncancel) f.oncancel();
        d.canceled = !0
      }
    };
    this.next = function() {
      if (!d.canceled && !d.complete) {
        var l = d.queue,
          b = d.remaining,
          c = d.length,
          p = c - b - 1,
          w = d.keys[p];
        e && e(c ? 1 - (b + 1) / c : 1);
        if (l.length)
          if (d.remaining--, c = (b = "[object Object]" === String(m)) &&
            m.length, q) f.next.call(d, l.shift(), w, p);
          else {
            var m = l[0];
            b && !c &&
              l.shift();
            b && c ? f.next.call(d, m.shift(), w, p) : f.next.call(d, l.shift(),
              w, p)
          } else d.complete = !0, a && a()
      }
    };
    this.reset = function(a) {
      if (f.range) {
        var b = f.range,
          c = b.from;
        for (a = []; c <= b.to; c++) a.push(c)
      } else a = a || f.items;
      this.length = 0;
      this.remaining = -1;
      this.queue = [];
      this.keys = [];
      this.canceled = this.complete = !1;
      var e = function(a, b) {
        if (Array.isArray(a) || a instanceof NodeList)
          for (var c = 0; c < a.length; c++) b(c);
        else
          for (c in a) b(c)
      };
      e(a, function(b) {
        var c = a[b];
        if ("[object Object]" !== String(c) || q) d.queue.push(c), d
          .keys.push(b),
          d.length++, d.remaining++;
        else {
          var f = [];
          d.queue.push(f);
          e(c, function(a) {
            f.push(c[a]);
            d.keys.push(b);
            d.length++;
            d.remaining++
          })
        }
      })
    };
    this.reset();
    f.instant ? d.next() : setTimeout(function() {
      d.next()
    }, 0);
    return this
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.util.Queue)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.lang = g.lang || {
      locales: {
        en: {}
      }
    },
    d = g.util,
    a;
  f.setLocale = function(b, c) {
    a ? (a.setLocale(b), c && c()) : (b = f.getLocale(b), a = new e({
      directory: "./js/lang",
      locale: b,
      extension: ".json",
      onerror: function() {
        f.setLocale("en", c)
      },
      onload: function(a) {
        g.feature.lang = b;
        c && c()
      }
    }));
    f.translate = a.__.bind ? a.__.bind(a) : function() {
      return a.__.apply(a, arguments)
    }
  };
  f.getLocale = function(a) {
    "auto" === a && (a = g.client.lang);
    return f.available[a] ? a : -1 !== a.indexOf("-") ? f.getLocale(a
      .split("-")[0]) : "en"
  };
  f.getWordCount =
    function() {
      var a = 0,
        c;
      for (c in f.locales.en) a += d.count(f.locales.en[c].split(" "));
      console.log(a)
    };
  var e = function(a) {
    for (var c in a) this[c] = a[c];
    this.setLocale(this.locale)
  };
  e.localeCache = {};
  e.prototype = {
    defaultLocale: "en",
    directory: "/locales",
    extension: ".min.json",
    getLocale: function() {
      return this.locale
    },
    setLocale: function(a) {
      a || (a = document.querySelector("html").getAttribute("lang"));
      a || (a = this.defaultLocale);
      this.locale = a;
      f.locales[a] ? (this.setLocaleData(a, f.locales[a]), this.onload &&
          this.onload()) :
        a in e.localeCache || (this.getLocaleFileFromServer(), e.localeCache[
          a] = {})
    },
    setLocaleData: function(a, c) {
      e.localeCache[a] = c
    },
    getLocaleFileFromServer: function(a) {
      var c = this.onload,
        p = this.locale;
      d.request({
        url: this.directory + "/" + p + this.extension,
        headers: {
          "Content-Type": "text/plain;charset=UTF-8"
        },
        onerror: this.onerror,
        onload: function(a) {
          data = JSON.parse(a.target.responseText);
          e.localeCache[p] = data;
          c && c(data)
        }
      })
    },
    __: function() {
      var a = arguments[0],
        a = e.localeCache[this.locale][a] || a;
      1 < arguments.length && (a = l(a,
        Array.prototype.slice.call(arguments, 1)));
      return a
    },
    __n: function(a, c) {
      var p = e.localeCache[this.locale][a];
      c = parseInt(c, 10);
      p = 0 === c ? p.zero : 1 < c ? p.other : p.one;
      p = l(p, [c]);
      2 < arguments.length && (p = l(p, Array.prototype.slice.call(
        arguments, 2)));
      return p
    }
  };
  var q = d.sprintf = function(a) {
      if ("string" !== typeof a) throw "sprintf: The first arguments need to be a valid format string.";
      for (var c = new RegExp(
            /%(\+)?([0 ]|'(.))?(-)?([0-9]+)?(\.([0-9]+))?([%bcdfosxX])/g),
          e, d = [], m = 1; e = c.exec(a);) {
        if (m >= arguments.length && "%" !==
          e[8]) throw "sprintf: At least one argument was missing.";
        d[d.length] = {
          begin: e.index,
          end: e.index + e[0].length,
          sign: "+" == e[1],
          negative: 0 > parseFloat(arguments[m]) ? !0 : !1,
          padding: void 0 == e[2] ? " " : "'" == e[2].substring(0, 1) ?
            e[3] : e[2],
          alignLeft: "-" == e[4],
          width: void 0 != e[5] ? e[5] : !1,
          precision: void 0 != e[7] ? e[7] : !1,
          type: e[8],
          data: "%" != e[8] ? String(arguments[m++]) : !1
        }
      }
      c = "";
      for (m = e = 0; m < d.length; ++m) {
        c += a.substring(e, d[m].begin);
        e = d[m].end;
        var q = "";
        switch (d[m].type) {
          case "%":
            q = "%";
            break;
          case "b":
            q = Math.abs(parseInt(d[m].data)).toString(2);
            break;
          case "c":
            q = String.fromCharCode(Math.abs(parseInt(d[m].data)));
            break;
          case "d":
            q = String(Math.abs(parseInt(d[m].data)));
            break;
          case "f":
            q = !1 === d[m].precision ? String(Math.abs(parseFloat(d[m].data))) :
              Math.abs(parseFloat(d[m].data)).toFixed(d[m].precision);
            break;
          case "o":
            q = Math.abs(parseInt(d[m].data)).toString(8);
            break;
          case "s":
            q = d[m].data.substring(0, d[m].precision ? d[m].precision : d[
              m].data.length);
            break;
          case "x":
            q = Math.abs(parseInt(d[m].data)).toString(16).toLowerCase();
            break;
          case "X":
            q = Math.abs(parseInt(d[m].data)).toString(16).toUpperCase();
            break;
          default:
            throw "sprintf: Unknown type \u201c" + d[m].type +
              "\u201d detected. This should never happen. Maybe the regex is wrong.";
        }
        if ("%" != d[m].type) {
          if (!1 != d[m].width && d[m].width > q.length)
            for (var l = q.length, h = 0; h < d[m].width - l; ++h) q = !0 ==
              d[m].alignLeft ? q + d[m].padding : d[m].padding + q;
          if ("b" == d[m].type || "d" == d[m].type || "o" == d[m].type ||
            "f" == d[m].type || "x" == d[m].type || "X" == d[m].type) !0 ==
            d[m].negative ? q = "-" + q : !0 == d[m].sign && (q = "+" + q)
        }
        c += q
      }
      return c += a.substring(e, a.length)
    },
    l = d.vsprintf = function(a, c, e) {
      e =
        c.slice(0);
      e.splice(0, 0, a);
      return q.apply(null, e)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.lang = g.lang || {};
  g.lang.locales = g.lang.locales || {};
  g.lang.available = {
    de: {
      en: "German",
      "native": "Deutsch"
    },
    en: {
      en: "English",
      "native": "English"
    },
    es: {
      en: "Spanish",
      "native": "Espa\u00f1ol"
    },
    fr: {
      en: "French",
      "native": "Fran\u00e7ais"
    },
    it: {
      en: "Italian",
      "native": "Italiano"
    },
    nl: {
      en: "Dutch",
      "native": "Nederlands"
    },
    pl: {
      en: "Polish",
      "native": "Polski"
    },
    pt: {
      en: "Portuguese",
      "native": "Portugu\u00eas"
    },
    sv: {
      en: "Swedish",
      "native": "Svenska"
    },
    ar: {
      en: "Arabic",
      "native": "\u0627\u0644\u0639\u0631\u0628\u064a\u0629"
    },
    ko: {
      en: "Korean",
      "native": "\ud55c\uad6d\uc5b4"
    },
    ja: {
      en: "Japanese",
      "native": "\u65e5\u672c\u8a9e"
    },
    ru: {
      en: "Russian",
      "native": "\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u042f\u0437\u044b\u043a"
    },
    zh: {
      en: "Chinese",
      "native": "\u4e2d\u6587"
    }
  };
  g.util.cloneInto({
      en: {
        "about-version": "[?] SketchAPI %s",
        "delete-doc-confirm": "Are you sure?",
        "change-doc-confirm": "Save current image?",
        "select-tool-count": "%s layers selected",
        "select-tool-message": "Use the <span class='icon-select'></span> Select tool to Move, Rotate, Scale, Delete, and reorganize the layers of your design.",
        "useMaxCopies-alert": "You can only include %s %s of this clipart.",
        "welcome-to": "Welcome to %s",
        "zoom-tool-message": "Use the <span class='icon-zoom'></span> Zoom tool to fine tune your image.",
        start: "Start",
        "load-fail-restore": "Last time your document did not load properly.<p>Do you want to re-attempt to load your document?",
        "console-message": "Sketch.io developes HTML5 graphics applications.\nWe specialize in WebGL, WebRTC and Canvas.\n\nVisit https://sketch.io/ for project inquiries.",
        "copy-to-clipboard": "Copy to Clipboard",
        "could-not-authorize": "%s could not authorize",
        "image-ready-to-share": "Your image is ready to be shared!",
        "share-link-copied": "Share link copied!",
        "still-uploading": "Still uploading to %s",
        "upload-complete": "%s upload complete!",
        "upload-failed": "%s upload failed!",
        "uploading-to": "Uploading to %s",
        "changes-saved": "All changes saved!",
        "upload-invalid": "Invalid format uploaded",
        "user-entered": "%s has entered the room.",
        "user-exited": "%s has left the room.",
        author: "Author",
        license: "License",
        project: "File",
        "special-thanks": "Special thanks",
        background: "Background",
        "change-media": "Change Media",
        "cut-objects": "Cut Selection",
        "merge-objects": "Merge Objects",
        "merge-paths": "Merge Paths",
        "new-doc-created": "New Document Created!",
        "new-doc": "New Document",
        "paste-objects": "Paste Selection",
        "resize-doc": "Resize File",
        "remove-objects": "Remove Selection",
        "reset-clipart-color": "Reset Clipart Color",
        "split-path": "Split Path",
        "update-clipart-color": "Change Clipart Color",
        "update-style": "Update Style",
        "update-text": "Update Text",
        angle: "Angle",
        antialias: "Antialias",
        anticlockwise: "Anticlockwise",
        blend: "Blend",
        bristles: "Bristles",
        coils: "Coils",
        composite: "Composite",
        constrain: "Constrain",
        content: "Content",
        contract: "Contract",
        cutout: "Cutout",
        diameter: "Size",
        distance: "Distance",
        fill: "Fill",
        increment: "Increment",
        innerRadius: "Inner Radius",
        lineWidth: "Line Width",
        lookback: "Lookback",
        opacity: "Opacity",
        outerRadius: "Outer Radius",
        palette: "Palette",
        points: "Points",
        ratio: "Ratio",
        reset: "Reset",
        roundness: "Roundness",
        imperfection: "Imperfection",
        sides: "Sides",
        slope: "Slope",
        spacing: "Spacing",
        speed: "Speed",
        spread: "Spread",
        stroke: "Outline",
        arrow: "Arrow",
        brush: "Brush",
        calligraphy: "Calligraphy",
        chrome: "Chrome",
        crayon: "Pencil",
        eraser: "Eraser",
        fur: "Fur",
        paintbrush: "Paintbrush",
        pen: "Pen",
        pencil: "Pencil",
        marker: "Marker",
        sketchy: "Sketchy",
        spirograph: "Spirograph",
        spraypaint: "Spraypaint",
        streamer: "Streamer",
        web: "Web",
        oil: "Oil",
        burst: "Burst",
        circle: "Circle",
        ellipse: "Ellipse",
        gear: "Gear",
        pie: "Pie",
        radialBurst: "Radial Burst",
        rectangle: "Rectangle",
        regularPolygon: "Regular Polygon",
        ring: "Ring",
        shape: "Shape",
        spiral: "Spiral",
        square: "Square",
        star: "Star",
        triangle: "Triangle",
        select: "Select",
        "quick-selection": "Quick Selection",
        "add-to-selection": "Add to Selection",
        "subtract-from-selection": "Subtract from Selection",
        "select-all": "Select all",
        "select-inverse": "Select inverse",
        unselect: "Unselect",
        "crop-draw": "Crop Area",
        crop: "Crop",
        "screenshot-log": "Click & drag to create your screenshot.",
        screenshot: "Screenshot",
        "take-snapshot": "Take Snapshot",
        zoom: "Zoom",
        "zoom-in": "Zoom in",
        "zoom-out": "Zoom out",
        "zoom-to-default": "Zoom to actual size",
        stamp: "Stamp",
        "choose-stamp": "Set stamp category",
        "convert-to-stamp": "Convert to Stamp",
        clipart: "Clipart",
        "load-your-own-image": "Load your own image",
        "choose-clipart": "Set clipart category",
        floodfill: "Floodfill",
        contiguous: "Contiguous",
        tolerance: "Tolerance",
        text: "Text",
        fontFamily: "Font Family",
        fontSize: "Font Size",
        fontStyle: "Font Style",
        fontVariant: "Font Variant",
        fontWeight: "Font Weight",
        textAlign: "Text Align",
        textDecoration: "Text Decoration",
        textTransform: "Text Transform",
        whiteSpace: "White Space",
        "choose-font": "Set font family",
        brightness: "Brightness",
        camera: "Camera",
        contrast: "Contrast",
        exposure: "Exposure",
        hue: "Hue",
        luminosity: "Luminosity",
        saturation: "Saturation",
        temperature: "Temperature",
        tint: "Tint",
        blur: "Blur",
        pixelSize: "Pixel Size",
        copy: "Copy",
        "copy-all": "Copy all",
        cut: "Cut",
        "cut-all": "Cut all",
        "delete": "Delete",
        duplicate: "Duplicate",
        "layer-backwards": "Send Backwards",
        "layer-forwards": "Send Forwards",
        "layer-to-back": "Send to Back",
        "layer-to-front": "Send to Front",
        paste: "Paste",
        history: "History",
        undo: "Undo",
        redo: "Redo",
        move: "Move",
        "move-left": "Move Left",
        "move-right": "Move Right",
        "move-up": "Move Up",
        "move-down": "Move Down",
        rotate: "Rotate",
        scale: "Scale",
        transform: "Transform",
        translate: "Translate",
        "click-to-edit": "Click to Edit",
        "click-to-select": "Click to Select",
        "dbltap-to-edit": "Double Click to Edit",
        "drag-to-move": "Drag to Move",
        "drag-to-resize": "Drag to Resize",
        "drag-to-rotate": "Drag to Rotate",
        black: "Black",
        blueprint: "Blueprint",
        graphPaper: "Graph Paper",
        grid: "Grid",
        lined: "Lined",
        looseLeaf: "Loose Leaf",
        notebook: "Notebook",
        transparent: "Transparent",
        white: "White",
        color: "Color",
        gradient: "Gradient",
        pattern: "Pattern",
        eyedropper: "Eyedropper",
        "choose-blend": "Set blending mode",
        "color-burn": "Color Burn",
        "color-dodge": "Color Dodge",
        darken: "Darken",
        difference: "Difference",
        disco: "Disco",
        erase: "Erase",
        exclusion: "Exclusion",
        "hard-light": "Hard Light",
        lighten: "Lighten",
        multiply: "Multiply",
        normal: "Normal",
        overlay: "Overlay",
        screen: "Screen",
        "soft-light": "Soft Light",
        "source-atop": "Source Atop",
        "destination-over": "Destination Over",
        cancel: "Cancel",
        "continue": "Continue",
        "delete-doc": "Delete",
        ok: "Ok",
        "open-doc": "Open",
        quit: "Quit",
        download: "Download",
        "download-format": "Download %s",
        save: "Save",
        "save-format": "Save %s",
        dontSave: "Don&rsquo;t Save",
        "keyboard-shortcuts": "Keyboard Shortcuts",
        shortcuts: "Shortcuts",
        "ask-question": "Ask Question",
        "draw-with-friend": "Draw with a friend",
        "report-bug": "Report Bug",
        "request-feature": "Request Feature",
        connecting: "Connecting",
        "decoding-format": "Decoding %s",
        downloading: "Downloading",
        loading: "Loading",
        "loading-error": "Error loading",
        "opening-format": "Opening %s",
        "reading-files": "Reading files",
        "reading-format": "Reading %s",
        rendering: "Rendering",
        syncing: "Syncing",
        "choose-brush": "Choose Brush",
        "choose-media": "Choose Media",
        "choose-shape": "Choose Shape",
        "choose-utility": "Choose Utility",
        "choose-units": "Set units",
        "%": "%",
        cm: "cm",
        inches: "inches",
        mm: "mm",
        pixels: "pixels",
        "choose-fill": "Set fill style",
        "choose-stroke": "Set outline style",
        about: "About",
        attachment: "Attachment",
        "community-page": "Community",
        configure: "Configure",
        "export": "Export",
        file: "File",
        layers: "Layers",
        menu: "Sidebar",
        "my-docs": "My Files",
        "new": "New",
        open: "Open",
        print: "Print",
        "video-tutorials": "Video Tutorials",
        "choose-preset-size": "Set preset size",
        "sans serif": "Sans Serif",
        serif: "Serif",
        display: "Display",
        bold: "Bold",
        handwriting: "Handwriting",
        plants: "Plants",
        people: "People",
        animals: "Animals",
        "water colors": "Water colors",
        typogrunge: "Typogrunge",
        tizzape: "Tizzape",
        "simple smudges": "Simple Smudges",
        retro: "Retro",
        leafs: "Leafs",
        footprints: "Footprints",
        flowers: "Flowers",
        doodles: "Doodles",
        butterflies: "Butterflies",
        "aspect-ratio": "Aspect Ratio",
        "choose-aspect-ratio": "Set Aspect Ratio",
        "choose-constrain": "Constrain Proportions",
        "hide-layer": "Hide layer",
        "show-layer": "Show layer",
        "convert-format": "Convert to %s",
        "update-format": "Update %s",
        image: "Image",
        saving: "Saving",
        colorNoise: "Noise",
        colorMode: "Type",
        linear: "Linear Gradient",
        radial: "Radial Gradient",
        cycle: "Color Cycle",
        lineJoin: "Corner",
        lineCap: "Cap",
        round: "Round",
        bevel: "Bevel",
        miter: "Miter",
        enable: "Enable",
        disable: "Disable",
        projects: "Files",
        paper: "Paper",
        quality: "Quality",
        fileFormat: "Format",
        sizeTo: "Size To",
        size: "Size",
        percent: "Percent",
        share: "Share",
        dpi: "DPI",
        settings: "Settings",
        tool: "Tool",
        width: "Width",
        height: "Height",
        x: "X",
        y: "Y",
        "no-layers": "No layers added",
        "layer-order": "Layer Order",
        document: "Document",
        library: "Library",
        utilities: "Utilities",
        brushes: "Brushes",
        shapes: "Shapes",
        highlighter: "Highlighter",
        polyarrow: "Arrow",
        polyline: "Line",
        polygon: "Polygon",
        path: "Path",
        help: "Help",
        curved: "Curved",
        textbrush: "Textbrush",
        shader: "Shader",
        fitWithin: "Fit Within",
        "72dpi": "72\u2014Web",
        "150dpi": "150\u2014Draft Printing",
        "300dpi": "300\u2014High-Res Printing",
        "upload-as-new": "Upload as new",
        place: "Place into",
        upload: "Upload",
        resize: "Resize",
        dimensions: "Dimensions",
        apply: "Apply",
        create: "Create",
        "set-background": "Change Background",
        rename: "Rename",
        "screenshot-tool-message": "Use the <span class='icon-screenshot'></span> Screenshot tool to download a selection of your drawing."
      },
      fr: {
        "about-version": "[?] SketchAPI %s",
        "delete-doc-confirm": "Etes vous sure?",
        "change-doc-confirm": "Sauvegarder l'image?",
        "select-tool-count": "%s layers selectionner",
        "select-tool-message": "Utiliser l'icon <span class='icon-select'></span> Selectioner pour bouger, tourner, agrandir, suprimer et reorganiser les layers de votre dessin.",
        "useMaxCopies-alert": "Vous ne pouvez inclure que %s %s de ce clipart.",
        "welcome-to": "Bienvenu a %s",
        "zoom-tool-message": "Utiliser la <span class='icon-zoom'></span> Zoom tool to fine tune your image.",
        start: "Commencer",
        "load-fail-restore": "Last time your document did not load properly.<p>Do you want to re-attempt to load your document?",
        "console-message": "Sketch.io developes HTML5 graphics applications.\nWe specialize in WebGL, WebRTC and Canvas.\n\nVisit https://sketch.io/ for project inquiries.",
        "copy-to-clipboard": "Copy to Clipboard",
        "could-not-authorize": "%s could not authorize",
        "image-ready-to-share": "Your image is ready to be shared!",
        "share-link-copied": "Share link copied!",
        "still-uploading": "Still uploading to %s",
        "upload-complete": "%s upload complete!",
        "upload-failed": "%s upload failed!",
        "uploading-to": "Uploading to %s",
        "changes-saved": "All changes saved!",
        "upload-invalid": "Invalid format uploaded",
        "user-entered": "%s has entered the room.",
        "user-exited": "%s has left the room.",
        author: "Author",
        license: "License",
        project: "File",
        "special-thanks": "Special thanks",
        background: "Background",
        "change-media": "Change Media",
        "cut-objects": "Cut Selection",
        "merge-objects": "Merge Objects",
        "merge-paths": "Merge Paths",
        "new-doc-created": "New Document Created!",
        "new-doc": "New Document",
        "paste-objects": "Paste Selection",
        "resize-doc": "Resize File",
        "remove-objects": "Remove Selection",
        "reset-clipart-color": "Reset Clipart Color",
        "split-path": "Split Path",
        "update-clipart-color": "Change Clipart Color",
        "update-style": "Update Style",
        "update-text": "Update Text",
        angle: "Angle",
        antialias: "Antialias",
        anticlockwise: "Anticlockwise",
        blend: "Blend",
        bristles: "Bristles",
        coils: "Coils",
        composite: "Composite",
        constrain: "Constrain",
        content: "Content",
        contract: "Contract",
        cutout: "Cutout",
        diameter: "Size",
        distance: "Distance",
        fill: "Fill",
        increment: "Increment",
        innerRadius: "Inner Radius",
        lineWidth: "Line Width",
        lookback: "Lookback",
        opacity: "Opacity",
        outerRadius: "Outer Radius",
        palette: "Palette",
        points: "Points",
        ratio: "Ratio",
        reset: "Reset",
        roundness: "Roundness",
        imperfection: "Imperfection",
        sides: "Sides",
        slope: "Slope",
        spacing: "Spacing",
        speed: "Speed",
        spread: "Spread",
        stroke: "Outline",
        arrow: "Arrow",
        brush: "Brush",
        calligraphy: "Calligraphy",
        chrome: "Chrome",
        crayon: "Pencil",
        eraser: "Eraser",
        fur: "Fur",
        paintbrush: "Paintbrush",
        pen: "Pen",
        pencil: "Pencil",
        marker: "Marker",
        sketchy: "Sketchy",
        spirograph: "Spirograph",
        spraypaint: "Spraypaint",
        streamer: "Streamer",
        web: "Web",
        oil: "Oil",
        burst: "Burst",
        circle: "Circle",
        ellipse: "Ellipse",
        gear: "Gear",
        pie: "Pie",
        radialBurst: "Radial Burst",
        rectangle: "Rectangle",
        regularPolygon: "Regular Polygon",
        ring: "Ring",
        shape: "Shape",
        spiral: "Spiral",
        square: "Square",
        star: "Star",
        triangle: "Triangle",
        select: "Select",
        "quick-selection": "Quick Selection",
        "add-to-selection": "Add to Selection",
        "subtract-from-selection": "Subtract from Selection",
        "select-all": "Select all",
        "select-inverse": "Select inverse",
        unselect: "Unselect",
        "crop-draw": "Crop Area",
        crop: "Crop",
        "screenshot-log": "Click & drag to create your screenshot.",
        screenshot: "Screenshot",
        "take-snapshot": "Take Snapshot",
        zoom: "Zoom",
        "zoom-in": "Zoom in",
        "zoom-out": "Zoom out",
        "zoom-to-default": "Zoom to actual size",
        stamp: "Stamp",
        "choose-stamp": "Set stamp category",
        "convert-to-stamp": "Convert to Stamp",
        clipart: "Clipart",
        "load-your-own-image": "Load your own image",
        "choose-clipart": "Set clipart category",
        floodfill: "Floodfill",
        contiguous: "Contiguous",
        tolerance: "Tolerance",
        text: "Text",
        fontFamily: "Font Family",
        fontSize: "Font Size",
        fontStyle: "Font Style",
        fontVariant: "Font Variant",
        fontWeight: "Font Weight",
        textAlign: "Text Align",
        textDecoration: "Text Decoration",
        textTransform: "Text Transform",
        whiteSpace: "White Space",
        "choose-font": "Set font family",
        brightness: "Brightness",
        camera: "Camera",
        contrast: "Contrast",
        exposure: "Exposure",
        hue: "Hue",
        luminosity: "Luminosity",
        saturation: "Saturation",
        temperature: "Temperature",
        tint: "Tint",
        blur: "Blur",
        pixelSize: "Pixel Size",
        copy: "Copy",
        "copy-all": "Copy all",
        cut: "Cut",
        "cut-all": "Cut all",
        "delete": "Delete",
        duplicate: "Duplicate",
        "layer-backwards": "Send Backwards",
        "layer-forwards": "Send Forwards",
        "layer-to-back": "Send to Back",
        "layer-to-front": "Send to Front",
        paste: "Paste",
        history: "History",
        undo: "Undo",
        redo: "Redo",
        move: "Move",
        "move-left": "Move Left",
        "move-right": "Move Right",
        "move-up": "Move Up",
        "move-down": "Move Down",
        rotate: "Rotate",
        scale: "Scale",
        transform: "Transform",
        translate: "Translate",
        "click-to-edit": "Click to Edit",
        "click-to-select": "Click to Select",
        "dbltap-to-edit": "Double Click to Edit",
        "drag-to-move": "Drag to Move",
        "drag-to-resize": "Drag to Resize",
        "drag-to-rotate": "Drag to Rotate",
        black: "Black",
        blueprint: "Blueprint",
        graphPaper: "Graph Paper",
        grid: "Grid",
        lined: "Lined",
        looseLeaf: "Loose Leaf",
        notebook: "Notebook",
        transparent: "Transparent",
        white: "White",
        color: "Color",
        gradient: "Gradient",
        pattern: "Pattern",
        eyedropper: "Eyedropper",
        "choose-blend": "Set blending mode",
        "color-burn": "Color Burn",
        "color-dodge": "Color Dodge",
        darken: "Darken",
        difference: "Difference",
        disco: "Disco",
        erase: "Erase",
        exclusion: "Exclusion",
        "hard-light": "Hard Light",
        lighten: "Lighten",
        multiply: "Multiply",
        normal: "Normal",
        overlay: "Overlay",
        screen: "Screen",
        "soft-light": "Soft Light",
        "source-atop": "Source Atop",
        "destination-over": "Destination Over",
        cancel: "Cancel",
        "continue": "Continue",
        "delete-doc": "Delete",
        ok: "Ok",
        "open-doc": "Open",
        quit: "Quit",
        download: "Download",
        "download-format": "Download %s",
        save: "Save",
        "save-format": "Save %s",
        dontSave: "Don&rsquo;t Save",
        "keyboard-shortcuts": "Keyboard Shortcuts",
        shortcuts: "Shortcuts",
        "ask-question": "Ask Question",
        "draw-with-friend": "Draw with a friend",
        "report-bug": "Report Bug",
        "request-feature": "Request Feature",
        connecting: "Connecting",
        "decoding-format": "Decoding %s",
        downloading: "Downloading",
        loading: "Loading",
        "loading-error": "Error loading",
        "opening-format": "Opening %s",
        "reading-files": "Reading files",
        "reading-format": "Reading %s",
        rendering: "Rendering",
        syncing: "Syncing",
        "choose-brush": "Choose Brush",
        "choose-media": "Choose Media",
        "choose-shape": "Choose Shape",
        "choose-utility": "Choose Utility",
        "choose-units": "Set units",
        "%": "%",
        cm: "cm",
        inches: "inches",
        mm: "mm",
        pixels: "pixels",
        "choose-fill": "Set fill style",
        "choose-stroke": "Set outline style",
        about: "About",
        attachment: "Attachment",
        "community-page": "Community",
        configure: "Configure",
        "export": "Export",
        file: "File",
        layers: "Layers",
        menu: "Sidebar",
        "my-docs": "My Files",
        "new": "New",
        open: "Open",
        print: "Print",
        "video-tutorials": "Video Tutorials",
        "choose-preset-size": "Set preset size",
        "sans serif": "Sans Serif",
        serif: "Serif",
        display: "Display",
        bold: "Bold",
        handwriting: "Handwriting",
        plants: "Plants",
        people: "People",
        animals: "Animals",
        "water colors": "Water colors",
        typogrunge: "Typogrunge",
        tizzape: "Tizzape",
        "simple smudges": "Simple Smudges",
        retro: "Retro",
        leafs: "Leafs",
        footprints: "Footprints",
        flowers: "Flowers",
        doodles: "Doodles",
        butterflies: "Butterflies",
        "aspect-ratio": "Aspect Ratio",
        "choose-aspect-ratio": "Set Aspect Ratio",
        "choose-constrain": "Constrain Proportions",
        "hide-layer": "Hide layer",
        "show-layer": "Show layer",
        "convert-format": "Convert to %s",
        "update-format": "Update %s",
        image: "Image",
        saving: "Saving",
        colorNoise: "Noise",
        colorMode: "Type",
        linear: "Linear Gradient",
        radial: "Radial Gradient",
        cycle: "Color Cycle",
        lineJoin: "Corner",
        lineCap: "Cap",
        round: "Round",
        bevel: "Bevel",
        miter: "Miter",
        enable: "Enable",
        disable: "Disable",
        projects: "Files",
        paper: "Paper",
        quality: "Quality",
        fileFormat: "Format",
        sizeTo: "Size To",
        size: "Size",
        percent: "Percent",
        share: "Share",
        dpi: "DPI",
        settings: "Settings",
        tool: "Tool",
        width: "Width",
        height: "Height",
        x: "X",
        y: "Y",
        "no-layers": "No layers added",
        "layer-order": "Layer Order",
        document: "Document",
        library: "Library",
        utilities: "Utilities",
        brushes: "Brushes",
        shapes: "Shapes",
        highlighter: "Highlighter",
        polyarrow: "Arrow",
        polyline: "Line",
        polygon: "Polygon",
        path: "Path",
        help: "Help",
        curved: "Curved",
        textbrush: "Textbrush",
        shader: "Shader",
        fitWithin: "Fit Within",
        "72dpi": "72\u2014Web",
        "150dpi": "150\u2014Draft Printing",
        "300dpi": "300\u2014High-Res Printing",
        "upload-as-new": "Upload as new",
        place: "Place into",
        upload: "Upload",
        resize: "Resize",
        dimensions: "Dimensions",
        apply: "Apply",
        create: "Create",
        "set-background": "Change Background",
        rename: "Rename",
        "screenshot-tool-message": "Use the <span class='icon-screenshot'></span> Screenshot tool to download a selection of your drawing."
      }
    },
    g.lang.locales)
})(sketch);

"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  g.modifyEventListener = !1;
  g.modifySelectors = !1;
  g.add = function(a, h, b, c) {
    return d(a, h, b, c, "add")
  };
  g.remove = function(a, h, b, c) {
    return d(a, h, b, c, "remove")
  };
  g.removeEvents = function(a) {
    for (var h in a) {
      var b = a[h];
      b && b.remove && b.remove()
    }
  };
  g.stop = function(a) {
    a && (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !
      0, a.cancelBubbleCount = 0)
  };
  g.prevent = function(a) {
    a && (a.preventDefault ? a.preventDefault() : a.preventManipulation ?
      a.preventManipulation() : a.returnValue = !1)
  };
  g.cancel = function(a) {
    g.stop(a);
    g.prevent(a)
  };
  g.blur = function() {
    if (g.isEditingText()) {
      var a = document.activeElement;
      a.blur && a.blur()
    }
  };
  g.isEditingText = function() {
    var a = document.activeElement;
    if (a) {
      var h = a.nodeName;
      if ("INPUT" === h || "TEXTAREA" === h || "true" === a.contentEditable)
        return !0
    }
    return !1
  };
  g.getEventSupport = function(a, h) {
    "string" === typeof a && (h = a, a = window);
    h = "on" + h;
    if (h in a) return !0;
    a.setAttribute || (a = document.createElement("div"));
    if (a.setAttribute && a.removeAttribute) {
      a.setAttribute(h, "");
      var b = "function" === typeof a[h];
      "undefined" !==
      typeof a[h] && (a[h] = null);
      a.removeAttribute(h);
      return b
    }
  };
  var f = function(a) {
      if (!a || a.nodeName || "object" !== typeof a) return a;
      var h = new a.constructor,
        b;
      for (b in a) h[b] = !a[b] || a.nodeName || "object" !== typeof a[
        b] ? a[b] : f(a[b]);
      return h
    },
    d = function(c, v, p, s, z, y) {
      s = s || {};
      if ("[object Object]" === String(c)) return e(c, z);
      if (c && v && p) {
        if ("string" === typeof c && "ready" === v)
          if (window.eventjs_stallOnReady) v = "load", c = window;
          else {
            q(c, s, p);
            return
          }
        if ("string" === typeof c && (c = document.querySelectorAll(c),
            0 === c.length)) {
          b("target does not exist",
            arguments);
          return
        }
        if (0 < c.length && c !== window)
          if (1 === c.length) c = c[0];
          else {
            for (var B = {}, A = 0, u = c.length; A < u; A++) {
              var F = d(c[A], v, p, f(s), z);
              F && (B[A] = F)
            }
            return l(B)
          }
          "string" === typeof v && (v = v.toLowerCase().split(/[, ]/), 1 ===
          v.length && (v = v.shift()));
        if ("string" !== typeof v) return a(c, v, p, s, z);
        0 === v.indexOf("on") && (v = v.substr(2));
        if ("object" !== typeof c) return b("target must be an element",
          arguments);
        if ("function" !== typeof p) return b(
          "listener must be a function", arguments);
        B = s.useCapture || !1;
        A = t(c) + "." + t(p) +
          "." + (B ? 1 : 0);
        if (g.gestureHandler[v])
          if (A = v + A, "remove" === z) m[A] && (m[A].remove(), delete m[
            A]);
          else {
            if ("add" === z) {
              if (m[A]) return m[A].attach ? m[A].attach() : m[A].add(), m[
                A];
              if (s.useCall && !g.modifyEventListener) {
                var E = p;
                p = function(a, h) {
                  for (var b in h) a[b] = h[b];
                  return E.call(c, a)
                }
              }
              s.uid = A;
              s.gesture = v;
              s.target = c;
              s.listener = p;
              s.fromOverwrite = y;
              return m[A] = g.proxy[v](s)
            }
          } else {
          for (var D = w(v, s.strict), P = D.length, u = 0; u < P; u++) v =
            D[u], F = v + "." + A, "remove" === z ? m[F] && (c[r](v, p, B),
              delete m[F]) : "add" !== z || m[F] || (c[h](v,
              p, B), m[F] = {
              uid: F,
              type: v,
              target: c,
              listener: p,
              add: function() {
                for (var a = 0; a < P; a++) g.add(c, D[a], p, s)
              },
              remove: function() {
                for (var a = 0; a < P; a++) g.remove(c, D[a], p, s)
              }
            });
          return m[F]
        }
      } else b("target, type and listener are required", arguments)
    },
    a = function(a, h, b, c, e) {
      var r, p = {};
      if (isFinite(h.length))
        for (var m = 0, q = h.length; m < q; m++) {
          var t = h[m];
          t && (r = d(a, t, b, f(c), e)) && (p[t] = r)
        } else
          for (m in h)(t = h[m]) && (r = t.listener ? d(a, m, t.listener,
            f(t), e) : d(a, m, t, f(c), e)) && (p[m] = r);
      return l(p)
    },
    e = function(a, h) {
      var b = a.target;
      if (a.type &&
        a.listener) {
        var c = a.listener;
        return d(b, a.type, c, a, h)
      }
      var e = {},
        r;
      for (r in a) {
        var c = a[r],
          p = typeof c;
        if ("string" === p || "number" === p || "boolean" === p) e[r] =
          c
      }
      var p = {},
        m;
      for (m in a) {
        r = a[m];
        if ("function" === typeof r) var c = r,
          q = f(e);
        else if ("function" === typeof r.listener) {
          var c = r.listener,
            q = f(e),
            l;
          for (l in r) q[l] = r[l]
        } else continue;
        r = m.toLowerCase().split(/[, ]/);
        for (var t = 0; t < r.length; t++) p[m] = g.add(b, r[t], c, q, h)
      }
      return p
    },
    q = function(a, h, b) {
      var c = g.getTime(),
        e = h.timeout,
        r = setInterval(function() {
          g.getTime() -
            c > e && window.clearInterval(r);
          document.querySelector(a) && (window.clearInterval(r),
            setTimeout(b, 1))
        }, h.interval || 1E3 / 60)
    },
    l = function(a) {
      return {
        remove: function() {
          for (var h in a) a[h].remove()
        },
        add: function() {
          for (var h in a) a[h].add()
        }
      }
    },
    b = function(a, h) {
      "undefined" !== typeof console && "undefined" !== typeof console.error &&
        console.error(a, h)
    },
    c = {
      msPointer: ["MSPointerDown", "MSPointerMove", "MSPointerUp"],
      touch: ["touchstart", "touchmove", "touchend"],
      mouse: ["mousedown", "mousemove", "mouseup"]
    },
    p = {
      MSPointerDown: 0,
      MSPointerMove: 1,
      MSPointerUp: 2,
      touchstart: 0,
      touchmove: 1,
      touchend: 2,
      mousedown: 0,
      mousemove: 1,
      mouseup: 2
    };
  g.supports = {};
  window.navigator.msPointerEnabled && (g.supports.msPointer = !0);
  g.getEventSupport("touchstart") && (g.supports.touch = !0);
  g.getEventSupport("mousedown") && (g.supports.mouse = !0);
  var w = function() {
      return function(a, h) {
        var b = document.addEventListener ? "" : "on",
          e = p[a];
        if (isFinite(e) && !h) {
          var r = [],
            d;
          for (d in g.supports) r.push(b + c[d][e]);
          return r
        }
        return [b + a]
      }
    }(),
    m = g.wrappers = {},
    u = 0,
    t = function(a) {
      return a ===
        window ? "#window" : a === document ? "#document" : a.eventId ?
        a.eventId : a.eventId = "e" + u++
    },
    h = document.addEventListener ? "addEventListener" : "attachEvent",
    r = document.removeEventListener ? "removeEventListener" :
    "detachEvent";
  g.createPointerEvent = function(a, h, b) {
    var c = h.gesture,
      e = h.target,
      r = a.changedTouches || g.getCoords(a);
    if (r.length) {
      var p = r[0];
      h.pointers = b ? [] : r;
      h.pageX = p.pageX;
      h.pageY = p.pageY;
      h.x = h.pageX;
      h.y = h.pageY
    }
    b = document.createEvent("Event");
    b.initEvent(c, !0, !0);
    b.originalEvent = a;
    for (var d in h) "target" !==
      d && (b[d] = h[d]);
    g.gestureHandler[b.type] && h.oldListener.call(e, b, h, !1)
  };
  g.modifyEventListener && window.HTMLElement && function() {
    var a = function(a) {
      var h = function(h) {
        var b = h + "EventListener",
          c = a[b];
        a[b] = function(a, b, e) {
          if (g.gestureHandler[a]) {
            var k = e;
            "object" === typeof e ? k.useCall = !0 : k = {
              useCall: !0,
              useCapture: e
            };
            d(this, a, b, k, h, !0)
          } else
            for (a = w(a), k = 0; k < a.length; k++) c.call(this, a[k],
              b, e)
        }
      };
      h("add");
      h("remove")
    };
    navigator.userAgent.match(/Firefox/) ? (a(HTMLDivElement.prototype),
        a(HTMLCanvasElement.prototype)) :
      a(HTMLElement.prototype);
    a(document);
    a(window)
  }();
  g.modifySelectors && function() {
    var a = NodeList.prototype;
    a.removeEventListener = function(a, h, b) {
      for (var c = 0, e = this.length; c < e; c++) this[c].removeEventListener(
        a, h, b)
    };
    a.addEventListener = function(a, h, b) {
      for (var c = 0, e = this.length; c < e; c++) this[c].addEventListener(
        a, h, b)
    }
  }();
  return g
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  var f = g.proxy || (g.proxy = {});
  f.pointerSetup = function(a) {
    a.target = a.target || window;
    a.doc = a.target.ownerDocument || a.target;
    a.minFingers = a.minFingers || a.fingers || 1;
    a.maxFingers = a.maxFingers || a.fingers || Infinity;
    a.position = a.position || "relative";
    a.listenerOnSetup = a.listener;
    a.pointers = {};
    a.fingers = 0;
    var d = {};
    d.gesture = a.gesture;
    d.target = a.target;
    d.env = a.env || {};
    g.modifyEventListener && a.fromOverwrite && (a.oldListener = a.listener,
      a.listener = g.createPointerEvent);
    a.oldListener && (d.oldListener =
      a.oldListener);
    d.listener = a.listener;
    d.proxy = function(b) {
      a.listener = b;
      b(a.event, d)
    };
    d.remove = function() {
      d.detatch();
      delete g.wrappers[a.uid]
    };
    d.attached = !0;
    d.attach = function() {
      !1 === d.attached && (d.attached = !0, a._pointerOver && a._pointerOver
        .add(), a._pointerOut && a._pointerOut.add(), a._pointerDown &&
        a._pointerDown.add(), a._pointerMove && a._pointerMove.add(),
        a._pointerUp && a._pointerUp.add())
    };
    d.detatch = function() {
      !0 === d.attached && (d.attached = !1, d.resetPointers(), a._pointerOver &&
        a._pointerOver.remove(), a._pointerOut &&
        a._pointerOut.remove(), a._pointerDown && a._pointerDown.remove(),
        a._pointerMove && a._pointerMove.remove(), a._pointerUp && a._pointerUp
        .remove())
    };
    var l = 0;
    d.pause = function(b) {
      !a._pointerMove || b && !b.move || a._pointerMove.remove();
      !a._pointerUp || b && !b.up || a._pointerUp.remove();
      l = a.fingers;
      a.fingers = 0
    };
    d.resume = function(b) {
      !a._pointerMove || b && !b.move || a._pointerMove.add();
      !a._pointerUp || b && !b.up || a._pointerUp.add();
      a.fingers = l
    };
    d.cancel = function(a) {
      f.animation.stop();
      d.pause(a)
    };
    d.resetPointers = function(b) {
      if ("string" ===
        typeof b) {
        var c = a.pointers || {};
        c[b] && (delete c[b], a.fingers--)
      } else a.pointers = {}, a.fingers = 0
    };
    d.resetBoundingBox = function() {
      d.bbox = a.bbox = g.getBBox(a.target);
      var b = a.pointers || {},
        c;
      for (c in b) b[c].dirty = !0
    };
    d.hasMoved = function() {
      return d.start.x !== d.x || d.start.y !== d.y
    };
    d.distanceMoved = function() {
      var a = d.start.x - d.x,
        c = d.start.y - d.y;
      return Math.sqrt(a * a + c * c)
    };
    return d
  };
  f.animation = new function() {
    var a = this,
      d = !1,
      l = null,
      b = function() {
        l();
        d && requestAnimationFrame(b)
      };
    this.stop = function() {
      d = !1
    };
    this.listener =
      function(c, p, f) {
        if ("down" === p.state) {
          var m = null,
            u = null;
          l = function() {
            if (m !== p.x || u !== p.y || "up" === p.state) f(c, p), m =
              p.x, u = p.y
          };
          !1 === d && (d = !0, b())
        } else "up" === p.state && a.stop()
      };
    return this
  };
  var d = g.supports;
  g.isMouse = !!d.mouse;
  g.isMSPointer = !!d.touch;
  g.isTouch = !!d.msPointer;
  f.defaultSID = 1;
  f.getPointerID = function(a) {
    return Object.keys(a).join(",")
  };
  f.setPointerStart = function(a, d, l) {
    var b = a.bbox;
    l = a.pointers[l] = {};
    switch (a.position) {
      case "absolute":
        l.offsetX = 0;
        l.offsetY = 0;
        break;
      case "differenceFromLast":
        l.offsetX =
          d.pageX;
        l.offsetY = d.pageY;
        break;
      case "difference":
        l.offsetX = d.pageX;
        l.offsetY = d.pageY;
        break;
      case "move":
        l.offsetX = d.pageX - b.x1;
        l.offsetY = d.pageY - b.y1;
        break;
      default:
        l.offsetX = b.x1 - b.scrollLeft, l.offsetY = b.y1 - b.scrollTop
    }
    a = d.pageX - l.offsetX;
    d = d.pageY - l.offsetY;
    l.rotation = 0;
    l.scale = 1;
    l.startTime = self.startTime;
    l.moveTime = self.startTime;
    l.move = {
      x: a,
      y: d
    };
    l.start = {
      x: a,
      y: d
    };
    return l
  };
  f.isPointerStart = function(a, d, l) {
    l.event = a;
    l.listener = l.listenerOnSetup;
    var b = (a.type || "mousedown").toLowerCase();
    0 === b.indexOf("mouse") ?
      (g.isMouse = !0, g.isTouch = !1, g.isMSPointer = !1) : 0 === b.indexOf(
        "touch") ? (g.isMouse = !1, g.isTouch = !0, g.isMSPointer = !1) :
      0 === b.indexOf("mspointer") && (g.isMouse = !1, g.isTouch = !1,
        g.isMSPointer = !0);
    d.startTime = g.getTime();
    var b = !l.fingers,
      c = l.pointers;
    a = a.changedTouches || g.getCoords(a);
    for (var p = a.length, w = 0; w < p; w++) {
      var m = a[w],
        u = void 0 === m.identifier ? f.defaultSID : m.identifier,
        t = c[u];
      if (l.fingers) {
        if (l.fingers >= l.maxFingers) return d.identifier = f.getPointerID(
          c), b;
        for (var h in c)
          if (c[h].up) {
            delete c[h];
            l.cancel = !0;
            l.fingers++;
            t = f.setPointerStart(l, m, u);
            break
          }
        void 0 === t && (l.fingers++, f.setPointerStart(l, m, u))
      } else d.resetBoundingBox(), l.cancel = !1, l.fingers = 1, l.pointers = {},
        f.setPointerStart(l, m, u)
    }
    d.identifier = f.getPointerID(l.pointers);
    return b
  };
  f.isPointerEnd = function(a, d, l, b) {
    for (var c = l.pointers, p = a.touches || [], w = {}, m = 0, u =
        p.length; m < u; m++) {
      var t = p[m];
      w[void 0 === t.identifier ? f.defaultSID : t.identifier] = !0
    }
    for (var h in c) p = c[h], w[h] || p.up || (b && b(a, "up"), p.up = !
      0, l.fingers--);
    return 0 === u ? (a = Object.keys(c),
      l.fingers = 0, l.gestureFingers = a.length, d.identifier = a.join(
        ","), !0) : !1
  };
  g.getCoords = function(a) {
    isFinite(a.pageX + a.pageY) ? g.getCoords = function(a) {
      return [{
        type: "mouse",
        x: a.pageX,
        y: a.pageY,
        pageX: a.pageX,
        pageY: a.pageY,
        identifier: void 0 === a.pointerId ? f.defaultSID : a.pointerId
      }]
    } : g.getCoords = function(a) {
      a = a || window.event;
      var e = document.documentElement;
      return [{
        type: "mouse",
        x: a.clientX + e.scrollLeft,
        y: a.clientY + e.scrollTop,
        pageX: a.clientX + e.scrollLeft,
        pageY: a.clientY + e.scrollTop,
        identifier: f.defaultSID
      }]
    };
    return g.getCoords(a)
  };
  (function() {
    var a = 0,
      d = 0;
    g.getCoord = function(l) {
      if (l.changedTouches) return (l = l.changedTouches) && l.length ?
        (l = l[0], {
          x: a = l.pageX,
          y: d = l.pageY
        }) : {
          x: a,
          y: d
        };
      if (isFinite(l.pageX + l.pageY)) return {
        x: l.pageX,
        y: l.pageY
      };
      var b = document.documentElement;
      l = l || window.event;
      return {
        x: l.clientX + b.scrollLeft,
        y: l.clientY + b.scrollTop
      }
    };
    g.getClientXY = function(l) {
      if (l.changedTouches) return (l = l.changedTouches) && l.length ?
        (l = l[0], {
          x: a = l.clientX,
          y: d = l.clientY
        }) : {
          x: a,
          y: d
        };
      l = l || window.event;
      return {
        x: l.clientX,
        y: l.clientY
      }
    }
  })();
  var a = function(a, d) {
    var l = parseFloat(a.getPropertyValue(d), 10);
    return isFinite(l) ? l : 0
  };
  g.getDocumentScroll = function(a) {
    a = a || {};
    void 0 !== window.pageXOffset ? (a.pageXOffset = window.pageXOffset,
        a.pageYOffset = window.pageYOffset) : "CSS1Compat" === document
      .compatMode ? (a.pageXOffset = document.documentElement.scrollLeft,
        a.pageYOffset = document.documentElement.scrollTop) : (a.pageXOffset =
        document.body.scrollLeft, a.pageYOffset = document.body.scrollTop
      );
    return a
  };
  g.getBBox = function(e) {
    if (e === window ||
      e === document) e = document.body;
    var d = {},
      l = e.getBoundingClientRect();
    d.width = l.width;
    d.height = l.height;
    d.x1 = l.left;
    d.y1 = l.top;
    d.scaleX = l.width / e.offsetWidth || 1;
    d.scaleY = l.height / e.offsetHeight || 1;
    d.scrollLeft = 0;
    d.scrollTop = 0;
    l = window.getComputedStyle(e);
    if ("border-box" === l.getPropertyValue("box-sizing") === !1) {
      var b = a(l, "border-left-width"),
        c = a(l, "border-right-width"),
        p = a(l, "border-bottom-width"),
        f = a(l, "border-top-width");
      d.border = [b, c, f, p];
      d.x1 += b;
      d.y1 += f;
      d.width -= c + b;
      d.height -= p + f
    }
    d.x2 = d.x1 + d.width;
    d.y2 = d.y1 + d.height;
    l = l.getPropertyValue("position");
    for (e = "fixed" === l ? e : e.parentNode; null !== e && e !==
      document.body && void 0 !== e.scrollTop;) {
      l = window.getComputedStyle(e);
      l = l.getPropertyValue("position");
      if ("absolute" !== l)
        if ("fixed" === l) {
          d.scrollTop = e.scrollLeft;
          d.scrollLeft = e.scrollTop;
          break
        } else d.scrollLeft += e.scrollLeft, d.scrollTop += e.scrollTop;
      e = e.parentNode
    }
    g.getDocumentScroll(d);
    d.scrollLeft -= d.pageXOffset;
    d.scrollTop -= d.pageYOffset;
    return d
  };
  g.getTime = function() {
    var a = window.performance;
    return a &&
      a.now ? a.now.bind(a) : Date.now
  }();
  g.gestureHandler = g.gestureHandler || {};
  g.register = function(a) {
    g.gestureHandler[a] = f[a]
  }
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  var f = g.proxy || (g.proxy = {}),
    d = /iPhone|iPad|iPod/i.test(navigator.userAgent);
  f.click = function(a) {
    a.gesture = a.gesture || "click";
    a.maxFingers = a.maxFingers || a.fingers || 1;
    a.onPointerDown = function(d) {
      f.isPointerStart(d, e, a) && (a._pointerUp = g.add(a.doc,
        "mouseup", a.onPointerUp))
    };
    a.onPointerUp = function(q) {
      if ((!d || "mouseup" !== q.type) && f.isPointerEnd(q, e, a)) {
        a._pointerUp.remove();
        var l = (q.changedTouches || g.getCoords(q))[0],
          b = a.bbox,
          c = g.getBBox(a.target),
          p = l.pageY - c.pageYOffset,
          l = l.pageX - c.pageXOffset;
        if (l > b.x1 && p > b.y1 && l < b.x2 && p < b.y2 && b.scrollTop ===
          c.scrollTop) {
          for (var w in a.pointers)
            if (b = a.pointers[w]) {
              e.x = b.start.x;
              e.y = b.start.y;
              break
            }
          e.state = "click";
          a.listener(q, e)
        }
      }
    };
    a._pointerDown = g.add(a.target, "mousedown", a.onPointerDown);
    var e = f.pointerSetup(a);
    return e
  };
  g.register("click")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  var f = g.proxy || (g.proxy = {});
  f.dbltap = f.dblclick = function(d) {
    d.gesture = d.gesture || "dbltap";
    d.maxFingers = d.maxFingers || d.fingers || 1;
    var a, e, q, l, b;
    d.onPointerDown = function(p) {
      var w = p.changedTouches || g.getCoords(p);
      a && !e ? (b = w[0], e = g.getTime() - a) : (l = w[0], a = g.getTime(),
        e = 0, clearTimeout(q), q = setTimeout(function() {
          a = 0
        }, 700));
      f.isPointerStart(p, c, d) && ((d._pointerMove = g.add(d.doc,
          "mousemove", d.onPointerMove)).listener(p), d._pointerUp = g
        .add(d.doc, "mouseup", d.onPointerUp))
    };
    d.onPointerMove = function(c) {
      if (a &&
        !e) b = (c.changedTouches || g.getCoords(c))[0];
      else if (!b) return;
      c = d.bbox;
      var f = b.pageX - c.x1,
        m = b.pageY - c.y1;
      0 < f && f < c.width && 0 < m && m < c.height && 25 >= Math.abs(
        b.pageX - l.pageX) && 25 >= Math.abs(b.pageY - l.pageY) || (d
        ._pointerMove.remove(), clearTimeout(q), a = e = 0)
    };
    d.onPointerUp = function(b) {
      f.isPointerEnd(b, c, d) && (d._pointerMove.remove(), d._pointerUp
        .remove());
      if (a && e) {
        if (700 >= e) {
          for (var l in d.pointers) {
            l = d.pointers[l];
            c.x = l.start.x;
            c.y = l.start.y;
            break
          }
          c.state = d.gesture;
          d.listener(b, c)
        }
        clearTimeout(q);
        a = e = 0
      }
    };
    d._pointerDown =
      g.add(d.target, "mousedown", d.onPointerDown);
    var c = f.pointerSetup(d);
    return c
  };
  g.register("dbltap");
  g.register("dblclick")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  var f = g.proxy || (g.proxy = {});
  f.dragElement = function(d, a) {
    f.drag({
      event: a,
      target: d,
      position: "move",
      listener: function(a, f) {
        d.style.left = f.x + "px";
        d.style.top = f.y + "px";
        g.prevent(a)
      }
    })
  };
  f.drag = function(d) {
    d.gesture = "drag";
    var a = d.event,
      e = d.monitor,
      q = d.animationFrame,
      l = "differenceFromLast" === d.position,
      b = function(a, b) {
        h.fingers = d.fingers;
        h.state = b;
        for (var c = a.changedTouches || g.getCoords(a), e = c.length,
            p = 0; p < e; p++) {
          var m = c[p],
            t = void 0 === m.identifier ? f.defaultSID : m.identifier,
            w = d.pointers[t];
          if (w) {
            w.dirty &&
              (w = f.setPointerStart(d, m, t));
            var A = w.pageX = m.pageX,
              m = w.pageY = m.pageY,
              u = A - w.offsetX,
              F = m - w.offsetY;
            l && (w.offsetX = A, w.offsetY = m);
            h.identifier = t;
            h.start = w.start;
            h.x = u;
            h.y = F;
            q ? f.animation.listener(a, h, d.listener) : d.listener(a, h)
          }
        }
      },
      c = function(a) {
        h.pointerDown = !1;
        h.pointerMove = !1;
        h.pointerUp = !0;
        h.pointerStart = !1;
        h.pointerDrag = !1;
        h.pointerEnd = !0;
        b(a, "up")
      },
      p = function(a) {
        f.isPointerStart(a, h, d) && (e && d._pointerMove.remove(), d._pointerMove =
          g.add(d.doc, "mousemove", u), d._pointerUp = g.add(d.doc,
            "mouseup", t))
      },
      w = function() {
        d._pointerMove = g.add(d.target, "mousemove", u)
      },
      m = d.onPointerDown = function(a) {
        h.pointerDown = !0;
        h.pointerMove = !1;
        h.pointerUp = !1;
        h.pointerStart = !0;
        h.pointerDrag = !1;
        h.pointerEnd = !1;
        e && h.resetBoundingBox();
        p(a);
        b(a, "down")
      },
      u = d.onPointerMove = function(a) {
        h.pointerMove = !0;
        h.pointerStart = !1;
        h.pointerDrag = h.pointerDown;
        h.pointerEnd = !1;
        d.fingers || p(a);
        b(a, "move")
      },
      t = d.onPointerUp = function(a) {
        f.isPointerEnd(a, h, d, c) && (d._pointerMove.remove(), d._pointerUp
          .remove(), e && h.attached && w())
      },
      h = f.pointerSetup(d);
    h.pointerDown = !1;
    h.pointerMove = !1;
    h.pointerUp = !0;
    h.pointerStart = !1;
    h.pointerDrag = !1;
    h.pointerEnd = !1;
    e && w();
    a ? m(a) : d._pointerDown = g.add(d.target, "mousedown", m);
    return h
  };
  g.register("drag")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  var f = g.proxy || (g.proxy = {}),
    d = Math.PI / 180,
    a = function(a, d) {
      var l = 0,
        b = 0,
        c = 0,
        p;
      for (p in d) {
        var f = d[p];
        !0 !== f.up && (l += f.move.x, b += f.move.y, c++)
      }
      a.x = l / c;
      a.y = b / c;
      return a
    };
  f.gesture = function(e) {
    e.gesture = e.gesture || "gesture";
    e.minFingers = e.minFingers || e.fingers || 2;
    e.onPointerDown = function(d) {
      var b = e.fingers;
      f.isPointerStart(d, q, e) && (e._pointerMove = g.add(e.doc,
        "mousemove", e.onPointerMove), e._pointerUp = g.add(e.doc,
        "mouseup", e.onPointerUp));
      e.fingers === e.minFingers && b !== e.fingers && (b = e.pointers,
        q.fingers = e.minFingers, q.scale = 1, q.rotation = 0, q.state =
        "start", q.identifier = f.getPointerID(b), a(q, b), e.listener(
          d, q))
    };
    e.onPointerMove = function(l, b) {
      for (var c = e.bbox, p = e.pointers, w = l.changedTouches || g.getCoords(
          l), m = w.length, u = 0; u < m; u++) {
        var t = w[u],
          h = void 0 === t.identifier ? f.defaultSID : t.identifier,
          r = p[h];
        r && (r.move.x = t.pageX - c.x1, r.move.y = t.pageY - c.y1)
      }
      if (!(e.fingers < e.minFingers)) {
        w = [];
        m = c = 0;
        a(q, p);
        for (h in p)
          if (t = p[h], !0 !== t.up && (u = t.start, u.x !== q.x || u.y !==
              q.y)) {
            if (void 0 === u.distance) {
              var r = u.x -
                q.x,
                k = u.y - q.y;
              u.distance = Math.sqrt(r * r + k * k);
              u.angle = Math.atan2(r, k) / d
            }
            var r = t.move.x - q.x,
              k = t.move.y - q.y,
              v = Math.sqrt(r * r + k * k),
              c = c + v / u.distance,
              r = Math.atan2(r, k) / d,
              u = (u.angle - r + 360) % 360 - 180;
            t.DEG2 = t.DEG1;
            t.DEG1 = 0 < u ? u : -u;
            isFinite(t.DEG2) && (t.rotation = 0 < u ? t.rotation + (t.DEG1 -
              t.DEG2) : t.rotation - (t.DEG1 - t.DEG2), m += t.rotation);
            w.push(t.move)
          }
        q.touches = w;
        q.fingers = e.fingers;
        q.scale = c / e.fingers;
        q.rotation = m / e.fingers;
        q.state = "change";
        e.listener(l, q)
      }
    };
    e.onPointerUp = function(a) {
      var b = e.fingers;
      f.isPointerEnd(a,
        q, e) && (e._pointerMove.remove(), e._pointerUp.remove());
      b === e.minFingers && e.fingers < e.minFingers && (q.fingers =
        e.fingers, q.state = "end", e.listener(a, q))
    };
    e._pointerDown = g.add(e.target, "mousedown", e.onPointerDown);
    var q = f.pointerSetup(e);
    return q
  };
  g.register("gesture")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  var f = g.proxy || (g.proxy = {});
  f.longpress = function(d) {
    d.gesture = "longpress";
    return f.tap(d)
  };
  f.tap = function(d) {
    d.gesture = d.gesture || "tap";
    d.delay = d.delay || 500;
    d.driftDeviance = d.driftDeviance || 10;
    d.timeout = d.timeout || 250;
    var a, e;
    d.onPointerDown = function(l) {
      f.isPointerStart(l, q, d) && (a = g.getTime(), (d._pointerMove =
          g.add(d.doc, "mousemove", d.onPointerMove)).listener(l), d._pointerUp =
        g.add(d.doc, "mouseup", d.onPointerUp), "longpress" === d.gesture &&
        (e = setTimeout(function() {
          if (!(l.cancelBubble && 1 < ++l.cancelBubbleCount)) {
            var a =
              0,
              c;
            for (c in d.pointers) {
              var e = d.pointers[c];
              if (!0 === e.end || d.cancel) return;
              a++
            }
            d.minFingers <= a && d.maxFingers >= a && (q.state =
              "start", q.fingers = a, q.x = e.start.x, q.y = e.start.y,
              d.listener(l, q))
          }
        }, d.delay)))
    };
    d.onPointerMove = function(a) {
      var b = d.bbox;
      a = a.changedTouches || g.getCoords(a);
      for (var c = a.length, e = 0; e < c; e++) {
        var q = a[e],
          m = d.pointers[void 0 === q.identifier ? f.defaultSID : q.identifier];
        if (m) {
          var u = q.pageX - b.x1,
            q = q.pageY - b.y1,
            t = u - m.start.x,
            m = q - m.start.y,
            m = Math.sqrt(t * t + m * m);
          if (!(0 < u && u < b.width && 0 < q && q < b.height &&
              m <= d.driftDeviance)) {
            d._pointerMove.remove();
            d.cancel = !0;
            break
          }
        }
      }
    };
    d.onPointerUp = function(l) {
      if (f.isPointerEnd(l, q, d) && (clearTimeout(e), d._pointerMove
          .remove(), d._pointerUp.remove(), !(l.cancelBubble && 1 < ++l
            .cancelBubbleCount)))
        if ("longpress" === d.gesture) "start" === q.state && (q.state =
          "end", d.listener(l, q));
        else if (!(d.cancel || g.getTime() - a > d.timeout)) {
        var b = d.gestureFingers;
        d.minFingers <= b && d.maxFingers >= b && (q.state = "tap", q.fingers =
          d.gestureFingers, d.listener(l, q))
      }
    };
    d._pointerDown = g.add(d.target, "mousedown",
      d.onPointerDown);
    var q = f.pointerSetup(d);
    return q
  };
  g.register("tap");
  g.register("longpress")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  var f = g.proxy || (g.proxy = {});
  f.hover = function(d) {
    d.gesture = d.gesture || "hover";
    d.maxFingers = d.maxFingers || d.fingers || 1;
    d.delay = d.delay || 150;
    d.interval = d.interval || 30;
    d.timeout = d.timeout || 1E4;
    var a, e, q = 0;
    d.onPointerOver = function(b) {
      f.isPointerStart(b, l, d) && (d._pointerOut = g.add(d.target,
        "mouseout", d.onPointerOut), clearTimeout(a), clearInterval(
        e), a = setTimeout(function() {
        e = setInterval(function() {
          var c = g.getTime() - l.startTime;
          c > d.timeout ? (clearTimeout(a), clearInterval(e)) : (l
            .state = "hover", l.iterate =
            q++, l.lapse = c, d.listener(b, l))
        }, d.interval)
      }, d.delay))
    };
    d.onPointerOut = function(b) {
      f.isPointerEnd(b, l, d) && (d._pointerOut.remove(),
        clearTimeout(a), clearInterval(e))
    };
    d._pointerOver = g.add(d.target, "mouseover", d.onPointerOver);
    var l = f.pointerSetup(d);
    return l
  };
  g.register("hover")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(g) {
  var f = g.proxy || (g.proxy = {});
  f.wheelPreventElasticBounce = function(d) {
    d && ("string" === typeof d && (d = document.querySelector(d)), g
      .add(d, "wheel", function(a, e) {
        e.preventElasticBounce(a);
        g.stop(a)
      }))
  };
  f.wheel = function(d) {
    var a, e = d.timeout || 150,
      f = 0,
      l = {
        gesture: "wheel",
        state: "start",
        wheelDelta: 0,
        target: d.target,
        listener: d.listener,
        preventElasticBounce: function(a) {
          var b = this.target,
            c = b.scrollTop;
          c + b.offsetHeight === b.scrollHeight && 0 >= this.wheelDelta ?
            g.cancel(a) : 0 === c && 0 <= this.wheelDelta && g.cancel(a);
          g.stop(a)
        },
        add: function() {
          d.target[c](w, b, !1)
        },
        remove: function() {
          d.target[p](w, b, !1)
        }
      },
      b = function(b) {
        b = b || window.event;
        l.state = f++ ? "change" : "start";
        l.wheelDelta = b.detail ? -20 * b.detail : b.wheelDelta;
        d.listener(b, l);
        clearTimeout(a);
        a = setTimeout(function() {
          f = 0;
          l.state = "end";
          l.wheelDelta = 0;
          d.listener(b, l)
        }, e)
      },
      c = document.addEventListener ? "addEventListener" :
      "attachEvent",
      p = document.removeEventListener ? "removeEventListener" :
      "detachEvent",
      w = g.getEventSupport("mousewheel") ? "mousewheel" :
      "DOMMouseScroll";
    d.target[c](w,
      b, !1);
    return l
  };
  g.register("wheel")
})(eventjs);
(function(g) {
  g.elementsFromEvent = function(f, d) {
    var a = g.getClientXY(f);
    return g.elementsFromPoint(a.x, a.y, d)
  };
  g.elementsFromPoint = function(f, d, a) {
    var e = a ? a.ownerDocument : document;
    a = a || e.getElementsByTagName("html")[0];
    e = e.elementFromPoint(f, d);
    if (e === a || "HTML" === e.nodeName) return [e];
    var q = e.style.pointerEvents;
    e.style.pointerEvents = "none";
    f = [e].concat(g.elementsFromPoint(f, d, a));
    e.style.pointerEvents = q;
    return f
  }
})(eventjs);
(function(g) {
  var f = g.proxy;
  (g.keyTrackerReset = function() {
    g.fnKey = f.fnKey = !1;
    g.metaKey = f.metaKey = !1;
    g.escKey = f.escKey = !1;
    g.ctrlKey = f.ctrlKey = !1;
    g.shiftKey = f.shiftKey = !1;
    g.altKey = f.altKey = !1
  })();
  g.keyTracker = function(a) {
    var b = "keydown" === a.type;
    27 === a.keyCode && (g.escKey = f.escKey = b);
    q[a.keyCode] && (g.metaKey = f.metaKey = b);
    g.ctrlKey = f.ctrlKey = a.ctrlKey;
    g.shiftKey = f.shiftKey = a.shiftKey;
    g.altKey = f.altKey = a.altKey
  };
  g.getKeyID = function(a) {
    return d[a.keyCode] || ""
  };
  var d = g.fromKeyCode = {
      8: "Backspace",
      9: "Tab",
      13: "Enter",
      16: "Shift",
      17: "Ctrl",
      18: "Alt",
      19: "PauseBreak",
      20: "CapsLock",
      27: "Escape",
      33: "PageUp",
      34: "PageDown",
      35: "End",
      36: "Home",
      37: "Left",
      38: "Up",
      39: "Right",
      40: "Down",
      45: "Insert",
      46: "Delete",
      48: "0",
      49: "1",
      50: "2",
      51: "3",
      52: "4",
      53: "5",
      54: "6",
      55: "7",
      56: "8",
      57: "9",
      65: "A",
      66: "B",
      67: "C",
      68: "D",
      69: "E",
      70: "F",
      71: "G",
      72: "H",
      73: "I",
      74: "J",
      75: "K",
      76: "L",
      77: "M",
      78: "N",
      79: "O",
      80: "P",
      81: "Q",
      82: "R",
      83: "S",
      84: "T",
      85: "U",
      86: "V",
      87: "W",
      88: "X",
      89: "Y",
      90: "Z",
      91: "LeftWindow",
      92: "RightWindow",
      93: "Select",
      96: "Numpad0",
      97: "Numpad1",
      98: "Numpad2",
      99: "Numpad3",
      100: "Numpad4",
      101: "Numpad5",
      102: "Numpad6",
      103: "Numpad7",
      104: "Numpad8",
      105: "Numpad9",
      106: "Multiply",
      107: "Add",
      109: "Subtract",
      110: "DecimalPoint",
      111: "Divide",
      112: "F1",
      113: "F2",
      114: "F3",
      115: "F4",
      116: "F5",
      117: "F6",
      118: "F7",
      119: "F8",
      120: "F9",
      121: "F10",
      122: "F11",
      123: "F12",
      144: "NumLock",
      145: "ScrollLock",
      186: ";",
      187: "=",
      188: ",",
      189: "-",
      190: ".",
      191: "/",
      192: "`",
      219: "[",
      220: "\\",
      221: "]",
      222: "'"
    },
    a = navigator.userAgent.toLowerCase(),
    e = -1 !== a.indexOf("macintosh"),
    q;
  (function() {
    e &&
      -1 !== a.indexOf("khtml") ? q = {
        91: !0,
        93: !0
      } : e && -1 !== a.indexOf("firefox") ? (q = {
          224: !0
        }, d[173] = d[189], delete d[189], d[61] = d[187], delete d[187],
        d[59] = d[186], delete d[186]) : q = {
        17: !0
      };
    for (var l in q) d[l] = "Meta"
  })();
  (function() {
    g.toKeyCode = {};
    for (var a in d) g.toKeyCode[d[a]] = a
  })()
})(eventjs);
Array.isArray = Array.isArray || function(g) {
  return g && "[object Array]" === Object.prototype.toString.call(g)
};
Array.prototype.every = Array.prototype.every || function(g, f) {
  for (var d = 0, a = this.length; d < a && g.call(f || window, this[
      d], d, this); ++d);
  return d === a
};
Array.prototype.filter = Array.prototype.filter || function(g, f) {
  for (var d = [], a = 0, e = this.length, q; a < e; ++a) q = this[a],
    g.call(f || window, q, a, this) && d.push(q);
  return d
};
Array.prototype.forEach = Array.prototype.forEach || function(g, f) {
  for (var d = 0, a = this.length; d < a; ++d) g.call(f || window,
    this[d], d, this)
};
Array.prototype.indexOf = Array.prototype.indexOf || function(g) {
  for (var f = 0, d = this.length; f < d; ++f)
    if (this[f] === g) return f;
  return -1
};
Array.prototype.lastIndexOf = Array.prototype.lastIndexOf || function(
  g) {
  for (var f = this.length - 1; - 1 < f; --f)
    if (this[f] === g) return f;
  return -1
};
Array.prototype.map = Array.prototype.map || function(g, f) {
  for (var d = [], a = 0, e = this.length; a < e; ++a) d.push(g.call(
    f || window, this[a], a, this));
  return d
};
Array.prototype.reduce = Array.prototype.reduce || function(g, f) {
  for (var d = f || 0, a = 0, e = this.length; a < e; ++a) d = g.call(
    window, d, this[a], a, this);
  return d
};
Array.prototype.reduceRight = Array.prototype.reduceRight || function(
  g, f) {
  for (var d = f || 0, a = this.length - 1; - 1 < a; --a) d = g.call(
    window, d, this[a], a, this);
  return d
};
Array.prototype.some = Array.prototype.some || function(g, f) {
  for (var d = 0, a = this.length; d < a && !g.call(f || window, this[
      d], d, this); ++d);
  return d === a
};
Array.prototype.concat = Array.prototype.concat || function(g) {
  for (var f = 0; f < g.length; f++) this.push(g[f]);
  return this
};
if (!window.btoa || !window.atob) {
  var base64 = {
    PADCHAR: "=",
    ALPHA: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
    getbyte64: function(g, f) {
      var d = base64.ALPHA.indexOf(g.charAt(f));
      if (-1 == d) throw "Cannot decode base64";
      return d
    },
    decode: function(g) {
      g = "" + g;
      var f = base64.getbyte64,
        d, a, e, q = g.length;
      if (0 == q) return g;
      if (0 != q % 4) throw "Cannot decode base64";
      d = 0;
      g.charAt(q - 1) == base64.PADCHAR && (d = 1, g.charAt(q - 2) ==
        base64.PADCHAR && (d = 2), q -= 4);
      var l = [];
      for (a = 0; a < q; a += 4) e = f(g, a) << 18 | f(g, a + 1) << 12 |
        f(g, a +
          2) << 6 | f(g, a + 3), l.push(String.fromCharCode(e >> 16, e >>
          8 & 255, e & 255));
      switch (d) {
        case 1:
          e = f(g, a) << 18 | f(g, a + 1) << 12 | f(g, a + 2) << 6;
          l.push(String.fromCharCode(e >> 16, e >> 8 & 255));
          break;
        case 2:
          e = f(g, a) << 18 | f(g, a + 1) << 12, l.push(String.fromCharCode(
            e >> 16))
      }
      return l.join("")
    },
    getbyte: function(g, f) {
      var d = g.charCodeAt(f);
      if (255 < d) throw "INVALID_CHARACTER_ERR: DOM Exception 5";
      return d
    },
    encode: function(g) {
      if (1 != arguments.length) throw "SyntaxError: Not enough arguments";
      var f = base64.PADCHAR,
        d = base64.ALPHA,
        a = base64.getbyte,
        e, q, l = [];
      g = "" + g;
      var b = g.length - g.length % 3;
      if (0 == g.length) return g;
      for (e = 0; e < b; e += 3) q = a(g, e) << 16 | a(g, e + 1) << 8 |
        a(g, e + 2), l.push(d.charAt(q >> 18)), l.push(d.charAt(q >> 12 &
          63)), l.push(d.charAt(q >> 6 & 63)), l.push(d.charAt(q & 63));
      switch (g.length - b) {
        case 1:
          q = a(g, e) << 16;
          l.push(d.charAt(q >> 18) + d.charAt(q >> 12 & 63) + f + f);
          break;
        case 2:
          q = a(g, e) << 16 | a(g, e + 1) << 8, l.push(d.charAt(q >> 18) +
            d.charAt(q >> 12 & 63) + d.charAt(q >> 6 & 63) + f)
      }
      return l.join("")
    }
  };
  window.btoa = base64.encode;
  window.atob = base64.decode
}
(function() {
  function g(a) {
    this._element = a;
    if (a.className != this._classCache && (this._classCache = a.className)) {
      a = this._classCache.replace(/^\s+|\s+$/g, "").split(/\s+/);
      var c;
      for (c = 0; c < a.length; c++) e.call(this, a[c])
    }
  }

  function f(a, c, e) {
    Object.defineProperty ? Object.defineProperty(a, c, {
      get: e
    }) : a.__defineGetter__(c, e)
  }
  if (!("undefined" === typeof window.Element || "classList" in
      document.documentElement)) {
    var d = Array.prototype,
      a = d.slice,
      e = d.push,
      q = d.splice,
      l = d.join;
    g.prototype = {
      add: function(b) {
        this.contains(b) ||
          (e.call(this, b), b = a.call(this, 0), this._element.className =
            b.join(" "))
      },
      contains: function(a) {
        return -1 !== Array.prototype.indexOf.call(this, a)
      },
      item: function(a) {
        return this[a] || null
      },
      remove: function(b) {
        b = Array.prototype.indexOf.call(this, b); - 1 !== b && (q.call(
            this, b, 1), b = a.call(this, 0), this._element.className =
          b.join(" "))
      },
      toString: function() {
        return l.call(this, " ")
      },
      toggle: function(a) {
        this.contains(a) ? this.remove(a) : this.add(a);
        return this.contains(a)
      }
    };
    window.DOMTokenList = g;
    f(Element.prototype, "classList",
      function() {
        return new g(this)
      })
  }
})();
window.WebKitCSSMatrix ? window.CSSMatrix = WebKitCSSMatrix :
  function() {
    function g() {
      var e = [].slice.call(arguments);
      if (e.length)
        for (var f = e.length; f--;) Math.abs(e[f]) < a && (e[f] = 0);
      d(this);
      if (16 == e.length) this.m11 = this.a = e[0], this.m12 = this.b =
        e[1], this.m13 = e[2], this.m14 = e[3], this.m21 = this.c = e[4],
        this.m22 = this.d = e[5], this.m23 = e[6], this.m24 = e[7], this
        .m31 = e[8], this.m32 = e[9], this.m33 = e[10], this.m34 = e[11],
        this.m41 = this.e = e[12], this.m42 = this.f = e[13], this.m43 =
        e[14], this.m44 = e[15];
      else if (6 == e.length) this.m11 = this.a =
        e[0], this.m12 = this.b = e[1], this.m21 = this.c = e[2], this.m22 =
        this.d = e[3], this.m41 = this.e = e[4], this.m42 = this.f = e[5];
      else if ("string" == typeof e[0]) this.setMatrixValue(e[0]);
      else if (0 < e.length) throw new TypeError("Invalid Matrix Value");
    }

    function f(a, d) {
      return new g(d.m11 * a.m11 + d.m12 * a.m21 + d.m13 * a.m31 + d.m14 *
        a.m41, d.m11 * a.m12 + d.m12 * a.m22 + d.m13 * a.m32 + d.m14 *
        a.m42, d.m11 * a.m13 + d.m12 * a.m23 + d.m13 * a.m33 + d.m14 *
        a.m43, d.m11 * a.m14 + d.m12 * a.m24 + d.m13 * a.m34 + d.m14 *
        a.m44, d.m21 * a.m11 + d.m22 * a.m21 + d.m23 * a.m31 + d.m24 *
        a.m41, d.m21 *
        a.m12 + d.m22 * a.m22 + d.m23 * a.m32 + d.m24 * a.m42, d.m21 *
        a.m13 + d.m22 * a.m23 + d.m23 * a.m33 + d.m24 * a.m43, d.m21 *
        a.m14 + d.m22 * a.m24 + d.m23 * a.m34 + d.m24 * a.m44, d.m31 *
        a.m11 + d.m32 * a.m21 + d.m33 * a.m31 + d.m34 * a.m41, d.m31 *
        a.m12 + d.m32 * a.m22 + d.m33 * a.m32 + d.m34 * a.m42, d.m31 *
        a.m13 + d.m32 * a.m23 + d.m33 * a.m33 + d.m34 * a.m43, d.m31 *
        a.m14 + d.m32 * a.m24 + d.m33 * a.m34 + d.m34 * a.m44, d.m41 *
        a.m11 + d.m42 * a.m21 + d.m43 * a.m31 + d.m44 * a.m41, d.m41 *
        a.m12 + d.m42 * a.m22 + d.m43 * a.m32 + d.m44 * a.m42, d.m41 *
        a.m13 + d.m42 * a.m23 + d.m43 * a.m33 + d.m44 * a.m43, d.m41 *
        a.m14 + d.m42 * a.m24 + d.m43 *
        a.m34 + d.m44 * a.m44)
    }

    function d(a) {
      a.m11 = a.a = 1;
      a.m12 = a.b = 0;
      a.m13 = 0;
      a.m14 = 0;
      a.m21 = a.c = 0;
      a.m22 = a.d = 1;
      a.m23 = 0;
      a.m24 = 0;
      a.m31 = 0;
      a.m32 = 0;
      a.m33 = 1;
      a.m34 = 0;
      a.m41 = a.e = 0;
      a.m42 = a.f = 0;
      a.m43 = 0;
      a.m44 = 1;
      return a
    }
    var a = 1E-6;
    g.prototype.setMatrixValue = function(a) {
      var f, l = [],
        b = /^matrix3d\((.*)\)/;
      a = String(a).trim();
      d(this);
      if (/^none$/.test(a)) return this;
      l = a.replace(/^.*\((.*)\)$/g, "$1").split(/\s*,\s*/);
      for (f = l.length; f--;) l[f] = parseFloat(l[f]);
      if (/^matrix\((.*)\)/.test(a) && 6 === l.length) this.m11 = this.a =
        l[0], this.m12 =
        this.b = l[2], this.m41 = this.e = l[4], this.m21 = this.c = l[1],
        this.m22 = this.d = l[3], this.m42 = this.f = l[5];
      else if (b.test(a) && 16 === l.length) this.m11 = this.a = l[0],
        this.m12 = this.b = l[1], this.m13 = l[2], this.m14 = l[3], this
        .m21 = this.c = l[4], this.m22 = this.d = l[5], this.m23 = l[6],
        this.m24 = l[7], this.m31 = l[8], this.m32 = l[9], this.m33 = l[
          10], this.m34 = l[11], this.m41 = this.e = l[12], this.m42 =
        this.f = l[13], this.m43 = l[14], this.m44 = l[15];
      else throw new TypeError("Invalid Matrix Value");
      return this
    };
    g.prototype.multiply = function(a) {
      return f(this,
        a)
    };
    g.prototype.inverse = function() {
      throw Error("the inverse() method is not implemented (yet).");
    };
    g.prototype.translate = function(a, d, l) {
      "undefined" == typeof l && (l = 0);
      var b = new g;
      b.m41 = b.e = a;
      b.m42 = b.f = d;
      b.m43 = l;
      return f(this, b)
    };
    g.prototype.scale = function(a, d, l) {
      "undefined" == typeof d && (d = a);
      "undefined" == typeof l && (l = 1);
      var b = new g;
      b.m11 = b.a = a;
      b.m22 = b.d = d;
      b.m33 = l;
      return f(this, b)
    };
    g.prototype.rotate = function(a, d, l) {
      "undefined" == typeof d && (d = a);
      "undefined" == typeof l && (l = a);
      var b, c;
      a *= Math.PI / 180;
      b = Math.PI /
        180 * d;
      c = Math.PI / 180 * l;
      l = Math.cos(a);
      a = -Math.sin(a);
      d = Math.cos(b);
      b = -Math.sin(b);
      var p = Math.cos(c);
      c = -Math.sin(c);
      var w = new g;
      w.m11 = w.a = d * p;
      w.m12 = w.b = -d * c;
      w.m13 = b;
      w.m21 = w.c = a * b * p + l * c;
      w.m22 = w.d = l * p - a * b * c;
      w.m23 = -a * d;
      w.m31 = a * c - l * b * p;
      w.m32 = a * p + l * b * c;
      w.m33 = l * d;
      return f(this, w)
    };
    g.prototype.rotateAxisAngle = function(a, d, l, b) {
      "undefined" == typeof d && (d = a);
      "undefined" == typeof l && (l = a);
      var c;
      c = Math.PI / 360 * b;
      b = Math.sin(c);
      c = Math.cos(c);
      var p = b * b,
        w = Math.sqrt(a * a + d * d + l * l);
      0 === w ? (d = a = 0, l = 1) : (a /= w, d /= w, l /= w);
      var w =
        a * a,
        m = d * d,
        u = l * l,
        t = new g;
      t.m11 = t.a = 1 - 2 * (m + u) * p;
      t.m12 = t.b = 2 * (a * d * p + l * b * c);
      t.m13 = 2 * (a * l * p - d * b * c);
      t.m21 = t.c = 2 * (d * a * p - l * b * c);
      t.m22 = t.d = 1 - 2 * (u + w) * p;
      t.m23 = 2 * (d * l * p + a * b * c);
      t.m31 = 2 * (l * a * p + d * b * c);
      t.m32 = 2 * (l * d * p - a * b * c);
      t.m33 = 1 - 2 * (w + m) * p;
      t.m14 = t.m24 = t.m34 = 0;
      t.m41 = t.e = t.m42 = t.f = t.m43 = 0;
      t.m44 = 1;
      return f(this, t)
    };
    g.prototype.toString = function() {
      var a, d = function(a) {
          return a.toFixed(6)
        },
        l;
      l = this.m13 || this.m14 || this.m23 || this.m24 || this.m31 ||
        this.m32 || 1 !== this.m33 || this.m34 || this.m43 || 1 !== this
        .m44 ? !1 : !0;
      l && (a = !0);
      return a ?
        "matrix(" + [this.a, this.b, this.c, this.d, this.e, this.f].map(
          d).join(", ") + ")" : "matrix3d(" + [this.m11, this.m12, this.m13,
          this.m14, this.m21, this.m22, this.m23, this.m24, this.m31,
          this.m32, this.m33, this.m34, this.m41, this.m42, this.m43,
          this.m44
        ].map(d).join(", ") + ")"
    };
    g.prototype.skewX = function(a) {
      a *= Math.PI / 180;
      var d = new g;
      d.m21 = d.c = Math.tan(a);
      return f(d, this)
    };
    g.prototype.skewY = function(a) {
      a *= Math.PI / 180;
      var d = new g;
      d.m12 = d.b = Math.tan(a);
      return f(d, this)
    };
    "undefined" !== typeof exports ? ("undefined" !== typeof module &&
      module.exports && (exports = module.exports = g), exports.CSSMatrix =
      g) : window.CSSMatrix = g
  }();
(function() {
  var g = function(d, a, e, f) {
      this.x = d ? d : 0;
      this.y = a ? a : 0;
      this.z = e ? e : 0;
      this.w = f ? f : 0;
      this.checkValues = function() {
        this.x = this.x ? this.x : 0;
        this.y = this.y ? this.y : 0;
        this.z = this.z ? this.z : 0;
        this.w = this.w ? this.w : 0
      };
      this.length = function() {
        this.checkValues();
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z *
          this.z)
      };
      this.normalise = function() {
        var a = this.length();
        return new g(this.x / a, this.y / a, this.z / a)
      };
      this.dot = function(a) {
        return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w
      };
      this.cross = function(a) {
        return new g(this.y *
          a.z - this.z * a.y, this.z * a.x - this.x * a.z, this.x * a.y -
          this.y * a.x)
      };
      this.combine = function(a, b, c) {
        return new g(b * this.x + c * a.x, b * this.y + c * a.y, b *
          this.z + c * a.z)
      }
    },
    f = function(d) {
      d = d || {};
      var a = {
          perspective: null,
          translate: null,
          skew: null,
          scale: null,
          rotate: null
        },
        e;
      for (e in a) this[e] = d[e] ? d[e] : new g
    };
  CSSMatrix.prototype.transformVector = function(d) {
    return new g(this.m11 * d.x + this.m12 * d.y + this.m13 * d.z,
      this.m21 * d.x + this.m22 * d.y + this.m23 * d.z, this.m31 * d.x +
      this.m32 * d.y + this.m33 * d.z)
  };
  CSSMatrix.prototype.transpose = function() {
    for (var d =
        new CSSMatrix, a = 0, e = 0, a = 0; 2 >= a; a++)
      for (e = a + 1; 3 >= e; e++) d["m" + (a + 1) + (e + 1)] = this[
        "m" + (e + 1) + (a + 1)], d["m" + (e + 1) + (a + 1)] = this[
        "m" + (a + 1) + (e + 1)];
    return d
  };
  CSSMatrix.prototype.determinant = function() {
    return this.m14 * this.m23 * this.m32 * this.m41 - this.m13 *
      this.m24 * this.m32 * this.m41 - this.m14 * this.m22 * this.m33 *
      this.m41 + this.m12 * this.m24 * this.m33 * this.m41 + this.m13 *
      this.m22 * this.m34 * this.m41 - this.m12 * this.m23 * this.m34 *
      this.m41 - this.m14 * this.m23 * this.m31 * this.m42 + this.m13 *
      this.m24 * this.m31 * this.m42 + this.m14 * this.m21 *
      this.m33 * this.m42 - this.m11 * this.m24 * this.m33 * this.m42 -
      this.m13 * this.m21 * this.m34 * this.m42 + this.m11 * this.m23 *
      this.m34 * this.m42 + this.m14 * this.m22 * this.m31 * this.m43 -
      this.m12 * this.m24 * this.m31 * this.m43 - this.m14 * this.m21 *
      this.m32 * this.m43 + this.m11 * this.m24 * this.m32 * this.m43 +
      this.m12 * this.m21 * this.m34 * this.m43 - this.m11 * this.m22 *
      this.m34 * this.m43 - this.m13 * this.m22 * this.m31 * this.m44 +
      this.m12 * this.m23 * this.m31 * this.m44 + this.m13 * this.m21 *
      this.m32 * this.m44 - this.m11 * this.m23 * this.m32 * this.m44 -
      this.m12 * this.m21 *
      this.m33 * this.m44 + this.m11 * this.m22 * this.m33 * this.m44
  };
  CSSMatrix.prototype.decompose = function() {
    var d = new CSSMatrix(this.toString()),
      a, e, q, l, b;
    if (0 === d.m33) return new f((new CSSMatrix).decompose());
    for (b = 1; 4 >= b; b++)
      for (j = 1; 4 >= j; j++) d["m" + b + j] /= d.m44;
    for (b = 1; 3 >= b; b++) d["m" + b + "4"] = 0;
    d.m44 = 1;
    if (0 === d.determinant()) return new f((new CSSMatrix).decompose());
    0 != d.m14 || 0 != d.m24 || 0 != d.m34 ? (a = new g(d.m14, d.m24,
        d.m34, d.m44), e = d.inverse(), e = e.transpose(), a = e.transformVector(
        a), d.m14 = d.m24 = d.m34 = 0, d.m44 = 1) : a =
      new g(0, 0, 0, 1);
    e = new g(d.m41, d.m42, d.m43);
    d.m41 = 0;
    d.m42 = 0;
    d.m43 = 0;
    q = [new g, new g, new g];
    for (b = 1; 3 >= b; b++) q[b - 1].x = d["m" + b + "1"], q[b - 1].y =
      d["m" + b + "2"], q[b - 1].z = d["m" + b + "3"];
    d = new g;
    l = new g;
    d.x = q[0].length();
    q[0] = q[0].normalise();
    l.x = q[0].dot(q[1]);
    q[1] = q[1].combine(q[0], 1, -l.x);
    d.y = q[1].length();
    q[1] = q[1].normalise();
    l.x /= d.y;
    l.y = q[0].dot(q[2]);
    q[2] = q[2].combine(q[0], 1, -l.y);
    l.z = q[1].dot(q[2]);
    q[2] = q[2].combine(q[1], 1, -l.z);
    d.z = q[2].length();
    q[2] = q[2].normalise();
    l.y /= d.z;
    l.y /= d.z;
    b = q[1].cross(q[2]);
    if (0 > q[0].dot(b))
      for (b = 0; 3 > b; b++) d.x *= -1, q[b].x *= -1, q[b].y *= -1, q[
        b].z *= -1;
    b = new g;
    b.y = Math.asin(-q[0].z);
    0 != Math.cos(b.y) ? (b.x = Math.atan2(q[1].z, q[2].z), b.z =
      Math.atan2(q[0].y, q[0].x)) : (b.x = Math.atan2(-q[2].x, q[1].y),
      b.z = 0);
    return new f({
      perspective: a,
      translate: e,
      skew: l,
      scale: d,
      rotate: b
    })
  }
})();
(function() {
  function g(a, d, q) {
    var l = document.createElement("canvas");
    f(a, l, d, q);
    return l.toDataURL("image/jpeg", d.quality || .8)
  }

  function f(a, d, f, l) {
    var b = a.naturalWidth,
      c = a.naturalHeight,
      p = f.width,
      w = f.height,
      m = d.getContext("2d");
    m.save();
    f = f.orientation;
    switch (f) {
      case 5:
      case 6:
      case 7:
      case 8:
        d.width = w;
        d.height = p;
        break;
      default:
        d.width = p, d.height = w
    }
    switch (f) {
      case 2:
        m.translate(p, 0);
        m.scale(-1, 1);
        break;
      case 3:
        m.translate(p, w);
        m.rotate(Math.PI);
        break;
      case 4:
        m.translate(0, w);
        m.scale(1, -1);
        break;
      case 5:
        m.rotate(.5 *
          Math.PI);
        m.scale(1, -1);
        break;
      case 6:
        m.rotate(.5 * Math.PI);
        m.translate(0, -w);
        break;
      case 7:
        m.rotate(.5 * Math.PI);
        m.translate(p, -w);
        m.scale(-1, 1);
        break;
      case 8:
        m.rotate(-.5 * Math.PI), m.translate(-p, 0)
    }
    d = a.naturalWidth;
    1048576 < d * a.naturalHeight ? (f = document.createElement(
        "canvas"), f.width = f.height = 1, f = f.getContext("2d"), f.drawImage(
        a, -d + 1, 0), d = 0 === f.getImageData(0, 0, 1, 1).data[3]) :
      d = !1;
    d && (b /= 2, c /= 2);
    d = document.createElement("canvas");
    d.width = d.height = 1024;
    f = d.getContext("2d");
    if (l) {
      l = c;
      var u = document.createElement("canvas");
      u.width = 1;
      u.height = l;
      u = u.getContext("2d");
      u.drawImage(a, 0, 0);
      for (var u = u.getImageData(0, 0, 1, l).data, t = 0, h = l, r =
          l; r > t;) 0 === u[4 * (r - 1) + 3] ? h = r : t = r, r = h + t >>
        1;
      l = r / l;
      l = 0 === l ? 1 : l
    } else l = 1;
    p = Math.ceil(1024 * p / b);
    w = Math.ceil(1024 * w / c / l);
    for (u = l = 0; l < c;) {
      for (h = t = 0; t < b;) f.clearRect(0, 0, 1024, 1024), f.drawImage(
          a, -t, -l), m.drawImage(d, 0, 0, 1024, 1024, h, u, p, w), t +=
        1024, h += p;
      l += 1024;
      u += w
    }
    m.restore()
  }

  function d(a) {
    if (window.Blob && a instanceof Blob) {
      var d = new Image,
        f = window.URL && window.URL.createObjectURL ? window.URL :
        window.webkitURL &&
        window.webkitURL.createObjectURL ? window.webkitURL : null;
      if (!f) throw Error(
        "No createObjectURL function found to create blob url");
      d.src = f.createObjectURL(a);
      this.blob = a;
      a = d
    }
    if (!a.naturalWidth && !a.naturalHeight) {
      var l = this;
      a.onload = function() {
        var a = l.imageLoadListeners;
        if (a) {
          l.imageLoadListeners = null;
          for (var c = 0, d = a.length; c < d; c++) a[c]()
        }
      };
      this.imageLoadListeners = []
    }
    this.srcImage = a
  }
  d.prototype.render = function(a, d, q) {
    if (this.imageLoadListeners) {
      var l = this;
      this.imageLoadListeners.push(function() {
        l.render(a,
          d, q)
      })
    } else {
      d = d || {};
      var b = this.srcImage,
        c = b.src,
        p = c.length,
        w = b.naturalWidth,
        b = b.naturalHeight,
        m = d.width,
        u = d.height,
        t = d.maxWidth,
        h = d.maxHeight,
        c = this.blob && "image/jpeg" === this.blob.type || 0 === c.indexOf(
          "data:image/jpeg") || c.indexOf(".jpg") === p - 4 || c.indexOf(
          ".jpeg") === p - 5;
      m && !u ? u = b * m / w << 0 : u && !m ? m = w * u / b << 0 : (m =
        w, u = b);
      t && m > t && (m = t, u = b * m / w << 0);
      h && u > h && (u = h, m = w * u / b << 0);
      var w = {
          width: m,
          height: u
        },
        r;
      for (r in d) w[r] = d[r];
      r = a.tagName.toLowerCase();
      "img" === r ? a.src = g(this.srcImage, w, c) : "canvas" === r &&
        f(this.srcImage,
          a, w, c);
      if ("function" === typeof this.onrender) this.onrender(a);
      q && q()
    }
  };
  "function" === typeof define && define.amd ? define([], function() {
    return d
  }) : this.MegaPixImage = d
})();
(function(g) {
  function f(a) {
    if (!(this instanceof f)) return new f(a);
    a || (a = {});
    "number" == typeof a && (a = {
      frameRate: a
    });
    null != a.useNative || (a.useNative = !0);
    this.options = a;
    this.frameRate = a.frameRate || f.FRAME_RATE;
    this._frameLength = 1E3 / this.frameRate;
    this._isCustomFrameRate = this.frameRate !== f.FRAME_RATE;
    this._timeoutId = null;
    this._callbacks = {};
    this._tickCounter = this._lastTickTime = 0
  }
  var d, a;
  (function() {
    var e, q = ["webkit", "moz", "ms", "o"],
      l;
    try {
      g.top.name, l = g.top
    } catch (b) {
      l = g
    }
    d = l.requestAnimationFrame;
    a = l.cancelAnimationFrame ||
      l.cancelRequestAnimationFrame;
    for (e = 0; e < q.length && !d; e++) d = l[q[e] +
        "RequestAnimationFrame"], a = l[q[e] + "CancelAnimationFrame"] ||
      l[q[e] + "CancelRequestAnimationFrame"];
    d && d(function() {
      f.hasNative = !0
    })
  })();
  f.FRAME_RATE = 60;
  f.shim = function(a) {
    var d = new f(a);
    g.requestAnimationFrame = function(a) {
      return d.request(a)
    };
    g.cancelAnimationFrame = function(a) {
      return d.cancel(a)
    };
    return d
  };
  f.now = Date.now || function() {
    return (new Date).getTime()
  };
  f.navigationStart = f.now();
  f.perfNow = function() {
    return g.performance && g.performance.now ?
      g.performance.now() : f.now() - f.navigationStart
  };
  f.hasNative = !1;
  f.prototype.request = function(a) {
    var q = this,
      l;
    ++this._tickCounter;
    if (f.hasNative && q.options.useNative && !this._isCustomFrameRate)
      return d(a);
    if (!a) throw new TypeError("Not enough arguments");
    null == this._timeoutId && (l = this._frameLength + this._lastTickTime -
      f.now(), 0 > l && (l = 0), this._timeoutId = g.setTimeout(
        function() {
          var a;
          q._lastTickTime = f.now();
          q._timeoutId = null;
          ++q._tickCounter;
          for (a in q._callbacks)
            if (q._callbacks[a]) {
              if (f.hasNative && q.options.useNative) d(q._callbacks[a]);
              else q._callbacks[a](f.perfNow());
              delete q._callbacks[a]
            }
        }, l));
    this._callbacks[this._tickCounter] = a;
    return this._tickCounter
  };
  f.prototype.cancel = function(d) {
    f.hasNative && this.options.useNative && a(d);
    delete this._callbacks[d]
  };
  "object" == typeof exports && "object" == typeof module ? module.exports =
    f : "function" == typeof define && define.amd ? define(function() {
      return f
    }) : g.AnimationFrame = f;
  g.requestAnimationframe && g.cancelAnimationFrame || f.shim()
})(window);
(function(g) {
  navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
    navigator.mozGetUserMedia || navigator.msGetUserMedia;
  window.URL = window.URL || window.webkitURL || window.mozURL ||
    window.msURL || window.oURL;
  window.Blob = window.Blob || window.BlobBuilder || window.WebKitBlobBuilder ||
    window.MozBlobBuilder;
  (function(f) {
    for (var d, a = {}, e = function() {}, q = ["memory"], l =
        "assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn"
        .split(" "); d =
      q.pop();) f[d] = f[d] || a;
    for (; d = l.pop();) f[d] = f[d] || e
  })(g.console = g.console || {});
  g.Element && function(f) {
    f.matchesSelector = f.matchesSelector || f.mozMatchesSelector ||
      f.msMatchesSelector || f.oMatchesSelector || f.webkitMatchesSelector ||
      function(d) {
        d = (this.parentNode || this.document).querySelectorAll(d);
        for (var a = -1; d[++a] && d[a] != this;);
        return !!d[a]
      }
  }(Element.prototype);
  Date.now || (Date.now = function() {
    return (new Date).getTime()
  })
})(self);
(function(g) {
  var f = function(a, d) {
    sketch.util.require("./inc/" + (d || "shim") + "/" + a);
    window.eventjs_stallOnReady = !0
  };
  (function() {
    var a = document.createElement("DIV");
    a.innerHTML = "\x3c!--[if lte IE 9]><I></I><![endif]--\x3e";
    0 < a.getElementsByTagName("I").length && f("IE8-HTML5.js")
  })();
  (function() {
    var a = document.createElement("canvas");
    a.getContext && a.getContext("2d") || f("flashcanvas.js",
      "FlashCanvasPro")
  })();
  window.ArrayBuffer || (f("TypedArray.js"), f("downloadify.js",
    "File"));
  window.Blob || f("Blob.js");
  window.requestFileSystem ||
    window.webkitRequestFileSystem || f("requestFileSystem.js");
  window.atob && window.btoa || f("Base64.js");
  window.requestAnimationFrame || f("requestAnimationFrame.js");
  window.getComputedStyle || f("getComputedStyle.js");
  window.JSON && window.JSON.parse || f("JSON.js");
  document.querySelector || f("querySelector.js");
  document.documentElement.classList || f("ClassList.js");
  "undefined" === typeof window.innerHeight && f("dimensions.js");
  try {
    if ("undefined" === typeof chrome || "undefined" === typeof chrome
      .storage) localStorage.setItem("test",
      "test"), localStorage.removeItem("test")
  } catch (d) {
    f("localStorage.js")
  }
})(self);
(function(g) {
  g.URL = g.URL || g.webkitURL;
  if (g.Blob && g.URL) try {
    new Blob;
    return
  } catch (f) {}
  var d = g.BlobBuilder || g.WebKitBlobBuilder || g.MozBlobBuilder ||
    function(a) {
      var d = function(a) {
          return Object.prototype.toString.call(a).match(
            /^\[object\s(.*)\]$/)[1]
        },
        f = function() {
          this.data = []
        },
        l = function(a, h, b) {
          this.data = a;
          this.size = a.length;
          this.type = h;
          this.encoding = b
        },
        b = f.prototype,
        c = l.prototype,
        p = a.FileReaderSync,
        w = function(a) {
          this.code = this[this.name = a]
        },
        m =
        "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR"
        .split(" "),
        u = m.length,
        t = a.URL || a.webkitURL || a,
        h = t.createObjectURL,
        r = t.revokeObjectURL,
        k = t,
        v = a.btoa,
        x = a.atob,
        s = a.ArrayBuffer,
        z = a.Uint8Array;
      for (l.fake = c.fake = !0; u--;) w.prototype[m[u]] = u + 1;
      t.createObjectURL || (k = a.URL = {});
      k.createObjectURL = function(a) {
        var b = a.type;
        null === b && (b = "application/octet-stream");
        if (a instanceof l) return b = "data:" + b, "base64" === a.encoding ?
          b + ";base64," + a.data : "URI" === a.encoding ? b + "," +
          decodeURIComponent(a.data) : v ? b + ";base64," + v(a.data) :
          b + "," + encodeURIComponent(a.data);
        if (h) return h.call(t,
          a)
      };
      k.revokeObjectURL = function(a) {
        "data:" !== a.substring(0, 5) && r && r.call(t, a)
      };
      b.append = function(a) {
        var h = this.data;
        if (z && (a instanceof s || a instanceof z)) {
          var b = "";
          a = new z(a);
          for (var c = 0, k = a.length; c < k; c++) b += String.fromCharCode(
            a[c]);
          h.push(b)
        } else if ("Blob" === d(a) || "File" === d(a))
          if (p) b = new p, h.push(b.readAsBinaryString(a));
          else throw new w("NOT_READABLE_ERR");
        else a instanceof l ? "base64" === a.encoding && x ? h.push(x(a
            .data)) : "URI" === a.encoding ? h.push(decodeURIComponent(a.data)) :
          "raw" === a.encoding &&
          h.push(a.data) : ("string" !== typeof a && (a += ""), h.push(
            unescape(encodeURIComponent(a))))
      };
      b.getBlob = function(a) {
        arguments.length || (a = null);
        return new l(this.data.join(""), a, "raw")
      };
      b.toString = function() {
        return "[object BlobBuilder]"
      };
      c.slice = function(a, h, b) {
        var c = arguments.length;
        3 > c && (b = null);
        return new l(this.data.slice(a, 1 < c ? h : this.data.length),
          b, this.encoding)
      };
      c.toString = function() {
        return "[object Blob]"
      };
      c.close = function() {
        this.size = 0;
        delete this.data
      };
      return f
    }(g);
  g.Blob = function(a, e) {
    var f = e ? e.type ||
      "" : "",
      l = new d;
    if (a)
      for (var b = 0, c = a.length; b < c; b++) l.append(a[b]);
    return l.getBlob(f)
  }
})("undefined" !== typeof self && self || "undefined" !== typeof window &&
  window || this.content || this);
(function(g) {
  var f = g.Uint8Array,
    d = (g = g.HTMLCanvasElement) && g.prototype,
    a = /\s*;\s*base64\s*(?:;|$)/i,
    e = "toDataURL",
    q;
  f && (q = new f([62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59,
    60, 61, -1, -1, -1, 0, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
    10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -
    1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
    36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51
  ]));
  g && !d.toBlob && (d.toBlob = function(d, b) {
    b || (b = "image/png");
    if (this.mozGetAsFile) d(this.mozGetAsFile("canvas", b));
    else if (this.msToBlob && /^\s*image\/png\s*(?:$|;)/i.test(b)) d(
      this.msToBlob());
    else {
      var c = Array.prototype.slice.call(arguments, 1),
        p = this[e].apply(this, c),
        w = p.indexOf(","),
        c = p.substring(w + 1),
        p = a.test(p.substring(0, w)),
        m;
      if (Blob.fake) m = new Blob, m.encoding = p ? "base64" : "URI",
        m.data = c, m.size = c.length;
      else if (f)
        if (p) {
          m = Blob;
          for (var p = c.length, w = new f(p / 4 * 3 | 0), u = 0, t = 0,
              h = [0, 0], r = 0, k = 0, v, x; p--;) x = c.charCodeAt(u++),
            v = q[x - 43], 255 !== v && void 0 !== v && (h[1] = h[0], h[
              0] = x, k = k << 6 | v, r++, 4 === r && (w[t++] = k >>> 16,
              61 !== h[1] && (w[t++] = k >>> 8), 61 !== h[0] && (w[t++] =
                k), r = 0));
          m = new m([w], {
            type: b
          })
        } else m = new Blob([decodeURIComponent(c)], {
          type: b
        });
      d(m)
    }
  }, d.toBlobHD = d.toDataURLHD ? function() {
    e = "toDataURLHD";
    var a = this.toBlob();
    e = "toDataURL";
    return a
  } : d.toBlob);
  g && !d.toBlobURL && (d.toBlobURL = function(a) {
    a = a || function(a) {
      console.log("no callback", a)
    };
    this.toBlob(function(b) {
      a(URL.createObjectURL(b))
    })
  })
})("undefined" !== typeof self && self || "undefined" !== typeof window &&
  window || this.content || this);
document.createElementNS || (document.createElementNS = function(g,
  f) {
  return document.createElement(f)
});
if (!window.chrome || !window.chrome.fileSystem) {
  var saveAs = saveAs || "undefined" !== typeof navigator && navigator
    .msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator) ||
    function(g) {
      if ("undefined" === typeof navigator || !/MSIE [1-9]\./.test(
          navigator.userAgent)) {
        var f = g.document,
          d = f.createElementNS("http://www.w3.org/1999/xhtml", "a"),
          a = "download" in d,
          e = function(a) {
            var h = f.createEvent("MouseEvents");
            h.initMouseEvent("click", !0, !1, g, 0, 0, 0, 0, 0, !1, !1, !1, !
              1, 0, null);
            a.dispatchEvent(h)
          },
          q = g.webkitRequestFileSystem,
          l = g.requestFileSystem || q || g.mozRequestFileSystem,
          b = function(a) {
            (g.setImmediate || g.setTimeout)(function() {
              throw a;
            }, 0)
          },
          c = 0,
          p = function(a) {
            var h = function() {
              "string" === typeof a ? (g.URL || g.webkitURL || g).revokeObjectURL(
                a) : a.remove()
            };
            g.chrome ? h() : setTimeout(h, 500)
          },
          w = function(a, h, c) {
            h = [].concat(h);
            for (var d = h.length; d--;) {
              var p = a["on" + h[d]];
              if ("function" === typeof p) try {
                p.call(a, c || a)
              } catch (e) {
                b(e)
              }
            }
          },
          m = function(b, h) {
            var r = this,
              k = b.type,
              v = !1,
              m, s, f = function() {
                w(r, ["writestart", "progress", "write", "writeend"])
              },
              y = function() {
                if (v || !m) m = (g.URL || g.webkitURL || g).createObjectURL(
                  b);
                s ? s.location.href = "https://sketch.io/sketchpad/" : void 0 == g.open(m, "_blank") &&
                  "undefined" !== typeof safari && (g.location.href = "https://sketch.io/sketchpad/");
                /*s ? s.location.href = m : void 0 == g.open(m, "_blank") &&
                    "undefined" !== typeof safari && (g.location.href = m);*/
                r.readyState = r.DONE;
                f();
                p(m)
              },
              B = function(a) {
                return function() {
                  if (r.readyState !== r.DONE) return a.apply(this, arguments)
                }
              },
              A = {
                create: !0,
                exclusive: !1
              },
              u;
            r.readyState = r.INIT;
            h || (h = "download");
            if (a) m = (g.URL || g.webkitURL || g).createObjectURL(b), d.href =
              m, d.download = h, e(d), r.readyState = r.DONE, f(), p(m);
            else {
              g.chrome && k && "application/octet-stream" !==
                k && (u = b.slice || b.webkitSlice, b = u.call(b, 0, b.size,
                  "application/octet-stream"), v = !0);
              q && "download" !== h && (h += ".download");
              if ("application/octet-stream" === k || q) s = g;
              l ? (c += b.size, l(g.TEMPORARY, c, B(function(a) {
                a.root.getDirectory("saved", A, B(function(a) {
                  var c = function() {
                    a.getFile(h, A, B(function(a) {
                      a.createWriter(B(function(h) {
                        h.onwriteend = function(h) {
                          s.location.href = a.toURL();
                          r.readyState = r.DONE;
                          w(r, "writeend", h);
                          p(a)
                        };
                        h.onerror = function() {
                          var a = h.error;
                          a.code !== a.ABORT_ERR && y()
                        };
                        ["writestart", "progress",
                          "write", "abort"
                        ].forEach(function(a) {
                          h["on" + a] = r["on" + a]
                        });
                        h.write(b);
                        r.abort = function() {
                          h.abort();
                          r.readyState = r.DONE
                        };
                        r.readyState = r.WRITING
                      }), y)
                    }), y)
                  };
                  a.getFile(h, {
                    create: !1
                  }, B(function(a) {
                    a.remove();
                    c()
                  }), B(function(a) {
                    a.code === a.NOT_FOUND_ERR ? c() : y()
                  }))
                }), y)
              }), y)) : y()
            }
          },
          u = m.prototype;
        u.abort = function() {
          this.readyState = this.DONE;
          w(this, "abort")
        };
        u.readyState = u.INIT = 0;
        u.WRITING = 1;
        u.DONE = 2;
        u.error = u.onwritestart = u.onprogress = u.onwrite = u.onabort =
          u.onerror = u.onwriteend = null;
        return function(a, h) {
          return new m(a,
            h)
        }
      }
    }("undefined" !== typeof self && self || "undefined" !== typeof window &&
      window || this.content);
  "undefined" !== typeof module && module.exports ? module.exports.saveAs =
    saveAs : "undefined" !== typeof define && null !== define && null !=
    define.amd && define([], function() {
      return saveAs
    })
}
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sk && (sk = sketch);
(function(g) {
  g.module = g.module || {};
  g.module.Namespace = function(f) {
    var d = f.util;
    sk = f;
    f.__version = "3.7.3";
    "{{" === f.__version.substr(0, 2) && (f.__version = "3.7.0dev");
    f.doc = f.doc || {};
    f.doc.selection = f.doc.selection || {};
    f.docs = f.docs || {};
    f.api = f.api || {};
    f.dom = f.dom || {};
    f.module = f.module || {};
    f.events = f.events || {};
    f.fs = f.fs || {};
    f.gen = f.gen || {};
    f.io = f.io || {};
    f.lang = f.lang || {};
    f.lib = f.lib || {};
    f.loc = f.loc || {};
    f.net = f.net || {};
    f.sidebar = f.sidebar || {};
    f.server = f.server || {};
    f.setup = f.setup || {};
    f.client = f.client || {
      io: {}
    };
    f.ui = f.ui || {};
    f.ui.menu = f.ui.menu || {};
    f.ui.colorPicker = f.ui.colorPicker || {};
    f.ui.icons = f.ui.icons || {};
    f.ui.contextMenu = f.ui.contextMenu || {};
    f.client = f.client || {};
    f.vector = f.vector || {};
    f.windows = f.windows || {};
    (function() {
      var a = f.feature = {};
      a.debug = !1;
      a.debugCache = !1;
      a.debugRender = !1;
      a.kiosk = !1;
      a.defaultSketch = "new";
      a.lang = "auto";
      a.prefix = "sketch";
      a.theme = "light";
      a.cache257 = !1;
      a.cache2D = !0;
      a.cache2DPadding = 2;
      a.cacheSVG = !0;
      a.doc = {};
      a.doc.bounds = {};
      a.doc.centerOnLoad = !0;
      a.doc.centerOnResize = !0;
      a.doc.clip = {};
      a.doc.description = "made with https://sketch.io/";
      a.doc.format = "json";
      a.doc.title = "My Drawing";
      a.doc.units = "%";
      a.doc.width = 100;
      a.doc.height = 100;
      a.doc.x = 0;
      a.doc.y = 0;
      a.tools = {};
      a.tools.defaultTool = "pen";
      a.tools.defaults = {};
      a.tools.defaults.addByClick = !0;
      a.tools.defaults.addByDrag = !0;
      a.tools.defaults.constrainToCanvas = !1;
      a.tools.defaults.drawBBox = !0;
      a.tools.defaults.defaultHeight = 100;
      a.tools.defaults.defaultWidth = 100;
      a.tools.defaults.maxHeight = 16384;
      a.tools.defaults.maxWidth = 16384;
      a.tools.defaults.minHeight =
        3;
      a.tools.defaults.minWidth = 3;
      a.tools.defaults.movable = !0;
      a.tools.defaults.units = "objectBoundingBox";
      a.tools.defaults.usePointInBBox = !0;
      a.tools.defaults.usePointInImageData = !1;
      a.tools.defaults.usePointInPath = !1;
      a.tools.defaults.usePointNearest = !0;
      a.tools.defaults.controls = {};
      a.tools.defaults.controls.anchor = void 0;
      a.tools.defaults.controls.spinner = void 0;
      a.tools.defaults.controls.n = void 0;
      a.tools.defaults.controls.s = void 0;
      a.tools.defaults.controls.e = void 0;
      a.tools.defaults.controls.w = void 0;
      a.tools.defaults.controls.ne =
        void 0;
      a.tools.defaults.controls.se = void 0;
      a.tools.defaults.controls.sw = void 0;
      a.tools.defaults.controls.nw = void 0;
      a.tools.defaults.controls.mouse = {};
      a.tools.defaults.controls.mouse.width = 14;
      a.tools.defaults.controls.mouse.height = 14;
      a.tools.defaults.controls.mouse.padding = 0;
      a.tools.defaults.controls.touch = {};
      a.tools.defaults.controls.touch.width = 24;
      a.tools.defaults.controls.touch.height = 24;
      a.tools.defaults.controls.touch.padding = 0;
      a.tools.defaults.controls.allowFlip = !0;
      a.tools.select = {};
      a.tools.select.useConfigure = !0;
      a.tools.select.clickToDeselect = !0;
      a.tools.text = {};
      a.tools.text.autoHeight = !0;
      a.tools.text.clip = !1;
      a.tools.text.defaultHeight = 100;
      a.tools.text.defaultWidth = 300;
      a.tools.text.minHeight = 15;
      a.tools.text.minWidth = 15;
      a.tools.text.useHTML = !1;
      a.tools.text.useCanvasRender = !1;
      a.tools.text.useSearch = "text";
      a.tools.media = {};
      a.tools.media.useSearch = "no";
      a.tools.shape = {};
      a.tools.brush = {};
      a.tools.vectorfill = {};
      a.tools.vectorfill.fillArea = "point";
      a.tools.vectorfill.fillMode = !1;
      a.canvas = {};
      a.canvas.clip = !0;
      a.canvas.containerScale = !1;
      a.canvas.drawCenterPoint = !0;
      a.canvas.glfx = !1;
      a.canvas.useBGRender = !1;
      a.canvas.useBGSave = !0;
      a.canvas.useGroupBBox = !1;
      a.canvas.usePixelRatio = !1;
      a.canvas.usePixelRatioDesktop = !1;
      a.zoom = {};
      a.zoom.defaultValue = 1;
      a.zoom.fromCenter = !0;
      a.zoom.increment = .1;
      a.zoom.max = 100;
      a.zoom.min = .25;
      a.zoom.value = 1;
      a.vector = {};
      a.vector.edit = !0;
      a.vector.record = !0;
      a.ui = {};
      a.ui.addToLibrary = !0;
      a.ui.bruteForce = !0;
      a.ui.cursors = !1;
      a.ui.scrollerAtopColor = "#fff";
      a.ui.scrollerCategories = !0;
      a.ui.scrollerShadow = !1;
      a.ui.dynamicCursor = !1;
      a.ui.customRangeBar = !1;
      a.ui.quickSelect = !1;
      a.ui.tooltips = !0;
      a.ui.subtool = "list";
      a.beforeUnloadPrompt = !1;
      a.preventScroll = !1;
      a.preventTouch = !1;
      a.requireAuth = !1;
      a.windows = !0;
      a.pane = {};
      a.pane.position = void 0;
      a.pane.header = !0;
      a.io = {};
      a.io.exportDrop = !1;
      a.io.filePickerIO = !1;
      a.io.defaultProject = !1;
      a.io.translateX = 0;
      a.io.translateY = 0;
      a.palette = {};
      a.palette.hexInput = !1;
      a.palette.closeButton = !1;
      a.palette.colorPicker = !1;
      a.palette.eyeDropper = !1;
      a.palette.grid = !1;
      a.palette.header = "";
      a.palette.version = 2;
      a.palette.buildInstant = !1;
      a.style = {};
      a.style.toGlobalOnSelect = !0;
      a.style.fromGlobalStyleOnSetTool = !1;
      a.style.fromGlobalBlendOnSetTool = !1;
      a.style.blend = !1;
      a.style.composite = !1;
      a.style.defaultFillType = "color";
      a.style.defaultStrokeType = "color";
      a.style.color = "#000";
      a.style.gradient = !1;
      a.style.pattern = !1;
      a.style.colorMode = !1;
      a.style.colorNoise = !1;
      a.style.lineJoin = !1;
      a.placement = {};
      a.placement.mediaClick = !1;
      a.placement.mediaDblClick = !1;
      a.placement.mediaDrag = !1;
      a.history = {};
      a.history.autoSelect = !1;
      a.history.bitmap = !1;
      a.history.limit = !1;
      a.history.vector = !1;
      a.sync = {};
      a.sync.image = !1;
      a.sync.json = !1;
      a.sync.svg = !1;
      a.sync.thumb = !1;
      a.sync.zip = !1;
      a.sync.localRefs = !0;
      a.sync.maxAssetSize = 0;
      a.sync.maxFileSize = 0;
      a.sync.useDefaultFormat = !1;
      a.sync.enabled = !1;
      a.sync.hashId = !1;
      a.sync.hashFlag = "sketch";
      a.stream = {};
      a.stream.api = "RTCDataChannel";
      a.stream.audio = !1;
      a.stream.maxFileSize = 0;
      a.stream.realtime = !1;
      a.stream.sketch = !1;
      a.stream.spectrumAnalysis = !1;
      a.stream.text = !1;
      a.stream.video = !1;
      a.stream.videoAtop = !1;
      a.session = {};
      a.session.path = "";
      a.session.sessionid =
        "";
      a.session.userid = "";
      a.session.username = "";
      a.social = {};
      a.social.autoLogout = !1;
      a.social.autoLogoutTimeout = !1;
      a.social.setCookie = !0
    })();
    (function() {
      var a = f.attrs = {},
        e = function(a) {
          for (var b = {}, c = 0, d; c < a.length; c++)
            if (d = a[c]) {
              var e = d[0].toLowerCase() + d.substr(1);
              b[e] = d
            }
          return b
        },
        q = function(a, b) {
          b = e(b);
          (f.attrs[a] = function(c) {
            var d = this;
            (this.setValue = function(c) {
              if ("undefined" !== typeof c) {
                if ("string" === typeof c) {
                  var e = b,
                    f = document.createElement("span").style;
                  f[a] = c;
                  for (var t in e) c = f[a + e[t]], "" !== c &&
                    "initial" !== c && (d[t] = c)
                } else
                  for (e in b) "undefined" !== typeof c[e] && (d[e] = c[e]);
                return d
              }
            })(c)
          }).type = a
        };
      q("background",
        "Color Image Repeat Attachment Position Clip Origin Size".split(
          " "));
      q("border",
        "Width Style Color Radius ImageSource ImageSlice ImageWidth ImageOutset ImageRepeat"
        .split(" "));
      q("padding", ["Top", "Left", "Bottom", "Right"]);
      q("margin", ["Top", "Left", "Bottom", "Right"]);
      a.create = function(d, b) {
        return a[d] ? new a[d](b) : b
      };
      a.update = function(d, b, c) {
        return c && c.setValue ? c.setValue(b) : a.create(d,
          b)
      };
      a.__basicObject = {
        meta: "string",
        bbox: "object",
        composite: "string",
        groupId: "string",
        opacity: "number",
        seed: "number",
        type: "string",
        visible: "boolean"
      };
      a.__styledObject = d.cloneInto(a.__basicObject, {
        filter: "filter",
        fill: "style",
        stroke: "style",
        border: "border",
        background: "background",
        margin: "margin",
        padding: "padding"
      });
      a.__rules = {
        exportable: "boolean",
        movable: "boolean",
        rotatable: "boolean",
        scalable: "boolean",
        selectable: "boolean",
        useAlignX: "string",
        useAlignY: "string",
        useBackgroundOverlay: "boolean",
        useConstrain: "boolean",
        useConstrainX: "boolean",
        useConstrainY: "boolean",
        useControlNE: "boolean",
        useControlNW: "boolean",
        useControlSE: "boolean",
        useControlSW: "boolean",
        useHighRes: "boolean",
        useMaxCopies: "number",
        useMaxHeight: "number",
        useMaxWidth: "number",
        useMinHeight: "number",
        useMinWidth: "number",
        usePixelData: "boolean",
        useStickToBack: "boolean",
        useStickToFront: "boolean",
        useStretchToEdge: "boolean",
        useStretchToFit: "boolean"
      }
    })()
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Namespace)
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  sketchObj.module = sketchObj.module || {};
  sketchObj.module.Document = function(sketchObj) {
    var d = "undefined" === typeof window ? {} : window,
      a = this,
      e = sketchObj.client,
      q = sketchObj.dom,
      l = sketchObj.feature,
      b = sketchObj.style,
      c = sketchObj.ui,
      sketchUtil = sketchObj.util;
    a.idx = sketchObj.module.Document.idx++;
    a.__editing = !1;
    a.__interacting = !1;
    a.__lastSynchronized = 0;
    a.__lastModified = 0;
    a.__preloading = !1;
    a.__rendering = !1;
    a.defaultTool = "select";
    a.on = {};
    a.tool = {};
    a.config = {};
    a.selection = {};
    sketchObj.docs[a.idx] = a;
    var w = a.contexts = {
        layer0: "z-index: 0;",
        draw: "z-index: 1;",
        active: "z-index: 2;",
        cache: "display: none;"
      },
      m = a.canvas2d = {
        x: 0,
        y: 0,
        width: 0,
        height: 0,
        orientX: 0,
        orientY: 0
      };
    a.container = d.document;
    a.format = "json";
    a.title = l.doc.title;
    a.description = l.doc.description;
    a.uuid = sketchUtil.uuid();
    a.dpi = 72;
    a.pixelRatio = d.devicePixelRatio || 1;
    a.zoom = 1;
    a.units = "%";
    a.x = 0;
    a.y = 0;
    a.width = 100;
    a.height = 100;
    a.scrollLeft = 0;
    a.scrollTop = 0;
    a.pages = {};
    a.pages.length = 1;
    a.pages.data = [{
      width: a.width,
      height: a.height
    }];
    a.bounds = {
      width: 0,
      height: 0
    };
    a.viewport = {
      width: 0,
      height: 0,
      clip: {}
    };
    a.clip = {};
    b && (a.setFont = b.setFont, a.setFill = b.setFill, a.setStroke =
      b.setStroke);
    a.getBounds = function(h) {
      h = h || {};
      h.dpi = h.dpi || 72;
      h.scale = h.scale || 1;
      var b = a.getViewport(),
        c = a.bounds;
      "%" === a.units ? (c.width = (a.width || 100) / 100 * b.width,
        c.height = (a.height || 100) / 100 * b.height) : (c.width = a
        .width, c.height = a.height);
      h = h.dpi / 72 * h.scale;
      c.width = Math.ceil(c.width * h);
      c.height = Math.ceil(c.height * h);
      c.x = a.x;
      c.y = a.y;
      return c
    };
    a.getViewport = function() {
      var h = q.measure(a.scrollElement),
        b = a.viewport;
      b.width = h.width / h.scaleX;
      b.height = h.height / h.scaleY;
      return b
    };
    a.setMetrics = function(h) {
      a.x =
        isFinite(h.x) ? h.x : a.x || 0;
      a.y = isFinite(h.y) ? h.y : a.y || 0;
      a.orient.reset();
      a.setSize(h.width || a.width, h.height || a.height, h.units ||
        a.units, h.dpi || a.dpi);
      a.scrollTo(h.scrollLeft || a.scrollLeft, h.scrollTop || a.scrollTop);
      a.orient.reset();
      a.orient.setZoom(h.zoom || 1);
      a.orient.render()
    };
    a.getMetrics = function() {
      var h = {};
      h.units = a.units;
      h.x = a.x;
      h.y = a.y;
      h.width = a.width;
      h.height = a.height;
      h.scrollLeft = a.scrollLeft;
      h.scrollTop = a.scrollTop;
      h.zoom = a.zoom;
      return h
    };
    a.setAttributes = function(h) {
      a.mixinAttributes(h, a)
    };
    (function() {
      var h = {
        uuid: "string",
        title: "string",
        description: "string",
        background: {
          string: !0,
          object: !0
        },
        format: "string",
        units: "string",
        dpi: "number",
        x: "number",
        y: "number",
        width: "number",
        height: "number",
        pages: "object",
        clip: "object"
      };
      a.mixinAttributes = function(a, b) {
        if ("object" === typeof a) {
          for (var c in a) {
            var d = typeof a[c],
              sketchUtil = h[c];
            sketchUtil && (d === sketchUtil || sketchUtil[d]) && (b[c] = a[c])
          }
          a.width && a.height && b.pages && 1 === b.pages.length && (c =
            b.pages.data[0], c.width = a.width, c.height = a.height);
          return b
        }
      }
    })();
    a.focus = function() {
      sketchObj.doc = a;
      a.focusEditable.focus()
    };
    a.setPixelRatio = function(h) {
      u(h) && (a.setCanvasSize(), a.orient.reset(), a.orient.render(
        "root.setPixelRatio"))
    };
    var u = function(h) {
      if (a.pixelRatio !== h) return a.pixelRatio = h || 1, a.scene.setDirtyCache(
        a.scene.children), !0
    };
    a.setZoom = function(h) {
      h === +h && (a.orient.setZoom(h), a.orient.render())
    };
    a.setClip = function(h, b) {
      h ? h.path ? a.setClipPath(h, b) : a.setClipRect(h, b) : (a.clip = {},
        a.render.clipped = !1)
    };
    a.setClipRect = function(h, b) {
      a.clip = h
    };
    a.setClipPath = function(h, b) {
      var c = new sketchObj.vector.Transform;
      c.scale(b, b);
      c.flatten(h.path);
      a.clip = {};
      a.clip.path = h.path;
      a.clip.style = h.style
    };
    a.setPage = function(h, b) {
      var c = a.pages;
      if (b)
        for (var d = 0, p = a.scrollTop + a.viewport.height, s = 0; s <
          c.data.length; s++)
          if (d += c.data[s].height, p <= d) {
            h = s + h;
            break
          }
      h = Math.min(c.length - 1, Math.max(0, h));
      for (d = s = 0; s < h; s++) d += c.data[s].height;
      a.scrollTo(null, d)
    };
    a.addPage = function(h) {
      h.width && h.height && (a.pages.length++, a.pages.data.push({
        width: h.width,
        height: h.height
      }), a.setSize(a.width, a.height + h.height), a.scrollElementCSS())
    };
    a.removePage = function(h) {
      isFinite(h) &&
        a.pages.data[h] && (h = a.pages.data.splice(h, 1)[0]) && (a.pages
          .length--, a.setSize(a.width, a.height - h.height), a.scrollElementCSS()
        )
    };
    a.scrollTo = function(h, b, c) {
      var d = a.scrollElement;
      q.scrollTo && c ? q.scrollTo({
        target: d,
        top: b,
        left: h,
        duration: c
      }) : (Math.abs(b) === b && (d.scrollTop = b), Math.abs(h) ===
        h && (d.scrollLeft = h))
    };
    a.scrollReset = function() {
      var h = a.scrollElement;
      h.scrollTop = 0;
      h.scrollLeft = 0;
      a.scrollTop = 0;
      a.scrollLeft = 0
    };
    a.scrollElementCSS = function() {
      var h = a.pixelRatio,
        b = a.scrollLeft,
        c = a.scrollTop,
        d = a.orient.scale,
        p = a.orient.getValues(),
        s = a.setBounds(),
        e = a.styleElement.style;
      e.width = d * s.width + "px";
      e.height = d * s.height + "px";
      e.left = (p.x + b * (1 - d)) / h + "px";
      e.top = (p.y + c * (1 - d)) / h + "px";
      h = a.scrollElement;
      h.scrollTop > a.height - a.viewport.height && (h.scrollTop = a.height -
        a.viewport.height);
      t()
    };
    a.setBounds = function(h, b) {
      var c = a.zoom,
        d = a.container,
        p = a.getBounds();
      h = h || p.width;
      b = b || p.height;
      h && b || (p = q.measure(d), h = p.width, b = p.height);
      var c = Math.max(1, c),
        p = a.getViewport(),
        s = Math.max(p.width, h),
        e = Math.max(p.height, b),
        s = s * c,
        c = e *
        c;
      "%" !== a.units && (l.canvas.containerScale ? (e = Math.min(s,
          p.width), p = Math.min(c, p.height)) : (e = s, p = c), d.style
        .width = e + "px", d.style.height = p + "px");
      return {
        targetWidth: s,
        targetHeight: c,
        width: h,
        height: b
      }
    };
    a.setContainer = function(h) {
      var b = "string" === typeof h ? h : h.container || document.body;
      "string" === typeof b && (b = document.querySelector(b));
      var c = b.classList.contains("sk-canvas-content"),
        d = b.classList.contains("sk-canvas");
      b.querySelector(".sk-canvas") || c || d || (c = b, d = q.create(
          '<div class="sk-viewport"></div>'),
        b = q.create('<div class="sk-canvas"></div>'), d.appendChild(
          b), c.appendChild(d));
      eventjs.add(b, "click", function(b) {
        sketchObj.setDocument(a.idx)
      });
      c = b.querySelector(".sk-dummy-canvas");
      c || (c = document.createElement("div"), c.className =
        "sk-dummy-canvas", c.setAttribute("data-pid", a.idx), e.mobile ||
        (c.contentEditable = !0), b.appendChild(c));
      a.focusEditable = c;
      a.focusElement = h.focusElement || c;
      a.styleElement = c;
      a.scrollElement = h.scrollElement || b.parentNode || b;
      return a.container = b
    };

    (function() {
      var h, c;
      a.setBackground = function(backgroundKind, z, t) {
        console.log("[Background] Canvas background changing to " + (backgroundKind.src || backgroundKind));// ("undefined" === typeof backgroundKind.src ? backgroundKind : backgroundKind.src));
        console.dir(backgroundKind);
        if (backgroundKind) {
          if (h = z || backgroundKind.onload, c = t || backgroundKind.onerror, backgroundKind.type) {
            switch (backgroundKind = b.clone(backgroundKind), backgroundKind.type) {
              case "color":
                d(backgroundKind.color);
                break;
              case "gradient":
                m(backgroundKind);
                break;
              case "pattern":
                q(backgroundKind.pattern, backgroundKind);
              }
          } else {
            if (backgroundKind.crop) {
              var w = a.bounds;
              return sketchUtil.thumbnailer({
                src: B,
                crop: backgroundKind.crop || "fit",
                center: backgroundKind.center || !1,
                width: backgroundKind.width || w.width,
                height: backgroundKind.height || w.height,
                onload: function(a) {
                  q(a.toDataURL(), backgroundKind)
                }
              });
            }
            var background = backgroundKind.src || backgroundKind;
            switch (background) {
              case "none":
                break;
              case "blank":
                return d("white", "light");
              case "white":
                return d("white", "light");
              case "black":
                return d("black", "dark");
              case "grid":
                return e(sketchObj.gen.grid, "grid", "light");
              case "graphPaper":
                return e(sketchObj.gen.grid, "graphPaper", "light");
              case "blueprint":
                return e(sketchObj.gen.grid, "blueprint", "light");
              case "notebook":
                return e(sketchObj.gen.paper, "notebook", "light");
              case "looseLeaf":
                return e(sketchObj.gen.paper, "looseLeaf", "light");
              case "lined":
                return e(sketchObj.gen.paper, "lined", "dark");
              case "transparent":
                return e(sketchObj.gen.interlace, "transparent", "light");
              case "transparentDark":
                return e(sketchObj.gen.interlace, "transparentDark", "dark");
              default:
                console.log("[Background] Got other background: " + background);
                w = b.validate(background),
                  "color" === w ? d(background, "light") : "pattern" === w || 0 ===
                  background.indexOf("url(") ? (w = background.match(/url\(([^<]+)\)/), q((
                    w && w[1] ? w[1] : background).replace(/['']/g, ""))) : s(background);
            }
          } 
        } else console.warn("setBackground invalid params", arguments);
      };

      var d = function(a, b) {
          l.theme = b;
          w(a, a, a);
          h && h()
        },
        e = function(a, b, c) {
          l.theme = c;
          a(b, function(a) {
            w(b, a.css, a);
            h && h()
          })
        },
        m = function(a) {
          var c = a.angle,
            d = a.mode,
            k = b.getColorStopsHelper({
              dna: a[a.type],
              noise: a.noise
            }),
            c = b.toCSSGradient({
              stops: b.toCSSColorStops(k),
              type: d,
              angle: c
            });
          w(a, c, z(d, k, a));
          h && h()
        },
        s = function(a) {
          -1 ===
            a.indexOf("gradient") && (a = b.toCSSGradient({
              dna: a,
              type: "linear",
              angle: "0deg"
            }));
          var d = b.parseCSSGradient(a).stops;
          d ? (w(a, a, z("linear", d)), h && h()) : c && c()
        },
        z = function(h, c, d) {
          var k = a.bounds;
          return b.createGradient(null, h, 0, 0, k.width, k.height, c,
            d)
        },
        q = function(a, d) {
          var k = sketchObj.loc.getMediaUrl(a);
          sketchObj.convert.fileToPattern(k, function(c) {
            b.loadPattern(a);
            w(d || a, "url(" + k + ")", c);
            t();
            h && h()
          }, c)
        },
        w = function(b, h, c) {
          a.background = b;
          a.backgroundRaw = c;
          b = a.styleElement.style;
          b.background !== h && (l.canvas.useBGRender ? a.render.clean(
              "doc.setBackground") :
            b.background = h)
        }
    })();
    var t = function() {
      var b = a.backgroundRaw;
      if (b && b.canvas) {
        var c = a.orient.scale,
          b = b.canvas;
        a.styleElement.style.backgroundSize = b.width * c + "px " + b.height *
          c + "px"
      }
    };
    a.setSize = function(b, c, d, p) {
      b || c ? "%" === d ? (a.dpi = p || 72, a.width = b, a.height =
        c, a.units = "%") : (a.dpi = p || 72, a.width = b, a.height =
        c, a.units = "px") : (a.dpi = 72, a.width = 100, a.height =
        100, a.units = "%");
      a.setCanvasSize()
    };
    a.setCanvasSize = function(b, c) {
      a.render.clipped = !1;
      var k = a.container,
        v = k.parentNode;
      v.style.overflow = "auto";
      l.canvas.usePixelRatioDesktop &&
        !e.mobile ? u(d.devicePixelRatio) : l.canvas.usePixelRatio &&
        u(d.devicePixelRatio);
      "%" === a.units && (k.style.width = v.style.width = k.style.height =
        v.style.height = "100%", v.scrollTop = 0);
      var x = a.getViewport(),
        s = x.width,
        x = x.height,
        z = a.setBounds(b, c);
      "%" === a.units ? v.style.overflow = "hidden" : (v.style.overflowX =
        z.targetWidth <= s ? "hidden" : "auto", v.style.overflowY = z
        .targetHeight <= x ? "hidden" : "auto", z.targetWidth <= s &&
        z.targetHeight <= x && a.scrollReset());
      l.canvas.containerScale && !a.render.toExport ? (b = Math.min(z
        .targetWidth,
        s), c = Math.min(z.targetHeight, x)) : (b = z.targetWidth, c =
        z.targetHeight, v.scrollTop = 0);
      m.width = b;
      m.height = c;
      if (v = !l.vector.edit && w.cache) w.cache.width = b, w.cache.height =
        c, w.cache.ctx.drawImage(w.layer0, 0, 0);
      var s = a.pixelRatio,
        t;
      for (t in w) x = "cache" === t, v && x || (z = w[t], "string" ===
        typeof z && (z = sketchUtil.Canvas(1, 1), z.style.cssText = w[t]), z.width =
        b * s, z.height = c * s, z.className = "layer-" + t, w[t] = z,
        x || (z.style.width = m.width + "px", z.style.height = m.height +
          "px", k.appendChild(z)));
      v && (k = w.layer0, v = k.ctx, sketchUtil.Canvas.blip(k, b, c), v.drawImage(
        w.cache,
        0, 0), k = w.cache, sketchUtil.Canvas.blip(k, b, c));
      if (k = a.scene && a.scene.children) {
        v = a.selection.items;
        for (t in v)
          if (v = k[t]) v.dirtyControl = !0;
        a.scene.setDirtyBounds(a.scene.children);
        sketchObj.windows.restore && sketchObj.windows.restore()
      }
    };
    a.setTool = function(h, d, k) {
      void 0 === h && (h = {
        type: a.defaultTool
      });
      "string" === typeof h && (h = {
        type: h
      });
      var e = h.type;
      d = h.onload || d;
      k = h.onerror || k;
      if (a.tool.type === e) return d && d();
      if (h = a.toolkit.getConfig(e)) {
        var m = a.scene;
        "select" === e ? l.vector.edit && (m.setDirtyControl(), a.toolkit
          .area.inGenesis && (a.toolkit.area.hide(),
            a.render())) : m.selection.length && (m.deselectAll(), a.render
          .sceneGCO("doc.setTool"));
        c.setToolMenu && c.setToolMenu(e);
        l.style.fromGlobalStyleOnSetTool && b.cloneToObject(h);
        l.style.fromGlobalBlendOnSetTool && b.setComposite(b.composite,
          h.type);
        m = (m = h.composite) && m.selected || m;
        b.useComposite(m) ? (b.composite = m, a.render.setGCO(m, h.type)) :
          (b.composite = "source-over", a.render.setGCO("source-over",
            h.type));
        a.toolkit.setTool({
          type: e,
          onerror: k,
          onload: function() {
            c.configureBuild && c.configureBuild(e);
            a.saveSettings();
            d && d()
          }
        });
        sketchUtil.setItem("tool.type", e)
      }
    };
    a.reset = function() {
      a.scrollReset();
      a.orient && a.orient.reset();
      a.scene && a.scene.reset();
      a.history && a.history.reset()
    };
    a.destroy = function() {
      delete sketchObj.docs[a.idx];
      a.keyboard && a.keyboard.disable();
      a.tool && a.tool.disable();
      c.scrollers && (c.scrollers = {});
      eventjs.removeEvents(sketchObj.events)
    };
    a.saveSettings = function() {
      var b = a.config[a.tool.type];
      b && (b = a.scene.stringify(b), sketchUtil.setItem("tool.config", b))
    };
    a.restoreSettings = function(h) {
      var toolkit = a.toolkit;
      sketchUtil.getItems(["tool.config"], function(a) {
        try {
          var d =
            JSON.parse(a["tool.config"]),
            p = d.type,
            e = toolkit.getConfig(p);
          toolkit.setConfigureValues(d, e);
          b.cloneToGlobal(d)
        } catch (m) {
          p = l.tools.defaultTool, e = toolkit.getConfig(p)
        }
        sketchObj.exec(p, function() {
          d && b.setComposite(d.composite);
          h && h()
        }, function(a) {
          console.warn(p, a)
        })
      })
    };
    a.needsSync = function() {
      return a.__lastSynchronized !== a.__lastModified
    }
  };
  sketchObj.module.Document.idx = 0;
  "undefined" !== typeof module && module.exports && (module.exports = sketchObj.module.Document);
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Exec = function(f) {
    var d, a, e, q = f.lang,
      l = f.util,
      b = f.vector;
    f.exec = function(b, c, m) {
      d = f.doc;
      a = d.scene;
      e = d.toolkit;
      if (b) {
        var l = "root.exec(" + Array.prototype.slice.call(arguments).join(
          ",") + ")";
        if (f.exec.cmds[b]) return f.exec.cmds[b](b, c, m, l);
        d.setTool({
          type: b,
          onload: c,
          onerror: m
        })
      } else return console.warn("missing trigger", arguments)
    };
    f.exec.register = function(a, b) {
      a.indexOf && (-1 !== a.indexOf(" ") ? a = a.split(" ") : -1 !==
        a.indexOf(",") && (a = a.split(",")));
      if ("object" ===
        typeof a)
        for (var c = 0; c < a.length; c++) f.exec.cmds[a[c]] = b;
      else f.exec.cmds[a] = b
    };
    f.exec.unregister = function(a) {
      delete f.exec.cmds[a]
    };
    var c = function(b, c, e) {
      eventjs.shiftKey && (b *= 10, c *= 10);
      e ? 0 !== d.selection.length && a.copy().paste().selection.move(
        b, c) : (d.keyboard && (d.keyboard.pressed[37] || d.selection
        .move(0, 0, {
          method: "cache"
        })), d.selection.move(b, c, {
        method: "move"
      }))
    };
    f.exec.cmds = {
      "layer-download": function(b, c, e, l) {
        b = !1;
        if (1 === d.selection.length)
          for (var t in d.selection.items)(c = a.children[t]) && c.src &&
            "image" === c.type && (b = !0, f.assets.getBlob(c.src,
              function(a, b) {
                var c = b.replace("#asset-", "") + ".png";
                f.download.blob(a, c)
              }));
        b || f.download.image({
          filename: d.title + "-layerExport",
          useSelection: !0
        })
      },
      "layer-move-left": function(a, b, d, e) {
        c(-(b || 1), 0)
      },
      "layer-move-up": function(a, b, d, e) {
        c(0, -(b || 1))
      },
      "layer-move-right": function(a, b, d, e) {
        c(b || 1, 0)
      },
      "layer-move-down": function(a, b, d, e) {
        c(0, b || 1)
      },
      "layer-clone-left": function(a, b, d, e) {
        c(-(b || 1), 0, !0)
      },
      "layer-clone-up": function(a, b, d, e) {
        c(0, -(b || 1), !0)
      },
      "layer-clone-right": function(a,
        b, d, e) {
        c(b || 1, 0, !0)
      },
      "layer-clone-down": function(a, b, d, e) {
        c(0, b || 1, !0)
      },
      "debug-action": function(b, c, e, f) {
        b = c || d.selection.items;
        for (var l in b) b = a.children[l], void 0 !== b && (console.log(
          "id:", b.id, "idx:", b.zIndex, "type:", b.type), console.log(
          "layer:", b), console.log("bbox:", b.bbox))
      },
      render: function() {
        d.render.clean()
      },
      "zoom-in": function(b, c, e, f) {
        d.render.dirtyControls = !0;
        d.orient.controllerZoomIn();
        a.setDirtyBounds(a.children)
      },
      "zoom-out": function(b, c, e, f) {
        d.render.dirtyControls = !0;
        d.orient.controllerZoomOut();
        a.setDirtyBounds(a.children)
      },
      "zoom-reset": function(b, c, e, f) {
        d.render.dirtyControls = !0;
        d.orient.controllerReset();
        a.setDirtyBounds(a.children)
      },
      "layer-to-stamp": function(a, b, c, d) {
        f.assets.addStampFromSelection()
      },
      "layer-merge": function(a, b, c, d) {
        f.assets.addCloneFromSelection()
      },
      "layer-group": function(b, c, e, f) {
        b = "group" + Math.round(999999 * Math.random());
        for (var l in d.selection.items)
          if (c = a.children[l]) c.groupId = b
      },
      "path-merge": function(c, e, m, f) {
        b.mergeLayers();
        c = a.getSelection();
        a.removeSelection();
        if (c = b.mergeLayers(c)) c.dirtyCheck = !0, d.history.store({
          cmd: "add",
          icon: "merge",
          name: "merge-objects",
          data: [c]
        }), a.push(c), a.sort(), a.reindex(), d.render.clean(
          "pathMerge")
      },
      "layer-forwards": function(b, c, e, f) {
        a.sendForwards && d.selection.length && (a.sendForwards({
          record: !0
        }), d.render.clean(f))
      },
      "layer-to-front": function(b, c, e, f) {
        a.sendForwards && d.selection.length && (a.sendForwards({
          record: !0,
          toFront: !0
        }), d.render.clean(f))
      },
      "layer-backwards": function(b, c, e, f) {
        a.sendBackwards && d.selection.length && (a.sendBackwards({
            record: !0
          }),
          d.render.clean(f))
      },
      "layer-to-back": function(b, c, e, f) {
        a.sendBackwards && d.selection.length && (a.sendBackwards({
          record: !0,
          toBack: !0
        }), d.render.clean(f))
      },
      "layer-delete": function(b, c, e, l) {
        d.selection.length && (a.removeSelection(), d.render.clean(l),
          f.ui.configureBuild())
      },
      "layer-copy": function(b, c, e, f) {
        a.copy && d.selection.length && (a.copy(), a.setDirtyControl(),
          d.render.clean(f))
      },
      "layer-cut": function(b, c, e, l) {
        a.cut && d.selection.length && (a.cut(), d.render.clean(l), f
          .ui.configureBuild())
      },
      "layer-paste": function(b,
        c, e, f) {
        a.paste && a.paste(function() {
          d.setTool("select")
        })
      },
      "layer-duplicate": function(b, c, e, f) {
        a.duplicate && (a.duplicate(), d.render.clean(f))
      },
      "select-all": function(b, c, e, l) {
        f.exec("select", function() {
          a.selectAll();
          d.render("exec.select-all")
        })
      },
      "select-inverse": function(b, c, e, l) {
        f.exec("select", function() {
          a.selectInverse();
          d.render("exec.select-inverse")
        })
      },
      "deselect-all": function(b, c, e, f) {
        a.deselectAll();
        d.render.clean(f)
      },
      undo: function(b, c, e, f) {
        d.history && (a.deselectAll(), d.render.dirtyControls = !0, d
          .history.undo())
      },
      redo: function(b, c, e, f) {
        d.history && (a.deselectAll(), d.render.dirtyControls = !0, d
          .history.redo())
      },
      print: function(a, b, c, d) {
        f.print()
      },
      save: function(a, b, c, d) {
        f.download.image()
      },
      "save-server": function(a, b, c, d) {
        f.server.save()
      },
      "save-image": function(a, b, c, d) {
        f.download.image()
      },
      "save-gif": function(a, b, c, d) {
        f.download.image("gif")
      },
      "save-jpeg": function(a, b, c, d) {
        f.download.image("jpeg", b, c)
      },
      "save-png": function(a, b, c, d) {
        f.download.image("png", b, c)
      },
      "save-webp": function(a, b, c, d) {
        f.download.image("webp",
          b, c)
      },
      "save-json": function(a, b, c, d) {
        f.download.json()
      },
      "save-pdf": function(a, b, c, d) {
        f.download.pdf()
      },
      "save-zip": function(a, b, c, d) {
        f.download.zip()
      },
      camera: function(a, b, c, d) {
        f.exec("take-snapshot")
      },
      "take-snapshot": function(a, b, c, e) {
        a = l.camera;
        a.capture && !a.capturing && (c = f.rtc.getDefaultID(), f.rtc
          .videos[c] ? a.capture(null, null, c, null, function() {
            "function" === typeof b && b();
            f.exec("select")
          }) : f.module.RTC(f, d, function() {
            f.exec("take-snapshot", function() {
              f.rtc.pause()
            })
          }))
      },
      reset: function(a, b, c, e) {
        l.Canvas.blip(d.contexts.layer0);
        d.render.clipped = !1;
        d.reset()
      },
      "new": function(a, b, c, e) {
        f.exec("reset");
        d.uuid = l.uuid();
        f.fs.touch && f.fs.touch(d.uuid)
      },
      "new-confirm": function(a, b, c, d) {
        f.save.confirm({
          oncontinue: function() {
            f.exec("new");
            f.ui.log(q.translate("new-doc-created"));
            b && b()
          },
          onrequestsave: function() {
            f.save.fromQuery()
          },
          oncancel: function() {
            c && c()
          }
        })
      },
      configure: function(a, b, c, d) {
        a = f.ui.fullpath;
        f.ui.setPane("configure");
        "configure" !== a && !1 !== f.sidebar.opened || sidebar.toggle()
      },
      layers: function(a, b, c, d) {
        a = f.ui.fullpath;
        f.ui.setPane("layers");
        "layers" !== a && !1 !== f.sidebar.opened || sidebar.toggle()
      },
      history: function(a, b, c, d) {
        a = f.ui.fullpath;
        f.ui.setPane("history");
        "history" !== a && !1 !== f.sidebar.opened || sidebar.toggle()
      },
      menu: function(a, b, c, d) {
        f.sidebar.toggle()
      },
      palette: function(a, b, c, d) {
        f.windows.toggle("#sk-palette")
      },
      "color-picker": function(a, b, c, d) {
        f.windows.toggle("#sk-palette")
      },
      colorPalette: function(a, b, c, d) {
        f.colorPalette.enabled ? f.colorPalette.disable() : f.colorPalette
          .enable()
      },
      screenshot: function(b, c, d, l) {
        a.deselectAll();
        e.setTool("screenshot");
        f.ui.log(q.translate("screenshot-log"))
      }
    }
  }
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.module,
    d = g.util;
  g.doc = void 0;
  g.docs = {};
  g.setDocument = function(a) {
    if (a = g.docs[a]) {
      a.focusEditable.focus();
      if (a.idx === g.doc.idx) return a;
      var b = a.scene.clipboard;
      b && b.loadCopies();
      return g.doc = a
    }
    return console.warn("document does not exist")
  };
  g.setFeature = function(a) {
    var b = g.feature;
    a && (d.cloneInto(a, b), a = b.tools.defaults, b.tools.select = d
      .cloneInto(b.tools.select, d.clone(a)), b.tools.text = d.cloneInto(
        b.tools.text, d.clone(a)), b.tools.media = d.cloneInto(b.tools
        .media, d.clone(a)), b.tools.shape =
      d.cloneInto(b.tools.shape, d.clone(a)), b.tools.brush = d.cloneInto(
        b.tools.brush, d.clone(a)));
    return b
  };
  g.construct = function(b) {
    if (!b) return console.warn("root.construct requires params");
    var p = b.onready || b.onReady,
      l = b.onsupport || b.onSupport;
    if (!g.__constructed && (g.__constructed = !0, f.Namespace(g), g.client =
        new f.Supports(g), window.glfx && glfx.loadFilters && !glfx.presets
        .length)) return glfx.loadFilters(function() {
      g.construct(b)
    });
    d.cloneInto(b.icons || {}, g.ui.icons);
    var m = g.setFeature(b.feature);
    g.loc.setHost(b.hosts);
    g.style = new f.Style(g);
    var u = new f.Document(g);
    u.setAttributes(b.feature.doc);
    u.toolkit = new f.Toolkit(g, u);
    u.render = new f.SceneRender(g, u);
    u.config = new f.Configure(g, u);
    g.loc.search.debug && (u.contexts.debug = "");
    new f.GenerateMedia(g, u);
    new f.Library(g, u);
    new f.UI(g, u);
    new f.UICursor(g, u);
    u.on.sketchReady = function(a) {
      "ready" !== a.__state && (a.__state = "ready", a.focus(), m.history
        .bitmap && a.history.storeBitmap(), p && (function() {
          p(a);
          a.restoreSettings();
        })())/*, 1))/*setTimeout(function() {
          p(a);
          a.restoreSettings()
        }, 1))*/
    };
    d.each(["text", "clipart", "image", "template",
      "stamp"
    ], g.lib.init);
    u.setContainer({
      container: b.container,
      focusElement: b.focusElement,
      scrollElement: b.scrollElement
    });
    !f.Convert || g.convert instanceof f.Convert || (g.convert = new f
      .Convert(g));
    f.Assets && (g.assets = new f.Assets(g, u));
    f.Scene && (u.scene = new f.Scene(g, u), u.hovered = u.scene.hovered,
      u.selection = u.scene.selection, f.AddMedia && new f.AddMedia(g,
        u), f.AddObject && (new f.AddObject(g, u), u.scene.add = u.addObject),
      f.SceneReplicate && (f.SceneReplicate(g, u), u.scene.clipboard.enable()),
      f.SceneOrganize && f.SceneOrganize(g,
        u), f.ScenePlacement && f.ScenePlacement(g, u), f.SceneFind &&
      f.SceneFind(g, u));
    f.History && (u.history = new f.History(g, u));
    f.Controls && new f.Controls(g, u);
    if (f.Theme) {
      u.theme = new f.Theme(g, u);
      var t = m.tools,
        h = u.config,
        r = d.clone(t),
        k;
      for (k in h) d.exists("root.module.toolkit." + h[k].toolkit) &&
        (m[k] = d.cloneInto(t[k] || m[k] || r, r))
    }
    a(m, u);
    g.lang.setLocale(m.lang || "auto", function() {
      g.client.fn.init(function() {
        g.loc.search.pixelRatio || (u.pixelRatio = g.client.pixelRatio);
        l && l(u);
        setTimeout(function() {
          u.setCanvasSize();
          window.EnableContextMenu && !g.ui.contextMenu.create &&
            (g.ui.contextMenu.create = EnableContextMenu(document,
              window));
          e(g, u);
          g.setup.run(g, u);
          u.toolkit.setup();
          m.debug && (document.body.style.overflow = "auto");
          q(g, u);
          g.setupHistory.run(g, u);
          d.getItem("sync", function(a) {
            u.setBackground(m.doc.background || "none");
            u.render.start();
            m.session.path = a;
            u.on.sketchReady(u)
          })
        }, 0)
      })
    })
  };
  var a = function(a, b) {
      var d = g.loc.getSearch();
      d.zoom && (b.zoom = parseFloat(d.zoom), delete d.zoom);
      d.pixelRatio && (a.canvas.usePixelRatio = !1, a.canvas.usePixelRatioDesktop = !
        1, b.pixelRatio = parseFloat(d.pixelRatio), d.pixelRatio =
        parseFloat(d.pixelRatio));
      for (var e in d) {
        var f = d[e],
          l = typeof a[e];
        "undefined" !== l && ("string" === l ? a[e] = f : "boolean" ===
          l ? a[e] = "true" === f || !0 === f : "number" === l &&
          isFinite(f = parseFloat(f)) && (a[e] = f))
      }
    },
    e = function(a, b) {
      var e = a.feature,
        m = a.vector;
      f.ZIP && !a.io.zip && (a.io.zip = new f.ZIP(a));
      f.PDF && !a.io.pdf && (a.io.pdf = new f.PDF(a));
      f.SVG && !a.io.svg && (a.io.svg = new f.SVG(a));
      f.JSON && !a.io.json && (a.io.json = new f.JSON(a));
      f.GBR &&
        !a.io.blobToGBR && new f.GBR(a);
      f.ABR && !a.io.blobToABR && new f.ABR(a);
      f.Server && (a.server = new f.Server(a, b));
      !f.FileSystem || a.fs instanceof f.FileSystem || (a.fs = new f.FileSystem(
        a));
      !f.Open || a.open instanceof f.Open || (a.open = new f.Open(a));
      !f.Save || a.save instanceof f.Save || (a.save = new f.Save(a));
      !f.Download || a.download instanceof f.Download || (a.download =
        new f.Download(a));
      f.Print && !a.print && (a.print = new f.Print(a));
      !f.UIPalette || a.palette instanceof f.UIPalette || (a.palette =
        new f.UIPalette(a, b));
      !f.UISidebar ||
        a.sidebar instanceof f.UISidebar || (e.pane.position ? a.sidebar =
          new f.UISidebar(a, e.pane.position) : console.warn(
            "sidebar position not set"));
      !f.UITooltip || a.ui.tooltip instanceof f.UITooltip || a.client.mobile ||
        !e.ui.tooltips || (a.ui.tooltip = new f.UITooltip(a));
      !f.UIVortex || a.vortex instanceof f.UIVortex || (a.vortex = new f
        .UIVortex(document.body));
      f.UIStartWindow && new f.UIStartWindow(a, b);
      e.pane.position && a.ui.UISidebarTabs();
      f.Keyboard && !a.client.mobile && (b.keyboard = new f.Keyboard(a,
        b), b.keyboard.enable());
      f.ShareFest && new f.ShareFest(a, b);
      f.Peer && new f.Peer(a, b);
      a.net.Swarm && a.net.Users && (a.net.swarm = new a.net.Swarm, a.net
        .users = new a.net.Users);
      d.getScreenMetrics && !d.toMetrics && (d.toMetrics = d.getScreenMetrics());
      d.perf && (a.perf = d.perf, a.p = a.perf());
      m.Shape && (m.VOBPath = m.Shape.VOBPath);
      f.Document && (a.Document = f.Document);
      f.Exec && new f.Exec(a);
      f.GeneratePreview && new f.GeneratePreview(a);
      f.GenerateMedia && new f.GenerateMedia(a, b);
      f.PathFinder && new f.PathFinder(a, b);
      f.Camera && (d.camera = new f.Camera(a, b));
      f.Orientation && f.Orientation.createController(a, b);
      f.RTCManager && (a.rtc = new f.RTCManager(a, b));
      d.loadImage && a.loc.PROXY && (d.loadImage.proxyUrl = a.loc.PROXY);
      f.Thumbnailer && !d.thumbnailer && (d.thumbnailer = f.Thumbnailer);
      a.ui.Loader && !a.loader && (a.loader = new a.ui.Loader);
      e.kiosk && d.requestKioskMode()
    },
    q = function(a, e) {
      var f = a.feature,
        m = e.toolkit,
        q, t = e.container,
        h = e.contexts.active;
      a.events.onResize = eventjs.add(window, "resize", function(b) {
        clearTimeout(q);
        q = setTimeout(function() {
          a.emit("beforeresize");
          e.setCanvasSize();
          f.doc.centerOnResize && e.orient.reset(!0);
          e.render.dirtyControls = !0;
          e.render.sceneGCO("onResize");
          a.emit("resize", e.viewport);
          d.eventOverride("onResize", b) || "text" === e.tool.type &&
            m.text.updateCSS()
        }, 100)
      });
      eventjs.add(t.parentNode, "scroll", function(a) {
        var b = e.container.parentNode,
          h = b.scrollTop,
          c = b.scrollLeft;
        e.scrollTop = h;
        e.scrollLeft = c;
        e.scrollElementCSS();
        e.render.clipped = !1;
        var s = e.contexts,
          f;
        for (f in s) b = s[f], b.style.left = c + "px", b.style.top =
          h + "px";
        if (e.scene) {
          h = e.scene.children;
          f = 0;
          for (c = h.length; f <
            c; f++) b = h[f], b.dirtyTransform = !0, b.inbounds = void 0;
          m.text && (b = e.selection.item) && "text" === b.type && m.text
            .updateCSSTransform();
          e.render.clean("container.onScroll");
          d.eventOverrideCall("onScroll", a)
        }
      });
      (function() {
        var b = function() {
            a.net.dataChannel ? (a.server.open(), a.net.dataChannel.send(
              ["session.change", h])) : a.server.open()
          },
          h = a.loc.getFileID();
        a.events.hashchange = eventjs.add(window, "hashchange",
          function(d) {
            a.emit("hashchange", a.loc.getHash());
            d = a.loc.getFileID();
            if (h !== d) {
              var e = h;
              h = d;
              a.save.confirm({
                oncontinue: b,
                onrequestsave: function() {
                  a.save.fromQuery()
                },
                oncancel: function() {
                  a.loc.setHash("sketch", e);
                }
              })
            }
          })
      })();
      a.ui.TSEvents.add();
      a.ui.setupStartWindow && a.ui.setupStartWindow();
      a.windows.restore && (a.events.onScroll = eventjs.add(window,
        "scroll", a.windows.restore));
      f.preventScroll && !f.debugCache && eventjs.add(t, "wheel",
        eventjs.stop);
      !1 === a.client.chromeApp && (a.events.onBeforeUnload = eventjs.add(window, "beforeunload", beforeUnloadEvent));
      f.preventTouch && a.client.mobile && (a.events.onTouch = eventjs.add(
        document, "touchstart", eventjs.prevent, {
          strict: !0
        }));
      eventjs.add(h, "contextmenu", eventjs.prevent);
      eventjs.add(h, "mouseup", function() {
        document.activeElement !== document.body && document.activeElement &&
          document.activeElement.blur();
        a.windows.clearFocus && eventjs.add(h, "mouseup", a.windows.clearFocus)
      });
      a.events.onFocus = eventjs.add(window, "focus", onFocusEvent);
      a.events.onBlur = eventjs.add(window, "load,blur", eventjs.keyTrackerReset)
    },
    onFocusEvent = function(a) {
      console.info("[Event] onFocusEvent called");
      eventjs.keyTrackerReset(a);
      (a = g.doc.clipboard) && a.loadCopies()
    },
    beforeUnloadEvent = function(a) {
      //console.info("[Event] BeforeUnloadEvent called");
      var b = g.feature.beforeUnloadPrompt;
      "function" === typeof b && (b = beforeUnloadEvent());
      if (b) return (a || window.event).returnValue = b;
    };
  g.log = function(a) {
    if ("CANVAS" === a.nodeName) {
      var b = a.toDataURL(),
        d = a.width,
        e = a.height;
      console.log("%c+", "font-size: 1px; padding: " + Math.floor(e /
          2) + "px " + Math.floor(d / 2) + "px; line-height: " + e +
        "px;background: url(" + b + "); background-size: " + d + "px " +
        e + "px; color: transparent;", arguments)
    } else console.log(a)
  };
  f.Listener = function(a) {
    var b = 0,
      d = {},
      e = function(a, h) {
        if (h) {
          var c = h.sketchId || (h.sketchId = b++);
          return a + "." + c
        }
        console.warn(a,
          "listener does not exist")
      },
      f = function(a) {
        return h[a] instanceof l ? h[a] : h[a] = new l(a)
      },
      l = function(b) {
        var h = d[b] || (d[b] = {}),
          v = function() {
            for (var b in h) h[b].apply(a, arguments)
          };
        v.add = function(a, c) {
          a = e(b, c);
          void 0 === h[a] && c && (h[a] = c)
        };
        v.remove = function(a) {
          a = e(b, fn);
          h[a] && fn && delete h[a]
        };
        return v
      },
      h = a.on = a.addListener = function(a, b) {
        f(a).add(a, b)
      };
    a.removeListener = function(a, b) {
      f(a).remove(a, b)
    };
    a.removeListeners = function(a) {
      delete d[a];
      delete h[a]
    };
    a.emit = function() {
      var b = Array.prototype.slice.call(arguments),
        h = b.shift();
      if (h = d[h])
        for (var e in h) h[e].apply(a, b)
    }
  };
  f.Listener(g)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.loc = g.loc || {},
    d = g.util;
  f.getHash = function(a) {
    var d = "?" + window.location.hash.substr(1),
      d = f.parseUri(d).queryKey;
    f.hash = d;
    return a ? d[a] : d
  };
  f.getSearch = function() {
    var a = f.getQuery(window.location.search, "sk");
    return f.search = a
  };
  f.update = function() {
    f.getSearch();
    f.getHash()
  };
  f.parseQuery = function(a) {
    a = a.split(";");
    for (var d = {}, f = 0; f < a.length; f++)
      if (a[f]) {
        var l = a[f].split(":");
        d[l[0]] = l[1] || !0
      }
    return d
  };
  f.getQuery = function(a, d) {
    var q = f.parseUri(a).queryKey;
    return q = q[d] ? f.parseQuery(q[d]) : {}
  };
  f.setHost = function(a) {
    var e = g.fs.dbpath ? g.fs.dbpath() || "" : "",
      q = function(a) {
        return "string" === typeof a ? (a = a && -1 === a.indexOf("://") ?
          m + a : a, l(a)) : ""
      },
      l = function(a) {
        var b = a[a.length - 1];
        return "=" === b || "?" === b || "/" === b ? a : a + "/"
      },
      b = function() {
        var a = l(w.host + d.string.dirpath(w.pathname));
        console.debug(a);
        f.host = a;
        f.protocol = w.protocol;
        f.HOST = q(a);
        f.MEDIA = f.HOST + "media/";
        f.PROXY = f.HOST + "proxy/?url=";
        f.GET = e;
        f.POST = e
      },
      c = function(a, b, h) {
        for (var c in a) a[c].replace && (a[c] = a[c].replace(b, h));
        (b = a.feature) && d.cloneInto(b, g.feature);
        b = l(a.pathWeb || a.HOST || "");
        console.debug(b);
        f.host = b;
        f.protocol = w.protocol;
        f.IO = a.IO || "";
        f.RTC = a.RTC || "";
        f.HOST = q(b);
        f.MEDIA = q(a.MEDIA || f.HOST + "media/");
        f.PROXY = q(a.PROXY || f.HOST + "proxy/?url=");
        f.GET = q(a.pathGet || a.GET || e);
        f.POST = q(a.pathPost || a.POST || e)
      },
      p = function(a) {
        var b = a.feature;
        b && d.cloneInto(b, g.feature);
        b = l(a.pathWeb || a.HOST || "");
        console.debug(b);
        f.host = b;
        f.protocol = w.protocol;
        f.IO = a.IO;
        f.RTC = a.RTC;
        f.HOST = q(b);
        f.MEDIA = q(a.MEDIA || f.HOST + "media/");
        f.PROXY = q(a.PROXY || f.HOST + "proxy/?url=");
        f.GET = q(a.pathGet || a.GET || e);
        f.POST =
          q(a.pathPost || a.POST || e)
      };
    a = a || f.hosts || {};
    f.hosts = a;
    f.update();
    var w = window.location,
      m = w.protocol + "//",
      u = w.host;
    if (a[u]) return p(a[u]);
    if (a[m + u]) return p(a[m + u]);
    for (var t in a) {
      var h = a[t];
      if (h.alias && -1 !== h.alias.indexOf(u)) return c(d.clone(h), t,
        u)
    }
    return a["default"] ? p(a["default"]) : b()
  };
  f.setHash = function(a, e) {
    if ("string" === typeof a) {
      var q = f.getHash();
      q[a] = e;
      return f.setHash(q)
    }
    if ("boolean" === typeof e) return q = d.cloneInto(a, f.getHash()),
      f.setHash(q);
    q = [];
    a = a || f.getHash();
    for (var l in a) {
      var b =
        a[l];
      void 0 !== b && (b ? q.push(l + "=" + b) : q.push(l))
    }
    q = "#" + q.join("&");
    l = window.location;
    l.hash !== q && (l.hash = q)
  };
  f.getFileID = function() {
    return f.getHash(g.feature.sync.hashFlag) || ""
  };
  f.getRandomID = function(a) {
    a = a || 8;
    for (var d = ["a", "e", "i", "o", "u"], f =
        "bcdfghjklmnpqrstvwxyz".split(""), l = "", b = 0; b < a; b++) l =
      0 == b % 2 ? l + d[4 * Math.random() >> 0] : l + f[20 * Math.random() >>
        0];
    return l
  };
  f.isLocalUrl = function() {
    var a = /^([!#$&-;=?-\[\]_a-z~ ]|%[0-9a-fA-F]{2}|)+$/,
      d = /^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?/,
      f = {
        "http:": /:(80)?$/,
        "https:": /:(443)?$/
      },
      l = {
        "data:": !0,
        "blob:": !0,
        filesystem: !0
      };
    return function(b, c) {
      var p = b.match(d);
      return c && l[p[1]] ? !0 : p[1] && p[1].toLowerCase() !==
        location.protocol || p[2] && p[2].replace(f[location.protocol],
          "") !== location.host || p[1] && !p[2] ? !1 : a.test(b)
    }
  }();
  f.isRemoteUrl = function(a) {
    return a.startsWith("http:") || a.startsWith("https:") ? !f.isLocalUrl(
      a) : !1
  };
  f.isBlobUrl = function(a) {
    return a.startsWith("blob:")
  };
  f.isDataUrl = function(a) {
    return a.startsWith("data:")
  };
  f.isFileUrl = function(a) {
    return a.startsWith("filesystem:")
  };
  f.isValidXhrUrl = function(a) {
    return f.isLocalUrl(a) || f.isBlobUrl(a) || f.isFileUrl(a) || f.isRemoteUrl(
      a)
  };
  f.getMediaUrl = function(a) {
    return f.isBlobUrl(a) || f.isDataUrl(a) || f.isFileUrl(a) ? a : a
      .startsWith("http") || a.startsWith("./") || a.startsWith("/") ?
      a : f.MEDIA + a
  };
  f.parseUri = function(a) {
    a || (a = window.location);
    var d = f.parseUri.options;
    a = d.parser[d.strictMode ? "strict" : "loose"].exec(a);
    for (var q = {}, l = 14; l--;) q[d.key[l]] = a[l] || "";
    q[d.q.name] = {};
    q[d.key[12]].replace(d.q.parser, function(a, c, p) {
      c && (q[d.q.name][c] =
        p)
    });
    return q
  };
  f.parseUri.options = {
    strictMode: !1,
    key: "source protocol authority userInfo user password host port relative path directory file query anchor"
      .split(" "),
    q: {
      name: "queryKey",
      parser: /(?:^|&)([^&=]*)=?([^&]*)/g
    },
    parser: {
      strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
      loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.loc)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Supports = function(f, d) {
    var a = this,
      e = f.feature,
      q = f.util;
    q.getAuthDirection = function() {
      if (a.android) {
        if (a.chrome) return ["center", "bottom", 180];
        if (!a.firefox && a.opera) return ["center", "center", 0]
      } else if (!a.opera) {
        if (a.chrome) return ["right", "top", 45];
        if (a.firefox) return ["left", "top", 315]
      }
      return ["center", "top", 0]
    };
    var l = navigator.userAgent || navigator.vendor || window.opera;
    a.userAgent = l;
    a.ie = !!document.documentMode;
    a.firefox = "undefined" !== typeof InstallTrigger;
    a.opera = !!window.opera || /Opera|OPR/i.test(l);
    a.chrome = !!window.chrome && !a.opera;
    a.safari = /Safari/i.test(l) && !a.opera && !a.chrome;
    if (a.ios = /iPhone|iPad|iPod/i.test(l)) a.iosVersion =
      parseFloat(navigator.appVersion.match(/OS (\d)/)[1], 10);
    a.android = /Android/i.test(l);
    a.blackberry = /Blackberry/i.test(l);
    a.mac = !a.ios && /Mac/.test(l);
    a.windows = /Windows/.test(l);
    a.linux = /Linux/.test(l);
    a.mobile = /Opera Mini|IEMobile|Symbian|WebOS/i.test(l) || a.ios ||
      a.android || a.blackberry;
    a.cordova = !!window.top.cordova;
    a.nodewebkit = !(!q.exists("process.versions") || !process.versions[
      "node-webkit"]);
    a.chromeApp = q.exists("chrome.storage.local");
    a.flash = function() {
      var a = navigator,
        b = parseFloat,
        c = a.plugins,
        a = a.mimeTypes,
        d, e;
      if (c && "object" == typeof c["Shockwave Flash"]) {
        if ((d = c["Shockwave Flash"].description) && (!a || !a[
            "application/x-shockwave-flash"] || a[
            "application/x-shockwave-flash"].enabledPlugin)) return b(d.replace(
          /^.*\s+(\S+)\s+\S+$/, "$1"))
      } else if (window.ActiveXObject) try {
        if (e = new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))
          if (d =
            e.GetVariable("$version")) return b(d.replace(
            /^\S+\s+(\d+),(\d+).*$/i, "$1.$2"))
      } catch (h) {}
      return !1
    }();
    a.lang = ((navigator.languages ? navigator.languages[0] :
      navigator.language || navigator.userLanguage) || "en").toLowerCase();
    "function" === typeof detectPrivateMode && detectPrivateMode(
      function(b) {
        a.incognito = b
      });
    a.fn = {};
    a.fn.init = function(b) {
      var c = q.Canvas(1, 1);
      a.fn.detectExport(c, function() {
        a.fileReader = !!window.FileReader;
        a.canvas = !!c.ctx;
        a.fn.detectWebGL();
        a.fn.detectFS();
        a.fn.detectCanvas2dFeatures(c);
        a.fn.detectPixelRatioSupport(c);
        a.fn.detectFeature();
        b && b()
      })
    };
    a.fn.detectWebGL = function() {
      var b = document.createElement("canvas");
      b.width = 1;
      b.height = 1;
      for (var c, d = ["webgl", "experimental-webgl", "webkit-3d",
          "moz-webgl"
        ], e = 0; e < d.length; ++e) try {
        if (c = b.getContext(d[e])) break
      } catch (f) {}
      a.webgl = !!c
    };
    a.fn.getUserMedia = function() {
      return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
        navigator.mozGetUserMedia || navigator.msGetUserMedia)
    };
    a.fn.peerConnection = function() {
      return !!(window.PeerConnection ||
        window.webkitPeerConnection00 || window.webkitRTCPeerConnection ||
        window.mozRTCPeerConnection || window.RTCPeerConnection)
    };
    a.fn.detectFS = function() {
      a.chooseEntry = q.exists("chrome.fileSystem.chooseEntry") || q.exists(
        "navigator.camera.getPicture");
      a.fs = !a.nodewebkit && !!c(window, "requestFileSystem")
    };
    a.fn.detectPixelRatio = function(b) {
      b = c(b, "backingStorePixelRatio") || 1;
      return a.pixelRatio = a._pixelRatio = (window.devicePixelRatio ||
        1) / b
    };
    a.fn.detectPixelRatioSupport = function(b) {
      if (e) {
        var c = b.ctx,
          d = a.fn.detectPixelRatio(c);
        if (e.canvas.usePixelRatio || e.canvas.usePixelRatioDesktop &&
          !a.mobile) {
          if (a.ios && a.iOSVersion.isLessThan("8.0")) return a.pixelRatio =
            1;
          if (1 === d) return d;
          var f = q.timestamp();
          b.width = window.innerWidth * d;
          b.height = window.innerHeight * d;
          c.drawImage(b, 0, 0);
          36 < q.timestamp() - f && (a.pixelRatio = 1);
          b.width = b.height = 1;
          return a.pixelRatio
        }
        return a.pixelRatio = 1
      }
    };
    var b = {
      blendModes: "normal multiply screen overlay darken lighten color-dodge color-burn hard-light soft-light difference exclusion hue saturation color luminosity"
        .split(" "),
      compositeModes: "source-over source-in source-out source-atop destination-over destination-in destination-out destination-atop lighter darker copy xor"
        .split(" ")
    };
    a.fn.detectCanvas2dFeatures = function(c) {
      var d = c.ctx;
      c = function(c, e) {
        for (var p = !1, h = b[e], r = 1; r < h.length; r++) {
          var k = h[r];
          d.globalCompositeOperation = k;
          var v = d.globalCompositeOperation === k;
          (a.gco[k] = v) && (p = !0)
        }
        a.gco["__" + c] = p
      };
      a.gco = {};
      c("composite", "compositeModes");
      c("blend", "blendModes");
      a.imageSmoothing = "boolean" === typeof d.imageSmoothingEnabled
    };
    a.fn.detectExport = function(b, c) {
      var d = 0,
        e = function() {
          !--d && c && c()
        },
        l = function(h, c) {
          ++d;
          var k = b.toDataURL(c).split(";")[0].substr(5);
          a.io[h] = k === c;
          setTimeout(e, 1)
        };
      a.io = {};
      a.io.__enabled = !0;
      l("jpeg", "image/jpeg");
      l("png", "image/png");
      l("webp", "image/webp");
      l("bmp", "image/bmp");
      (function(h, c) {
        try {
          ++d, b.toBlob(function(b) {
            var h = new Image;
            h.onload = function() {
              var b = !(0 === this.width && 0 === this.height);
              a.io.blob = b;
              a.io.zip = !(!b || !f.module.ZIP);
              e()
            };
            h.onerror = function() {
              a.io.blob = !1;
              a.io.zip = !1;
              e()
            };
            h.src =
              URL.createObjectURL(b)
          })
        } catch (k) {
          a.io.blob = !1, a.io.zip = !1, setTimeout(e, 1)
        }
      })()
    };
    a.fn.detectFeature = function() {
      e && (a.opera && a.windows && (a.gco.__blend = !1), e.style.composite =
        e.style.composite && !1 !== a.gco.__composite, e.style.blend =
        e.style.blend && !1 !== a.gco.__blend, e.vector.record || (e.vector
          .edit = !1), e.vector.edit || (e.history.vector = !1))
    };
    var c = function(a, b) {
      if (a[b]) return a[b];
      b = b[0].toUpperCase() + b.substr(1);
      return a["webkit" + b] || a["moz" + b] || a["ms" + b] || a["o" +
        b]
    };
    d && a.fn.init(d);
    return a
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.module;
  f.QueuePending = function(d) {
    var a = [];
    this.add = function(d) {
      a.push(d)
    };
    this.run = function(e, f) {
      a.forEach(function(a) {
        d(e, f, a)
      });
      a = []
    }
  };
  g.setup = new f.QueuePending(function(d, a, e) {
    e(d, a)
  });
  g.setupHistory = new f.QueuePending(function(d, a, e) {
    a.history.registerFunction(e)
  })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  navigator.temporaryStorage = navigator.temporaryStorage ||
    navigator.webkitTemporaryStorage;
  navigator.persistentStorage = navigator.persistentStorage ||
    navigator.webkitPersistentStorage;
  window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
  g.module = g.module || {};
  g.module.FileSystem = function(d) {
    var a = this,
      e = d.dom,
      q = d.feature,
      l = d.lang,
      b = d.server,
      c = d.util.string,
      p = d.util,
      w = d.ui,
      m = p.exists("navigator.persistentStorage"),
      u = p.exists("window.requestFileSystem"),
      t = this.fs =
      null;
    this.autosave = !0;
    this.docCount = 0;
    this.dbtype = window.PERSISTENT;
    this.database = "sketchpad";
    this.folder = d.util.uuid();
    this.thumb = {
      width: 50,
      height: 50
    };
    this.authorized = !1;
    this.supported = !0;
    this.init = function(b, c) {
      b = b || f("init");
      c = c || f("init");
      var k, s = function() {
          k = setTimeout(function() {
            var a = p.getAuthDirection(),
              b = "rotate(" + a.pop() + "deg)",
              a =
              "Authorize this app to save drawings to your browser.\t\t\t\t<p>You should see a prompt to the " +
              a.reverse().join(" ") + ' <span style="transform: ' + b +
              "; -webkit-transform: " +
              b + "; -ms-transform: " + b +
              '; display: inline-block;" class="icon-arrow-up"></span>\t\t\t\t<p>If you don&rsquo;t see the prompt <a href="javascript:sk.fs.init();">click here</a>.';
            w.alert(a)
          }, 500)
        },
        r = function() {
          k && clearTimeout(k);
          alertify.hide();
          a.authorized = !0;
          a.getCount(a.dbpath(), function(h) {
            a.docCount = h;
            b && b(a.fs)
          });
          p.setItem("fs.authorized", !0)
        },
        v = function(b) {
          alertify.hide();
          a.authorized = !1;
          var h = e.$(".sk-row.to-document-open");
          h && (h.style.display = "none");
          c(b)
        },
        m = function(a, b) {
          h(a || r, b || v)
        },
        x = function() {
          p.getItem("fs.folder",
            function(b) {
              a.folder = b || a.folder;
              m()
            })
        };
      d.client.incognito ? (a.supported = !1, v({
        name: "SECURITY_ERR"
      })) : (p.getItem("fs.authorized", function(a) {
        "true" === a || d.client.nodewebkit || s()
      }), p.getItem("fs.failRestore", function(b) {
        "true" === b ? w.confirm({
          message: "load-fail-restore",
          callback: function(b) {
            b ? x() : m(function() {
              a.createProject(null, r)
            })
          },
          labels: {
            ok: "ok",
            cancel: "cancel"
          }
        }) : x()
      }))
    };
    var h = function(b, h, c) {
      var k = function(c, d) {
        d = d || b;
        a.fs = t = c;
        a.mkdir(a.database, function() {
          d(c)
        }, h)
      };
      if (d.client.fs) {
        if (m) return navigator.persistentStorage.requestQuota(
          1073741824,
          function(b) {
            window.requestFileSystem(a.dbtype, b, k, h)
          }, h);
        if (u) return window.requestFileSystem(a.dbtype, 1073741824, k,
          h)
      } else h()
    };
    this.df = function(a, b, h) {
      h = h || !1;
      a = a || f("df");
      b = b || f("df");
      var c = function(b, c) {
        var d = c - b;
        h ? a(p.bytesToSize(b), p.bytesToSize(d), p.bytesToSize(c)) :
          a(b, d, c)
      };
      return m ? navigator.persistentStorage.queryUsageAndQuota(c) :
        b()
    };
    this.pwd = function(b) {
      return this.dbpath(b) + a.folder + "/"
    };
    this.dbpath = function(b) {
      var h = "/" + a.database + "/";
      return b ? h : a.fspath() + h
    };
    this.fspath = function() {
      var b =
        window.location;
      return "filesystem:" + b.protocol + "//" + b.host + "/" + (0 ===
        a.dbtype ? "temporary" : "persistent")
    };
    this.rmdir = function(b, h, c) {
      a.rm(b, h, c, !0)
    };
    this.rm = function(b, h, c, d) {
      a.resolveURI({
        uri: b || a.pwd(),
        onerror: c,
        onsuccess: function(a) {
          r(a, h, c, d)
        }
      })
    };
    var r = function(b, h, c, d) {
      c = c || f("rm");
      h = h || f("rm");
      d = d || !1;
      b.fullPath === a.dbpath(!0) ? c() : b.isFile ? b.remove(h, c) :
        b.isDirectory && (d ? b.removeRecursively(h, c) : b.remove(h,
          c))
    };
    this.mkdir = function(b, h, c, d, k) {
      b.split && (b = b.split("/"));
      h = h || f("mkdir");
      c = c || f("mkdir");
      d = d || t.root;
      k = k || "/" + b.join("/");
      d.fullPath === k ? h(d) : d.getDirectory(b.shift(), y, function(
        d) {
        b.length ? a.mkdir(b, h, c, d, k) : h && h(d)
      }, c)
    };
    this.find = function(b) {
      b = b || {};
      var h = b.onsuccess || f("find");
      b.onerror || f("find");
      var c = b.levels || 2,
        d = b.filter || {},
        k = b.sort || void 0,
        e = 0,
        s = {},
        r = function() {
          --e || (k && (s = p.sort(s, k)), h(s))
        },
        v = function(a) {
          if (a.fullPath.substr(1).split("/").length > c) return r(++e);
          ++e;
          z(a, function(a) {
            a.forEach(function(a) {
              var b = a.name;
              if (!d.exclude || !b.match(d.exclude))
                if (a.isDirectory) {
                  if (!d.name ||
                    b.match(d.name)) d.isFile || (s[a.fullPath] = a);
                  v(a)
                } else if (!d.name || b.match(d.name)) d.isDirectory ||
                (s[a.fullPath] = a)
            });
            r()
          })
        };
      v(b.dir || a.fs.root)
    };
    this.write = function(b) {
      b = b || {};
      var h = b.blob,
        c = b.path || a.database + "/" + b.dir,
        d = b.onsuccess || f("write"),
        k = f("write");
      a.mkdir(c, function(a) {
        a.getFile(b.filename, y, function(a) {
          a.createWriter(function(b) {
            b.onwriteend = function(b) {
              d && d(a)
            };
            b.onerror = k;
            b.write(h)
          }, k)
        }, k)
      })
    };
    this.getCount = function(b, h) {
      b = b || a.dbpath();
      h = h || f("getCount");
      a.resolveURI({
        uri: b,
        onsuccess: function(a) {
          z(a,
            function(a) {
              h(a.length)
            })
        }
      })
    };
    this.getAsBlobs = function(b, h, c) {
      b = b || a.pwd();
      h = h || f("getAsBlobs");
      c = c || f("getAsBlobs");
      a.resolveURI({
        uri: b,
        onerror: c,
        onsuccess: function(a) {
          var b = [];
          z(a, function(a) {
            var c = new p.Queue({
              items: a,
              next: function(a, h, d) {
                a.isDirectory ? c.next() : a.isFile && a.file(
                  function(h) {
                    h.fullPath = a.fullPath;
                    b.push(h);
                    c.next()
                  })
              },
              oncomplete: function() {
                h(b)
              }
            })
          }, c)
        }
      })
    };
    this.openProject = function(b) {
      var h = d.doc,
        c = b.src,
        k = b.onerror,
        e = b.onload;
      d.save.confirm({
        oncontinue: function() {
          a.getAsBlobs(c,
            function(a) {
              h.__lastSynchronized = h.__lastModified;
              e(a)
            }, k)
        },
        onrequestsave: function() {
          d.save.fromQuery()
        },
        oncancel: function() {
          console.log("cancel")
        }
      })
    };
    var k = function(b, h, c) {
      e.setClass({
        target: e.$(".fileEntry.dir-" + b),
        list: "div",
        className: "fileEntrySelected"
      });
      a.folder = b;
      p.setItem("fs.folder", b);
      p.setItem("fs.failRestore", "true");
      d.open.folder({
        name: b,
        entries: h,
        onerror: c,
        onsuccess: function() {
          c && c();
          p.setItem("fs.failRestore", "false")
        }
      })
    };
    this.openDefaultProject = function(b, h) {
      b = b || f("openDefaultProject");
      p.getItem("fs.folder", function(c) {
        var e = function() {
          d.lib.template && q.io.defaultProject ? d.lib.template.open(
            q.io.defaultProject,
            function() {
              a.authorized ? a.saveProject({
                onsuccess: b,
                onerror: h
              }) : h && h()
            }) : h && h()
        };
        if (c) a.openProject({
          onload: function(h) {
            k(a.folder, h, b)
          },
          onerror: function(a) {
            h && h(a)
          }
        });
        else return e()
      })
    };
    this.ui = {};
    this.ui.addProject = function(b, h) {
      var c = d.doc,
        e = document.createElement("div");
      a.ui.container.appendChild(e);
      var s = document.createElement("span");
      s.textContent = h;
      e.appendChild(s);
      s = document.createElement("div");
      s.className = "icon-gear";
      w.tooltip.add(s, "Settings");
      e.appendChild(s);
      eventjs.add({
        target: s,
        mousedown: eventjs.cancel,
        click: function(a, b) {
          w.contextMenu.show({
            target: b.target,
            menu: w.menu.fileEntry
          })
        }
      });
      s = v(b);
      e.appendChild(s);
      x(e, h);
      eventjs.add({
        target: e,
        mousedown: eventjs.cancel,
        click: function() {
          h !== a.folder && a.openProject({
            src: a.dbpath() + h,
            onload: function(a) {
              k(h, a, function() {
                c.on.sketchReady(c)
              })
            }
          })
        }
      })
    };
    this.ui.setThumbnail = function(a, b) {
      a && b && v(a, b.querySelector("canvas"))
    };
    var v = function(b, h) {
      0 === b.indexOf("filesystem") && (b = b + "#" + Date.now());
      return p.thumbnailer({
        canvas: h,
        src: b,
        center: !0,
        crop: "fit",
        background: "#000",
        width: a.thumb.width,
        height: a.thumb.height
      })
    };
    this.renameProject = function() {
      var a = d.doc;
      alertify.prompt({
        callback: function(b, h) {
          b && (a.title = h.filename, a.description = h.description)
        },
        verify: function(a) {
          for (var b = 0; b < a.length; b++)
            if ("" === a[b].value) return alertify.log("<i>" + a[b].title +
              "</i> is required"), !1;
          return !0
        },
        labels: {
          ok: l.translate("save"),
          cancel: l.translate("cancel")
        },
        fields: [{
          id: "filename",
          title: l.translate("Filename"),
          type: "text",
          value: a.title
        }, {
          id: "description",
          title: l.translate("Description"),
          type: "textarea",
          value: a.description
        }]
      })
    };
    this.updateProjects = function(b, h) {
      var d = a.ui.container = e.$(".sk-doc-listing");
      d && a.find({
        sort: p.sort.natural,
        filter: {
          name: /^thumb.(jpeg|png)$/
        },
        onsuccess: function(k) {
          b && e.empty(d);
          var s = {},
            r;
          for (r in k) {
            var v = k[r],
              p = c.dirname(v.fullPath);
            if (!s[p]) {
              s[p] = !0;
              var v = v.toURL(),
                f = e.$(".fileEntry.dir-" + p);
              f ? (x(f, p), a.ui.setThumbnail(v,
                f)) : a.ui.addProject(v, p)
            }
          }
          h && h()
        }
      })
    };
    var x = function(b, h) {
      b.className = h === a.folder ?
        "fileEntry fileEntrySelected dir-" + h : "fileEntry dir-" + h
    };
    this.removeProject = function(b, h) {
      b = b || d.fs.pwd();
      w.confirm({
        message: "delete-doc-confirm",
        callback: function(k) {
          if (k) {
            k = c.dirpath(b);
            var s = c.filename(k),
              s = e.$(".dir-" + s);
            s.parentNode.removeChild(s);
            a.rmdir(k, h, h);
            a.pwd() === b + "/" && d.doc.reset()
          }
        },
        labels: {
          ok: "delete-doc",
          cancel: "cancel"
        }
      })
    };
    this.saveProject = function(b) {
      var h = d.doc;
      b = b || {};
      var c = b.onsuccess,
        k = b.onprogress ||
        function(a) {
          d.loader && d.loader.create("thread", l.translate("saving") +
            "...", a)
        };
      if (!a.saving) {
        a.saving = !0;
        k(0);
        var s = 0,
          v = !1,
          f = function(b, d) {
            var f = function() {
              if (!--s) {
                p.setItem("fs.folder", a.folder);
                k(100);
                if (v) a.updateProjects();
                else {
                  var b = e.$(".fileEntry.dir-" + a.folder);
                  a.ui.setThumbnail(d, b)
                }
                a.saving = !1;
                h.__lastSynchronized = h.__lastModified;
                c && c()
              }
            };
            b.forEach(function(b) {
              ++s;
              var h = b.blob,
                c = b.filename,
                d = function(b) {
                  a.write({
                    dir: a.folder,
                    blob: h,
                    filename: c,
                    onsuccess: f
                  })
                };
              a.resolveURI({
                uri: a.pwd() + c,
                onsuccess: function(a) {
                  a.file(function(b) {
                    b.lastModifiedDate.getTime() === h.lastModified ?
                      f() : r(a, d, d)
                  })
                },
                onerror: function() {
                  v = !0;
                  a.docCount++;
                  d()
                }
              })
            })
          },
          m = function(a) {
            var b = URL.createObjectURL(a);
            d.save.folder(function(h) {
              h.push({
                filename: "thumb.jpeg",
                blob: a
              });
              f(h, b)
            })
          },
          h = d.doc,
          x = h.canvas2d,
          z = h.viewport,
          t = h.bounds;
        b = x.orientX;
        var x = x.orientY,
          y = Math.min(t.width, z.width) + b,
          z = Math.min(t.height, z.height) + x;
        p.thumbnailer(p.cloneInto(q.sync.thumb, {
          croparea: [b, x, y, z],
          background: h.backgroundRaw,
          src: h.contexts.layer0,
          onload: function(a) {
            a.toBlob(m)
          }
        }))
      }
    };
    this.touch = function(b, h) {
      b && a.resolveURI({
        uri: a.dbpath() + b,
        onsuccess: function() {
          a.folder = b;
          h()
        },
        onerror: function() {
          a.folder = b;
          a.saveProject({
            onsuccess: h
          })
        }
      })
    };
    this.createProject = function(b, h) {
      h = h || f("createProject");
      b ? a.touch(b, h) : a.createUniquePath(a.folder, function(b) {
        a.folder = b;
        a.saveProject({
          onsuccess: h
        })
      })
    };
    this.createUniquePath = function(b, h) {
      h = h || f("createUniquePath");
      b = b || a.folder;
      t.root.getDirectory(a.database + "/" + b, {}, function(c) {
        var d = b.trim(),
          k = d;
        for (c =
          ""; k;) {
          var e = parseInt(k.slice(-1)),
            k = k.slice(0, -1);
          if (isNaN(e)) break;
          c = e + c
        }
        d = d.replace(c, "");
        c = parseInt(c);
        c = isNaN(c) ? 1 : ++c;
        b = d + c;
        a.createUniquePath(b, h)
      }, function() {
        h(b)
      })
    };
    this.backup = function(h, c) {
      this.getFolders(t.root, function(d) {
        var k = new p.Queue({
          items: d,
          next: function(h, d, e) {
            a.getAsBlobs(h.fullPath, function(a) {
              if (!a.length) return k.next();
              a = s(a);
              a.fileName = h.name;
              b.saveData({
                metadata: a,
                onsave: k.next
              })
            }, c)
          },
          oncomplete: function() {
            h && h()
          }
        })
      })
    };
    var s = function(a) {
      var b = {};
      a.forEach(function(a) {
        b[c.filename(a.fullPath)] =
          a
      });
      return b
    };
    this.getFolders = function(a, b) {
      this.find({
        filter: {
          exclude: /^\.\w*/g,
          isDirectory: !0
        },
        dir: a,
        onsuccess: b,
        onerror: onerror
      })
    };
    this.resolveURI = function(b, h) {
      b = b || {};
      h = h || t.root;
      var c = b.uri.replace(a.fspath(), "").split("/"),
        d = b.onsuccess || f("resolveURI"),
        k = b.onerror || f("resolveURI"),
        e = function(a) {
          c.length ? s(a) : d && d(a)
        },
        s = function(a) {
          var b = c.shift(); - 1 !== b.indexOf(".") ? a.getFile(b, {},
            e, k) : a.getDirectory(b, {}, e, k)
        };
      s(h)
    };
    var z = function(a, b, h) {
        a.createReader().readEntries(b, h)
      },
      y = {
        create: !0,
        exclusive: !1
      }
  };
  var f = function(d) {
    return function() {
      console.log(d, arguments)
    }
  }
})(sketch);
var detectPrivateMode = function() {
  var g = function(d, a) {
      var e = 0,
        f = !1,
        l = window.setInterval(function() {
          d() && (window.clearInterval(l), a(f));
          50 < e++ && (window.clearInterval(l), f = !0, a(f))
        }, 10)
    },
    f = function(d) {
      d = d.toLowerCase();
      return 0 === d.indexOf("msie") && 0 === d.indexOf("trident") ? !1 :
        (d = /(?:msie|rv:)\s?([\d\.]+)/.exec(d)) && 10 <= parseInt(d[1],
          10) ? !0 : !1
    };
  return function(d) {
    var a;
    if (window.webkitRequestFileSystem) window.webkitRequestFileSystem(
      window.TEMPORARY, 1,
      function() {
        a = !1
      },
      function(b) {
        a = !0
      });
    else if (window.indexedDB &&
      /Firefox/.test(window.navigator.userAgent)) {
      var e;
      try {
        e = window.indexedDB.open("test")
      } catch (q) {
        a = !0
      }
      "undefined" === typeof a && g(function() {
        return "done" === e.readyState ? !0 : !1
      }, function(b) {
        b || (a = e.result ? !1 : !0)
      })
    } else if (f(window.navigator.userAgent)) {
      a = !1;
      try {
        window.indexedDB || (a = !0)
      } catch (l) {
        a = !0
      }
    } else if (window.localStorage && /Safari/.test(window.navigator.userAgent)) {
      try {
        window.localStorage.setItem("test", 1)
      } catch (b) {
        a = !0
      }
      "undefined" === typeof a && (a = !1, window.localStorage.removeItem(
        "test"))
    }
    g(function() {
      return "undefined" !==
        typeof a ? !0 : !1
    }, function(b) {
      d ? d(a) : console.log(a)
    })
  }
}();
"undefined" === typeof Color && (Color = {});
Color.open = Color.open || {};
(function(g) {
  g.GPL = function(d) {
    var a = [];
    d = d.split("\n");
    for (var e = 0; e < d.length; e++) isNaN(parseInt(d[e].substr(0,
      3))) || a.push(sketch.color.space({
      R: parseInt(d[e].substr(0, 3)),
      G: parseInt(d[e].substr(4, 3)),
      B: parseInt(d[e].substr(8, 3))
    }, "RGB>HEX24>W3"));
    return a
  };
  g.GGR = function(d, a) {
    function e(c, d) {
      var e = Math.round(255 * d[c[2]]),
        h = Math.round(255 * d[c[3]]),
        r = Math.round(255 * d[c[4]]),
        e = (Math.round(255 * d[c[5]]) << 24 | e << 16 | h << 8 | r) >>>
        0,
        e = sketch.color.space.HEX24_W3(e, a || 8),
        h = d[c[1]] - q;
      q += h;
      r = 0 === h ? 0 : (d[c[0]] -
        (q - h)) / h;
      b.push(e);
      b.push(Math.round(1E6 * h) / 1E6);
      b.push(Math.round(1E6 * r) / 1E6)
    }
    for (var q = 0, l = d.split("\n"), b = [], c = [], p = 3; p < l.length -
      1; p++) {
      var w = l[p].split(" ").map(parseFloat);
      w[3] == c[0] && w[4] == c[1] && w[5] == c[2] || e([0, 1, 3, 4, 5,
        6
      ], w);
      e([2, 2, 7, 8, 9, 10], w);
      c = [w[7], w[8], w[9]]
    }
    return f(b)
  };
  var f = function(d) {
    "string" === typeof d && (d = d.split(","));
    for (var a = [], e = 0, f = "", l = 0; l < d.length; l += 3) {
      var b = sketch.color.space(d[l], 6 === d[l].length ? "HEX>W3" :
          "HEX32>W3"),
        c = parseFloat(d[l + 1]),
        p = parseFloat(d[l + 2]) * c + e;
      if (f) {
        var w =
          sketch.color.space(b, "W3>HEX32>RGBA"),
          f = sketch.color.space(f, "W3>HEX32>RGBA"),
          w = sketch.color.space({
            R: .5 * w.R + .5 * f.R,
            G: .5 * w.G + .5 * f.G,
            B: .5 * w.B + .5 * f.B,
            A: .5 * w.A + .5 * f.A
          }, "RGBA>HEX32>W3");
        a.push(e);
        a.push(w.substr(1))
      }
      a.push(p);
      a.push(b.substr(1));
      e += c;
      f = b
    }
    return a
  }
})(Color.open);
"undefined" === typeof Color && (Color = {});
"undefined" === typeof Color.Space && (Color.Space = {});
(function(g) {
  var f = Math.PI / 180,
    d = 1 / f;
  g.RGB_HSI = function(a) {
    var e = a.R,
      f = a.G;
    a = a.B;
    var l = .5 * (2 * e - f - a),
      b = Math.sqrt(3) * (f - a);
    I = (e + f + a) / 3;
    0 < I ? (S = 1 - Math.min(e, f, a) / I, H = Math.atan2(b, l) * d,
      0 > H && (H += 360)) : H = S = 0;
    return {
      H: H,
      S: 100 * S,
      I: I
    }
  };
  g.HSI_RGB = function(a) {
    var d = a.H,
      q = a.S / 100;
    a = a.I;
    var l, b, c, d = d - 360 * Math.floor(d / 360);
    120 > d ? (c = a * (1 - q), l = a * (1 + q * Math.cos(d * f) /
      Math.cos((60 - d) * f)), b = 3 * a - l - c) : 240 > d ? (d -=
      120, l = a * (1 - q), b = a * (1 + q * Math.cos(d * f) / Math.cos(
        (60 - d) * f)), c = 3 * a - l - b) : (d -= 240, b = a * (1 - q),
      c = a * (1 + q * Math.cos(d * f) / Math.cos((60 -
        d) * f)), l = 3 * a - b - c);
    return {
      R: l,
      G: b,
      B: c
    }
  }
})(Color.Space);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Style = function(f) {
    var d = this,
      a = f.color.space,
      e = f.feature,
      q = f.util;
    (d.Fill = function(a, b) {
      a = a || k.fill.value;
      l(a, this, "fill", b);
      return this
    }).type = "fill";
    (d.Stroke = function(a, b) {
      a = a || k.stroke.value;
      l(a, this, "stroke", b);
      return this
    }).type = "stroke";
    var l = function(a, h, c, e) {
      if ("string" === typeof a) {
        if (a = d.parseStyle(a)) {
          var r = a.type;
          e = a.dna
        } else e = e || {}, r = e.type || "color", e = e[e.type] ||
          "#000000";
        a = {};
        a.type = r;
        a[r] = e
      }
      h.method = c;
      h.opacity = a.opacity || 1;
      h.type = a.type ||
        "color";
      h.mode = a.mode || "linear";
      h.noise = a.noise || !1;
      h.angle = a.angle || 0;
      r = k[c];
      h.color = a.color || r.color;
      h.gradient = a.gradient || r.gradient;
      h.pattern = a.pattern || r.pattern;
      "stroke" === c ? (h.dashArray = Array.isArray(a.dashArray) ? a.dashArray :
          b.dashArray, h.dashOffset = isFinite(a.dashOffset) ? a.dashOffset :
          b.dashOffset, h.lineCap = a.lineCap || b.lineCap, h.lineJoin =
          a.lineJoin || b.lineJoin, h.lineWidth = isFinite(a.lineWidth) ?
          a.lineWidth : b.lineWidth, h.miterLimit = isFinite(a.miterLimit) ?
          a.miterLimit : b.miterLimit, h.enabled =
          isFinite(a.enabled) ? a.enabled : isFinite(a.lineWidth)) : h.enabled =
        isFinite(a.enabled) ? a.enabled : !0
    };
    d.create = function(a, b) {
      if ("stroke" === a) return new d.Stroke(b);
      if ("fill" === a) return new d.Fill(b)
    };
    d.clone = function(a, b) {
      return d.cloneInto(a, {}, b)
    };
    d.cloneInto = function(a, h, d, k, e) {
      e = e || {};
      if (h) {
        k = k || a.type;
        for (var r in a)
          if (!e[r]) {
            var f = p[r];
            if (f) {
              if (d)
                if ("method" === r) continue;
                else if (c[r] && r !== k) continue;
              else if (b[r] === a[r]) continue;
              h[r] = "array" === f ? a[r].slice() : a[r]
            }
          }
        return h
      }
    };
    d.equals = function(a, b) {
      for (var h in a) {
        var c =
          p[h];
        if (c)
          if ("array" === c) {
            if (String(a[h]) !== String(b[h])) return !1
          } else if (a[h] !== b[h]) return !1
      }
      return !0
    };
    var b = {
        dashArray: "none",
        dashOffset: 0,
        lineCap: "butt",
        lineJoin: "miter",
        lineWidth: 1,
        miterLimit: 4,
        angle: 0,
        mode: "linear",
        noise: !1,
        opacity: 1
      },
      c = {
        color: "string",
        gradient: "string",
        pattern: "string"
      },
      p = {
        color: "string",
        gradient: "string",
        pattern: "string",
        dashArray: "array",
        dashOffset: "float",
        lineCap: "string",
        lineJoin: "string",
        lineWidth: "float",
        miterLimit: "float",
        angle: "number",
        mode: "string",
        noise: "boolean",
        opacity: "float",
        type: "string",
        method: "string",
        enabled: "boolean"
      };
    d.cloneToObject = function(a) {
      d.cloneFillStroke(d, a, {
        enabled: !0
      })
    };
    d.cloneToGlobal = function(a) {
      d.cloneFillStroke(a, d);
      f.palette && (a = a[f.palette.paintMethod]) && (f.palette.setIndicator(),
        f.palette.update(a.type))
    };
    d.cloneFillStroke = function(a, b, h) {
      a.fill && b.fill && d.cloneInto(a.fill, b.fill, void 0, void 0,
        h);
      a.stroke && b.stroke && d.cloneInto(a.stroke, b.stroke, void 0,
        void 0, h);
      return b
    };
    d.setFont = function(a) {
      var b = f.doc;
      a = a || {};
      "string" === typeof a &&
        (a = {
          fontFamily: a
        });
      if (a.fontFamily) {
        var h = a.onsuccess,
          c = b.selection.parse(a.selection || b.selection.items),
          d = b.toolkit,
          k = d.text;
        a = b.scene.copyProperties(k, a, {});
        k.loadFont(a.fontFamily, function() {
          d.setParam({
            filter: "text",
            params: a,
            selection: c
          });
          h && h()
        })
      }
    };
    d.setFill = function(a) {
      a = a || {};
      "string" === typeof a ? a = {
        fill: {
          dna: a
        }
      } : a.stroke || (a.fill = d.cloneInto(a, {}, !1, "fill"));
      a.useColorPicker = !1 !== a.useColorPicker;
      a.useRecord = a.useRecord || !0;
      a.useRender = !1 !== a.useRender;
      d.apply(a)
    };
    d.setStroke = function(a, b,
      h, c, k, e, r) {
      a = a || {};
      "string" === typeof a ? (a = {
          stroke: {
            dna: a
          }
        }, e && (a.stroke.dashArray = e), isFinite(r) && (a.stroke.dashOffset =
          r), h && (a.stroke.lineCap = h), c && (a.stroke.lineJoin = c),
        isFinite(b) && (a.stroke.lineWidth = b), isFinite(k) && (a.stroke
          .miterLimit = k)) : a.stroke || (a.stroke = d.cloneInto(a, {}, !
        1, "stroke"));
      a.useColorPicker = !1 !== a.useColorPicker;
      a.useRecord = a.useRecord || !0;
      a.useRender = !1 !== a.useRender;
      d.apply(a)
    };
    (function() {
      var a = function(a, b) {
          if (b) {
            "string" === typeof b && (b = {
              dna: b
            });
            var h = b.dna || b.color || b.gradient ||
              b.pattern,
              c = b.paintType;
            if (!c && h)
              if (h = d.parseStyle(h)) c = h.type, h = h.dna;
              else return;
            c && (b.type = c, b[c] = h, delete b.dna, delete b.paintType);
            return b
          }
        },
        b = function(a, b, h) {
          if (a = a && a[h]) d.cloneInto(b, a), d.cloneInto(b, d[h])
        },
        c = function(a, b, c, e, s, r, f) {
          var p = a[c];
          if (void 0 === p)
            if ((p = k.config[a.type]) && p[c]) p = a[c] = d.create(c);
            else return;
          if (!1 !== p)
            if (d.equals(b, p.__cache || p)) a.dirtyControl = !0, s &&
              delete p.__cache;
            else if ("clipart" === a.type) changeCount++;
          else {
            e && (p.__cache = d.clone(p));
            if (s) {
              k.scene.setDirtyPixelData(a);
              var v = a.id;
              e = r[v] || {
                id: v
              };
              e[c] = p.__cache;
              r[v] = e;
              delete p.__cache
            }
            d.cloneInto(b, p);
            s && (e = f[v] || {
              id: v
            }, e[c] = d.clone(p), f[v] = e);
            a.dirtyCache = !0;
            a.dirtyControl = !0;
            s = h(c, a);
            a.brush && (p = a.brush[c], d.cloneInto(b, p), p.__colors =
              s);
            return !0
          }
        },
        k;
      d.apply = function(r) {
        k = f.doc;
        var p = r.useColorPicker && f.ui.colorPicker.update || !1,
          m = e.stream.realtime && f.net.dataChannel,
          l = r.useRecord || !1,
          t = r.useRender || !1,
          w = !0 === l || "down" === l || "start" === l,
          u = !0 === l || "up" === l || "end" === l || "update" === l,
          g = r.configure || k.config[k.tool.type],
          G = k.selection.parse(r.selection || k.selection.items),
          J = k.scene.children,
          N = {},
          K = {},
          l = r.changeCount || 0,
          O = a("stroke", r.stroke);
        if (r = a("fill", r.fill)) {
          var V = r[r.type],
            L = "fill",
            T = r.type,
            Q = r;
          b(g, Q, L)
        }
        O && (V = O[O.type], L = "stroke", T = O.type, Q = O, b(g, Q,
          L));
        for (var U in G)
          if (g = J[U]) r && c(g, r, "fill", w, u, N, K) && l++, O &&
            c(g, O, "stroke", w, u, N, K) && l++;
        u && (l && (w = q.diff(q.objectToArray(N), q.objectToArray(K), [
          "id"
        ])) && (k.history && k.history.store({
            cmd: "update",
            icon: "palette",
            name: "update-style",
            data: {
              from: w.from,
              to: w.to
            }
          }),
          m && f.net.dataChannel.send(["scene.update", w.to])), k.saveSettings());
        k.toolkit.text && k.toolkit.text.updateCSSStyle();
        m = Q;
        if (Q = k.tool.device) Q.brush ? (w = Q.brush[L], d.cloneInto(
          m, w), h(L, Q.brush)) : Q[L] && (w = Q[L], d.cloneInto(m, w),
          h(L, Q));
        p && "none" !== V && "color" === T && f.ui.colorPicker.update(
          V);
        f.palette && f.palette.setIndicator();
        t && l && k.render.sceneGCO("style.apply")
      }
    })();
    d.renderSwatch = function(a, b, h, c, k) {
      var e = f.doc.pixelRatio || 1;
      c = (c || 24) * e;
      k = (k || 24) * e;
      a.width = c;
      a.height = k;
      if ("CANVAS" === a.nodeName) {
        var r =
          a.ctx || a.getContext("2d");
        switch (b) {
          case "color":
            r.fillStyle = h;
            r.fillRect(0, 0, c, k);
            break;
          case "gradient":
            a = d.getGradientStops({
              dna: h,
              asFlatArray: !0
            });
            r.fillStyle = d.createGradient(r, "linear", 0, 0, c, k, a);
            r.fillRect(0, 0, c, k);
            break;
          case "pattern":
            h instanceof CanvasPattern ? (r.fillStyle = h, r.fillRect(0,
              0, c, k)) : d.loadPattern(h, function(a) {
              r.fillStyle = a;
              r.fillRect(0, 0, c, k)
            })
        }
      } else switch (b) {
        case "color":
          a.style.background = h;
          break;
        case "gradient":
          a.style.cssText = d.toCSSGradientBG({
            dna: h,
            type: "linear",
            angle: "135deg"
          })
      }
    };
    var w = d.CONTEXT = q.Canvas(1, 1).ctx;
    (function() {
      d.loadPattern = function(a, b, h) {
        a = a || d.fill.pattern;
        var c = d.patternCtx[a];
        if (c) b && b(c);
        else {
          var k = new Image;
          k.onerror = function() {
            h && h();
            e.debug && console.warn("missing pattern", a)
          };
          k.onload = function() {
            var h = w.createPattern(k, "repeat");
            h.width = k.width;
            h.height = k.height;
            d.patternCtx[a] = h;
            b && b(h)
          };
          k.src = f.loc.getMediaUrl(a)
        }
      }
    })();
    d.hexFromColor = function(b) {
      "string" === typeof b ? "hsla" === b.substr(0, 4) ? b = a(b,
          "W3>HSLA>RGBA>HEX24>W3") : "rgba" === b.substr(0, 4) ? b = a(
          b,
          "W3>RGBA>HEX24>W3") : "rgb" === b.substr(0, 3) ? b = a(b,
          "W3>RGB>HEX24>W3") : f.color.webcolors[b] && (b = f.color.webcolors[
          b]) : isFinite(b.R) ? b = a(b, "RGB>HEX24>W3") : isFinite(b.H) &&
        (b = a(b, "HSLA>RGBA>HEX24>W3"));
      return b
    };
    var m = {
      color: function(a) {
        if (0 === a.indexOf("#") || 0 === a.indexOf("hsl") || 0 === a
          .indexOf("hsla") || 0 === a.indexOf("rgb") || 0 === a.indexOf(
            "rgba") || f.color.webcolors[a]) return !0
      },
      pattern: function(a) {
        if (0 === a.indexOf("#asset") || 0 === a.indexOf("data:") ||
          0 === a.indexOf("blob:") || 0 === a.indexOf("./") || 0 === a
          .indexOf("http")) return !0
      },
      gradient: function(a) {
        if (-1 !== a.indexOf(",") && isFinite(parseInt(a[0])) || -1 !==
          a.indexOf("linear-gradient(") || -1 !== a.indexOf(
            "radial-gradient(")) return !0
      }
    };
    d.validate = function(a, b) {
      if ("string" !== typeof a) return !1;
      var h = a.toLowerCase();
      return b ? m[b](h) || !1 : m.color(h) ? "color" : m.pattern(h) ?
        "pattern" : m.gradient(h) ? "gradient" : !1
    };
    d.parseStyle = function(a) {
      if ("none" === a) return {
        dna: "none",
        type: "gradient"
      };
      if (m.color(a)) return {
        dna: a,
        type: "color"
      };
      if (m.pattern(a)) return {
        dna: a,
        type: "pattern"
      };
      if (m.gradient(a))
        if (-1 !==
          a.indexOf("linear-gradient")) {
          if (a = d.parseCSSGradient(a, !0)) return {
            dna: a,
            type: "gradient"
          }
        } else return {
          dna: a,
          type: "gradient"
        }
    };
    d.load = function(a, b) {
      var h = 0,
        c = function(a) {
          --h || b && b()
        };
      a.fill && h++;
      a.stroke && h++;
      h ? (a.fill && u(a, "fill", c), a.stroke && u(a, "stroke", c)) :
        c(h = 1)
    };
    var u = function(a, b, c) {
        var k = t(a, b);
        "pattern" === k.type && k.pattern ? d.loadPattern(k.pattern,
          function(d) {
            h(b, a);
            c()
          },
          function() {
            c("404")
          }) : (h(b, a), c())
      },
      t = function(a, b) {
        var h = f.doc;
        if (a[b]) h = "string" === typeof a[b] ? a[b] = new d.create(b,
            a) :
          a[b];
        else {
          h = h.config[a.type];
          if (!h[b]) return "";
          h = h[b]
        }
        var c = h.type;
        "string" !== typeof h[c] && (h[c] = d[b][c]);
        return h
      },
      h = function(b, h) {
        var c = f.doc,
          k = t(h, b),
          e = k.noise,
          r = k.type,
          p = k[r];
        if (p) {
          if (h.useBackgroundOverlay) return "brush" === h.toolkitId ? k
            .__colors = [0, k.color || "#000"] : k.__colors = [0, c.backgroundRaw];
          if ("none" === p) return k.__colors = [0, "rgba(0,0,0,0)"];
          switch (r) {
            case "color":
              return k.__colors = [0, p];
            case "gradient":
              var m = d.getGradientStops({
                dna: p,
                asFlatArray: !0,
                asHex32: !0
              });
              if (0 === m.length) return k.__colors = [0, k.color ||
                "#000"
              ];
              break;
            case "pattern":
              return p ? (d.loadPattern(p), k.__colors = [0, d.patternCtx[
                p]]) : k.__colors = [0, k.color || "#F00"]
          }
          if (!e && !f.detect.useColorCycle[h.type]) {
            k = k.__colors = [];
            for (e = 0; e < m.length; e += 2) k.push(m[e]), k.push(a(m[e +
              1], "HEX32>RGBA>W3"));
            return k
          }
          c = d.hashDNA(p + e);
          if (d.gradientCtx[c]) return k.__colors = d.gradientCtx[c];
          k.__colors = f.style.getColorStopsHelper({
            stops: m,
            noise: e,
            seed: h.seed
          });
          return d.gradientCtx[c] = k.__colors
        }
      };
    d.getStyle = function(a, b, c, k, e, r, p) {
      var m = p[a];
      if (m && m.enabled) {
        var l =
          m.type,
          t = m.mode,
          q = m[l];
        if ("destination-out" === p.composite) return f.doc.backgroundRaw ||
          "#000";
        if ("none" === q) return "stamp" === p.type ? "rgba(0,0,0,0)" :
          "rgba(0,0,0,1)";
        if ("color" === l) return "cycle" === t ? (b = m.__colors, b[(
          2 * (p.time || 0) + 1) % b.length]) : q;
        if ("pattern" === l) return d.patternCtx[q] ? d.patternCtx[q] :
          "rgba(0,0,0,1)";
        if ("gradient" === l) return a = m.__colors || (m.__colors = h(
          a, p)), d.createGradient(b, t, c, k, e, r, a, m, p.bbox &&
          p.bbox.scale)
      }
    };
    new f.module.StylePalette(f, d);
    new f.module.StyleGCO(f, d);
    new f.module.StyleGradient(f,
      d);
    d.loadDefault && d.loadDefault();
    var r = function(a) {
        var b = function(b, h) {
          var c = e.style[b];
          c[a] && (c = c[a]);
          return d.validate(c, b) ? c : h
        };
        return {
          color: b("color", "#000000"),
          gradient: b("gradient",
            "0.169429711,fff91d8a,0.583,ff7c0ebd,1,ff0000f0"),
          pattern: b("pattern",
            "data:image/gif;base64,R0lGODlhDgAOAID/ANDu/FOdvCwAAAAADgAOAAACHYwDh5fazqKcj05rar5q+w961diVi9g9jaaGkFEAADs="
          )
        }
      },
      k = {};
    k.fill = r("fill");
    k.fill.value = k.fill[e.style.defaultFillType];
    k.stroke = r("stroke");
    k.stroke.value = k.stroke[e.style.defaultStrokeType];
    d.composite = "normal";
    d.stroke = new d.Stroke;
    d.fill = new d.Fill;
    return d
  };
  "undefined" !== typeof module && module.exports && (module.exports = g.module.Style)
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.StylePalette = function(f, d) {
    var a = f.util;
    d.add = function(a, e, b) {
      "string" === typeof a && (a = [a]);
      var c = d[e + "Hash"],
        p = d[e + "Official"],
        f = d[e];
      if (a && a.length)
        for (var m = 0; m < a.length; m++) {
          var u = a[m];
          if (u) {
            var t = u.dna || u,
              h = d.hashDNA(t);
            c[h] || (c[h] = !0, u.dna && (p[h] = !0), "gradient" === e &&
              -1 !== t.indexOf("gradient") && (t = d.parseCSSGradient(t, !
                0)), b ? f.unshift(t) : f.push(t))
          }
        }
    };
    d.addFromBlob = function(a, e) {
      f.convert.blobToText(a, function(b) {
        0 === b.indexOf("GIMP Gradient") ? d.add(Color.open.GGR(b).join(
              ","),
            "gradient", !0) : 0 === b.indexOf("GIMP Palette") ? d.add(
            Color.open.GPL(b), "color", !0) : f.feature.debug &&
          console.log("un-handled method", a);
        e && e()
      })
    };
    var e = function(a, e, b) {
      d[e] = f.lib && f.lib[e] ? f.lib[e]() : [d[b]];
      !d[a] && d[e] && (d.reset(a), d.add(d[e], a))
    };
    d.loadDefault = function() {
      e("color", "defaultColors", "defaultColor");
      e("gradient", "defaultGradients", "defaultGradient");
      e("pattern", "defaultPatterns", "defaultPattern")
    };
    d.reset = function(a) {
      a ? (d[a + "Ctx"] = {}, d[a + "Official"] = {}, d[a + "Hash"] = {},
        d[a] = []) : (d.gradientCtx = {}, d.gradientOfficial = {}, d.gradientHash = {},
        d.gradient = [], d.colorCtx = {}, d.colorOfficial = {}, d.colorHash = {},
        d.color = [], d.patternCtx = {}, d.patternOfficial = {}, d.patternHash = {},
        d.pattern = [])
    };
    d.hashDNA = function(d) {
      if (d && d.toLowerCase) return d = d.toLowerCase().split("#").join(
          ""), d = Math.abs(f.util.hash(d)).toString(16).substr(0, 6),
        a.string.rpad(d, "0", 6)
    };
    d.generateColorBlock = function() {
      var a = {
          Cyan: [12, 6, 9.7],
          Azure: [33, 6.9, 9.2],
          Indigo: [62, 9, 8.6],
          Purple: [92, 6, 9],
          Pink: [150, 8, 9],
          Red: [180, 10, 9],
          Orange: [196, 7.7,
            9.7
          ],
          Orange3: [224, 6.2, 10],
          Yellow: [234, 4.7, 11],
          Green: [261, 11, 9.5]
        },
        d = 0,
        b;
      for (b in a) d++;
      for (var c = 0, e, w = [], m = 1; 8 >= m; m++)
        for (b in a) {
          if (1 === m) e = f.color.space.HSL_RGB({
            H: 0,
            S: 0,
            L: 100 - c / (d - 1) * 100
          }), c++;
          else {
            n = m - 1;
            e = a[b];
            var u = Math.min(1, n / e[1]),
              t = Math.min(1, 1 - n / e[2]);
            e = f.color.space.HSI_RGB({
              H: (e[0] + 180) % 360,
              S: 150 * u,
              I: 250 * t
            })
          }
          w.push(f.color.space(e, "RGB>HEX24>W3"))
        }
      return w
    };
    return d
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.StylePalette)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.StyleGCO = function(f, d) {
    var a = f.util;
    d.setComposite = function(b, c, e) {
      b = q(b);
      var p = f.doc,
        h = p.toolkit;
      c = c || p.tool.type;
      var r = h.getDeviceFromType(c);
      if (r) {
        c = p.config[c];
        if ("eraser" === c.type) return;
        var k = c.composite;
        k && k.setValue ? k.setValue(b) : c.composite = b;
        r.composite = b;
        e && p.selection.length && h.setParam({
          param: "composite",
          value: b,
          selection: p.selection.items
        })
      }
      d.composite !== b && (d.composite = b, a.Canvas.blip(p.contexts
        .draw), p.render.setGCO(b))
    };
    d.getComposite = function(a,
      c) {
      a = b(a);
      return c && e[a] ? "source-over" : a
    };
    var e = a.arrayToObject(
        "source-in source-out source-atop destination-over destination-in destination-out destination-atop copy xor"
        .split(" ")),
      q = d.getCompositeReadable = function(a) {
        a = "string" === typeof a ? a || "normal" : "normal";
        return l[a] || a
      },
      l = {
        "source-over": "normal",
        "destination-out": "erase"
      },
      b = d.getCompositeNative = function(a) {
        a = "string" === typeof a ? a || "source-over" : "source-over";
        return c[a] || a
      },
      c = {
        normal: "source-over",
        disco: "lighter",
        erase: "destination-out"
      };
    d.getBlendOptions = function() {
      return "normal ~br~ darken multiply color-burn ~br~ lighten screen color-dodge ~br~ overlay soft-light hard-light ~br~ difference exclusion disco ~br~ hue saturation color luminosity ~br~ erase source-atop destination-over"
        .split(" ")
    };
    d.useSourceOver = a.arrayToObject(["normal", "source-over"]);
    d.useComposite = function(a) {
      return a && (a = a.selected || a) ? p[a] : !1
    };
    var p = a.arrayToObject(
      "normal darken multiply color-burn lighten screen color-dodge overlay soft-light hard-light difference exclusion hue saturation color luminosity erase disco"
      .split(" ").concat(
        "source-over source-in source-out source-atop destination-over destination-in destination-out destination-atop lighter darker copy xor"
        .split(" ")))
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.StyleGCO)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.StyleGradient = function(f, d) {
    var a = f.util,
      e = f.vector.Point;
    d.createGradient = function(f, l, b, c, p, w, m, u, t) {
      f = f || d.CONTEXT;
      u = u || {};
      if (isFinite(b + p + c + w)) {
        if ("radial" === l) l = (b + p) / 2, t = (c + w) / 2, c = Math
          .sqrt(Math.pow(p - b, 2) + Math.pow(w - c, 2)) / 3, f = f.createRadialGradient(
            l, t, 0, l, t, c);
        else {
          l = u.angle;
          if (isFinite(l) && (t && (0 > t.x && (l = 180 - l), 0 > t.y &&
              (l = 360 - l)), 235 !== l)) {
            t = e(b, c);
            u = e(b, w);
            b = e(p, w);
            c = e(p, c);
            w = l % 90 - 45;
            var h = l % 180 - 90;
            p = Math.abs(w) / 90;
            0 >= w * h ? (w = e.atTimeOnLine(u, b,
              p), c = e.atTimeOnLine(c, t, p)) : (w = e.atTimeOnLine(t,
              u, p), c = e.atTimeOnLine(b, c, p));
            c = e.distance(w, c) / 2;
            p = e.atTimeOnLine(t, b, .5);
            l *= a.DEG_RAD;
            t = e.atRadianDistance(p, l, -c);
            u = e.atRadianDistance(p, l, +c);
            b = t.x;
            c = t.y;
            p = u.x;
            w = u.y
          }
          f = f.createLinearGradient(b || 0, c || 0, p || 0, w || 0)
        }
        for (l = 0; l < m.length; l += 2) t = m[l], (c = m[l + 1]) &&
          isFinite(t) && f.addColorStop(t, c);
        return f
      }
      return "#000"
    };
    d.toCSSGradientBG = function(a) {
      if ("none" === (a.dna || a)) return "background: none";
      a = d.toCSSGradient(a);
      return "\t\t\t\tbackground: " + a +
        ";\t\t\t\tbackground: -webkit-" +
        a + ";\t\t\t\tbackground: -moz-" + a +
        ";\t\t\t\tbackground: -o-" + a + ";"
    };
    d.toCSSGradient = function(a) {
      var e = a.dna || "",
        b = a.stops,
        c = a.type || "linear";
      a = a.angle;
      a = isFinite(a) ? a + 90 + "deg" : a || "0deg";
      b = b || d.getGradientStops({
        dna: e,
        asCSSArray: !0
      });
      return "radial" === c ?
        "radial-gradient(circle closest-side at 50% 50%," + b + ")" :
        "linear-gradient(" + a + "," + b + ")"
    };
    d.toCSSColorStops = function(a) {
      for (var d = [], b = 0; b < a.length; b += 2) d.push(a[b + 1] +
        " " + 100 * a[b] + "%");
      return d
    };
    d.parseCSSGradient = function(a, d) {
      var b = f.color.spacex,
        c = f.color.CSSLinearGradient.parse(a);
      if (c) {
        for (var e = c.stops, w = e.length - 1, m = [], u = 0; u <= w; u++) {
          var t = e[u],
            h = t.position;
          h ? (-1 !== h.indexOf("%") && (h = parseFloat(h.replace("%",
            "")) / 100), m.push(isFinite(h) ? h : u / w)) : m.push(u /
            w);
          d ? m.push((new b(t.color)).toHEX32String().substr(1)) : m.push(
            t.color)
        }
        if (d) return m.join(",");
        c.stops = m;
        return c
      }
      return ""
    };
    d.getGradientStops = function(a) {
      var d = a.asCSSArray || !1,
        b = a.asFlatArray || !1,
        c = a.asHex32 || !1,
        e = [];
      a = (a.dna || "").split(",");
      var f = a.length;
      if (2 > f) return e;
      for (var m = 0; m < f; m += 2) {
        var u = parseFloat(a[m]),
          t =
          a[m + 1],
          h = t.length;
        8 !== h && (3 === h ? t = "ff" + t[0] + t[0] + t[1] + t[1] + t[
          2] + t[2] : 6 === h && (t = "ff" + t));
        if (c) t = parseInt("0x" + t, 16);
        else {
          var r = t.substr(0, 2);
          if ("ff" === r) t = "#" + t.substr(2);
          else var h = parseInt(t.substr(2, 2), 16),
            k = parseInt(t.substr(4, 2), 16),
            t = parseInt(t.substr(6, 2), 16),
            r = parseInt(r, 16) / 255,
            t = "rgba(" + h + "," + k + "," + t + "," + r + ")"
        }
        b ? (e.push(u), e.push(t)) : d ? e.push(t + " " + 100 * u +
          "%") : e.push({
          offset: u,
          color: t
        })
      }
      return e
    };
    d.getColorStopsHelper = function(a) {
      return d.getColorStops({
        dna: a.dna,
        stops: a.stops,
        asCSSArray: a.asCSSArray ||
          !1,
        seed: a.seed || 1,
        blend: a.blend || (a.noise ? "Luminosity" : "Normal"),
        reflect: a.reflect || !1,
        length: 500,
        resolution: 1,
        H: a.noise ? 10 : 0,
        S: a.noise ? 20 : 0,
        L: a.noise ? 10 : 0
      })
    };
    d.getColorStops = function(d) {
      var e = f.color.space,
        b = a ? new a.Random(d.seed || 1) : Math.random,
        c = d.dna || "",
        p = d.stops,
        w = d.blend || "Normal",
        m = d.reflect || !1,
        u = d.resolution || 1,
        t = d.length || 1,
        h = d.H || 0,
        r = d.S || 0,
        k = d.L || 0;
      d = d.asCSSArray || !1;
      if (f.color.blend) var v = f.color.blend.useAlphaBlend[w],
        x = f.color.blend[w];
      else v = !1, x = function(a, b) {
        return a * b / 255
      };
      p ? c =
        p : "string" === typeof c && (c = c.split(","));
      for (var p = [], s = 0; s < c.length; s += 2) p.push({
        color: c[s + 1],
        offset: parseFloat(c[s], 10) / (m ? 2 : 1)
      });
      if (m)
        for (c = c.slice(0).reverse(), s = 0; s < c.length; s += 2) p.push({
          color: c[s],
          offset: .5 - parseFloat(c[s + 1], 10) / 2 + .5
        });
      var c = 0,
        s = p[c].color,
        m = "string" === typeof s ? "W3>HEX32>RGBA" : "HEX32>RGBA",
        s = e(s, m),
        z = p[c].offset,
        y = p[c + 1];
      if (!y) return p;
      for (var B = e(y.color, m), y = p[c + 1].offset, A = [], g = 0; g <=
        t; g += u) {
        var F;
        F = g / t;
        F > y && (c++, p[c] && (s = B, z = y, p[c + 1] && (B = e(p[c +
          1].color, m), y = p[c + 1].offset)));
        F = (F - z) / (y - z);
        Infinity === F && (F = 0);
        if ("Normal" === w && 0 === h && 0 === r && 0 === k) F = e.RGB_W3({
          R: s.R * (1 - F) + B.R * F,
          G: s.G * (1 - F) + B.G * F,
          B: s.B * (1 - F) + B.B * F
        });
        else {
          var E = e.RGB_HSL({
            R: s.R * (1 - F) + B.R * F,
            G: s.G * (1 - F) + B.G * F,
            B: s.B * (1 - F) + B.B * F
          });
          F = e.HSLA_RGBA({
            H: (E.H + b.toDouble() * h + 360) % 360,
            S: Math.min(100, Math.max(0, E.S - b.toDouble() * r)),
            L: Math.min(100, Math.max(0, E.L - b.toDouble() * k)),
            A: 255
          });
          E = e.HSLA_RGBA({
            H: (E.H + b.toDouble() * h + 360) % 360,
            S: Math.min(100, Math.max(0, E.S + b.toDouble() * r)),
            L: Math.min(100, Math.max(0, E.L + b.toDouble() *
              k)),
            A: 255
          });
          v ? (F = x(F, E), F = e(F, "HEX32>RGBA>W3")) : F = e.RGBA_W3({
            R: x(F.R, E.R),
            G: x(F.G, E.G),
            B: x(F.B, E.B),
            A: x(F.A, E.A)
          })
        }
        d ? A.push(F + " " + g / t * 100 + "%") : (A.push(g / t), A.push(
          F))
      }
      return A
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.StyleGradient)
})(sketch);
RegExp.create = function(g, f, d) {
  for (var a in f) {
    var e = f[a],
      q = RegExp("{{" + a + "}}", "gi");
    e.source && (e = e.source.replace(/^\^|\$$/g, ""));
    g = g.replace(RegExp("\\(" + q.source + "\\)", "gi"), "(" + e +
      ")");
    g = g.replace(q, "(?:" + e + ")")
  }
  return RegExp(g, d)
};
(function(g) {
  g.color = g.color || {};
  var f = g.color.CSSLinearGradient = function(d) {
    this.direction = d.direction;
    this.stops = d.stops;
    this.fromString = d.fromString
  };
  f.parse = function(d) {
    if ("string" !== typeof d) return null;
    d = d.replace(/-(moz|ms|o|webkit)-/, "");
    var a = d.match(f.regex.css);
    if (!a) return null;
    var e = a[1] || "top",
      a = a[2].match(f.regex.colorStop),
      q = parseFloat(e);
    if (!isNaN(q)) switch ((q % 360 + 360) % 360) {
      case 0:
        e = "left";
        break;
      case 90:
        e = "bottom";
        break;
      case 180:
        e = "right";
        break;
      case 240:
        e = "top"
    }
    for (q = 0; q < a.length; q++) {
      var l =
        a[q],
        b = l.match(f.regex.color)[0],
        l = (l = l.substr(b.length).match(f.regex.length)) && l[0];
      a[q] = {
        color: b,
        position: l
      }
    }
    return new f({
      direction: e.replace("to ", ""),
      stops: a,
      fromString: d
    })
  };
  f.regex = {};
  f.regex.number = /^-?[0-9]*\.?[0-9]+$/;
  f.regex.keyword =
    /^(?:to\s|)(?:top\s+|bottom\s+)?(?:right|left)|(?:to\s|)(?:right\s+|left\s+)?(?:top|bottom)$/;
  f.regex.direction = RegExp.create(
    "^(?:{{keyword}}|{{number}}deg|0)$", {
      keyword: f.regex.keyword,
      number: f.regex.number
    });
  f.regex.color = RegExp.create("(?:{{keyword}}|{{func}}|{{hex}})", {
    keyword: /^(?:red|tan|grey|gray|lime|navy|blue|teal|aqua|cyan|gold|peru|pink|plum|snow|[a-z]{5,20})$/,
    func: RegExp.create(
      "^(?:rgb|hsl)a?\\((?:\\s*{{number}}%?\\s*,?\\s*){3,4}\\)$", {
        number: f.regex.number
      }),
    hex: /^#(?:[0-9a-f]{1,2}){3}$/i
  }, "i");
  f.regex.percentage = RegExp.create("^(?:{{number}}%|0)$", {
    number: f.regex.number
  });
  f.regex.length = RegExp.create("{{number}}{{unit}}|0", {
    number: f.regex.number,
    unit: /%|px|mm|cm|in|em|rem|en|ex|ch|vm|vw|vh/
  });
  f.regex.colorStop = RegExp.create("{{color}}\\s*{{length}}?", {
    color: f.regex.color,
    length: f.regex.length
  }, "gi");
  f.regex.css = RegExp.create(
    "^linear-gradient\\(\\s*(?:({{direction}})\\s*,)?\\s*({{colorstop}}\\s*(?:,\\s*{{colorstop}}\\s*)+)\\)$", {
      direction: f.regex.direction,
      colorStop: f.regex.colorStop
    }, "i")
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch.color = sketch.color || {};
sketch.color.space = sketch.color.space || {};
sketch.color.spacex = sketch.color.spacex || {};
(function() {
  var g = {},
    f = {
      "HEX24>HSL": "HEX24>RGB>HSL",
      "HEX32>HSLA": "HEX32>RGBA>HSLA",
      "HEX24>CMYK": "HEX24>RGB>CMY>CMYK",
      "RGB>CMYK": "RGB>CMY>CMYK"
    },
    d = sketch.color.space = function(a, b) {
      f[b] && (b = f[b]);
      if ("object" === typeof a && 0 <= a[0]) {
        for (var c = b.substr(0, b.indexOf(">")), e = {}, q = 0; q < c.length; q++) {
          var m = c.substr(q, 1);
          e[m] = a[q]
        }
        a = e
      }
      if (g[b]) return g[b](a);
      for (var u = [], c = b.split(">"), e = c[0] + "_" + c[1], q = 2; q <=
        c.length; q++) a = d[e](a), u.push(d[e]), e = e.substr(e.indexOf(
        "_") + 1) + "_" + c[q];
      c = u.length;
      1 === c ? g[b] = u[0] : 2 ===
        c ? g[b] = function(a) {
          return u[1](u[0](a))
        } : 3 === c ? g[b] = function(a) {
          return u[2](u[1](u[0](a)))
        } : 4 === c && (g[b] = function(a) {
          return u[3](u[2](u[1](u[0](a))))
        });
      return a
    },
    a = {
      "#": function(a, b) {
        a.color = d.HEX24_RGBA(d.W3_HEX24(b));
        a.colorSpace = "RGB"
      },
      rgba: function(a, b) {
        a.color = d.W3_RGBA(b);
        a.colorSpace = "RGB"
      },
      rgb: function(a, b) {
        a.color = d.W3_RGB(b);
        a.colorSpace = "RGB"
      },
      hsla: function(a, b) {
        a.color = d.W3_HSLA(b);
        a.colorSpace = "HSL"
      },
      hsl: function(a, b) {
        a.color = d.W3_HSL(b);
        a.colorSpace = "HSL"
      }
    },
    e = sketch.color.spacex = function(d,
      b) {
      if (!(this instanceof e)) return new e(d);
      d = d || "#000";
      if ("string" === typeof d)
        if (d = d.replace(/ /g, ""), d = d.toLowerCase(), q[d]) a["#"](
          this, q[d]);
        else
          for (var c in a) {
            if (0 === d.indexOf(c)) {
              a[c](this, d);
              break
            }
          } else this.color = d, this.colorSpace = b;
      return this
    };
  e.prototype.setSpace = function(a) {
    var b = this.colorSpace;
    b !== a && (this.color = d(this.color, b + ">" + a), this.colorSpace =
      a);
    return this
  };
  e.prototype.toHEX24 = function() {
    return d.RGB_HEX24(this.toRGB().color)
  };
  e.prototype.toHEX32 = function() {
    return d.RGBA_HEX32(this.toRGB().color)
  };
  e.prototype.toRGB = function() {
    return this.setSpace("RGB")
  };
  e.prototype.toHSL = function() {
    return this.setSpace("HSL")
  };
  e.prototype.toHSV = function() {
    return this.setSpace("HSV")
  };
  e.prototype.toCMYK = function() {
    return this.setSpace("CMYK")
  };
  e.prototype.toHEXString = e.prototype.toHEX24String = function() {
    return d.HEX24_W3(this.toHEX24())
  };
  e.prototype.toHEX32String = function() {
    return d.HEX32_W3(this.toHEX32())
  };
  e.prototype.toRGBString = function() {
    return d.RGB_W3(this.toRGB().color)
  };
  e.prototype.toRGBAString = function() {
    return d.RGBA_W3(this.toRGB().color)
  };
  e.prototype.toHSLString = function() {
    return d.HSL_W3(this.toHSL().color)
  };
  e.prototype.toHSLAString = function() {
    return d.HSLA_W3(this.toHSL().color)
  };
  e.prototype.isW3Contrast = function(a, b, c) {
    b = b || 125;
    c = c || 500;
    a = a ? (new e(a)).toRGB() : {
      R: 0,
      G: 0,
      B: 0
    };
    b = this.isW3Brightness(a.color) <= b;
    c = this.isW3Difference(a.color) <= c;
    return !(b && c)
  };
  e.prototype.isW3Brightness = function(a) {
    return d.W3Brightness(this.color, a)
  };
  e.prototype.isW3Difference = function(a) {
    return d.W3Difference(this.color, a)
  };
  d.isW3Contrast = function(a,
    b) {
    b = b || {
      R: 255,
      G: 255,
      B: 255
    };
    var c = 125 >= d.W3Brightness(a, b),
      e = 500 >= d.W3Difference(a, b);
    return !(c && e)
  };
  d.W3Brightness = function(a, b) {
    return Math.abs((299 * a.R + 587 * a.G + 114 * a.B) / 1E3 - (299 *
      b.R + 587 * b.G + 114 * b.B) / 1E3)
  };
  d.W3Difference = function(a, b) {
    var c = Math.max(a.R, b.R) - Math.min(a.R, b.R),
      d = Math.max(a.G, b.G) - Math.min(a.G, b.G);
    b = Math.max(a.B, b.B) - Math.min(a.B, b.B);
    return c + d + b
  };
  d.RGB_W3 = function(a) {
    return "rgb(" + (a.R >> 0) + "," + (a.G >> 0) + "," + (a.B >> 0) +
      ")"
  };
  d.RGBA_W3 = function(a) {
    var b = isFinite(a.A) ? a.A / 255 : 1;
    return "rgba(" +
      (a.R >> 0) + "," + (a.G >> 0) + "," + (a.B >> 0) + "," + b + ")"
  };
  d.W3_RGB = function(a) {
    a = a.substr(4, a.length - 5).split(",");
    return {
      R: parseFloat(a[0], 10),
      G: parseFloat(a[1], 10),
      B: parseFloat(a[2], 10)
    }
  };
  d.W3_RGBA = function(a) {
    a = a.substr(5, a.length - 6).split(",");
    return {
      R: parseFloat(a[0], 10),
      G: parseFloat(a[1], 10),
      B: parseFloat(a[2], 10),
      A: 255 * parseFloat(a[3] || 1)
    }
  };
  d.HSL_W3 = function(a) {
    return "hsl(" + (a.H + .5 >> 0) + "," + (a.S + .5 >> 0) + "%," +
      (a.L + .5 >> 0) + "%)"
  };
  d.HSLA_W3 = function(a) {
    var b = isFinite(a.A) ? a.A / 255 : 1;
    return "hsla(" + (a.H + .5 >> 0) + "," +
      (a.S + .5 >> 0) + "%," + (a.L + .5 >> 0) + "%," + b + ")"
  };
  d.W3_HSL = function(a) {
    var b = a.indexOf("(") + 1,
      c = a.indexOf(")");
    a = a.substr(b, c - b).split(",");
    return {
      H: parseFloat(a[0], 10),
      S: parseFloat(a[1], 10),
      L: parseFloat(a[2], 10)
    }
  };
  d.W3_HSLA = function(a) {
    var b = a.indexOf("(") + 1,
      c = a.indexOf(")");
    a = a.substr(b, c - b).split(",");
    return {
      H: parseFloat(a[0], 10),
      S: parseFloat(a[1], 10),
      L: parseFloat(a[2], 10),
      A: 255 * parseFloat(a[3], 10)
    }
  };
  d.W3_HEX = d.W3_HEX24 = function(a) {
    "#" === a.substr(0, 1) && (a = a.substr(1));
    3 === a.length && (a = a[0] + a[0] + a[1] + a[1] +
      a[2] + a[2]);
    return parseInt("0x" + a, 16)
  };
  d.W3_HEX32 = function(a) {
    "#" === a.substr(0, 1) && (a = a.substr(1));
    3 === a.length && (a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
    return 6 === a.length ? parseInt("0xFF" + a, 16) : parseInt("0x" +
      a, 16)
  };
  d.HEX_W3 = d.HEX24_W3 = function(a, b) {
    b || (b = 6);
    a || (a = 0);
    var c, d = a.toString(16);
    for (c = d.length; c < b;) d = "0" + d, c++;
    for (c = d.length; c > b;) d = d.substr(1), c--;
    return "#" + d
  };
  d.HEX32_W3 = function(a) {
    return d.HEX_W3(a, 8)
  };
  d.HEX_RGB = d.HEX24_RGB = function(a) {
    return {
      R: a >> 16,
      G: a >> 8 & 255,
      B: a & 255
    }
  };
  d.HEX_RGB = d.HEX24_RGBA =
    function(a) {
      return {
        R: a >> 16,
        G: a >> 8 & 255,
        B: a & 255,
        A: 255
      }
    };
  d.HEX32_RGBA = function(a) {
    return {
      R: a >>> 16 & 255,
      G: a >>> 8 & 255,
      B: a & 255,
      A: a >>> 24
    }
  };
  d.RGBA_HEX32 = function(a) {
    return (a.A << 24 | a.R << 16 | a.G << 8 | a.B) >>> 0
  };
  d.RGB_HEX24 = d.RGB_HEX = function(a) {
    0 > a.R && (a.R = 0);
    0 > a.G && (a.G = 0);
    0 > a.B && (a.B = 0);
    255 < a.R && (a.R = 255);
    255 < a.G && (a.G = 255);
    255 < a.B && (a.B = 255);
    return a.R << 16 | a.G << 8 | a.B
  };
  d.RGB_CMY = function(a) {
    return {
      C: 1 - a.R / 255,
      M: 1 - a.G / 255,
      Y: 1 - a.B / 255
    }
  };
  d.RGBA_HSLA = d.RGB_HSL = function(a) {
    var b = a.R / 255,
      c = a.G / 255,
      d = a.B / 255,
      e = Math.min(b,
        c, d),
      f = Math.max(b, c, d),
      q = f - e,
      t, h = (f + e) / 2;
    if (0 === q) e = t = 0;
    else {
      var e = .5 > h ? q / (f + e) : q / (2 - f - e),
        r = ((f - b) / 6 + q / 2) / q,
        k = ((f - c) / 6 + q / 2) / q,
        q = ((f - d) / 6 + q / 2) / q;
      b === f ? t = q - k : c === f ? t = 1 / 3 + r - q : d === f && (
        t = 2 / 3 + k - r);
      0 > t && (t += 1);
      1 < t && (t -= 1)
    }
    return {
      H: 360 * t,
      S: 100 * e,
      L: 100 * h,
      A: a.A
    }
  };
  d.RGBA_HSVA = d.RGB_HSV = function(a) {
    var b = a.R / 255,
      c = a.G / 255,
      d = a.B / 255,
      e = Math.min(b, c, d),
      f = Math.max(b, c, d),
      q = f - e,
      t;
    if (0 === q) e = t = 0;
    else {
      var e = q / f,
        h = ((f - b) / 6 + q / 2) / q,
        r = ((f - c) / 6 + q / 2) / q,
        q = ((f - d) / 6 + q / 2) / q;
      b === f ? t = q - r : c === f ? t = 1 / 3 + h - q : d === f && (
        t = 2 / 3 + r - h);
      0 > t &&
        (t += 1);
      1 < t && (t -= 1)
    }
    return {
      H: 360 * t,
      S: 100 * e,
      V: 100 * f,
      A: a.A
    }
  };
  d.CMY_RGB = function(a) {
    return {
      R: Math.max(0, 255 * (1 - a.C)),
      G: Math.max(0, 255 * (1 - a.M)),
      B: Math.max(0, 255 * (1 - a.Y))
    }
  };
  d.CMY_CMYK = function(a) {
    var b = a.C,
      c = a.M;
    a = a.Y;
    var d = Math.min(a, Math.min(c, Math.min(b, 1))),
      b = Math.round((b - d) / (1 - d) * 100),
      c = Math.round((c - d) / (1 - d) * 100);
    a = Math.round((a - d) / (1 - d) * 100);
    d = Math.round(100 * d);
    return {
      C: b,
      M: c,
      Y: a,
      K: d
    }
  };
  d.CMYK_CMY = function(a) {
    return {
      C: a.C * (1 - a.K) + a.K,
      M: a.M * (1 - a.K) + a.K,
      Y: a.Y * (1 - a.K) + a.K
    }
  };
  d.HSLA_RGBA = d.HSL_RGB = function(a) {
    var b =
      a.H / 360,
      c = a.S / 100,
      d = a.L / 100,
      e, f, q;
    0 === c ? d = c = b = d : (f = .5 > d ? d * (1 + c) : d + c - c *
      d, e = 2 * d - f, q = b + 1 / 3, 0 > q && (q += 1), 1 < q && (q -=
        1), d = 1 > 6 * q ? e + 6 * (f - e) * q : 1 > 2 * q ? f : 2 >
      3 * q ? e + (f - e) * (2 / 3 - q) * 6 : e, q = b, 0 > q && (q +=
        1), 1 < q && (q -= 1), c = 1 > 6 * q ? e + 6 * (f - e) * q : 1 >
      2 * q ? f : 2 > 3 * q ? e + (f - e) * (2 / 3 - q) * 6 : e, q =
      b - 1 / 3, 0 > q && (q += 1), 1 < q && (q -= 1), b = 1 > 6 * q ?
      e + 6 * (f - e) * q : 1 > 2 * q ? f : 2 > 3 * q ? e + (f - e) *
      (2 / 3 - q) * 6 : e);
    return {
      R: 255 * d,
      G: 255 * c,
      B: 255 * b,
      A: a.A
    }
  };
  d.HSVA_RGBA = d.HSV_RGB = function(a) {
    var b = a.H / 360,
      c = a.S / 100,
      d = a.V / 100,
      e, f, q, t, h;
    if (0 === c) e = f = q = Math.round(255 * d);
    else switch (1 <= b &&
      (b = 0), b *= 6, t = b - Math.floor(b), h = Math.round(255 * d *
        (1 - c)), q = Math.round(255 * d * (1 - c * t)), c = Math.round(
        255 * d * (1 - c * (1 - t))), d = Math.round(255 * d), Math.floor(
        b)) {
      case 0:
        e = d;
        f = c;
        q = h;
        break;
      case 1:
        e = q;
        f = d;
        q = h;
        break;
      case 2:
        e = h;
        f = d;
        q = c;
        break;
      case 3:
        e = h;
        f = q;
        q = d;
        break;
      case 4:
        e = c;
        f = h;
        q = d;
        break;
      case 5:
        e = d, f = h
    }
    return {
      R: e,
      G: f,
      B: q,
      A: a.A
    }
  };
  var q = sketch.color.webcolors = {
    aliceblue: "f0f8ff",
    antiquewhite: "faebd7",
    aqua: "00ffff",
    aquamarine: "7fffd4",
    azure: "f0ffff",
    beige: "f5f5dc",
    bisque: "ffe4c4",
    black: "000000",
    blanchedalmond: "ffebcd",
    blue: "0000ff",
    blueviolet: "8a2be2",
    brown: "a52a2a",
    burlywood: "deb887",
    cadetblue: "5f9ea0",
    chartreuse: "7fff00",
    chocolate: "d2691e",
    coral: "ff7f50",
    cornflowerblue: "6495ed",
    cornsilk: "fff8dc",
    crimson: "dc143c",
    cyan: "00ffff",
    darkblue: "00008b",
    darkcyan: "008b8b",
    darkgoldenrod: "b8860b",
    darkgray: "a9a9a9",
    darkgreen: "006400",
    darkgrey: "a9a9a9",
    darkkhaki: "bdb76b",
    darkmagenta: "8b008b",
    darkolivegreen: "556b2f",
    darkorange: "ff8c00",
    darkorchid: "9932cc",
    darkred: "8b0000",
    darksalmon: "e9967a",
    darkseagreen: "8fbc8f",
    darkslateblue: "483d8b",
    darkslategray: "2f4f4f",
    darkslategrey: "2f4f4f",
    darkturquoise: "00ced1",
    darkviolet: "9400d3",
    deeppink: "ff1493",
    deepskyblue: "00bfff",
    dimgray: "696969",
    dimgrey: "696969",
    dodgerblue: "1e90ff",
    firebrick: "b22222",
    floralwhite: "fffaf0",
    forestgreen: "228b22",
    fuchsia: "ff00ff",
    fuscia: "ff00ff",
    gainsboro: "dcdcdc",
    ghostwhite: "f8f8ff",
    gold: "ffd700",
    goldenrod: "daa520",
    gray: "808080",
    green: "008000",
    greenyellow: "adff2f",
    grey: "808080",
    honeydew: "f0fff0",
    hotpink: "ff69b4",
    indianred: "cd5c5c",
    indigo: "4b0082",
    ivory: "fffff0",
    khaki: "f0e68c",
    lavender: "e6e6fa",
    lavenderblush: "fff0f5",
    lawngreen: "7cfc00",
    lemonchiffon: "fffacd",
    lightblue: "add8e6",
    lightcoral: "f08080",
    lightcyan: "e0ffff",
    lightgoldenrodyellow: "fafad2",
    lightgray: "d3d3d3",
    lightgreen: "90ee90",
    lightgrey: "d3d3d3",
    lightpink: "ffb6c1",
    lightsalmon: "ffa07a",
    lightseagreen: "20b2aa",
    lightskyblue: "87cefa",
    lightslategray: "778899",
    lightslategrey: "778899",
    lightsteelblue: "b0c4de",
    lightyellow: "ffffe0",
    lime: "00ff00",
    limegreen: "32cd32",
    linen: "faf0e6",
    magenta: "ff00ff",
    maroon: "800000",
    mediumaquamarine: "66cdaa",
    mediumblue: "0000cd",
    mediumorchid: "ba55d3",
    mediumpurple: "9370db",
    mediumseagreen: "3cb371",
    mediumslateblue: "7b68ee",
    mediumspringgreen: "00fa9a",
    mediumturquoise: "48d1cc",
    mediumvioletred: "c71585",
    midnightblue: "191970",
    mintcream: "f5fffa",
    mistyrose: "ffe4e1",
    moccasin: "ffe4b5",
    navajowhite: "ffdead",
    navy: "000080",
    oldlace: "fdf5e6",
    olive: "808000",
    olivedrab: "6b8e23",
    orange: "ffa500",
    orangered: "ff4500",
    orchid: "da70d6",
    palegoldenrod: "eee8aa",
    palegreen: "98fb98",
    paleturquoise: "afeeee",
    palevioletred: "db7093",
    papayawhip: "ffefd5",
    peachpuff: "ffdab9",
    peru: "cd853f",
    pink: "ffc0cb",
    plum: "dda0dd",
    powderblue: "b0e0e6",
    purple: "800080",
    red: "ff0000",
    rosybrown: "bc8f8f",
    royalblue: "4169e1",
    saddlebrown: "8b4513",
    salmon: "fa8072",
    sandybrown: "f4a460",
    seagreen: "2e8b57",
    seashell: "fff5ee",
    sienna: "a0522d",
    silver: "c0c0c0",
    skyblue: "87ceeb",
    slateblue: "6a5acd",
    slategray: "708090",
    slategrey: "708090",
    snow: "fffafa",
    springgreen: "00ff7f",
    steelblue: "4682b4",
    tan: "d2b48c",
    teal: "008080",
    thistle: "d8bfd8",
    tomato: "ff6347",
    turquoise: "40e0d0",
    violet: "ee82ee",
    wheat: "f5deb3",
    white: "ffffff",
    whitesmoke: "f5f5f5",
    yellow: "ffff00",
    yellowgreen: "9acd32"
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    sketch.color)
})();
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Library = function(f, d) {
    var a = f.dom,
      e = d.toolkit,
      q = f.util;
    (function() {
      for (var a =
          "template brush shape stamp text clipart image color gradient texture"
          .split(" "), b = 0; b < a.length; b++) {
        var c = a[b];
        (f.lib[c] = f.lib[c] || {}).meta = {}
      }
    })();
    f.lib.setData = function(a, b) {
      if (b.data || b.official) {
        var c = f.lib[a],
          e = {};
        b.reset && (c.tree = b.data ? {} : c.defaultTree || {});
        new q.Queue({
          items: b,
          instant: !0,
          flatten: !0,
          oncomplete: function() {
            for (var b in c.tree) e[b] = e[b] || c.tree[b];
            c.tree =
              e;
            f.lib.init(a);
            f.ui.configureBuild(null, !0)
          },
          next: function(a, b, f) {
            if ("reset" === b) return this.next();
            if ("defaultValue" === b) return c.defaultItem = a, this.next();
            f = a.data ? a.data : a;
            for (var t = 0; t < f.length; t++) {
              var h = f[t];
              "string" === typeof h && (h = {
                filepath: h,
                name: q.string.filename(h),
                category: a.category || "Unknown"
              });
              void 0 === h.name && (h.name = q.string.filename(h.filepath));
              void 0 === h.id && (h.id = h.name.replace(this.rxAlphaNumeric,
                "") + Date.now());
              var r = h.category || a.category || "Unknown";
              (e[r] || (e[r] = [])).push(h)
            }
            f =
              d.scene.copyRules(a, {});
            c.meta[a.category || b] = f;
            this.next()
          }
        })
      }
    };
    f.lib.setClipartDefaultValue = function(a) {
      var b = f.lib.clipart;
      if (a = a || b.defaultItem) a = a.startsWith("./") ? a : b.path +
        "/" + a, delete e.media.style.render, e.media.style.src = a, d
        .config.clipart.src = a
    };
    f.lib.setClipartData = function(a) {
      a && (f.lib.setData("clipart", a), f.lib.setClipartDefaultValue(
        a.defaultValue))
    };
    f.lib.setStampDefaultValue = function(a) {
      var b = f.lib.clipart;
      a = a || b.defaultItem;
      d.config.stamp.src = a
    };
    f.lib.setStampData = function(a) {
      a &&
        (f.lib.setData("stamp", a), f.lib.setStampDefaultValue(a.defaultValue))
    };
    f.lib.setTextData = function(a) {
      a && (f.lib.setData("text", a), a.defaultValue && (d.config.text
        .fontFamily = a.defaultValue))
    };
    f.lib.setPaletteData = function(d) {
      var b = function(b) {
        var e = d[b];
        if (e) {
          var q = e.official,
            m = e.data;
          !1 === e.enabled ? (f.feature.style[b] = !1, a.setCSS("." +
            b + "-indicator", "display", "none")) : (f.feature.style[b] = !
            0, a.setCSS("." + b + "-indicator", "display", ""));
          if (q || m) {
            if (q) {
              for (var u = [], t = 0; t < q.length; t++) u.push({
                dna: q[t],
                status: "official"
              });
              q = u.concat(m)
            } else q = m;
            !0 !== e.reset && (q = q.concat(f.style[b]));
            q.length && (f.style.reset(b), f.style.add(q, b))
          }
          e.defaultValue && (f.style.fill[b] = e.defaultValue)
        }
      };
      b("color");
      b("gradient");
      b("pattern");
      f.palette.rebuild()
    };
    f.lib.init = function(a) {
      if (!f.loc.MEDIA) return console.warn("loc not setup");
      var b = f.lib[a];
      b.meta = b.meta || {};
      b.path = f.loc.MEDIA + b.dir + "/";
      b.type = a;
      b.defaultTree = b.defaultTree || q.clone(b.tree);
      b.byId = {};
      b.byName = {};
      b.byPath = {};
      b.paths = [];
      b.getSrc = function(a, c) {
        if (a) {
          var d = b.dir + "/";
          c ||
            (d = f.loc.MEDIA + d);
          var h = a.filepath || "";
          return h.startsWith("#") ? f.assets.getURL(h) : h.startsWith(
            "http") || h.startsWith("./") ? h : d + h
        }
      };
      b.getThumbnail = function(c) {
        if (c) {
          var d = f.loc.MEDIA + "thumb/" + b.dir + "/",
            e = c.filepath || "";
          return e.startsWith("http") ? e : c.thumbnail ? c.thumbnail :
            e.startsWith("#") ? c.thumbnail : e.startsWith(".") ? e.replace(
              "/media/", "/media/thumb/").replace(".svg", ".png") :
            "text" === a ? d + c.name + ".png" : d + e.replace(".svg",
              ".png")
        }
      };
      b.getEntry = function(a) {
        var c = b.byPath[a];
        if (c) return c;
        a = f.assets.getItem(a);
        return b.byPath[a.src]
      };
      var c = function(c, d) {
          for (var e = b.tree[d], h = 0; h < e.length; h++) {
            var r = e[h];
            r.type = a;
            r.category = d;
            r.filepath = r.filepath || "";
            r.filename = q.string.filename(r.filepath);
            r.folder = d;
            r.id && (b.byId[r.id] = r);
            b.byName[r.name] = r;
            b.byPath[r.filepath] = r;
            b.paths.push(r)
          }
        },
        d = function(a, c, d) {
          switch (d) {
            default: return b.tree[c].sort(function(a, b) {
              return a.name.localeCompare(b.name)
            })
          }
        },
        e;
      for (e in b.tree) d(a, e), c(a, e)
    };
    f.lib.setTemplateData = function(a) {
      a && f.lib.setData("template", q.clone(a))
    };
    f.lib.template.open =
      function(a, b, c) {
        var p = f.lib.template;
        f.lib.getTemplateData && f.lib.getTemplateData();
        a = a || p.defaultItem;
        c = isFinite(c) ? c : !0;
        var w = p.byId[a] || p.byName[a];
        if (w) {
          c && d.reset();
          var m = function() {
            d.template = w;
            w.alert && (f.feature.alert = w.alert);
            w.background && d.setBackground(w.background);
            var a = d.tool.type,
              h = q.clone(w.children);
            d.scene.add({
              data: h,
              scale: 1,
              useRecord: !1,
              useRender: !1,
              onload: function() {
                e.setTool(a);
                f.lib.setClipartDefaultValue();
                b && b(1)
              }
            })
          };
          if (w.clip) {
            var u = w.clip;
            "string" === typeof u.path ? (u.path =
                f.vector.SVGPath.toVOBPath(path), m()) : "string" ===
              typeof u.src ? new f.vector.SVG({
                src: u.src,
                onload: function(a) {
                  u.path = a.vob.childNodes[0].data;
                  m()
                }
              }) : u.path && m()
          } else m()
        } else return console.warn("missing template")
      }
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.lib = g.lib || {};
  g.lib.defaultColors = function() {
    return "#ffffff #e2e2e2 #c6c6c6 #aaaaaa #8d8d8d #717171 #555555 #383838 #1c1c1c #000000 #a8f1ff #aedbff #bcb8ff #e0a6ff #ffb4de #ffbcbc #ffd1b4 #ffeeaa #ffff9a #e4f9c1 #63e5ff #6ebeff #877fff #c661ff #ff79c2 #ff8888 #ffac79 #ffe067 #ffff49 #cef28f #2bd5ff #3aa1ff #5a51ff #ab29ff #ff48a6 #ff5b5b #ff8a47 #ffce2f #fffd07 #b6e565 #00c1f7 #1285ff #362cff #9000ff #f3228a #ff3737 #ff6c20 #ffba04 #fff200 #9dd241 #00a8e0 #006af5 #1b11ff #7400f4 #d7066f #ff1b1b #ff5103 #eea300 #ffdc00 #83b925 #008cc1 #004fcf #0800da #5800cb #b10053 #e90808 #f43900 #d08800 #d6b700 #689a10 #00668c #00369b #000094 #3a0087 #800037 #ac0000 #c42500 #9f6700 #ab9200 #4c7602"
      .split(" ")
  }
})(sketch);

"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.lib && (sketch.lib = {});
sketch.lib.clipart = {
  defaultCategory: "animals",
  dir: "clipart",
  thumbnail: {
    columns: 5,
    rows: 5,
    padding: 4,
    _width: 44,
    _height: 44
  },
  tree: {
    "Your Files": [],
    plants: [{
      name: "1313071007.svg",
      filepath: "plants/1313071007.svg"
    }, {
      name: "automne.svg",
      filepath: "plants/automne.svg"
    }, {
      name: "baronchon_palm_trees_1.svg",
      filepath: "plants/baronchon_palm_trees_1.svg"
    }, {
      name: "ete.svg",
      filepath: "plants/ete.svg"
    }, {
      name: "mekonee_29_vegetables_set_1.svg",
      filepath: "plants/mekonee_29_vegetables_set_1.svg"
    }, {
      name: "mekonee_29_vegetables_set_2.svg",
      filepath: "plants/mekonee_29_vegetables_set_2.svg"
    }, {
      name: "mekonee_29_vegetables_set_7.svg",
      filepath: "plants/mekonee_29_vegetables_set_7.svg"
    }, {
      name: "molumen_fern.svg",
      filepath: "plants/molumen_fern.svg"
    }, {
      name: "rg1024_country_landscape_.svg",
      filepath: "plants/rg1024_country_landscape_.svg"
    }, {
      name: "spring.svg",
      filepath: "plants/spring.svg"
    }, {
      name: "treehouse.svg",
      filepath: "plants/treehouse.svg"
    }],
    people: [{
      name: "1300463358.svg",
      filepath: "people/1300463358.svg"
    }, {
      name: "archer.svg",
      filepath: "people/archer.svg"
    }, {
      name: "burglar.svg",
      filepath: "people/burglar.svg"
    }, {
      name: "centaur.svg",
      filepath: "people/centaur.svg"
    }, {
      name: "dwarf.svg",
      filepath: "people/dwarf.svg"
    }, {
      name: "girl_with_lantern.svg",
      filepath: "people/girl_with_lantern.svg"
    }, {
      name: "johnny_automatic_geisha_playing_shamisen.svg",
      filepath: "people/johnny_automatic_geisha_playing_shamisen.svg"
    }, {
      name: "ninja.svg",
      filepath: "people/ninja.svg"
    }],
    animals: [{
      name: "1216139760278927551lemmling_Cartoon_cow.svg",
      filepath: "animals/1216139760278927551lemmling_Cartoon_cow.svg"
    }, {
      name: "1271515256.svg",
      filepath: "animals/1271515256.svg"
    }, {
      name: "Anonymous_Architetto_--_Dinosauri_05.svg",
      filepath: "animals/Anonymous_Architetto_--_Dinosauri_05.svg"
    }, {
      name: "Anonymous_Architetto_--_Dinosauri_06.svg",
      filepath: "animals/Anonymous_Architetto_--_Dinosauri_06.svg"
    }, {
      name: "FunDraw_dot_com_Cartoon_Cat_In_Rainbow_Socks.svg",
      filepath: "animals/FunDraw_dot_com_Cartoon_Cat_In_Rainbow_Socks.svg"
    }, {
      name: "FunDraw_dot_com_Coloring_Book_Octopus.svg",
      filepath: "animals/FunDraw_dot_com_Coloring_Book_Octopus.svg"
    }, {
      name: "Gerald_G_Cartoon_Cat_Sitting.svg",
      filepath: "animals/Gerald_G_Cartoon_Cat_Sitting.svg"
    }, {
      name: "Gerald_G_Cartoon_Cat_Walking.svg",
      filepath: "animals/Gerald_G_Cartoon_Cat_Walking.svg"
    }, {
      name: "JazzyNico_Dino_Simple_T-REX.svg",
      filepath: "animals/JazzyNico_Dino_Simple_T-REX.svg"
    }, {
      name: "Lucky_Beckoning_Cat.svg",
      filepath: "animals/Lucky_Beckoning_Cat.svg"
    }, {
      name: "MrBordello_Chimpzilla.svg",
      filepath: "animals/MrBordello_Chimpzilla.svg"
    }, {
      name: "Nicosmos_Penguin.svg",
      filepath: "animals/Nicosmos_Penguin.svg"
    }, {
      name: "Sicabol_Funny_whale.svg",
      filepath: "animals/Sicabol_Funny_whale.svg"
    }, {
      name: "StudioFibonacci_Cartoon_Pterodactyl.svg",
      filepath: "animals/StudioFibonacci_Cartoon_Pterodactyl.svg"
    }, {
      name: "StudioFibonacci_Cartoon_peacock.svg",
      filepath: "animals/StudioFibonacci_Cartoon_peacock.svg"
    }, {
      name: "StudioFibonacci_Cartoon_triceratops.svg",
      filepath: "animals/StudioFibonacci_Cartoon_triceratops.svg"
    }, {
      name: "antontw_BlackCat_with_White_Sockets.svg",
      filepath: "animals/antontw_BlackCat_with_White_Sockets.svg"
    }, {
      name: "conejo.svg",
      filepath: "animals/conejo.svg"
    }, {
      name: "danz_Flowerhorn_Fish_2.svg",
      filepath: "animals/danz_Flowerhorn_Fish_2.svg"
    }, {
      name: "gth.svg",
      filepath: "animals/gth.svg"
    }, {
      name: "johnny_automatic_butterfly_1.svg",
      filepath: "animals/johnny_automatic_butterfly_1.svg"
    }, {
      name: "johnny_automatic_kitten_with_mittens.svg",
      filepath: "animals/johnny_automatic_kitten_with_mittens.svg"
    }, {
      name: "johnny_automatic_tropical_fish.svg",
      filepath: "animals/johnny_automatic_tropical_fish.svg"
    }, {
      name: "johnny_automatic_zebra.svg",
      filepath: "animals/johnny_automatic_zebra.svg"
    }, {
      name: "kawaiirainbow.svg",
      filepath: "animals/kawaiirainbow.svg"
    }, {
      name: "monster_truck.svg",
      filepath: "animals/monster_truck.svg"
    }, {
      name: "qilin.svg",
      filepath: "animals/qilin.svg"
    }, {
      name: "rg1024_Little_octopus.svg",
      filepath: "animals/rg1024_Little_octopus.svg"
    }, {
      name: "stone-giant.svg",
      filepath: "animals/stone-giant.svg"
    }]
  }
};
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.lib = g.lib || {};
  g.lib.image = {
    defaultCategory: "",
    dir: "image",
    thumbnail: {
      _width: 44,
      _height: 44,
      columns: 4,
      rows: 4,
      padding: 4
    },
    tree: {
      "Your Files": []
    }
  }
})(sketch);

//Pattern library
"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  sketchObj.lib = sketchObj.lib || {};
  sketchObj.lib.defaultPatterns = function() {
    return ("pattern/HybridGenesis/24-original.png pattern/HybridGenesis/3-original.png " +
    "pattern/HybridGenesis/33-original.png pattern/HybridGenesis/38-original.png "+ 
    "pattern/HybridGenesis/42-original.png pattern/HybridGenesis/52-original.png "+
    "pattern/HybridGenesis/55-original.png pattern/HybridGenesis/58-original.png "+
    "pattern/HybridGenesis/61-original.png pattern/HybridGenesis/63-original.png "+
    "pattern/HybridGenesis/64-original.png pattern/HybridGenesis/67-original.png "+
    "pattern/HybridGenesis/69-original.png pattern/HybridGenesis/70-original.png "+
    "pattern/HybridGenesis/84-original.png pattern/HybridGenesis/88-original.png "+
    "pattern/HybridGenesis/95-original.png pattern/Squidfingers/0-original.png "+
    "pattern/Squidfingers/1-original.png pattern/Squidfingers/100-original.png "+
    "pattern/Squidfingers/11-original.png pattern/Squidfingers/113-original.png "+
    "pattern/Squidfingers/116-original.png pattern/Squidfingers/12-original.png "+
    "pattern/Squidfingers/123-original.png pattern/Squidfingers/125-original.png "+
    "pattern/Squidfingers/126-original.png pattern/Squidfingers/129-original.png "+
    "pattern/Squidfingers/138-original.png pattern/Squidfingers/14-original.png "+
    "pattern/Squidfingers/142-original.png pattern/Squidfingers/147-original.png "+
    "pattern/Squidfingers/150-original.png pattern/Squidfingers/151-original.png "+
    "pattern/Squidfingers/154-original.png pattern/Squidfingers/16-original.png "+
    "pattern/Squidfingers/17-original.png pattern/Squidfingers/18-original.png "+
    "pattern/Squidfingers/2-original.png pattern/Squidfingers/20-original.png "+
    "pattern/Squidfingers/21-original.png pattern/Squidfingers/24-original.png "+
    "pattern/Squidfingers/28-original.png pattern/Squidfingers/29-original.png "+
    "pattern/Squidfingers/3-original.png pattern/Squidfingers/30-original.png "+
    "pattern/Squidfingers/31-original.png pattern/Squidfingers/34-original.png "+
    "pattern/Squidfingers/36-original.png pattern/Squidfingers/37-original.png "+
    "pattern/Squidfingers/39-original.png pattern/Squidfingers/4-original.png "+
    "pattern/Squidfingers/40-original.png pattern/Squidfingers/41-original.png "+
    "pattern/Squidfingers/42-original.png pattern/Squidfingers/43-original.png "+
    "pattern/Squidfingers/44-original.png pattern/Squidfingers/46-original.png "+
    "pattern/Squidfingers/50-original.png pattern/Squidfingers/54-original.png "+
    "pattern/Squidfingers/6-original.png pattern/Squidfingers/61-original.png "+
    "pattern/Squidfingers/67-original.png pattern/Squidfingers/69-original.png "+
    "pattern/Squidfingers/71-original.png pattern/Squidfingers/72-original.png "+
    "pattern/Squidfingers/73-original.png pattern/Squidfingers/74-original.png "+
    "pattern/Squidfingers/76-original.png pattern/Squidfingers/78-original.png "+
    "pattern/Squidfingers/79-original.png pattern/Squidfingers/8-original.png "+
    "pattern/Squidfingers/80-original.png pattern/Squidfingers/81-original.png "+
    "pattern/Squidfingers/85-original.png pattern/Squidfingers/86-original.png "+
    "pattern/Squidfingers/89-original.png pattern/Squidfingers/9-original.png "+
    "pattern/Squidfingers/94-original.png pattern/Squidfingers/98-original.png")
      .split(" ");
  }
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.lib = g.lib || {};
  g.lib.defaultGradients = function() {
    return "0.169429711,fff91d8a,0.583,ff7c0ebd,1,ff0000f0 0,ffff0000,0.25,ffffff00,0.5,ffffff00,0.75,ff00ff00,1,ff00ff00 0,ff000000,0.167,ff000000,0.333,ffff0000,0.5,ffff0000,0.667,ffffff00,0.833,ffffff00,1,ffffff00 0,ff9e0142,0.046,ff9e0142,0.091,ffd53e4f,0.136,ffd53e4f,0.182,fff46d43,0.227,fff46d43,0.273,fffdae61,0.318,fffdae61,0.364,fffee08b,0.409,fffee08b,0.455,ffffffbf,0.5,ffffffbf,0.546,ffe6f598,0.591,ffe6f598,0.636,ffabdda4,0.682,ffabdda4,0.727,ff66c2a5,0.773,ff66c2a5,0.818,ff3288bd,0.864,ff3288bd,0.909,ff5e4fa2,0.955,ff5e4fa2,1,ff5e4fa2 0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c 0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0 0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e 0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58 0,ff000000,0.1458854,ff000000,0.16999999999999998,ff000000,0.1941146,ff2b0700,0.21807295,ff560e00,0.2420313,ff8d1e00,0.25648445000000003,ffc42f00,0.2709376,ffd84600,0.2988543,ffec5e00,0.326771,ffde4800,0.3423439,ffd13200,0.3579168,ffe65c11,0.36890635,fffb8623,0.37989589999999995,fffd6919,0.39893229999999996,ffff4d0f,0.41796869999999997,ffc8511f,0.42578119999999997,ff915530,0.43359369999999997,ffc8aa97,0.44140619999999997,ffffffff,0.44921869999999997,ffffffff,0.47153435,ffffffff,0.49384999999999996,ffcdf1ff,0.5277562499999999,ff9be3ff,0.5616625,ff5aa2f1,0.7015583,ff1a61e4,0.7015583,ff1736a4,0.7653604744791199,ff150b64,0.8291626999999999,ff0a0532,0.91458135,ff000000 0.06279181820714999,ff030101,0.1259619,ff0d000a,0.1884619,ff180013,0.25096189999999996,ff65024e,0.31346189999999996,ffb2048a,0.37596189999999996,ffb20356,0.43846189999999996,ffb20323,0.5009619,ffb20319,0.5634619,ffb2030f,0.6259619,ff8d0230,0.6902920499999999,ff680251,0.7546222,ffaf1e4b,0.8247415191252401,fff63b46,0.8750691,ffa71e45,0.95131794026088,ff590245 0,ffffbbd9,0.125,ffdac1df,0.25,ffb6c8e6,0.375,ffc7c9b6,0.55625,ffd9cb86,0.7375,ff819569,0.8609375,ff295f4d,0.984375,ff17423c,1,ff06252c 0,ff15aeeb,0.3333333,ff8157ba,0.50818891461434,ffed008a,0.6717635,fff47961,1,fffbf239 0,ff5b2600,0.5,ff8b5600,1,ffbb8600 0,ff395fa5,0.17,ff51485c,0.277,ff51485c,0.292,ffa47472,0.307,ffa47472,0.332,ff632d02,0.449,ff632d02,0.554,ff494d47,0.695,ff494d47,0.843,ff2e2426,1,ff2e2426 0,ff285f88,0.165,ff9eb9d4,0.33,ff9eb9d4,0.495,fff9947e,0.66,fff9947e,0.83,ffe45d61,1,ffe45d61 0,ff000022,0.175,ff191024,0.28333335,ff322027,0.3916667,ff4c322d,0.5000000499999999,ff664433,0.6083334,ff8a5d3d,0.71666675,ffae7747,0.8250001,ffce9056,1,ffeeaa66 0.125,ff5b49af,0.25,ffa92c77,0.375,fff81040,0.5,fffb5f36,0.58653845,ffffae2d,0.75,ff9f9044,0.797337275,ff40725b 0,ffdb2962,0.3300781,ffe98431,0.54206764604626,fff8df00,0.6728514999999999,ffa4ac33,0.9999998999999999,ff517a67 0,fffe4d01,0.245,fffe7701,0.49,ffffa101,0.745,ff92a470,1,ff26a8e0 0,ff4c36b3,0.15,ffa1207d,0.24734265,fff60a48,0.3446853,fffa7e3b,0.43132864374999996,fffff32e,0.5326573,ff87f874,0.6721152827415,ff0ffebb,0.8,ff26a0be,1,ff3d43c1 0,ffca0020,0.125,ffca0020,0.25,fff4a582,0.375,fff4a582,0.5,ff92c5de,0.625,ff92c5de,0.75,ff0571b0,0.875,ff0571b0,1,ff0571b0 0,ffff67d0,0.036,ffff3e6c,0.072,ffff3e6c,0.127,ffff579e,0.181,ffff579e,0.247,ffff3958,0.313,ffff3958,0.368,ffff3958,0.422,ffff3958,0.482,ffff3958,0.542,ffff3958,0.584,ffff4189,0.627,ffff4189,0.681,ffc41c57,0.735,ffc41c57,0.795,ffff4246,0.855,ffff4246,0.928,ffc2275e,1,ffc2275e 0,ffffff88,0.5,ffffff88,1,ffffff88 0,ffffd65e,0.5,fffeca31,1,fffebf04 0,fff6e6b4,0.5,fff1bb65,1,ffed9017 0,fff6f8f9,0.25,ffedf1f3,0.5,ffe5ebee,0.5,ffdee4e8,0.5,ffd7dee3,0.75,ffe6eaee,1,fff5f7f9 0,ffffffff,0.473029,fff6f6f6,1,ffededed 0,ff499bea,0.5,ff348be7,1,ff207ce5 0,ffa7cfdf,0.5,ff6591b4,1,ff23538a 0,ffa9e4f7,0.5,ff5cccef,1,ff0fb4e7 0,ffd6f9ff,0.5,ffbaf0fc,1,ff9ee8fa 0,fff7fbfc,0.40249,ffd2eaf0,1,ffadd9e4 0,ffaebcbf,0.25,ff8e9999,0.5,ff6e7774,0.5,ff3c423f,0.5,ff0a0e0a,0.75,ff0a0b09,1,ff0a0809 0,ff959595,0.460581,ff4b4b4b,0.502075,ff010101,0.502075,ff272727,0.763485,ff4e4e4e,0.763485,ff343434,1,ff1b1b1b 0,ff7d7e7d,0.5,ff454645,1,ff0e0e0e 0,ffe0f3fa,0.25,ffdcf1fb,0.5,ffd8f0fc,0.5,ffc8e9f9,0.5,ffb8e2f6,0.75,ffb7e0f9,1,ffb6dffd 0,ffb7deed,0.25,ff94d6ee,0.5,ff71ceef,0.5,ff49c1e8,0.5,ff21b4e2,0.75,ff6cc9e7,1,ffb7deed 0,fff85032,0.25,fff45f47,0.5,fff16f5c,0.5,fff34c34,0.5,fff6290c,0.709544,ffee3019,1,ffe73827 0,ffff1a00,0.5,ffff1a00,1,ffff1a00 0,fff2825b,0.25,ffeb6e43,0.5,ffe55b2b,0.5,ffea6638,1,fff07146 0,fffebbbb,0.452282,fffe8b8b,1,ffff5c5c 0,ffebe9f9,0.25,ffe1dcf4,0.5,ffd8d0ef,0.5,ffd3cbed,0.5,ffcec7ec,0.75,ffc7c3eb,1,ffc1bfea 0,fffcecfc,0.25,fffbc9ee,0.5,fffba6e1,0.5,fffc97dc,0.5,fffd89d7,0.75,fffe82d7,1,ffff7cd8 0,ffff0084,0.5,ffff0084,1,ffff0084 0,ffe570e7,0.46888,ffc65cc5,1,ffa849a3 0,ffff5db1,0.5,fff72f96,1,ffef017c 0,ffffb76b,0.25,ffffaf54,0.5,ffffa73d,0.5,ffff911e,0.5,ffff7c00,0.75,ffff7d02,1,ffff7f04 0,ffffa84c,0.5,ffff912c,1,ffff7b0d 0,fffceabb,0.25,fffcdb84,0.5,fffccd4d,0.5,fffac126,0.5,fff8b500,0.75,fff9ca49,1,fffbdf93 0,fff9c667,0.5,fff8ae44,1,fff79621 0,ff627d4d,0.5,ff405c2a,1,ff1f3b08 0,ffd2ff52,0.5,ffb1f34a,1,ff91e842 0,fff3e2c7,0.25,ffdac097,0.5,ffc19e67,0.5,ffbb9559,0.5,ffb68d4c,0.75,ffcfb07f,1,ffe9d4b3 0,ffb5bdc8,0.360996,ff6e7881,1,ff28343b 0,ffd8e0de,0.224066,ffb8c7c4,0.333333,ff99afab,0.333333,ff8da6a1,0.666667,ff829d98,0.666667,ff485553,1,ff0e0e0e 0,ffcedce7,0.5,ff93a3ac,1,ff596a72 0,ffe6f0a3,0.25,ffdceb6d,0.5,ffd2e638,0.5,ffcadf2e,0.5,ffc3d825,0.75,ffcfe434,1,ffdbf043 0,ff9dd53a,0.25,ff9fd544,0.5,ffa1d54f,0.5,ff90cb33,0.5,ff80c217,0.75,ff7ebf10,1,ff7cbc0a 0,ffb4e391,0.25,ff8ad355,0.5,ff61c419,0.5,ff8ad355,1,ffb4e391 0,ffb4ddb4,0.166667,ff83c783,0.333333,ff52b152,0.333333,ff299d29,0.666667,ff008a00,0.666667,ff005700,1,ff002400 0,fff0b7a1,0.25,ffbe7558,0.5,ff8c3310,0.5,ff802a08,0.5,ff752201,0.75,ff9a4827,1,ffbf6e4e 0,ffb3dced,0.25,ff6ecae9,0.5,ff29b8e5,0.5,ff72cce9,1,ffbce0ee 0,ffd0e4f7,0.236515,ff6dade6,0.502075,ff0a77d5,0.502075,ff4899df,1,ff87bcea 0,ffb8e1fc,0.095436,ffa4cdf0,0.253112,ff90bae4,0.253112,ff90bcea,0.502075,ff90bff0,0.502075,ff7db3ea,0.502075,ff6ba8e5,0.8333330000000001,ff94cdf1,1,ffbdf3fd 0,ffefc5ca,0.25,ffe08892,0.5,ffd24b5a,0.5,ffc63948,0.5,ffba2737,0.75,ffd55a68,1,fff18e99 0,ffe5e696,0.5,ffdbdc7b,1,ffd1d360 0,ffcb60b3,0.25,ffc653aa,0.5,ffc146a1,0.5,ffb4238c,0.5,ffa80077,0.75,ffc11b8d,1,ffdb36a4 0,fff2f6f8,0.25,ffe5ebef,0.5,ffd8e1e7,0.5,ffc6d3db,0.5,ffb5c6d0,0.75,ffcadae4,1,ffe0eff9 0,ffcb60b3,0.25,ffbc399b,0.5,ffad1283,0.5,ffc52c97,1,ffde47ac 0,fffeccb1,0.25,fff7a071,0.5,fff17432,0.5,ffed641c,0.5,ffea5507,0.75,fff27532,1,fffb955e 0,ff3b679e,0.25,ff2b88d9,0.5,ff207cca,0.75,ff7db9e8,1,ff7db9e8 0,ffd0e4f7,0.237,ff0a77d5,0.502,ff0a77d5,0.793,ff87bcea,1,ff87bcea 0,ffb4ddb4,0.167,ff52b152,0.333,ff52b152,0.5,ff008a00,0.667,ff008a00,0.833,ff002400,1,ff002400 0,ffcdeb8e,0.5,ffa5c956,1,ffa5c956 0,ffc9de96,0.44,ff398235,1,ff398235 0,fff8ffe8,0.328,ffb7df2d,1,ffb7df2d 0,ffb4e391,0.25,ff61c419,0.5,ff61c419,0.75,ffb4e391,1,ffb4e391 0,ffff670f,0.5,ffff670f,1,ffff670f 0,ffff5db1,0.5,ffef017c,1,ffef017c 0,fffebbbb,0.452,ffff5c5c,1,ffff5c5c"
      .split(" ")
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.lib = g.lib || {};
  g.lib.stamp = {
    defaultCategory: "Butterflies",
    dir: "stamp",
    thumbnail: {
      _width: 44,
      _height: 44,
      columns: 5,
      rows: 5,
      padding: 4
    },
    tree: {
      "Your Files": [],
      "Water Colors": [{
        name: "0-live",
        filepath: "Water Colors/0-live.png"
      }, {
        name: "1-live",
        filepath: "Water Colors/1-live.png"
      }, {
        name: "10-live",
        filepath: "Water Colors/10-live.png"
      }, {
        name: "11-live",
        filepath: "Water Colors/11-live.png"
      }, {
        name: "12-live",
        filepath: "Water Colors/12-live.png"
      }, {
        name: "13-live",
        filepath: "Water Colors/13-live.png"
      }, {
        name: "14-live",
        filepath: "Water Colors/14-live.png"
      }, {
        name: "15-live",
        filepath: "Water Colors/15-live.png"
      }, {
        name: "16-live",
        filepath: "Water Colors/16-live.png"
      }, {
        name: "2-live",
        filepath: "Water Colors/2-live.png"
      }, {
        name: "3-live",
        filepath: "Water Colors/3-live.png"
      }, {
        name: "4-live",
        filepath: "Water Colors/4-live.png"
      }, {
        name: "5-live",
        filepath: "Water Colors/5-live.png"
      }, {
        name: "6-live",
        filepath: "Water Colors/6-live.png"
      }, {
        name: "7-live",
        filepath: "Water Colors/7-live.png"
      }, {
        name: "8-live",
        filepath: "Water Colors/8-live.png"
      }, {
        name: "9-live",
        filepath: "Water Colors/9-live.png"
      }],
      Typogrunge: [{
        name: "0-live",
        filepath: "Typogrunge/0-live.png"
      }, {
        name: "1-live",
        filepath: "Typogrunge/1-live.png"
      }, {
        name: "10-live",
        filepath: "Typogrunge/10-live.png"
      }, {
        name: "11-live",
        filepath: "Typogrunge/11-live.png"
      }, {
        name: "12-live",
        filepath: "Typogrunge/12-live.png"
      }, {
        name: "13-live",
        filepath: "Typogrunge/13-live.png"
      }, {
        name: "14-live",
        filepath: "Typogrunge/14-live.png"
      }, {
        name: "15-live",
        filepath: "Typogrunge/15-live.png"
      }, {
        name: "16-live",
        filepath: "Typogrunge/16-live.png"
      }, {
        name: "17-live",
        filepath: "Typogrunge/17-live.png"
      }, {
        name: "18-live",
        filepath: "Typogrunge/18-live.png"
      }, {
        name: "19-live",
        filepath: "Typogrunge/19-live.png"
      }, {
        name: "2-live",
        filepath: "Typogrunge/2-live.png"
      }, {
        name: "20-live",
        filepath: "Typogrunge/20-live.png"
      }, {
        name: "21-live",
        filepath: "Typogrunge/21-live.png"
      }, {
        name: "22-live",
        filepath: "Typogrunge/22-live.png"
      }, {
        name: "23-live",
        filepath: "Typogrunge/23-live.png"
      }, {
        name: "3-live",
        filepath: "Typogrunge/3-live.png"
      }, {
        name: "4-live",
        filepath: "Typogrunge/4-live.png"
      }, {
        name: "5-live",
        filepath: "Typogrunge/5-live.png"
      }, {
        name: "6-live",
        filepath: "Typogrunge/6-live.png"
      }, {
        name: "7-live",
        filepath: "Typogrunge/7-live.png"
      }, {
        name: "8-live",
        filepath: "Typogrunge/8-live.png"
      }, {
        name: "9-live",
        filepath: "Typogrunge/9-live.png"
      }],
      Tizzape: [{
        name: "0-live",
        filepath: "Tizzape/0-live.png"
      }, {
        name: "1-live",
        filepath: "Tizzape/1-live.png"
      }, {
        name: "10-live",
        filepath: "Tizzape/10-live.png"
      }, {
        name: "11-live",
        filepath: "Tizzape/11-live.png"
      }, {
        name: "12-live",
        filepath: "Tizzape/12-live.png"
      }, {
        name: "13-live",
        filepath: "Tizzape/13-live.png"
      }, {
        name: "14-live",
        filepath: "Tizzape/14-live.png"
      }, {
        name: "15-live",
        filepath: "Tizzape/15-live.png"
      }, {
        name: "16-live",
        filepath: "Tizzape/16-live.png"
      }, {
        name: "17-live",
        filepath: "Tizzape/17-live.png"
      }, {
        name: "18-live",
        filepath: "Tizzape/18-live.png"
      }, {
        name: "19-live",
        filepath: "Tizzape/19-live.png"
      }, {
        name: "2-live",
        filepath: "Tizzape/2-live.png"
      }, {
        name: "3-live",
        filepath: "Tizzape/3-live.png"
      }, {
        name: "4-live",
        filepath: "Tizzape/4-live.png"
      }, {
        name: "5-live",
        filepath: "Tizzape/5-live.png"
      }, {
        name: "6-live",
        filepath: "Tizzape/6-live.png"
      }, {
        name: "7-live",
        filepath: "Tizzape/7-live.png"
      }, {
        name: "8-live",
        filepath: "Tizzape/8-live.png"
      }, {
        name: "9-live",
        filepath: "Tizzape/9-live.png"
      }],
      "Simple Smudges": [{
        name: "0-live",
        filepath: "Simple Smudges/0-live.png"
      }, {
        name: "1-live",
        filepath: "Simple Smudges/1-live.png"
      }, {
        name: "10-live",
        filepath: "Simple Smudges/10-live.png"
      }, {
        name: "11-live",
        filepath: "Simple Smudges/11-live.png"
      }, {
        name: "12-live",
        filepath: "Simple Smudges/12-live.png"
      }, {
        name: "13-live",
        filepath: "Simple Smudges/13-live.png"
      }, {
        name: "2-live",
        filepath: "Simple Smudges/2-live.png"
      }, {
        name: "3-live",
        filepath: "Simple Smudges/3-live.png"
      }, {
        name: "4-live",
        filepath: "Simple Smudges/4-live.png"
      }, {
        name: "5-live",
        filepath: "Simple Smudges/5-live.png"
      }, {
        name: "6-live",
        filepath: "Simple Smudges/6-live.png"
      }, {
        name: "7-live",
        filepath: "Simple Smudges/7-live.png"
      }, {
        name: "8-live",
        filepath: "Simple Smudges/8-live.png"
      }, {
        name: "9-live",
        filepath: "Simple Smudges/9-live.png"
      }],
      Retro: [{
        name: "0-live",
        filepath: "Retro/0-live.png"
      }, {
        name: "1-live",
        filepath: "Retro/1-live.png"
      }, {
        name: "10-live",
        filepath: "Retro/10-live.png"
      }, {
        name: "11-live",
        filepath: "Retro/11-live.png"
      }, {
        name: "12-live",
        filepath: "Retro/12-live.png"
      }, {
        name: "13-live",
        filepath: "Retro/13-live.png"
      }, {
        name: "14-live",
        filepath: "Retro/14-live.png"
      }, {
        name: "15-live",
        filepath: "Retro/15-live.png"
      }, {
        name: "16-live",
        filepath: "Retro/16-live.png"
      }, {
        name: "17-live",
        filepath: "Retro/17-live.png"
      }, {
        name: "18-live",
        filepath: "Retro/18-live.png"
      }, {
        name: "19-live",
        filepath: "Retro/19-live.png"
      }, {
        name: "2-live",
        filepath: "Retro/2-live.png"
      }, {
        name: "20-live",
        filepath: "Retro/20-live.png"
      }, {
        name: "21-live",
        filepath: "Retro/21-live.png"
      }, {
        name: "22-live",
        filepath: "Retro/22-live.png"
      }, {
        name: "23-live",
        filepath: "Retro/23-live.png"
      }, {
        name: "24-live",
        filepath: "Retro/24-live.png"
      }, {
        name: "25-live",
        filepath: "Retro/25-live.png"
      }, {
        name: "26-live",
        filepath: "Retro/26-live.png"
      }, {
        name: "27-live",
        filepath: "Retro/27-live.png"
      }, {
        name: "28-live",
        filepath: "Retro/28-live.png"
      }, {
        name: "29-live",
        filepath: "Retro/29-live.png"
      }, {
        name: "3-live",
        filepath: "Retro/3-live.png"
      }, {
        name: "4-live",
        filepath: "Retro/4-live.png"
      }, {
        name: "5-live",
        filepath: "Retro/5-live.png"
      }, {
        name: "6-live",
        filepath: "Retro/6-live.png"
      }, {
        name: "7-live",
        filepath: "Retro/7-live.png"
      }, {
        name: "8-live",
        filepath: "Retro/8-live.png"
      }, {
        name: "9-live",
        filepath: "Retro/9-live.png"
      }],
      Leafs: [{
        name: "0-live",
        filepath: "Leafs/0-live.png"
      }, {
        name: "1-live",
        filepath: "Leafs/1-live.png"
      }, {
        name: "10-live",
        filepath: "Leafs/10-live.png"
      }, {
        name: "11-live",
        filepath: "Leafs/11-live.png"
      }, {
        name: "12-live",
        filepath: "Leafs/12-live.png"
      }, {
        name: "13-live",
        filepath: "Leafs/13-live.png"
      }, {
        name: "14-live",
        filepath: "Leafs/14-live.png"
      }, {
        name: "15-live",
        filepath: "Leafs/15-live.png"
      }, {
        name: "16-live",
        filepath: "Leafs/16-live.png"
      }, {
        name: "17-live",
        filepath: "Leafs/17-live.png"
      }, {
        name: "18-live",
        filepath: "Leafs/18-live.png"
      }, {
        name: "19-live",
        filepath: "Leafs/19-live.png"
      }, {
        name: "2-live",
        filepath: "Leafs/2-live.png"
      }, {
        name: "20-live",
        filepath: "Leafs/20-live.png"
      }, {
        name: "21-live",
        filepath: "Leafs/21-live.png"
      }, {
        name: "22-live",
        filepath: "Leafs/22-live.png"
      }, {
        name: "23-live",
        filepath: "Leafs/23-live.png"
      }, {
        name: "24-live",
        filepath: "Leafs/24-live.png"
      }, {
        name: "25-live",
        filepath: "Leafs/25-live.png"
      }, {
        name: "26-live",
        filepath: "Leafs/26-live.png"
      }, {
        name: "27-live",
        filepath: "Leafs/27-live.png"
      }, {
        name: "28-live",
        filepath: "Leafs/28-live.png"
      }, {
        name: "29-live",
        filepath: "Leafs/29-live.png"
      }, {
        name: "3-live",
        filepath: "Leafs/3-live.png"
      }, {
        name: "30-live",
        filepath: "Leafs/30-live.png"
      }, {
        name: "31-live",
        filepath: "Leafs/31-live.png"
      }, {
        name: "32-live",
        filepath: "Leafs/32-live.png"
      }, {
        name: "33-live",
        filepath: "Leafs/33-live.png"
      }, {
        name: "34-live",
        filepath: "Leafs/34-live.png"
      }, {
        name: "35-live",
        filepath: "Leafs/35-live.png"
      }, {
        name: "36-live",
        filepath: "Leafs/36-live.png"
      }, {
        name: "37-live",
        filepath: "Leafs/37-live.png"
      }, {
        name: "38-live",
        filepath: "Leafs/38-live.png"
      }, {
        name: "39-live",
        filepath: "Leafs/39-live.png"
      }, {
        name: "4-live",
        filepath: "Leafs/4-live.png"
      }, {
        name: "40-live",
        filepath: "Leafs/40-live.png"
      }, {
        name: "41-live",
        filepath: "Leafs/41-live.png"
      }, {
        name: "42-live",
        filepath: "Leafs/42-live.png"
      }, {
        name: "43-live",
        filepath: "Leafs/43-live.png"
      }, {
        name: "44-live",
        filepath: "Leafs/44-live.png"
      }, {
        name: "45-live",
        filepath: "Leafs/45-live.png"
      }, {
        name: "46-live",
        filepath: "Leafs/46-live.png"
      }, {
        name: "47-live",
        filepath: "Leafs/47-live.png"
      }, {
        name: "48-live",
        filepath: "Leafs/48-live.png"
      }, {
        name: "49-live",
        filepath: "Leafs/49-live.png"
      }, {
        name: "5-live",
        filepath: "Leafs/5-live.png"
      }, {
        name: "6-live",
        filepath: "Leafs/6-live.png"
      }, {
        name: "7-live",
        filepath: "Leafs/7-live.png"
      }, {
        name: "8-live",
        filepath: "Leafs/8-live.png"
      }, {
        name: "9-live",
        filepath: "Leafs/9-live.png"
      }],
      Footprints: [{
        name: "0-live",
        filepath: "Footprints/0-live.png"
      }, {
        name: "1-live",
        filepath: "Footprints/1-live.png"
      }, {
        name: "10-live",
        filepath: "Footprints/10-live.png"
      }, {
        name: "11-live",
        filepath: "Footprints/11-live.png"
      }, {
        name: "12-live",
        filepath: "Footprints/12-live.png"
      }, {
        name: "13-live",
        filepath: "Footprints/13-live.png"
      }, {
        name: "14-live",
        filepath: "Footprints/14-live.png"
      }, {
        name: "15-live",
        filepath: "Footprints/15-live.png"
      }, {
        name: "16-live",
        filepath: "Footprints/16-live.png"
      }, {
        name: "17-live",
        filepath: "Footprints/17-live.png"
      }, {
        name: "2-live",
        filepath: "Footprints/2-live.png"
      }, {
        name: "3-live",
        filepath: "Footprints/3-live.png"
      }, {
        name: "4-live",
        filepath: "Footprints/4-live.png"
      }, {
        name: "5-live",
        filepath: "Footprints/5-live.png"
      }, {
        name: "6-live",
        filepath: "Footprints/6-live.png"
      }, {
        name: "7-live",
        filepath: "Footprints/7-live.png"
      }, {
        name: "8-live",
        filepath: "Footprints/8-live.png"
      }, {
        name: "9-live",
        filepath: "Footprints/9-live.png"
      }],
      Flowers: [{
        name: "0-live",
        filepath: "Flowers/0-live.png"
      }, {
        name: "1-live",
        filepath: "Flowers/1-live.png"
      }, {
        name: "10-live",
        filepath: "Flowers/10-live.png"
      }, {
        name: "11-live",
        filepath: "Flowers/11-live.png"
      }, {
        name: "12-live",
        filepath: "Flowers/12-live.png"
      }, {
        name: "13-live",
        filepath: "Flowers/13-live.png"
      }, {
        name: "14-live",
        filepath: "Flowers/14-live.png"
      }, {
        name: "15-live",
        filepath: "Flowers/15-live.png"
      }, {
        name: "16-live",
        filepath: "Flowers/16-live.png"
      }, {
        name: "17-live",
        filepath: "Flowers/17-live.png"
      }, {
        name: "18-live",
        filepath: "Flowers/18-live.png"
      }, {
        name: "19-live",
        filepath: "Flowers/19-live.png"
      }, {
        name: "2-live",
        filepath: "Flowers/2-live.png"
      }, {
        name: "20-live",
        filepath: "Flowers/20-live.png"
      }, {
        name: "21-live",
        filepath: "Flowers/21-live.png"
      }, {
        name: "22-live",
        filepath: "Flowers/22-live.png"
      }, {
        name: "23-live",
        filepath: "Flowers/23-live.png"
      }, {
        name: "24-live",
        filepath: "Flowers/24-live.png"
      }, {
        name: "25-live",
        filepath: "Flowers/25-live.png"
      }, {
        name: "26-live",
        filepath: "Flowers/26-live.png"
      }, {
        name: "27-live",
        filepath: "Flowers/27-live.png"
      }, {
        name: "3-live",
        filepath: "Flowers/3-live.png"
      }, {
        name: "4-live",
        filepath: "Flowers/4-live.png"
      }, {
        name: "5-live",
        filepath: "Flowers/5-live.png"
      }, {
        name: "6-live",
        filepath: "Flowers/6-live.png"
      }, {
        name: "7-live",
        filepath: "Flowers/7-live.png"
      }, {
        name: "8-live",
        filepath: "Flowers/8-live.png"
      }, {
        name: "9-live",
        filepath: "Flowers/9-live.png"
      }],
      Doodles: [{
        name: "0-live",
        filepath: "Doodles/0-live.png"
      }, {
        name: "1-live",
        filepath: "Doodles/1-live.png"
      }, {
        name: "10-live",
        filepath: "Doodles/10-live.png"
      }, {
        name: "2-live",
        filepath: "Doodles/2-live.png"
      }, {
        name: "3-live",
        filepath: "Doodles/3-live.png"
      }, {
        name: "4-live",
        filepath: "Doodles/4-live.png"
      }, {
        name: "5-live",
        filepath: "Doodles/5-live.png"
      }, {
        name: "6-live",
        filepath: "Doodles/6-live.png"
      }, {
        name: "7-live",
        filepath: "Doodles/7-live.png"
      }, {
        name: "8-live",
        filepath: "Doodles/8-live.png"
      }, {
        name: "9-live",
        filepath: "Doodles/9-live.png"
      }],
      Butterflies: [{
        name: "0-live",
        filepath: "Butterflies/0-live.png"
      }, {
        name: "1-live",
        filepath: "Butterflies/1-live.png"
      }, {
        name: "10-live",
        filepath: "Butterflies/10-live.png"
      }, {
        name: "11-live",
        filepath: "Butterflies/11-live.png"
      }, {
        name: "12-live",
        filepath: "Butterflies/12-live.png"
      }, {
        name: "13-live",
        filepath: "Butterflies/13-live.png"
      }, {
        name: "14-live",
        filepath: "Butterflies/14-live.png"
      }, {
        name: "15-live",
        filepath: "Butterflies/15-live.png"
      }, {
        name: "16-live",
        filepath: "Butterflies/16-live.png"
      }, {
        name: "17-live",
        filepath: "Butterflies/17-live.png"
      }, {
        name: "18-live",
        filepath: "Butterflies/18-live.png"
      }, {
        name: "19-live",
        filepath: "Butterflies/19-live.png"
      }, {
        name: "2-live",
        filepath: "Butterflies/2-live.png"
      }, {
        name: "20-live",
        filepath: "Butterflies/20-live.png"
      }, {
        name: "21-live",
        filepath: "Butterflies/21-live.png"
      }, {
        name: "22-live",
        filepath: "Butterflies/22-live.png"
      }, {
        name: "23-live",
        filepath: "Butterflies/23-live.png"
      }, {
        name: "24-live",
        filepath: "Butterflies/24-live.png"
      }, {
        name: "25-live",
        filepath: "Butterflies/25-live.png"
      }, {
        name: "26-live",
        filepath: "Butterflies/26-live.png"
      }, {
        name: "3-live",
        filepath: "Butterflies/3-live.png"
      }, {
        name: "4-live",
        filepath: "Butterflies/4-live.png"
      }, {
        name: "5-live",
        filepath: "Butterflies/5-live.png"
      }, {
        name: "6-live",
        filepath: "Butterflies/6-live.png"
      }, {
        name: "7-live",
        filepath: "Butterflies/7-live.png"
      }, {
        name: "8-live",
        filepath: "Butterflies/8-live.png"
      }, {
        name: "9-live",
        filepath: "Butterflies/9-live.png"
      }]
    }
  };
  g.lib.stamp.credits = {
    Butterflies: {
      email: "bulletproof.cupidx@gmail.com",
      url: "http://dead-brushes.deviantart.com/art/ps7-butterfly-brushes-61623697",
      name: "dead-brushes"
    },
    Doodles: {
      email: "punksafetypin@gmail.com",
      url: "http://punksafetypin.deviantart.com/art/Brush-Set-21-Boney-Doodles-57365483",
      name: "punksafetypin"
    },
    Flowers: {
      email: "ir@hawksmont.com",
      url: "http://hawksmont.com/",
      name: "hawksmont"
    },
    Footprints: {
      email: "jonas@rognemedia.no",
      url: "http://chain.deviantart.com/art/Footprint-brushes-60108797",
      name: "chain"
    },
    Leafs: {
      email: "ir@hawksmont.com",
      url: "http://hawksmont.com/",
      name: "hawksmont"
    },
    Retro: {
      email: "vivekdhage@gmail.com",
      url: "http://vwake.deviantart.com/art/Retr0-Brushes-1689219",
      name: "vwake"
    },
    "Simple Smudges": {
      email: "p.szczepanski@gmail.com",
      url: "http://env1ro.deviantart.com/art/SimpleSmudges-1-Brushes-Pack-52089760",
      name: "env1ro"
    },
    Tizzape: {
      email: "services@dirt2.com",
      url: "http://keepwaiting.deviantart.com/art/Tizzape-Tape-Brushes-29459997",
      name: "keepwaiting"
    },
    Typogrunge: {
      email: "",
      url: "http://scully7491.deviantart.com/art/Typographic-Grunge-Brushes-30565921",
      name: "scully7491"
    },
    "Water Colors": {
      email: "p.szczepanski@gmail.com",
      url: "http://env1ro.deviantart.com/art/WaterColor-Reloaded-98294189",
      name: "env1ro"
    }
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.lib = g.lib || {};
  g.lib.getTemplateData = function() {
    g.util.cloneInto({
      defaultCategory: "tutorial",
      dir: "template",
      thumbnail: {
        _width: 44,
        _height: 44,
        columns: 4,
        rows: 4,
        padding: 4
      },
      tree: {
        "Your Files": []
      }
    }, g.lib.template);
    g.lib.init("template");
    g.lib.getTemplateData = void 0
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.lib && (sketch.lib = {});
sketch.lib.text = {
  defaultCategory: "Display",
  dir: "font",
  thumbnail: {
    _width: 118,
    _height: 30,
    columns: 2,
    rows: 6,
    padding: 0
  },
  tree: {
    "Your Files": [],
    "Sans Serif": [{
      name: "Arial",
      filepath: ""
    }, {
      name: "Abel",
      filepath: "abel/Abel-Regular"
    }, {
      name: "Acme",
      filepath: "acme/Acme-Regular"
    }, {
      name: "Droid Sans",
      filepath: "droidsans/DroidSans"
    }, {
      name: "Economica",
      filepath: "economica/Economica-Regular"
    }, {
      name: "Lato",
      filepath: "lato/Lato-Regular"
    }, {
      name: "Open Sans",
      filepath: "opensans/OpenSans-Regular"
    }, {
      name: "Oswald",
      filepath: "oswald/Oswald-Regular"
    }, {
      name: "PT Sans Narrow",
      filepath: "ptsansnarrow/PT_Sans-Narrow-Web-Regular"
    }, {
      name: "PT Sans",
      filepath: "ptsans/PT_Sans-Web-Regular"
    }, {
      name: "PT Mono",
      filepath: "ptmono/PTM55FT"
    }, {
      name: "Ubuntu Condensed",
      filepath: "ubuntucondensed/UbuntuCondensed-Regular"
    }],
    Serif: [{
      name: "Andada",
      filepath: "andada/Andada-Regular"
    }, {
      name: "Droid Serif",
      filepath: "droidserif/DroidSerif"
    }, {
      name: "Gentium Book Basic",
      filepath: "gentiumbookbasic/GenBkBasR"
    }, {
      name: "Josefin Slab",
      filepath: "josefinsans/JosefinSans-Regular"
    }, {
      name: "IM Fell English",
      filepath: "imfellenglish/IMFeENrm28P"
    }, {
      name: "Merriweather",
      filepath: "merriweather/Merriweather-Regular"
    }, {
      name: "Old Standard TT",
      filepath: "oldstandardtt/OldStandard-Regular"
    }, {
      name: "PT Serif",
      filepath: "ptserif/PT_Serif-Web-Regular"
    }, {
      name: "Playfair Display",
      filepath: "playfairdisplay/PlayfairDisplay-Regular"
    }, {
      name: "Vollkorn",
      filepath: "vollkorn/Vollkorn-Regular"
    }],
    Display: [{
      name: "Abril Fatface",
      filepath: "abrilfatface/AbrilFatface-Regular"
    }, {
      name: "Bubblegum Sans",
      filepath: "bubblegumsans/BubblegumSans-Regular"
    }, {
      name: "Cabin Sketch",
      filepath: "cabinsketch/CabinSketch-Regular"
    }, {
      name: "Chelsea Market",
      filepath: "chelseamarket/ChelseaMarket-Regular"
    }, {
      name: "Codystar",
      filepath: "codystar/Codystar-Regular"
    }, {
      name: "Comfortaa",
      filepath: "comfortaa/Comfortaa-Regular"
    }, {
      name: "Emilys Candy",
      filepath: "emilyscandy/EmilysCandy-Regular"
    }, {
      name: "Gravitas One",
      filepath: "gravitasone/GravitasOne"
    }, {
      name: "Jolly Lodger",
      filepath: "jollylodger/JollyLodger-Regular"
    }, {
      name: "Lobster",
      filepath: "lobster/Lobster"
    }, {
      name: "Londrina Shadow",
      filepath: "londrinashadow/LondrinaShadow-Regular"
    }, {
      name: "Londrina Solid",
      filepath: "londrinasolid/LondrinaSolid-Regular"
    }, {
      name: "Love Ya Like a Sister",
      filepath: "loveyalikeasister/LoveYaLikeASister"
    }, {
      name: "Mystery Quest",
      filepath: "mysteryquest/MysteryQuest-Regular"
    }, {
      name: "Supermercado One",
      filepath: "supermercadoone/SupermercadoOne-Regular"
    }],
    Handwriting: [{
      name: "Aladin",
      filepath: "aladin/Aladin-Regular"
    }, {
      name: "Amatic SC",
      filepath: "amaticsc/AmaticSC-Regular"
    }, {
      name: "Architects Daughter",
      filepath: "architectsdaughter/ArchitectsDaughter"
    }, {
      name: "Arizonia",
      filepath: "arizonia/Arizonia-Regular"
    }, {
      name: "Bilbo Swash Caps",
      filepath: "bilboswashcaps/BilboSwashCaps-Regular"
    }, {
      name: "Delius Swash Caps",
      filepath: "deliusswashcaps/DeliusSwashCaps-Regular"
    }, {
      name: "Italianno",
      filepath: "italiana/Italiana-Regular"
    }, {
      name: "Maiden Orange",
      filepath: "maidenorange/MaidenOrange"
    }, {
      name: "Ruge Boogie",
      filepath: "rugeboogie/RugeBoogie-Regular"
    }]
  }
};
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Scene = function(f, d) {
    var a = this,
      e = f.assets,
      q = f.detect,
      l = f.feature,
      b = f.lang,
      c = d.contexts,
      p = f.net,
      w = d.render,
      m = f.style,
      u = d.toolkit,
      t = f.ui,
      h = f.util,
      r = f.vector;
    a.push = function(b, h) {
      h && a.decompress(b);
      a.children.push(b);
      a.childrenById[b.id] = b
    };
    a.pushAt = function(b, h, c) {
      c && a.decompress(b);
      a.children.splice(h, 0, b);
      a.childrenById[b.id] = b
    };
    a.shiftAt = function(b) {
      var h = a.children[b].id;
      a.children.splice(b, 1);
      delete a.childrenById[h]
    };
    a.setData = function(b, h) {
      a.children = [];
      a.childrenById = {};
      for (var c = 0; c < b.length; c++) a.push(b[c], h)
    };
    a.addObject = function(b, c) {
      c = c || {};
      if (!1 === a.ensureMaxCopies(b)) a.deselectAll();
      else {
        b = h.cloneInto(b, {
          id: a.createId(c.id, c.inGenesis, "id"),
          toolkitId: u.getToolkitId(b.type),
          zIndex: a.children.length,
          bbox: {
            x: 0,
            y: 0,
            width: 0,
            height: 0,
            rotate: 0,
            scale: {
              x: 1,
              y: 1
            }
          }
        });
        var d = b.bbox;
        void 0 === d.viewBox && (d.viewBox = [0, 0, d.width, d.height]);
        a.ensureStickyIndex(b);
        a.push(b);
        a.sort();
        a.reindex();
        u.ensureToolkit(b);
        u.loadResource(b, B, B);
        return b
      }
    };
    a.removeById =
      function(b, h) {
        var c = a.getById(b);
        c && a.removeByIndex(c.zIndex, h);
        return a
      };
    a.remove = a.removeByIndex = function(b, c) {
      c = !1 !== c;
      switch (typeof b) {
        case "undefined":
          return a;
        case "number":
          var k = {};
          k[b] = !0;
          b = k;
          break;
        default:
          b = h.clone(b)
      }
      for (var k = {}, e = [], r = [], s = a.selection.items, p = a.children
          .length, m = 0; m < p; m++) {
        var v = a.children[m];
        b[m] ? (c && v.id < h.INFINITY_MINUS_8bit && r.push(a.clone(v)),
          w.cache.clean(v.hash), d.scene.setDirtyPixelData(v)) : (e.push(
          v), k[v.id] = v);
        s[v.zIndex] && a.selection.deselect(v.zIndex)
      }
      c && r.length &&
        (f.on.layerRemove && (s = a.selection.toLayers(b), f.on.layerRemove(
          s)), d.history && d.history.store({
          cmd: "remove",
          icon: "infinity",
          name: "remove-objects",
          data: r
        }));
      a.children = e;
      a.childrenById = k;
      a.reindex();
      a.updateSelectionInfo();
      return a
    };
    a.removeByName = function(b, h) {
      var c = a.getByName(b);
      c.length && (c = a.selection.fromLayers(c), a.removeByIndex(c,
        h));
      return a
    };
    a.removeSelection = function(b, h) {
      b = b || a.selection.items;
      a.removeByIndex(b, h);
      a.deselectAll();
      return a
    };
    a.removeAll = function(b) {
      var h = a.selection.fromLayers(a.children);
      a.removeByIndex(h, b);
      a.deselectAll();
      return a
    };
    a.clear = function(b) {
      b = !1 !== b;
      h.Canvas.blip(c.active);
      h.Canvas.clear(c.layer0);
      a.removeAll(b);
      return a
    };
    a.reset = function(b) {
      a.deselectAll();
      a.children = [];
      a.childrenById = {};
      d.history && d.history.resetActionHistory();
      d.render && d.render("doc.scene.reset");
      if (b || f.fromServer) return a;
      p.dataChannel && l.stream.sketch && !b && p.dataChannel.send([
        "scene.reset"
      ]);
      return a
    };
    a.deselectById = function(b) {
      return (b = a.getById(b)) ? a.deselectByIdx(b.zIndex) : a
    };
    a.deselect = a.deselectByIdx =
      function(b, h) {
        var c = a.selection;
        if (c.length) {
          var d = [];
          if ("object" === typeof b)
            if (c = b, Array.isArray(c))
              for (var e = 0; e < c.length; e++) b = c[e], k(b, !1) && d.push(
                b);
            else
              for (b in c) k(b, !1) && d.push(b);
          else k(b) && d.push(b), b === c.idx && 1 < c.length && (a.controls = []);
          g(d)
        }
        return a
      };
    var k = function(b) {
      var h = a.selection;
      return h.items[b] ? (h.deselect(b), !0) : !1
    };
    a.deselectByName = function(b) {
      var h = a.selection;
      h.length && (b = a.getByName(b), b.length && (h = h.fromLayers(
        b), a.deselectByIdx(h)));
      return a
    };
    a.deselectAll = function() {
      var b =
        a.selection;
      b.length && (b = Object.keys(b.items), u.area.hide && u.area.hide(),
        a.selection.reset(), a.hovered.reset(), a.controls = [], g(b)
      );
      return a
    };
    a.selectById = function(b, h) {
      var c = a.getById(b);
      c && a.selectByIdx(c.zIndex, h);
      return a
    };
    a.select = function(b, h) {
      return "object" === typeof b ? isFinite(b.zIndex) ? a.selectByIdx(
        b.zIndex, h) : v(b, h) : a.selectByIdx(b, h)
    };
    a.selectByIdx = function(b, h) {
      l.vector.edit && ("object" === typeof b ? v(b, h) : a.children[
        b] && x(b, h) && A([b]));
      return a
    };
    var v = function(b, h) {
        h && a.deselectAll();
        var c = [];
        if (Array.isArray(b))
          for (var d = 0; d < b.length; d++) {
            var k = b[d];
            x(k, !1) && c.push(k)
          } else
            for (k in b) x(k, !1) && c.push(k);
        A(c)
      },
      x = function(b, h) {
        var c = a.children[b];
        if (!1 === c.selectable) return !1;
        c.dirtyControl = !0;
        var k = a.selection;
        if (!1 !== h) {
          d.tool.type !== c.type && (a.toolkit && (a.toolkit.disable(),
            delete a.toolkit), "text" === c.type && c.toolkit && (a.toolkit =
            c.toolkit, a.toolkit.enable()));
          if (1 === k.length && k.items[b]) return !1;
          a.deselectAll();
          k.select(b);
          l.style.toGlobalOnSelect && m.cloneToGlobal(c);
          t.setToolMenu &&
            t.setToolMenu(c.type, !0)
        } else {
          if (k.items[b]) return !1;
          k.select(b);
          1 < k.length && (a.controls = [])
        }
        return !0
      };
    a.selectByName = function(b, h) {
      var c = a.getByName(b);
      c.length ? (c = a.selection.fromLayers(c), a.selectByIdx(c, h)) :
        h && a.deselectAll();
      return a
    };
    a.selectAll = function() {
      s();
      return a
    };
    a.selectInverse = function() {
      s(!0);
      return a
    };
    var s = function(b) {
      if (l.vector.edit) {
        var h = a.selection.items,
          c = a.children,
          d = c.length;
        a.controls = [];
        for (var k = [], e = [], r = 0; r < d; r++) !1 !== c[r].selectable &&
          (b && h[r] ? (a.selection.deselect(r),
            e.push(r)) : (a.selection.select(r), k.push(r)));
        a.handleSelection();
        A(k);
        g(e)
      }
    };
    a.getById = function(b) {
      return a.childrenById[b]
    };
    a.getByIndex = function(b) {
      return a.children[b]
    };
    var z = function(b) {
      return function(h) {
        for (var c = [], d = a.children, k = 0; k < d.length; k++) {
          var e = d[k];
          void 0 !== e[b] && e[b] === h && c.push(e)
        }
        return c
      }
    };
    a.getByGroup = new z("groupId");
    a.getByName = new z("name");
    a.getBySrc = new z("src");
    a.getLast = function() {
      return a.children[a.children.length - 1]
    };
    a.getFocused = function() {
      return a.selection.item ||
        a.hovered.item
    };
    a.getOneSelected = function() {
      if (a.selection.item) return a.selection.item;
      for (var b in a.selection.items) return a.children[b]
    };
    a.getHovered = function() {
      return a.hovered.item
    };
    a.getSelected = function() {
      return a.selection.item
    };
    a.getSelection = function(b, h) {
      return a.selection.toLayers(b, h)
    };
    a.getCollisions = function(b, h) {
      h = h || {};
      var c = [],
        d = r.Polygon.SAT,
        k = b.trx2D;
      if (k)
        for (var e = [k.nw, k.ne, k.se, k.sw], s = h.objects || a.children,
            f = s.length, p = isFinite(h.idx) ? h.idx : f - 1; p < f; p++) {
          var m = s[p];
          m.id !==
            b.id && m.trx2D && (k = m.trx2D, d(e, [k.nw, k.ne, k.se, k.sw]) &&
              (h.fn ? h.fn(m) : c.push(m)))
        }
      return c
    };
    a.setDirtyPixelData = function(b, h) {
      b && l.canvas.glfx && (b.usePixelData && (b.dirtyCache = !0), a
        .getCollisions(b, {
          idx: isFinite(h) ? h : b.zIndex,
          fn: function(a) {
            a.usePixelData && (a.dirtyCache = !0)
          }
        }))
    };
    var y = function(b, h) {
      return function(c) {
        c = c || a.selection.items;
        for (var d in c)
          if (c = a.children[d]) c[b] = h;
        return a
      }
    };
    a.traverse = function(b, c, d) {
      var k = a.children;
      "function" === typeof b ? h.each(k, b) : (new y(b, c))(d || a.selection
        .items)
    };
    a.setDirtyCache = new y("dirtyCache", !0);
    a.setDirtyControl = new y("dirtyControl", !0);
    a.setDirtyTransform = new y("dirtyTransform", !0);
    a.setDirtyBounds = new y("inbounds", void 0);
    var B = function(b) {
        f.on.layerAdd && (a.updateTransform(b), f.on.layerAdd(b))
      },
      A = function(b) {
        b.length && (a.updateSelectionInfo(), f.on.select && (b = d.selection
          .toLayers(b), b.length && f.on.select(b)))
      },
      g = function(b) {
        b.length && (a.updateSelectionInfo(), f.on.deselect && (b = d.selection
          .toLayers(b), b.length && f.on.deselect(b)))
      };
    a.updateSelectionInfo =
      function() {
        if ("undefined" === typeof document) return a;
        var h = document.querySelector(".sk-selection-count");
        if (h) {
          var c = a.selection;
          if (c.length) {
            var d = b.translate("select-tool-count", c.length) + ":",
              k = {};
            c.traverse(function(a) {
              a = a.type;
              k[a] || (k[a] = 0);
              k[a]++
            });
            var d = d + '<div style="margin: 5px 0 0 25px;">',
              e;
            for (e in k) var c = k[e],
              r = 1 < c ? "s" : "",
              s = b.translate(e),
              d = d + (c + " " + s + " layer" + r + "<br>");
            d += "</div>"
          } else d = b.translate("select-tool-message");
          h.innerHTML = d
        }
        return a
      };
    a.handleSelection = function() {
      if (l.vector.edit) {
        var b =
          l.tools.select.useConfigure,
          h = a.selection,
          c = h.length;
        if (0 === c) b && t.configureBuild();
        else if (1 === c)(c = h.item) ? (b && t.configureBuild(c.type),
            "text" === c.type && u.text.textarea && (u.text.setContent(c
              .content), c.toolkit.updateObjectSize())) : l.debug &&
          console.warn(h.idx, h.items);
        else if (a.controls = [], b) {
          var d, b = !0,
            k;
          for (k in h.items)
            if (c = a.children[k])
              if (d = d || c.type, d !== c.type) {
                b = !1;
                break
              }
          t.configureBuild(b ? d : void 0)
        }
      }
      return a
    };
    var F = /[^a-zA-Z]/g,
      E = /[^0-9]/g,
      D = function(a, b) {
        return a.zIndex > b.zIndex ? 1 : -1
      },
      P =
      function(a, b) {
        return a.id > b.id ? 1 : -1
      },
      G = function(a, b) {
        var h = a.name || "",
          c = b.name || "",
          d = h.replace(F, ""),
          k = c.replace(F, "");
        return d === k ? (d = parseInt(h.replace(E, ""), 10), k =
            parseInt(c.replace(E, ""), 10), d === k ? 0 : d > k ? 1 : -1) :
          d > k ? 1 : -1
      };
    a.sort = function(b) {
      switch (b) {
        case "name":
          a.children.sort(G);
          break;
        case "id":
          a.children.sort(P);
          break;
        default:
          a.children.sort(D)
      }
    };
    a.reindex = function() {
      for (var b = a.children, h = a.selection.items, c = [], d = 0,
          k = b.length, e; d < k; d++)
        if (e = b[d]) {
          var r = e.zIndex;
          h[r] && (delete h[r], c.push(d));
          e.zIndex = d
        }
      a.hovered.reset();
      a.selection.reset();
      d = 0;
      for (k = c.length; d < k; d++) r = c[d], a.selection.select(r);
      a.updateSelectionInfo()
    };
    a.createId = function(b, c, d) {
      d = d || "id";
      var k = a.children;
      if (c) {
        b = h.INFINITY_MINUS_8bit;
        for (c = 0; c < k.length; c++) {
          var e = k[c],
            r = e[d];
          r > b && (b = e[d])
        }
        return b + 1
      }
      if (b && (c = typeof b, ("string" === c || "number" === c) && !
          a.getById(b))) return b;
      for (c = b = 0; c < k.length; c++) e = k[c], r = e[d], r > h.INFINITY_MINUS_8bit ||
        r > b && (b = e[d]);
      return b + 1
    };
    a.createGroupId = function(b, h) {
      return a.createId(b, h, "groupId")
    };
    a.createHash = function(a, b) {
      b = b || {};
      for (var h = d.pixelRatio + "", c = [a], k = q.useLocalAlpha; a =
        c.shift();)
        for (var e in a) {
          var r = a[e];
          if (null !== r && void 0 !== r && !(K[e] || N[e] || b[e]))
            if ("fill" === e) {
              if (h += r.noise, h += r.angle, h += r.mode, h += r.enabled,
                r = r[r.type]) h += r.substr(0, 256)
            } else if ("stroke" === e && r.lineWidth) {
            if (h += r.noise, h += r.angle, h += r.mode, h += r.lineWidth,
              h += r.lineCap, h += r.lineJoin, h += r.enabled, r = r[r.type]
            ) h += r.substr(0, 256)
          } else if ("opacity" === e) k[a.type] && (h += e + ":" + r);
          else if ("scale" !== e || a.type)
            if ("src" ===
              e) h += r.substr(0, 256);
            else if ("bbox" === e) r = a.bbox, h += "width:" + r.width,
            h += "height:" + r.height, h += "padding:" + r.padding, r.scale &&
            (r = r.scale, h += "scale:" + r.x + "," + r.y);
          else {
            var s = typeof r;
            "string" === s ? h += e + ":" + r.substr(0, 256) : "number" ===
              s ? h += e + ":" + r : "object" !== s ? h += e + ":" + r :
              r.childNodes || r.getImageData || r && c.push(r)
          }
        }
      c = 5381;
      k = 0;
      for (e = h.length; k < e; k++) c = (c << 5) + c + h.charCodeAt(
        k);
      return c
    };
    a.compress = function(b, h) {
      return a.clone(b, !0)
    };
    a.clone = function(b, h) {
      if (!b || !b.constructor || "object" !== typeof b) return b;
      if (!b.childNodes && !b.getImageData) {
        var c = new b.constructor,
          d;
        for (d in b)
          if (!K[d]) {
            var k = b[d],
              e = typeof k;
            "number" === e || "string" === e || "boolean" === e ? c[d] =
              k : "object" === e && ("fill" === d || "stroke" === d ? (k =
                  m.clone(k, h)) && (c[d] = k) : c[d] = h && k && k.getValue ?
                k.getValue() : a.clone(k, h))
          }
        return c
      }
    };
    a.roundData = function(a, b) {
      b = b || 1E3;
      for (var h in a)
        if (a[h]) {
          var c = a[h].data;
          if (c && c.length)
            for (var d = 0; d < c.length; d++) {
              var k = c[d];
              k.x = Math.round(k.x * b) / b;
              k.y = Math.round(k.y * b) / b
            }
          c = a[h].bbox;
          c.width = Math.round(c.width * b) / b;
          c.height = Math.round(c.height * b) / b;
          c.x = Math.round(c.x * b) / b;
          c.y = Math.round(c.y * b) / b
        }
      return a
    };
    a.decompress = function(a) {
      if ("string" === typeof a.filter) {
        var b = /\(([^)]+)\)/.exec(a.filter),
          b = [
            [{
              cmd: "shader",
              id: a.filter.replace(b[0], ""),
              data: b[1].split(",").map(function(a) {
                return parseFloat(a)
              })
            }]
          ],
          b = new t.vars.FilterStack({
            filter: b
          });
        a.filter = b
      }
      void 0 !== a.fill && (a.fill = new m.Fill(a.fill));
      void 0 !== a.stroke && (a.stroke = new m.Stroke(a.stroke));
      return a
    };
    a.toString = a.stringify = function(b) {
      b = b || a.children;
      return JSON.stringify(a.clone(b, !0))
    };
    a.copyAttributes = function(a, b, c) {
      c = c || {};
      if (b) {
        for (var d in a) {
          var k = a[d],
            e = b[d],
            r = c[d];
          if ("undefined" !== typeof e)
            if (e.getValue) c[d] = e.getValue();
            else if ("filter" === k) c[d] = e.data || e;
          else if ("style" === k) {
            if (r && r.color === e.color && r.gradient === e.gradient &&
              r.pattern === e.pattern && r.type === e.type)
              if (r instanceof m.Stroke) {
                if (r.lineWidth === e.lineWidth) continue
              } else continue;
            c[d] = "fill" === d ? new m.Fill(e) : new m.Stroke(e)
          } else "object" === k ? r && r.min === e.min && r.max === e.max ||
            (c[d] = h.clone(e)) : r !== e && (void 0 ===
              e.value ? isFinite(e.min) || isFinite(e.max) ? c[d] = {
                min: e.min,
                max: e.max
              } : c[d] = e : c[d] = e.value)
        }
        return c
      }
      l.debug && console.log("doc.scene.copyAttributes", arguments)
    };
    a.copyRules = function(b, h) {
      h = h || {};
      a.copyAttributes(f.attrs.__rules, b, h);
      return h
    };
    a.copyProperties = function(b, h, c) {
      c = c || {};
      a.copyAttributes(f.attrs.__rules, h, c);
      a.copyAttributes(b.attributes, h, c);
      return c
    };
    a.ensureStickyIndex = function(b) {
      b.useStickToBack && (b.zIndex = -1);
      b = h.INFINITY_MINUS_8bit;
      for (var c = 0; c < a.children.length; c++) {
        var d = a.children[c];
        d.useStickToFront && (d.zIndex = b++)
      }
    };
    var J = function(a) {
      alertify.log_visible() || (a = a.useMaxCopies, a = b.translate(
        "useMaxCopies-alert", a, 1 < a ? "copies" : "copy"), f.ui.log(
        a))
    };
    a.ensureMaxCopies = function(b) {
      if ("string" !== typeof b.src) return !0;
      var h = a.children,
        c = {},
        d = b.src,
        k = f.lib[b.type],
        r = k && k.getEntry(d);
      if (r) {
        var s = r.folder;
        if ((r = k.meta[s]) && r.useMaxCopies) {
          for (var p = k.tree[s], s = 0; s < p.length; s++)
            for (var m = k.getSrc(p[s]), v = 0; v < h.length; v++) {
              var x = h[v];
              if (void 0 !== x.src && x.id !== b.id) {
                d = x.src;
                if (0 === d.indexOf("#")) {
                  d =
                    e.getItem(x.src, x.type);
                  if (!d) continue;
                  d = d.src
                }
                var x = d,
                  t = m,
                  x = x === t ? !0 : x.length < t.length ? t.indexOf(x) + x
                  .length === t.length : x.indexOf(t) + t.length === x.length;
                if (x && (c[d] || (c[d] = 0), d = ++c[d], d >= r.useMaxCopies))
                  return b.useMaxCopies = r.useMaxCopies, J(b), !1
              }
            }
          return !0
        }
      }
      m = d;
      for (s = 0; s < h.length; s++)
        if (x = h[s], void 0 !== x.src && x.id !== b.id && (b.useMaxCopies ||
            x.useMaxCopies) && (d = (r = f.lib[x.type].getEntry(x.src)) &&
            r.src || x.src, e.isEqual(d, m) && (c[d] || (c[d] = 0), d = ++
              c[d], d >= x.useMaxCopies))) return J(b), !1;
      return !0
    };
    var N =
      h.arrayToObject("id zIndex clamp data visible tid".split(" ")),
      K = h.arrayToObject(
        "filePicker resource palette subtool reset callback hash render renderCache scaleCache breaks brush dirtyCheck dirtyCache dirtyCache dirtyTransform dirtyControl dirtyResource selected hovered inbounds error ctx trx trx2D trxInverse svg toolkit __cache __colors __textMetrics __offset"
        .split(" "));
    a.children = [];
    a.childrenById = {};
    a.copies = [];
    a.controls = [];
    a.selection = new f.module.SceneSelection(f, d, a);
    a.hovered = new f.module.SceneSelection(f,
      d, a);
    return a
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Scene)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.AddMedia = function(f, d) {
    var a = d.canvas2d,
      e = f.dom,
      q = f.feature,
      l = f.lang,
      b = d.render,
      c = d.scene,
      p = d.toolkit,
      w = f.util;
    d.addMedia = function(a, b, e, s) {
      "string" === typeof a && (a = {
        src: a
      });
      var t = a.blob || a.element || a,
        q = t.slice && "string" === typeof t.type,
        l = !!a.openAsNew;
      b = b || a.onload;
      s = s || a.onprogress;
      e = e || a.onerror;
      var A = a.thumb,
        g = {};
      isFinite(a.x + a.y) ? g = {
        x: a.x,
        y: a.y
      } : a.event && (g = c.pointInSceneFromEvent(a.event));
      var F, E;
      q ? t.lastModifiedDate ? (F = F || t.src || URL.createObjectURL(
          t),
        E = w.string.extension(t.name)) : (F = URL.createObjectURL(t),
        E = (t.type || "image/png").split("/").pop()) : t.src ? (F =
        t.src, E = w.string.extension(F)) : F = t;
      F.indexOf && (0 === F.indexOf("<svg") && (F =
        '<?xml version="1.0" encoding="UTF-8"?>' + F), 0 === F.indexOf(
        "<?xml") && (F = "data:image/svg+xml;base64," + btoa(F), E =
        "svg"));
      if (A) return A.width = A.width || a.width, A.height = A.height ||
        a.height, A.croparea && !isFinite(A.width + A.height) && (A.width =
          A.croparea[2] - A.croparea[0], A.height = A.croparea[3] - A.croparea[
            1]), A.src = F, A.onload = function(h) {
          delete a.thumb;
          delete a.element;
          delete a.blob;
          delete a.src;
          a.element = h;
          d.addMedia(a, b, e, s)
        }, w.thumbnailer(A);
      if (t.toDataURL) return t.toBlob(function(h) {
        delete a.element;
        delete a.blob;
        delete a.src;
        a.blob = h;
        d.addMedia(a, b, e, s)
      });
      var A = function() {
          w.exists("doc.config.clipart.opacity.value", f) && (d.config.clipart
            .opacity.value = 100);
          f.ui.refresh && f.ui.refresh("clipart");
          d.setTool("select")
        },
        D = {
          data: {},
          add: function(a) {
            D.data[a] = !0
          },
          run: function(a) {
            f.loader && f.loader.stop();
            var b = D.data;
            b.clipart && b.stamp && delete b.clipart;
            for (var h in D.data) D.callbacks[h]();
            D.callbacks.callback(a)
          },
          callbacks: {
            callback: function(h) {
              if (b !== a.onload) a.onload();
              b && b(h)
            },
            text: function() {
              f.ui.refresh && f.ui.refresh("text");
              p.setTool("text")
            },
            stamp: function() {
              f.ui.refresh && f.ui.refresh("stamp");
              p.setTool("stamp")
            },
            clipart: A,
            image: A,
            color: function() {
              f.palette.update("color", !0);
              f.windows.open("#sk-palette")
            },
            gradient: function() {
              f.palette.update("gradient", !0);
              f.windows.open("#sk-palette")
            },
            pattern: function() {
              f.palette.update("pattern", !0);
              f.windows.open("#sk-palette")
            }
          }
        };
      if (q) switch (E) {
        case "zip":
          return u(t, D);
        case "json":
          return f.open.json(t, function() {
            d.on.sketchReady(d)
          }, function() {
            d.on.sketchReady(d)
          });
        case "sketchpad":
        case "sketch":
          return f.open.sketch(t, function() {
            d.on.sketchReady(d)
          });
        case "woff":
          return console.log("woff", t), D.run();
        case "pat":
          return console.log("pat", t), D.run();
        case "abr":
          return D.add("stamp"), m("ABR", t, D.run);
        case "gbr":
          return D.add("stamp"), m("GBR", t, D.run);
        case "ggr":
          return D.add("gradient"), f.style.addFromBlob(t,
            D.run);
        case "gpl":
          return D.add("color"), f.style.addFromBlob(t, D.run);
        case "pdf":
          return h(t, g, D.run, !0, l);
        case "psd":
          return r(t, g, D.run, !0, l)
      }
      if ("string" !== typeof F) return console.log("unrecognized", t);
      "{" === F.substr(0, 1) ? f.open.json(F, function() {
        d.on.sketchReady(d)
      }, function() {
        d.on.sketchReady(d)
      }) : (t = !!f.module.toolkit.media, q = function(b) {
          l ? f.exec("new-confirm", function() {
            f.open[E]({
              src: b,
              openAsNew: l,
              callback: function() {
                D.run()
              }
            })
          }) : c.add({
            centerOnPoint: !0,
            type: E,
            src: b,
            width: a.width,
            height: a.height,
            x: g.x,
            y: g.y
          }, function(a) {
            D.run(a)
          })
        }, "svg" === E ? t ? (D.add("clipart"), E = "clipart", f.assets
          .addClipart(F, q, e, s)) : f.open.svg(F) : t ? (D.add(
          "image"), E = "image", f.assets.addImage(F, q, e, s)) : f.open
        .image(F))
    };
    var m = function(a, b, h) {
        var c = f.io["blobTo" + a];
        if (c) {
          var d = l.translate("decoding-format", "." + a);
          f.loader && (f.loader.create("decode", d), f.loader.create(
            "files", "..."));
          c(b, function(a, b, c, e) {
            f.loader && (f.loader.create("decode", d, Math.max(0, c - 1) >>
              0), f.loader.create("files", b.name || "untitled"));
            f.assets.addStamp(a,
              function(a, b) {
                100 === c ? (f.loader && f.loader.create("decode", d, 99),
                  h && h()) : e && e()
              })
          })
        } else q.debug && console.log("missing .abr support"), h && h()
      },
      u = function(a, b) {
        f.io.zip.getEntries(a, function(h) {
          h.some(function(a, b, h) {
            return "sketch.json" === a.filename
          }) ? f.io.zip.open(a) : (f.loader && (f.loader.create(
              "decoding", l.translate("opening-format", ".ZIP") +
              "..."), f.loader.create("decodingFiles", "...")), f.io.zip
            .decode({
              entries: h,
              oncomplete: function() {
                f.loader && (f.loader.stop("decoding"), f.loader.stop(
                  "decodingFiles"));
                b.run()
              },
              onchange: function(h) {
                var c = h.blob,
                  d = h.filename,
                  e = h.next,
                  r = w.string.extension(d),
                  r = "undefined" === c.type ? r : c.type;
                f.loader && (f.loader.create("decoding", l.translate(
                    "opening-format", ".ZIP") + "...", h.percent), f.loader
                  .create("decodingFiles", w.string.filename(d)));
                switch (r) {
                  case "application/json":
                    "sketch.json" === d ? (f.loader && (f.loader.stop(
                        "decoding"), f.loader.stop("decodingFiles")), f.io
                      .zip.open(a)) : e();
                    break;
                  case "image/jpeg":
                  case "image/gif":
                  case "image/png":
                  case "jpeg":
                  case "png":
                  case "gif":
                    b.add("clipart");
                    f.assets.addImage(c, e);
                    break;
                  case "image/svg+xml":
                  case "svg":
                    b.add("clipart");
                    f.assets.addClipart(c, e);
                    break;
                  case "abr":
                    b.add("stamp");
                    m("ABR", c, e);
                    break;
                  case "gbr":
                    b.add("stamp");
                    m("GBR", c, e);
                    break;
                  case "ggr":
                    b.add("gradient");
                    f.style.addFromBlob(c, e);
                    break;
                  case "gpl":
                    b.add("color");
                    f.style.addFromBlob(c, e);
                    break;
                  default:
                    e()
                }
              },
              onprogress: function(a, b, h) {
                f.loader && (f.loader.create("decoding", l.translate(
                  "opening-format", ".ZIP") + "...", a), f.loader.create(
                  "decodingFiles", w.string.filename(h)))
              }
            }))
        })
      },
      t = function(a, b, h, c, d) {
        f.save.confirm({
          oncontinue: function() {
            a(b, h, c, !1, d)
          },
          onrequestsave: function() {
            f.save.fromQuery()
          },
          oncancel: function() {
            console.log("cancel")
          }
        })
      },
      h = function(a, b, c, d, e) {
        if (d && e) return t(h, a, b, c, e);
        f.loader && f.loader.create("decoding", l.translate(
          "opening-format", ".PDF") + "...");
        f.open.pdf({
          file: URL.createObjectURL(a),
          point: b,
          openAsNew: e,
          onprogress: function(a) {
            f.loader && f.loader.create("decoding", null, a)
          },
          onsuccess: function() {
            e || c && c()
          },
          onerror: function() {}
        })
      },
      r = function(a, b, h, c,
        e) {
        h = new FileReader;
        h.onload = function(a) {
          a = new Uint8Array(a.target.result);
          a = new PSD.Parser(a);
          a.parse();
          d.addMedia({
            element: a.imageData.createCanvas(a.header, a.colorModeData),
            x: b.x,
            y: b.y
          })
        };
        h.readAsArrayBuffer(a)
      };
    d.addBackground = function(b, h, e, r) {
      "string" === typeof b && (b = {
        src: b
      });
      h = h || b.onload;
      e = e || b.onerror;
      r = r || b.onprogress;
      var p = function(a) {
          a.name = "background";
          a.selectable = !1;
          a.useStickToBack = !0;
          c.removeByName("background");
          c.copyRules(b, a);
          a = c.addObject(a);
          c.updateConstrain(a);
          d.history && d.history.store({
            cmd: "add",
            icon: "screen",
            name: "background",
            data: [a]
          });
          d.render("doc.addBackground");
          h && h(a)
        },
        m = f.style.validate(b.src);
      "color" === m || "gradient" === m ? (e = d.container, p({
        type: "rectangle",
        fill: new f.style.Fill(b.src),
        stroke: new f.style.Stroke,
        width: e.offsetWidth,
        height: e.offsetHeight,
        useConstrain: !0,
        useStretchToEdge: !0
      })) : f.assets.add({
        src: b.src,
        onprogress: r,
        onerror: e,
        onload: function(b, h) {
          var c = h.width || h.vob.width,
            d = h.height || h.vob.height,
            e = {
              type: h.type || "image",
              src: b,
              bbox: {}
            },
            k = e.bbox,
            r = a.width,
            s = a.height;
          c / d < r /
            s ? (e.useConstrainX = !0, e.useAlignY = "top", k.width =
              r, k.height = d / c * r) : (e.useConstrainY = !0, e.useAlignX =
              "left", k.width = c / d * s, k.height = s);
          k.owidth = k.width;
          k.oheight = k.height;
          p(e)
        }
      })
    };
    d.addFromDrag = function(b) {
      -1 !== String(b).indexOf("Event") && (b = {
        target: this,
        src: this.src
      });
      var h = b.target,
        r = b.event,
        s = b.src || h.getAttribute("data-src") || h.src,
        m = b.type || h.getAttribute("data-type") || "clipart";
      f.assets.add(s);
      var t = e.clone(h, "sk-draggable"),
        q = e.measure(h),
        l = q.padding,
        w = l[2] + l[3],
        u = q.border,
        E = l[0] + u[0],
        g = l[2] + u[2],
        P = q.width,
        G = q.height;
      t.style.width = P - (l[0] + l[1]) + "px";
      t.style.height = G - w + "px";
      return eventjs.proxy.drag({
        position: "move",
        target: h,
        event: r,
        listener: function(h, e) {
          if (!p.media) return console.log("missing toolkit");
          var r = eventjs.getCoord(h);
          if ("down" === e.state) {
            var r = eventjs.getCoord(h),
              f = eventjs.getBBox(e.target);
            e.offset = {};
            e.offset.x = f.width / 2 - (r.x - e.x);
            e.offset.y = f.height / 2 - (r.y - e.y);
            eventjs.prevent(h)
          }
          var v = e.bbox.pageYOffset,
            x = e.bbox.pageXOffset;
          t.style.left = e.x + x + E - 1 + "px";
          t.style.top = e.y + v + g - 1 +
            "px";
          if (!t.addedToDOM) {
            var f = Math.abs(e.x - e.start.x),
              q = Math.abs(e.y - e.start.y);
            if (f > P / 2 || q > G / 2) t.addedToDOM = !0, document.body
              .appendChild(t)
          }
          if ("up" === e.state) {
            f = r.x - x;
            q = r.y - v;
            t.style.display = "none";
            var l = document.elementFromPoint(f, q);
            l && l.classList.contains("layer-active") ? (f = p.media,
              f.style.useMinWidth = 1, f.style.useMaxWidth = 2E3, f =
              eventjs.getBBox(d.container), q = d.zoom, l = r.y - f.y1 -
              f.pageYOffset - a.orientY, f = (r.x - f.x1 - f.pageXOffset -
                a.orientX) / q + e.offset.x + x, q = l / q + e.offset.y +
              v, c.deselectAll(), c.add({
                centerOnPoint: !0,
                type: m,
                src: s,
                x: f,
                y: q
              }, function(a) {
                c.select(a);
                b.ondrop && b.ondrop(a)
              })) : d.exportDrop(s, f, q);
            t.addedToDOM && document.body.removeChild(t)
          }
        }
      })
    };
    d.exportDrop = function(a, b, h) {
      !q.io.exportDrop || 0 < b && 0 < h && b < window.innerWidth &&
        h < window.innerHeight || (b = d.selection.item, f.assets.add({
          src: a,
          type: b ? b.type : d.tool.type,
          onload: function(b) {
            var h = (w.string.filename(a) || "").split(".").shift();
            this.vob ? f.download.blob(new Blob([this.stringify()], {
              type: "image/svg+xml"
            }), h + ".svg") : f.assets.getBlob(b, function(a) {
              f.download.blob(a,
                h + ".png")
            })
          }
        }))
    };
    d.changeMedia = function(a) {
      var h = a.type,
        e = a.src,
        r = a.onload,
        m = a.onprogress,
        t = a.onerror;
      q.vector.edit || "text" === d.tool.type || c.deselectAll();
      var l = d.selection.items,
        u = "select" === d.tool.type,
        g = d.selection.item,
        g = d.config,
        F = [],
        E = [];
      switch (h) {
        case "clipart":
        case "image":
        case "stamp":
          a = e;
          "stamp" === h ? (a = a.replace("thumb", "live"), g[h].src = a) :
            (g[h].src = a, g = p.media, g.style.src = a, g.style.render =
              void 0);
          for (var D in l)
            if (g = c.children[D], "image" === g.type && "clipart" === h ?
              g.type = "clipart" : "clipart" ===
              g.type && "image" === h && (g.type = "image"), g && g.type ===
              h)
              if (l = g.src, g.src = a, c.ensureMaxCopies(g)) {
                var l = {
                    id: g.id,
                    src: l
                  },
                  e = {
                    id: g.id,
                    src: a
                  },
                  P = f.lib[g.type].getEntry(g.src);
                if (P)
                  for (var G in f.attrs.__rules) void 0 === P[G] ? void 0 !==
                    g[G] && (l[G] = g[G], e[G] = "", delete g[G]) : (l[G] =
                      g[G], e[G] = P[G], g[G] = P[G]);
                F.push(l);
                E.push(e);
                g.dirtyResource = !0;
                g.dirtyCheck = !0
              } else g.src = l;
          break;
        case "text":
          for (D in G = a.fontFamily || a.name, p.text.style.fontFamily =
            G, g[h].fontFamily = G, l)(g = c.children[D]) && "text" ===
            g.type && (F.push({
              id: g.id,
              fontFamily: g.fontFamily
            }), E.push({
              id: g.id,
              fontFamily: G
            }), g.fontFamily = G, g.dirtyResource = !0)
      }
      F.length && E.length ? (d.selection.length && w.Canvas.blip(d.contexts
        .active), d.history && d.history.store({
        cmd: "update",
        icon: "image",
        name: "change-media",
        data: {
          from: F,
          to: E
        }
      }), b.preload({
        onerror: t,
        onprogress: m,
        onload: r
      })) : p.setTool({
        type: h,
        onerror: t,
        onload: function() {
          u ? p.setTool("select") : f.ui.setToolMenu && f.ui.setToolMenu(
            d.tool.type);
          r && r()
        }
      });
      d.saveSettings()
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.AddMedia)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.AddObject = function(f, d) {
    d.addObject = function(e, q, l, b) {
      var c = f.detect,
        p = f.feature,
        w = d.scene,
        m = d.toolkit,
        u = f.util,
        t = f.vector;
      e = e || {};
      q = q || e.onload || function() {};
      l = l || e.onerror || function() {};
      b = b || {};
      var h = b.fromSelf || !1,
        r = b.fromCollection || !1,
        k = isFinite(b.useRecord) ? b.useRecord : !0,
        v = isFinite(b.useRender) ? b.useRender : !0;
      b = e.type;
      if (Array.isArray(e) || e.data && !b) {
        b = e.data || e;
        k = isFinite(e.useRender) ? e.useRecord : !0;
        v = isFinite(e.useRender) ? e.useRender : !0;
        if (isFinite(e.scale))
          for (var x =
              e.scale, s = 0; s < b.length; s++) {
            var z = b[s];
            if (void 0 !== z && !z.useStretchToEdge && !z.useStretchToFit) {
              var y = z.bbox = z.bbox || {
                x: 0,
                y: 0
              };
              y.x *= x;
              y.y *= x;
              "text" === z.type ? z.fontSize *= x : (y.scale = y.scale || {
                x: 1,
                y: 1
              }, y.scale.x *= x, y.scale.y *= x)
            }
          }
        var B = [];
        new u.Queue({
          items: b,
          flatten: !0,
          oncomplete: function() {
            a(q, B, v)
          },
          next: function(a) {
            var b = this;
            d.addObject(a, function(a) {
              B.push(a);
              b.next()
            }, function(a) {
              b.next()
            }, {
              fromSelf: h,
              fromCollection: !0,
              useRecord: k,
              useRender: v
            })
          }
        })
      } else {
        if (!m.exists(b)) return b += " toolkit not found.",
          p.debug && console.warn(b), l({
            message: b
          });
        d.render.dirtyControls = !0;
        var A = d.config[b];
        if (!0 !== h) {
          if ("media" === A.toolkit && e.src) return f.assets.add({
            type: b,
            targetId: e.targetId,
            src: e.src,
            onload: function(a, b) {
              var h = m.media.style;
              h.bbox.viewBox = "clipart" === b.type ? b.viewBox : [0,
                0, b.width, b.height
              ];
              h.src = A.src = e.src;
              h.render = void 0;
              d.addObject(e, q, l, {
                fromSelf: !0,
                fromCollection: r,
                useRecord: k,
                useRender: v
              })
            }
          });
          if ("text" === A.toolkit && e.fontFamily && (!t.text.supports[
              A.fontFamily] || A.fontFamily !== e.fontFamily)) return m.text
            .loadFont({
              fontFamily: e.fontFamily,
              onerror: l,
              onsuccess: function() {
                A.fontFamily = e.fontFamily;
                d.addObject(e, q, l, {
                  fromSelf: !0,
                  fromCollection: r,
                  useRecord: k,
                  useRender: v
                })
              }
            })
        }
        w.decompress(e);
        var g = m.getFeature(b),
          y = e.bbox = e.bbox || {},
          F = function(a, b) {
            var h = typeof b;
            return typeof y[a] === h ? y[a] : typeof e[a] === h ? e[a] :
              b
          },
          s = function(a, b) {
            return y[a] = F(a, b)
          },
          z = e.width,
          E = e.height,
          x = F("scale", 1);
        isFinite(x) && (x = {
          x: x,
          y: x
        });
        s("units", g.units || "objectBoundingBox");
        s("padding", 0);
        s("rotate", 0);
        s("scale", x);
        isFinite(F("width", 0)) && (z = s("width", 0));
        isFinite(F("height",
          0)) && (E = s("height", 0));
        var D = m.getToolkit(b);
        if (c.brush[b])
          if (e.points || e.data) u = e.points || e.data, "string" ===
            typeof u && (e.path = "M" === u[0] ? t.SVGPath.toVOBPath(u) :
              t.SVGPath.toVOBPolygon(u));
          else {
            console.warn(b + " requires a path!", e);
            onload && onload();
            return
          } else if (!z || !E)
          if (c.shape[b]) z || (y.width = z = E || D.defaultWidth), E ||
            (y.height = E = z || D.defaultHeight);
          else if (c.media[b]) t = D.style.bbox.viewBox, z = t[2] - t[0],
          E = t[3] - t[1], t = g.maxWidth || u.INFINITY, x = g.maxHeight ||
          u.INFINITY, y.width || y.height || (t = Math.min(t,
            y.width || z), x = Math.min(x, y.height || E)), u = u.fitSize(
            z, E, {
              width: y.width || "auto",
              height: y.height || "auto",
              maxWidth: t,
              maxHeight: x
            }), y.width = z = u.width, y.height = E = u.height;
        else if ("text" === b)
          if (z = w.clone(d.config.text, !0), u.cloneInto(e, z), e.content)
            u = m.text.measureText(e, z), z = t.text.getFontStyle(e), z =
            t.text.measureTextWidth("M", z), z = u.width + z, E = u.height,
            y.width = z = y.width || z, y.height = E = y.height || E;
          else {
            console.warn("Text requires content!", e);
            onload && onload();
            return
          } else if ("group" !== b) {
          console.warn("Object requires view-box!",
            e);
          onload && onload();
          return
        }
        u = w.getCenterPoint();
        s("x", u.x);
        s("y", u.y);
        if (e.centerOnPoint || "objectBoundingBox" === y.units) y.x -=
          z / 2 * y.scale.x, y.y -= E / 2 * y.scale.y;
        isFinite(y.x) && (y.x += d.x);
        isFinite(y.y) && (y.y += d.y);
        D.createObject && D.getDevice && (b = D.getDevice(b), w.copyProperties(
          D, e, b), D.deviceProxy.place = b);
        D.createObject({
          proxied: !0,
          device: D.deviceProxy.place,
          layer: e
        }, function(b) {
          delete D.deviceProxy.place;
          k && d.history && d.history.store({
            cmd: "add",
            icon: b.type,
            name: b.type,
            data: [b]
          });
          b && (w.updateConstrain(b),
            "text" === b.type && w.deselectAll());
          f.net.dataChannel && p.stream.sketch && b && "image" === b.type &&
            f.net.dataChannel.send(["scene.update", [{
              id: b.id,
              bbox: b.bbox
            }]]);
          a(q, b, v && !r)
        })
      }
    };
    var a = function(a, f, l) {
      l ? d.render({
        from: "doc.addObject",
        onsuccess: function() {
          a && a(f)
        }
      }) : a && a(f)
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.AddObject)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Assets = function(f, d) {
    var a = this,
      e = f.client,
      q = f.convert,
      l = f.feature,
      b = f.gen,
      c = f.lib,
      p = f.loc,
      w = f.util.string,
      m = d.toolkit,
      u = f.util,
      t = f.vector;
    this.reset = function() {
      a.data = {};
      a.missing = {};
      a.URLtoID = {};
      a.IDtoURL = {};
      return a
    };
    this.remove = function(b) {
      delete a.data[b];
      delete a.missing[b];
      return a
    };
    this.isEqual = function(b, h) {
      if (b === h) return !0;
      var c = a.getItem(b);
      return c && c.src === h ? !0 : (c = a.getItem(h)) && c.src ===
        b ? !0 : !1
    };
    this.getBlob = function(b, c, d, e) {
      var k = a.getById(b);
      k.blob ? c(k.blob, b) : k.srcXML ? (k.blob = new Blob([k.srcXML], {
          type: "image/svg+xml"
        }), k.blob.lastModified = k.lastModified, c(k.blob, b)) : h(k)
        .toBlob(function(a) {
          k.blob = a;
          k.blob.lastModified = k.lastModified;
          c(a, b)
        }, d, e)
    };
    this.getBlobURL = function(b, h, c, d) {
      a.getBlob(b, function(a) {
        h(URL.createObjectURL(a))
      }, c, d)
    };
    this.getDataURL = function(b, c, d) {
      return h(a.getById(b)).toDataURL(c, d)
    };
    this.getURL = function(b) {
      return a.getById(b).src || b
    };
    this.getId = function(b) {
      return a.URLtoID[b] ? a.URLtoID[b] : a.data[b] ? b : ""
    };
    this.getById =
      function(b, h) {
        var c = a.data[b];
        return c ? c : a.createDefault(b, h)
      };
    this.getItem = function(b) {
      return a.data[a.getId(b)] || ""
    };
    this.getRaw = function(a) {
      return h(a)
    };
    var h = function(a) {
        return "IMG" === a.nodeName ? q.imageToCanvas(a) : a
      },
      r = u.arrayToObject(["[object Blob]", "[object File]"]),
      k = u.arrayToObject(["[object HTMLCanvasElement]",
        "[object HTMLImageElement]"
      ]),
      v = u.arrayToObject(["[object File]"]);
    this.addList = function(b, h) {
      if (u.count(b)) {
        var c = 0,
          d = function() {
            --c || h()
          },
          e;
        for (e in b) {
          c++;
          var k = b[e];
          "string" ===
          typeof k && (k = {
            src: k,
            targetId: e
          });
          a.add(k, d, d)
        }
      } else return h()
    };
    this.add = function(b, h, c, e) {
      "string" === typeof b ? b = {
        src: b
      } : r[String(b)] && (b = {
        blob: b
      });
      var p = b.src || b.blob || b.data || "",
        m;
      if (!(m = b.type)) a: {
        if ("string" === typeof p) switch (w.filename(p).toLowerCase()
          .split(".").pop()) {
          case "jpeg":
          case "jpg":
          case "png":
          case "gif":
          case "webp":
            m = "image";
            break a;
          case "svg":
            m = "clipart";
            break a
        }
        m = void 0
      }
      var t = b.targetId || null,
        g = b.lastModified || Date.now();
      h = b.onload || h;
      c = b.onerror || c;
      e = b.onprogress || e;
      var E, D = String(p);
      if (!p) return console.warn("assets.js", b), c && c();
      if (k[D]) return a.createId(p, function(b) {
        a.createResource(b, "image", p);
        h && h.call(p, b, p)
      }, t);
      if (r[D]) {
        g = p.lastModified || g;
        if ("image/svg+xml" === p.type) return q.blobToText(p,
          function(d) {
            b.src = d;
            b.type = "clipart";
            b.lastModified = g;
            a.add(b, h, c, e)
          });
        v[D] || (E = p);
        p = URL.createObjectURL(p)
      }
      if (0 === p.indexOf("#asset-")) {
        var P = p,
          p = a.getById(p, b);
        if (void 0 === a.data[P]) {
          if (f.io.json.folder) return E = "clipart" === b.type ?
            ".svg" : ".png", b.src = f.io.json.folder + P.substr(1) + E,
            a.add(b, h, c, e);
          a.createDefault(P, b)
        }
        h && h.call(p, P, p)
      } else if (a.URLtoID[p]) P = a.URLtoID[p], E = a.getById(P, b),
        "clipart" === E.type && E.clone && !l.cacheSVG ? E.clone(
          function(b) {
            a.createId(b.toDataURL(), function(c) {
              a.createResource(c, "clipart", b);
              h && h.call(b, c, b)
            }, t || P)
          }, !0) : h && h.call(E, P, E);
      else {
        var G = {
          type: m,
          src: p,
          blob: E,
          lastModified: g,
          onload: h,
          onerror: c,
          onprogress: e,
          targetId: t
        };
        E = a.detectFormat(p);
        if ("clipart" === E) a.loadSVG(G);
        else if ("image" === E) a.loadImage(G);
        else if ("video" === E) {
          var J = document.createElement("video");
          J.src = p;
          J.play();
          eventjs.add(J, "playing", function() {
            var b = u.Canvas(J.videoWidth, J.videoHeight);
            b.ctx.drawImage(J, 0, 0);
            b.toBlobURL(function(b) {
              d.addObject({
                type: "image",
                src: b
              });
              G.src = b;
              a.loadImage(G)
            })
          })
        }
      }
    };
    this.addClipart = function(h, d, e, k, r) {
      a.add({
        type: "clipart",
        data: h,
        onload: function(a, h) {
          var e = c.clipart;
          if (!e || !e.tree) return d(a, h);
          var k = e.tree["Your Files"];
          if (k)
            if (k[a]) d && d(a, h);
            else if (k[a] = "loading", b.preview) b.preview({
            type: "clipart",
            resource: h,
            width: 52,
            height: 52,
            oncomplete: function(b) {
              e.paths.splice(0,
                0, k[a] = {
                  type: "clipart",
                  filename: a,
                  filepath: a,
                  thumbnail: b.canvas.toDataURL(),
                  category: "Your Files"
                });
              d && d(a, h)
            }
          });
          else return d(a, h);
          else return d && d(a, h)
        },
        onprogress: k,
        onerror: e,
        targetId: r
      })
    };
    this.addImage = function(b, h, d, e, k) {
      a.add({
        type: "image",
        data: b,
        onload: function(a, b) {
          var d = c.clipart;
          if (!d || !d.tree) return h(a, b);
          var e = d.tree["Your Files"];
          if (e) e[a] ? h && h(a, b) : (e[a] = "loading", u.thumbnailer({
            src: b,
            width: 52,
            height: 52,
            crop: "edge",
            onload: function(c) {
              d.paths.splice(0, 0, e[a] = {
                type: "image",
                filename: a,
                filepath: a,
                thumbnail: c.toDataURL(),
                category: "Your Files"
              });
              h && h(a, b)
            }
          }));
          else return h && h(a, b)
        },
        onprogress: e,
        onerror: d,
        targetId: k
      })
    };
    this.addFromActions = function(b) {
      for (var h = 0; h < b.length; h++) {
        var c = b[h],
          d = c.src;
        if (d && "#" === d[0]) switch (c.type) {
          case "clipart":
            a.addClipart(d);
            break;
          case "image":
            a.addImage(d);
            break;
          case "stamp":
            a.addStamp(d)
        }
      }
    };
    this.addCloneFromSelection = function() {
      f.save.toBlobURL({
        background: "none",
        useSelection: !0,
        callback: function(a) {
          d.scene.add({
            centerOnPoint: !0,
            type: "image",
            src: a
          })
        }
      })
    };
    this.addStampFromSelection = function() {
      f.save.canvas({
        background: "none",
        useSelection: !0,
        onsuccess: function(b) {
          d.scene.deselectAll();
          a.addStamp(b, function() {
            f.ui.refresh("stamp");
            m.setTool({
              type: "stamp",
              onload: function() {
                var a = d.tool.device.brush,
                  b = a.fill;
                b[b.type] = "none";
                delete a.fill.__colors
              }
            })
          })
        }
      })
    };
    this.addStamp = function(b, h, e, k, r) {
      a.add({
        type: "image",
        data: b,
        onload: function(b, e) {
          u.removeColorFromCanvas && (e = a.getRaw(e), u.removeColorFromCanvas(
            e), a.data[b] = e);
          var k = c.stamp;
          if (k) {
            var r = k.tree["Your Files"];
            if (r) r[b] ? h && h() : (r[b] = "loading", u.thumbnailer({
              src: e,
              width: 52,
              height: 52,
              crop: "edge",
              onload: function(a) {
                d.config.stamp.src = b;
                k.paths.splice(0, 0, r[b] = {
                  type: "stamp",
                  filename: b,
                  filepath: b,
                  thumbnail: a.toDataURL(),
                  category: "Your Files"
                });
                h && h(b, e)
              }
            }));
            else return h(b, e)
          } else return h(b, e)
        },
        onprogress: k,
        onerror: e,
        targetId: r
      })
    };
    this.addPattern = function(a, b) {};
    this.addFont = function(a, b) {};
    this.detectFormat = function(a) {
      var b = a.slice(-4).toLowerCase();
      return ".png" === b || ".jpeg" === b || ".jpg" === b || ".gif" ===
        b ? "image" :
        ".mp4" === b ? "video" : ".svg" === b || t.SVG && t.SVG.detect(
          a) ? "clipart" : "image"
    };
    this.loadSVG = function(b) {
      var h = b.src,
        c = b.targetId,
        e = b.lastModified,
        k = b.onload,
        r = b.onerror,
        f = b.onprogress;
      h.startsWith("<svg") && (h =
        '<?xml version="1.0" encoding="UTF-8"?>' + h);
      h.startsWith("<?xml") && (h = "data:image/svg+xml;base64," +
        btoa(w.encode_utf8(h)));
      return h.startsWith("data:image/svg") ? a.createId(h, function(
        b) {
        var c = a.data[b];
        l.cacheSVG && c && "sk-default" !== c.className ? k && k.call(
          c, b, c) : new t.SVG({
          src: h,
          ctx: d.contexts.cache.ctx,
          useCache: l.cacheSVG,
          onprogress: f,
          onerror: function(a) {
            l.debug && console.log(a);
            r && r(a)
          },
          onload: function(h) {
            h.lastModified = e;
            a.createResource(b, "clipart", h);
            k && k.call(h, b, h)
          }
        })
      }, c) : u.request({
        url: p.getMediaUrl(h),
        onerror: r,
        onload: function(b) {
          a.add({
            targetId: c,
            data: b.target.responseText,
            onprogress: f,
            onerror: function(a) {
              l.debug && console.log(a);
              r && r(a)
            },
            onload: function(b, c) {
              a.URLtoID[h] = b;
              a.IDtoURL[b] = h;
              k && k.call(c, b, c)
            }
          })
        }
      })
    };
    this.loadImage = function(b) {
      var h = b.src,
        c = b.targetId,
        d = b.lastModified,
        k = b.onload,
        r = b.onerror,
        f = b.onprogress;
      u.loadImage({
        src: p.getMediaUrl(h),
        onprogress: f,
        onerror: r,
        onload: function() {
          var r = this;
          e.ios && u.exists("MegaPixImage") && (r = q.imageToCanvas(
            this));
          a.createId(r, function(c) {
            r.assetID = r.title = c;
            r.image = {
              src: h
            };
            r.lastModified = d;
            r.setAttribute("data-src", h);
            a.URLtoID[h] = c;
            a.IDtoURL[c] = h;
            a.createResource(c, "image", r);
            if (b.blob) r.blob = b.blob;
            else if (l.stream.maxFileSize) return that.getBlob(c,
              function(a) {
                k && k.call(r, c, r)
              });
            k && k.call(r, c, r)
          }, c)
        }
      })
    };
    this.createId = function(b, h, c) {
      if (c) return h(c);
      "string" === typeof b ? 25E4 < b.length ? h("#asset-" + u.MD5(b
        .substr(0, 25E4))) : h("#asset-" + u.MD5(b)) : b.assetID ? h(
        b.assetID) : h(a.createIdFromImage(b))
    };
    this.createIdFromImage = function(b) {
      var h = b.width,
        c = b.height;
      if (64 > h && 64 > c && b.toDataURL) b.assetID = "#asset-" + u.MD5(
        b.toDataURL());
      else {
        var d = a.thumbnail || u.Canvas();
        d.ctx = d.ctx || d.getContext("2d");
        var e = Math.min(h, 64),
          k = Math.min(c, 64);
        d.width = e;
        d.height = k;
        d.ctx.drawImage(b, 0, 0, h, c, 0, 0, e, k);
        a.thumbnail = d;
        b.assetID = "#asset-" + u.MD5(d.toDataURL())
      }
      return b.assetID
    };
    this.createDefault = function(b, h, c) {
      h = h || {};
      if (a.data[b]) {
        c = a.data[b];
        var d = c.width;
        h = c.height
      } else c = u.Canvas(), d = h && h.width || 1, h = h && h.height ||
        1;
      c.width = d;
      c.height = h;
      c.className = "sk-default";
      var e = c.getContext("2d");
      e.fillStyle = "rgba(127,127,127,0.5)";
      e.fillRect(0, 0, d, h);
      a.data[b] = c;
      a.missing[b] = !0;
      return c
    };
    this.createResource = function(b, h, c) {
      var e = a.data[b] || "",
        k = "sk-default" === e.className;
      a.data[b] = c;
      a.data[b].type = h;
      (!e || k) && (f.peerjs || f.peer && f.peer.sendFile) && a.getBlob(
        b,
        function(a) {
          f.peerjs ?
            f.peerjs.handle.file.send(a) : f.sfclient && !f.sfclient.files[
              b] && f.peer.sendFile(a, b)
        });
      if (a.missing[b] || k) delete a.missing[b], d.scene.traverse(
        function(a) {
          a.src === b && (a.dirtyCache = !0, m.media.loadResource({
            layer: a
          }))
        })
    };
    return this.reset()
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Assets)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Controls = function(f, d) {
    var a = d.canvas2d,
      e = d.contexts,
      q = f.feature,
      l = d.render,
      b = d.scene,
      c = d.toolkit,
      p = f.ui,
      w = f.util,
      m = f.vector,
      u = m.Point,
      t = m.Shape,
      h = c.area = c.area || {};
    c.contextEvent = function(a) {
      eventjs.prevent(a);
      h.hideArea();
      d.render("area.contextMenu");
      var b = eventjs.getCoord(a);
      a = eventjs.getBBox(a.target);
      contextmenu.show(p.menuSelect, b.x - a.pageXOffset + 5, b.y - a
        .pageYOffset + 5, !0)
    };
    c.deleteEvent = function(a) {
      var c = a.target,
        k = function() {
          eventjs.remove(c, "mouseup",
            k);
          if ((b.controls[1] || {}).hovered) {
            d.selection.remove();
            h.hide();
            var a = 0,
              r = setInterval(function() {
                var b = e.active,
                  h = b.ctx;
                h.save();
                h.globalAlpha = .25;
                h.globalCompositeOperation = "destination-out";
                h.fillRect(0, 0, b.width, b.width);
                h.restore();
                10 < ++a && (clearInterval(r), d.render(
                  "root.deleteAction"))
              }, 25)
          }
        };
      eventjs.prevent(a);
      eventjs.add(c, "mouseup", k)
    };
    c.moveEvent = function(a) {
      var k = d.zoom,
        r = b.getFocused() || b.getOneSelected();
      if (r) {
        var f = r.trx2D;
        if (f) {
          var s, m, t;
          return eventjs.proxy.drag({
            event: a,
            target: e.active,
            position: "absolute",
            listener: function(a, b) {
              eventjs.cancel(a);
              t = b.state;
              s = b.hasMoved();
              m = "up" === t;
              window.contextmenu && contextmenu.visible && (t = "up",
                b.pause());
              m ? (h.hoverControlIdx = "", h.activeControlIdx = "") :
                s && (h.activeControlIdx = "anchor");
              if (1 === d.selection.length && r.brush && r.brush.move)
                r.brush.move(b);
              else {
                c.select.__moving = !m;
                switch (t) {
                  case "down":
                    d.selection.move(0, 0, {
                      method: "cache"
                    });
                    break;
                  case "move":
                    d.selection.move((b.x - (b.px || 0) + (d.scrollLeft -
                      (b.scrollLeft || 0))) / k, (b.y - (b.py || 0) + (d
                      .scrollTop -
                      (b.scrollTop || 0))) / k, {
                      method: "move"
                    });
                    break;
                  case "up":
                    d.selection.move(0, 0, {
                      method: "record"
                    })
                }
                b.px = b.x;
                b.py = b.y;
                b.scrollLeft = d.scrollLeft;
                b.scrollTop = d.scrollTop;
                eventjs.isTouch && m ? (l.dirtyCenterPoint = !1, p.tooltip &&
                  p.tooltip.update("")) : l.dirtyCenterPoint = {
                  pt: {
                    x: b.x,
                    y: b.y
                  },
                  trx: f,
                  origin: f.cp,
                  bbox: r.bbox,
                  useMove: s,
                  useScale: !s,
                  proportional: !0
                }
              }
            },
            maxFingers: 1
          })
        }
      }
    };
    var r = function(r, f, m) {
      d.render("root.resizeEvent");
      var t = b.getFocused();
      if (t) {
        var B = t.trx2D;
        if (B) {
          var A = function(a, b, h) {
              var c = u.clone(fb);
              b = u.atRadianDistance(c, (b + L.rotate) * w.DEG_RAD, 1);
              b = u.nearestOnLine(a, c, b);
              a = u.distance(c, b) || N;
              b = u.subtract(c, b);
              var c = 0 > b.x,
                d = 0 > b.y;
              void 0 === Q[h] && (Q[h] = {
                x: c,
                y: d
              });
              if (va && X || "xy" === h) return a;
              b = Q[h];
              return a * (b.x === c && b.y === d ? 1 : -1)
            },
            g = function(a) {
              var b = A(a, 0, "x"),
                h = A(a, 90, "y");
              if ($) return {
                x: tb ? L.width : b,
                y: Na ? L.height : h
              };
              if (tb && !ta) return {
                x: N,
                y: h
              };
              if (Na && !ta) return {
                x: b,
                y: N
              };
              if (ta) {
                if (ia) var c = 0 > b ? -1 : 1,
                  d = 0 > h ? -1 : 1;
                else d = c = 1;
                ca ? (b = k[pa], 0 > L.scale.x !== 0 > L.scale.y && (b +=
                  90), a = A(a, b, "xy")) : a = Math.max(Math.abs(b),
                  Math.abs(h));
                return {
                  x: a * c,
                  y: a * d
                }
              }
              return {
                x: b,
                y: h
              }
            },
            N = 1E-10,
            K = eventjs.getBBox(r.target),
            O = d.zoom,
            V = d.pixelRatio,
            L = t.bbox,
            T = w.clone(L),
            Q = {},
            U, da, aa = {},
            R = {},
            ea = {},
            Z, ga, W, ma, ua = eventjs.altKey,
            ja = eventjs.shiftKey,
            ta, Da, va, X, oa = q.tools[t.toolkitId] || {},
            ia = oa.controls.allowFlip,
            ca = 1 < d.selection.length,
            ba = !1,
            $ = "text" === t.type && "pre-nowrap" !== t.whiteSpace && ua,
            Y = "objectBoundingBox" === L.units && !$,
            pa = h.hoverControlIdx,
            Wa = v[pa],
            pb = !!s[pa],
            Na = !!z[pa],
            tb = !!y[pa],
            ab = Na || tb,
            fb = function() {
              if ((eventjs.altKey || q.canvas.useGroupBBox) &&
                ca) return b.getBoundingOrigin({
                useSelection: !0
              });
              var a = Y ? B.cp : B[v[pa]] || B.cp;
              return {
                x: a.x + d.scrollLeft,
                y: a.y + d.scrollTop
              }
            }();
          d.__editing && (ba = !0, h.disableArea());
          return eventjs.proxy.drag({
            position: "relative",
            event: r,
            target: e.active,
            listener: function(b, e) {
              eventjs.cancel(b);
              Z = e.state;
              ga = "down" === Z;
              W = "up" === Z;
              ma = e.hasMoved();
              ta = ja === ab || f && m;
              Da = ja;
              va = !(!1 === f || !1 === t.rotatable || !0 === ab);
              X = !(!1 === m || !1 === t.scalable);
              ba && W && h.enableArea(t);
              window.contextmenu && contextmenu.visible && (Z = "up",
                e.pause());
              ga ?
                h.activeControlIdx = pa : W && (h.activeControlIdx = "");
              X && ca && (ga && !1 === ta ? (d.selection.reset(), d.selection
                .select(d.hovered.idx), q.tools.select.useConfigure &&
                p.configureBuild()) : ta = !0);
              c.select.__moving = !W;
              if (!d.__rendering || W) {
                var k = {
                  x: e.x,
                  y: e.y
                };
                k.x /= O;
                k.y /= O;
                k.x -= a.x / O / V;
                k.y -= a.y / O / V;
                if (va) {
                  var r = fb.y - k.y || N,
                    s = -Math.atan2(fb.x - k.x || N, r) * w.RAD_DEG + 180,
                    v = 0;
                  Da && (s -= s % 5, v = L.rotate % 5);
                  U !== +U && (U = s);
                  da = s - U - v;
                  U = s
                } else L.rotate = T.rotate;
                if ($ && pb) {
                  e.pointerStart && (e.env.x = L.x, e.env.y = L.y, e.env
                    .width = L.width,
                    e.env.height = L.height, e.env.owidth = L.owidth, e.env
                    .oheight = L.oheight, e.env.viewBox = w.clone(L.viewBox)
                  );
                  var z = t.toolkit,
                    s = g(k),
                    v = L.scale,
                    k = Math.max(z.minWidth, s.x / v.x),
                    s = Math.max(z.minHeight, s.y / v.y);
                  0 > pb.x && (v = L.x, L.x = k * pb.x + e.env.width + e
                    .env.x, k = L.width + v - L.x);
                  L.width = k;
                  L.owidth = k;
                  L.viewBox[2] = k;
                  oa.autoHeight || (0 > pb.y && (k = L.y, L.y = s * pb.y +
                      e.env.height + e.env.y, s = L.height + k - L.y), L.height =
                    s, L.oheight = s, L.viewBox[3] = s);
                  t.__textMetrics = void 0;
                  t.dirtyCheck = !0;
                  z.updateObjectSize(t);
                  d.render.clean();
                  W && ma &&
                    d.history && d.history.store({
                      cmd: "update",
                      icon: "infinity",
                      name: "Resize Text",
                      data: {
                        from: [{
                          id: t.id,
                          bbox: {
                            x: e.env.x,
                            y: e.env.y,
                            width: e.env.width,
                            height: e.env.height,
                            owidth: e.env.owidth,
                            oheight: e.env.oheight,
                            viewBox: e.env.viewBox
                          }
                        }],
                        to: [{
                          id: t.id,
                          bbox: {
                            x: L.x,
                            y: L.y,
                            width: L.width,
                            height: L.height,
                            owidth: L.owidth,
                            oheight: L.oheight,
                            viewBox: L.viewBox
                          }
                        }]
                      }
                    })
                } else {
                  v = L.scale;
                  s = v.x;
                  v = v.y;
                  if (X) {
                    var y = g(k);
                    aa.x !== +aa.x && (aa.x = y.x);
                    aa.y !== +aa.y && (aa.y = y.y);
                    var u = T.scale,
                      r = y.x / aa.x * u.x || (tb ? 1 : N),
                      y = y.y / aa.y * u.y || (Na ? 1 :
                        N);
                    ea.x = r / (R.x || r);
                    ea.y = y / (R.y || y);
                    R.x = r;
                    R.y = y
                  } else R.x = s, R.y = v;
                  d.selection.transform({
                    origin: fb,
                    method: Z,
                    control: Wa,
                    rotate: da,
                    scale: ea
                  });
                  "spinner" === pa && (y = 0 > v ? -1 : 1, r = -Math.abs(
                      A(k, 90, "y")), k = (r + L.height * v / 2 * y) * y,
                    B.spinner = B.spinnerPoint = B.point2d(L.width / 2 *
                      s, k), B.spinnerDistance = k); - 1 !== pa.indexOf(
                    "_spinner") ? z = {
                    x: e.x,
                    y: e.y
                  } : B[pa] && (k = B[pa], z = {
                    x: k.x * O + K.x1 - K.scrollLeft + a.x / V,
                    y: k.y * O + K.y1 - K.scrollTop + a.y / V
                  });
                  z && (eventjs.isTouch && W ? (l.dirtyControls = !1, l.dirtyCenterPoint = !
                      1, p.tooltip && p.tooltip.update("")) :
                    (l.dirtyControls = !0, l.dirtyCenterPoint = {
                      pt: z,
                      origin: B.cp,
                      bbox: L,
                      useRotate: va,
                      useScale: X,
                      proportional: x[pa]
                    }));
                  f && q.ui.dynamicCursor && p.setCursor(h.control.cursor,
                    t)
                }
              }
            },
            maxFingers: 1
          })
        }
      }
    };
    c.scaleEvent = function(a) {
      r(a, !1, !0)
    };
    c.rotateEvent = function(a) {
      r(a, !0, !1)
    };
    c.rotateScaleEvent = function(a) {
      r(a, !0, !0)
    };
    var k = {
        n: 270,
        e: 0,
        s: 90,
        w: 180,
        ne: 315,
        se: 45,
        sw: 135,
        nw: 225
      },
      v = {
        n: "s",
        e: "w",
        s: "n",
        w: "e",
        ne: "sw",
        se: "nw",
        sw: "ne",
        nw: "se"
      },
      x = {
        ne: !0,
        se: !0,
        sw: !0,
        nw: !0
      },
      s = {
        e: {
          x: 1,
          y: 1
        },
        w: {
          x: -1,
          y: 1
        },
        n: {
          x: 1,
          y: -1
        },
        s: {
          x: 1,
          y: 1
        },
        ne: {
          x: 1,
          y: -1
        },
        se: {
          x: 1,
          y: 1
        },
        sw: {
          x: -1,
          y: 1
        },
        nw: {
          x: -1,
          y: -1
        }
      },
      z = {
        e: !0,
        w: !0
      },
      y = {
        n: !0,
        s: !0
      };
    h.drawCenterPoint = function(b) {
      var h = b.origin,
        c = b.trx,
        k = b.bbox,
        r = k.rotate,
        f = k.scale,
        s = b.useRotate,
        m = b.useScale,
        v = b.useMove;
      p.tooltip && (m ? (b.proportional ? (c = Math.abs(k.width * f.x)
        .toFixed(0), f = Math.abs(k.height * f.y).toFixed(0), c =
        "W: " + c + " px", f = "H: " + f + " px") : (c = (100 * f.x)
        .toFixed(0), f = (100 * f.y).toFixed(0), c = "SX: " + c +
        " %", f = "SY: " + f + " %"), p.tooltip.update(c + "<br>" +
        f, b.pt)) : v ? (f = c.nw, k = c.ne, s = c.se, m = c.sw, c =
        Math.min(f.x,
          k.x, s.x, m.x).toFixed(2), f = Math.min(f.y, k.y, s.y, m.y)
        .toFixed(2), p.tooltip.update("X: " + c + " px<br>" + ("Y: " +
          f + " px"), b.pt)) : s && (c = Math.round((r + 360) % 360) +
        String.fromCharCode(176), p.tooltip.update(c, b.pt)));
      c = d.pixelRatio;
      f = c * d.zoom;
      b = h.x * f + a.x;
      h = h.y * f + a.y;
      c *= 10;
      f = e.active.ctx;
      f.save();
      f.beginPath();
      f.shadowOffsetX = 1;
      f.shadowOffsetY = 1;
      f.shadowColor = "rgba(255,255,255,0.5)";
      f.shadowBlur = 0;
      f.beginPath();
      f.translate(b, h);
      f.rotate((r + 45) * w.DEG_RAD);
      t.cross(f, 0, 0, c, c);
      f.shadowColor = "rgba(0,0,0,0.5)";
      f.strokeStyle =
        "#dd167a";
      f.stroke();
      f.restore()
    };
    h.renderControls = function(a, c, k) {
      if (a === +a) {
        var r = {};
        r[a] = !0;
        a = r
      } else a = {};
      var r = d.selection.items,
        f = 1 === d.selection.length,
        s = c || r !== JSON.stringify(r),
        p = e.active.ctx;
      (c || k && s) && l.prepareGCO(d.tool.device.composite);
      b.controls = [];
      r = b.children;
      for (c = 0; c < r.length; c++) {
        k = b.children[c];
        s && (k.dirtyControl = !0);
        var m = d.selection.idx === c;
        d.hovered.items[c] && !f || f && m ? h.drawControls(p, k) : (a[
          c] || m) && h.drawControls(p, k, !0)
      }
    };
    h.drawControls = function(e, k, r) {
      var f = k.trx2D;
      if (f &&
        f.apply && k && !1 !== k.visible && k.dirtyControl) {
        delete k.dirtyControl;
        var s = h.activeControlIdx;
        if ("anchor" !== s) {
          var p = "spinner" === s,
            m = !!v[s],
            t = d.selection.id === k.id,
            x = d.__editing && t && !(c.text && c.text.dragging);
          if ((s = k.brush) && s.drawControl) {
            var z = s.drawControl(k);
            t && (b.controls = z)
          } else {
            var s = k.bbox,
              l = d.pixelRatio,
              y = d.zoom,
              w = y * l,
              u = l / w,
              A = s.scale,
              g = A.x,
              aa = A.y,
              R = s.width,
              ea = s.height,
              A = R * g,
              Z = ea * aa,
              ga = q.tools[k.toolkitId] || {},
              z = ga.controls || {},
              z = z.anchor || {};
            !ga.drawBBox || p || x || (e.save(), e.translate(a.x, a.y),
              e.scale(w, w), f.apply(e, !0), e.beginPath(), e.rect(0, 0,
                A, Z), e.restore(), t = t ? z.focus || z : z.normal || z,
              e.save(), e.lineWidth = (t.lineWidth || 1) * l, e.shadowOffsetX =
              t.shadowOffsetX || 1, e.shadowOffsetY = t.shadowOffsetY ||
              1, e.shadowBlur = t.shadowBlur || 0, "light" === q.theme ?
              (e.shadowColor = t.shadowColor || "#fff", e.strokeStyle =
                t.strokeStyle || "#666") : (e.shadowColor = t.strokeStyle ||
                "#666", e.strokeStyle = t.shadowColor || "#fff"), e.stroke(),
              e.restore());
            if (!r) {
              b.controls = [];
              r = d.theme.getControls();
              t = r.padding;
              x = f.point2d(0 > g ? g * R :
                0, 0 > aa ? aa * ea : 0);
              if (r.anchor) {
                var l = r.anchor,
                  ga = l.padding,
                  z = ga * u,
                  W = "";
                d.selection.items[k.zIndex] && (W = l["title." + k.type +
                  ":selected"] || l["title:selected"]);
                "" === W && (W = l["title." + k.type] || l.title || "");
                b.controls.push({
                  id: "anchor",
                  layerId: k.id,
                  layerIdx: k.zIndex,
                  type: "button",
                  cursor: l.cursor,
                  title: W,
                  event: l.command,
                  padding: ga,
                  bbox: {
                    units: s.units,
                    x: x.x,
                    y: x.y,
                    left: 1.5 * -ga,
                    top: 1.5 * -ga,
                    width: Math.abs(g * R + z),
                    height: Math.abs(aa * ea + z),
                    scale: {
                      x: 1,
                      y: 1
                    },
                    rotate: s.rotate
                  }
                })
              }
              if (!1 === m && r.spinner && !1 !== k.useControlSpinner) {
                e.save();
                e.translate(a.x, a.y);
                e.scale(w, w);
                e.lineWidth = 1 / y;
                e.beginPath();
                if (p) {
                  t = r["spinner-focus"];
                  e.strokeStyle = t.fillStyle;
                  e.moveTo(f.cp.x, f.cp.y);
                  e.lineTo(f.spinnerPoint.x, f.spinnerPoint.y);
                  e.stroke();
                  e.restore();
                  B(e, f, s, {
                    id: "spinner",
                    x: A / 2,
                    y: f.spinnerDistance
                  });
                  return
                }
                e.moveTo(f.n.x, f.n.y);
                e.lineTo(f.spinner.x, f.spinner.y);
                e.stroke();
                e.restore();
                B(e, f, s, {
                  id: "spinner",
                  x: A / 2,
                  y: (r.width + t) / y * (0 < aa ? -1 : 1)
                })
              }
              p = r.nw && !1 !== k.useControlNW;
              m = r.ne && !1 !== k.useControlNE;
              y = r.se && !1 !== k.useControlSE;
              w = r.sw && !1 !== k.useControlSW;
              g = r.n && !1 !== k.useControlN;
              aa = r.e && !1 !== k.useControlE;
              R = r.s && !1 !== k.useControlS;
              k = r.w && !1 !== k.useControlW;
              ea = p + g + m;
              x = p + k + w;
              l = t;
              ga = (r.nw.width + l) * (ea - 1) * u;
              u *= (r.nw.height + t) * (x - 1);
              ga = Math.abs(A) - ga;
              u = Math.abs(Z) - u;
              0 > ga && (l = Math.max(0, l + ga / ea));
              0 > u && (t = Math.max(0, t + u / x));
              r.nw_spinner && (B(e, f, s, {
                id: "nw_spinner",
                color: "#00f",
                x: 0,
                y: 0
              }), B(e, f, s, {
                id: "ne_spinner",
                color: "#f0f",
                x: 0,
                y: 0
              }), B(e, f, s, {
                id: "se_spinner",
                color: "#f00",
                x: 0,
                y: 0
              }), B(e, f, s, {
                id: "sw_spinner",
                color: "#ff0",
                x: 0,
                y: 0
              }));
              g && B(e, f, s, {
                id: "n",
                color: "#e9e34d",
                x: A / 2,
                y: 0,
                xPad: l,
                yPad: t
              });
              aa && B(e, f, s, {
                id: "e",
                color: "#e13b3b",
                x: A,
                y: Z / 2,
                xPad: l,
                yPad: t
              });
              R && B(e, f, s, {
                id: "s",
                color: "#e9e34d",
                x: A / 2,
                y: Z,
                xPad: l,
                yPad: t
              });
              k && B(e, f, s, {
                id: "w",
                color: "#e13b3b",
                x: 0,
                y: Z / 2,
                xPad: l,
                yPad: t
              });
              p && B(e, f, s, {
                id: "nw",
                color: "#4fe896",
                x: 0,
                y: 0
              });
              m && B(e, f, s, {
                id: "ne",
                color: "#3b8de1",
                x: A,
                y: 0
              });
              y && B(e, f, s, {
                id: "se",
                color: "#4fe896",
                x: A,
                y: Z
              });
              w && B(e, f, s, {
                id: "sw",
                color: "#3b8de1",
                x: 0,
                y: Z
              });
              r.nw_spinner_area && (B(e, f, s, {
                id: "nw_spinner_area",
                color: "#f00",
                x: 0,
                y: 0
              }), B(e, f, s, {
                id: "ne_spinner_area",
                color: "#ff0",
                x: 0,
                y: 0
              }), B(e, f, s, {
                id: "se_spinner_area",
                color: "#0f0",
                x: 0,
                y: 0
              }), B(e, f, s, {
                id: "sw_spinner_area",
                color: "#0ff",
                x: 0,
                y: 0
              }))
            }
          }
        }
      }
    };
    var B = function(c, e, k, r) {
        var f = r.id,
          s = eventjs.isTouch ? "normal" : h.activeControlIdx === f ?
          "focus" : h.hoverControlIdx === f ? "hover" : "normal",
          p = d.theme.getControls(),
          m = p[f + "-" + s] || p[f];
        if (m) {
          var t = d.zoom,
            v = t * d.pixelRatio;
          if (m.padding === +m.padding) var x = m.padding,
            q = x / t,
            z = x / t;
          else x = p.padding, q = r.xPad, z = r.yPad, q = (q === +q ? q :
            x) / t, z = (z === +z ? z : x) / t;
          var l = k.scale.x,
            y = k.scale.y,
            x = 0 > l ? -1 : 1,
            u = 0 > y ?
            -1 : 1,
            B = (x * m.left || 0) / t,
            A = (u * m.top || 0) / t,
            l = {
              inherit: p.width / t * x,
              percent: k.width * l
            },
            g = {
              inherit: p.height / t * u,
              percent: k.height * y
            },
            p = m.width,
            Z = m.height;
          "string" === typeof p && (p = w.parseMath(p, l) * t);
          "string" === typeof Z && (Z = w.parseMath(Z, g) * t);
          var y = p / t,
            ga = Z / t,
            W = m.x;
          W !== +W && (W = "string" === typeof W ? w.parseMath(W, l) - p /
            2 / t : r.x - y / 2);
          l = m.y;
          l !== +l && (l = "string" === typeof l ? w.parseMath(l, g) - Z /
            2 / t : r.y - ga / 2);
          0 > y && (W += y, y = -y);
          0 > ga && (l += ga, ga = -ga);
          e = e.point2d(W, l);
          k = {
            units: k.units,
            x: e.x,
            y: e.y,
            left: -q + B,
            top: -z + A,
            width: y +
              2 * q,
            height: ga + 2 * z,
            scale: {
              x: 1,
              y: 1
            },
            rotate: k.rotate
          };
          b.controls.push({
            id: f,
            title: m.title,
            type: "button",
            cursor: m.cursor || "default",
            hovered: "hover" === s,
            event: m.command,
            onmousedown: m.onmousedown,
            onmouseup: m.onmouseup,
            onhover: m.onhover,
            bbox: k
          });
          c.save();
          c.beginPath();
          c.translate(a.x, a.y);
          c.scale(v, v);
          c.translate(k.x, k.y);
          c.rotate(k.rotate * w.DEG_RAD);
          f = "svg" === m.shape ? p / m.viewBox[2] : 1;
          c.translate(B, A);
          m.render({
            ctx: c,
            matrix: {
              a: f * x / t,
              b: 0,
              c: 0,
              d: f * u / t,
              x: 0,
              y: 0
            }
          });
          c.restore()
        }
      },
      A = String.fromCharCode(65279);
    h.hide =
      function() {
        var a = d.selection.item,
          e = h.inGenesis;
        h.inGenesis = void 0;
        d.__editing = !1;
        var k = c.text;
        if (k && a && "text" === a.type) {
          var r = k.getContent();
          h.hideArea();
          r !== A && (a.content = r, k.updateObjectSize(a));
          if (a.content.trim()) a.dirtyCheck = !0;
          else if (e) {
            b.removeByIndex(d.selection.idx, !1);
            b.deselectAll();
            a.__cache = void 0;
            return
          }
        } else h.hideArea();
        if (e) {
          if (a) {
            k = b.clone(a);
            k.id = b.createId();
            k.dirtyCheck = !0;
            k.render = a.render;
            var f;
            a.svg && (f = a.svg);
            b.removeByIndex(a.zIndex, !1);
            b.addObject(k);
            f && (a.svg = f);
            b.deselectAll();
            d.render("area.hide");
            d.history && !h.inGenesisChannel && d.history.store({
              cmd: "add",
              icon: k.type,
              name: k.type,
              data: b.clone([k])
            });
            h.inGenesisChannel = !1
          }
        } else a && (f = a.__cache) && void 0 !== f.id && ("text" === f
          .type && k && (e = b.getById(f.id), k.historyUpdateText(f, e)),
          a.__cache = void 0)
      };
    h.show = function(a) {
      var e = c.text;
      e && (a = a || b.getOneSelected()) && (a.__cache = b.clone(a),
        "text" === a.type ? (e.setContent(a.content), h.showArea(a),
          a.dirtyControl = !0, d.render.clean("area.show")) : h.hideArea()
      )
    };
    h.hideArea = function() {
      var a = c.text;
      a && (d.__editing = !1, a.container.style.opacity = 0, a.container
        .style.display = "none", a.blur())
    };
    h.showArea = function(a) {
      var b = c.text;
      b && (d.__editing = !0, b.updateObjectSize(a), b.container.style
        .opacity = 1, b.container.style.display = "block", b.focus())
    };
    h.disableArea = function() {
      var a = c.text;
      a && (a.container.style.pointerEvents = "none", a.blur())
    };
    h.enableArea = function(a) {
      if (a = c.text) a.container.style.pointerEvents = "auto", a.focus()
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Controls)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.SceneFind = function(f, d) {
    var a = d.canvas2d,
      e = f.feature,
      q = d.contexts,
      l = d.scene,
      b = d.render,
      c = f.vector,
      p = c.Polygon,
      w = c.Point;
    l.findInRect = function(h) {
      var c = h.rect || h,
        f = h.layers || l.children,
        m = h.deselect || !1,
        s = h.drawBBox || !1;
      h = h.usePointInBBox || !1;
      var t = d.zoom,
        y = d.pixelRatio;
      if (2 === c.length) var u = c[0],
        A = c[1],
        c = [u, w(A.x, u.y), A, w(u.x, A.y)];
      else u = c[0], A = c[2];
      b.prepareGCO(d.tool.device.composite);
      d.hovered.reset();
      var g = q.active.ctx,
        F = q.draw.ctx,
        E = A.x - u.x,
        D = A.y - u.y;
      F.rect(u.x + .5, u.y + .5, E, D);
      for (var u = d.selection, A = u.length, m = m && A, A = {}, P =
          f.length; P--;)
        if (E = f[P], !1 !== E.selectable && !1 !== E.visible) {
          var G = E.trx2D;
          if (G && G.point2d) {
            var J = [G.nw, G.ne, G.se, G.sw],
              D = E.bbox,
              N = D.scale;
            0 > N.x * N.y && J.reverse();
            if (p.SAT(c, J))
              if ((e.tools[E.toolkitId] || {}).usePointInPath && !1 === h)
                for (D = E.data, N = D.length, J = 0; J < N; J++) {
                  var K = D[J],
                    K = G.point2d(K.x, K.y);
                  if (F.isPointInPath(K.x, K.y)) {
                    if (m)
                      if (u.items[P]) A[P] = !1, b.layer(E.ctx, E);
                      else continue;
                    else A[P] = !0, b.layer(E.ctx, E);
                    break
                  }
                } else m &&
                  u.items[P] ? (J = "rgba(0,0,0,0.20)", K =
                    "rgba(255,255,255,0.20)", A[P] = !1) : (J =
                    "rgba(255,255,255,0.20)", K = "rgba(0,0,0,0.20)", A[P] = !
                    0, E.dirtyControl = !0), s && (E = D.width * N.x, D = D.height *
                    N.y, g.save(), g.beginPath(), g.translate(a.x, a.y), g.scale(
                      t * y, t * y), G.apply(g, !0), g.rect(0, 0, E, D), g.fillStyle =
                    J, g.lineWidth = 1 / t, g.strokeStyle = K, g.stroke(), g
                    .fill(), g.restore())
          }
        }
      return A
    };
    l.findAtPoint = function(a) {
      var h = l.pointInSceneFromWorld(a.point),
        c = a.layers || l.children,
        f = a.pointerUp || !1;
      a = a.searchParam || {
        selectable: !0
      };
      var s =
        d.tool.id,
        p = e.tools[s] || {},
        s = "select" === s,
        m = !e.vector.edit,
        t = eventjs.metaKey,
        w = b.cache.padding,
        u = d.pixelRatio,
        g = d.selection.items,
        E = 0 === d.selection.length || t,
        D = !0,
        P = void 0,
        G = q.draw.ctx;
      G.canvas.width = G.canvas.width;
      for (var G = [], J = c.length; J--;) {
        var N = c[J];
        if (!1 !== N.visible) {
          var K = N.bbox;
          if (K) {
            var O = "button" === N.type;
            if (O) {
              if (t && "anchor" === N.id) continue
            } else if (m) continue;
            else {
              if (a.excludeType && N.type === a.excludeType) continue;
              if (a.selectable && !1 === N.selectable) continue;
              if (a.toolkitId && N.toolkitId !==
                a.toolkitId) continue;
              if (a.type && N.type !== a.type) continue;
              if (D && E)
                if ((D = d.hovered.item) && l.isPointInControl(h, D)) {
                  G.push(D.zIndex);
                  break
                } else D = !1
            }
            if (l.isPointInControl(h, N)) {
              var V = K.scale,
                L = V.x,
                V = V.y;
              if (O)
                if (!f && s && "anchor" === N.id) continue;
                else if (G.push(J), N.event) break;
              else continue;
              else if (f && g[J]) {
                G.push(J);
                break
              } else if (E && (p.usePointInPath || p.usePointInImageData) &&
                N.ctx) {
                var O = N.ctx,
                  T = l.pointInObjectFromScene(h, N),
                  N = N.__offset || l.getOffset(N),
                  Q = Math.abs(L),
                  U = Math.abs(V),
                  da = T.x,
                  aa = T.y;
                0 > L && (da = -da + T.bbox_width);
                0 > V && (aa = -aa + T.bbox_height);
                da = da * Q * u + w;
                aa = aa * U * u + w;
                da += N.x || 0;
                aa += N.y || 0;
                da = Math.round(da);
                aa = Math.round(aa);
                if (p.usePointInPath && O.isPointInPath(da, aa)) {
                  G.push(J);
                  break
                } else if (p.usePointInImageData && 8 < O.getImageData(da,
                    aa, 1, 1).data[3]) {
                  G.push(J);
                  break
                }
              }
              if (p.usePointNearest) {
                G.push(J);
                break
              }
              p.usePointInBBox && (K = K.width * L * K.height * V, void 0 ===
                P || P >= K) && (G.push(J), P = K)
            }
          }
        }
      }
      return G
    };
    var m = l.pointInObjectFromScene = function(a, b) {
        var h = b.trxInverse || l.calcMatrixInverse(b),
          c = b.bbox;
        a =
          h.point2d(a.x, a.y);
        a.x -= h.tlx + (c.left || 0);
        a.y -= h.tly + (c.top || 0);
        a.bbox_x = h.tlx;
        a.bbox_y = h.tly;
        a.bbox_width = c.width;
        a.bbox_height = c.height;
        return a
      },
      u = l.pointInObjectFromWorld = function(a, b) {
        return m(t(a), b)
      };
    l.pointsInObjectFromWorld = function(a, b) {
      for (var h = [], c = 0, d = a.length; c < d; c++) h.push(u(a[c],
        b));
      return h
    };
    var t = l.pointInSceneFromWorld = function(b) {
      var h = d.zoom,
        c = h * d.pixelRatio;
      return {
        x: (b.x + 0) / h - 1 * a.x / c,
        y: (b.y + 0) / h - 1 * a.y / c
      }
    };
    l.pointsInScene = function(a) {
      for (var b = 0, h = a.length; b < h; b++) a[b] = t(a[b]);
      return a
    };
    l.pointInSceneFromEvent = function(a) {
      return t(h(a))
    };
    var h = l.pointInWorldFromEvent = function(a) {
      var b = eventjs.getBBox(d.container);
      a = eventjs.getClientXY(a);
      a.x -= b.x1;
      a.y -= b.y1;
      return a
    };
    l.isPointInControl = function(a, b) {
      var h = b.trx2D;
      if (h) return w.inRect(a, h.nw, h.ne, h.se);
      var c = l.pointInObjectFromScene(a, b),
        h = c.bbox_width,
        d = c.bbox_height,
        e = c.bbox_x,
        f = c.bbox_y,
        p = c.x + e,
        c = c.y + f;
      return p > e && c > f && p < e + h && c < f + d
    };
    l.find = function(a, b) {
      b = b || {};
      var h = l.children,
        c = b.selection || l.selection.items,
        d = [],
        e;
      for (e in c)
        if (c = h[e]) {
          var f = !0,
            p;
          for (p in a) c[p] !== a[p] && (f = !1);
          f && d.push(c)
        }
      return d
    };
    l.findPixel = function(a, b, h) {
      var c = d.pixelRatio;
      a = d.contexts.layer0.ctx.getImageData(a.x * c, a.y * c, b || 1,
        h || 1).data;
      b = {};
      h = 0;
      for (c = a.length; h < c; h++) {
        var e = h % 4;
        b[e] = void 0 === b[e] ? a[h] : (b[e] + a[h]) / 2
      }
      return b
    };
    "undefined" !== typeof module && module.exports && (module.exports =
      f.module.SceneFind)
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.History = function(f, d) {
    var a = this,
      e = f.feature,
      q = d.contexts,
      l = f.lang,
      b = d.render || {},
      c = d.scene,
      p = d.toolkit,
      w = f.util,
      m = e.history,
      u = {};
    a.registerFunction = function(a) {
      var b = a.fn;
      u[a.type] = function(a, h, c, d, e, k) {
        b(a, h, c, d, e, k);
        v(h, d)
      }
    };
    a.reset = function(b, h) {
      f.doc.__lastModified = 0;
      m.vector ? a.resetActionHistory(h) : m.bitmap && a.resetBitmapHistory(
        h);
      return a
    };
    a.store = function(b, h) {
      f.doc.__lastModified = Date.now();
      m.vector ? a.storeAction(b, h) : m.bitmap && a.storeBitmap(h);
      f.on.historyAdd && f.on.historyAdd(b);
      k(!0);
      return a
    };
    a.redo = function(b, h, c) {
      t("redo", b, h, function() {
        f.on.redo && f.on.redo(b);
        c && c();
        k(!0)
      });
      return a
    };
    a.undo = function(b, h, c) {
      t("undo", b, h, function() {
        f.on.undo && f.on.undo(b);
        c && c();
        k(!0)
      });
      return a
    };
    a.canRedo = function() {
      if (m.vector) {
        var b = a.vector;
        return b.current !== b.data.length - 1
      }
    };
    a.canUndo = function() {
      if (m.vector) return -1 !== a.vector.current
    };
    a.findCmd = function(b) {
      if (m.vector) {
        var h = b.cmd,
          c = a.vector.current,
          d = c - b.within;
        b = a.vector.data;
        for (var e = c < d ?
            1 : -1, d = Math.abs(c - d), k = 0; k < d; k++) {
          var r = c += e;
          if (b[r].cmd === h) return !0
        }
      }
    };
    var t = function(b, h, c, d) {
      --h;
      if (m.vector) a[b + "Action"](h, c);
      else if (m.bitmap) a[b + "Bitmap"](h, c);
      h ? t(b, h, c, d) : d && d()
    };
    a.bitmap = {
      max: m.limit,
      current: -1,
      data: []
    };
    a.resetBitmapHistory = function(b) {
      var h = a.bitmap;
      h.current = 0;
      h.data = h.data.splice(0, 1);
      d.setCanvasSize();
      a.storeBitmap(b);
      return a
    };
    a.storeBitmap = function(b) {
      b = e.debugHistory;
      var h = a.bitmap,
        c = h.data.length - 1,
        d = c - h.current;
      if (d) {
        if (b)
          for (var k = 0; k < d; k++) {
            var r = h.data[c - k];
            document.body.removeChild(r)
          }
        h.data = h.data.splice(0, c - d + 1)
      }
      h.data.length === h.max ? h.data.push(h.data.shift()) : h.data.push(
        w.Canvas());
      h.current = h.data.length - 1;
      r = q.layer0;
      h = h.data[h.current].ctx;
      h.canvas.width = h.canvas.width;
      h.drawImage(r, 0, 0);
      b && document.body.appendChild(h.canvas);
      return a
    };
    a.undoBitmap = function(b, h) {
      var c = q.layer0.ctx,
        e = a.bitmap;
      e.current = Math.max(0, --e.current);
      c.canvas.width = c.canvas.width;
      c.drawImage(e.data[e.current], 0, 0);
      "eraser" === d.tool.type && (c = q.active.ctx, c.canvas.width =
        c.canvas.width, c.drawImage(e.data[e.current], 0, 0));
      return a
    };
    a.redoBitmap = function(b, h) {
      var c = q.layer0.ctx,
        e = a.bitmap;
      e.current = Math.min(e.data.length - 1, ++e.current);
      c.canvas.width = c.canvas.width;
      c.drawImage(e.data[e.current], 0, 0);
      "eraser" === d.tool.type && (c = q.active.ctx, c.canvas.width =
        c.canvas.width, c.drawImage(e.data[e.current], 0, 0));
      return a
    };
    a.vector = {
      max: m.limit,
      current: -1,
      data: []
    };
    a.resetActionHistory = function(b) {
      a.vector.data = [];
      a.vector.current = -1;
      return a
    };
    a.getLastAction = function() {
      var b =
        a.vector.data;
      return b[b.length - 1]
    };
    a.storeAction = function(b, d) {
      if (b.cmd && b.data) {
        var k = a.vector,
          p = k.data.length - 1,
          m = p - k.current;
        m && (k.data = k.data.splice(0, p - m + 1));
        k.data.length === k.max && k.data.shift();
        !b.uid && f.net.socket && (b.uid = f.net.socket.user.id);
        p = c.clone(b);
        k.data.push(p);
        k.current = k.data.length - 1;
        h = k.current;
        d || f.fromServer ? (k = a.vector, k.data[k.current] && (h =
            void 0, "transform" === b.from.cmd && e.stream.realtime ||
            r(b, !1, d))) : f.net.dataChannel && e.stream.sketch && !d &&
          f.net.dataChannel.sendPriority(["history.store",
            c.clone(b)
          ])
      }
      return a
    };
    a.undoAction = function(b, h) {
      q.active && q.active.ctx && (w.Canvas.blip(q.active), w.Canvas.blip(
        q.draw));
      var c = a.vector;
      a.canUndo() && (c.current = Math.max(-1, --c.current), c = c.data[
        c.current + 1]) && (r(c, !0, h, b), f.net.dataChannel && e.stream
        .sketch && !h && (f.net.dataChannel.sendPriority([
          "history.undo", {
            steps: b
          }, !0
        ]), f.net.dataChannel.send(["history.undo", {
          steps: b
        }])));
      return a
    };
    a.redoAction = function(b, h) {
      var c = a.vector;
      a.canRedo() && (c.current = Math.min(c.data.length - 1, ++c.current),
          c = c.data[c.current]) &&
        (r(c, !1, h, b), f.net.dataChannel && e.stream.sketch && !h &&
          (f.net.dataChannel.sendPriority(["history.redo", {
            steps: b
          }, !0]), f.net.dataChannel.send(["history.redo", {
            steps: b
          }])));
      return a
    };
    var h = 0;
    a.registerFunction({
      type: "VOBNodeList",
      fn: function(a, b, h, d) {
        for (a = 0; a < b.length; a++) {
          var e = b[a];
          if (d = c.getById(e.id)) {
            var k = f.assets.getItem(d.src);
            if (k) {
              k.__colormap = void 0;
              var r = {},
                p;
              for (p in e) "id" !== p && "uida" !== p && (r[p] = e[p]);
              for (var e = e.uida, m = 0; m < e.length; m++) {
                var t = e[m],
                  v = k.getLayerBy("uid", t.uid);
                if (v)
                  if (h)
                    for (p in t) "uid" !==
                      p && (v.style[p] = t[p]);
                  else
                    for (p in r) v.style[p] = r[p]
              }
              d.dirtyCache = !0;
              d.dirtyRender = !0
            }
          }
        }
      }
    });
    a.registerFunction({
      type: "add",
      fn: function(a, b, h, e, k) {
        for (a = 0; a < b.length; a++) h = b[a], c.getById(h.id) ||
          (k = c.clone(h), c.decompress(k), f.fromServer || p.ensureToolkit(
            k), c.pushAt(k, h.zIndex), c.updateTransform && (c.updateTransform(
            k), c.setDirtyPixelData(k)), e && p.area.inGenesis && (c.deselect(
              d.selection.idx), d.selection.idx = c.getById(w.INFINITY)
            .zIndex + 1));
        c.reindex()
      }
    });
    a.registerFunction({
      type: "remove",
      fn: function(a,
        h, e, k, r) {
        a = c.children;
        for (e = 0; e < h.length; e++) {
          r = h[e].id;
          var p = c.getById(r);
          if (p)
            for (k && p.zIndex === d.selection.idx && (c.deselectAll(),
                f.ui.log(k + " removed the layer you had selected.")), p =
              0; p < a.length; p++)
              if (a[p].id === r) {
                b.cache && b.cache.clean(a[p].hash);
                c.setDirtyPixelData(a[p]);
                c.shiftAt(p);
                break
              }
        }
        c.reindex()
      }
    });
    a.registerFunction({
      type: "replace",
      fn: function(a, b, c, d) {
        c ? (a = b[1], b = b[0]) : (a = b[0], b = b[1]);
        h = void 0;
        r({
          cmd: "remove",
          data: a
        }, !1, d, 1);
        h = void 0;
        r({
          cmd: "add",
          data: b
        }, !1, d, 0)
      }
    });
    a.registerFunction({
      type: "zoom",
      fn: function(a, b, h, c, d) {
        console.log("zoom", a, b, h)
      }
    });
    var r = function(e, k, r, p) {
        r = r || !1;
        var m = e.cmd,
          t = e.data;
        if (h !== a.vector.current) {
          h = a.vector.current;
          "remove" === m ? k && (m = "add") : "add" === m && k && (m =
            "remove");
          var q = u[m];
          if (q) q(m, t, k, r, p, e.uid), f.fromServer || p || b.preload({
            fromSocket: !0
          });
          else {
            e = k ? t.from : t.to;
            if (Array.isArray(e)) {
              k = 0;
              for (m = e.length; k < m; k++)
                if (t = e[k], q = c.getById(t.id)) t.labels && (q.labels = []),
                  w.cloneInto(t, q), c.decompress(q), t.fill && delete q.fill
                  .__colors, t.stroke && delete q.stroke.__colors,
                  delete q.__offset, c.setDirtyPixelData(q), t.content ? (q.__textMetrics =
                    void 0, q.dirtyCheck = !0) : t.color || t.fillStyle || t.bbox &&
                  t.bbox.scale ? (q.dirtyCheck = !0, q.dirtyTransform = !0,
                    delete q.inbounds) : (q.dirtyCheck = !0, q.dirtyResource = !
                    0);
              v(e, r)
            } else w.cloneInto(e, d);
            f.fromServer || p || (b.preload({
              fromSocket: !0
            }), f.ui.configureBuild())
          }
        }
      },
      k = function() {
        var a = 0,
          b = function() {
            sk.p = sk.perf();
            f.fs.saveProject({
              onprogress: function() {},
              onsuccess: function() {
                f.ui.log(l.translate("changes-saved"), 750)
              }
            })
          };
        return function(h) {
          f.fs.autosave &&
            f.fs.fs && (clearTimeout(a), a = setTimeout(function() {
              if (d.__interacting) return k(!1);
              b()
            }, 1E3))
        }
      }(),
      v = function(a, b) {
        if (!b)
          if (m.autoSelect) {
            if ("select" === d.tool.type) {
              for (var h = 0; h < a.length; h++) {
                var e = a[h];
                isFinite(e) ? c.selectById(e, !1) : c.selectById(e.id, !1)
              }
              c.handleSelection()
            }
          } else c.deselectAll()
      };
    return a
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.History)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.SceneOrganize = function(f, d) {
    var a = f.util,
      e = d.scene;
    f.setupHistory && f.setupHistory.add({
      type: "organize",
      fn: function(a, b, c, f) {
        a = e.children;
        f = c ? b.from : b.to;
        c = c ? b.to : b.from;
        b = "select" === d.tool.type;
        e.selection.reset();
        c = q(a, c);
        var w = c.length;
        if (w) {
          for (var m = 0; m < w; m++) {
            var u = c[m];
            a.splice(f[m], 0, u.layer);
            e.setDirtyPixelData(u.layer);
            b && e.selectByIdx(u.idx)
          }
          e.reindex()
        }
      }
    });
    var q = function(a, b) {
      for (var c = [], d = 0; d < b.length; d++) {
        var e = b[d],
          f = a[e - d];
        f.useStickToFront ||
          f.useStickToBack || !f || (a.splice(e - d, 1), c.push({
            layer: f,
            idx: e
          }))
      }
      return c
    };
    e.sendTo = function(f) {
      f = f || {};
      var b = f.idx,
        c = (f.record || !1) && d.history,
        p = e.selection.asArray(f.selection),
        w = f.onsuccess,
        m = e.children,
        u;
      a: {
        u = 0;
        for (var t = e.children, h = t.length, r = 0; r < h; r++)
          if (t[r].useStickToBack) u++;
          else break a;
        u = void 0
      }
      a: {
        t = 0;
        h = e.children;
        for (r = h.length; r--;)
          if (h[r].useStickToFront) t++;
          else break a;
        t = void 0
      }
      u = a.clamp(b, 0 + u, m.length - t);
      p = q(m, p);
      if (t = p.length) {
        for (r = h = 0; r < t; r++) {
          var k = p[r];
          if (k.idx < u) h++;
          else break
        }
        for (var v = [], x = [], r = 0; r < t; r++) {
          var k = p[r],
            s = k.layer,
            b = u - h + r;
          e.setDirtyPixelData(s);
          m.splice(b, 0, s);
          k.idx !== b && (v.push(k.idx), x.push(b))
        }
        c && v.length && d.history.store({
          cmd: f.cmd || "organize",
          icon: f.icon || "infinity",
          name: f.name || "layer-order",
          data: {
            from: v,
            to: x
          }
        });
        e.reindex();
        w && w()
      }
      return e
    };
    e.sendForwards = function(a) {
      a = a || {};
      var b = a.distance || 1,
        c = a.toFront || !1,
        d = a.record || !1;
      a = e.selection.asArray(a.selection);
      c ? (b = e.children.length, c = "layer-to-front") : (b = a[a.length -
        1] + b + 1, c = "layer-forwards");
      return e.sendTo({
        idx: b,
        cmd: "organize",
        name: c,
        record: d,
        onsuccess: function() {
          f.on.sendForwards && f.on.sendForwards()
        }
      })
    };
    e.sendBackwards = function(a) {
      a = a || {};
      var b = a.distance || 1,
        c = a.toBack || !1,
        d = a.record || !1;
      a = e.selection.asArray(a.selection);
      c ? (b = 0, c = "layer-to-back") : (b = a[0] - b, c =
        "layer-backwards");
      return e.sendTo({
        idx: b,
        cmd: "organize",
        name: c,
        record: d,
        onsuccess: function() {
          f.on.sendBackwards && f.on.sendBackwards()
        }
      })
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.SceneOrganize)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Orientation = function(f, d, a) {
    var e = this,
      q = d.canvas2d,
      l = f.feature.zoom || {},
      b = f.feature,
      c = d.render,
      p = d.scene,
      w = d.toolkit,
      m = f.vector;
    e.mirrorX = 1;
    e.mirrorY = 1;
    e.zoom = {
      clampFormat: "px",
      fromCenter: !0,
      value: 1,
      min: 20,
      max: 100
    };
    e.rotate = {
      clampFormat: "degree",
      value: 0,
      min: 0,
      max: 0
    };
    e.offset = {
      x: 0,
      y: 0
    };
    e.origin = {
      x: 0,
      y: 0
    };
    e.mouse = {
      x: 0,
      y: 0
    };
    for (var u in a) e[u] = a[u];
    e.ctx = e.canvas.getContext("2d");
    e.trx = {};
    e.trx.scale = new m.Transform;
    e.trx.rotate = new m.Transform;
    e.trx.mirror =
      new m.Transform;
    e.render = function() {
      e.decompose();
      c.clipped = !1;
      d.setBounds();
      d.render("orient.render");
      w.text && w.text.updateCSSTransform();
      return e
    };
    e.getTransform = function() {
      var a = new m.Transform,
        b = e.offset;
      a.combine(e.trx.mirror);
      a.combine(e.trx.scale);
      a.combine(e.trx.rotate);
      a.translate(b.x, b.y);
      return a
    };
    e.decompose = function() {
      var a = d.pixelRatio,
        b = e.getTransform(),
        c = new CSSMatrix,
        b = b.matrix;
      c.a = b.a;
      c.b = b.b;
      c.c = b.c;
      c.d = b.d;
      c.e = b.x;
      c.f = b.y;
      c = c.decompose().translate;
      b = e.zoom.value;
      d.zoom = b;
      q.orientX =
        Math.round(c.x);
      q.orientY = Math.round(c.y);
      q.x = Math.round(c.x - d.x * b * a);
      q.y = Math.round(c.y - d.y * b * a);
      d.scrollElementCSS()
    };
    e.reset = function(a) {
      e.media = d.bounds;
      a || (e.zoom.value = l.value || 1, e.rotate.value = 0, e.mirrorX =
        1, e.mirrorY = 1, e.offset.x = 0, e.offset.y = 0);
      b.doc.centerOnLoad && e.setCenter();
      e.scale = 1;
      e.mouse.x = 0;
      e.mouse.y = 0;
      e.origin.x = 0;
      e.origin.y = 0;
      e.setZoomAtCenter();
      e.mirrorTo(e.mirrorX, e.mirrorY);
      e.rotateTo(e.rotate.value);
      e.zoomTo(e.zoom.value, !0);
      e.decompose();
      return e
    };
    e.setCenter = function() {
      var a =
        d.pixelRatio,
        b = parseFloat(e.canvas.style.width) || e.canvas.width,
        c = parseFloat(e.canvas.style.height) || e.canvas.height;
      e.offset.x = Math.max(0, b / 2 - e.media.width / 2) * a;
      e.offset.y = Math.max(0, c / 2 - e.media.height / 2) * a;
      e.origin.x = 0;
      e.origin.y = 0;
      e.mouse.x = 0;
      e.mouse.y = 0;
      return e
    };
    e.setPan = function(a, b) {
      e.offset.x += isFinite(a) ? a : 0;
      e.offset.y += isFinite(b) ? b : 0;
      e.setZoomAtCenter();
      return e
    };
    e.setRotate = function(a) {
      e.rotate.value = 360 === a ? 360 : (a + 360) % 360;
      e.rotateTo(e.rotate.value);
      e.render();
      return e
    };
    e.setZoom = function(a,
      b) {
      var c = e.zoom.value,
        d = Math.max(e.media.width, e.media.width);
      if ("px" === e.zoom.clampFormat) var f = e.zoom.min / d,
        d = e.zoom.max / d;
      else f = e.zoom.min, d = e.zoom.max;
      f = Math.min(d, Math.max(f, a));
      e.zoom.value = f;
      (c = 1 + (f - c) / c) && e.zoomTo(c);
      return e
    };
    e.mirrorTo = function(a, b) {
      var c = e.media,
        d = -1 === a ? c.width : 0,
        c = -1 === b ? c.height : 0;
      e.trx.mirror.reset();
      e.trx.mirror.translate(d, c);
      e.trx.mirror.scale(a, b);
      return e
    };
    e.rotateTo = function(a) {
      var b = e.trx.rotate,
        c = e.media,
        d = c.width / 2 + e.offset.x,
        c = c.height / 2 + e.offset.y;
      b.reset();
      b.translate(d, c);
      b.rotate(a * Math.PI / 180);
      b.translate(-d, -c);
      return e
    };
    e.zoomTo = function(a, b) {
      if (!e.origin) return console.log("not initialized");
      var c = e.trx.scale;
      b && (c.reset(), e.origin.x = 0, e.origin.y = 0, e.scale = 1);
      c.translate(e.origin.x, e.origin.y);
      c.scale(a, a);
      e.zoom.fromCenter && (e.origin.x = e.mouse.x / e.scale + e.origin
        .x - e.mouse.x / (e.scale * a), e.origin.y = e.mouse.y / e.scale +
        e.origin.y - e.mouse.y / (e.scale * a), c.translate(-e.origin
          .x, -e.origin.y));
      e.scale *= a;
      return e
    };
    e.events = {};
    e.enabled = !1;
    e.enable = function() {
      if (!e.enabled) return e.enabled = !0, e.events.mousedown =
        eventjs.add(a.mouseLayer, "mousedown", e.onMouseDown), e.events
        .wheel = eventjs.add(a.mouseLayer, "wheel", e.onMouseWheel),
        e.events.key = eventjs.add(window, "keyup keydown", eventjs.keyTracker),
        e.events.keydown = eventjs.add(window, "keydown", e.onKeyDown),
        e
    };
    e.disable = function() {
      if (e.enabled) return e.enabled = !1, eventjs.removeEvents(e.events),
        e
    };
    e.lx = 0;
    e.ly = 0;
    e.onDrag = function(a, b) {
      eventjs.prevent(a);
      var c = e.zoom.value,
        k = b.x - b.start.x,
        f = b.y - b.start.y;
      "up" === b.state && (e.zoom.fromCenter ? e.setZoomAtCenter() :
        e.setZoomAtPoint(a), p.setDirtyBounds(p.children));
      var m = d.pixelRatio;
      e.offset.x += (k - e.lx) / c * e.mirrorX * m;
      e.offset.y += (f - e.ly) / c * e.mirrorY * m;
      e.lx = k;
      e.ly = f;
      e.render();
      e.runCallback();
      return e
    };
    e.onMouseDown = function(a) {
      eventjs.getBBox(e.canvas);
      e.lx = 0;
      e.ly = 0;
      e.events.drag = eventjs.proxy.drag({
        fingers: 1,
        event: a,
        target: e.canvas,
        listener: e.onDrag
      });
      return e
    };
    e.onMouseWheel = function(a, b) {
      eventjs.cancel(a);
      "end" === b.state && p.setDirtyBounds(p.children);
      e.setZoomAtPoint(a);
      var c = e.zoom.value;
      e.setZoom(c * (1 +
        b.wheelDelta / 120 / 2), !0);
      e.render();
      e.controllerSetZoom && c !== e.zoom.value && e.controllerSetZoom(
        e.zoom.value);
      e.runCallback();
      return e
    };
    e.onKeyDown = function(a) {
      var b = e.zoomMin,
        b = e.zoom.value / (e.zoomMax - b + b),
        c = a.shiftKey ? 10 : 1;
      switch (a.keyCode) {
        case 37:
          eventjs.metaKey ? (eventjs.cancel(a), e.setRotate(e.rotate.value +
            1 * c)) : (e.setPan(-1 * c, 0), e.render());
          e.runCallback();
          break;
        case 39:
          eventjs.metaKey ? (eventjs.cancel(a), e.setRotate(e.rotate.value -
            1 * c)) : (e.setPan(1 * c, 0), e.render());
          e.runCallback();
          break;
        case 38:
          eventjs.metaKey ?
            (eventjs.cancel(a), e.setZoom(b - .01 * c)) : e.setPan(0, -1 *
              c);
          e.render();
          e.runCallback();
          break;
        case 40:
          eventjs.metaKey ? (eventjs.cancel(a), e.setZoom(b + .01 * c)) :
            e.setPan(0, 1 * c), e.render(), e.runCallback()
      }
      return e
    };
    e.toString = function() {
      return JSON.stringify(e.getValues())
    };
    e.setZoomAtPoint = function(a) {
      a = eventjs.getCoord(a);
      var b = eventjs.getBBox(e.canvas),
        c = d.pixelRatio;
      e.mouse.x = (a.x - b.x1) * c;
      e.mouse.y = (a.y - b.y1) * c;
      return e
    };
    e.setZoomAtCenter = function() {
      var a = d.pixelRatio,
        b = d.viewport,
        c = e.media,
        k = e.getTransform(),
        f = k.point2d(0, 0),
        p = k.point2d(c.width, c.height),
        c = Math.max(0, f.x),
        f = Math.max(0, f.y),
        k = Math.min(b.height, p.y),
        b = Math.min(b.width, p.x),
        b = Math.max(0, b - c),
        k = Math.max(0, k - f);
      e.mouse.x = (c + b / 2) * a;
      e.mouse.y = (f + k / 2) * a;
      return e
    };
    e.getValues = function() {
      var a = e.zoom.value,
        b = e.trx.scale.matrix;
      return {
        x: b.x + e.offset.x * a,
        y: b.y + e.offset.y * a,
        zoom: a,
        rotate: e.rotate.value,
        mirror: {
          x: e.mirrorX,
          y: e.mirrorY
        }
      }
    };
    e.setMedia = function(a) {
      "string" === typeof a ? (e.media = new Image, e.media.onload =
        function() {
          e.reset(!0)
        }, e.media.src =
        a) : (e.media = a, e.reset(!0));
      return e
    };
    e.runCallback = function(a) {
      e.callback && e.callback({
        rotate: e.rotate.value,
        zoom: e.zoom.value,
        mirrorX: e.mirrorX,
        mirrorY: e.mirrorY
      });
      return e
    };
    return e
  };
  g.module.Orientation.createController = function(f, d) {
    var a = f.feature.zoom || {},
      e = f.dom,
      q = d.contexts,
      l = d.scene,
      b = d.orient = new f.module.Orientation(f, d, {
        src: d.bounds,
        canvas: q.layer0,
        mouseLayer: q.active,
        rotate: {
          clampFormat: "degree",
          value: 0,
          min: 0,
          max: 0
        },
        zoom: {
          clampFormat: "%",
          fromCenter: a.fromCenter,
          value: a.value,
          min: a.min,
          max: a.max,
          increment: a.increment
        }
      });
    b.setMedia(b.src);
    b.controllerReset = function() {
      b.reset().render();
      var c = b.getKnobOffset(a.defaultValue);
      b.setController(c)
    };
    b.controllerSetZoom = function(a) {
      a = b.getKnobOffset(a || 1);
      b.setController(a)
    };
    b.getKnobOffset = function(a) {
      var h = b.zoom.max;
      a = a || d.zoom;
      var e = c.offsetHeight || 150;
      a = 2 + Math.log(a) / Math.log(2);
      h = 2 + Math.log(h) / Math.log(2);
      return (1 - a / h) * e
    };
    b.controllerZoomOut = function() {
      var a = Math.max(b.zoom.min, d.zoom - b.zoom.increment),
        a = b.getKnobOffset(a);
      b.setController(a)
    };
    b.controllerZoomIn = function() {
      var a = Math.max(b.zoom.min, d.zoom + b.zoom.increment),
        a = b.getKnobOffset(a);
      b.setController(a)
    };
    b.setControllerCSS = function(a) {
      if (w) {
        var b = w.offsetHeight;
        w.style.top = Math.min((c.offsetHeight || 150) - b, Math.max(0,
          a - b / 2)) + "px"
      }
    };
    b.setController = function(a, h) {
      b.setControllerCSS(a);
      var d = c.offsetHeight || 150,
        e = b.zoom.max,
        f = 2 + Math.log(e) / Math.log(2),
        d = Math.min(e, Math.pow(2, (1 - a / d) * f - 2));
      h && (d *= 100, d = (d - d % h) / 100);
      b.setZoom(d);
      b.render();
      c.title = Math.round(100 * d) + "%"
    };
    var c = {
        offsetHeight: 150
      },
      p = e.$("#sk-orientation"),
      w = e.$("#sk-orientation .controller");
    if (!w && p) {
      var m = function(a, b) {
          eventjs.cancel(a);
          f.ui.tooltip && f.ui.tooltip.update(u());
          b && l.setDirtyBounds(l.children)
        },
        u = function() {
          return Math.round(100 * b.zoom.value) + "%"
        },
        e = function(a, b, c) {
          a = f.dom.create('<div class="' + a + '"></div>');
          f.ui.tooltip && f.ui.tooltip.add(a, b);
          p.appendChild(a);
          eventjs.add(a, "mousedown", function(a, b) {
            f.doc.orient[c]();
            m(a)
          })
        };
      eventjs.add(p, "mousedown,dblclick", eventjs.stop);
      e("icon-plus", "zoom-in", "controllerZoomIn");
      q = f.dom.create(
        '<div class="controller"><div><span id="controller" style="top: 0px"></span></div></div>'
      );
      f.ui.tooltip && f.ui.tooltip.add(q, u);
      p.appendChild(q);
      eventjs.add(q, "drag", function(a, b) {
        f.doc.orient.setController(b.y, 5);
        m(a, "up" === b.state)
      });
      w = q.firstChild.firstChild;
      w.style.top = b.getKnobOffset() + "px";
      e("icon-minus", "zoom-out", "controllerZoomOut");
      e("icon-frame", "reset", "controllerReset")
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Orientation)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.ScenePlacement = function(f, d) {
    var a = d.canvas2d,
      e = f.feature,
      q = d.contexts,
      l = d.scene,
      b = d.toolkit,
      c = f.util,
      p = f.vector;
    l.updateTransform = function(a, b) {
      a.data && !a.dataHash && (a.dataHash = l.createHash(a.data));
      if (a.dirtyTransform || a.dirtyCheck || !a.trx2D) {
        a.dirtyTransform = !1;
        var e = a.bbox,
          f = a.useStretchToEdge,
          h = a.useStretchToFit;
        if (f || h) {
          var r = d.bounds,
            h = r.width,
            r = r.height;
          if (e.width !== h || e.height !== r) {
            if (f) e.width = h, e.height = r, e.x = 0, e.y = 0;
            else {
              var f = e.owidth / h,
                k = e.oheight /
                r;
              f > k ? (e.width = h * f, e.height = r, e.x = -(e.width - h) /
                2, e.y = 0) : (e.width = h, e.height = r * k, e.x = 0, e.y = -
                (e.height - r) / 2)
            }
            a.dirtyCache = !0
          }
        }
        var k = d.zoom,
          v = e.rotate * c.DEG_RAD,
          q = e.scale.y,
          h = e.width * e.scale.x,
          r = e.height * q,
          s = h / 2,
          z = r / 2,
          f = a.trx2D || (a.trx2D = new p.Transform),
          y = e.x - d.scrollLeft,
          e = e.y - d.scrollTop;
        f.reset();
        f.translate(y, e);
        v && (f.translate(s, z), f.rotate(v), f.translate(-s, -z));
        b || (e = d.theme.getControls(), e = e.width + e.padding, f.nw =
          f.point2d(0, 0), f.ne = f.point2d(h, 0), f.se = f.point2d(h,
            r), f.sw = f.point2d(0, r), f.cp =
          f.point2d(s, z), f.spinner = f.point2d(s, e / k * (0 < q ? -
            1 : 1)), f.n = f.point2d(s, 0), f.e = f.point2d(h, z), f.s =
          f.point2d(s, r), f.w = f.point2d(0, z), a.dirtyControl = !0,
          f = a.trxInverse || (a.trxInverse = new p.Transform), h = a.trx2D
          .nw, f.tlx = h.x, f.tly = h.y, f.reset(), l.calcMatrixInverse(
            a))
      }
    };
    l.calcMatrixInverse = function(a) {
      var b = a.trxInverse || new p.Transform,
        d = a.bbox;
      a = isFinite(b.tlx) ? b.tlx : d.x;
      var e = isFinite(b.tly) ? b.tly : d.y,
        h = d.rotate * c.DEG_RAD,
        f = d.scale.x,
        d = d.scale.y;
      b.translate(a, e);
      h && b.rotate(-h);
      b.scale(1 / f, 1 / d);
      b.translate(-a, -e);
      b.tlx = a;
      b.tly = e;
      return b
    };
    l.updateBBox = function(a) {
      if (a = a || l.selection.item) l.updateConstrain(a), "text" ===
        a.type ? b.text && b.text.updateCSSTransform(a) : a.brush && (
          a.brush.bbox = a.bbox)
    };
    l.updateConstrain = function(a) {
      var b = d.bounds,
        c = b.width,
        b = b.height,
        e = a.bbox,
        h = e.scale.x,
        f = e.scale.y,
        k = a.trx2D;
      if (k && (a.useConstrain || a.useConstrainX || a.useConstrainY)) {
        var p = e.width * h,
          q = e.height * f;
        if ("objectBoundingBox" === a.bbox.units) var s = k.point2d(0,
            0),
          z = k.point2d(p, 0),
          y = k.point2d(p, q),
          B = k.point2d(0, q),
          q = Math.min(s.x,
            z.x, y.x, B.x),
          k = Math.min(s.y, z.y, y.y, B.y),
          p = Math.max(s.x, z.x, y.x, B.x),
          z = Math.max(s.y, z.y, y.y, B.y);
        else s = e, p = s.x, z = s.y, q = s.x, k = s.y;
        var s = e.x,
          y = e.y,
          B = s - q,
          A = y - k,
          q = c - Math.max(0, p - q) + B,
          k = b - Math.max(0, z - k) + A;
        a.useConstrain ? (e.x = Math.max(B, Math.min(q, s)), e.y =
            Math.max(A, Math.min(k, y)), a.dirtyTransform = !0) : a.useConstrainX ?
          (e.x = Math.max(B, Math.min(q, s)), e.y = y, a.dirtyTransform = !
            0) : a.useConstrainY && (e.x = s, e.y = Math.max(A, Math.min(
            k, y)), a.dirtyTransform = !0)
      }
      a.useAlignX && (a.dirtyTransform = !0, h *= e.width, e.x =
        "right" ===
        a.useAlignX ? c - h : "left" === a.useAlignX ? 0 : (c - h) /
        2);
      a.useAlignY && (a.dirtyTransform = !0, c = e.height * f, e.y =
        "bottom" === a.useAlignY ? b - c : "top" === a.useAlignY ? 0 :
        (b - c) / 2);
      a.dirtyTransform && l.updateTransform(a)
    };
    l.getCenterPoint = function() {
      var a = d.scrollLeft,
        b = d.scrollTop,
        c = d.viewport,
        e = d.bounds;
      return {
        x: Math.min(e.width, c.width) / 2 + a,
        y: Math.min(e.height, c.height) / 2 + b
      }
    };
    l.getBoundingBox = function(a) {
      a = a || {};
      var b = a.useVisibleRegion || !1,
        c = !!a.selection || a.useSelection || !1,
        d = !!a.hovered || a.useHovered || !1,
        h = a.asInteger ||
        !1,
        e = Infinity,
        k = -Infinity,
        f = Infinity,
        p = -Infinity,
        s = a.selection || l.selection.items;
      a = a.hovered || l.hovered.items;
      c || d || (c = !0, s = l.children);
      for (var z = 0, y = l.children.length; z < y; z++) {
        var B = l.children[z],
          A = B.trx2D;
        if (A) {
          var g = B.zIndex,
            F = a[g];
          if (s[g] && c || F && d) {
            var B = B.bbox,
              F = B.width * B.scale.x,
              E = B.height * B.scale.y,
              B = A.point2d(0, 0),
              g = A.point2d(F, 0),
              F = A.point2d(F, E),
              D = A.point2d(0, E),
              A = Math.min(B.x, g.x, F.x, D.x) - 1,
              E = Math.min(B.y, g.y, F.y, D.y) - 1,
              P = Math.max(B.x, g.x, F.x, D.x) + 2,
              B = Math.max(B.y, g.y, F.y, D.y) + 2;
            A < e &&
              (e = A);
            E < f && (f = E);
            P > k && (k = P);
            B > p && (p = B)
          }
        }
      }
      b ? (e = Math.max(0, e), f = Math.max(0, f), b = q.layer0, F =
        Math.min(b.width - e, k - e), E = Math.min(b.height - f, p -
          f)) : (F = k - e, E = p - f);
      e = isFinite(e) ? e : 0;
      f = isFinite(f) ? f : 0;
      F = isFinite(F) ? F : 0;
      E = isFinite(E) ? E : 0;
      return {
        x: h ? Math.floor(e) : e,
        y: h ? Math.floor(f) : f,
        width: h ? Math.ceil(F) : F,
        height: h ? Math.ceil(E) : E,
        units: "objectBoundingBox",
        scale: {
          x: 1,
          y: 1
        }
      }
    };
    l.getBoundingOrigin = function(a) {
      a = a.units ? a : l.getBoundingBox(a);
      return "objectBoundingBox" === a.units ? {
        x: a.x + a.width / 2 * a.scale.x,
        y: a.y + a.height /
          2 * a.scale.y
      } : {
        x: a.x,
        y: a.y
      }
    };
    l.getOffset = function(a) {
      var b = d.pixelRatio,
        c = a.bbox.scale.x,
        e = "object" === typeof a.padding ? a.padding : {
          top: 0,
          left: 0,
          right: 0,
          bottom: 0
        },
        h = e.left + e.right,
        e = e.top + e.bottom,
        f = a.stroke;
      f && f.enabled || (f = {
        lineWidth: 0,
        miterLimit: 0
      });
      var f = f.lineWidth * f.miterLimit / 2,
        k = a.border || {
          width: 0
        },
        h = Math.ceil(Math.abs((k.width + h) * c / 2)) + f,
        c = Math.ceil(Math.abs((k.width + e) * c / 2)) + f;
      return a.__offset = {
        x: h * b,
        y: c * b,
        pixelRatio: b
      }
    };
    l.isInBounds = function(b) {
      b.dirtyTransform && l.updateTransform(b);
      var c =
        b.trx2D;
      if (!c || !c.point2d) return !0;
      var f = d.zoom,
        p = d.pixelRatio,
        h = f * p,
        r = a.x,
        k = a.y,
        v = c.nw,
        q = c.ne,
        s = c.se,
        z = c.sw,
        c = Math.min(v.x, q.x, s.x, z.x) * h + r,
        y = Math.min(v.y, q.y, s.y, z.y) * h + k,
        B = Math.max(v.x, q.x, s.x, z.x) * h + r,
        h = Math.max(v.y, q.y, s.y, z.y) * h + k,
        v = a.width,
        q = a.height,
        s = d.bounds;
      e.canvas.clip ? (v = Math.min(s.width * f, v) * p, q = Math.min(
          s.height * f, q) * p, r = d.x * p * f + r, f = d.y * p * f +
        k) : (v *= p, q *= p, f = r = 0);
      p = Math.max(0, r);
      k = Math.max(0, f);
      b.inbounds = c < v + r - (0 > r ? r : 0) && B > p && y < q + f -
        (0 > f ? f : 0) && h > k;
      return b.inbounds
    };
    l.getActionDataAsAbsolute =
      function(a, b) {
        var d = new p.Transform,
          e = a.bbox,
          h = e.scale.x,
          f = e.scale.y,
          k = e.rotate * c.DEG_RAD,
          v = e.width / 2 * h,
          q = e.height / 2 * f,
          s = -((a.diameter || 0) / 2) * (h - 1);
        d.translate(e.x, e.y);
        d.translate(v, q);
        k && d.rotate(k);
        d.translate(-v - s, -q - s);
        d.scale(h, f);
        e = [
          []
        ];
        h = 0;
        if (f = a.data)
          for (k = f.length, v = 0; v < k; v++) f = a.data[v], q = d.point2d(
            f.x, f.y), e[h] || (e[h] = []), e[h].push({
            x: q.x,
            y: q.y
          }), "z" === f.cmd && ++h;
        return b ? JSON.stringify(e) : e
      };
    l.getConstraint = function(a, b, c) {
      var f = e.tools[a.toolkitId] || {},
        h = a.useMinWidth || f.minWidth,
        r =
        a.useMinHeight || f.minHeight,
        k = a.useMaxWidth || f.maxWidth,
        p = a.useMaxHeight || f.maxHeight;
      f.constrainToCanvas && (f = d.contexts.layer0, f = Math.min(f.height,
        f.width) / d.pixelRatio, p = Math.min(f, p), k = Math.min(f,
        k));
      f = a.bbox;
      a = f.width || 1E-4;
      var f = f.height || 1E-4,
        q = a,
        s = f,
        l = !1,
        y = !1;
      if (c) return c.x * a < h && (l = !0, c.x = h / a, c.y = c.x),
        c.y * f < r && (l = !0, c.y = r / f, c.x = c.y), c.x * a > k &&
        (y = !0, c.x = k / a, c.y = c.x), c.y * f > p && (y = !0, c.y =
          p / f, c.x = c.y), {
          constrained: l || y,
          tooSmall: l,
          tooLarge: y,
          x: c.x,
          y: c.y
        };
      q < h && (l = !0, q = h);
      s < r && (l = !0, s = r);
      q > k && (y = !0,
        q = k);
      s > p && (y = !0, s = p);
      q !== a && b && (s = q / a * f);
      s !== f && b && (q = s / f * a);
      return {
        constrained: l || y,
        tooSmall: l,
        tooLarge: y,
        width: q,
        height: s
      }
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.ScenePlacement)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.SceneRender = function(f, d) {
    var a = function(b) {
        b = b || {};
        "string" === typeof b && (b = {
          from: b
        });
        "function" === typeof b && (b = {
          onsuccess: b
        });
        b.onsuccess && r.push(b.onsuccess);
        a.dirty = !0;
        a.from = b.from;
        return a
      },
      e = d.canvas2d,
      q = d.contexts,
      l = f.detect,
      b = f.dom,
      c = f.feature,
      p = f.lang,
      w = f.vector.Shape,
      m = f.style,
      u = d.toolkit,
      t = f.util,
      h = f.vector;
    a.sceneGCO = function(b, h) {
      a({
        from: b,
        onsuccess: function() {
          var b = f.style,
            c = b.composite,
            b = !b.useSourceOver[c];
          !0 !== b && a.prepareGCO(c);
          h && h(b)
        }
      });
      return a
    };
    a.clean = function(b, h) {
      a.dirtyControls = !0;
      a({
        from: b,
        onsuccess: h
      });
      return a
    };
    a.now = function(b) {
      b && r.push(b);
      a.toExport = !0;
      v();
      a.toExport = !1;
      return a
    };
    a.clipped = !1;
    a.chunkBatch = !0;
    a.toExport = !1;
    a.from = "";
    a.selected = !1;
    a.speed = 0;
    a.dirty = !1;
    a.dirtyCenterPoint = !1;
    a.dirtyControls = !1;
    (function() {
      var b = !1,
        h = function() {
          a.dirty ? v() : x();
          b === h.timestamp && requestAnimationFrame(h)
        };
      a.start = function() {
        b || (b = t.timestamp(), h.timestamp = b, h())
      };
      a.stop = function() {
        b = !1
      }
    })();
    var r = {
        callbacks: [],
        push: function(a) {
          "function" ===
          typeof a && r.callbacks.push(a)
        },
        run: function() {
          x();
          for (d.__rendering = !1; r.callbacks.length;) r.callbacks.shift()
            ()
        }
      },
      k = {
        perf: null,
        gco: "source-over"
      },
      v = function() {
        if (!d.__preloading)
          if (d.__rendering = !0, a.dirty = !1, k.perf = k.perf || f.perf(),
            c.vector.edit || a.chunkBatch) {
            var b = q.layer0,
              h = b.ctx,
              e = b.width,
              p = b.height;
            c.canvas.clip ? (a.clipped || (b.width = e, a.drawClipArea(h),
              h.clip()), h.clearRect(0, 0, e, p), h.beginPath(), h.rect(
              0, 0, e, p), h.clip()) : h.clearRect(0, 0, e, p);
            h.save();
            B()
          } else {
            h = a.from;
            b = d.scene.children;
            if (b.length) {
              h =
                (isFinite(d.selection.idx) && "area.hide" !== h ? q.active :
                  q.layer0).ctx;
              for (e = 0; e < b.length; e++) p = b[e], !p.dirtyCheck && !p
                .dirtyTransform || p.error || (d.scene.updateTransform(p),
                  a.layer(h, p), a.dirtyControls = !0);
              a.prepareGCO(d.tool.device.composite)
            }
            r.run()
          }
      },
      x = function() {
        a.dirtyControls && (a.dirtyControls = !1, l.useRenderControls[d
          .tool.type] ? u.area.renderControls(null, !0) : t.eventOverrideCall(
          "onRenderControls"));
        if (a.dirtyCenterPoint) {
          var b = a.dirtyCenterPoint;
          a.dirtyCenterPoint = !1;
          !1 !== c.canvas.drawCenterPoint &&
            (l.useRenderControls[d.tool.type] ? u.area.drawCenterPoint(b) :
              t.eventOverrideCall("onRenderCenterPoint"))
        }
      },
      s = function(a, b) {
        b && b.fillStyle && (b.globalCompositeOperation && (a.globalCompositeOperation =
            b.globalCompositeOperation), a.fillStyle = b.fillStyle ||
          "#000", a.fill())
      },
      z = -1,
      y = 0,
      B = function() {
        for (var b = d.scene.children, h = b.length, m = a.chunkBatch,
            v = m ? 150 : 500, t = h - (z - y), l = Date.now(), x = 0; x <
          t; x++) {
          var w = ++z - y,
            g = Date.now() - l > v,
            C = w > h - 1,
            g = 0 !== z && g;
          if (m && (g || C) && f.loader) {
            var L = h && !C ? w / h : 1;
            (100 !== 100 * L >> 0 || f.loader.threads.thread) &&
            f.loader.create("thread", p.translate("rendering") + "...",
              100 * L >> 0)
          }
          if (g) {
            ++y;
            setTimeout(B, 0);
            break
          }
          if (C) {
            y = 0;
            z = -1;
            d.__rendering = !1;
            a.chunkBatch = !1;
            b = q.layer0.ctx;
            A.id && A.canvas && (A.render(b), A.id = null);
            b.restore();
            !c.canvas.useBGRender || a.highRes || a.toExport || (h = d.zoom,
              m = h * d.pixelRatio, t = d.bounds, v = t.width, t = t.height,
              l = d.scrollLeft, x = d.scrollTop, b.save(), b.beginPath(),
              b.translate(e.orientX >> 0, e.orientY >> 0), b.scale(m, m),
              b.globalAlpha = 1, b.globalCompositeOperation =
              "destination-over", b.translate(-l, -x),
              b.rect(-.5, -.5, v * Math.max(1, h) + 1, t * Math.max(1, h) +
                1), s(b, {
                fillStyle: d.backgroundRaw
              }), b.restore());
            r.run();
            k.perf && (a.speed = k.perf());
            k.perf = null;
            c.debug && console.log("render", a.speed + "ms", a.from);
            break
          }
          C = b[w];
          g = C.type;
          if (!C.error) {
            L = C.toolkit;
            if (!L) {
              c.debug && console.warn("toolkit was not loaded", g, w);
              if (!u.getToolkit(g)) continue;
              y = 0;
              z = -1;
              d.__rendering = !1;
              setTimeout(a.preload, 0);
              break
            }
            d.scene.updateTransform(C);
            if (!1 !== C.visible) {
              if ("group" !== g && !a.toExport) {
                if (!1 === C.inbounds) continue;
                if (!isFinite(C.inbounds) &&
                  !d.scene.isInBounds(C)) continue
              }
              a.selected && void 0 === a.selected[w] || d.__editing && C.id ===
                d.selection.id && "text" === C.type || a.layer(L.ctx, C)
            }
          }
        }
      },
      A = {
        id: null,
        canvas: null,
        composite: null,
        opacity: null,
        render: function(a) {
          a.globalCompositeOperation = A.composite;
          a.globalAlpha = A.opacity / 100;
          a.drawImage(A.canvas, 0, 0)
        }
      };
    a.layer = function(b, h, k) {
      if (b && h) {
        var r = a.toExport;
        if (!r || !1 !== h.exportable) {
          var p = d.pixelRatio,
            s = d.zoom * p,
            v = d.selection,
            q = h.zIndex - y;
          h.hovered = d.hovered.items[q] || !1;
          h.selected = v.items[q] || !1;
          if (h.groupId) {
            if (A.id !==
              h.groupId) {
              A.id && A.canvas && A.render(b);
              var x = b.canvas;
              A.id = h.groupId;
              A.canvas = A.canvas || t.Canvas(x.width, x.height);
              A.canvas.width = x.width;
              A.canvas.height = x.height;
              A.composite = h.composite;
              A.opacity = h.opacity
            }
            A.id && (b = A.canvas.ctx)
          } else A.id && A.canvas && (A.render(b), A.id = null);
          var z = h.type,
            w = a.cache,
            u = h.usePixelData && h.isRecording || !1,
            x = h.useHighRes || a.highRes || !1;
          if (!x || l.useCacheLayer[z] || u)
            if (x = !1, !h.ctx || h.dirtyCheck || h.dirtyCache || r)
              if (h.dirtyControl = !0, w.add(h), h.ctx) h.dirtyCheck = r;
              else {
                k && k();
                return
              }
          var g = h.bbox,
            B = g.width,
            u = g.height,
            C = g.scaleCache || {
              x: 1,
              y: 1
            },
            aa = C.x,
            R = C.y,
            ea = g.scale.x,
            Z = g.scale.y;
          if (h.__offset) {
            var ga = h.__offset,
              W = ga.x,
              ga = ga.y;
            0 > aa && (W *= -1);
            0 > R && (ga *= -1)
          } else ga = d.scene.getOffset(h), W = ga.x, ga = ga.y;
          r = (c.tools[h.toolkitId] || {}).drawBBox && v.items[q] && !
            isFinite(v.idx) && !r;
          v = l.useLocalAlpha[z];
          b.save();
          b.translate(e.x, e.y);
          b.scale(s, s);
          b.globalCompositeOperation = m.getComposite(h.composite);
          b.globalAlpha = isFinite(h.opacity) && !v ? h.opacity / 100 :
            1;
          v = h.trx2D;
          s = w.padding;
          if (x) C = g.padding ||
            0, W = -s, ga = -s, q = B + 2 * s, p = u + 2 * s, b.beginPath(),
            v.apply(b, !0), l.shape[h.type] ? (h.render(b, v, !0), b.scale(
              ea, Z), b.translate(C, C)) : (b.scale(ea, Z), b.translate(C,
              C), h.render(b, v, !0)), r && b.scale(1 / ea, 1 / Z);
          else if (v.apply(b, !0), x = h.ctx.canvas, q = x.width, v = x
            .height, q && v) {
            var w = 0 > aa,
              g = 0 > R,
              ma = (aa - 1) * s,
              z = (R - 1) * s;
            w && (ma -= aa * s * 2);
            g && (z -= R * s * 2);
            W = -s / p - ma / p - W * aa / p;
            ga = -s / p - z / p - ga * R / p;
            0 > ea && (W += B * ea);
            0 > Z && (ga += u * Z);
            q = q * Math.abs(aa) / p;
            p = v * Math.abs(R) / p;
            w || g ? (b.save(), w && (W -= B * aa * C.px), g && (ga -= u *
              R * C.py), b.scale(w ? -1 : 1, g ?
              -1 : 1), b.drawImage(x, W, ga, q, p), b.restore()) : b.drawImage(
              x, W, ga, q, p)
          }
          r && (B *= ea, u *= Z, b.beginPath(), b.globalAlpha = 1, b.globalCompositeOperation =
            "source-over", b.lineWidth = 1, b.shadowOffsetX = 1, b.shadowOffsetY =
            1, b.rect(0, 0, B, u), "dark" === f.feature.theme ? (b.shadowColor =
              "#000", b.strokeStyle = "#fff") : (b.shadowColor = "#fff",
              b.strokeStyle = "#000"), b.stroke());
          b.restore();
          k && k()
        }
      } else c.debug && console.log("missing argument", arguments)
    };
    a.drawClipArea = function(b) {
      a.clipped = !0;
      var h = d.clip,
        c = d.zoom,
        k = d.pixelRatio,
        f = k *
        c,
        r = d.scrollLeft - d.x * k,
        p = d.scrollTop - d.y * k;
      b.beginPath();
      h.path ? (r = e.x - r * c, c = e.y - p * c, b.save(), b.translate(
        r, c), b.scale(f, f), w.VOBPath(b, h.path), b.restore()) : (a
        .toExport ? (c = r = 0, p = b.canvas.width, f = b.canvas.height) :
        (k = d.bounds, r = (h.x || 0) * f + e.x - r * c, c = (h.y ||
          0) * f + e.y - p * c, p = Math.min(k.width, h.width ||
          Infinity) * f, f *= Math.min(k.height, h.height || Infinity)),
        b.rect(r, c, p, f));
      h.style && (s(b, h.style), (h = h.style) && (h.lineWidth || h.strokeStyle) &&
        (h.globalCompositeOperation && (b.globalCompositeOperation =
            h.globalCompositeOperation),
          b.lineWidth = (h.lineWidth || 1) * d.pixelRatio, b.strokeStyle =
          h.strokeStyle || "#000", b.stroke()))
    };
    a.applyFilter = function(b, h) {
      if (f.gl && b.ctx) {
        var c = b.ctx,
          e = window.glfx && f.client.webgl,
          k = f.gl.ColorMatrix && "image" === b.type,
          r = k && e,
          p = b.filter;
        if (p) r && p[0] && (k = p[0], r = k.length - 1, "colorMatrix" ===
          k[r].id ? k[r] = g(b) : k.push(g(b)));
        else {
          if (!k || 0 === b.tint && 0 === b.temperature && 0 === b.brightness &&
            0 === b.contrast && 1 === b.exposure && 1 === b.saturation &&
            0 === b.hue) return;
          if (r) p = b.filter = [
            [{
              cmd: "input",
              id: "source0",
              name: "colorMatrix",
              enabled: !0
            }, g(b)]
          ];
          else if (k) {
            f.gl.ColorMatrix.setFilter(b).apply(c);
            return
          }
        }
        var r = d.pixelRatio,
          s = d.zoom,
          m = a.cache.padding,
          v = 2 * m,
          k = b.ctx.canvas,
          l = b.bbox,
          x = l.rotate * t.DEG_RAD,
          z = l.scale.x,
          y = l.scale.y,
          w = l.height,
          u = Math.abs(l.width * z) * r || 1,
          B = Math.abs(w * y) * r || 1,
          w = u + v * r >> 0,
          v = B + v * r >> 0,
          A = u / 2,
          Z = B / 2,
          z = 0 > z,
          y = 0 > y;
        if (b.useBackgroundOverlay) {
          var ga = l.x * r,
            l = l.y * r;
          z && (ga -= u);
          y && (l -= B);
          c.save();
          c.globalCompositeOperation = "source-atop";
          c.fillStyle = d.backgroundRaw;
          c.fillRect(0, 0, w, v);
          c.translate(m, m);
          x && (c.translate(A,
            Z), c.rotate(-x), c.translate(-A, -Z));
          c.translate(-ga, -l);
          c.scale(1 / s, 1 / s);
          c.drawImage(q.layer0, 0, 0);
          c.restore()
        }
        if (e && Array.isArray(p)) {
          var W, e = function() {
              W ? W() : h && h(b)
            },
            s = a.getGLFX(k);
          s.source = k;
          s.pixelRatio = r;
          s.viewport(0, 0, w, v);
          s.setFilter(p);
          s.render(e, e);
          (p = s.getComposite()) ? (c.clearRect(0, 0, k.width, k.height),
            c.drawImage(p, 0, 0)) : W = function() {
            b.dirtyCache = !0;
            a()
          }
        }
      }
    };
    a.getGLFX = function(b) {
      b = b || t.Canvas();
      return a.glfx = a.glfx || glfx.applyShader(b)
    };
    var g = function(a) {
      return {
        cmd: "shader",
        id: "colorMatrix",
        enabled: !0,
        data: [void 0, a.tint, a.temperature, a.brightness, a.contrast,
          a.exposure, void 0, void 0, a.saturation, void 0, a.hue
        ]
      }
    };
    a.prepareGCO = function(a, b) {
      b = b || q.active;
      var h = b.ctx;
      h.clearRect(0, 0, b.width, b.height);
      a && !0 !== m.useSourceOver[a] && h.drawImage(q.layer0, 0, 0)
    };
    a.setGCO = function(a, b) {
      if (b = b || d.tool.type) {
        if (!a) {
          var h = d.tool.device;
          if (h && h.brush && h.brush.composite) a = h.brush.composite;
          else if (h && h.composite) a = h.composite;
          else {
            var c = d.config[b];
            if (!c) return;
            b = c.type
          }
        }
        switch (b) {
          case "select":
          case "crop":
          case "zoom":
          case "screenshot":
          case "text":
            a =
              "source-over";
            break;
          case "eraser":
            a = "destination-out";
            break;
          default:
            if (a) break;
            a = m.getComposite();
            c.composite && c.composite.setValue ? c.composite.setValue(a) :
              c.composite = a
        }
        k.gco = a;
        var h = q.layer0,
          c = q.draw,
          e = q.active;
        !a || m.useSourceOver[a] ? (h.style.display = "block", c.style
          .background = "", t.Canvas.clear(e), t.Canvas.clear(c)) : (h
          .style.display = "none", c.style.background = h.style.background,
          t.Canvas.clear(e), e.ctx.drawImage(h, 0, 0))
      }
    };
    a.preload = function(b) {
      void 0 === b && (b = {});
      var h = b.onprogress,
        e = b.onload,
        k = b.chunkBatch ||
        !1;
      if (d.__preloading) e && e();
      else {
        var r = d.scene.children;
        if (0 === r.length) t.Canvas.clear(q.layer0), e && e();
        else {
          var p = function(b, r) {
              b.dirtyResource = !1;
              b.error ? c.debug && console.warn(
                "object did not load properly", b) : r || !1 === b ? (
                console.warn(r), s.push(r || "Action missing."), b.error = !
                0) : b.toolkit && b.toolkit.updateObjectSize && (c.vector
                .edit || "text" === b.toolkit.type) && b.toolkit.updateObjectSize(
                b);
              h && h(1 - (v - 1) / m);
              --v || (d.__rendering = !1, d.__preloading = !1, k ? (a.chunkBatch = !
                0, a.sceneGCO("render.preload", e)) : a.sceneGCO(
                "render.load",
                e), s.length && f.ui.log(s[0]))
            },
            s = [],
            m = r.length,
            v = m;
          d.__rendering = !0;
          d.__preloading = !0;
          d.scene.sort();
          for (var l = 0; l < m; l++) {
            var x = r[l];
            x.error ? p(x) : x.render && !x.dirtyResource ? p(x) : u.ensureToolkit(
              x) ? x.toolkit.loadResource({
              layer: x,
              useLoader: !b.fromSocket,
              onerror: function(a, b) {
                p(a, b || "Resource missing.")
              },
              onload: function(a, b) {
                p(a, b)
              },
              onprogress: function(a) {
                console.log(a)
              }
            }) : p(x, "Missing \u201c" + x.type + "\u201d toolkit")
          }
        }
      }
    };
    a.cache = new function(e) {
      var k = this;
      k.data = {};
      k.enabled = c.cache2D;
      k.padding = c.cache2DPadding;
      k.dump = function() {
        for (var a in k.data) e.log(k.data[a].canvas)
      };
      k.clean = function(a) {
        var h = k.data[a];
        h && h.canvas && !--h.copies && (delete k.data[a], c.debugCache &&
          (b.$(c.debugCache) || document.body).removeChild(h.canvas))
      };
      k.getContext = function(a) {
        var b = k.data[a];
        if (b) return b.copies++, b;
        var h = t.Canvas(),
          b = h.ctx;
        h.className = "cache" + a;
        b.copies = 1;
        return k.data[a] = b
      };
      k.add = function(f) {
        if (f && f.render) {
          var r = d.scene,
            p = r.createHash(f);
          if (!f.dirtyCache && k.data[p]) f.dirtyCheck = !1, f.dirtyCache = !
            1, f.hash !== p && (k.clean(f.hash),
              f.ctx = k.getContext(p), f.hash = p, r.getOffset(f));
          else {
            f.hash = p;
            f.ctx = k.getContext(p);
            var p = k.padding,
              r = r.getOffset(f),
              s = r.x + p,
              m = r.y + p,
              v = f.bbox,
              p = v.width,
              r = v.height,
              q = v.scale.x,
              x = v.scale.y,
              z = d.pixelRatio,
              y = Math.abs(p * q >> 0) * z,
              u = Math.abs(r * x >> 0) * z,
              g = y + 2 * s,
              B = u + 2 * m;
            c.cache257 && l.useColorCycle[f.type] && (g = Math.max(257,
              g), B = Math.max(257, B));
            var A = f.ctx,
              C = A.canvas;
            C.width = Math.min(8192, g || 1) >> 0;
            C.height = Math.min(8192, B || 1) >> 0;
            c.debugCache && ((b.$(c.debugCache) || document.body).appendChild(
                C), C.title = "idx: " +
              f.zIndex, C.onclick = function(a) {
                return function() {
                  e.log(C);
                  var b = d.selection.fromLayers([a]);
                  e.exec("debug-layer", b)
                }
              }(f));
            c.debugCache && (A.lineWidth = 2 * z, A.strokeStyle =
              "#f00", A.strokeRect(s, m, y, u), A.strokeStyle = "#00f",
              A.strokeRect(0, 0, y + 2 * s, u + 2 * m), A.fillStyle =
              "rgba(255,255,0,0.05)", A.fillRect(0, 0, g, B));
            y = v.padding || 0;
            s += y * q * z;
            m += y * q * z;
            A.save();
            y = new h.Transform;
            y.scale(q, x);
            A.translate(s, m);
            A.scale(z, z);
            f.render(A, y, !1);
            s = f.background;
            m = f.border;
            if (s || m) y = f.padding || {
                top: 0,
                left: 0,
                right: 0,
                bottom: 0
              },
              z = (0 > q ? -p : 0) - y.left, v = (0 > x ? -r : 0) - y.right,
              y = p + v + 0, u = r + z + 0, A.globalCompositeOperation =
              "destination-over", A.scale(q, x), A.beginPath(), m ? (w.roundRect(
                  A, z, v, y, u, m.radius), A.lineWidth = m.width || t.ZERO,
                A.strokeStyle = m.color, A.stroke()) : w.rect(A, z, v, y,
                u), s && (A.fillStyle = s.color, A.fill());
            A.restore();
            a.applyFilter(f);
            f.dirtyCheck = !1;
            f.dirtyCache = !1
          }
        } else c.debug && f && "group" !== f.type && console.warn(
          "missing", arguments)
      };
      return k
    }(f);
    return a
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.SceneRender)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.SceneReplicate = function(f, d) {
    var a = d.scene,
      e = d.toolkit,
      q = f.util,
      l = 0,
      b = {},
      c = a.clipboard = {
        loadCopies: function() {
          q.getItem("copies", function(b) {
            b && (a.copies = JSON.parse(b))
          });
          q.getItem("copies-paths", function(a) {
            try {
              b = JSON.parse(a)
            } catch (c) {}
          })
        },
        enable: function() {
          c.loadCopies()
        },
        disable: function() {}
      };
    a.cut = function(b) {
      q.setItem("useNativePaste", !1);
      b = b || a.selection.items;
      for (var c = a.children, h = [], e = c.length; e--;)
        if (b[e]) {
          var k = c[e];
          h.push(k);
          a.shiftAt(e);
          a.setDirtyPixelData(k);
          d.render.cache.clean(k.hash)
        }
      h.length && (a.reindex(), a.copies = a.clone(h), m(), a.deselectAll(),
        b = a.clone(h).reverse(), d.history && d.history.store({
          cmd: "remove",
          icon: "clipboard",
          name: "cut-objects",
          data: b
        }));
      f.on.cut && f.on.cut(a.copies);
      return a
    };
    a.copy = function(b) {
      q.setItem("useNativePaste", !1);
      p(b) && f.on.copy && f.on.copy(a.copies);
      return a
    };
    var p = function(b) {
      b = b || a.selection.items;
      for (var c = a.children, h = [], d = c.length; d--;) b[d] && h.push(
        c[d]);
      if (h.length) return a.copies = a.clone(h), m(), !0
    };
    a.paste = function(b) {
      w(a.copies,
        function() {
          b && b(a.copies);
          f.on.paste && f.on.paste(a.copies)
        });
      return a
    };
    var w = function(c, p) {
      if (c.length) {
        var h = function() {
            if (!--q) {
              a.select(l);
              a.reindex();
              a.handleSelection();
              var b = f.feature.io.translateX,
                h = f.feature.io.translateY;
              b || h ? (a.selection.move(b, h), a.copy()) : d.render();
              p && p()
            }
          },
          r = function(a) {
            var b = f.assets.data[a.src];
            b && b.clone && "clipart" === a.type && !1 === f.feature.cacheSVG ?
              b.clone(function(b) {
                f.assets.add(b.toDataURL(), function(b) {
                  a.src = b;
                  k(a)
                })
              }, !0) : k(a)
          },
          k = function(b) {
            l.push(m.length);
            a.push(b);
            e.ensureToolkit(b);
            b.toolkit.loadResource({
              layer: b,
              onerror: h,
              onload: h,
              useLoader: !1
            })
          };
        a.deselectAll();
        for (var m = a.children, q = c.length, s = q, l = []; s--;) {
          var y = a.clone(c[s]);
          a.getById(y.id) && (c[s].id = y.id = a.createId(), c[s].zIndex =
            y.zIndex = a.children.length);
          var w = y.src;
          "string" === typeof w && 0 === w.indexOf("#") && !f.assets.data[
            w] && b[w] ? f.assets.add({
            type: y.type,
            data: b[w],
            onerror: h,
            onload: function(a, b) {
              y.src = a;
              r(y)
            }
          }) : r(y)
        }
        d.history && (s = a.clone(c), d.history.store({
          cmd: "add",
          icon: "clipboard",
          name: "paste-objects",
          data: s
        }))
      }
    };
    a.onCutNative = function(b) {
      eventjs.cancel(b);
      f.exec("layer-cut");
      var c = a.stringify(a.copies);
      b.clipboardData ? (b.clipboardData.clearData(), b.clipboardData
        .setData("application/json", c)) : window.clipboardData && (
        window.clipboardData.clearData(), window.clipboardData.setData(
          "text", c))
    };
    a.onCopyNative = function(b) {
      eventjs.cancel(b);
      f.exec("layer-copy");
      var c = a.stringify(a.copies);
      b.clipboardData ? (b.clipboardData.clearData(), b.clipboardData
          .setData("application/json", c)) : window.clipboardData &&
        (window.clipboardData.clearData(), window.clipboardData.setData(
          "text", c))
    };
    a.onPasteNative = function(b) {
      if (!d.__rendering && !f.util.isEditingText()) {
        eventjs.cancel(b);
        var c;
        b.clipboardData ? c = b.clipboardData : window.clipboardData &&
          (c = window.clipboardData);
        c = c.items || c.files;
        if (void 0 === c || 0 === c.length) f.client.clipboard = !1, a
          .paste();
        else {
          var h = function() {
              p !== l && (q.setItem("useNativePaste", !0), l = p);
              q.getItem("useNativePaste", function(b) {
                if ("true" === b) {
                  if (p) {
                    a.deselectAll();
                    for (b = 0; b < k.length; b++) d.addMedia(k[b],
                      null,
                      function() {
                        d.setTool("select")
                      });
                    f.on.paste && f.on.paste(a.copies)
                  }
                } else f.exec("layer-paste")
              })
            },
            e = function() {
              --m || h()
            },
            k = [],
            p = 0;
          if (b.msConvertURL) new q.Queue({
            items: c,
            flatten: !0,
            oncomplete: h,
            next: function(a, b, h) {
              a instanceof File && (k.push(a), p += a.size);
              this.next()
            }
          });
          else {
            var m = 0;
            for (b = 0; b < c.length; b++) {
              ++m;
              var s = c[b];
              switch (s.type) {
                case "application/json":
                  s.getAsString(function(b) {
                    try {
                      b = JSON.parse(b), a.copies = b, f.exec("layer-paste")
                    } catch (h) {
                      console.warn(h)
                    }
                  });
                  break;
                case "text/html":
                  s.getAsString(function(a) {
                    f.feature.debug &&
                      console.warn(a);
                    0 === a.indexOf("blob:") ? setTimeout(e, 1) : -1 !== a
                      .indexOf("blob:http%3A//") ? setTimeout(e, 1) : f.convert
                      .htmlToCanvas({
                        html: a,
                        onerror: e,
                        onload: function(b) {
                          p += a.length;
                          k.push(b);
                          e()
                        }
                      })
                  });
                  break;
                default:
                  if (-1 === s.type.indexOf("image")) {
                    setTimeout(e, 1);
                    break
                  }
                  s = s.getAsFile();
                  k.push(s);
                  p += s.size;
                  setTimeout(e, 1)
              }
            }
          }
        }
      }
    };
    a.duplicate = function(b) {
      b = b || a.selection.items;
      q.count(b) && (p(b), w(a.copies), f.on.duplicate && f.on.duplicate(
        b));
      return a
    };
    var m = function() {
      var c = a.copies;
      b = {};
      q.setItem("copies", JSON.stringify(c));
      q.setItem("copies-paths", JSON.stringify({}));
      f.save.assets({
        layers: c,
        toBlobURL: !0,
        onsuccess: function(a) {
          q.setItem("copies-paths", JSON.stringify(a))
        }
      })
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.SceneReplicate)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.SceneSelection = function(f, d, a) {
    var e = this,
      q = d.render,
      l = f.util;
    f.module.SceneTransform && f.module.SceneTransform(f, d, e);
    q && q.clean && (e.render = q.clean);
    e.remove = function(b) {
      a.removeSelection(e.items, b);
      return e
    };
    e.id = void 0;
    e.idx = void 0;
    e.item = void 0;
    e.length = 0;
    e.items = {};
    e.select = function(d) {
      var f = a.children[d];
      f && (e.items[d] || (e.items[d] = !0, e.length++), 1 === e.length ?
        b(f) : c());
      return e
    };
    e.setData = function(a) {
      a.reset();
      for (var b in a) a.select(b);
      return a
    };
    e.deselect =
      function(d) {
        e.items[d] && (delete e.items[d], e.length--);
        var f = e.length;
        if (1 === f)
          for (d in e.items)(f = a.children[d]) && b(f);
        else 0 === f && c();
        return e
      };
    e.toggle = function(a) {
      e.items[a] ? e.deselect(a) : e.select(a)
    };
    var b = function(a) {
        e.id = a.id;
        e.idx = a.zIndex;
        e.item = a
      },
      c = function() {
        e.id = void 0;
        e.idx = void 0;
        e.item = void 0
      };
    e.reset = function() {
      c();
      e.items = {};
      e.length = 0;
      return e
    };
    e.toLayers = function(b, c) {
      b = b || e.items;
      var d = [];
      if (Array.isArray(b))
        for (var f = 0; f < b.length; f++) {
          var q = b[f];
          d.push(a.children[q])
        } else
          for (q in b) d.push(a.children[q]);
      return c ? a.clone(d) : d
    };
    e.fromLayers = function(a) {
      for (var b = {}, c = 0, d = a.length; c < d; c++) b[a[c].zIndex] = !
        0;
      return b
    };
    e.asArray = function(a) {
      if (Array.isArray(a)) return a;
      a = a || e.items;
      return Object.keys(a).map(function(a) {
        return parseInt(a)
      })
    };
    e.traverse = function(b) {
      for (var c in e.items) {
        var d = a.children[c];
        d && b(d)
      }
    };
    e.parse = function(a) {
      if (a && 0 !== a.length) return Array.isArray(a) ? isFinite(a[0]
          .zIndex) ? e.fromLayers(a) : l.arrayToObject(a) : "number" ===
        typeof a ? l.arrayToObject([a]) : a
    };
    e.rotate = function(a, b) {
      b = b || {};
      return e.transform({
        origin: b.origin,
        method: b.method,
        rotate: a
      })
    };
    e.flipX = function(a) {
      return e.flip(!0, !1, a)
    };
    e.flipY = function(a) {
      return e.flip(!1, !0, a)
    };
    e.flip = function(a, b, c) {
      c = c || {};
      return e.transform({
        origin: c.origin,
        method: c.method,
        scale: {
          x: a ? -1 : 1,
          y: b ? -1 : 1
        }
      })
    };
    e.scaleX = function(a, b) {
      return e.scale(a, 1, b)
    };
    e.scaleY = function(a, b) {
      return e.scale(1, a, b)
    };
    e.scale = function(a, b, c) {
      c = c || {};
      return e.transform({
        origin: c.origin,
        method: c.method,
        scale: {
          x: a,
          y: b
        }
      })
    };
    e.move = e.translate = function(a, b, c) {
      c = c || {};
      return e.transform({
        origin: c.origin,
        method: c.method,
        translate: {
          x: a,
          y: b
        }
      })
    };
    return e
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.SceneSelection)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Theme = function(f, d) {
    var a = this,
      e = d.toolkit,
      q = f.util;
    a.controls = {};
    a.getControls = function() {
      var b = a.controls;
      return eventjs.isTouch ? b.touch : b.mouse
    };
    var l = function(c, h) {
        var d = a.controls[c],
          e;
        for (e in h) {
          var f = h[e],
            p = e.split("-"),
            s = p.shift(),
            p = p.shift() || "";
          d[e] = b(s, p, f, f.width || d.width, f.height || d.height)
        }
      },
      b = function(a, b, c, e, f) {
        var p = {};
        if ("svg" === c.type) {
          p.command = c.command;
          for (var s in c) "title" === s.substr(0, 5) && (p[s] = c[s])
        } else q.cloneInto(c, p, {
          type: "undefined"
        });
        p.width = e;
        p.height = f;
        p.viewBox = [0, 0, e, f];
        p.type = a;
        p.render = function(s) {
          var m = s.ctx,
            q = s.matrix,
            l = d.zoom;
          m.save();
          "svg" === c.type ? (l = c.vob, m.scale(e / l.width, f / l.height),
              c.render(s)) : c.render ? c.render(m, a, b, q) : void 0 !==
            p.image ? m.drawImage(p.image, 0, 0) : isFinite(e + f) && (m
              .beginPath(), "circle" === p.shape ? (s = f / 2 / l, m.arc(
                e / 2 / l, s, s, 0, 2 * Math.PI)) : m.rect(0, 0, 1 * e / l,
                1 * f / l), p.lineWidth && (m.lineWidth = p.lineWidth / l),
              p.shadowColor && (m.shadowColor = p.shadowColor), p.shadowOffsetX &&
              (m.shadowOffsetX = p.shadowOffsetX), p.shadowOffsetY &&
              (m.shadowOffsetY = p.shadowOffsetY), p.shadowBlur && (m.shadowBlur =
                p.shadowBlur), p.fillStyle && (m.fillStyle = p.fillStyle,
                m.fill()), p.strokeStyle && (m.strokeStyle = p.strokeStyle,
                m.stroke()));
          m.restore()
        };
        return p
      },
      c = {
        anchor: !0,
        spinner: !0,
        n: !0,
        ne: !0,
        ne_spinner: !0,
        ne_spinner_area: !0,
        e: !0,
        se: !0,
        se_spinner: !0,
        se_spinner_area: !0,
        s: !0,
        sw: !0,
        sw_spinner: !0,
        sw_spinner_area: !0,
        w: !0,
        nw: !0,
        nw_spinner: !0,
        nw_spinner_area: !0
      },
      p = {
        normal: !0,
        hover: !0,
        focus: !0
      },
      w = function(a) {
        a = a || {};
        a.padding = isFinite(a.padding) ? a.padding : 10;
        a.width = isFinite(a.width) ? a.width : 16;
        a.height = isFinite(a.height) ? a.height : 16;
        return a
      },
      m = function(b) {
        var h = q.clone(f.feature.tools.defaults),
          d = {},
          k = d.controls = {};
        d.mouse = w(h.controls.mouse);
        d.touch = w(h.controls.touch);
        var m = function(b, h, c) {
            var d = c[h] || c.hover || c.normal || {},
              f;
            for (f in c) p[f] || void 0 === d[f] && (d[f] = c[f]);
            if (q.isEmpty(d)) return {};
            c = d.command;
            !0 === c ? d.command = a.rotateScaleEvent : "string" ===
              typeof c && (d.command = e[c + "Event"]);
            "normal" === h ? k[b] = d : k[b + "-" + h] = d
          },
          l = function(a, b) {
            k[a] = {
              command: b
            };
            k[a + "-hover"] = {
              command: b
            }
          },
          s = q.clone(g),
          z;
        for (z in p) {
          var y = h.controls[z] || (h.controls[z] = {});
          for (b in c) {
            var B = s[b] || (s[b] = {}),
              B = B[z] || (B[z] = s[z]);
            q.cloneInto(y, B)
          }
        }
        for (b in c) z = h.controls[b], !1 !== z && void 0 !== z && (z.hover &&
          !z.focus && (z.focus = z.hover), z.normal && !z.hover && (z.hover =
            z.normal), z.normal && !z.focus && (z.focus = z.normal), q.cloneInto(
            s[b], z, {
              type: "undefined"
            }), "string" === typeof z ? l(b, e[z]) : "boolean" ===
          typeof z ? l(b, e.rotateScaleEvent) : (m(b, "normal", z), m(b,
            "hover", z), m(b, "focus", z)));
        return d
      },
      g = {
        hover: {
          lineWidth: 1,
          strokeStyle: "rgba(255,255,255,1)",
          fillStyle: "#0080C2"
        },
        focus: {
          lineWidth: 1,
          strokeStyle: "rgba(255,255,255,1)",
          fillStyle: "#0080C2"
        },
        normal: {
          lineWidth: 1,
          strokeStyle: "rgba(255,255,255,1)",
          fillStyle: "rgba(30,30,30,1)"
        },
        anchor: {
          command: "move",
          cursor: "default",
          padding: 5,
          normal: {
            lineWidth: 1,
            shadowColor: "rgba(255,255,255,0.5)",
            shadowOffsetX: 1,
            shadowOffsetY: 1,
            shadowBlur: 0,
            strokeStyle: "rgba(0,0,0,0.75)"
          },
          hover: {
            lineWidth: 1,
            shadowColor: "rgba(255,255,255,0.5)",
            shadowOffsetX: 1,
            shadowOffsetY: 1,
            shadowBlur: 0,
            strokeStyle: "rgba(0,0,0,0.75)"
          },
          focus: {
            lineWidth: 1,
            shadowColor: "rgba(0,0,0,0.5)",
            shadowOffsetX: 1,
            shadowOffsetY: 1,
            shadowBlur: 0,
            strokeStyle: "#0080C2"
          }
        }
      };
    a.construct = function() {
      var b = m(),
        h = b.controls;
      new q.Queue({
        items: h,
        flatten: !0,
        oncomplete: function() {
          a.controls.mouse = b.mouse;
          a.controls.touch = b.touch;
          l("mouse", h);
          l("touch", h)
        },
        next: function(a, b, c) {
          if (!a.src) return this.next();
          var d = this;
          if ("svg" !== (f.vector.SVG.detect(a.src) ? "svg" : a.type) &&
            a.src) return q.loadImage({
            src: a.src,
            onload: function() {
              h[b] =
                a;
              h[b].image = this;
              d.next()
            },
            onerror: this.next
          });
          new f.vector.SVG({
            skipRender: !0,
            src: a.src,
            onload: function(c) {
              c = h[b] = c;
              q.cloneInto(a, c, {
                type: "undefined"
              });
              d.next()
            }
          })
        }
      })
    };
    a.construct();
    return a
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Theme)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.SceneTransform = function(f, d, a) {
    var e = f.feature,
      q = f.util;
    f.setupHistory && f.setupHistory.add({
      type: "transform",
      fn: function(a, b, c, d) {
        a = f.doc;
        d = b.layers;
        var e = b.origin,
          p = b.rotate,
          s = b.translate;
        b = b.scale;
        var m, l;
        "number" === typeof b ? l = m = b : b && (m = b.x, l = b.y);
        var w, g;
        s && (w = s.x, g = s.y);
        c && (p && (p = 360 - p), b && (m = 1 / m, l = 1 / l), s &&
          (w = -w, g = -g));
        for (c = 0; c < d.length; c++) {
          var u = a.scene.getById(d[c]);
          if (u) {
            var F = u.bbox;
            if (p) {
              var E = e.x - F.width / 2 * F.scale.x,
                D = e.y - F.height / 2 * F.scale.y,
                P = F.x - E,
                G = F.y - D,
                J = p * q.DEG_RAD;
              F.x = Math.cos(J) * P - Math.sin(J) * G + E;
              F.y = Math.sin(J) * P + Math.cos(J) * G + D;
              F.rotate = (F.rotate + p + 3600) % 360;
              u.dirtyTransform = !0
            }
            b && (E = (e.x - F.x) * m, D = (e.y - F.y) * l, F.x = e.x -
              E, F.y = e.y - D, F.scale.x *= m, F.scale.y *= l, u.dirtyCheck = !
              0, u.dirtyTransform = !0);
            s && (F.x += w, F.y += g, u.dirtyTransform = !0);
            u.inbounds = void 0
          }
        }
      }
    });
    var l, b, c, p, w, m, g;
    a.transform = function(a, h) {
      var r = a.method,
        k = a.rotate,
        v;
      if (v = a.scale)(v = a.scale, isFinite(v) && (v = {
          x: v,
          y: v
        }), isFinite(v.y) || isFinite(v.x)) ? isFinite(v.y) ? isFinite(
          v.x) ||
        (v.x = v.y) : v.y = v.x : (v.x = 1, v.y = 1);
      var x = v,
        s = a.translate;
      v = isFinite(k) && 0 !== k;
      var z = void 0 !== x && (1 !== x.x || 1 !== x.y),
        y = void 0 !== s && (0 !== s.x || 0 !== s.y),
        B = d.scene,
        A = B.children,
        C = a.abs || a.absolute,
        F = !r || "cache" === r || "down" === r || r.cache,
        E = !r || "move" === r || r.move,
        D = !r || "record" === r || "up" === r || r.record;
      F && (g = m = w = p = c = b = l = void 0, l = 0, b = a.origin ||
        B.getBoundingOrigin({
          useSelection: !0,
          useHovered: !0
        }), c = 0, w = p = 1, g = m = 0);
      if (E) {
        if (!(v || z || y || D)) return this;
        v && (c += k);
        z && (p *= x.x, w *= x.y);
        y && (m += s.x, g += s.y)
      }
      var P = 0;
      if (Array.isArray(a.items)) {
        for (var G = {}, J = 0, P = a.items.length; J < P; J++) {
          var N = B.getById(a.items[J]);
          N && (G[N.zIndex] = !0, P++)
        }
        a.items = G
      } else P = a.items ? q.count(a.items) : this.length;
      var G = [],
        J = b,
        N = a.items || this.items,
        K;
      for (K in N)
        if (N = A[K]) {
          var O = N.bbox,
            V = e.tools[N.toolkitId] || {};
          B.setDirtyPixelData(N);
          if (k && v && E)
            if (!1 === N.rotatable || !1 === V.rotatable) N.dirtyControl = !
              0;
            else {
              if (C) O.rotate = (k + 3600) % 360;
              else {
                var L = O.width / 2 * O.scale.x,
                  T = O.height / 2 * O.scale.y,
                  L = J.x - L,
                  Q = J.y - T,
                  T = O.x - L,
                  U = O.y - Q,
                  da = k * q.DEG_RAD;
                O.x = Math.cos(da) * T - Math.sin(da) * U + L;
                O.y =
                  Math.sin(da) * T + Math.cos(da) * U + Q;
                O.rotate = (O.rotate + k + 3600) % 360
              }
              N.dirtyTransform = !0;
              N.dirtyControl = !0;
              N.inbounds = void 0;
              l = !0
            }!x || !F && O.scaleCache || (O.scaleCache = {
            x: 1,
            y: 1,
            px: O.scale.x,
            py: O.scale.y,
            mx: O.x,
            my: O.y
          });
          if (x) {
            if (E && z)
              if (!1 === N.scalable || !1 === V.scalable) N.dirtyControl = !
                0;
              else {
                if (C) O.scale.x = x.x, O.scale.y = x.y;
                else if (1 < P || "objectBoundingBox" === O.units) {
                  da = (J.x - O.x) * x.x;
                  Q = (J.y - O.y) * x.y;
                  if (1 === x.y || 1 === x.x) L = O.width / 2 * O.scale.x,
                    T = O.height / 2 * O.scale.y, da -= (J.x - (O.x + L)) *
                    (1 - x.y), Q -= (J.y - (O.y + T)) *
                    (1 - x.x);
                  O.x = J.x - da;
                  O.y = J.y - Q;
                  O.scale.x *= x.x;
                  O.scale.y *= x.y;
                  O.scaleCache.x *= x.x;
                  O.scaleCache.y *= x.y
                } else {
                  T = O.scale.x *= x.x;
                  da = O.scale.y *= x.y;
                  O.scaleCache.x *= x.x;
                  O.scaleCache.y *= x.y;
                  var L = O.width / 2 * T,
                    T = O.height / 2 * da,
                    da = q.DEG_RAD * O.rotate,
                    aa;
                  var Q = a.control,
                    R = O.scale,
                    U = O.width;
                  aa = O.height;
                  var ea = new f.vector.Transform;
                  ea.translate(O.x, O.y);
                  ea.scale(R.x, R.y);
                  R = {};
                  R.cp = ea.point2d(U / 2, aa / 2);
                  R.nw = ea.point2d(0, 0);
                  R.ne = ea.point2d(U, 0);
                  R.se = ea.point2d(U, aa);
                  R.sw = ea.point2d(0, aa);
                  R.n = ea.point2d(U / 2, 0);
                  R.e = ea.point2d(U,
                    aa / 2);
                  R.s = ea.point2d(U / 2, aa);
                  R.w = ea.point2d(0, aa / 2);
                  aa = R[Q] || R.cp;
                  L = O.x + L;
                  Q = O.y + T;
                  U = aa.x - L;
                  aa = aa.y - Q;
                  ea = Math.cos(da);
                  da = Math.sin(da);
                  T = U * ea - aa * da + L;
                  U = U * da + aa * ea + Q;
                  O.x -= T - J.x;
                  O.y -= U - J.y
                }
                N.dirtyTransform = !0;
                N.dirtyControl = !0;
                N.inbounds = void 0;
                B.updateConstrain(N);
                l = !0
              }
            if (D || N.usePixelData) N.dirtyCheck = !0, O.scaleCache =
              void 0
          }
          s && y && E && (!1 === N.movable || !1 === V.movable ? N.dirtyControl = !
            0 : (C ? (O.x = s.x, O.y = s.y) : (O.x += s.x, O.y += s.y),
              N.dirtyTransform = !0, N.dirtyControl = !0, N.inbounds =
              void 0, B.updateConstrain(N),
              l = !0));
          l && (D && (x && (N.dirtyCheck = !0), N.dirtyControl = !0), N
            .id !== d.toolkit.area.inGenesis && G.push(N.id))
        }
      if (!1 === l) return this;
      k = f.net.dataChannel && e.stream.realtime && !h;
      if (d.history && D && G.length) {
        K = {};
        D = "";
        x = 0 !== c;
        s = 1 !== p || 1 !== w;
        A = 0 !== m || 0 !== g;
        K.layers = G;
        K.origin = J;
        x && (D = "rotate", K.rotate = c);
        s && (D = D ? "transform" : "scale", K.scale = {
          x: p,
          y: w
        });
        A && (D = D ? "transform" : "move", K.translate = {
          x: m,
          y: g
        });
        if (x || s || A) d.history.store({
          cmd: "transform",
          icon: "infinity",
          name: D,
          data: K
        }, h), f.on.transform && f.on.transform(K, G);
        f.on.rotate && x && f.on.rotate(K, G);
        f.on.scale && s && f.on.scale(K, G);
        f.on.move && A && f.on.move(K, G)
      }
      k && (J = {}, J.method = r, J.origin = a.origin || b, J.items =
        G, v && (J.rotate = a.rotate), z && (J.scale = a.scale), y &&
        (J.translate = a.translate), f.net.dataChannel.send([
          "scene.transform", J
        ]));
      B.updateBBox();
      this.render("scene.transform");
      return this
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.SceneTransform)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.GenerateMedia = function(f, d) {
    var a = f.gen,
      e = f.client,
      q = f.util,
      l = q.Canvas(),
      b = l.ctx,
      c = function(a) {
        var b = a.callback,
          c = a.ctx,
          d = c.canvas,
          f = c.createPattern(d, "repeat");
        e.io && e.io.blob ? d.toBlob(function(h) {
          h = URL.createObjectURL(h);
          f.css = "url(" + h + ")";
          f.data = h;
          f.id = a.id;
          b && b(f)
        }) : (c = d.toDataURL(), f.css = "url(" + c + ")", f.data = c,
          f.id = a.id, b && b(f));
        return f
      };
    a.paper = function(b, d) {
      var e = (q.toMetrics || (q.toMetrics = q.getScreenMetrics()))[
          "in>px"],
        e = {
          notebook: {
            id: "notebook",
            lineStartTop: .85 * e,
            lineHeight: 30,
            lineColor: "#8CA6BD",
            marginLeft: .85 * e,
            marginColor: "#FF7088",
            fillColor: "#F8F9B3"
          },
          looseLeaf: {
            id: "looseLeaf",
            lineStartTop: .85 * e,
            lineHeight: 30,
            lineColor: "#CAEAFB",
            marginLeft: .85 * e,
            marginColor: "#FF7088",
            fillColor: "#FAFAFA"
          },
          lined: {
            id: "lined",
            lineStartTop: -.5,
            gutter: .25 * e,
            lineHeight: 30,
            lineColor: "#8CA6BD",
            fillColor: "#FAFAFA"
          }
        };
      b = e[b] || b || e.notebook;
      b.callback = d;
      var f = b.grid || 0,
        l = b.gutter || 0,
        h = b.lineStartTop || 0,
        r = b.lineStartLeft || 0,
        e = b.lineHeight || 1,
        k = b.lineColor || "#8CA6BD",
        v = b.marginLeft || 0,
        x = b.marginColor || "#C37F9B",
        s = q.Canvas(1024, 1024).ctx;
      s.fillStyle = b.fillColor || "#fff";
      s.fillRect(0, 0, 1024, 1024);
      f && (s.save(), s.translate(l, l), f = a.grid({
        size: f,
        strokeColor: k,
        fillColor: "none"
      }), s.fillStyle = f, s.fillRect(0, 0, 1024, 1024), s.restore());
      f = 1024 / e;
      s.save();
      s.translate(r, h);
      for (h = 0; h < f; h++) s.beginPath(), s.moveTo(0, h * e), s.lineTo(
        1024, h * e), s.lineWidth = 1, s.strokeStyle = k, s.stroke();
      s.restore();
      v && (s.save(), s.beginPath(), s.moveTo(v, 0), s.lineTo(v, 1024),
        s.lineWidth = 1, s.strokeStyle =
        x, s.stroke(), s.restore());
      b.ctx = s;
      return c(b)
    };
    a.grid = function(a, b) {
      var d = {
        grid: {
          id: "grid",
          size: 20,
          strokeColor: "#ddd",
          fillColor: "#fff"
        },
        graphPaper: {
          id: "graphPaper",
          size: 20,
          strokeColor: "#BEE0BD",
          fillColor: "#F0FCE1"
        },
        blueprint: {
          id: "blueprint",
          size: 20,
          strokeColor: "#2893e0",
          fillColor: "#0078CF"
        }
      };
      a = d[a] || a || d.grid;
      var d = a.size || 12,
        e = a.strokeColor || "#000",
        f = a.fillColor || "#1f1f1f",
        h = q.Canvas(d, d).ctx;
      a.callback = b || a.callback;
      a.ctx = h;
      h.fillStyle = f;
      h.fillRect(0, 0, d, d);
      h.moveTo(0, 0);
      h.lineTo(0, d);
      h.moveTo(0,
        0);
      h.lineTo(d, 0);
      h.lineWidth = 1;
      h.strokeStyle = e;
      h.stroke();
      return c(a)
    };
    a.interlace = function(a, d) {
      a = a || {};
      var e = {
          transparent: {
            id: "transparent",
            size: 12,
            innerColor: "#fff",
            outerColor: "#d9d9d9"
          },
          transparentDark: {
            id: "transparentDark",
            size: 12,
            innerColor: "#000",
            outerColor: "#1f1f1f"
          }
        },
        f = e.transparent,
        e = e[a] || e[a.id] || a,
        q = e.size || f.size,
        h = e.innerColor || f.innerColor,
        f = e.outerColor || f.outerColor;
      l.width = 2 * q;
      l.height = 2 * q;
      b.fillStyle = h;
      b.fillRect(0, 0, q, q);
      b.fillStyle = f;
      b.fillRect(q, 0, q, q);
      b.fillStyle = f;
      b.fillRect(0,
        q, q, q);
      b.fillStyle = h;
      b.fillRect(q, q, q, q);
      if (a.toDataURL) return l.toDataURL();
      e.callback = d || e.callback;
      e.ctx = b;
      return c(e)
    };
    a.rangeBar = function(a) {
      a = a || {};
      a.dash = a.dash || {};
      f.ui.rangeStyle ? q.cloneInto(f.ui.rangeStyle, a) : a.top = 8;
      l || initCanvas();
      var c = d.pixelRatio,
        e = (a.top || 0) * c,
        g = (a.left || 0) * c,
        t = (a.barWidth || 233) * c,
        h = (a.barHeight || 6) * c,
        r = a.fillStyle || "#555",
        k = a.gradient,
        v = e + h;
      a = a.dash;
      a.height = a.height || 4;
      a.heightSmall = a.heightSmall || 3;
      a.strokeStyle = a.strokeStyle || "#666";
      a.lineWidth = a.lineWidth || 1;
      a.globalAlpha = a.globalAlpha || 1;
      a.position = a.position || "top";
      l.width = t + 1;
      l.height = h + a.height + e;
      l.style.width = l.width / c + "px";
      l.style.height = l.height / c + "px";
      b.clearRect(g, e, t, 30);
      var c = 0,
        x = t - 9;
      b.save();
      b.beginPath();
      b.lineWidth = a.lineWidth;
      b.globalAlpha = a.globalAlpha;
      var s;
      s = "bottom" === a.position ? v - 5 : e - 1;
      for (var z = a.height, y = a.heightSmall, v = 0; v <= x + 1; v +=
        x / 10) {
        var B = Math.round(v) + g + 4.5,
          A = c % 5 ? y : z;
        b.moveTo(B, s);
        "bottom" === a.position ? b.lineTo(B, s + A) : b.lineTo(B, s -
          A);
        b.strokeStyle = a.strokeStyle;
        b.stroke();
        b.beginPath();
        c++
      }
      b.restore();
      if (k)
        for (r = b.createLinearGradient(0, 0, t, 0), v = 0, a = k.length; v <
          a; v++) r.addColorStop(v / (a - 1 || 1), k[v]);
      b.fillStyle = r;
      B = g + .5;
      b.lineWidth = .25;
      b.strokeStyle = "#000";
      f.vector.Shape ? f.vector.Shape.roundRect(b, B, e, B + t, h, h /
        2) : b.rect(B, e, B + t, h);
      b.fill();
      b.stroke();
      return l
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.GenerateMedia)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.GeneratePreview = function(f) {
    var d = f.util,
      a = f.gen || (f.gen = {});
    a.preview = function(a, q) {
      a = a || {};
      var l = a.pixelRatio || 1,
        b = a.type || "stamp",
        c = (a.width || 52) * l,
        p = (a.height || 52) * l,
        w = a.oncomplete ? [] : {},
        m = a.oncomplete || function(a) {},
        g = a.background || "none",
        t = a.download || !1,
        l = a.debug || !1;
      a.src ? q = [{
        filepath: a.src
      }] : a.resource ? q = [{
        resource: a.resource
      }] : !q && f.lib && (q = f.lib[b].paths);
      var h = a.canvas || d.Canvas(),
        r = h.getContext("2d");
      l && document.body.appendChild(h);
      var k = function(a,
          b, h) {
          d.thumbnailer({
            src: a,
            crop: "edge",
            width: c,
            height: p,
            background: g,
            croparea: !1,
            onload: function(a) {
              t ? a.toBlob(function(a) {
                h.push({
                  filename: b,
                  blob: a
                });
                v.next()
              }) : (h.push({
                filename: b,
                canvas: a
              }), v.next())
            }
          })
        },
        v = new d.Queue({
          items: q,
          flatten: !0,
          onprogress: function(a) {
            1 < q.length && console.log("load", a)
          },
          oncomplete: function() {
            t ? f.io.zip.encode(w, function(a) {
              f.download.blob(a, b + "-preview.zip")
            }, function(a) {
              console.log("zip", a)
            }) : a.src || a.resource ? m(w[0]) : m(w)
          },
          next: function(d) {
            v = this;
            if (d.filepath && "#" ===
              d.filepath[0]) return this.next();
            var s = d.filepath ? d.filepath : f.lib[b].getSrc(d),
              m = "",
              q = [];
            if (a.src || a.resource) w = q;
            else {
              var l = s.replace(f.loc.host, "").substr(1).split("/");
              if (1 < l.length) {
                for (var t = [w], m = l.pop(); l.length;) {
                  var g = l.shift();
                  if (g) {
                    var u = t[t.length - 1];
                    u[g] || (u[g] = []);
                    t.push(u[g])
                  }
                }
                q = u[g]
              } else w.length || (w = []), m = l[0], q = w
            }
            m = m.replace("svg", "png");
            l = function(a) {
              h.width = c;
              h.height = p;
              a.render && a.render({
                ctx: r,
                placement: "crop",
                width: c,
                height: p
              });
              k(h, m, q)
            };
            switch (b) {
              case "clipart":
                d.resource ?
                  l(d.resource) : new f.vector.SVG({
                    ctx: r,
                    src: s,
                    useCache: isFinite(a.useCache) ? a.useCache : !0,
                    onerror: function(a) {
                      console.log(a, "error loading svg", d);
                      v.next()
                    },
                    onload: l
                  });
                break;
              case "stamp":
                k(s, m, q)
            }
          }
        })
    };
    a.preview.stamp = function(d, f, l) {
      d = d || {};
      d.type = "stamp";
      a.preview(d, f, l)
    };
    a.preview.clipart = function(d, f, l) {
      d = d || {};
      d.type = "clipart";
      a.preview(d, f, l)
    };
    a.preview.font = a.preview.text = function(e) {
      var q = a.canvas || (a.canvas = d.Canvas(1, 1)),
        l = q.getContext("2d"),
        b = [],
        c = [],
        p = [],
        w = f.lib.text;
      if (e) {
        for (var m in w.byName) break;
        c.push(w.byName[m]);
        p.push(m)
      } else
        for (m in w.byName) e = d.clone(w.byName[m]), e.filepath = w.getSrc(
          e), p.push(m), c.push(e);
      var g = function(a) {
          q.width = 236;
          q.height = 60;
          q.style.width = "300px";
          q.style.height = "50px";
          l.textAlign = "center";
          l.textBaseline = "middle";
          l.font = "60px '" + a.name + "', Arial, Helvetica";
          var c = l.measureText(a.name).width,
            d = f.vector.text.measureTextHeight(a.name, l.font),
            c = Math.min(q.width / (c + 40), q.height / (d + 20));
          1 > c && (l.font = 60 * c + "px '" + a.name +
            "', Arial, Helvetica");
          l.fillStyle = "#fff";
          l.fillText(a.name,
            q.width / 2, q.height / 2);
          q.toBlob(function(c) {
            b.push({
              filename: a.name + ".png",
              blob: c
            });
            t.next()
          })
        },
        t = new d.Queue({
          items: c,
          flatten: !0,
          oncomplete: function() {
            f.io.zip.encode(b, function(a) {
              f.download.blob(a, "font-preview.zip")
            })
          },
          onprogress: function(a) {
            console.log(a)
          },
          next: function(a) {
            t = this;
            if (f.vector.text.detectFont(a.name)) g(a);
            else {
              var b = d.clone(a);
              b.timeout = 1E3;
              b.callback = function(b) {
                b && console.log("missing: " + a.name);
                g(a)
              };
              f.vector.text.attach(b)
            }
          }
        })
    };
    return a
  };
  "undefined" !== typeof module && module.exports &&
    (module.exports = g.module.GeneratePreview)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.vector || (g.vector = {}),
    d = f.BBox = function(a) {
      sketch = d.__self || sketch;
      return a ? (this.unset(), this.path(a)) : {}
    };
  d.toRect = function(a) {
    return [{
      x: a.x1,
      y: a.y1,
      cmd: "M"
    }, {
      x: a.x2,
      y: a.y1,
      cmd: "L"
    }, {
      x: a.x2,
      y: a.y2,
      cmd: "L"
    }, {
      x: a.x1,
      y: a.y2,
      cmd: "L"
    }]
  };
  g = d.prototype;
  g.path = function(a) {
    var e = a.asRect || !1,
      b = a.convexHull || !1,
      c = a.expand || 0,
      p = a.matrix || void 0;
    a = a.data || a;
    var w, m = !0;
    p && (w = new f.Transform(p), m = f.Transform.isIdentity(p));
    var g, p = this.x,
      t = this.y,
      h, r;
    if (m)
      for (var m = 0, k = a.length; m < k; m++) switch ((g =
        a[m]).cmd) {
        case "M":
          g.x < p.min && (p.min = g.x);
          g.x > p.max && (p.max = g.x);
          g.y < t.min && (t.min = g.y);
          g.y > t.max && (t.max = g.y);
          h = g.x;
          r = g.y;
          break;
        case "L":
          g.x < p.min && (p.min = g.x);
          g.x > p.max && (p.max = g.x);
          g.y < t.min && (t.min = g.y);
          g.y > t.max && (t.max = g.y);
          h = g.x;
          r = g.y;
          break;
        case "C":
          this.cubic(h, r, g.x1, g.y1, g.x2, g.y2, g.x, g.y, b);
          h = g.x;
          r = g.y;
          break;
        case "Q":
          var v = h + 2 / 3 * (g.x1 - h),
            x = r + 2 / 3 * (g.y1 - r),
            s = v + (g.x - h) / 3,
            z = x + (g.y - r) / 3;
          this.cubic(h, r, v, x, s, z, g.x, g.y, b);
          h = g.x;
          r = g.y
      } else
        for (m = 0, k = a.length; m < k; m++) switch ((g = a[m]).cmd) {
          case "M":
            var y =
              w.point2d(g.x, g.y);
            y.x < p.min && (p.min = y.x);
            y.x > p.max && (p.max = y.x);
            y.y < t.min && (t.min = y.y);
            y.y > t.max && (t.max = y.y);
            h = y.x;
            r = y.y;
            break;
          case "L":
            y = w.point2d(g.x, g.y);
            y.x < p.min && (p.min = y.x);
            y.x > p.max && (p.max = y.x);
            y.y < t.min && (t.min = y.y);
            y.y > t.max && (t.max = y.y);
            h = y.x;
            r = y.y;
            break;
          case "C":
            y = w.point2d(g.x, g.y);
            v = w.point2d(g.x1, g.y1);
            g = w.point2d(g.x2, g.y2);
            this.cubic(h, r, v.x, v.y, g.x, g.y, y.x, y.y, b);
            h = y.x;
            r = y.y;
            break;
          case "Q":
            y = w.point2d(g.x, g.y), w.point2d(g.x1, g.y1), v = h + 2 /
              3 * (y.x1 - h), x = r + 2 / 3 * (y.y1 - r), s = v + (y.x -
                h) /
              3, z = x + (y.y - r) / 3, this.cubic(h, r, v, x, s, z, y.x,
                y.y, b), h = y.x, r = y.y
        }
    c && (p.expand(c), t.expand(c));
    b = {
      x1: p.min,
      x2: p.max,
      y1: t.min,
      y2: t.max
    };
    return e ? d.toRect(b) : b
  };
  g.cubic = function(a, d, b, c, f, g, m, u, t) {
    var h = this.x,
      r = this.y;
    m < h.min && (h.min = m);
    m > h.max && (h.max = m);
    u < r.min && (r.min = u);
    u > r.max && (r.max = u);
    if (t) h.extendTo(b), h.extendTo(f), r.extendTo(c), r.extendTo(g);
    else {
      t = r.min <= c && c <= r.max && r.min <= g && g <= r.max;
      if (!(h.min <= b && b <= h.max && h.min <= f && f <= h.max)) {
        var k = 3 * a - 9 * b + 9 * f - 3 * m,
          v = 6 * b - 12 * f + 6 * m,
          x = 3 * f - 3 * m;
        if (Math.abs(k) <=
          e) Math.abs(v) >= e && (x = -x / v, x > e && 1 > x && h.extendToCubic(
          x, 1 - x, a, m, b, f));
        else if (x = v * v - 4 * k * x, x >= e) {
          var s = Math.sqrt(x),
            x = (-v + s) / (2 * k);
          x > e && 1 > x && h.extendToCubic(x, 1 - x, a, m, b, f);
          x = (-v - s) / (2 * k);
          x > e && 1 > x && h.extendToCubic(x, 1 - x, a, m, b, f)
        }
      }
      t || (k = 3 * d - 9 * c + 9 * g - 3 * u, v = 6 * c - 12 * g + 6 *
        u, x = 3 * g - 3 * u, Math.abs(k) <= e ? Math.abs(v) >= e && (
          x = -x / v, x > e && 1 > x && r.extendToCubic(x, 1 - x, d, u,
            c, g)) : (x = v * v - 4 * k * x, x >= e && (s = Math.sqrt(x),
          x = (-v + s) / (2 * k), x > e && 1 > x && r.extendToCubic(x,
            1 - x, d, u, c, g), x = (-v - s) / (2 * k), x > e && 1 > x &&
          r.extendToCubic(x, 1 - x, d, u, c, g))))
    }
  };
  g.unset = function() {
    this.x = new a({
      min: Infinity,
      max: -Infinity
    });
    this.y = new a({
      min: Infinity,
      max: -Infinity
    })
  };
  var a = function(a) {
    this.min = a.min;
    this.max = a.max
  };
  a.prototype = {
    extendToCubic: function(a, d, b, c, e, f) {
      a = a * a * a * b + 3 * a * a * d * e + 3 * a * d * d * f + d *
        d * d * c;
      a < this.min && (this.min = a);
      a > this.max && (this.max = a)
    },
    extendTo: function(a) {
      a < this.min && (this.min = a);
      a > this.max && (this.max = a)
    },
    contains: function(a) {
      return this.min <= a && a <= this.max
    },
    expand: function(a) {
      this.min -= a;
      this.max += a
    }
  };
  var e = 1E-10;
  "undefined" !== typeof module &&
    module.exports && (module.exports = d)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.vector || (g.vector = {});
  f.catmullRomSplineUniform = function(d) {
    Array.isArray(d) && (d = {
      path: d,
      getResult: !0
    });
    var a = d.ctx || void 0,
      e = d.getResult || !a;
    d = d.path || [];
    var f = [];
    d[0] && (e && f.push({
      cmd: "M",
      x: d[0].x,
      y: d[0].y
    }), a && a.moveTo(d[0].x, d[0].y));
    var l = d.length;
    if (1 >= l) return f;
    for (var b = 0; b < l - 1; b++) {
      var c = 0 === b ? d[0] : d[b - 1],
        p = d[b],
        g = d[b + 1],
        m = b + 2 < l ? d[b + 2] : g,
        u = p.x + (1 * g.x - 1 * c.x) / 6,
        c = p.y + (1 * g.y - 1 * c.y) / 6,
        t = g.x + (1 * p.x - 1 * m.x) / 6,
        p = g.y + (1 * p.y - 1 * m.y) / 6,
        m = g.x,
        g = g.y;
      e && f.push({
        cmd: "C",
        x1: u,
        y1: c,
        x2: t,
        y2: p,
        x: m,
        y: g
      });
      a && a.bezierCurveTo(u, c, t, p, m, g)
    }
    return f
  };
  f.catmullRomSpline = function(d) {
    Array.isArray(d) && (d = {
      path: d,
      getResult: !0
    });
    if (0 === d.amount) return f.catmullRomSplineUniform(d);
    var a = d.amount || 1,
      e = d.ctx || void 0,
      q = d.getResult || !e;
    d = d.path || [];
    var l = [];
    d[0] && (q && l.push({
      cmd: "M",
      x: d[0].x,
      y: d[0].y
    }), e && e.moveTo(d[0].x, d[0].y));
    var b = d.length;
    if (1 >= b) return l;
    for (var c = 0; c < b - 1; c++) {
      var p = 0 === c ? d[0] : d[c - 1],
        g = d[c],
        m = d[c + 1],
        u = c + 2 < b ? d[c + 2] : m;
      if ("C" === g.cmd) var t = g.x1,
        p = g.y1,
        h = g.x2,
        u = g.y2,
        r = g.x,
        k = g.y;
      else {
        var h = Math.sqrt(Math.pow(p.x - g.x, 2) + Math.pow(p.y - g.y,
            2)),
          r = Math.sqrt(Math.pow(g.x - m.x, 2) + Math.pow(g.y - m.y, 2)),
          k = Math.sqrt(Math.pow(m.x - u.x, 2) + Math.pow(m.y - u.y, 2)),
          t = Math.pow(h, a),
          h = Math.pow(h, 2 * a),
          v = Math.pow(r, a),
          r = Math.pow(r, 2 * a),
          x = Math.pow(k, a),
          k = Math.pow(k, 2 * a),
          s = 2 * h + 3 * t * v + r,
          z = 2 * k + 3 * x * v + r,
          y = 3 * t * (t + v);
        0 < y && (y = 1 / y);
        v = 3 * x * (x + v);
        0 < v && (v = 1 / v);
        t = (-r * p.x + s * g.x + h * m.x) * y;
        p = (-r * p.y + s * g.y + h * m.y) * y;
        h = (k * g.x + z * m.x - r * u.x) * v;
        u = (k * g.y + z * m.y - r * u.y) * v;
        r = m.x;
        k = m.y;
        0 === t && 0 === p && (t = g.x, p = g.y);
        0 === h && 0 === u && (h =
          m.x, u = m.y)
      }
      q && l.push({
        cmd: "C",
        x1: t,
        y1: p,
        x2: h,
        y2: u,
        x: r,
        y: k
      });
      e && e.bezierCurveTo(t, p, h, u, r, k)
    }
    return l
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.util;
  g = g.vector = g.vector || {};
  (g.Degree = function(a) {}).scale = function(a, c, d) {
    return 0 > c && 0 > d ? 180 + a : 0 > c ? 360 - a : 0 > d ? 540 -
      a : a
  };
  var d = g.Point = function(a, c) {
    return {
      x: a || 0,
      y: c || 0
    }
  };
  d.fromArray = function(a) {
    return d(a[0], a[1])
  };
  d.clone = function(a) {
    return d(a.x, a.y)
  };
  d.equals = function(a, c) {
    return a.x === c.x && a.y === c.y
  };
  d.exists = function(a) {
    return a && isFinite(a.x + a.y)
  };
  d.add = function(a, c) {
    a.x += c.x;
    a.y += c.y;
    return a
  };
  d.subtract = function(a, c) {
    a.x -= c.x;
    a.y -= c.y;
    return a
  };
  d.dot = function(a, c) {
    return a.x *
      c.x + a.y * c.y
  };
  d.distance = function(a, c) {
    var d = a.x - c.x,
      e = a.y - c.y;
    return Math.sqrt(d * d + e * e)
  };
  d.angle = function(a, c, d) {
    a = Math.atan2(c.y - a.y, c.x - a.x);
    return d ? a * f.RAD_DEG : a
  };
  d.rotateAt = function(a, c, d) {
    var e = a.x,
      f = a.y;
    a.x = c.x + Math.cos(d) * (e - c.x) - Math.sin(d) * (f - c.y);
    a.y = c.y + Math.sin(d) * (e - c.x) + Math.cos(d) * (f - c.y);
    return a
  };
  d.atRadianDistance = function(a, c, d) {
    return {
      x: Math.cos(c) * d + a.x,
      y: Math.sin(c) * d + a.y
    }
  };
  d.atRadianToTime = function(a, c, d, e, f, q) {
    var l = a - d,
      h = c - e;
    f *= Math.sqrt(l * l + h * h);
    a = Math.atan2(e - c, d - a);
    q &&
      (a += q);
    return {
      x: Math.cos(a) * f,
      y: Math.sin(a) * f
    }
  };
  d.atTimeToRadius = function(a, c, d, e) {
    var f = c.x - a.x,
      q = c.y - a.y;
    c = a.x + f * d;
    a = a.y + q * d;
    f = Math.atan2(q, f) - 1.57079632;
    return {
      x: c + Math.cos(f) * e,
      y: a + Math.sin(f) * e
    }
  };
  d.atTimeOnLine = function(a, c, d) {
    return {
      x: a.x + (c.x - a.x) * d,
      y: a.y + (c.y - a.y) * d
    }
  };
  d.atTimeOnQuadratic = function(a, c, d, e) {
    var f = 1 - e,
      q = f * f,
      f = 2 * f * e;
    e *= e;
    return {
      x: q * a.x + f * c.x + e * d.x,
      y: q * a.y + f * c.y + e * d.y
    }
  };
  d.nearestOnLine = function(a, c, d, e) {
    var f = d.x - c.x;
    d = d.y - c.y;
    var q = f * f + d * d;
    a = (a.x - c.x) * f + (a.y - c.y) * d;
    var l = a / q;
    e && (l = Math.max(0, Math.min(1, a / q)));
    return {
      time: l,
      x: c.x + f * l,
      y: c.y + d * l
    }
  };
  d.toLineDistance = function(a, c, d) {
    var e = d.x - c.x,
      f = d.y - c.y,
      q = e * e + f * f;
    if (0 === q) var l = c.x,
      h = c.y;
    else l = (a.x - c.x) * e, h = (a.y - c.y) * f, q = (l + h) / q, 0 >
      q ? (l = c.x, h = c.y) : 1 < q ? (l = d.x, h = d.y) : (l = c.x +
        q * e, h = c.y + q * f);
    e = a.x - l;
    f = a.y - h;
    return Math.sqrt(e * e + f * f)
  };
  d.lineToLineIntersectionSweep = function(a, c, d, e) {
    return (e.y - a.y) * (d.x - a.x) > (d.y - a.y) * (e.x - a.x) !==
      (e.y - c.y) * (d.x - c.x) > (d.y - c.y) * (e.x - c.x) && (d.y -
        a.y) * (c.x - a.x) > (c.y - a.y) * (d.x - a.x) !== (e.y - a.y) *
      (c.x -
        a.x) > (c.y - a.y) * (e.x - a.x)
  };
  d.lineToLineIntersection = function(a, c, d, e) {
    var f = c.y - a.y;
    c = c.x - a.x;
    var q = e.x - d.x,
      l = e.y - d.y;
    e = c * l - f * q;
    if (!e) return !1;
    var h = a.x - d.x;
    d = a.y - d.y;
    q = (q * d - l * h) / e;
    if (0 > q || 1 < q) return !1;
    d = (c * d - f * h) / e;
    return 0 > d || 1 < d ? !1 : {
      x: a.x + q * c,
      y: a.y + q * f
    }
  };
  d.inBBox = function(a, c) {
    return a.x > c.x1 && a.y > c.y1 && a.x < c.x2 && a.y < c.y2
  };
  d.inRect = function(a, c, d, e) {
    var f = d.x - c.x,
      q = d.y - c.y,
      l = e.x - d.x;
    e = e.y - d.y;
    c = f * (a.x - c.x) + q * (a.y - c.y);
    a = l * (a.x - d.x) + e * (a.y - d.y);
    return 0 < c && c < f * f + q * q && 0 < a && a < l * l + e * e
  };
  d.inPolygon =
    function(a, c, d) {
      for (var e = !1, f = a.length, q = 0, l = f - 1; q < f; l = q++) {
        var h = a[q],
          l = a[l];
        (h.y <= d && d < l.y || l.y <= d && d < h.y) && c < (l.x - h.x) *
          (d - h.y) / (l.y - h.y) + h.x && (e = !e)
      }
      return e
    };
  d.inPolygonChain = function(a, c, e) {
    for (var f = 0, m = 0, q = a.length; m < q; m++) d.inPolygon(a[m],
      c, e) && f++;
    return 1 === (f & 1)
  };
  var a = g.Polygon = function(a) {};
  a.clone = function(a) {
    for (var c = [], d = 0, e = a.length; d < e; d++) {
      var f = a[d];
      c.push({
        cmd: f.cmd || (0 === d ? "M" : "L"),
        x: f.x,
        y: f.y
      })
    }
    return c
  };
  a.isClockwise = function(a) {
    for (var c = 0, d = 0; d < a.length; d++) var e = a[d],
      f = a[(d + 1) % a.length],
      c = c + (f.x - e.x) * (f.y + e.y);
    return 0 >= c
  };
  a.collision = function(b, c) {
    for (var e = b.length, f = 0; f < e; f++) {
      var m = b[f];
      if (d.inPolygon(c, m.x, m.y)) return !0
    }
    e = c.length;
    for (f = 0; f < e; f++)
      if (m = c[f], d.inPolygon(b, m.x, m.y)) return !0;
    return a.intersects(b, c)
  };
  a.intersects = function(a, c) {
    for (var e = a.length, f = c.length, m = 0; m < e; m++)
      for (var q = a[m], l = a[(m + 1) % e], h = 0; h < f; h++)
        if (d.lineToLineIntersection(q, l, c[h], c[(h + 1) % f])) return !
          0;
    return !1
  };
  a.SAT = function() {
    var a = function(a, b, d) {
      for (var e = 0, f = a.length; e < f; e++) {
        var q =
          a[e],
          h = a[(e + 1) % f],
          r = q.x - h.x,
          q = q.y - h.y;
        d ? r = -r : q = -q;
        a: {
          for (var k = 0, v = b.length; k < v; k++) {
            var l = b[k];
            if (0 > q * (l.x - h.x) + r * (l.y - h.y)) {
              h = !1;
              break a
            }
          }
          h = !0
        }
        if (h) return !1
      }
      return !0
    };
    return function(c, d) {
      return a(c, d) && a(d, c) ? !0 : !1
    }
  }();
  a.arcSpline = function(a, c, p) {
    for (var q = c.length - 1, m = 0; m < q; m++) {
      var l = c[(m + 0) % q],
        t = c[(m + 1) % q],
        h = c[(m + 2) % q],
        r = d.atTimeOnLine(l, t, .5),
        k = d.atTimeOnLine(t, h, .5),
        v = d.atRadianDistance(r, d.angle(l, t) + 90 * f.DEG_RAD, 1E4),
        x = d.atRadianDistance(k, d.angle(t, h) + 90 * f.DEG_RAD, 1E4),
        l = d.distance(l, t) /
        2,
        l = d.distance(r, k) / 2;
      if (v = d.lineToLineIntersection(r, v, k, x)) a.fillStyle =
        "#f00", a.fillRect(v.x - 10, v.y - 10, 20, 20);
      0 === m && a.moveTo(r.x, r.y);
      e(a, t, "#f0f");
      e(a, r, "#fff");
      e(a, k, "#ff0");
      a.arcTo(t.x, t.y, h.x, h.y, p > l ? l : p)
    }
    a.closePath()
  };
  var e = function(a, c, d) {
    a.fillStyle = d;
    a.fillRect(c.x - 5, c.y - 5, 10, 10)
  };
  g.Arc = function(a, c, e, f, m) {
    a = d(a, c);
    a.cp1 = d(e, f);
    a.radius = m;
    return a
  };
  var q = g.Quadratic = function(a, c, e, f) {
    a = d(a, c);
    a.cp1 = d(e, f);
    return a
  };
  q.fromArray = function(a) {
    return {
      x1: a[0],
      y1: a[1],
      x: a[2],
      y: a[3]
    }
  };
  q.distance =
    function(a, c, d, e, f, q) {
      f = a - 2 * d + f;
      q = c - 2 * e + q;
      a = 2 * d - 2 * a;
      e = 2 * e - 2 * c;
      c = 4 * (f * f + q * q);
      f = 4 * (f * a + q * e);
      e = a * a + e * e;
      q = 2 * Math.sqrt(c + f + e);
      a = Math.sqrt(c);
      d = 2 * c * a;
      var l = 2 * Math.sqrt(e),
        h = f / a;
      return (d * q + a * f * (q - l) + (4 * e * c - f * f) * Math.log(
        (2 * a + h + q) / (h + l))) / (4 * d)
    };
  var l = g.Cubic = function(a, c, e, f, m, q) {
    a = d(a, c);
    a.cp1 = d(e, f);
    a.cp2 = d(m, q);
    return a
  };
  l.fromArray = function(a) {
    return {
      cmd: "C",
      x1: a[0],
      y1: a[1],
      x2: a[2],
      y2: a[3],
      x: a[4],
      y: a[5]
    }
  };
  l.fromLineSegment = function(a, c, e) {
    var f = d.atTimeOnLine(a, c, 1 / 3);
    a = d.atTimeOnLine(a, c, 2 / 3);
    e = e ||
      d.clone(c);
    e.cmd = "C";
    e.x1 = f.x;
    e.y1 = f.y;
    e.x2 = a.x;
    e.y2 = a.y;
    return e
  };
  l.pointAtTime = function(a, c, d, e, f, q, l, h, r) {
    var k = 1 - r,
      v = k * k * k,
      x = 3 * r * k * k,
      k = 3 * r * r * k;
    r *= r * r;
    return {
      x: v * a + x * d + k * f + r * l,
      y: v * c + x * e + k * q + r * h
    }
  };
  l.split = function(a, c, d, e, f, q, l, h, r) {
    var k = a + (d - a) * r,
      v = c + (e - c) * r,
      x = d + (f - d) * r,
      s = e + (q - e) * r;
    f += (l - f) * r;
    q += (h - q) * r;
    e = k + (x - k) * r;
    d = v + (s - v) * r;
    var x = x + (f - x) * r,
      s = s + (q - s) * r,
      z = e + (x - e) * r;
    r = d + (s - d) * r;
    return [
      [a, c, k, v, e, d, z, r],
      [z, r, x, s, f, q, l, h]
    ]
  };
  l.splitSegment = function() {
    return function(a, c, d) {
      d = 0 + (d - c) / (1 - c) * 1;
      c = l.split(a[0].x,
        a[0].y, a[1].x, a[1].y, a[2].x, a[2].y, a[3].x, a[3].y, c);
      a = c[0];
      c = c[1];
      d = l.split(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7], d);
      c = d[0];
      return [a, c, d[1]]
    }
  }();
  l.isFlat = function(a, c) {
    return l.flatness1(a) <= (c || 1)
  };
  l.flatness1 = function(a) {
    var c = d.toLineDistance(a[1], a[0], a[3]);
    a = d.toLineDistance(a[2], a[0], a[3]);
    return c > a ? c : a
  };
  l.nearestTimeOnCurve = function() {
    var a = function(c, e, f, m, q) {
      if (1E-5 > q) return f;
      var t = f - q,
        h = f + q,
        r = l.pointAtTime(e[0].x, e[0].y, e[1].x, e[1].y, e[2].x, e[2]
          .y, e[3].x, e[3].y, t),
        k = l.pointAtTime(e[0].x,
          e[0].y, e[1].x, e[1].y, e[2].x, e[2].y, e[3].x, e[3].y, h),
        r = d.distance(c, r),
        k = d.distance(c, k);
      return 0 <= t && r < m ? a(c, e, t, r, q) : 1 >= h && k < m ? a(
        c, e, h, k, q) : a(c, e, f, m, q / 2)
    };
    return function(c, e) {
      for (var q = 0, m = f.INFINITY, g = 0; 10 > g; g++) {
        var t = l.pointAtTime(e[0].x, e[0].y, e[1].x, e[1].y, e[2].x,
            e[2].y, e[3].x, e[3].y, g / 10),
          t = d.distance(c, t);
        t < m && (m = t, q = g / 10)
      }
      return a(c, e, q, m, 1 / 10.1)
    }
  }();
  l.nearestPointOnCurve = function(a, c) {
    var e = l.nearestTimeOnCurve(a, c),
      f = l.pointAtTime(c[0].x, c[0].y, c[1].x, c[1].y, c[2].x, c[2].y,
        c[3].x, c[3].y,
        e),
      m = d.distance(a, f);
    return {
      point: f,
      distance: m,
      time: e
    }
  };
  l.toPolyline = function() {
    var a, c = function(e, f, m) {
      l.isFlat(e, f || .33) || 10 < ++m ? a.push(d.clone(e[3])) : (e =
        l.split(e[0].x, e[0].y, e[1].x, e[1].y, e[2].x, e[2].y, e[3].x,
          e[3].y, .5), c(l.fromArray2(e[0]), f, m), c(l.fromArray2(e[1]),
          f, m))
    };
    return function(e, f) {
      a = [];
      a.push(d.clone(e[0]));
      c(e, f, 0);
      return a
    }
  }();
  l.fromArray2 = function(a) {
    return [{
      x: a[0],
      y: a[1]
    }, {
      x: a[2],
      y: a[3]
    }, {
      x: a[4],
      y: a[5]
    }, {
      x: a[6],
      y: a[7]
    }]
  };
  (function() {
    var a = [-.06405689286260563, .06405689286260563, -.1911188674736163,
        .1911188674736163, -.3150426796961634, .3150426796961634, -.4337935076260451,
        .4337935076260451, -.5454214713888396, .5454214713888396, -.6480936519369755,
        .6480936519369755, -.7401241915785544, .7401241915785544, -.820001985973903,
        .820001985973903, -.8864155270044011, .8864155270044011, -.9382745520027328,
        .9382745520027328, -.9747285559713095, .9747285559713095, -.9951872199970213,
        .9951872199970213
      ],
      c = [.12793819534675216, .12793819534675216, .1258374563468283,
        .1258374563468283, .12167047292780339,
        .12167047292780339, .1155056680537256, .1155056680537256, .10744427011596563,
        .10744427011596563, .09761865210411388, .09761865210411388, .08619016153195327,
        .08619016153195327, .0733464814110803, .0733464814110803, .05929858491543678,
        .05929858491543678, .04427743881741981, .04427743881741981, .028531388628933663,
        .028531388628933663, .0123412297999872, .0123412297999872
      ];
    l.distance = function(d) {
      var e, f, q = 0,
        l = a.length,
        h = [];
      for (f = 0; 3 > f; f++) h.push({
        x: 3 * (d[f + 1].x - d[f].x),
        y: 3 * (d[f + 1].y - d[f].y)
      });
      for (d = 0; d < l; d++) {
        e = .5 *
          a[d] + .5;
        var r = 1 - e;
        f = h;
        var k = r * r,
          r = r * e * 2,
          v = e * e;
        e = k * f[0].x + r * f[1].x + v * f[2].x;
        f = k * f[0].y + r * f[1].y + v * f[2].y;
        q += c[d] * Math.sqrt(e * e + f * f)
      }
      return .5 * q
    }
  })()
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = (g.vector = g.vector || {}).Cubic;
  g.vector.Path = function(d) {
    this.ctx = d;
    this.data = [];
    this.start = {
      x: 0,
      y: 0
    };
    this.current = {
      x: 0,
      y: 0
    };
    this.dashIdx = 0;
    this.dashArray = [4, 4];
    this.dashCurve = !1;
    this.dashRemainder = this.dashOffset = 0;
    this.dashStyle = ["#f00", "#00f"];
    this.dashStyleIdx = 0;
    this.dashAdaptive = !1;
    this.reset = function() {
      this.dashRemainder = this.dashIdx = 0
    };
    this.resetPath = function() {
      this.distance = 0;
      this.data = [];
      this.reset()
    };
    this.moveTo = function(a, d) {
      var f = this.ctx,
        l = this.getData;
      f && f.moveTo(a,
        d);
      l && this.data.push({
        cmd: "M",
        x: a,
        y: d
      });
      this.start.x = a;
      this.start.y = d;
      this.current.x = a;
      this.current.y = d
    };
    this.lineTo = function(a, d) {
      for (var f = this.ctx, l = this.getData || !1, b = this.current || {
            x: 0,
            y: 0
          }, c = this.dashArray, p = c.length, g = this.dashIdx, m = b.x,
          u = b.y, t = a - b.x, h = d - b.y, r = Math.sqrt(t * t + h *
            h), k = Math.abs(t) > Math.abs(h), v = k ? h / t : t / h, x;
        .1 < r;) {
        this.dashRemainder ? (x = this.dashRemainder || .01, this.dashRemainder =
          0) : x = c[++g % p] || .01;
        if (0 > (r -= x)) {
          f && (0 === g % 2 ? f.lineTo(a, d) : f.moveTo(a, d));
          break
        }
        x = Math.sqrt(x * x / (1 + v * v));
        k ? (0 > t && (x = -x), b.x += x, b.y += v * x) : (0 > h && (x = -
          x), b.x += v * x, b.y += x);
        f && g % 2 && f && (f.moveTo(m, u), f.strokeStyle = this.dashStyle[
          this.dashStyleIdx++ % 2], f.lineTo(b.x, b.y));
        l && (0 === this.data.length && this.data.push({
          cmd: "M",
          x: m,
          y: u
        }), this.data.push({
          cmd: "L",
          x: b.x,
          y: b.y
        }));
        m = b.x;
        u = b.y
      }
      this.dashIdx = g;
      this.dashRemainder = Math.abs(r);
      this.current.x = a;
      this.current.y = d;
      if (l) return this.data
    };
    this.quadraticCurveTo = function(a, d, f, l) {
      var b = this.current;
      a = b.x + 2 / 3 * (a - b.x);
      d = b.y + 2 / 3 * (d - b.y);
      this.bezierCurveTo(a, d, a + (f - b.x) /
        3, d + (l - b.y) / 3, f, l)
    };
    this.bezierCurveTo = function(a, d, q, l, b, c) {
      var p = this.ctx,
        g = this.getData || !1,
        m = this.current || {
          x: 0,
          y: 0
        },
        u = this.dashCurve || !1,
        t = this.dashArray,
        h = t.length,
        r = this.dashIdx,
        k = !0;
      a = [m.x, m.y, a, d, q, l, b, c];
      d = m.x;
      q = m.y;
      l = m.x;
      var v, x, m = m.y,
        s, z = 0,
        y, B, A, C, F, E = 0;
      if (k = this.dashAdaptive) {
        C = f.fromArray2(a);
        k = f.toPolyline(C, k);
        C = f.distance(C);
        x = k[k.length - 1];
        for (s = 0; s < k.length; s++) k[s].cmd = "L", this.data.push(
          k[s]);
        this.distance += C;
        this.current.x = x.x;
        this.current.y = x.y;
        if (g) return this.data
      }
      for (; 1 >
        z;) {
        this.dashRemainder ? (k = !1, F = this.dashRemainder || .01,
          this.dashRemainder = 0) : (k = !0, F = t[++r % h] || .01);
        C = z = 0;
        v = l;
        for (s = m; 1 > z; z += .001) {
          x = d - v;
          s = q - s;
          C += Math.sqrt(x * x + s * s);
          if (C >= F) break;
          s = 1 - z;
          x = s * s * s;
          y = 3 * z * s * s;
          B = 3 * z * z * s;
          A = z * z * z;
          v = d;
          s = q;
          d = x * a[0] + y * a[2] + B * a[4] + A * b;
          q = x * a[1] + y * a[3] + B * a[5] + A * c
        }
        E += C;
        s = f.split(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], z);
        a = s[1];
        s = s[0];
        k && (p && p.moveTo(l, m), g && 0 === this.data.length && this
          .data.push({
            cmd: "M",
            distance: 0,
            x: l,
            y: m
          }));
        p && r % 2 && (p.moveTo(l, m), p.strokeStyle = this.dashStyle[
            this.dashStyleIdx++ %
            2], u ? p.bezierCurveTo(s[2], s[3], s[4], s[5], s[6], s[7]) :
          p.lineTo(s[6], s[7]));
        g && (u ? this.data.push({
          cmd: "C",
          distance: E,
          x1: s[2],
          y1: s[3],
          x2: s[4],
          y2: s[5],
          x: s[6],
          y: s[7]
        }) : this.data.push({
          cmd: "L",
          distance: E,
          x: s[6],
          y: s[7]
        }));
        l = d;
        m = q
      }
      this.dashIdx = r;
      this.dashRemainder = F - C;
      this.distance += E;
      this.current.x = d;
      this.current.y = q;
      if (g) return this.data
    };
    this.closePath = function() {
      var a = this.getData || !1;
      this.lineTo(this.start.x, this.start.y);
      a && this.data.push({
        cmd: "Z"
      });
      this.reset()
    }
  };
  "undefined" !== typeof module && module.exports &&
    (module.exports = g.vector.Path)
})(sketch);
(function(g) {
  var f = (g.vector = g.vector || {}).Point,
    d = g.vector.mcMasterSmooth = function(a, d) {
      d = d || 3;
      0 === d % 2 && d++;
      var f = d / 2 >> 0,
        b = a.length;
      if (b < d) return a;
      for (var c = 0, p = 0, g = 0; g < d; g++) c += a[g].x, p += a[g].y;
      for (var m = a.slice(0, f), g = f, u = b - f; g < u; g++) {
        var t = a[g];
        "C" === t.cmd ? m.push(t) : (g > f && (c -= a[g - f - 1].x, p -=
          a[g - f - 1].y, c += a[g + f].x, p += a[g + f].y), m.push({
          x: (t.x + c / d) / 2,
          y: (t.y + p / d) / 2
        }))
      }
      return m.concat(a.slice(u, b))
    },
    a = g.vector.langSimplify = function(a, d, l) {
      d = d || 4;
      l = l || 1;
      var b = a.length - 1;
      if (0 >= b) return a;
      var c = 0,
        p = 0,
        g = Math.min(d, b),
        p = p + g,
        b = b - g,
        m = [];
      for (m.push(a[c]); g;) {
        for (var u = a[c], t = a[p], h = 0, r = c + 1; r != p;) {
          var k = f.toLineDistance(a[r], u, t),
            h = Math.max(h, k);
          if (h > l) break;
          else r++
        }
        h < l ? (c = p, m.push(a[c]), g = Math.min(d, b), p += g, b -= g) :
          (p--, b++)
      }
      return m
    };
  g.vector.roundPath = function(a, d) {
    var f = Math.pow(10, d);
    a.forEach(function(a) {
      for (var c in a) {
        var d = a[c];
        isFinite(d) && (a[c] = Math.round(d * f) / f)
      }
    });
    return a
  };
  g.vector.simplify = function(e, f, l) {
    return a(d(e, 3), 6, 1)
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g = g.vector || {};
  var f = function() {
      return {
        a: 1,
        b: 0,
        x: 0,
        c: 0,
        d: 1,
        y: 0
      }
    },
    d = function(d) {
      return d.a === a.a && d.b === a.b && d.c === a.c && d.d === a.d &&
        d.x === a.x && d.y === a.y
    },
    a = f(),
    e = g.Transform = function(a) {
      void 0 === a ? this.matrix = f() : isFinite(a.a + a.b + a.c + a.d +
        a.x + a.y) ? this.fromObject(a) : isFinite(a[0] + a[1] + a[2] +
        a[3] + a[4] + a[5]) ? this.fromArray(a) : this.matrix = f();
      return this
    };
  e.identity = a;
  e.isIdentity = d;
  e.getIdentity = f;
  e.prototype = {
    identity: a,
    isIdentity: d,
    getIdentity: f,
    matrices: [],
    save: function() {
      this.matrices.push(this.cloneMatrix(this.matrix))
    },
    restore: function() {
      this.matrix = this.matrices.pop() || f()
    },
    point2d: function(a, d) {
      var b = this.matrix;
      return {
        x: b.a * a + b.c * d + b.x,
        y: b.b * a + b.d * d + b.y
      }
    },
    point2dx: function(a, d, b) {
      var c = this.matrix,
        e = a[d],
        f = a[b];
      a[d] = c.a * e + c.c * f + c.x;
      a[b] = c.b * e + c.d * f + c.y;
      return a
    },
    flatten: function(a, e, b) {
      if (a) {
        e && (a = JSON.parse(JSON.stringify(a)));
        if (a.length) {
          if (!d(this.matrix)) {
            e = 0;
            for (var c = a.length, f; e < c; e++)
              if (f = a[e]) switch (f.cmd) {
                case "M":
                  this.point2dx(f, "x", "y");
                  break;
                case "L":
                  this.point2dx(f, "x", "y");
                  break;
                case "C":
                  this.point2dx(f,
                    "x", "y");
                  this.point2dx(f, "x1", "y1");
                  this.point2dx(f, "x2", "y2");
                  break;
                case "Q":
                  this.point2dx(f, "x", "y");
                  this.point2dx(f, "x1", "y1");
                  break;
                case "Z":
                case "z":
                  isFinite(f.x + f.y) && this.point2dx(f, "x", "y")
              }
          }
          b && (this.matrix = this.getIdentity())
        } else this.point2dx(a, "x", "y");
        return a
      }
    },
    invert: function(a) {
      a = a || this.matrix;
      void 0 === a.a && (M = this.cloneMatrix(M));
      var d = a.a * a.d - a.b * a.c;
      delete this.matrix;
      this.combine({
        a: a.d / d,
        b: -a.b / d,
        x: (a.b * a.y - a.d * a.x) / d,
        c: -a.c / d,
        d: a.a / d,
        y: (a.c * a.x - a.a * a.y) / d
      });
      return this
    },
    transform: function(a,
      d, b, c, e, f) {
      var m = this.matrix;
      this.matrix = {
        a: m.a * a + m.c * d,
        b: m.b * a + m.d * d,
        c: m.a * b + m.c * c,
        d: m.b * b + m.d * c,
        x: m.a * e + m.c * f + m.x,
        y: m.b * e + m.d * f + m.y
      };
      return this
    },
    setTransform: function(a, d, b, c, e, f) {
      this.matrix = {
        a: a,
        b: d,
        c: b,
        d: c,
        x: e,
        y: f
      };
      return this
    },
    rotate: function(a) {
      var d = this.matrix,
        b = Math.cos(a);
      a = Math.sin(a);
      this.matrix = {
        a: d.a * b + d.b * -a,
        b: d.a * a + d.b * b,
        c: d.c * b + d.d * -a,
        d: d.c * a + d.d * b,
        x: d.x,
        y: d.y
      };
      return this
    },
    scale: function(a, d) {
      void 0 === d && (d = a);
      var b = this.matrix;
      this.matrix = {
        a: b.a * a,
        b: b.b * d,
        c: b.c * a,
        d: b.d * d,
        x: b.x,
        y: b.y
      };
      return this
    },
    skew: function(a, d) {
      var b = this.matrix,
        c = b.a,
        e = b.b,
        f = b.c,
        m = b.d,
        g = Math.tan(a),
        t = Math.tan(d);
      b.a = c + f * t;
      b.b = e + m * t;
      b.c = c * g + f;
      b.d = e * g + m;
      return this
    },
    translate: function(a, d) {
      void 0 === d && (d = 0);
      var b = this.matrix;
      b.x = b.a * a + b.c * d + b.x;
      b.y = b.b * a + b.d * d + b.y;
      return this
    },
    combine: function(a) {
      var d = [];
      if (void 0 !== a.matrix)
        for (var b = 0; b < arguments.length; b++) d[b] = arguments[b]
          .matrix;
      else if ("number" === typeof a.a)
        for (b = 0; b < arguments.length; b++) d[b] = arguments[b];
      else d = a;
      for (var b = this.matrix, c = [], e =
          0; e < d.length; e++) void 0 === b ? b = d[e] : (c = d[e], b = {
        a: b.a * c.a + b.b * c.c,
        b: b.a * c.b + b.b * c.d,
        c: b.c * c.a + b.d * c.c,
        d: b.c * c.b + b.d * c.d,
        x: b.a * c.x + b.c * c.y + b.x,
        y: b.b * c.x + b.d * c.y + b.y
      });
      this.matrix = b;
      return this
    },
    clone: function() {
      return new e(this.cloneMatrix())
    },
    cloneMatrix: function(a) {
      a = a || this.matrix;
      return {
        a: a.a,
        b: a.b,
        c: a.c,
        d: a.d,
        x: a.x,
        y: a.y
      }
    },
    reset: function() {
      this.matrix = f();
      return this
    },
    fromArray: function(a) {
      this.matrix = {
        a: a[0],
        b: a[1],
        c: a[2],
        d: a[3],
        x: a[4],
        y: a[5]
      };
      return this
    },
    fromObject: function(a) {
      this.matrix = this.cloneMatrix(a);
      return this
    },
    fromString: function(a) {
      this.matrix = a.split(",").map(function(a) {
        return parseFloat(a)
      });
      return this
    },
    toString: function(a) {
      a = a || this.matrix;
      return "" + a.a + "," + a.b + "," + a.c + "," + a.d + "," + a.x +
        "," + a.y
    },
    toArray: function(a) {
      a = a || this.matrix;
      return [a.a, a.b, a.c, a.d, a.x, a.y]
    },
    apply: function(a, d) {
      var b = this.matrix;
      d ? a.transform(b.a, b.b, b.c, b.d, b.x, b.y) : a.setTransform(
        b.a, b.b, b.c, b.d, b.x, b.y);
      return this
    }
  };
  e.__default = new e;
  e.cloneMatrix = function(a) {
    return {
      a: a.a,
      b: a.b,
      c: a.c,
      d: a.d,
      x: a.x,
      y: a.y
    }
  };
  "undefined" !==
  typeof module && module.exports && (module.exports = e)
})(sketch);
"undefined" === typeof sketch && (sketch = {});

(function(g) {
  g.module = g.module || {};
  g.module.Detect = function() {
    var f = this;
    f.addClone = function(d, a) {
      for (var e in f) "object" === typeof f[e] && f[e][d] && (f[e][a] = !
        0)
    };
    f.add = function(d, a) {
      var e = f[d] || (f[d] = {});
      if ("string" === typeof a) e[a] = !0;
      else
        for (; a.length;) e[a.pop()] = !0
    };
    f.add("brush", []);
    f.add("shape", []);
    f.add("media", []);
    f.add("utility", ["select", "crop", "zoom"]);
    f.add("useCacheLayer", ["clipart", "eraser", "paintbrush", "image"]);
    f.add("useRenderControls", ["select", "clipart", "image", "text"]);
    f.add("useDefaultDim", ["media", "shape", "text"]);
    f.add("useNonUniform", ["ellipse", "rectangle", "speechbubble"]);
    f.add("useNoConfigure", ["move", "screenshot", "select", "zoom", "vectorfill"]);
    f.add("useLocalAlpha", "oil pastel stamp crayon chrome fur hair shader sketchy web spirograph spraypaint".split(" "));
    f.add("useColorCycle", "spraypaint calligraphy crayon streamer pen chrome fur hair shader sketchy web spirograph".split(" "));
    f.add("useTrackGradient", ["paintbrush", "eraser"]);
    f.add("useAutoClear", "arrow eraser paintbrush pencil polygon polyline path".split(" "));
    f.add("useSafeComposite", ["spirograph", "crayon", "stamp", "spraypaint"]);
    f.add("useStampResource", ["crayon", "stamp", "spraypaint"]);
    f.add("useSrc", ["stamp", "spraypaint", "image", "clipart"])
  };
  "undefined" !== typeof module && module.exports ? module.exports =
    new g.module.Detect : g.detect = new g.module.Detect
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.registerToolkit = function(f, d) {
    if ("object" === typeof f && f.length)
      for (; f.length;) g.registerToolkit(f.shift(), d);
    else {
      var a = g.module;
      a.toolkit = a.toolkit || {};
      a.toolkit[f] = d
    }
  };
  g.module = g.module || {};
  g.module.Toolkit = function(f, d) {
    var a = this,
      e = f.detect,
      q = f.feature,
      l = f.lang,
      b = f.util,
      c = f.util.string,
      p = f.style;
    a.area = {};
    a.init = function(a) {
      a.rendering = !1;
      a.device = {};
      a.deviceProxy = {};
      a.deviceLastRecord = null;
      a.deviceLastRecordID = null;
      a.gestures = 0;
      a.interval = 0;
      a.timeSent = null;
      return a
    };
    a.clone = function(a,
      b) {
      d.config.addClone(b, a);
      e.addClone(b, a);
      var c;
      e.brush[b] && (c = "brush.");
      e.shape[b] && (c = "shape.");
      c && f.registerToolkit(c + a, f.module.toolkit[c + b])
    };
    a.setTool = function(b) {
      void 0 === b && (b = d.tool.type);
      "string" === typeof b && (b = {
        type: b
      });
      var c = b.type,
        e = b.tid,
        m = b.onload;
      b = b.onerror;
      var p = a.getConfig(c);
      if (p) {
        var s = a.getToolkit(p.toolkit);
        s && (d.tool.reset && d.tool.reset(), d.tool.disable && d.tool
          .disable(), p = d.tool.type, s.type = c, s.typePrevious = p ||
          c, d[e || "tool"] = s, g(c, function() {
            s.enable();
            q.ui.cursors && f.ui.setCursor();
            f.emit("setTool", c);
            m && m()
          }, b))
      }
    };
    var g = function(b, c, d) {
      if (b = a.getConfig(b)) {
        var e = a[b.toolkit];
        e.changeDevice ? e.changeDevice(b, c, d) : e.style ? (b.src &&
          (e.style.src = b.src), e.style.type = b.type, e.loadResource({
            layer: e.style,
            onerror: d,
            onload: c
          })) : c && c()
      }
    };
    a.getMouseId = function(a, b) {
      var c = "",
        d = "";
      a && (c = f.net.peerIdx || 0, d = f.net.socketId || 0, c = (
        isFinite(c) ? c : d || 0) + ":");
      d = b.identifier;
      d = Infinity === d ? "A" : d;
      return c + ("Infinity" === d ? "A" : d)
    };
    a.setDefaultConfigure = function(b) {
      var c = a.getConfig(d.tool.type),
        e;
      for (e in b) {
        var f =
          b[e],
          m = c[e];
        void 0 !== m && ("number" === typeof f ? void 0 !== m.max ? (m
          .min = f, m.max = f) : m.value = f : (m.min = f.min, m.max =
          f.max))
      }
    };
    a.setConfigureValues = function(b, c) {
      for (var d in b) a.setConfigure(c, d, b[d])
    };
    a.setConfigure = function(b, c, d) {
      var e = b.type;
      if (-1 === e.indexOf("gl_") && (e = a.getToolkit(e), !e || !e.attributes ||
          !e.attributes[c])) {
        q.debug && console.warn("setConfigure:", arguments);
        return
      }
      e = b[c];
      if (void 0 === e) {
        if ("string" === typeof b.toolkit) {
          q.debug && console.warn("setConfigure:", arguments);
          return
        }
        return b[c] = f.attrs.create(c,
          d)
      }
      if (e.setValue) e.setValue(d);
      else if (isFinite(e)) isFinite(d) ? b[c] = d : isFinite(d.value) &&
        (b[c] = d.value);
      else if ("string" === typeof e) "string" === typeof d && (b[c] =
        d);
      else if (p && e instanceof p.Fill) {
        if (d instanceof p.Fill || p.validate(d)) b[c] = new p.Fill(d)
      } else if (p && e instanceof p.Stroke) {
        if (d instanceof p.Stroke || p.validate(d)) b[c] = new p.Stroke(
          d)
      } else if (isFinite(e.min + e.max))
        if (Array.isArray(d)) {
          var l = isFinite(d[0]) ? d[0] : 0,
            s = isFinite(d[1]) ? d[1] : 0;
          1 === d.length ? e.min = e.max = m(e.format, l) : 2 === d.length &&
            (e.min = m(e.format, l), e.max = m(e.format, s))
        } else e.min = m(e.format, d.min), e.max = m(e.format, d.max);
      else isFinite(e.value) ? Array.isArray(d) ? (d = isFinite(d[0]) ?
          d[0] : 0, e.value = m(e.format, d)) : isFinite(d.value) ? e.value =
        m(e.format, d.value) : isFinite(d) && (e.value = m(e.format, d)) :
        b[c] = f.attrs.update(c, d, e);
      return e
    };
    var m = function(a, b) {
        switch (a) {
          case "int":
            return Math.round(b);
          default:
            return b
        }
      },
      u = function(a, b, c) {
        a = glfx.filters[a];
        var e = d.render.glfx;
        if (e && e.activeFilter) {
          b = a.paramIndex[b];
          switch (a.param[b].format.replace(")",
            "").split("(")[0]) {
            case "int":
              c = Math.round(c)
          }
          e.activeFilter.data[b] !== c && (e.activeFilter.data[b] = c,
            glfx.animationId || glfx.render());
          f.histogram && f.histogram.enabled && f.histogram.createAnalyze();
          d.render.glfx.activeItem && (d.render.glfx.activeItem.dirtyCache = !
            0, d.render())
        }
      },
      t = function(a, b) {
        var c = {};
        c[a] = b;
        return c
      };
    d.setParam = d.setParams = a.setParam = a.setParams = function(c,
      f, k) {
      if ("string" === typeof c) c = {}, c.filter = d.tool.type, c.params =
        t(c, f), c.selection = k;
      else if ("object" === typeof c) "string" === typeof c.param ?
        c.params = t(c.param, c.value) : "object" !== typeof c.params &&
        (c = {
          params: c
        });
      else return console.warn("invalid params");
      var m = d.scene;
      f = c.cacheObject || {};
      var p = c.moduleId || "";
      k = c.param;
      var s = c.params,
        l = c.selection || m && m.selection.items;
      c = c.filter || "*";
      var y = "*" !== c,
        B = !y || e.useLocalAlpha[c],
        A = 0 === p.indexOf("gl_") && p.substr(3),
        p = !f.state || "start" === f.state,
        C = !f.state || "end" === f.state;
      if (A) {
        var F = a.getConfig(c),
          E;
        for (E in s) u(A, E, s[E])
      } else {
        if (y)
          for (E in F = a.getConfig(c), s) F && a.setConfigure(F, E, s[
            E]);
        if (q.vector.edit) {
          var A = [],
            F = [],
            D = 0,
            P = 0;
          for (E in l) {
            var G = m.children[E];
            if (G) {
              if (C) var J = {
                  id: G.id
                },
                N = {
                  id: G.id
                },
                K = !1;
              for (E in s) {
                var O = s[E],
                  V = "data" + G.id + E;
                p && (f[V] = b.clone(G[E]));
                a.setConfigure(G, E, O);
                G.toolkit && (G.dirtyCheck = !0, G.toolkit.updateObjectSize(
                  G), P++);
                C && f[V] !== G[E] && (m.setDirtyPixelData(G), J[E] = f[V],
                  N[E] = G[E], K = !0)
              }
              C && K && (A.push(J), F.push(N), D++)
            }
          }
          C && b.isEmpty(l) && (y && (E = a.getDeviceFromType(c)) && E.type &&
            a.setConfigureValues(s, E), d.tool.type && g(d.tool.type));
          D && d.history && (E = k ? a.getParamProperName(k) : "Object",
            d.history.store({
              cmd: "update",
              icon: "infinity",
              name: "Update " + E,
              data: {
                from: A,
                to: F
              }
            }));
          P && (q.ui.bruteForce ? d.render.clean(
            "toolkit.setParam.realtime") : (1 < P && (B = !0),
            clearTimeout(f.interval), f.interval = setTimeout(function() {
              (!B || B && C) && d.render.clean("toolkit.setParam.end")
            }, 75)))
        }
      }
    };
    (function() {
      var b = {
        visible: "visibility"
      };
      a.getParamProperName = function(a) {
        return c.ucwords(b[a] || a)
      }
    })();
    a.setType = function(c, r) {
      r = r || d.selection.items;
      if (!q.vector.edit) return f.exec(c);
      var k = b.count(r);
      if (0 === k) return d.setTool({
        type: c.replace(" ",
          "_"),
        onload: function() {
          f.ui.refresh(c)
        }
      });
      var m = [],
        p = [],
        s = a.getToolkit(c),
        t = d.scene,
        g = a.getConfig(c),
        g = t.copyAttributes(s.attributes, g, {}),
        B = function(a, b) {
          a.dirtyCheck = !0;
          s.updateObjectSize(a);
          --k || (d.history && d.history.store({
            cmd: "update",
            icon: c,
            name: l.translate("convert-format", l.translate(c)),
            data: {
              from: m,
              to: p
            }
          }), d.render.clean("toolkit.setType"), f.ui.refresh(c))
        },
        A;
      for (A in r) {
        var w = t.children[A];
        if (w) {
          if (e.shape[w.type]) {
            if (!e.shape[c]) {
              k--;
              continue
            }
          } else if (e.brush[w.type]) {
            if (!e.brush[c]) {
              k--;
              continue
            }
          } else {
            k--;
            continue
          }(s = w.toolkit) ? ("arrow" === c && (g.curved = w.data && 2 ===
              w.data.length ? !1 : !0), m.push(t.copyAttributes(s.sattributes,
              w, {
                id: w.id,
                type: w.type
              })), p.push(t.copyAttributes(s._attributes, g, {
              id: w.id,
              type: w.type = c
            })), void 0 === g.spacing && delete w.spacing, g.fill ? (w.fill =
              w.fill || g.fill, delete g.fill) : delete w.fill, g.stroke ?
            (w.stroke = w.stroke || g.stroke, delete g.stroke) : delete w
            .stroke, t.copyAttributes(s.attributes, g, w), s.loadResource({
              layer: w,
              onerror: B,
              onload: B
            })) : k--
        } else k--
      }
    };
    a.setup = function() {
      var c =
        d.contexts,
        r = f.module,
        k = d.config,
        m = {},
        p;
      for (p in k) {
        var s = k[p].toolkit,
          l = !b.exists("sketch.module.toolkit." + s);
        r.toolkit[s + "." + p] ? e.add(s, p) : f.vector.Shape[p] ? e.add(
            s, p) : -1 === p.indexOf(".") && "media" === s && a.media &&
          (0 === p.indexOf("gl_") ? window.glfx && e.add(s, p) : e.add(
            s, p));
        if (!l && !m[s]) {
          m[s] = !0;
          e.add(s, p);
          l = new r.toolkit[s](f, d);
          l.type = s;
          l.draw = c.draw.ctx;
          l.cache = c.cache.ctx;
          l.active = c.active.ctx;
          l.ctx = c.layer0.ctx;
          l.updateObjectSize = l.updateObjectSize || function(a, b) {
            b && b(a)
          };
          if (e.useDefaultDim[s]) {
            var t =
              q.tools[s];
            l.units = t.units || l.units;
            l.minWidth = t.minWidth || l.minWidth;
            l.minHeight = t.minHeight || l.minHeight;
            l.maxWidth = t.maxWidth || l.maxWidth;
            l.maxHeight = t.maxHeight || l.maxHeight;
            l.defaultWidth = t.defaultWidth || l.defaultWidth;
            l.defaultHeight = t.defaultHeight || l.defaultHeight
          }
          a[s] = l
        }
      }
    };
    a.loadResource = function(b, c, d) {
      var e = b.toolkit || a.ensureToolkit(b);
      e && e.loadResource({
        layer: b,
        onerror: d,
        onload: c
      })
    };
    a.getConfig = function(a) {
      var b = d.config[a];
      if (b) return b;
      q.debug && console.warn("missing configure", a)
    };
    a.getToolkit = function(b) {
      if (b = a.getToolkitId(b)) return a[b]
    };
    a.getToolkitId = function(b) {
      if (e.shape[b]) return "shape";
      if (e.brush[b]) return "brush";
      if (e.media[b]) return "media";
      if (a[b]) return b;
      q.debug && console.warn("missing toolkit", b)
    };
    a.getFeature = function(b) {
      b = a.getToolkitId(b);
      return q.tools[b] || {}
    };
    a.ensureToolkit = function(b) {
      if (b.toolkit) return b.toolkit;
      var c = a.getToolkit(b.type);
      if (c) return b.toolkit = c
    };
    a.getDevice = function(a) {
      if (a && a.device) return a.device.brush ? a.device.brush : a.device
    };
    a.getDeviceFromType =
      function(b) {
        b = a.getToolkit(b);
        return a.getDevice(b)
      };
    a.exists = function(b) {
      return (b = d.config[b]) && a[b.toolkit]
    };
    a.applyStyle = function(b, c) {
      var d = a.getBBox(c),
        e = c.fill,
        f = c.stroke,
        s = c.shadow;
      f && f.enabled && f.lineWidth && (b.strokeStyle = p.getStyle(
        "stroke", b, d.x1, d.y1, d.x2, d.y2, c), b.stroke());
      e && e.enabled && (b.fillStyle = p.getStyle("fill", b, d.x1, d.y1,
        d.x2, d.y2, c), b.fill());
      s && s.enabled && (b.shadowColor = s.color, b.shadowBlur = s.blur,
        b.shadowOffsetX = s.x, b.shadowOffsetY = s.y)
    };
    a.trackGradient = function(a, b, c) {
      if (!d.render.highRes &&
        e.useTrackGradient[b.type]) {
        a.globalAlpha = 1;
        a.globalCompositeOperation = "source-atop";
        var f = c.x1,
          m = c.x2,
          s = c.y1;
        c = c.y2;
        var l = m - f,
          q = c - s;
        a.fillStyle = p.getStyle("fill", a, f, s, m, c, b);
        a.fillRect(f, s, l, q)
      }
    };
    a.getBBox = function(a) {
      var b = ((a.diameter || 0) + (a.lineWidth || 0) + (a.blur || 0)) /
        2;
      if (a.bbox) {
        var c = a.bbox;
        a = -c.padding;
        var d = -c.padding;
        return {
          x1: a,
          y1: d,
          x2: a + c.width,
          y2: d + c.height
        }
      }
      if (a.lineRecord) {
        var e = a.path;
        if (e[0] && e[1]) {
          a = e[0].x;
          var d = e[0].y,
            c = e[1].x,
            e = e[1].y,
            f = Math.atan2(e - d, c - a),
            m = b * Math.cos(f),
            b = b *
            Math.sin(f);
          return {
            x1: a - m,
            y1: d - b,
            x2: c + m,
            y2: e + b
          }
        }
      } else {
        if (a.calcBBox) return a.calcBBox();
        if (a.isRecording) {
          e = a.path;
          d = e.length;
          if (2 >= d || a.isGhost) c = {
            x1: Infinity,
            y1: Infinity,
            x2: -Infinity,
            y2: -Infinity
          };
          else if (a._bbox) c = a._bbox;
          else {
            console.warn("bbox not found");
            return
          }
          d = e[d - 1];
          d.x < c.x1 + b && (c.x1 = d.x - b);
          d.y < c.y1 + b && (c.y1 = d.y - b);
          d.x > c.x2 - b && (c.x2 = d.x + b);
          d.y > c.y2 - b && (c.y2 = d.y + b);
          return a._bbox = c
        }
      }
    };
    a.drawFromCache = function(a, c) {
      var d = a.active;
      d.save();
      a.useBlendMode ? a.useReset || (d.globalAlpha = 1, d.globalCompositeOperation =
        "copy", d.drawImage(a.ctx.canvas, 0, 0)) : b.Canvas.blip(d.canvas);
      "up" !== a.state && (d.globalCompositeOperation = a.isEraser &&
        a.isRecording ? "source-over" : p.getComposite(a.composite),
        a.useAutoClear && (c = 1), d.globalAlpha = c || a.opacity /
        100, d.drawImage(a.cache.canvas, 0, 0));
      d.restore()
    };
    a.prepareBrush = function() {
      var a, c = d.contexts,
        f = this.type,
        m = this.isRecording || this.isGhost;
      this.isEraser = "destination-out" === this.composite ||
        "eraser" === f;
      this.useAutoClear = e.useAutoClear[f] || this.isGhost;
      this.useBlendMode = !p.useSourceOver[this.composite];
      this.useGlobalAlpha = !e.useLocalAlpha[f];
      this.useTrackGradient = e.useTrackGradient[f] && "color" !==
        this.fill.type;
      this.useReset = this.isGhost || "down" === this.state;
      if (m) {
        this.useReset && (b.Canvas.clear(c.active), b.Canvas.clear((a =
          this.active).canvas));
        if (this.useTrackGradient) this.useReset && a.drawImage(c.layer0,
          0, 0), this.useCache = !0, a = this.cache;
        else if (this.useBlendMode) {
          if (e.useSafeComposite[f]) return a = this.active, (this.isGhost ||
              "down" === this.state) && d.render.prepareGCO(this.composite,
              a.canvas), this.renderTo =
            a;
          this.useReset && a.drawImage(c.layer0, 0, 0);
          this.useCache = !0;
          a = this.cache
        } else this.useCache = !1, a = this.active;
        this.useAutoClear && b.Canvas.blip(a.canvas)
      } else this.useCache = !1, a = this.ctx;
      return this.renderTo = a
    };
    a.getToolCategory = function(a) {
      if (a) {
        a = a.replace("_", " ");
        var c = f.ui.icons,
          d;
        for (d in c) {
          var e = c[d];
          if (e.children && (e.children.length && (e.children = b.arrayToObject(
              e.children)), e.children[a])) return d
        }
      }
    };
    a.getToolIcon = function(b) {
      b = a.getToolCategory(b) || b;
      var c = f.ui.icons,
        d;
      for (d in c)
        if (b === d) return b =
          c[d], b.src || b
    };
    b.eventOverrideCall = function(a, b) {
      var c = d.tool || {},
        e = c[a];
      return e ? !e(b) : (c = (e = c.device) && e.brush && e.brush[a]) ?
        !c(b) : !1
    };
    b.eventOverride = function(a, e) {
      if (a && d.keyboard) {
        -1 === a.indexOf("on") && (a = "on" + c.ucwords(a) + "Key");
        var f = e.keyCode,
          m = "keyup" === e.type,
          p = a.substr(2),
          s = d.keyboard.pressed;
        e.name = p[0].toLowerCase() + p.substr(1);
        e.state = m ? "up" : s[f] ? "press" : "down";
        s[f] = !m;
        if (b.eventOverrideCall(a, e)) return !0
      }
    }
  }
})(sketch);
(function(g) {
  g.registerToolkit("group", function(f, d) {
    var a = this,
      e = d.toolkit,
      q = f.util;
    this.id = "group";
    this._attributes = {
      opened: !1
    };
    var l = q.clone(this._attributes);
    this.attributes = q.cloneInto(f.attrs.__basicObject, l);
    this.enable = function() {};
    this.disable = function() {};
    this.loadResource = function(a) {
      var c = a.onload;
      c && c(a.layer)
    };
    this.createObject = function(b, c) {
      var e = b.layer,
        f = d.scene.addObject({
          type: a.type,
          composite: e.composite,
          opacity: e.opacity,
          groupId: e.groupId,
          bbox: e.bbox
        });
      if (e.children) {
        var m = function() {
            var a =
              l[q++];
            a ? ("group" !== a.type && (a.groupId = e.groupId, e.x && (
                a.x = (a.x || 0) + e.x), e.y && (a.y = (a.y || 0) + e.y)),
              d.addObject(a, m, m)) : c && c(f)
          },
          l = e.children,
          q = 0;
        m()
      } else c && c(f)
    };
    return e.init(this)
  })
})(sketch);
(function(g) {
  g.registerToolkit("select", function(f, d) {
    var a = this,
      e = d.toolkit.area,
      q = d.canvas2d,
      l = d.contexts,
      b = f.feature,
      c = d.render,
      p = d.scene,
      g = d.toolkit,
      m = f.ui,
      u = f.util,
      t = f.vector.Point;
    f.module.Listener(a);
    a.__selecting = !1;
    a.__modified = !1;
    a.__moving = !1;
    a.type = "select";
    a.id = "select";
    a.env = {};
    a.usePreventSelection = !1;
    a.events = {};
    a.enabled = !1;
    a.enable = function(b) {
      if (!1 === a.enabled) {
        b = b || {};
        a.usePreventSelection = b.cancelSelection || !1;
        a.searchParam = b.searchParam;
        void 0 === b.mouse && (b.mouse = !0);
        void 0 ===
          b.key && (b.key = !0);
        void 0 === b.cursor && (b.cursor = !0);
        if (b.mouse) {
          var c = a.active.canvas,
            h = a.events;
          h.drag = eventjs.add(c, "drag", a.onDrag, {
            maxFingers: 1
          });
          h.context = eventjs.add(c, "contextmenu", a.onContext);
          h.mouseout = eventjs.add(c, "mouseout", function() {
            m.tooltip && m.tooltip.update("")
          });
          b.cursor && (h.mousemove = eventjs.add(c, "mousemove", a.onCursor))
        }
        b.key && d.keyboard && (eventjs.add(d.focusElement, "keydown",
          d.keyboard.keydown), eventjs.add(d.focusElement, "keyup",
          d.keyboard.keyup));
        a.enabled = !0
      }
      return a
    };
    a.disable =
      function(b) {
        !0 === a.enabled && (b = b || {}, void 0 === b.mouse && (b.mouse = !
            0), void 0 === b.key && (b.key = !0), void 0 === b.cursor &&
          (b.cursor = !0), b.mouse && eventjs.removeEvents(a.events),
          b.key && d.keyboard && (eventjs.remove(d.focusElement,
            "keydown", d.keyboard.keydown), eventjs.remove(d.focusElement,
            "keyup", d.keyboard.keyup)), m.tooltip && m.tooltip.update(
            ""), a.enabled = !1);
        return a
      };
    a.onCursor = function(c) {
      if (!a.__moving && !a.__selecting && "eyeDropper" !== m.colorPicker
        .state) {
        var h = p.pointInWorldFromEvent(c);
        if (!a.on.pointer ||
          !a.on.pointer(h)) {
          var f, k = 0;
          a.usePreventSelection ? f = u.clone(p.controls) : (f = p.children
            .concat(p.controls), k = p.children.length);
          var r = p.findAtPoint({
            point: h,
            searchParam: a.searchParam,
            layers: f
          });
          e.hoverControls = [];
          for (var l = 0, q = r.length; l < q; l++) {
            var v = r[l];
            c = f[v];
            "button" === c.type && e.hoverControls.push(c.id)
          }
          f = r[r.length - 1];
          c = p.children[f];
          v = Math.max(0, f - k);
          k = e.control = p.controls[v] || {};
          d.tool.coord = h;
          v = d.selection;
          h = d.hovered;
          v = v.item ? v.idx : h.idx;
          l = r = "";
          void 0 === f && void 0 === v ? (e.hoverControlIdx = "",
            b.vector.edit && h.length && (h.reset(), e.renderControls(
              null, !1, !0))) : c ? (r = k.title || "", l = k.cursor, e
            .hoverControlIdx = "", b.vector.edit && (h.items[f] || (h.reset(),
              h.select(f)), e.renderControls(f, !1, !0))) : (r = k.title ||
            "", l = k.cursor || "", e.hoverControlIdx = k.id, b.vector
            .edit && (h.items[v] || (h.reset(), h.select(v)), e.renderControls(
              null, !1, !0)));
          m.tooltip && m.tooltip.update(r);
          m.setCursor(l, c)
        }
      }
    };
    a.onDrag = function(f, s, z) {
      eventjs.cancel(f);
      if (2 !== s.fingers && "eyeDropper" !== m.colorPicker.state) {
        var y = s.state,
          B = "down" ===
          y,
          A = "move" === y,
          C = "up" === y,
          F = s.hasMoved(),
          y = eventjs.metaKey,
          E = eventjs.shiftKey;
        d.__interacting = B || A;
        if (C && void 0 !== a.__idx) var D = a.__idx,
          P = a.__length,
          G = a.__matches,
          J = a.__objects;
        else if (B || C) a.__idx = void 0, B && (a.__modified = !1),
          a.usePreventSelection ? (J = u.clone(p.controls), P = 0) : (
            J = p.children.concat(p.controls), P = p.children.length),
          G = p.findAtPoint({
            point: p.pointInWorldFromEvent(f),
            layers: J,
            searchParam: a.searchParam,
            pointerUp: C
          }), D = G.pop();
        A = p.controls[D - P];
        B && A && (a.__idx = D, a.__length = P, a.__matches = G,
          a.__objects = J);
        if (!a.on.pointer || !a.on.pointer(s)) {
          if (A)
            if (e.hoverControlIdx = A.id, "anchor" === A.id && d.selection
              .length)
              if (C) {
                a.__moving = !1;
                D = p.pointInWorldFromEvent(f);
                D.searchParam = a.searchParam;
                G = p.findAtPoint({
                  point: D
                });
                D = G.pop();
                G = p.children[D];
                if (d.selection.idx === D) {
                  if (a.__modified) return;
                  if (b.beta && "path" === G.type) {
                    v(G);
                    return
                  }
                  if (!1 === d.__editing && "text" === G.type) {
                    e.show(G);
                    g.text.updateBBox();
                    g.text.updateCSS();
                    g.text.focus();
                    g.text.selectAll();
                    return
                  }
                  J = b.tools.select;
                  if (J.clickToDeselect) {
                    p.deselectAll();
                    m.configureBuild();
                    c.clean("select.moveEvent");
                    return
                  }
                }
                if (!E && !y && G) {
                  p.selectByIdx(D);
                  p.handleSelection();
                  c.clean("select.moveEvent");
                  return
                }
              } else a.__moving = !0;
          else {
            if (C) return;
            D = d.hovered.idx;
            if (!isFinite(D) || D !== d.selection.idx)
              if (G = d.hovered.item) p.selectByIdx(G.zIndex, !1), p.handleSelection();
            if ("function" === typeof A.event) return A.event(f), s.proxy(
              function(b, c) {
                h(b, c);
                a.__moving = !1
              });
            D = void 0
          } else if (e.hoverControlIdx = "", C && (G = p.children[D]))
            if (J = b.tools[G.toolkitId] || {}, J.usePointInPath) {
              a.__moving = !1;
              d.render("select.onDrag.usePointInPath.pointUp");
              return
            }
          if (z) d.hovered.select(D);
          else if (!C || !a.__moving || F || a.__modified || E || y) {
            z = void 0 !== D;
            var C = d.selection.length,
              F = g.text && g.text.dragging,
              N = !1;
            !B || z || !C || E || y || F || (d.__editing && "text" ===
              d.tool.id && (N = !0), p.deselectAll(), c.clean(
                "select.cancelSelection.object"));
            if (B && d.selection.items[D] && !y || a.__moving) return r(
              f, s);
            if (!z || E || y) {
              if ("select" === d.tool.id && B) return s.proxy(function(
                f,
                k) {
                a: {
                  var r = f,
                    s = k;
                  if (!1 !== b.vector.edit) {
                    if (!1 === s.hasMoved())
                      if ("up" ===
                        s.state) a.__selecting = !1;
                      else break a;
                    r = r || a.env.event;
                    s = s || a.env.self;
                    a.env.event = r;
                    a.env.self = s;
                    var v = "down" === s.state,
                      z = "up" === s.state;
                    s.hasMoved();
                    var g = eventjs.metaKey,
                      x = d.zoom,
                      y = d.pixelRatio;
                    v || !a.__selecting ? (a.__selecting = !z, eventjs.cancel(
                      r)) : (eventjs.prevent(r), z && (a.__selecting = !
                      1));
                    isFinite(d.selection.idx) && (e.hide(), d.render(
                      "select.findMultipleObjects"));
                    var r = Math.min(s.start.x, s.x) - .01,
                      v = Math.min(s.start.y, s.y) - .01,
                      B = Math.max(s.start.x, s.x) + .01,
                      s = Math.max(s.start.y, s.y) + .01,
                      s = p.pointsInScene([t(r,
                        v), t(B, s)]);
                    m.tooltip && m.tooltip.update("");
                    r = p.findInRect({
                      rect: s,
                      deselect: g,
                      drawBBox: !0
                    });
                    if (z) {
                      d.hovered.reset();
                      var x = [],
                        y = [],
                        A;
                      for (A in r) r[A] ? x.push(A) : y.push(A);
                      x.length && p.selectByIdx(x, !1);
                      y.length && p.deselect(y);
                      p.handleSelection();
                      c.clean("select.findMultipleObjects")
                    } else A = l.active.ctx, A.save(), A.globalCompositeOperation =
                      "destination-over", g && d.selection.length ? (A.fillStyle =
                        "rgba(255,50,100,0.20)", A.strokeStyle =
                        "rgba(255,50,100,1)") : (A.fillStyle =
                        "rgba(0,240,100,0.20)", A.strokeStyle =
                        "rgba(0,240,100,1)"),
                      g = s[0], z = s[1], A.beginPath(), A.translate(q.x,
                        q.y), A.scale(x * y, x * y), A.rect(g.x + .5, g.y +
                        .5, z.x - g.x, z.y - g.y), A.lineWidth = 1 / x, A.stroke(),
                      A.fill(), A.restore()
                  }
                }
                h(f, k)
              });
              if (d.tool.record) return p.deselectAll(), s.proxy(
                function(a, b) {
                  if (N) {
                    if (b.pointerStart) {
                      N = {
                        event: a,
                        self: b
                      };
                      return
                    }
                    if (b.pointerDrag) {
                      b.state = "down";
                      d.tool.record(N.event, N.self);
                      N = void 0;
                      return
                    }
                  }
                  d.tool.record(a, b);
                  h(a, b)
                })
            }
            if (0 > D - P)
              if ((E || y) && b.vector.edit) k(D, y, E), p.handleSelection(),
                c.clean("select.moveActions");
              else return p.selectByIdx(D),
                p.handleSelection(), a.__modified = !0, r(f, s)
          } else eventjs.cancel(f), a.__moving = !1, p.selectByIdx(D),
            p.handleSelection()
        }
      }
    };
    a.onGesture = function(b, c) {
      "start" === c.state ? a.events.drag.pause() : "end" === c.state &&
        a.events.drag.resume();
      var h = c.scale,
        e = c.rotation,
        f = d.selection.item;
      f && (!1 !== f.scalable && (f.bbox.scale.x = h, f.bbox.scale.y =
          h), !1 !== f.rotatable && (f.bbox.rotate = e), f.dirtyCheck = !
        0, d.render("gesture"))
    };
    a.onContext = function(b) {
      if (window.contextmenu) {
        eventjs.cancel(b);
        var c, h = d.selection.length;
        m.menu.selectMultiple &&
          1 < h ? c = "selectMultiple" : m.menu.select && h ? c =
          "select" : m.menu.selectDefault && (c = "selectDefault");
        c && (a.events.drag && a.events.drag.cancel(), a.events.gesture &&
          a.events.gesture.cancel(), m.contextMenu.show({
            point: eventjs.getCoord(b),
            menu: m.menu[c]
          }))
      }
    };
    var h = function(b, c) {
        if (!(a.__moving = "up" !== c.state)) a.onDrag(b, c, !0)
      },
      r = function(a, b) {
        g.moveEvent(a);
        b.proxy(function(a, b) {
          h(a, b)
        })
      },
      k = function(a, b, c) {
        void 0 !== a && (b && d.selection.items[a] ? p.deselect(a) : p
          .selectByIdx(a, !1))
      },
      v = function(a) {
        g.setTool({
          type: "path",
          onload: function() {
            g.brush.loadResource({
              layer: a,
              onload: function() {
                for (var b = 0; b < a.data.length; b++) delete a.data[
                  b].bbox;
                var b = u.clone(a.data),
                  c = u.clone(a.data);
                b.path = c;
                var h = d.tool,
                  e = h.device.brush;
                h.batches["0:1"] = b;
                e.batch = b;
                e.path = c;
                e.ctx = h.ctx;
                e.active = h.active;
                e.isEditing = !0;
                e.isRecording = !0;
                e.render(a)
              }
            })
          }
        })
      };
    return g.init(this)
  })
})(sketch);
(function(g) {
  g.registerToolkit("zoom", function(f, d) {
    var a = this,
      e = f.dom,
      q = d.orient,
      l = d.toolkit;
    a.id = "zoom";
    a.events = {};
    a.enabled = !1;
    a.enable = function() {
      if (!1 === a.enabled) {
        a.enabled = !0;
        d.render.setGCO();
        var b = e.$("#sk-orientation");
        b && b.classList.add("sk-opened");
        a.events.gesture = eventjs.add({
          fingers: 2,
          target: window,
          type: "gesture",
          listener: a.onGesture
        });
        d.orient.enable();
        l.select.enable({
          key: !0,
          mouse: !1,
          cursor: !1
        })
      }
    };
    a.disable = function() {
      if (!0 === a.enabled) {
        a.enabled = !1;
        var b = e.$("#sk-orientation");
        b && b.classList.remove("sk-opened");
        eventjs.removeEvents(a.events);
        d.orient.disable();
        l.select.disable()
      }
    };
    a.onGesture = function(a, c) {
      var e = d.orient.events,
        f = "end" === c.state;
      "start" === c.state ? (e.drag && e.drag.enabled && e.drag.detatch(),
          c.startScale = d.zoom, c.__x = c.x, c.__y = c.y) : f && e.drag &&
        e.drag.attach();
      c.startScale && c.scale && (e = eventjs.getBBox(q.canvas), f =
        d.pixelRatio, q.mouse.x = c.x * f - e.x1, q.mouse.y = c.y *
        f - e.y1, q.offset.x += (c.x - c.__x) / d.zoom, q.offset.y +=
        (c.y - c.__y) / d.zoom, d.orient.setZoom(c.startScale *
          c.scale), d.orient.render());
      c.__x = c.x;
      c.__y = c.y
    };
    return l.init(a)
  })
})(sketch);
(function(g) {
  g.registerToolkit("crop", function(f, d) {
    var a = this,
      e = d.canvas2d,
      q = f.util,
      l = f.vector.Point;
    f.module.Listener(a);
    a.id = "crop";
    a.bbox = void 0;
    a.controls = {};
    a.dragging = !1;
    var b = a.config = {
      aspect: "portrait",
      drawCrosshair: !0,
      constrain: !0,
      constrainCorners: !0,
      constrainSides: !0,
      constrainShift: !0,
      ratio: {
        dynamic: !1,
        width: 377,
        height: 197
      }
    };
    a.construct = function() {
      f.setupHistory.add({
        type: "crop",
        fn: function(b, c, h, e, f) {
          d.setMetrics(h ? c[0] : c[1]);
          h ? (A = c[2], C = c[3], t(A, C, {
            state: "update"
          })) : a.unset()
        }
      });
      f.setupHistory.add({
        type: "crop-draw",
        fn: function(a, b, c, h, e) {
          a = c ? b[0] : b[1];
          A = a.start;
          C = a.end;
          d.scrollTo(a.scrollLeft, a.scrollTop);
          d.orient.reset();
          d.orient.setZoom(a.zoom || 1);
          d.orient.render();
          t(a.start, a.end, {
            state: "update"
          })
        }
      });
      return this
    };
    a.events = {};
    a.enable = function() {
      var b = a.active.canvas;
      a.events.dbltap = eventjs.add(b, "dbltap", a.onDblTap);
      a.events.drag = eventjs.add(b, "drag", a.onPointer);
      a.events.mousemove = eventjs.add(b, "mousemove", a.onCursor);
      d.keyboard && (b = d.focusElement, a.events.keydown = eventjs.add(
          b, "keydown", d.keyboard.keydown),
        a.events.keyup = eventjs.add(b, "keyup", d.keyboard.keyup))
    };
    a.disable = function() {
      a.unset();
      eventjs.removeEvents(a.events)
    };
    a.unset = function() {
      q.Canvas.blip(a.active.canvas);
      A = l();
      C = l()
    };
    a.onPointer = function(a, b) {
      g({
        x: b.start.x,
        y: b.start.y
      }, {
        x: b.x,
        y: b.y,
        state: b.state
      }, a)
    };
    a.onDblTap = function(b) {
      b = eventjs.getCoord(b);
      m(b) && a.apply()
    };
    a.onCursor = function(b) {
      if (!1 === a.dragging && a.on.cursor) {
        b = eventjs.getCoord(b);
        for (var c in a.controls) {
          var d = a.controls[c];
          if (b.x >= d.x0 && b.x <= d.x1 && b.y >= d.y0 && b.y <= d.y1)
            return a.emit("cursor",
              c)
        }
        m(b) ? a.emit("cursor", "move") : a.emit("cursor", "")
      }
    };
    a.onResize = function(a) {
      if (A && C && !l.equals(A, C)) {
        a = B.xMin - e.orientX;
        var b = B.yMin - e.orientY;
        A.y -= b;
        A.x -= a;
        C.y -= b;
        C.x -= a;
        t(A, C, {
          state: "move"
        })
      }
    };
    a.onRenderControls = function(a) {
      A && C && (A.x === C.x && A.y === C.y || t(A, C, {
        state: "move"
      }))
    };
    a.onDownKey = a.onUpKey = a.onLeftKey = a.onRightKey = function(
      a) {
      var b = eventjs.shiftKey ? 10 : 1;
      switch (a.name) {
        case "down":
          p(0, 1 * b, a.state);
          break;
        case "up":
          p(0, -1 * b, a.state);
          break;
        case "left":
          p(-1 * b, 0, a.state);
          break;
        case "right":
          p(1 *
            b, 0, a.state)
      }
      return !0
    };
    a.onAKey = function(b) {
      if ("down" === b.state && eventjs.metaKey) {
        var c = e.orientX,
          h = e.orientY;
        a.setRect({
          x: c,
          y: h,
          width: c + d.bounds.width - c,
          height: h + d.bounds.height - h
        }, {
          event: b
        })
      }
      return !0
    };
    a.onEnterKey = function(b) {
      "down" === b.state && a.apply();
      return !0
    };
    a.onEscapeKey = function(b) {
      "down" === b.state && (a.setRect({
        x: 0,
        y: 0,
        width: 0,
        height: 0
      }, {
        event: b
      }), a.emit("escape"));
      return !0
    };
    a.update = function(c) {
      A && C && isFinite(A.x + C.x) && ("boolean" === typeof c.constrain &&
        (b.constrain = c.constrain, b.constrainCorners =
          c.constrain, b.constrainSides = c.constrain), "string" ===
        typeof c.aspect && (b.aspect = c.aspect), "object" ===
        typeof c.ratio && (b.ratio = c.ratio), !0 === c.constrain &&
        (a.updateAspectRatio(A, C), a.updateTransform(A, C)), C.state =
        "update", g(A, C))
    };
    a.apply = function(b) {
      b = b || {};
      var h = c(b) || {};
      var f = h.start || A,
        h = h.end || C;
      b = b.units;
      if (f && h && 0 !== f.x - h.x && 0 !== f.y - h.y) {
        var k = d.zoom,
          r = d.pixelRatio,
          s = e.x,
          m = e.y,
          p = e.orientX,
          l = e.orientY,
          q = Math.max(f.x, h.x) / k,
          v = Math.max(f.y, h.y) / k,
          t = Math.min(f.x, h.x) / k,
          g = Math.min(f.y, h.y) / k,
          s = q -
          s - (t - s),
          m = v - m - (g - m),
          p = t - p / k / r,
          r = g - l / k / r,
          k = a.from || d.getMetrics();
        a.from = void 0;
        if (0 !== p || 0 !== r || d.width !== s || d.height !== m ||
          d.units !== b) d.units = b || "px", d.x += p, d.y += r, d.orient
          .reset(), d.setSize(s, m, d.units, d.dpi), d.orient.reset(),
          d.orient.setZoom(k.zoom), d.orient.render(), d.history && (b =
            d.getMetrics(), d.history.store({
              cmd: "crop",
              icon: "crop",
              name: "crop",
              data: [k, b, f, h]
            })), a.emit("apply");
        a.unset()
      }
    };
    a.setRect = function(b, h) {
      var d = c(b);
      if (d) {
        h = h || {};
        var e = h.event,
          f = h.drawControls;
        F = "crop";
        A = d.start;
        C = d.end;
        a.bbox = r();
        u(A, C, e);
        t(A, C, {
          state: "update",
          drawControls: f
        })
      }
    };
    var c = function(a) {
        if (a && isFinite(a.x + a.y + a.width + a.height)) return {
          start: {
            x: a.x,
            y: a.y
          },
          end: {
            x: a.x + a.width,
            y: a.y + a.height
          }
        }
      },
      p = function(a, b, c) {
        A && C && ("up" === c ? C.state = "update" : (A.x += a, A.y +=
          b, C.x += a, C.y += b, C.state = c), g(A, C))
      },
      g = function(b, c, h) {
        if (!b || !c) return z("");
        var e = "update" === c.state,
          k = "down" === c.state || e,
          p = "up" === c.state || e,
          l = "move" === c.state || e;
        a.dragging = "up" !== c.state;
        k && (A && C || (A = A || {
          x: 0,
          y: 0
        }, C = C || {
          x: 0,
          y: 0
        }), a.bbox = r(), a.emit("pointerstart",
          h), self.__from = d.getMetrics(), self.__from.start = q.clone(
          A), self.__from.end = q.clone(C));
        if (h) var v = d.scrollLeft,
          g = d.scrollTop;
        else g = v = 0;
        var x = d.zoom,
          y = 1 - d.pixelRatio * x;
        b.x -= v * y;
        b.y -= g * y;
        c.x -= v * y;
        c.y -= g * y;
        y = q.clone(c);
        k && (d.tool.coord = q.clone(c), B.x = c.x - A.x, B.y = c.y -
          A.y, B.scrollLeft = v, B.scrollTop = g, B.zoom = x, F = e ?
          "crop" : m(y) ? "move" : "crop");
        z(F);
        u(b, c, h);
        t(b, c, y);
        l && (a.bbox = r(b, c), a.on.pointermove && a.on.pointermove(h));
        if (p || k || s[F]) A = b, C = c;
        if (p) {
          b = f.vector.Point;
          c = b.distance(A, C);
          if (d.history) {
            e = d.getMetrics();
            e.start = q.clone(A);
            e.end = q.clone(C);
            var k = [self.__from, e],
              w;
            try {
              w = d.history.getLastAction().to[1], w = w.start && w.end ?
                w : ""
            } catch (U) {
              w = ""
            }(w && b.distance(w.start, w.end) || c) && JSON.stringify(w) !==
              JSON.stringify(e) && d.history.store({
                cmd: "crop-draw",
                icon: "crop",
                name: "crop-draw",
                data: k
              })
          }
          0 === c ? (a.bbox = void 0, a.emit("reset")) : a.bbox = r();
          a.emit("pointerend", h);
          z("")
        }
      },
      m = function(a) {
        return a.x >= A.x && a.x <= C.x && a.y >= A.y && a.y <= C.y
      },
      u = function(a, c, h) {
        if (h) var f = d.scrollLeft,
          k = d.scrollTop;
        else k = f = 0;
        var r = d.zoom,
          m =
          d.pixelRatio,
          p = m * r,
          l = d.bounds.width * r,
          q = d.bounds.height * r,
          r = (e.x + d.x * p) / m,
          m = (e.y + d.y * p) / m,
          p = r + l,
          t = m + q,
          g = C.x - A.x,
          w = C.y - A.y,
          f = f - B.scrollLeft,
          k = k - B.scrollTop;
        "move" !== F && (g += f, w += k);
        switch (F) {
          case "north":
            a.x = A.x;
            a.y = C.y;
            c.x = C.x;
            c.y -= B.y;
            a.y < c.y && (A.y = C.y, B.x = 0, B.y = 0, z("south"));
            break;
          case "north-east":
            a.x = A.x;
            a.y = C.y;
            c.x = c.x - B.x + g;
            c.y -= B.y;
            a.y < c.y ? (A.y = C.y, C.x -= g, B.x = 0, B.y = 0, z(
              "south-east")) : a.x > c.x && (C.x = A.x, B.x = 0, B.y = 0,
              z("north-west"));
            break;
          case "east":
            a.x = A.x;
            a.y = A.y;
            c.x = Math.min(p, c.x - B.x + g);
            c.y =
              C.y;
            a.x > c.x && (C.x = A.x, B.x = 0, B.y = 0, z("west"));
            break;
          case "south-east":
            a.x = A.x;
            a.y = A.y;
            c.x = Math.min(p, c.x - B.x + g);
            c.y = Math.min(t, c.y - B.y + w);
            a.x > c.x && a.y > c.y ? z("north-west") : a.y > c.y ? (C.y =
                A.y, C.x -= g, B.x = 0, B.y = 0, z("north-east")) : a.x >
              c.x ? (C.x = A.x, C.y -= w, B.x = 0, B.y = 0, z(
                "south-west")) : z("south-east");
            break;
          case "south":
            a.x = A.x;
            a.y = A.y;
            c.x = C.x;
            c.y = Math.min(t, c.y - B.y + w);
            a.y > c.y && (C.y = A.y, B.x = 0, B.y = 0, z("north"));
            break;
          case "south-west":
            a.x = C.x;
            a.y = A.y;
            c.x = Math.max(r, c.x - B.x);
            c.y = Math.min(t, c.y - B.y + w);
            a.y > c.y ?
              (C.y = A.y, B.x = 0, B.y = 0, z("north-west")) : a.x < c.x &&
              (A.x = C.x, C.y -= w, B.x = 0, B.y = 0, z("south-east"));
            break;
          case "west":
            a.x = C.x;
            a.y = A.y;
            c.x = Math.max(r, c.x - B.x);
            c.y = C.y;
            a.x < c.x && (A.x = C.x, B.x = 0, B.y = 0, z("east"));
            break;
          case "north-west":
            a.x = C.x;
            a.y = C.y;
            c.x = Math.max(r, c.x - B.x);
            c.y = Math.max(m, c.y - B.y);
            a.y < c.y ? (A.y = C.y, B.x = 0, B.y = 0, z("south-west")) :
              a.x < c.x && (A.x = C.x, B.x = 0, B.y = 0, z("north-east"));
            break;
          case "move":
            var u = Math.max(r, c.x - B.x),
              aa = Math.max(m, c.y - B.y),
              u = u - Math.max(r, u + g - l) + r,
              aa = aa - Math.max(m, aa + w - q) + m;
            a.x =
              u + f;
            a.y = aa + k;
            c.x = g + u + f;
            c.y = w + aa + k;
            break;
          default:
            c.x += f, c.y += k
        }
        b.constrain && s[F] || b.constrainSides && x[F] || b.constrainCorners &&
          v[F] || b.constrainShift && eventjs.shiftKey ? (g = a.x !== c
            .x || a.y !== c.y, h && g && (h = c.x - a.x || 1, g = c.y -
              a.y || 1, w = b.constrain ? b.ratio : {
                width: q,
                height: l
              }, w = "portrait" === b.aspect ? {
                x: w.height / w.width,
                y: w.width / w.height
              } : {
                x: w.width / w.height,
                y: w.height / w.width
              }, Math.abs(h) * w.x > Math.abs(g) ? c.y = a.y + g / Math.abs(
                g) * Math.abs(h) * w.x : c.x = a.x + h / Math.abs(h) *
              Math.abs(g) * w.y, c.x > a.x ? 0 > c.y - m ? c.x = a.x - (m -
                Math.max(a.y,
                  c.y)) * w.y : c.y - m > q && (c.x = a.x + (t - Math.min(a
                .y, c.y)) * w.y) : 0 > c.y - m ? c.x = a.x + (m - Math.max(
                a.y, c.y)) * w.y : c.y - m > q && (c.x = a.x - (t - Math.min(
                a.y, c.y)) * w.y), c.y > a.y ? 0 > c.x - r ? c.y = a.y - (
                r - Math.max(a.x, c.x)) * w.x : c.x - r > l && (c.y = a.y +
                (p - Math.min(a.x, c.x)) * w.x) : 0 > c.x - r ? c.y = a.y +
              (r - Math.max(a.x, c.x)) * w.x : c.x - r > l && (c.y = a.y -
                (p - Math.min(a.x, c.x)) * w.x), c.x = Math.round(c.x), c.y =
              Math.round(c.y))) : b.ratio.dynamic && (l = Math.abs(c.x -
              a.x), q = Math.abs(c.y - a.y), b.ratio.width = l, b.ratio.height =
            q);
        c.x < a.x && (a.x ^= c.x, c.x ^= a.x, a.x ^= c.x);
        c.y < a.y &&
          (a.y ^= c.y, c.y ^= a.y, a.y ^= c.y);
        a.x = y(a.x, r, p);
        a.y = y(a.y, m, t);
        c.x = y(c.x, r, p);
        c.y = y(c.y, m, t)
      },
      t = function(c, f, k) {
        if (c && f) {
          var r = "update" === k.state,
            s = !1 !== k.drawControls,
            m = "up" === k.state || r,
            p = d.zoom,
            l = d.pixelRatio,
            r = l * p,
            q = d.bounds.width * r,
            v = d.bounds.height * r,
            t = d.scrollLeft,
            g = d.scrollTop,
            z = e.x + (d.x * l + t) * p,
            x = e.y + (d.y * l + g) * p;
          B.xMin = z;
          B.yMin = x;
          var z = z / l,
            x = x / l,
            q = q / l,
            v = v / l,
            y = 0 === c.x - f.x || 0 === c.y - f.y;
          if (y && m) return a.unset();
          r = a.active;
          r.save();
          r.scale(l, l);
          r.translate(-t * p, -g * p);
          r.globalCompositeOperation = "copy";
          r.fillStyle = "rgba(0, 0, 0, 0.75)";
          r.fillRect(z - 1, x - 1, q + 2, v + 2);
          if (!y) {
            p = f.x - c.x;
            l = f.y - c.y;
            v = c.x + .5;
            t = f.x - .5;
            g = c.y + .5;
            f = f.y - .5;
            r.beginPath();
            r.globalCompositeOperation = "destination-out";
            r.fillStyle = "rgba(0, 0, 0, 1)";
            r.rect(v, g, p, l);
            r.fill();
            q = 8;
            s && (26 < Math.abs(v - t) && 16 < Math.abs(g - f) && (s = (
                (t + v) / 2 >> 0) + .5, h(r, k, s - q / 2, g, q, q,
                "north"), h(r, k, s - q / 2, f - q, q, q, "south")), 26 <
              Math.abs(g - f) && 16 < Math.abs(v - t) && (s = ((f + g) /
                2 >> 0) + .5, h(r, k, t - q, s - q / 2, q, q, "east"), h(
                r, k, v, s - q / 2, q, q, "west")), 16 < Math.abs(v - t) &&
              16 < Math.abs(g -
                f) && (h(r, k, v, g, q, q, "north-west"), h(r, k, t - q,
                g, q, q, "north-east"), h(r, k, v, f - q, q, q,
                "south-west"), h(r, k, t - q, f - q, q, q, "south-east"))
            );
            r.save();
            r.rect(c.x + .5, c.y + .5, p, l);
            r.clip();
            r.lineWidth = 1;
            r.strokeStyle = "rgba(0, 0, 0, 0.25)";
            r.shadowColor = "rgba(255, 255, 255, 1)";
            r.shadowOffsetX = 1;
            r.shadowOffsetY = 1;
            r.shadowBlur = 0;
            if (!m) {
              s = Math.round(p / 2);
              m = Math.round(l / 2);
              r.beginPath();
              for (k = 0; 3 >= k; k++) r.moveTo(k * p / 3 + c.x, c.y), r.lineTo(
                k * p / 3 + c.x, c.y + l);
              for (k = 0; 3 >= k; k++) r.moveTo(c.x, k * l / 3 + c.y), r.lineTo(
                c.x + p, k * l / 3 + c.y);
              r.stroke();
              b.drawCrosshair && (r.beginPath(), r.strokeStyle =
                "rgba(255, 255, 255, 0.5)", r.shadowColor =
                "rgba(0, 0, 0, 0.25)", r.moveTo(c.x + s - 7.5, c.y + m +
                  .5), r.lineTo(c.x + s + 8.5, c.y + m + .5), r.moveTo(c.x +
                  s + .5, c.y + m - 7.5), r.lineTo(c.x + s + .5, c.y + m +
                  8.5), r.stroke())
            }
            r.restore()
          }
          r.restore()
        }
      },
      h = function(b, c, h, e, f, k, r) {
        var s = "down" === c.state,
          m = "up" === c.state || "update" === c.state,
          p = d.pixelRatio,
          l = p * d.zoom,
          q = d.scrollLeft,
          v = d.scrollTop;
        b.beginPath();
        b.globalCompositeOperation = "source-over";
        b.fillStyle = "rgba(100, 100, 100, 0.8)";
        b.strokeStyle = "rgba(255, 255, 255, 0.5)";
        b.rect(h, e, f, k);
        b.fill();
        b.stroke();
        var t = 5 * p;
        h -= t;
        e -= t;
        f += 2 * t;
        k += 2 * t;
        s ? (c = c || d.tool.coord, s = c.x - q * l, c = c.y - v * l,
          b.beginPath(), b.rect(h, e, f, k), b.isPointInPath(s * p, c *
            p) && (F = r)) : m && (a.controls[r] = {
          x0: h,
          y0: e,
          x1: h + f,
          y1: e + k
        })
      };
    a.updateClamp = function(b, c) {
      var h = c.x - b.x,
        e = c.y - b.y,
        f = e / h,
        k = d.width,
        r = d.height,
        s = 0 > b.y,
        m = c.y > r,
        p = c.x > k,
        l = 0 > b.x;
      if (s || m) s && (e += b.y, b.y = 0), m && (e += r - c.y - 1,
        c.y = r), h = e / f;
      if (p || l) l && (h += b.x, b.x = 0), p && (h += k - c.x - 1,
        c.x = k), e = h * f;
      a.updateCenter(b, c, {
        x: h /
          2,
        y: e / 2
      })
    };
    a.updateAspectRatio = function(c, h) {
      var d = Math.abs(c.x - h.x),
        e = Math.abs(c.y - h.y);
      (d > e ? "landscape" : "portrait") !== b.aspect && (a.updateCenter(
        c, h, {
          x: .5 * d,
          y: .5 * e
        }), a.updateClamp(c, h))
    };
    a.updateTransform = function(c, h) {
      var d = Math.abs(h.x - c.x),
        e = Math.abs(h.y - c.y);
      if (d && e) {
        var f = b.ratio,
          e = e / d,
          f = f.width / f.height;
        if (1 > e && 1 < f || 1 < e && 1 > f) f = 1 / f;
        d = Math.sqrt(1 / f * e * d * d);
        a.updateCenter(c, h, {
          x: d / 2,
          y: f * d / 2
        });
        a.updateClamp(c, h)
      }
    };
    a.updateCenter = function(a, b, c) {
      var h = .5 * (b.x - a.x) + a.x,
        d = .5 * (b.y - a.y) + a.y;
      a.x = Math.round(h -
        c.x);
      a.y = Math.round(d - c.y);
      b.x = Math.round(h + c.x);
      b.y = Math.round(d + c.y)
    };
    var r = function(a, b) {
        a = a || A;
        b = b || C;
        return {
          x: a.x,
          y: a.y,
          width: b.x - a.x,
          height: b.y - a.y
        }
      },
      k = {
        "south-east": "se",
        south: "s",
        north: "n",
        east: "e",
        west: "w",
        "south-west": "sw",
        "north-east": "ne",
        "north-west": "nw"
      },
      v = q.arrayToObject(["north-west", "north-east", "south-east",
        "south-west"
      ]),
      x = q.arrayToObject(["north", "south", "east", "west"]),
      s = q.arrayToObject(["crop"]),
      z = function(a) {
        d.contexts.active.style.cursor = a ? k[a] + "-resize" :
          "default"
      },
      y = function(a,
        b, c) {
        return a < b ? b : a > c ? c : a
      },
      B = {
        x: 0,
        y: 0,
        scrollLeft: 0,
        scrollTop: 0,
        xMin: 0,
        yMin: 0,
        zoom: 1
      },
      A = l(),
      C = l(),
      F = null;
    return a.construct()
  })
})(sketch);
(function(g) {
  g.registerToolkit("vectorfill", function(f, d) {
    var a = this,
      e = d.scene,
      q = d.toolkit,
      l = f.util,
      b = f.vector,
      c = b.Point,
      p = f.feature.tools.vectorfill,
      g = p.fillArea,
      m = p.fillMode;
    this.id = "vectorfill";
    this.users = {};
    this.enable = function() {
      var b = a.active.canvas;
      a.onMouse = "rect" === g ? eventjs.add(b, "drag", a.onDrag) :
        eventjs.add(b, "click", a.onClick);
      q.select && d.tool !== q.select && q.select.enable({
        mouse: !1,
        key: !0
      })
    };
    this.disable = function() {
      a.onMouse && a.onMouse.remove();
      q.select && d.tool !== q.select && q.select.disable({
        mouse: !1,
        key: !0
      })
    };
    this.onClick = function(a, p) {
      var h = c.clone(p),
        r = e.findAtPoint({
          point: h,
          searchParam: {}
        });
      b.setStyleAt(d, {
        fillMode: m,
        layer: e.children[r.pop()],
        point: h,
        style: f.style.fill
      })
    };
    this.onDrag = function(p, q) {
      eventjs.cancel(p);
      var h = "up" === q.state,
        r = q.hasMoved(),
        k = a.active;
      l.Canvas.clear(k.canvas);
      var v = Math.min(q.start.x, q.x) - .01,
        g = Math.min(q.start.y, q.y) - .01,
        s = Math.max(q.start.x, q.x) + .01,
        z = Math.max(q.start.y, q.y) + .01,
        y = e.pointsInScene([c(v, g), c(s, g), c(s, z), c(v, z)]);
      if (h)
        if (r) {
          var k = e.findInRect(y),
            y = {
              x1: v,
              y1: g,
              x2: s,
              y2: z
            },
            B;
          for (B in k) b.setStyleAt(d, {
            fillMode: m,
            layer: e.children[B],
            rect: y,
            style: f.style.fill
          })
        } else a.onClick(p, q);
      else v = d.pixelRatio, g = y[0], y = y[2], k.save(), k.scale(v,
          v), k.beginPath(), k.rect(g.x + .5, g.y + .5, y.x - g.x, y.y -
          g.y), k.fillStyle = "rgba(0,240,100,0.20)", k.fill(), k.strokeStyle =
        "rgba(0,240,100,1)", k.stroke(), k.restore()
    };
    return q.init(this)
  })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.vector = g.vector || {};
  g = f.Shape = f.Shape || {};
  var d = Math.PI,
    a = 2 * d;
  g.record = function() {
    var a;
    this.data = [];
    this.save = function() {};
    this.restore = function() {};
    this.translate = function() {};
    this.rotate = function() {};
    this.scale = function() {};
    this.beginPath = function() {
      this.data = []
    };
    this.moveTo = function(b, c) {
      this.data.push(a = {
        cmd: "M",
        x: b,
        y: c
      })
    };
    this.lineTo = function(a, b) {
      this.data.push({
        cmd: "L",
        x: a,
        y: b
      })
    };
    this.bezierCurveTo = function(a, b, c, d, e, f) {
      this.data.push({
        cmd: "C",
        x1: a,
        y1: b,
        x2: c,
        y2: d,
        x: e,
        y: f
      })
    };
    this.quadraticCurveTo = function(a, b, c, d) {
      this.data.push({
        cmd: "Q",
        x1: a,
        y1: b,
        x: c,
        y: d
      })
    };
    this.arcTo = function(a, b, c, d, e) {
      this.data.push({
        cmd: "A",
        x1: a,
        y1: b,
        x2: c,
        y2: d,
        radius: e
      })
    };
    this.closePath = function() {
      this.data.push({
        cmd: "Z",
        x: a.x,
        y: a.y
      })
    };
    this.stringify = function() {
      return f.SVGPath.fromVOBPath(this.data)
    }
  };
  g.VOBNode = function(a, b) {
    switch (b.type) {
      case "image":
        a.drawImage(b.image, b.x, b.y, b.width, b.height);
        break;
      case "line":
        a.moveTo(b.x1, b.y1);
        a.lineTo(b.x2, b.y2);
        break;
      case "polyline":
      case "polygon":
      case "path":
        e(a,
          b.data);
        break;
      case "ellipse":
        q(a, b.cx, b.cy, b.rx, b.ry);
        break;
      case "circle":
        q(a, b.cx, b.cy, b.r, b.r);
        break;
      case "rect":
        isFinite(b.rx) ? c(a, b.x, b.y, b.width, b.height, b.rx, b.ry) :
          l(a, b.x, b.y, b.width, b.height)
    }
  };
  var e = g.VOBPath = function(a, b) {
    for (var c = b && b.length, d = 0, e; d < c; d++)
      if (e = b[d]) switch (e.cmd) {
        case "M":
          a.moveTo(e.x, e.y);
          break;
        case "L":
          a.lineTo(e.x, e.y);
          break;
        case "Q":
          a.quadraticCurveTo(e.x1, e.y1, e.x, e.y);
          break;
        case "C":
          a.bezierCurveTo(e.x1, e.y1, e.x2, e.y2, e.x, e.y);
          break;
        case "A":
          a.arcTo(e.x1, e.y1, e.x2,
            e.y2, e.radius);
          break;
        case "Z":
        case "z":
          a.closePath()
      }
  };
  g.VOBPathOffset = function(a, b, c, d) {
    for (var e = b && b.length, f = 0, s; f < e; f++)
      if (s = b[f]) switch (s.cmd) {
        case "M":
          a.moveTo(s.x + c, s.y + d);
          a.lineTo(s.x + c + .01, s.y + d + .01);
          break;
        case "L":
          a.lineTo(s.x + c, s.y + d);
          break;
        case "C":
          a.bezierCurveTo(s.x1 + c, s.y1 + d, s.x2 + c, s.y2 + d, s.x +
            c, s.y + d)
      }
  };
  g.VOBPathDebug = function(a, b) {
    for (var c = "", d = b.length, e = 0, f; e < d; e++)
      if (f = b[i]) switch (f.cmd) {
        case "M":
          c += "ctx.moveTo(" + f.x + "," + f.y + ");\n";
          break;
        case "L":
          c += "ctx.lineTo(" + f.x + "," + f.y +
            ");\n";
          break;
        case "Q":
          c += "ctx.quadraticCurveTo(" + f.x1 + "," + f.y1 + "," + f.x +
            "," + f.y + ");\n";
          break;
        case "C":
          c += "ctx.bezierCurveTo(" + f.x1 + "," + f.y1 + "," + f.x2 +
            "," + f.y2 + "," + f.x + "," + f.y + ");\n";
          break;
        case "A":
          c += "ctx.arcTo(" + f.x1 + "," + f.y1 + "," + f.x2 + "," + f.y2 +
            "," + f.radius + ");\n";
          break;
        case "Z":
        case "z":
          c += "ctx.closePath();\n"
      }
    console.log(c);
    return c
  };
  g.line = function(a, b, c, d, e) {
    a.moveTo(b, c);
    a.lineTo(d, e)
  };
  g.circle = function(a, b, c, d, e) {
    return q(a, b, c, d, d, e)
  };
  var q = g.ellipse = function(a, b, c, d, e, f) {
    var s = .5522847498307936 *
      d,
      m = .5522847498307936 * e,
      p = b - d,
      l = c - e;
    d = b + d;
    e = c + e;
    a.moveTo(b, l);
    f ? (a.bezierCurveTo(b - s, l, p, c - m, p, c), a.bezierCurveTo(p,
      c + m, b - s, e, b, e), a.bezierCurveTo(b + s, e, d, c + m, d,
      c), a.bezierCurveTo(d, c - m, b + s, l, b, l)) : (a.bezierCurveTo(
      b + s, l, d, c - m, d, c), a.bezierCurveTo(d, c + m, b + s, e,
      b, e), a.bezierCurveTo(b - s, e, p, c + m, p, c), a.bezierCurveTo(
      p, c - m, b - s, l, b, l));
    a.closePath()
  };
  g.SVGPath = function(a, b) {
    return e(a, f.SVG.toVOBPath(b))
  };
  g.cross = function(a, b, c, d, e) {
    a.moveTo(b, c - e / 2);
    a.lineTo(b, c + e / 2);
    a.moveTo(b - d / 2, c);
    a.lineTo(b + d / 2, c)
  };
  g.exmark = function(a, b, c, d) {
    a.moveTo(b + d, c - d);
    a.lineTo(b - d, c + d);
    a.moveTo(b + d, c + d);
    a.lineTo(b - d, c - d)
  };
  g.square = function(a, c, d, e, f) {
    b(a, c - e, d - e, c + e, d + e, f)
  };
  var l = g.rect = function(a, c, d, e, f, m) {
      b(a, c, d, c + e, d + f, m)
    },
    b = g.rectangle = function(a, b, c, d, e, f) {
      a.moveTo(b, c);
      f ? (a.lineTo(b, e), a.lineTo(d, e), a.lineTo(d, c)) : (a.lineTo(
        d, c), a.lineTo(d, e), a.lineTo(b, e));
      a.closePath()
    };
  g.roundRectangle = function(a, b, d, e, f, m, s, p) {
    c(a, b, d, e - b, f - d, m, s, p)
  };
  var c = g.roundRect = function(a, b, c, e, f, m, s, p) {
    0 > e && (b -= e = Math.abs(e));
    0 > f &&
      (c -= f = Math.abs(f));
    var l, q, g, w, u, E;
    "number" === typeof m ? (isFinite(s) || (s = m), l = e / 2, q = f /
      2, m > l && (m = l), s > q && (s = q), l = q = g = w = m, s = u =
      E = m = s) : (Array.isArray(m) ? 4 === m.length && (m = [m[0],
        m[0], m[1], m[1], m[2], m[2], m[3], m[3]
      ]) : m = [10, 10, 10, 10, 10, 10, 10, 10], l = m[0], q = m[2],
      g = m[4], w = m[6], s = m[1], u = m[3], E = m[5], m = m[7]);
    var D = d / 4,
      P = D / 2,
      G = Math.cos(P),
      J = -d / 2,
      N = J + 1 * D,
      K = J + 2 * D,
      O = J + 3 * D,
      V = J + 4 * D,
      L = J + 5 * D,
      T = J + 6 * D,
      Q = J + 7 * D;
    a.moveTo(b + l, c);
    p ? (D *= -1, P *= -1, a.quadraticCurveTo(b + l + Math.cos(J + P) *
        l / G, c + s + Math.sin(J + P) * s / G, b + l + Math.cos(J + D) *
        l, c +
        s + Math.sin(J + D) * s), a.quadraticCurveTo(b + l + Math.cos(
          Q + P) * l / G, c + s + Math.sin(Q + P) * s / G, b + l + Math
        .cos(Q + D) * l, c + s + Math.sin(Q + D) * s), a.lineTo(b, c +
        f - s), a.quadraticCurveTo(b + w + Math.cos(T + P) * w / G, c +
        f - m + Math.sin(T + P) * m / G, b + w + Math.cos(T + D) * w,
        c + f - m + Math.sin(T + D) * m), a.quadraticCurveTo(b + w +
        Math.cos(L + P) * w / G, c + f - m + Math.sin(L + P) * m / G,
        b + w + Math.cos(L + D) * w, c + f - m + Math.sin(L + D) * m),
      a.lineTo(b + e - w, c + f), a.quadraticCurveTo(b + e - g + Math
        .cos(V + P) * g / G, c + f - E + Math.sin(V + P) * E / G, b +
        e - g + Math.cos(V + D) * g, c + f - E + Math.sin(V + D) * E),
      a.quadraticCurveTo(b +
        e - g + Math.cos(O + P) * g / G, c + f - E + Math.sin(O + P) *
        E / G, b + e - g + Math.cos(O + D) * g, c + f - E + Math.sin(O +
          D) * E), a.lineTo(b + e, c + E), a.quadraticCurveTo(b + e - q +
        Math.cos(K + P) * q / G, c + u + Math.sin(K + P) * u / G, b +
        e - q + Math.cos(K + D) * q, c + u + Math.sin(K + D) * u), a.quadraticCurveTo(
        b + e - q + Math.cos(N + P) * q / G, c + u + Math.sin(N + P) *
        u / G, b + e - q + Math.cos(N + D) * q, c + u + Math.sin(N + D) *
        u), a.lineTo(b + q, c)) : (a.lineTo(b + e - q, c), a.quadraticCurveTo(
      b + e - q + Math.cos(J + P) * q / G, c + u + Math.sin(J + P) *
      u / G, b + e - q + Math.cos(J + D) * q, c + u + Math.sin(J + D) *
      u), a.quadraticCurveTo(b + e - q + Math.cos(N +
        P) * q / G, c + u + Math.sin(N + P) * u / G, b + e - q + Math
      .cos(N + D) * q, c + u + Math.sin(N + D) * u), a.lineTo(b + e,
      c + f - E), a.quadraticCurveTo(b + e - g + Math.cos(K + P) * g /
      G, c + f - E + Math.sin(K + P) * E / G, b + e - g + Math.cos(K +
        D) * g, c + f - E + Math.sin(K + D) * E), a.quadraticCurveTo(
      b + e - g + Math.cos(O + P) * g / G, c + f - E + Math.sin(O +
        P) * E / G, b + e - g + Math.cos(O + D) * g, c + f - E + Math
      .sin(O + D) * E), a.lineTo(b + w, c + f), a.quadraticCurveTo(b +
      w + Math.cos(V + P) * w / G, c + f - m + Math.sin(V + P) * m /
      G, b + w + Math.cos(V + D) * w, c + f - m + Math.sin(V + D) *
      m), a.quadraticCurveTo(b + w + Math.cos(L + P) * w / G, c + f -
      m + Math.sin(L + P) *
      m / G, b + w + Math.cos(L + D) * w, c + f - m + Math.sin(L + D) *
      m), a.lineTo(b, c + s), a.quadraticCurveTo(b + l + Math.cos(T +
      P) * l / G, c + s + Math.sin(T + P) * s / G, b + l + Math.cos(
      T + D) * l, c + s + Math.sin(T + D) * s), a.quadraticCurveTo(b +
      l + Math.cos(Q + P) * l / G, c + s + Math.sin(Q + P) * s / G,
      b + l + Math.cos(Q + D) * l, c + s + Math.sin(Q + D) * s));
    a.closePath()
  };
  g.roundRect2 = function(a, b, c, d, e, f, s) {
    d < 2 * f && (f = d / 2);
    e < 2 * f && (f = e / 2);
    s ? (a.moveTo(b + d - f, c), a.arcTo(b, c, b, c + f, f), a.arcTo(
      b, c + e, b + f, c + e, f), a.arcTo(b + d, c + e, b + d, c + e -
      f, f), a.arcTo(b + d, c, b + d - f, c, f)) : (a.moveTo(b + f, c),
      a.arcTo(b +
        d, c, b + d, c + e, f), a.arcTo(b + d, c + e, b, c + e, f), a.arcTo(
        b, c + e, b, c, f), a.arcTo(b, c, b + d, c, f));
    a.closePath()
  };
  g.ring = function(a, b, c, e, f, m, s, l) {
    var q = -d / 2;
    m += q;
    s += q;
    a.arc ? (a.arc(b, c, f, m, s, l), q = s, p(m, q) && (f = b + e *
      Math.cos(q), q = c + e * Math.sin(q), a.moveTo(f, q)), a.arc(b,
      c, e, s, m, !l)) : (w(a, f, f, f, m, s, l), q = s, p(m, q) && (
      b += e * Math.cos(q), c += e * Math.sin(q), a.moveTo(b, c)), w(
      a, f, f, e, s, m, !l));
    a.closePath()
  };
  g.pie = function(a, b, c, e, f, m, s) {
    var l = -d / 2;
    f += l;
    m += l;
    !1 === p(f, m) && a.moveTo(b, c);
    a.arc ? a.arc(b, c, e, f, m, s) : w(a, b, c, e, f, m, s);
    a.closePath()
  };
  var p = function(b, c) {
      var d = Math.abs((b + a) % a),
        e = Math.abs((c + a) % a);
      return d === e
    },
    w = function(a, b, c, k, m, p, s) {
      if (s) var l = Math.max(m, p),
        q = Math.min(m, p) - 1E-10;
      else l = Math.min(m, p) - 1E-10, q = Math.max(m, p);
      var g = (l - q) / d / 2;
      1 < Math.abs(g) && (b -= 2 * k);
      m = b + k * Math.cos(l);
      l = c + k * Math.sin(l);
      p = b + k * Math.cos(q);
      q = c + k * Math.sin(q);
      g = .5 <= Math.abs(g) ? 1 : 0;
      s = s ? 0 : 1;
      a.moveTo(b, c);
      a.lineTo(m, l);
      e(a, f.SVGPath.arcToBezier(m, l, k, k, 0, g, s, p, q));
      a.closePath()
    };
  g.triangle = function(a, b, c, d, e) {
    m(a, b, c, d, 3, e)
  };
  var m = g.regularPolygon = function(b,
    c, d, e, f, m) {
    for (var s = a / f, p = 0; p < f; p++) {
      var l = s * (m ? f - p : p) + 0,
        q = Math.sin(l) * e + c,
        l = -Math.cos(l) * e + d;
      0 === p ? b.moveTo(q, l) : b.lineTo(q, l)
    }
    b.closePath()
  };
  g.gear = function(b, c, e, f, m, p, s) {
    1 > p && (f *= p);
    var l = a / m,
      q = l / 4 * (s ? -1 : 1);
    p = f / p;
    var g = (l - d) / 2 + l / 8;
    s && (g += q);
    for (var A = 0; A < m; A++) {
      var w = l * (s ? m - A : A) + g,
        u = w - 3 * q,
        E = w - 2 * q,
        D = w - 1 * q,
        P = Math.cos(u) * p + c,
        u = Math.sin(u) * p + e;
      0 === A ? b.moveTo(P, u) : b.lineTo(P, u);
      b.lineTo(Math.cos(E) * p + c, Math.sin(E) * p + e);
      b.lineTo(Math.cos(D) * f + c, Math.sin(D) * f + e);
      b.lineTo(Math.cos(w) * f + c, Math.sin(w) *
        f + e)
    }
    b.closePath()
  };
  g.star = function(b, c, e, f, m, p, s) {
    1 > p && (f *= p);
    var l = a / m,
      q = l / 2 * (s ? -1 : 1);
    p = f / p;
    for (var g = (l - d) / 2, A = 0; A < m; A++) {
      var w = l * (s ? m - A : A) + g,
        u = Math.cos(w - q) * p + c,
        E = Math.sin(w - q) * p + e;
      0 === A ? b.moveTo(u, E) : b.lineTo(u, E);
      b.lineTo(Math.cos(w) * f + c, Math.sin(w) * f + e)
    }
    b.closePath()
  };
  g.burst = function(b, c, e, f, m, p, s) {
    var l = s ? -1 : 1,
      q = a / m,
      g = q / 2 * l,
      A = q / 4 * l,
      w = 3 * A,
      u = Math.cos(q / 4);
    1 > p && (f *= p);
    var E = f / p,
      u = E / u,
      D = (q - d) / 2;
    1 < p && (D += d);
    p = -q * l + D;
    b.moveTo(Math.cos(p) * f + c, Math.sin(p) * f + e);
    for (l = 0; l < m; l++) p = q * (s ? m - l : l) + D, b.quadraticCurveTo(
      Math.cos(p -
        w) * u + c, Math.sin(p - w) * u + e, Math.cos(p - g) * E + c,
      Math.sin(p - g) * E + e), b.quadraticCurveTo(Math.cos(p - A) *
      u + c, Math.sin(p - A) * u + e, Math.cos(p) * f + c, Math.sin(p) *
      f + e);
    b.closePath()
  };
  g.radialBurst = function(b, c, e, f, m, p, s, l) {
    var q = a / p,
      g = 4 * s,
      A = q / 4 * g,
      g = q / 8 * g;
    s = -d / 2 + q * s / 2;
    for (var w = 0; w < p; w++) {
      var u = q * w + s,
        E = u - A,
        D = u - g,
        P = Math.cos(D) * f + c,
        D = Math.sin(D) * f + e,
        G = Math.cos(E) * m + c,
        E = Math.sin(E) * m + e,
        J = Math.cos(u) * m + c,
        u = Math.sin(u) * m + e;
      b.moveTo(P, D);
      l ? (b.lineTo(P, D), b.lineTo(J, u), b.lineTo(G, E)) : (b.lineTo(
        G, E), b.lineTo(J, u), b.lineTo(P,
        D))
    }
    b.closePath()
  };
  var u = g.spiral = function(b, c, e, f, m, p, s, l) {
    var q = -d / 2;
    p = p / m * a;
    for (var g = 0; g <= m; g++) {
      var A = s ? m - g : g,
        w = Math.pow(f, A / m),
        u = A * p + q,
        A = Math.cos(u) * w + c,
        w = Math.sin(u) * w + e;
      0 !== g || l ? b.lineTo(A, w) : b.moveTo(A, w)
    }
  };
  g.spirals = function(b, c, d, e, f, m, s, p) {
    for (var l = f; l--;) {
      b.save();
      b.translate(c, d);
      b.rotate(l * a / f);
      b.translate(-c, -d);
      var q = 100 * m;
      u(b, c, d, e * s, q, m, !!p);
      u(b, c, d, e, q, m, !p, !0);
      b.closePath();
      b.restore()
    }
  };
  g.supershape = function(b, c, d, e, f, m, s, p, l, q) {
    m = m || .001;
    s = s || -.001;
    p = p || .001;
    l = l || .001;
    for (var g =
        0; g <= f; g++) {
      var w = (q ? f - g : g) * a / f,
        u = Math.pow(Math.abs(Math.cos(m * w / 4) / 1), p),
        E = Math.pow(Math.abs(Math.sin(m * w / 4) / 1), l),
        E = Math.pow(u + E, 1 / s);
      0 === E ? w = u = 0 : (u = 1 / E * Math.cos(w) * e, w = 1 / E *
        Math.sin(w) * e);
      0 === g ? b.moveTo(u + c, w + d) : b.lineTo(u + c, w + d)
    }
    b.closePath()
  };
  g.clearPath = function(a, b, c, d, e, f, m, p, l) {
    var q = a.globalCompositeOperation;
    a.beginPath();
    a.globalCompositeOperation = "destination-out";
    shape[b](a, b, c, d, e, f, m, p, l);
    a.fill();
    a.globalCompositeOperation = q;
    a.beginPath()
  };
  g.clipPath = function(a, b, c, d, e, f, m, p, l) {
    a.beginPath();
    shape[b](a, b, c, d, e, f, m, p, l);
    a.clip()
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g)
})(sketch);
(function(g) {
  var f = g.util;
  g.registerToolkit("shape", function(a, d) {
    var l = this,
      b = d.canvas2d,
      c = a.detect,
      p = a.feature,
      g = a.module,
      m = d.render,
      u = d.scene,
      t = a.style,
      h = d.toolkit,
      r = p.tools.shape;
    l.id = "shape";
    l.units = r.units;
    l.deviceProxy = {};
    l.device = {};
    l.batches = {};
    l.time = 0;
    l._attributes = {
      angle: "number",
      anticlockwise: "number",
      coils: "number",
      cutout: "number",
      imperfection: "number",
      m: "number",
      n1: "number",
      n2: "number",
      n3: "number",
      points: "number",
      roundness: "number",
      sides: "number",
      slope: "number",
      spread: "number"
    };
    var k =
      f.clone(l._attributes);
    l.attributes = f.cloneInto(a.attrs.__styledObject, k);
    l.enabled = !1;
    l.events = {};
    l.enable = function() {
      l.enabled || (l.enabled = !0, l.events.drag = eventjs.add(l.active
          .canvas, "drag", new l.onRecord), d.tool !== h.select && h.select
        .enable({
          mouse: !1
        }))
    };
    l.disable = function() {
      l.enabled && (l.enabled = !1, eventjs.removeEvents(l.events),
        d.tool !== h.select && h.select.disable({
          mouse: !1
        }))
    };
    l.loadResource = function(a) {
      var b = a.layer,
        c = a.onerror,
        h = a.onload;
      a = b.type;
      d.config[a] ? t.load(b, function() {
        b.dirtyCheck = !0;
        b.render = s;
        b.seed = b.seed || f.Random.seed();
        h && h(b)
      }) : c && c(b, a + " unavailable")
    };
    l.changeDevice = function(a, b, c) {
      l.device = u.copyProperties(l, a);
      l.loadResource({
        layer: l.device,
        onerror: c,
        onload: b
      })
    };
    l.getDevice = function(a, b, c) {
      var h = a;
      "string" === typeof h && (h = f.clone(d.config[a]));
      l.loadResource({
        layer: h,
        onerror: c,
        onload: b
      });
      return h
    };
    l.createObject = function(a, b) {
      var c = a.layer,
        c = c.bbox,
        d = a.device,
        h = {
          type: d.type,
          composite: d.composite,
          opacity: d.opacity,
          bbox: c
        };
      c.width !== c.height && (c.width > c.height ? c.scale.y =
        c.height / c.width : c.scale.x = c.width / c.height);
      u.copyProperties(l, d, h);
      c = u.addObject(h);
      b && b(c);
      return c
    };
    l.onRecord = function(b) {
      return function(k, m, g) {
        var z = m.state,
          t = m.pointerStart,
          y = m.pointerEnd,
          w = !k,
          J = !!k;
        d.__interacting = t || "move" === z;
        var N = b || h.getMouseId(k, m);
        if (l.deviceProxy[N] || w) {
          if (!(w = l.deviceProxy[N])) return
        } else if (t) w = l.deviceProxy[N] = {}, u.copyProperties(l,
          l.device, w), l.loadResource({
          layer: w
        });
        else {
          console.warn("shape.onRecord");
          return
        }
        l.deviceLastRecord = w;
        l.deviceLastRecordID = N;
        var K =
          w.type;
        t ? (w.tmp = {}, w.tmp.start = {
            x: m.x,
            y: m.y
          }, w.seed = f.Random.seed(), w.layer = {
            type: K,
            toolkitId: "shape",
            render: s
          }, u.copyProperties(l, w, w.layer), eventjs.prevent(k)) : J &&
          eventjs.cancel(k);
        var O = m.start || w.tmp.start;
        k = w.shiftKey = isFinite(m.shiftKey) ? m.shiftKey : eventjs
          .shiftKey;
        var V = w.metaKey = isFinite(m.metaKey) ? m.metaKey :
          eventjs.metaKey;
        if (J && a.net.dataChannel && p.stream.realtime) {
          var L = a.net.dataChannel,
            z = z + "," + m.x + "," + m.y + "," + N;
          t ? (t = u.compress(u.copyProperties(l, w)), L.send([
            "shape", K, z, V, k, t
          ])) : L.send(["shape",
            K, z, V, k
          ])
        }
        t = l.batches[N];
        t || (t = l.batches[N] = [], t.time = l.time);
        var L = d.zoom,
          z = (L - 1) / L,
          T = d.scrollLeft * z,
          Q = d.scrollTop * z,
          O = {
            x: O.x / L + T,
            y: O.y / L + Q
          },
          U = !!c.useNonUniform[K],
          z = "objectBoundingBox" === l.units || !1 === U,
          T = m.x / L + T - O.x,
          da = m.y / L + Q - O.y,
          Q = Math.abs(T),
          aa = Math.abs(da),
          L = U ? Math.max(Q, aa) : Math.sqrt(T * T + da * da),
          V = !!V;
        k = !!k;
        !1 === U ? (V = !k, k = !0) : V && (k = !0);
        V = V ? -Math.atan2(T, da) * f.RAD_DEG : 0;
        U = 0 > T ? -1 : 1;
        T = 0 > da ? -1 : 1;
        !1 === k && (Q > aa ? T *= aa / Q || 0 : U *= Q / aa || 0);
        z && (U = Math.abs(U), T = Math.abs(T), L *= 2);
        k = w.layer;
        k.isRecording = !0;
        k.useHighRes = !0;
        V = k.bbox = {
          width: L,
          height: L,
          rotate: V,
          units: l.units,
          scale: {
            x: U,
            y: T
          }
        };
        L = u.getConstraint(k, !0);
        v(V, L.width, L.height, O, z);
        k.dirtyTransform = !0;
        k.usePixelData && (k.dirtyCache = !0);
        t[0] = k;
        if (y) {
          delete l.batches[N];
          delete l.deviceProxy[N];
          if (r.addByClick) L.tooSmall && v(V, r.defaultWidth, r.defaultHeight,
            O, z, K);
          else if (!m.hasMoved()) return;
          if (J || a.peer.isStableStream()) return delete l.dirtyCheck,
            delete k.isRecording, delete k.useHighRes, l.createObject({
              device: w,
              layer: k
            }, function(a) {
              u.deselectAll();
              d.render.sceneGCO("root.shape.onRecord", function(a) {
                !1 === a && f.isEmpty(l.deviceProxy) && f.Canvas.blip(
                  l.active.canvas)
              });
              d.history && d.history.store({
                cmd: "add",
                icon: K,
                name: K,
                data: [a]
              });
              g && g()
            })
        }
        l.dirtyCheck = !0;
        l.rendering || requestAnimationFrame(x)
      }
    };
    var v = function(a, c, h, e, f, k) {
        a.width = c;
        a.height = h;
        a.viewBox = [0, 0, c, h];
        k && (a.scale.x = 1, a.scale.y = y[k] ? .5 : 1);
        var m = e.x;
        e = e.y;
        if (f || k) m -= c / 2 * a.scale.x, e -= h / 2 * a.scale.y;
        c = d.zoom;
        h = d.pixelRatio;
        a.x = m - b.x / c / h;
        a.y = e - b.y / c / h
      },
      x = function() {
        if (l.dirtyCheck) {
          a.perf();
          var b = l.deviceLastRecord;
          b.ctx = l.ctx;
          b.active = l.active;
          b.cache = l.cache;
          m.prepareGCO(b.composite);
          var c = !1,
            d;
          for (d in l.batches)
            for (var b = l.batches[d], h = 0; h < b.length; h++) c = b[0],
              u.updateTransform(c, !0), m.layer(l.active, c), c = !0;
          delete l.dirtyCheck;
          void 0 !== d && c && requestAnimationFrame(x);
          delete l.rendering
        } else requestAnimationFrame(x), l.rendering = !0
      },
      s = function(a, b, c) {
        b = this.bbox;
        var d = b.width,
          h = b.height,
          e = b.scale;
        b = e.x;
        var e = e.y,
          f = d / 2 * (0 > b ? -1 : 1),
          k = h / 2 * (0 > e ? -1 : 1),
          m = Math.max(d, h) / 2,
          s = g.toolkit["shape." +
            this.type];
        c && (f += 0 > b ? d : 0, k += 0 > e ? h : 0);
        a.save();
        a.beginPath();
        a.scale(b, e);
        s(a, f, k, m, this);
        a.restore();
        a.globalCompositeOperation = t.getComposite(this.composite, !
          this.isRecording);
        (d = this.fill) && d.enabled && d.opacity && z(a, "fill", b, e,
          c, this);
        (d = this.stroke) && d.enabled && d.lineWidth && d.opacity &&
          (a.lineWidth = d.lineWidth, a.lineJoin = d.lineJoin, a.lineCap =
            d.lineCap, a.miterLimit = d.miterLimit, z(a, "stroke", b, e,
              c, this))
      },
      z = function(a, b, c, d, h, e) {
        c = e[b];
        var f = c.type,
          k = b + "Style";
        if ("erase" === e.composite) a[k] = "#000",
          a[b]();
        else if ("color" === f) a[k] = c.color, a[b]();
        else {
          var m = e.bbox;
          d = m.scale;
          c = d.x;
          d = d.y;
          var s = m.width,
            m = m.height,
            r = s,
            p = m,
            l = 0,
            q = 0;
          "gradient" !== f || h || (0 > c && (r -= s, l -= s), 0 > d &&
            (p -= m, q -= m));
          "pattern" === f && "fill" === b ? (a.save(), a.scale(c, d), a[
              k] = t.getStyle(b, a, r, p, l, q, e), a[b](), a.restore()) :
            (a[k] = t.getStyle(b, a, r * c, p * d, l * c, q * d, e), a[b]
              ())
        }
      },
      y = {
        rectangle: !0,
        ellipse: !0
      };
    return h.init(this)
  });
  var d = function(a, d, f) {
      f.cutout ? (a.apply(a, d.concat(!1)), d[3] *= f.cutout, a.apply(a,
        d.concat(!0))) : a.apply(a, d)
    },
    a = g.vector.Shape;
  g.registerToolkit("shape.ring", function(d, q, l, b, c) {
    var p = f.DEG_RAD,
      g = c.angle;
    a.ring(d, q, l, b * (c.cutout || 0), b, g.min * p, g.max * p, c.anticlockwise)
  });
  g.registerToolkit("shape.pie", function(d, q, l, b, c) {
    var p = f.DEG_RAD,
      g = c.angle;
    a.pie(d, q, l, b, g.min * p, g.max * p, c.anticlockwise)
  });
  g.registerToolkit(["shape.circle", "shape.ellipse"], function(e, f,
    l, b, c) {
    var p = c.imperfection;
    p ? (p /= 2, a.imperfectCircle(e, f, l, b - p, b + p, 42, c.seed)) :
      d(a.circle, [e, f, l, b], c)
  });
  g.registerToolkit(["shape.square", "shape.rectangle"], function(e,
    f, l, b, c) {
    var p = c.roundness,
      g = c.imperfection;
    if (p) {
      var g = p * Math.max(b, b),
        p = p * Math.max(b, b),
        m = c.bbox.scale,
        u = Math.abs(m.x),
        m = Math.abs(m.y);
      u > m ? p *= u / m : g *= m / u;
      c.cutout ? (a.roundRect(e, f - b, l - b, 2 * b, 2 * b, g, p), a
        .roundRect(e, f - b * c.cutout, l - b * c.cutout, 2 * b * c.cutout,
          2 * b * c.cutout, g, p, !0)) : a.roundRect(e, f - b, l - b,
        2 * b, 2 * b, g, p)
    } else g ? a.imperfectRect(e, f - b, l - b, 2 * b, 2 * b, g, c.seed) :
      d(a.square, [e, f, l, b], c)
  });
  g.registerToolkit("shape.triangle", function(e, f, l, b, c) {
    d(a.triangle, [e, f, l, b], c)
  });
  g.registerToolkit("shape.regularPolygon",
    function(e, f, l, b, c) {
      d(a.regularPolygon, [e, f, l, b, Math.round(c.sides)], c)
    });
  g.registerToolkit("shape.gear", function(e, f, l, b, c) {
    d(a.gear, [e, f, l, b, Math.round(c.sides), c.slope], c)
  });
  g.registerToolkit("shape.star", function(e, f, l, b, c) {
    d(a.star, [e, f, l, b, Math.round(c.sides), c.slope], c)
  });
  g.registerToolkit("shape.burst", function(e, f, l, b, c) {
    d(a.burst, [e, f, l, b, Math.round(c.sides), c.slope], c)
  });
  g.registerToolkit("shape.radialBurst", function(d, f, l, b, c) {
    a.radialBurst(d, f, l, 0, b, Math.round(c.sides), c.spread)
  });
  g.registerToolkit("shape.spiral",
    function(d, f, l, b, c) {
      a.spirals(d, f, l, b, Math.round(c.sides), c.coils, 1 - c.spread /
        100)
    });
  g.registerToolkit("shape.supershape", function(e, f, l, b, c) {
    d(a.supershape, [e, f, l, b, c.points, Math.round(c.m), c.n1, c.n2,
      c.n3
    ], c)
  })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.vector = g.vector || {},
    f = f.Shape = f.Shape || {},
    d = {};
  f.imperfectCircle = function(e, f, l, b, c, p) {
    d = new g.util.Random(p);
    var w, m, u = 2 * Math.PI,
      t;
    p = a(9);
    m = 0;
    w = b + p.y * (c - b);
    t = f + w * Math.cos(m);
    w = l + w * Math.sin(m);
    for (e.lineTo(t, w); null != p.next;) p = p.next, m = u * p.x + 0,
      w = b + p.y * (c - b), t = f + w * Math.cos(m), w = l + w * Math
      .sin(m), e.lineTo(t, w)
  };
  f.imperfectRect = function(e, f, l, b, c, p, w, m) {
    if (m) {
      d = new g.util.Random(w);
      b = sketch.vector.Point;
      c = m.length - 1;
      for (w = 0; w < c; w++) {
        var u = m[w],
          t = m[(w + 1) % c];
        0 === w && e.moveTo(u.x, u.y);
        f = b.distance(u, t);
        f = Math.min(8, Math.round(f / 50));
        l = -Math.abs(b.angle(u, t));
        for (var h = Math.sin(l) * p * f / 8, r = Math.cos(l) * p * f /
            8, k = a(f), v = k.y; k;) f = u.x + k.x * (t.x - u.x), l = u.y +
          k.x * (t.y - u.y), f += h * (k.y - v), l += r * (k.y - v), k =
          k.next, e.lineTo(f, l)
      }
      e.closePath()
    }
  };
  var a = function(a) {
    for (var f = {
        next: {
          x: 1,
          y: 1
        },
        x: 0,
        y: 1
      }, l = 1, b = 1, c, p, g, m, u, t = 1 / 3, h = 0; h < a; h++)
      for (c = f; c.next;) p = c.next, u = t + d.toDouble() * (1 - 2 *
          t), m = c.x + u * (p.x - c.x), g = .5 > u ? m - c.x : p.x - m,
        u = c.y + u * (p.y - c.y), u += g * (2 * d.toDouble() - 1), g = {
          x: m,
          y: u
        }, u < l ? l = u : u > b && (b = u), g.next = p,
        c.next = g, c = p;
    if (b !== l)
      for (a = 1 / (b - l), c = f; c;) c.y = a * (c.y - l), c = c.next;
    else
      for (c = f; c;) c.y = 1, c = c.next;
    return f
  }
})(sketch);
(function(g) {
  g.registerToolkit("media", function(f, d) {
    var a = this,
      e = d.toolkit.area,
      q = d.canvas2d,
      l = f.feature,
      b = d.render,
      c = d.scene,
      p = d.toolkit,
      g = f.util;
    a.id = "media";
    a.units = "objectBoundingBox";
    a._attributes = {
      hue: "number",
      saturation: "number",
      temperature: "number",
      tint: "number",
      exposure: "number",
      brightness: "number",
      contrast: "number",
      src: "string"
    };
    var m = g.clone(a._attributes);
    a.attributes = g.cloneInto(f.attrs.__styledObject, m);
    a.enable = function() {
      var a = p.select;
      d.tool !== a && a && a.enable({
        cursor: !0,
        searchParam: {
          toolkitId: l.tools.media.useSearch
        }
      })
    };
    a.disable = function() {
      var a = p.select;
      d.tool !== a && a && a.disable({
        cursor: !0
      })
    };
    a.loadResource = function(a) {
      var b = a.layer,
        c = a.onerror,
        e = a.onload,
        m = a.onprogress,
        s = a.useDirtyCache,
        p = b.src;
      a = b.type;
      if (d.config[a] && p) {
        var l = b.bbox,
          q = l.owidth || l.width,
          g = l.oheight || l.height;
        f.assets.add({
          src: p,
          type: a,
          width: q,
          height: g,
          onprogress: function(a) {
            m && m(a.loaded / a.total)
          },
          onerror: function() {
            if (c) {
              var a = p.split("/").pop();
              c(b, "&ldquo;" + a + "&rdquo; unavailable.")
            }
          },
          onload: function(a) {
            (this.setAttribute || "image" === b.type ||
              "video" === b.type ? u : t)({
              hash: a,
              asset: this,
              src: p,
              layer: b,
              onload: e,
              doscale: function(a, b) {
                q / a > g / b && (g = q / a * b);
                q / a < g / b && (q = g / b * a);
                l.width = q;
                l.height = g;
                l.owidth = l.owidth || q;
                l.oheight = l.oheight || g
              },
              useDirtyCache: s
            })
          }
        })
      } else c && c([b, a + " unavailable"])
    };
    var u = function(a) {
        var b = a.layer,
          c = a.asset,
          d = a.onload;
        a = a.doscale;
        var e = b.bbox,
          e = "default" === c.className ? [0, 0, e.width, e.height] : [
            0, 0, c.width, c.height
          ];
        a(e[2] - e[0], e[3] - e[1]);
        b.dirtyTransform = !0;
        b.bbox.viewBox = e;
        b.render = function(a, b, d) {
          var e = this.bbox,
            h = e.width;
          b = e.height;
          var f = e.scale,
            e = f.x,
            f = f.y,
            m = 0 > e ? h * e : 0,
            r = 0 > f ? b * f : 0,
            h = Math.abs(h * e);
          b = Math.abs(b * f);
          a.save();
          d ? (a.scale(1 / e, 1 / f), a.scale(m ? -1 : 1, r ? -1 : 1)) :
            (a.scale(m ? -1 : 1, r ? -1 : 1), a.translate(m, r));
          a.drawImage(c, 0, 0, h, b);
          a.restore()
        };
        d && d(b)
      },
      t = function(a) {
        if (!g.exists("sketch.vector.SVG")) throw "sketch.vector.SVG is required";
        var b = a.layer,
          c = a.asset,
          d = a.onload,
          e = a.doscale;
        a = b.bbox;
        var f = a.width,
          m = a.height,
          p = c.viewBox;
        e(p[2] - p[0], p[3] - p[1]);
        if ("objectBoundingBox" === a.units) {
          var e = a.scale,
            l = a.height;
          a.x += (1 -
            a.width / f) * f / 2 * e.x;
          a.y += (1 - l / m) * m / 2 * e.y
        }
        b.svg = c;
        b.dirtyCheck = !0;
        b.bbox.viewBox = p;
        a = c.viewBox || p;
        f = c.viewBoxStroke || p;
        b.padding = {
          top: a[1] - f[1],
          left: a[0] - f[0],
          bottom: f[3] - a[3],
          right: f[2] - a[2]
        };
        b.render = function(a, b, d) {
          if (c.render) {
            var e = {
              ctx: a
            };
            "symbol" === this.type && (e.defaultFill = this.fill &&
              this.fill.color ? this.fill.color : "#000000");
            e.trx = d ? new vector.Transform : b;
            var h = this.bbox,
              f = h.width,
              m = h.height,
              s = h.scale,
              h = s.x,
              s = s.y,
              r = f / p[2];
            d ? (a.save(), a.scale(r, r), c.render(e), a.restore()) : (
              b.translate(0 > h ? -f :
                0, 0 > s ? -m : 0), b.scale(r, r), c.render(e))
          } else console.warn("error", c)
        };
        d && d(b)
      };
    a.createObject = function(b, e) {
      var f = b.layer,
        m = c.copyProperties(a, d.config.clipart, {});
      c.copyProperties(a, f, m);
      f = c.addObject(m);
      e && e(f)
    };
    a.record = function(h, m, k) {
      h && eventjs.prevent(h);
      if ((!h || l.tools.media.addByDrag) && "eyeDropper" !== f.ui.colorPicker
        .state) {
        var p = a.style;
        if ("function" !== typeof p.render) {
          m.pause && m.pause();
          var t = f.lib[p.type];
          !p.src && t && t.paths && (console.warn("find default path"),
            p.src = t.getSrc(t.paths[0]));
          var s = function(b) {
            b.src ? (m.resume && m.resume(), a.record(h, m, k)) :
              console.warn("missing src", b)
          };
          a.loadResource({
            layer: p,
            onerror: s,
            onload: s
          })
        } else {
          var z = d.zoom,
            s = (z - 1) / z,
            y = z * d.pixelRatio,
            u = d.scrollLeft * s,
            A = d.scrollTop * s,
            C = m.state,
            s = "down" === C,
            t = "move" === C,
            C = "up" === C,
            F = m.start,
            E = F.x / z + u,
            F = F.y / z + A,
            D = m.y / z + A,
            P = m.x / z + u,
            A = p.bbox;
          Math.min(E, P);
          Math.min(F, D);
          z = 2 * (Math.abs(E - P) || 1);
          u = 2 * (Math.abs(F - D) || 1);
          z / A.width > u / A.height ? u = z / A.width * A.height : z =
            u / A.height * A.width;
          if (s) {
            s = c.copyAttributes(a.attributes, d.config[a.type], {});
            s.bbox = g.clone(A);
            s.render = p.render;
            s.dirtyCheck = !0;
            s.visible = !1;
            t = f.lib[a.type];
            (p = t.byPath[p.src]) && c.copyRules(p, s);
            if (A = c.addObject(s, {
                inGenesis: !0
              })) {
              c.selectByIdx(A.zIndex);
              var G = A.bbox;
              G.units = a.units;
              G.scale = {
                x: 1,
                y: 1
              };
              G.x = E - 1 * q.x / y;
              G.y = F - 1 * q.y / y;
              G.width = z;
              G.height = u
            }
            a.sizeAtRender = Math.sqrt(z * u)
          } else if (A = d.selection.item) {
            A.dirtyTransform = !0;
            A.dirtyControl = !0;
            G = A.bbox;
            G.x = E - 1 * q.x / y;
            G.y = F - 1 * q.y / y;
            G.width = z;
            G.height = u;
            y = c.getConstraint(A, !0);
            G.width = G.owidth = y.width;
            G.height = G.oheight =
              y.height;
            var J = Math.sqrt(y.width * y.height) / a.sizeAtRender;
            G.scaleCache = {
              x: J,
              y: J
            };
            if (h && h.shiftKey) G.rotate = 0;
            else if (void 0 === m.rotate || !0 === m.rotate) E = -Math.atan2(
              P - E, D - F) * g.RAD_DEG, G.rotate = (E + 360) % 360;
            E = G.scale;
            G.x -= E.x * y.width / 2;
            G.y -= E.y * y.height / 2;
            if (C && (e.inGenesis = d.selection.id, A.visible = !0,
                "clipart" === A.type && (A.svg = p.svg), z * u < a.minWidth *
                a.minHeight))
              if (l.tools.media.addByClick) 5 >= z && 5 >= u ? (p = a.defaultWidth,
                  E = a.defaultHeight) : (p = a.minWidth, E = a.minHeight),
                p / z > E / u && (E = p / z * u), p / z < E / u && (p = E /
                  u *
                  z), G.width = p, G.height = E, G.owidth = p, G.oheight =
                E, G.x -= (p - z) / 2, G.y -= (E - u) / 2;
              else {
                p = d.selection.id;
                c.deselectAll();
                c.removeById(p);
                d.render("toolkit.media.record");
                return
              }
            d.__interacting = s || t;
            clearTimeout(e.timeout);
            p = y.constrained && J || .5 > J || 3 < J || C;
            C || p ? a.updateTimeout(C) : (c.updateBBox(A), b.prepareGCO(
              A.composite), b.layer(a.active, A), e.renderControls(d.selection
              .idx), e.timeout = setTimeout(a.updateTimeout, 250))
          }
        }
      }
    };
    a.onEnterKey = function() {
      c.deselectAll().render()
    };
    a.updateTimeout = function(h) {
      var f = d.selection.item;
      if (f) {
        var k = f.bbox;
        a.sizeAtRender = Math.sqrt(k.width * k.height);
        f.dirtyCheck = !0;
        f.bbox.scaleCache = {
          x: 1,
          y: 1
        };
        c.updateConstrain(f);
        c.updateTransform(f);
        h ? b.sceneGCO("media.updateTimeout") : (b.prepareGCO(f.composite),
          b.layer(a.active, f), e.renderControls(d.selection.idx))
      }
    };
    a.style = {
      bbox: {
        x: 0,
        y: 0,
        width: 100,
        height: 100,
        rotate: 0,
        scale: {
          x: 1,
          y: 1
        }
      }
    };
    return p.init(a)
  })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
    d = function(a, e) {
      if (!(this instanceof d)) return new d(a, e);
      this.filters = {};
      this.id = "ColorMatrix";
      if (a)
        if ("object" === typeof a) {
          var q = !0,
            l;
          for (l in a) q = !1;
          q && (this.matrix = f.slice(0));
          for (var b in a) break;
          if ("number" === typeof a[b])
            if (isNaN(b)) this.update(a);
            else {
              q = {};
              for (l in a) q[l] = o[l];
              this.matrix = q
            } else "object" === typeof a[b] && this.combine(a)
        } else this.update(a, e);
      else this.matrix = f.slice(0);
      return this
    };
  d.prototype = {
    brightness: function(a) {
      return [1,
        0, 0, 0, a, 0, 1, 0, 0, a, 0, 0, 1, 0, a, 0, 0, 0, 1, 0
      ]
    },
    contrast: function(a, d) {
      d = d || .5;
      return [++a, 0, 0, 0, d * (1 - a), 0, a, 0, 0, d * (1 - a), 0,
        0, a, 0, d * (1 - a), 0, 0, 0, 1, 0
      ]
    },
    sepia: function() {
      return [.393, .769, .189, 0, 0, .349, .686, .168, 0, 0, .272, .534,
        .131, 0, 0, 0, 0, 0, 1, 0
      ]
    },
    exposure: function(a) {
      return [a, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, 1,
        0
      ]
    },
    colorize: function(a) {
      var d = (a >>> 16 & 255) / 255,
        q = (a >>> 8 & 255) / 255,
        l = (a & 255) / 255;
      a = (a >>> 24) / 255;
      d = [.212656 * d, .715158 * d, .072186 * d, 0, 0, .212656 * q,
        .715158 * q, .072186 * q, 0, 0, .212656 * l, .715158 * l, .072186 *
        l, 0, 0, 0,
        0, 0, 1, 0
      ];
      if (1 > a)
        for (q = 0; 20 > q; q++) d[q] = (1 - a) * f[q] + a * d[q];
      return d
    },
    monotone: function(a) {
      var d = (a >>> 16 & 255) / 255,
        q = (a >>> 8 & 255) / 255,
        l = (a & 255) / 255;
      a = (a >>> 24) / 255;
      d = [d, q, l, 0, 0, d, q, l, 0, 0, d, q, l, 0, 0, 0, 0, 0, 1, 0];
      if (1 > a)
        for (q = 0; 20 > q; q++) d[q] = (1 - a) * f[q] + a * d[q];
      return d
    },
    hue: function(a) {
      a *= sketch.util.DEG_RAD;
      var d = Math.cos(a);
      a = Math.sin(a);
      return [.212656 + .787344 * d + -.212656 * a, .715158 + -.715158 *
        d + -.715158 * a, .072186 + -.072186 * d + .927814 * a, 0, 0,
        .212656 + -.212656 * d + .143 * a, .715158 + d * (1 - .715158) +
        .14 * a, .072186 + -.072186 * d +
        -.283 * a, 0, 0, .212656 + -.212656 * d + -.787344 * a, .715158 +
        -.715158 * d + .715158 * a, .072186 + .927814 * d + .072186 *
        a, 0, 0, 0, 0, 0, 1, 0
      ]
    },
    invert: function(a, d) {
      d = d || 1;
      a *= -1;
      return [a, 0, 0, 0, d, 0, a, 0, 0, d, 0, 0, a, 0, d, 0, 0, 0, 1,
        0
      ]
    },
    temperature: function(a) {
      return [1 + a / 256, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1 + -a /
        256, 0, 0, 0, 0, 0, 1, 0
      ]
    },
    tint: function(a) {
      return [1 + a / 256, 0, 0, 0, 0, 0, 1 + -a / 256, 0, 0, 0, 0, 0,
        1 + a / 256, 0, 0, 0, 0, 0, 1, 0
      ]
    },
    saturation: function(a) {
      var d = .212656 * (1 - a),
        f = .715158 * (1 - a),
        l = .072186 * (1 - a);
      return [d + a, f, l, 0, 0, d, f + a, l, 0, 0, d, f, l + a, 0, 0,
        0, 0, 0, 1, 0
      ]
    },
    blend: function(a,
      d) {
      for (var f = this.matrix, l = [], b = 0; 20 > b; b++) l[b] = (1 -
        d) * f[b] + d * a[b];
      this.matrix = l;
      return this
    },
    light: function(a, d, f, l) {
      f = l.highlights;
      d = -clamp(f.value * (f.max - f.min) + f.min, f.min, f.max);
      f = l.shadows;
      l = -clamp(f.value * (f.max - f.min) + f.min, f.min, f.max);
      var b = Math.PI;
      f = Math.cos(b);
      for (var b = Math.sin(b), c = a.data, p = c.length, g = 0; g <
        p; g += 4) {
        var m = c[g],
          u = c[g + 1],
          t = c[g + 2],
          h = m,
          r = u,
          k = t,
          m = m ^ 255,
          u = u ^ 255,
          t = t ^ 255,
          v = (.299 + .701 * f + .168 * b) * m + (.587 - .587 * f + .33 *
            b) * u + (.114 - .114 * f - .497 * b) * t,
          x = (.299 - .299 * f - .328 * b) * m + (.587 + .413 * f +
            .035 * b) * u + (.114 - .114 * f + .292 * b) * t,
          s = (.299 - .3 * f + 1.25 * b) * m + (.587 - .588 * f - 1.05 *
            b) * u + (.114 + .886 * f - .203 * b) * t,
          m = h < v ? h : v,
          u = r < x ? r : x,
          t = k < s ? k : s,
          h = (1 - d) * h + d * m,
          r = (1 - d) * r + d * u,
          k = (1 - d) * k + d * t,
          m = h > v ? h : v,
          u = r > x ? r : x,
          t = k > s ? k : s,
          h = (1 - l) * h + l * m,
          r = (1 - l) * r + l * u,
          k = (1 - l) * k + l * t;
        c[g] = (0 > h ? 0 : 256 > h ? h : 255) >> 0;
        c[g + 1] = (0 > r ? 0 : 256 > r ? r : 255) >> 0;
        c[g + 2] = (0 > k ? 0 : 256 > k ? k : 255) >> 0
      }
      return a
    },
    duotone: function(a, d, f, l) {
      d = Color.HSV_RGB({
        H: 360 * l.hue.value,
        S: 100 * l.saturation.value,
        V: 100 * l.saturation.value
      });
      f = 1.5 * l.luminance.value;
      l = l.amount.value;
      for (var b =
          a.data, c = b.length, p = 0; p < c; p += 4) {
        var g = b[p],
          m = b[p + 1],
          u = b[p + 2],
          t = .212656 * g + .715158 * m + .072186 * u,
          h = (1 - t / 255) * d.R + t / 255 * t,
          r = (1 - t / 255) * d.G + t / 255 * t,
          k = (1 - t / 255) * d.B + t / 255 * t,
          t = t - (h + r + k) / 3,
          h = h + t,
          r = r + t,
          k = k + t,
          t = (h + r + k) / 3,
          v = Math.min(h, r, k);
        0 > v && (h = t + (h - t) * t / (t - v), r = t + (r - t) * t /
          (t - v), k = t + (k - t) * t / (t - v));
        v = Math.max(h, r, k);
        255 < v && (h = t + (h - t) * (255 - t) / (v - t), r = t + (r -
          t) * (255 - t) / (v - t), k = t + (k - t) * (255 - t) / (v -
          t));
        h = ((1 - l) * g + l * h) * f;
        r = ((1 - l) * m + l * r) * f;
        k = ((1 - l) * u + l * k) * f;
        b[p] = h;
        b[p + 1] = r;
        b[p + 2] = k
      }
      return a
    },
    combine: function(a) {
      var d = [];
      if ("number" === typeof a[0])
        for (var f = 0, l = arguments.length; f < l; f++) d[f] =
          arguments[f];
      else d = a;
      var l = this.matrix,
        b = [];
      for (f in d)
        if (l) {
          for (var c = 0; 5 > c; c++)
            for (var p = 0; 20 > p; p += 5) b[p + c] = l[p] * d[f][c] +
              l[p + 1] * d[f][c + 5] + l[p + 2] * d[f][c + 10] + l[p + 3] *
              d[f][c + 15] + (4 === c ? l[p + 4] : 0);
          l = b
        } else l = d[f];
      this.matrix = l;
      return this
    },
    update: function(a, d) {
      if ("string" === typeof a) {
        if (!this[a]) return;
        "number" === typeof d ? this.filters[a] = this[a](d) : delete this
          .filters[a]
      } else
        for (var f in a) this[f] && ("number" === typeof a[f] ? this.filters[
            f] =
          this[f](a[f]) : delete this.filters[f]);
      delete this.matrix;
      this.combine(this.filters);
      return this
    },
    getMatrix4x4: function() {
      var a = this.matrix;
      return [a[0], a[1], a[2], a[3], a[5], a[6], a[7], a[8], a[10],
        a[11], a[12], a[13], a[15], a[16], a[17], a[18]
      ]
    },
    toString: function() {
      return this.matrix.join(",")
    },
    apply: function(a, d, f, l) {
      var b = a.canvas;
      l || (l = [0, 0]);
      f || (f = a);
      d || (d = [0, 0, b.width, b.height]);
      a = a.getImageData(d[0], d[1], d[2], d[3]);
      d = a.data;
      for (var c = this.matrix, b = c[0], p = c[1], g = c[2], m = c[3],
          u = c[4], t = c[5], h = c[6], r = c[7],
          k = c[8], v = c[9], x = c[10], s = c[11], z = c[12], y = c[13],
          B = c[14], A = c[15], C = c[16], F = c[17], E = c[18], c = c[
            19], D, P, G, J, N, K, O, V = 0, L = d.length; V < L; V += 4)
        D = d[V], P = d[V + 1], G = d[V + 2], J = d[V + 3], N = D * b +
        P * p + G * g + J * m + u, K = D * t + P * h + G * r + J * k +
        v, O = D * x + P * s + G * z + J * y + B, D = D * A + P * C +
        G * F + J * E + c, a.data[V] = (0 > N ? 0 : 255 > N ? N : 255) >>
        0, a.data[V + 1] = (0 > K ? 0 : 255 > K ? K : 255) >> 0, a.data[
          V + 2] = (0 > O ? 0 : 255 > O ? O : 255) >> 0, a.data[V + 3] =
        (0 > D ? 0 : 255 > D ? D : 255) >> 0;
      f.putImageData(a, l[0], l[1])
    },
    reset: function() {
      this.matrix = f.slice(0)
    }
  };
  d.setFilter = function(a) {
    var e = new d;
    isFinite(a.saturation) &&
      e.update("saturation", a.saturation);
    !0 === a.invert && e.update("invert", a.invert);
    isFinite(a.hue) && e.update("hue", a.hue);
    !0 === a.sepia && e.update("sepia", a.sepia);
    isFinite(a.tint) && e.update("tint", a.tint);
    isFinite(a.temperature) && e.update("temperature", a.temperature);
    isFinite(a.exposure) && e.update("exposure", a.exposure);
    isFinite(a.brightness) && e.update("brightness", a.brightness);
    isFinite(a.contrast) && e.update("contrast", a.contrast, 1);
    isFinite(a.colorize) && e.update("colorize", 4294901760);
    isFinite(a.monotone) &&
      e.update("monotone", 4283782485);
    return e
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    d);
  g.gl = g.gl || {};
  g.gl.ColorMatrix = d
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Camera = function(f, d) {
    var a = this,
      e = d.scene,
      q = d.toolkit,
      l = f.util,
      b = function(a, b) {
        a = a || {};
        if (l.exists("gapi.hangout.getLocalParticipantId")) {
          var c = gapi.hangout.getLocalParticipantId(),
            d = gapi.hangout.layout.createParticipantVideoFeed(c),
            c = gapi.hangout.layout.getVideoCanvas();
          c.setVideoFeed(d)
        }
        var d = a.video || f.rtc.getFocusVideo(),
          c = l.Canvas(),
          e = c.ctx;
        c.width = 640;
        c.height = 480;
        e.drawImage(d, 0, 0);
        b && b(c)
      },
      c = function() {
        m.className = "fadein";
        setTimeout(function() {
          m.className =
            "fadeout";
          setTimeout(function() {
            m.style.display = "none";
            f.loader && f.loader.create("camera", "taking photo...",
              100)
          }, 200);
          b({
            video: u
          }, function(b) {
            b.toBlobURL(function(b) {
              var c = f.rtc.getDefaultID(),
                h = f.rtc.videos[c];
              if (!h) return console.log("missing video " + c);
              q.area.inGenesisChannel = !0;
              d.config.reset("image");
              e.deselectAll();
              e.add({
                centerOnPoint: !0,
                fromSocket: t,
                type: "image",
                src: b,
                filter: glfx.presets[h.element.presetId]
              }, function(b) {
                f.feature.stream.videoAtop && f.rtc.arrange.fn();
                !1 === a.playing && f.rtc.pause();
                t || (d.setTool("select"), f.ui.configureBuild(d.tool
                  .type, !0));
                p && p();
                d.history.store({
                  cmd: "add",
                  icon: b.type,
                  name: b.type,
                  data: [b]
                });
                a.capturing = !1
              })
            })
          })
        }, 100)
      },
      p, g = function(b, d, e, l, q, s) {
        u = f.rtc.getFocusVideo(e);
        if (!u) return console.log("missing base stream");
        u.presetId = l || u.presetId || 0;
        f.loader && f.loader.create("camera", "taking photo...");
        a.capturing = !0;
        p = q;
        t = s;
        a.playing = f.rtc.playing;
        m.style.display = "block";
        setTimeout(c, 1)
      },
      m = document.createElement("div");
    m.id = "snapshot";
    m.style.display = "none";
    document.body.appendChild(m);
    var u, t;
    this.play = function() {};
    this.pause = function() {};
    this.capturing = !1;
    this.capture = function() {
      var b = arguments;
      l.exists("chrome.permissions.request") ? chrome.permissions.request({
        permissions: ["videoCapture"]
      }, function(c) {
        c ? g.call(a, b[0], b[1], b[2], b[3], b[4], b[5], b[6]) : f.ui
          .log("Access to camera was denied.")
      }) : g.call(a, b[0], b[1], b[2], b[3], b[4], b[5], b[6])
    };
    return this
  }
})(sketch);
(function(g) {
  g.registerToolkit("screenshot", function(f, d) {
    var a = d.canvas2d,
      e = d.toolkit;
    this.enabled = !1;
    this.enable = function() {
      !1 === this.enabled && (this.enabled = !0, this.onDrag =
        eventjs.add(this.active.canvas, "drag", this.mouse), f.ui.setCursor(
          "default"), d.tool !== e.select && e.select.enable({
          mouse: !1
        }))
    };
    this.disable = function() {
      !0 === this.enabled && (this.enabled = !1, this.onDrag.remove(),
        f.ui.setCursor("default"), d.tool !== e.select && e.select.disable({
          mouse: !1
        }))
    };
    this.mouse = function(e, l) {
      var b = d.zoom,
        c = d.pixelRatio,
        p = d.contexts.active.ctx,
        g = Math.abs(l.x - l.start.x) * c,
        m = Math.abs(l.y - l.start.y) * c,
        u = Math.min(l.start.x, l.x) * c,
        t = Math.min(l.start.y, l.y) * c,
        c = Math.round(g / 2),
        h = Math.round(m / 2),
        r = c % 42 + u,
        k = h % 42 + t;
      p.save();
      p.canvas.width = p.canvas.width;
      p.canvas.style.display = "block";
      p.shadowOffsetX = 1;
      p.shadowOffsetY = 1;
      p.shadowBlur = 1;
      p.beginPath();
      p.fillStyle = "rgba(0,0,0,0.5)";
      p.fillRect(0, 0, p.canvas.width, p.canvas.height);
      p.clearRect(u + .5, t + .5, g, m);
      p.restore();
      p.save();
      p.rect(u + .5, t + .5, g, m);
      p.clip();
      p.beginPath();
      p.lineWidth =
        1;
      p.strokeStyle = "#333";
      p.strokeRect(u + .5, t + .5, g, m);
      p.strokeStyle = "rgba(0, 0, 0, 0.25)";
      p.shadowColor = "rgba(255, 255, 255, 0.25)";
      for (var v = .5; v < g; v += 42) u + c + .5 !== v + r && (p.moveTo(
        v + r, t), p.lineTo(v + r, t + m));
      for (v = .5; v < m; v += 42) t + h + .5 !== v + k && (p.moveTo(
        u, v + k), p.lineTo(u + g, v + k));
      p.stroke();
      p.beginPath();
      p.strokeStyle = "rgba(0, 0, 0, 0.65)";
      p.shadowColor = "rgba(255, 255, 255, 0.15)";
      p.moveTo(u, t + h + .5);
      p.lineTo(u + g, t + h + .5);
      p.moveTo(u + c + .5, t);
      p.lineTo(u + c + .5, t + m);
      p.stroke();
      p.beginPath();
      p.strokeStyle = "rgba(255, 255, 255, 0.5)";
      p.shadowColor = "rgba(255, 255, 255, 0)";
      p.moveTo(u + c - 7.5, t + h + .5);
      p.lineTo(u + c + 8.5, t + h + .5);
      p.moveTo(u + c + .5, t + h - 7.5);
      p.lineTo(u + c + .5, t + h + 8.5);
      p.stroke();
      p.restore();
      l.pointerEnd && (p.canvas.width = p.canvas.width, c = d.pixelRatio,
        p = a.x + (d.x * c + d.scrollLeft) * b, c = a.y + (d.y * c +
          d.scrollTop) * b, g && m ? (u = (u - p) / b, t = (t - c) /
          b, g /= b, m /= b) : m = g = t = u = void 0, f.download.image(
          u, t, g, m), d.setTool("select"))
    };
    return this
  })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.util.string,
    d = g.vector || (g.vector = {}),
    a = g.util,
    e = {},
    q = {},
    l = 1 / (180 / Math.PI),
    b = ["g", "switch", "a"],
    c = function(b) {
      if (!(this instanceof c)) return new c(b);
      g = c.__self || g;
      a = g.util;
      b = b || {};
      this.convertMetrics = a.getScreenMetrics ? this.convertMetrics ||
        a.toMetrics || (a.toMetrics = a.getScreenMetrics()) : {
          normal_px: 16,
          "xx-small_px": 9,
          "x-small_px": 10,
          small_px: 13,
          medium_px: 16,
          large_px: 18,
          "x-large_px": 24,
          "xx-large_px": 32,
          "%>px": .16,
          "px>pt": .7500187504687618,
          "pt>pc": .08333333333333333,
          "px>in": .010416666666666666,
          "in>ft": .08333333333333333,
          "ft>yd": .3333333333333333,
          "px>mm": .2645833333333333,
          "mm>cm": .1,
          "cm>m": .01,
          "px>ex": .11951429390955158,
          "ex>em": .52295,
          "px>px": 1,
          "px>pc": .06250156253906347,
          "pt>px": 1.3333,
          "pc>px": 15.9996,
          "pc>pt": 12,
          "px>cm": .02645833333333333,
          "mm>m": .001,
          "mm>px": 3.779527559055119,
          "m>mm": 1E3,
          "cm>mm": 10,
          "px>m": 2.645833333333333E-4,
          "cm>px": 37.795275590551185,
          "m>px": 3779.527559055118,
          "m>cm": 100,
          "px>ft": 8.680555555555555E-4,
          "in>yd": .027777777777777776,
          "in>px": 96,
          "yd>in": 36,
          "ft>in": 12,
          "px>yd": 2.8935185185185184E-4,
          "ft>px": 1152,
          "yd>px": 3456,
          "yd>ft": 3,
          "px>em": .0625,
          "ex>px": 8.3672,
          "em>px": 16,
          "em>ex": 1.9122287025528253
        };
      this.type = "svg";
      this.cors = b.cors || !1;
      this.debug = b.debug || !1;
      this.debugSVG = b.debugSVG || !1;
      this.debugBBox = b.debugBBox || !1;
      this.debugHitArea = b.debugHitArea || !1;
      this.placement = b.placement || "bbox";
      this.defaultStroke = this.defaultFill = "#000000";
      this.state = {
        fillStyle: "#000000"
      };
      this.defs = {};
      this.vob = {
        type: "svg"
      };
      this.batch = 0;
      this.skipRender = b.skipRender || !1;
      this.useCache = b.useCache || !1;
      this.uid = 0;
      b.src &&
        (this.src = b.src);
      b.srcs && (this.srcs = b.srcs);
      b.data && (this.data = b.data);
      b.cache && (this.cache = b.cache);
      b.ctx && (this.ctx = b.ctx);
      b.onerror && (this.onerror = b.onerror);
      b.onload && (this.onload = b.onload);
      b.document && (this.document = b.document);
      return b.src || b.document ? this.load() : this
    };
  c.prototype.load = function() {
    if (!this.src && !this.data && !this.document) return this;
    var a = this,
      b = g.util;
    if (this.src || this.data) {
      var d = this.src || this.data;
      if ("string" !== typeof d) {
        if (this.onerror) this.onerror("not string");
        return this
      }
      this.__id =
        g.util.hash(d);
      if (c.detect(d)) return this.fromString(d), this;
      !1 !== this.useCache && "undefined" !== typeof document && (this
        .document = document.getElementById(this.__id))
    } else if (this.document) return this.__id = "#", this.onParseReady(),
      this;
    if (q[d]) {
      if (this.onerror) this.onerror("404")
    } else if (this.document)
      if (e[this.__id] && e[this.__id].loaded || this.srcs && this.srcs[
          d]) this.onParseReady();
      else a.onParseReady();
    else this.srcs && this.srcs[d] ? this.fromString(this.srcs[d]) :
      b.request({
        url: d,
        onerror: function() {
          q[d] = !0;
          if (a.onerror) a.onerror("404")
        },
        onload: function(b) {
          a.fromString(b.target.responseText)
        }
      });
    return this
  };
  c.decodeDataURL = function(a) {
    a = a.split(/;(.+)/);
    a.shift();
    a = a.shift().split(/,(.+)/);
    var b = a.shift();
    a = a.shift();
    return "utf8" === b ? a : atob(f.decode_utf8(a))
  };
  c.prototype.fromString = function(a, b) {
    var d;
    d = new DOMParser;
    0 === a.indexOf("data:image/svg") && (a = c.decodeDataURL(a));
    this.srcXML = a;
    a = a.replace(/\<(\?xml|(\!DOCTYPE[^\>\[]+(\[[^\]]+)?))+[^>]+\>/g,
      "");
    a = a.replace(/(xmlns(:.*|)='&.*;')/g, "");
    this.document =
      d = d.parseFromString("<object>" + a + "</object>", "text/xml").documentElement;
    this.svg = d.querySelector ? d.querySelector("svg") : d;
    this.document.id = this.__id;
    "undefined" === typeof module && this.debugSVG && document.body.appendChild(
      this.document);
    this.onParseReady(b);
    if (this.debugSVG) return this;
    this.document.style && (this.document.style.visibility = "hidden",
      this.document.style.opacity = 0, this.document.style.zIndex = -
      1, this.document.style.width = "1px", this.document.style.height =
      "1px");
    return this
  };
  c.prototype.onParseReady =
    function(b) {
      if (e[this.__id]) {
        if (this.onload) this.onload(e[this.__id]);
        return this
      }
      var c = this,
        d = a.timestamp(),
        f = this.document.contentDocument || this.document;
      this.loaded = !0;
      this.element = f;
      this.parse({
        document: f,
        skipRender: this.skipRender,
        node: {
          childNodes: []
        },
        onload: function(f) {
          if (f) {
            c.vob = f[0];
            c.viewBox = c.getBoundingBox(null);
            c.viewBoxStroke = c.getBoundingBox(null, !0);
            c.debug && console.log("parseTime", a.timestamp() - d);
            c.useCache && (e[c.__id] = c);
            b && b(c);
            if (c.onload) c.onload(c);
            if (!c.debug) try {
              document.body.removeChild(c.document)
            } catch (m) {}
          }
        }
      })
    };
  c.prototype.rxSplitByUppercase = /([A-Z]?[^A-Z]*)/g;
  c.prototype.rxAlphaNumeric = /[^A-Z0-9]+/gi;
  c.prototype.rxNumeric = /[+-]?\d*\.?(e[+-]?\d+)*/g;
  c.prototype.rxTransform =
    /(\w+\(([+-]?\d*\.?(e[+-]?\d+)*[, ]?)+\))+/gi;
  c.prototype.parse = function(a) {
    if (a.node) {
      if (a.document && a.document.childNodes && a.document.childNodes
        .length) var c = a.document.childNodes;
      else if (a.document) {
        var e = a.document.nodeName.toLowerCase();
        if (t[e]) c = [a.document];
        else {
          if (a.onload) a.onload([]);
          return this
        }
      } else {
        if (a.onload) a.onload([]);
        return this
      }
      a.defs && (this.defs = a.defs);
      for (var f = this, m = d.Shape, s = a.node.childNodes, l = a.svg ||
          f.svg, q = a.skipRender || !1, g = a.ctx || this.ctx, u = [],
          C = 0, F = c.length; C < F; C++) {
        var E = c[C],
          e = E.nodeName.toLowerCase();
        "#" !== e[0] && (0 === e.indexOf("svg:") && (e = e.substr(4)),
          0 === e.indexOf("scalable_vector_graphics:") && (e = e.substr(
            25)), 0 === e.indexOf("sketchjs:") && (e = e.substr(9)), E.type =
          e, u.push(E))
      }
      var D = u.length,
        P = -1,
        G = function() {
          if (0 === ++f.batch % 250) setTimeout(G, 0);
          else if (++P === D) {
            if (a.onload) a.onload(s)
          } else {
            var c =
              u[P],
              e = c.type,
              k = "";
            g && g.save();
            if ("none" === w(c).display) return G();
            switch (e) {
              case "svg":
                f.currentNode = k = f.getAttributes(c,
                  "id,x,y,width,height,viewBox,version,source,author,license,keywords,metadata,brush"
                );
                k.matrix = d.Transform.getIdentity();
                k.type = "svg";
                if (void 0 !== d.SVGFont) {
                  e = f.element.getElementsByTagName("font");
                  e.length && (f.vob.type || (f.vob = k), g && (f.debug && (
                        g.canvas.style.border = "1px solid rgba(0,0,0,0.1)", f
                        .document.style.left = k.width + "px"), g.canvas.width =
                      k.width || 1, g.canvas.height = k.height ||
                      1), f.typeface = new d.SVGFont(g), f.document.width = k
                    .width || 1, f.document.height = k.height || 1, l = k);
                  for (var r = 0; r < e.length; r++) f.typeface.load(e[r].cloneNode(!
                    0), function(a) {})
                }
                if (k.viewBox) {
                  var r = k.viewBox,
                    t = r[2] - r[0],
                    C = r[3] - r[1],
                    e = k.width || t,
                    E = k.height || C;
                  g && (g.canvas.width = e, g.canvas.height = E);
                  t = Math.min(e / t, E / C);
                  C = new d.Transform;
                  C.translate(-r[0], -r[1]);
                  C.translate(e / 2, E / 2);
                  C.scale(t, t);
                  C.translate(-e / 2 * 1 / t, -E / 2 * 1 / t);
                  g && C.apply(g);
                  k.matrix = C.matrix;
                  k.transform = C.matrix;
                  k.transform.type = "transform"
                } else g &&
                  (g.canvas.width = k.width, g.canvas.height = k.height);
                s.push(k);
                k.childNodes = [];
                f.parse({
                  skipRender: a.skipRender,
                  document: c,
                  node: k,
                  svg: l,
                  onload: function(a) {
                    k.childNodes = a;
                    g && g.restore();
                    G()
                  }
                });
                return;
              case "title":
                if (!l) break;
                l.title = c.textContent;
                break;
              case "desc":
                if (!l) break;
                l.desc = c.textContent;
                break;
              case "a":
              case "g":
              case "switch":
                if (f.currentNode = k = f.getAttributes(c, "id,labels"), k.parentNode =
                  a.node, k.type = "g", g && g.beginPath(), f.parseTransform(
                    c, "transform"), f.parseClipPath(c, !0), k.style = f.parseStyle(
                    g,
                    c, !q), c.hasChildNodes) {
                  s.push(k);
                  k.childNodes = [];
                  f.parse({
                    skipRender: a.skipRender,
                    document: c,
                    node: k,
                    svg: l,
                    onload: function(a) {
                      k.childNodes = a;
                      g && g.restore();
                      G()
                    }
                  });
                  return
                }
              case "use":
                if (e = f.parseHref(c))
                  if (f.currentNode = k = f.getAttributes(c,
                      "id,xlink:href,labels"), k.parentNode = a.node, k.type =
                    "use", e = e.substr(1), !f.defs[e]) {
                    g && g.beginPath();
                    f.parseTransform(c, "transform");
                    f.parseClipPath(c, !0);
                    e = f.getElementById(e); - 1 !== b.indexOf(e.nodeName) &&
                      (f.parseTransform(e, "transform", !1), f.parseClipPath(e, !
                        0));
                    k.childNodes = [];
                    f.parse({
                      skipRender: a.skipRender,
                      document: e,
                      node: k,
                      svg: l,
                      onload: function(a) {
                        g && g.restore();
                        s.push(k);
                        G()
                      }
                    });
                    return
                  }
                break;
              case "fegaussianblur":
                f.currentNode = k = f.getAttributes(c, "id,stdDeviation");
                k.parentNode = a.node;
                k.type = "GaussianBlur";
                s.push(k);
                break;
              case "image":
                if (e = f.parseHref(c)) {
                  if (!l.cors && "http" === e.substr(0, 4)) break;
                  f.currentNode = k = f.getAttributes(c,
                    "id,x,y,width,height,preserveAspectRatio,labels", !0);
                  k.parentNode = a.node;
                  k.type = "image";
                  k.x = k.x || 0;
                  k.y = k.y || 0;
                  g && g.beginPath();
                  f.parseTransform(c,
                    "transform");
                  f.parseClipPath(c, !0);
                  f.svg.data ? (c = f.svg.data.split("/"), c.pop(), (c = c.join(
                    "/")) && (c += "/")) : c = "";
                  k.image = new Image;
                  k.image.node = k;
                  k.image.onload = function() {
                    var a = this.width,
                      b = this.height,
                      c = this.node.matrix;
                    g && g.setTransform(c.a, c.b, c.c, c.d, c.x, c.y);
                    if (this.node.preserveAspectRatio && "none" !== this.node
                      .preserveAspectRatio) {
                      var d = this.node.preserveAspectRatio.split(" ")[0],
                        c = d.substr(1, 3),
                        d = d.substr(5, 3);
                      a > this.node.width && (b *= this.node.width / a, a =
                        this.node.width);
                      b > this.node.height && (a *=
                        this.node.height / b, b = this.node.height);
                      switch (c) {
                        case "Min":
                          c = 0;
                          break;
                        case "Mid":
                          c = (this.node.width - a) / 2;
                          break;
                        case "Max":
                          c = this.node.width - a
                      }
                      switch (d) {
                        case "Min":
                          d = 0;
                          break;
                        case "Mid":
                          d = (this.node.height - b) / 2;
                          break;
                        case "Max":
                          d = this.node.height - b
                      }
                      g && g.drawImage(this, c, d, a, b);
                      k.x = c;
                      k.y = d;
                      k.width = a;
                      k.height = b
                    } else g && g.drawImage(this, this.node.x, this.node.y,
                      this.node.width, this.node.height);
                    k.bbox = p([k.x, k.y, k.x + k.width, k.y + k.height], k.matrix);
                    g && g.restore();
                    s.push(k);
                    G()
                  };
                  k.image.onerror = function() {
                    g &&
                      g.restore();
                    G()
                  }; - 1 !== e.indexOf("base64") || "http" === e.substr(0, 4) ?
                    (k.href = e, k.image.src = e) : (k.href = c + e, k.image.src =
                      c + e);
                  return
                }
              case "text":
                if (!d.text) {
                  console.log("missing text module");
                  break
                }
                f.currentNode = k = f.getAttributes(c,
                  "id,x,y,dx,dy,labels", !0);
                k.parentNode = a.node;
                k.type = "text";
                k.childNodes = [];
                g && g.beginPath();
                f.parseTransform(c, "transform");
                f.parseClipPath(c, !0);
                k.style = f.parseStyle(g, c, !q);
                for (var t = E = Infinity, F = C = -Infinity, U = k.dx || 0 +
                    (k.x || 0), da = k.dy || 0 + (k.y || 0), c = c.childNodes,
                    r = e = 0, aa = c.length; r <
                  aa; r++) {
                  var R = c[r];
                  if ("[object Text]" === String(R)) {
                    var ea = {},
                      Z = document.createElement("tspan");
                    Z.textContent = R.textContent;
                    R = Z
                  } else ea = f.getAttributes(R, "id,x,y,dx,dy", !0);
                  void 0 !== ea.x && (U = 0);
                  void 0 !== ea.y && (da = 0);
                  U = 0 !== (ea.dy || 0) ? ea.dx || 0 : U + (ea.dx || 0);
                  da += ea.dy || 0;
                  ea.x = U + (ea.x || 0);
                  ea.y = da + (ea.y || 0);
                  ea.parentNode = k;
                  ea.type = "tspan";
                  ea.content = R.textContent.trim();
                  f.currentNode = ea;
                  ea.style = f.parseStyle(g, R, !q);
                  k.childNodes.push(ea);
                  Z = f.fontStyleToString(g, ea.style);
                  R = d.text.measureText(R.textContent,
                    Z);
                  E > ea.x && (E = ea.x);
                  t > ea.y && (t = ea.y - ea.style.fontSize);
                  F < ea.y + R.height && (F = ea.y + R.height - ea.style.fontSize);
                  C < ea.x + R.width && (C = ea.x + R.width);
                  U += R.width;
                  e += R.width
                }
                switch (k.style.textAnchor) {
                  case "middle":
                    E -= e / 2;
                    C -= e / 2;
                    break;
                  case "end":
                    E -= e, C -= e
                }
                k.bbox = p([E, t, C, F], k.matrix);
                s.push(k);
                break;
              case "rect":
                f.currentNode = k = f.getAttributes(c,
                  "id,x,y,rx,ry,width,height,labels");
                k.parentNode = a.node;
                k.type = "rect";
                k.x || (k.x = 0);
                k.y || (k.y = 0);
                if (!k.width || !k.height) break;
                g && g.beginPath();
                f.parseTransform(c, "transform");
                f.parseClipPath(c, !0);
                k.bbox = p([k.x, k.y, k.x + k.width, k.y + k.height], k.matrix);
                void 0 === k.rx && void 0 !== k.ry && (k.rx = k.ry);
                void 0 === k.ry && void 0 !== k.rx && (k.ry = k.rx);
                g && m && (void 0 === k.rx ? m.rect(g, k.x, k.y, k.width, k
                  .height) : m.roundRect(g, k.x, k.y, k.width, k.height, k
                  .rx, k.ry));
                k.style = f.parseStyle(g, c, !q);
                s.push(k);
                break;
              case "circle":
                f.currentNode = k = f.getAttributes(c, "id,cx,cy,r,labels");
                k.parentNode = a.node;
                k.type = "circle";
                g && g.beginPath();
                f.parseTransform(c, "transform");
                f.parseClipPath(c, !0);
                k.bbox = p([k.cx -
                  k.r, k.cy - k.r, k.cx + k.r, k.cy + k.r
                ], k.matrix);
                k.cx = k.cx || 0;
                k.cy = k.cy || 0;
                g && m.ellipse(g, k.cx, k.cy, k.r, k.r);
                k.style = f.parseStyle(g, c, !q);
                s.push(k);
                break;
              case "ellipse":
                f.currentNode = k = f.getAttributes(c,
                  "id,cx,cy,rx,ry,labels");
                k.parentNode = a.node;
                k.type = "ellipse";
                g && g.beginPath();
                f.parseTransform(c, "transform");
                f.parseClipPath(c, !0);
                k.cx = k.cx || 0;
                k.cy = k.cy || 0;
                k.bbox = p([k.cx - k.rx, k.cy - k.ry, k.cx + k.rx, k.cy + k
                  .ry
                ], k.matrix);
                g && m && m.ellipse(g, k.cx, k.cy, k.rx, k.ry);
                k.style = f.parseStyle(g, c, !q);
                s.push(k);
                break;
              case "line":
                f.currentNode =
                  k = f.getAttributes(c, "id,x1,y1,x2,y2,labels");
                k.parentNode = a.node;
                k.type = "line";
                k.x1 = k.x1 || 0;
                k.y1 = k.y1 || 0;
                k.x2 = k.x2 || 0;
                k.y2 = k.y2 || 0;
                g && g.beginPath();
                f.parseTransform(c, "transform");
                f.parseClipPath(c, !0);
                k.bbox = p([k.x1, k.y1, k.x2, k.y2], k.matrix);
                g && m && (g.moveTo(k.x1, k.y1), g.lineTo(k.x2, k.y2));
                k.style = f.parseStyle(g, c, !q);
                s.push(k);
                break;
              case "pencil":
              case "marker":
              case "polyline":
              case "polygon":
                r = f.parsePoints(c, e);
                E = r.points;
                f.currentNode = k = f.getAttributes(c, "id,labels");
                k.parentNode = a.node;
                k.type = e.toLowerCase();
                k.points = E;
                g && g.beginPath();
                f.parseTransform(c, "transform");
                f.parseClipPath(c, !0);
                k.data = r.data;
                k.bbox = new d.BBox(k);
                g && m && m.VOBPath(g, k.data);
                k.style = f.parseStyle(g, c, !q);
                s.push(k);
                break;
              case "path":
                f.currentNode = k = f.getAttributes(c, "id,d,labels"), k.parentNode =
                  a.node, k.type = "path", g && g.beginPath(), f.parseTransform(
                    c, "transform"), f.parseClipPath(c, !0), k.data = d.SVGPath
                  .toVOBPath(k.d), k.bbox = new d.BBox(k), k.element = c, g &&
                  m && m.VOBPath(g, k.data), k.style = f.parseStyle(g, c, !q),
                  s.push(k)
            }
            g && g.restore();
            G()
          }
        };
      G();
      return s
    }
  };
  c.prototype.parseAttribute = function(a, b, c) {
    void 0 === a && (a = c);
    "inherit" === a && (a = this.currentNode, a = a.parentNode && a.parentNode
      .style && a.parentNode.style[b] ? a.parentNode.style[b] : c);
    return a
  };
  c.prototype.parseStyleAttribute = function(a, b, c) {
    a = b[c] || a.getAttribute(c);
    b = "color" === c ? "color" : c + "Style";
    if (a) {
      if (g.color.webcolors[a]) a = "#" + g.color.webcolors[a];
      else if ("none" === a) a = "transparent";
      else if ("currentColor" === a) a = this.state.color;
      else if ("url" === a.substr(0, 3)) {
        a = a.substr(5, a.indexOf(")") -
          5);
        var d = this.ctx,
          e = this.parseDefs(d, a, c);
        e ? d && this.setStyle(d, e, b) : a = ""
      }
      "inherit" === a && (d = this.currentNode, d.parentNode && d.parentNode
        .style && d.parentNode.style[b] ? a = d.parentNode.style[b] :
        "stroke" !== c && (a = "#000000"));
      return a
    }
  };
  c.prototype.parseStyle = function(a, b, c) {
    var e = g.util,
      f = this.currentNode,
      m = this.state = e.clone(f.parentNode.style || this.state),
      p = w(b);
    f.uid = this.uid++;
    a && a.save();
    var l = this.getAttributes(b,
      "opacity,fill-rule,fill-opacity,stroke-width,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-dasharray,stroke-dashoffset,stroke-opacity,font-size,font-family,font-weight,font-style,line-height,text-anchor", !
      0);
    void 0 !== l.opacity ? (m.opacity = l.opacity, a && (a.globalAlpha =
      m.opacity)) : f.parentNode.style ? (m.opacity = f.parentNode.style
      .opacity, a && (a.globalAlpha = m.opacity)) : (m.opacity = 1, a &&
      (a.globalAlpha = 1));
    var q = b.attributes;
    if (q) {
      var t = q.length;
      t && void 0 === f.attributes && (f.attributes = {});
      for (var u = 0; u < t; u++) {
        var F = q[u];
        if ("data-" === F.name.substr(0, 5)) {
          var E = F.name.substr(5).split("-");
          E[1] && (E[1] = E[1][0].toUpperCase() + E[1].substr(1));
          E = E.join("");
          f.attributes[E] = F.value
        }
      }(q = p.filter || b.getAttribute("filter")) ?
      (t = q.substr(5, q.length - 6), !this.defs[t] && (q = this.getElementById(
        t)) && (this.defs[t] = this.getAttributes(q,
        "id,x,y,width,height"), this.defs[t].type = "filter", this.defs[
        t].filter = this.parse({
        document: q,
        node: {
          childNodes: []
        }
      })), m.filter = t) : delete m.filter;
      l.fontSize && (m.fontSize = l.fontSize);
      if (l.fontFamily)
        for (m.fontFamily = l.fontFamily, q = l.fontFamily.split(",");;) {
          t = q.shift();
          if (!t) break;
          if (this.typeface && this.typeface.packages[t]) {
            m.fontRenderer = "SVG";
            break
          }
          if (d.text && d.text.detectFont(t)) {
            m.fontRenderer =
              "native";
            break
          }
        }
      l.fontWeight && (m.fontWeight = l.fontWeight);
      l.fontStyle && (m.fontStyle = l.fontStyle);
      l.lineHeight && (m.lineHeight = l.lineHeight);
      l.textAnchor && (m.textAnchor = l.textAnchor);
      a && (a.font = this.fontStyleToString(a, m));
      if (q = this.parseStyleAttribute(b, p, "color")) m.color = q;
      if (q = this.parseStyleAttribute(b, p, "fill")) l.fillStyle = q;
      else if (q = f.parentNode, q.style) {
        q = e.clone(q.style);
        for (E in l) q[E] = l[E];
        l = q
      } else l.fillStyle = "default";
      m.fillStyle = this.parseAttribute(l.fillStyle, "fillStyle",
        "#000000");
      m.fillRule =
        this.parseAttribute(l.fillRule, "fillRule", "nonzero");
      m.fillOpacity = Math.max(0, this.parseAttribute(l.fillOpacity,
        "fillOpacity", 1));
      c && m && a && ("default" === m.fillStyle ? a.fillStyle = this.defaultFill :
        m.fillStyle && (a.fillStyle = m.fillStyle), a.save(), a.globalAlpha *=
        m.fillOpacity, f.content ? "SVG" === m.fontRenderer ? (this.typeface
          .setFont(a.font), this.typeface.fillText(f.content, f.x, f.y)
        ) : a.fillText(f.content, f.x, f.y) : a.fill(), a.restore());
      if (q = this.parseStyleAttribute(b, p, "stroke")) l.strokeStyle =
        q;
      else if (q = f.parentNode,
        q.style) {
        q = e.clone(q.style);
        for (E in l) q[E] = l[E];
        l = q
      }
      m.strokeWidth = this.parseAttribute(l.strokeWidth, "strokeWidth",
        1);
      m.strokeStyle = this.parseAttribute(l.strokeStyle, "strokeStyle",
        "none");
      m.strokeLinecap = this.parseAttribute(l.strokeLinecap,
        "strokeLinecap", "butt");
      m.strokeLinejoin = this.parseAttribute(l.strokeLinejoin,
        "strokeLinejoin", "miter");
      m.strokeMiterlimit = Math.max(1, this.parseAttribute(l.strokeMiterlimit,
        "strokeMiterlimit", 4));
      m.strokeDasharray = this.parseAttribute(l.strokeDasharray,
        "strokeDasharray",
        "none");
      m.strokeDashoffset = this.parseAttribute(l.strokeDashoffset,
        "strokeDashoffset", 0);
      m.strokeOpacity = Math.max(0, this.parseAttribute(l.strokeOpacity,
        "strokeOpacity", 1));
      c && m && a && (a.lineWidth = 0 === m.strokeWidth ? 1E-10 : m.strokeWidth ||
        1, a.lineCap = m.strokeLinecap || "butt", a.lineJoin = m.strokeLinejoin ||
        "miter", a.miterLimit = m.strokeMiterlimit || a.lineWidth, m.strokeStyle &&
        "none" !== m.strokeStyle && (a.strokeStyle = m.strokeStyle, a.save(),
          a.globalAlpha *= m.strokeOpacity, f.content ? "SVG" === m.fontRenderer ?
          (this.typeface.setFont(a.font),
            this.typeface.strokeText(f.content, f.x, f.y)) : a.strokeText(
            f.content, f.x, f.y) : a.stroke(), a.restore()));
      a && a.restore();
      return m
    }
  };
  c.prototype.parseDefs = function(a, b, c) {
    if (this.defs[b]) return this.defs[b];
    var d = this.getElementById(b);
    if (!d) return {};
    c = d.nodeName.toLowerCase();
    switch (c) {
      case "pattern":
        return this.defs[b] = this.parsePattern(a, d);
      case "lineargradient":
      case "radialgradient":
        return this.defs[b] = this.parseGradient(a, d, c)
    }
  };
  c.prototype.addDef = function(a) {
    this.defs[a.id] = a
  };
  c.prototype.Gradient =
    function(a) {
      a = a || {};
      return {
        gradientUnits: a.gradientUnits || "objectBoundingBox",
        id: a.id || "MyGradient",
        type: a.type || "linearGradient",
        stops: a.stops || [{
          color: "#fff",
          offset: 0
        }, {
          color: "#000",
          offset: 1
        }],
        x1: isFinite(a.x1) ? a.x1 : 0,
        x2: isFinite(a.x2) ? a.x2 : 1,
        y1: isFinite(a.y1) ? a.h1 : 0,
        y2: isFinite(a.y2) ? a.y2 : 0
      }
    };
  c.prototype.Pattern = function(a) {
    return {
      id: a.id || "HelloPattern",
      pattern: a.pattern || CanvasPattern,
      patternUnits: a.patternUnits || "userSpaceOnUse",
      type: a.type || "pattern",
      width: a.width || 100,
      height: a.height || 100
    }
  };
  c.prototype.parseGradient = function(a, b, c) {
    if ("lineargradient" === c) {
      var d = this.getAttributes(b,
        "id,x1,y1,x2,y2,spreadMethod,gradientUnits,gradientTransform");
      d.type = "linearGradient"
    } else d = this.getAttributes(b,
      "id,cx,cy,r,fx,fy,spreadMethod,gradientUnits,gradientTransform"
    ), d.type = "radialGradient", void 0 === d.fx && (d.fx = d.cx, d
      .fy = d.cy);
    void 0 === d.gradientUnits && (d.gradientUnits =
      "objectBoundingBox");
    var e = [],
      f = b.childNodes,
      m = this.parseHref(b);
    if (m) return e = this.parseDefs(a, m.substr(1), c), d.stops = e.stops,
      d;
    var p = w(b);
    b = p.color || b.getAttribute("color") || this.state.color;
    a = 0;
    for (var l in f)
      if (m = f[l], m.nodeName && (c = m.nodeName.toLowerCase(),
          "stop" === c && (p = w(m), c = p["stop-color"] || m.getAttribute(
            "stop-color")))) g.color.webcolors[c] ? c = "#" + g.color.webcolors[
          c] : "none" === c ? c = "transparent" : "currentColor" === c ?
        c = b || "#000000" : "inherit" === c && (c = b || "#000000"), (
          p = p["stop-opacity"] || m.getAttribute("stop-opacity")) &&
        "1" !== p && ("inherit" === p && (p = 1), "#" === c.substr(0, 1) ?
          (c = g.color.space(c.substr(1), "W3>HEX24>RGB"), c.A =
            255 * parseFloat(p)) : "rgba" === c.substr(0, 4) ? (c = g.color
            .space(c, "W3>RGBA"), c.A *= parseFloat(p)) : "rgb" === c.substr(
            0, 3) && (c = g.color.space(c, "W3>RGB"), c.A = 255 *
            parseFloat(p)), c = g.color.space.RGBA_W3(c)), m = m.getAttribute(
          "offset") || "0", p = -1 !== m.indexOf("%") ? 100 : 1, m =
        parseFloat(m) / p, m < a && (m = a), e.push({
          offset: m,
          color: c
        }), a = m;
    d.stops = e;
    return d
  };
  c.prototype.parsePattern = function(a, b) {
    var d = this,
      e = this.getAttributes(b,
        "patternUnits,patternContentUnits,patternTransform,x,y,width,height,preserveAspectRatio,href"
      ),
      f = this.parseHref(b);
    f && (e.href = f);
    e.type = "pattern";
    e.id = b.id;
    var m = new c;
    m.element = b;
    m.parse({
      skipRender: !0,
      document: b,
      node: {
        childNodes: []
      },
      onload: function(b) {
        e.childNodes = b;
        if (b.length) {
          b = d.createCanvas().ctx;
          var c = d.getBoundingBox(e.childNodes, !1, .5);
          b.canvas.width = c[2] - c[0];
          b.canvas.height = c[3] - c[1];
          m.render({
            ctx: b,
            childNodes: e.childNodes,
            viewBox: c,
            placement: "crop"
          });
          a && b.canvas.width && b.canvas.height && (e.pattern = a.createPattern(
            b.canvas, "repeat"))
        }
        e.href && d.parseDefs(a, e.href.substr(1), "pattern")
      }
    });
    return e
  };
  c.prototype.parseHref = function(a) {
    return a.getAttribute("xlink:href") || a.getAttribute("href")
  };
  c.prototype.parseTransform = function(a, b, c) {
    var e = this.ctx,
      f = this.currentNode;
    if (a) {
      a = a.getAttribute(b);
      c = !1 !== c;
      var p = (b = "transform" === b) ? f.matrix ? f.matrix : f.parentNode
        .matrix ? f.matrix = d.Transform.cloneMatrix(f.parentNode.matrix) :
        f.matrix = d.Transform.getIdentity() : d.Transform.getIdentity();
      if (a) {
        var p = new d.Transform(p),
          q = new d.Transform;
        if (a = a.match(this.rxTransform))
          for (var g = 0, t = a.length; g <
            t; g++) {
            var w = a[g].replace(/^\s+|\s+$/, "").split("("),
              u = w[0].replace(/^\s+|\s+$/, ""),
              w = m(w[1]);
            switch (u) {
              case "matrix":
                b && (e && e.transform(w[0], w[1], w[2], w[3], w[4], w[5]),
                  q.transform(w[0], w[1], w[2], w[3], w[4], w[5]));
                p.transform(w[0], w[1], w[2], w[3], w[4], w[5]);
                break;
              case "translate":
                2 === w.length ? (b && (e && e.translate(w[0], w[1]), q.translate(
                  w[0], w[1])), p.translate(w[0], w[1])) : (b && (e && e.translate(
                  w[0], 0), q.translate(w[0], 0)), p.translate(w[0]));
                break;
              case "scale":
                2 === w.length ? (b && (e && e.scale(w[0], w[1]), q.scale(w[
                    0],
                  w[1])), p.scale(w[0], w[1])) : (b && (e && e.scale(w[0],
                  w), q.scale(w[0], w[0])), p.scale(w[0], w[0]));
                break;
              case "rotate":
                u = w[0] * l;
                3 === w.length ? (b && (e && (e.translate(w[1], w[2]), e.rotate(
                    u), e.translate(-w[1], -w[2])), q.translate(w[1], w[2]),
                  q.rotate(u), q.translate(-w[1], -w[2])), p.translate(w[1],
                  w[2]), p.rotate(u), p.translate(-w[1], -w[2])) : (b && (e &&
                  e.rotate(u), q.rotate(u)), p.rotate(u));
                break;
              case "skewX":
                u = w[0] * l;
                b && (e && e.transform(1, 0, Math.tan(u), 1, 0, 0), q.skew(
                  u, 0));
                p.skew(u, 0);
                break;
              case "skewY":
                u = w[0] * l, b && (e &&
                    e.transform(1, Math.tan(u), 0, 1, 0, 0), q.skew(0, u)), p
                  .skew(0, u)
            }
          }
        c && (f.transform = q.matrix, f.transform.type = "transform", f
          .matrix = p.matrix);
        return {
          matrix: p.matrix,
          transform: q.matrix
        }
      }
    }
  };
  c.prototype.parseClipPath = function(a, b) {
    var c = this.ctx,
      d = this.currentNode;
    if (a) {
      var e = a.getAttribute("clip-path");
      if (e) {
        e = e.substr(5, e.length - 6);
        if (this.defs[e]) return b && (d.clipPath = this.defs[e].d), c &&
          (this.renderChildNodes(c, {}, d.clipPath, !0), c.clip(), c.beginPath()),
          this.defs[e];
        var f = this.getElementById(e);
        if (f) return this.defs[e] =
          this.getAttributes(f, "id,x,y,width,height,clipPathUnits"),
          this.defs[e].type = "clipPath", f = this.parse({
            document: f,
            matrix: this.vob.matrix,
            node: {
              childNodes: []
            },
            skipRender: !0
          }), c && (c.clip(), c.beginPath()), f.id = e, this.defs[e].d =
          f, b && (d.clipPath = f), this.defs[e]
      }
    }
  };
  c.prototype.parsePoints = function(a, b) {
    var c = a.getAttribute("points");
    if (c) {
      var d = c.replace(/[\s,]+/g, " ").trim().split(/[, ]/);
      if (!(2 > d.length)) {
        for (var e = [], c = [], f = 0, m = d.length; f < m; f += 2) {
          var p = d[f],
            l = d[f + 1];
          e.push({
            cmd: c.length ? "L" : "M",
            x: parseFloat(p),
            y: parseFloat(l)
          });
          c.push([p, l])
        }
        d = c.length - 1;
        f = c[d];
        isFinite(f[1]) || (e[d].y = f[1] = c[0][1]);
        "Polygon" === b ? (c = "" + c.join(" ") + "", e.push({
          cmd: "Z",
          x: e[0].x,
          y: e[0].y
        })) : c = "" + c.join(" ");
        return {
          points: c,
          data: e
        }
      }
    }
  };
  c.prototype.getAttributes = function(a, b, c) {
    var d = {};
    if (!a || !a.getAttribute) return {};
    var e = w(a),
      f = 0;
    b = b.split(",");
    for (var p = b.length; f < p; f++) {
      var l = b[f],
        q = this.__attributes[l],
        g = !1;
      if (!q)
        if (q = this.__attributesNS[l]) l = this.__namepace + ":" + l,
          g = !0;
        else if (l = l.match(this.rxSplitByUppercase).slice(0, -1).join(
          "-").toLowerCase(),
        q = this.__attributes[l], !q) {
        console.log(l);
        continue
      }
      q = q.format;
      if (c) {
        var t = e[l] || a.getAttribute(l); - 1 !== l.indexOf("-") && (l =
          l.split("-"), l[1] && (l[1] = l[1][0].toUpperCase() + l[1].substr(
            1)), l = l.join(""))
      } else t = a.getAttribute(l) || e[l], "id" !== l || t || (t = a.getAttribute(
        "xml:id"));
      if (t)
        if ("inherit" === t) g = this.currentNode, g.parentNode && g.parentNode
          .style && g.parentNode.style[l] && (d[l] = g.parentNode.style[
            l]);
        else if ("none" === t) d[l] = t;
      else switch (g && (l = l.replace(this.__namepace + ":", "")), q) {
        case "numarray":
          d[l] =
            m(t);
          break;
        case "coordinate":
          d[l] = parseFloat(t);
          (q = t.replace(this.rxNumeric, "")) && "%" !== q && "px" !==
            q && (d[l] *= this.convertMetrics[q + ">px"]);
          Infinity === d[l] && (d[l] = 4294967295); - Infinity === d[l] &&
            (d[l] = -4294967295);
          break;
        case "float":
          d[l] = parseFloat(t);
          Infinity === d[l] && (d[l] = 4294967295); - Infinity === d[l] &&
            (d[l] = -4294967295);
          break;
        case "gradientTransform":
        case "patternTransform":
        case "transform":
          g = this.parseTransform(a, q, !1);
          d[l] = g.matrix;
          break;
        case "string":
          d[l] = t
      }
    }
    return d
  };
  c.prototype.getBoundingBox =
    function(a, b, c) {
      var d = function(a) {
          for (var c, f = a.length, h = 0; h < f; h++)
            if (c = a[h]) {
              if (c.bbox) {
                if (b && c.style && c.style.strokeStyle) var k = c.style.strokeWidth ||
                  0,
                  m = c.bbox.x1 - k,
                  p = c.bbox.x2 + k,
                  l = c.bbox.y1 - k,
                  k = c.bbox.y2 + k;
                else m = c.bbox.x1, p = c.bbox.x2, l = c.bbox.y1, k = c.bbox
                  .y2;
                m < e.x1 && (e.x1 = m);
                l < e.y1 && (e.y1 = l);
                p > e.x2 && (e.x2 = p);
                k > e.y2 && (e.y2 = k)
              }
              c.childNodes && d(c.childNodes)
            }
        },
        e = {
          x1: Infinity,
          y1: Infinity,
          x2: -Infinity,
          y2: -Infinity
        };
      d(a || [this.vob]);
      c && (e.x1 -= c, e.y1 -= c, e.x2 += c, e.y2 += c);
      return [e.x1, e.y1, e.x2, e.y2]
    };
  c.prototype.getElementById =
    function(a) {
      if (this.element.ownerDocument) {
        var b = this.element.ownerDocument.getElementById(a);
        b || (b = u(this.element.ownerDocument, a))
      } else(b = this.element.getElementById(a)) || (b = u(this.element,
        a));
      return b
    };
  c.prototype.getLayerById = function(a) {
    var b = function(c) {
      for (var d = 0; d < c.length; d++) {
        var e = c[d];
        if (e.id === a || e.childNodes && (e = b(e.childNodes))) return
        e
      }
    };
    return b(this.vob.childNodes)
  };
  c.prototype.getLayerBy = function(a, b) {
    var c = function(d) {
      for (var e = 0; e < d.length; e++) {
        var f = d[e];
        if (f[a] === b || f.childNodes &&
          (f = c(f.childNodes))) return f
      }
    };
    return c(this.vob.childNodes)
  };
  c.prototype.fontStyleToString = function(a, b) {
    if (a && b) {
      var c = b.textAnchor || "left";
      "middle" === c && (c = "center");
      a.textAlign = c;
      return (b.fontStyle || "normal") + " " + (b.fontWeight ||
        "normal") + " " + (b.fontSize || "normal") + "px " + (b.fontFamily ||
        "sans-serif")
    }
  };
  c.prototype.createCanvas = function() {
    var a = "undefined" === typeof document ? new Canvas : document.createElement(
      "canvas");
    a.ctx = a.getContext("2d");
    return a
  };
  c.prototype.walk = function(a, b, c) {
    var d = void 0 !==
      c,
      e = function(f) {
        for (var m = 0; m < f.length; m++) {
          var p = f[m];
          if (b) {
            if (d && p[b] === c) return a(p);
            p[b] && a(p)
          } else a(p);
          if (p.childNodes && (p = e(p.childNodes))) return p
        }
      };
    if (this.vob) return e(this.vob.childNodes)
  };
  var p = function(a, b) {
      var c = new d.Transform(b),
        e = c.point2d(a[0], a[1]),
        f = c.point2d(a[0], a[3]),
        m = c.point2d(a[2], a[3]),
        c = c.point2d(a[2], a[1]);
      return {
        x1: Math.min(e.x, f.x, m.x, c.x),
        y1: Math.min(e.y, f.y, m.y, c.y),
        x2: Math.max(e.x, f.x, m.x, c.x),
        y2: Math.max(e.y, f.y, m.y, c.y)
      }
    },
    w = function(a) {
      if (a.__style) return a.__style;
      if (!a.getAttribute) return a.__style = {};
      var b = a.getAttribute("style");
      if (!b) return a.__style = {};
      for (var b = b.split(";"), c = {}, d = 0, e = b.length; d < e; d++) {
        var f = b[d].split(":");
        f[0] && f[1] && (c[f[0].trim()] = f[1].trim())
      }
      return a.__style = c
    },
    m = function(a) {
      var b = [];
      if (!a) return [];
      for ("string" === typeof a && (a = -1 !== a.indexOf(",") ? a.split(
          ",") : a.split(" ")); a.length;) {
        var c = parseFloat(a.shift());
        b.push(c)
      }
      return b
    },
    u = function(a, b) {
      return "undefined" !== typeof XPathResult ? a.evaluate(
          '//*[@xml:id="' + b + '"]', a,
          function() {
            return "http://www.w3.org/XML/1998/namespace"
          },
          XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue : a.getElementById ?
        a.getElementById(b) : null
    },
    t = {
      text: !0,
      rect: !0,
      circle: !0,
      ellipse: !0,
      line: !0,
      polyline: !0,
      polygon: !0,
      path: !0
    };
  d.SVG = c;
  d.SVG.storage = e;
  d.SVG.detect = function(a) {
    return a.startsWith("data:image/svg") || a.startsWith("<?xml") ||
      a.startsWith("<svg")
  }
})(sketch);
if ("undefined" !== typeof module && module.exports) {
  var Canvas = require("canvas"),
    Image = Canvas.Image,
    DOMParser = require("xmldom").DOMParser;
  module.exports = sketch.vector.SVG
}
"undefined" === typeof sketch && (sketch = {});
sketch.vector = sketch.vector || {};
(function() {
  var g = function(f) {
    f.prototype.__dtd = "https://sketch.io/dtd/";
    f.prototype.__namepace = "sketchjs";
    f.prototype.__version = "3.0";
    f.prototype.__attributesNS = {
      labels: {
        param: "labels",
        format: "string",
        value: ""
      },
      keywords: {
        param: "labels",
        format: "string",
        value: ""
      },
      license: {
        param: "license",
        format: "string",
        value: ""
      },
      author: {
        param: "author",
        format: "string",
        value: ""
      },
      source: {
        param: "source",
        format: "string",
        value: ""
      },
      version: {
        param: "version",
        format: "string",
        value: ""
      },
      metadata: {
        param: "metadata",
        format: "string",
        value: ""
      },
      brush: {
        param: "brush",
        format: "string",
        value: ""
      },
      uid: {
        param: "uid",
        format: "int",
        value: ""
      }
    };
    f.prototype.__attributes = {
      id: {
        param: "id",
        format: "string",
        value: ""
      },
      src: {
        param: "src",
        format: "string",
        value: ""
      },
      href: {
        param: "href",
        format: "string",
        value: ""
      },
      "xlink:href": {
        param: "xlink:href",
        format: "string",
        value: ""
      },
      display: {
        param: "display",
        format: "string",
        valid: "inline | block | list-item | run-in | compact | marker | table | inline-table | table-row-group | table-header-group | table-footer-group | table-row | table-column-group | table-column | table-cell | table-caption | none | inherit",
        value: "inline"
      },
      visibility: {
        param: "visibility",
        format: "string",
        valid: "visible | hidden | collapse | inherit",
        value: "visible"
      },
      viewBox: {
        param: "viewBox",
        format: "numarray",
        value: 0
      },
      preserveAspectRatio: {
        param: "preserveAspectRatio",
        format: "string",
        valid: "[defer] <align> [<meetOrSlice>]",
        value: "xMidYMid meet"
      },
      x: {
        param: "x",
        format: "coordinate",
        value: ""
      },
      y: {
        param: "y",
        format: "coordinate",
        value: ""
      },
      width: {
        param: "width",
        format: "coordinate",
        value: ""
      },
      height: {
        param: "height",
        format: "coordinate",
        value: ""
      },
      transform: {
        param: "transform",
        format: "transform",
        value: "matrix(1,0,0,1,0,0)"
      },
      dx: {
        param: "dx",
        format: "coordinate",
        value: ""
      },
      dy: {
        param: "dy",
        format: "coordinate",
        value: ""
      },
      cx: {
        param: "cx",
        format: "coordinate",
        value: ""
      },
      cy: {
        param: "cy",
        format: "coordinate",
        value: ""
      },
      rx: {
        param: "rx",
        format: "float",
        value: ""
      },
      ry: {
        param: "ry",
        format: "float",
        value: ""
      },
      r: {
        param: "r",
        format: "coordinate",
        value: ""
      },
      x1: {
        param: "x1",
        format: "float",
        value: ""
      },
      y1: {
        param: "y1",
        format: "float",
        value: ""
      },
      x2: {
        param: "x2",
        format: "float",
        value: ""
      },
      y2: {
        param: "y2",
        format: "float",
        value: ""
      },
      d: {
        param: "d",
        format: "string",
        value: ""
      },
      points: {
        param: "points",
        format: "string",
        value: ""
      },
      "font-size": {
        param: "font-size",
        format: "float",
        valid: "<absolute-size> | <relative-size> | <length> | <percentage> | inherit",
        value: "medium"
      },
      "font-style": {
        param: "font-style",
        format: "string",
        valid: "normal | italic | oblique | inherit",
        value: "normal"
      },
      "font-family": {
        param: "font-family",
        format: "string",
        valid: "[[ <family-name> | <generic-family> ],]* [<family-name> | <generic-family>] | inherit",
        value: "sans-serif"
      },
      "font-weight": {
        param: "font-weight",
        format: "string",
        valid: "normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit",
        value: "normal"
      },
      "line-height": {
        param: "line-height",
        format: "float",
        valid: "normal | <number> | <length> | <percentage> | inherit",
        value: "normal"
      },
      "text-decoration": {
        param: "text-decoration",
        format: "string",
        valid: "none | [ underline || overline || line-through || blink ] | inherit",
        value: "none"
      },
      "text-anchor": {
        param: "text-anchor",
        format: "string",
        valid: "start | middle | end | inherit",
        value: "start"
      },
      kerning: {
        param: "kerning",
        format: "float",
        valid: "auto | <length> | inherit",
        value: "auto"
      },
      "letter-spacing": {
        param: "letter-spacing",
        format: "float",
        valid: "normal | <length> | inherit",
        value: "normal"
      },
      "word-spacing": {
        param: "word-spacing",
        format: "float",
        valid: "normal | <length> | inherit",
        value: "normal"
      },
      "clip-path": {
        param: "clip-path",
        format: "string",
        value: ""
      },
      clipPathUnits: {
        param: "clipPathUnits",
        format: "string",
        value: "userSpaceOnUse"
      },
      opacity: {
        param: "opacity",
        format: "float",
        value: 1
      },
      fill: {
        param: "fill",
        format: "string",
        value: "black"
      },
      "fill-rule": {
        param: "fill-rule",
        format: "string",
        valid: "nonzero | evenodd | inherit",
        value: "nonzero"
      },
      "fill-opacity": {
        param: "fill-opacity",
        format: "float",
        valid: "<opacity-value> | inherit",
        value: 1
      },
      stroke: {
        param: "stroke",
        format: "string",
        value: "black"
      },
      "stroke-width": {
        param: "stroke-width",
        format: "coordinate",
        valid: "<percentage> | <length> | inherit",
        value: 1
      },
      "stroke-linecap": {
        param: "stroke-linecap",
        format: "string",
        valid: "butt | round | square | inherit",
        value: "butt"
      },
      "stroke-linejoin": {
        param: "stroke-linejoin",
        format: "string",
        valid: "miter | round | bevel | inherit",
        value: "miter"
      },
      "stroke-miterlimit": {
        param: "stroke-miterlimit",
        format: "float",
        valid: "<miterlimit> | inherit",
        value: 4
      },
      "stroke-dasharray": {
        param: "stroke-dasharray",
        format: "numarray",
        valid: "none | <dasharray> | inherit",
        value: "none"
      },
      "stroke-dashoffset": {
        param: "stroke-dashoffset",
        format: "coordinate",
        valid: "<percentage> | <length> | inherit",
        value: 0
      },
      "stroke-opacity": {
        param: "stroke-opacity",
        format: "float",
        valid: "<opacity-value> | inherit",
        value: 1
      },
      stops: {
        param: "stops",
        format: "string",
        value: ""
      },
      gradientUnits: {
        param: "gradientUnits",
        format: "string",
        valid: "userSpace | userSpaceOnUse | objectBoundingBox",
        value: "userSpace"
      },
      gradientTransform: {
        param: "gradientTransform",
        format: "gradientTransform",
        value: "matrix(1,0,0,1,0,0)"
      },
      spreadMethod: {
        param: "spreadMethod",
        format: "string",
        valid: "pad | reflect | repeat",
        value: "pad"
      },
      fx: {
        param: "fx",
        format: "coordinate",
        value: ""
      },
      fy: {
        param: "fy",
        format: "coordinate",
        value: ""
      },
      patternUnits: {
        param: "patternUnits",
        format: "string",
        value: ""
      },
      patternContentUnits: {
        param: "patternContentUnits",
        format: "string",
        value: ""
      },
      patternTransform: {
        param: "patternTransform",
        format: "patternTransform",
        value: "matrix(1,0,0,1,0,0)"
      },
      stdDeviation: {
        param: "stdDeviation",
        format: "float",
        value: 0
      },
      filter: {
        param: "filter",
        format: "string",
        value: ""
      },
      color: {
        param: "color",
        format: "string",
        value: ""
      },
      "color-interpolation-filters": {
        param: "color-interpolation-filters",
        format: "string",
        valid: "auto | sRGB | linearRGB | inherit",
        value: "sRGB"
      }
    }
  };
  "undefined" !== typeof module &&
    module.exports ? module.exports = g : g(sketch.vector.SVG)
})();
"undefined" === typeof sketch && (sketch = {});
sketch.vector = sketch.vector || {};
(function() {
  var g = function(f) {
    f.prototype.clone = function(a, d) {
      (new f).fromString(this.toDataURL(), function(b) {
        d && (b.vob.id = "clone" + Math.round(16777215 * Math.random()));
        a && a(b)
      })
    };
    f.prototype.toImage = function() {
      var a = new Image;
      a.src = this.toDataURL();
      a.width = this.vob.width;
      a.height = this.vob.height;
      return a
    };
    f.prototype.toBlob = function(a) {
      var d = new Blob([this.stringify()], {
        type: "image/svg+xml"
      });
      if (a) a(d);
      else return d
    };
    f.prototype.toDataURL = function() {
      return "data:image/svg+xml;base64," + this.btoa()
    };
    f.prototype.btoa = function() {
      return btoa(this.stringify())
    };
    f.prototype.toString = f.prototype.stringify = function() {
      var d = this,
        f = function(a, e) {
          if (a && a.length)
            for (var h = 0, m = a.length; h < m; h++) {
              var p = a[h];
              if (p) {
                var r = p.type;
                switch (r) {
                  case "circle":
                  case "ellipse":
                  case "image":
                  case "line":
                  case "path":
                  case "polyline":
                  case "polygon":
                  case "rect":
                    k += e + "<" + r;
                    k = b(k, p);
                    k += "></" + r + ">\n";
                    break;
                  case "stamp":
                  case "eraser":
                  case "pencil":
                  case "marker":
                    r = d.__namepace + ":" + r;
                    k += e + "<" + r;
                    k = b(k, p);
                    k += "></" + r + ">\n";
                    break;
                  case "text":
                    k += e +
                      "<text";
                    k = b(k, p);
                    k += ">";
                    if (p.content) k += p.content;
                    else if (p = p.childNodes)
                      for (var r = 0, g = p.length; r < g; r++) k += "<tspan",
                        k = b(k, p[r]), k += ">" + p[r].content + "</tspan>";
                    k += "</text>\n";
                    break;
                  case "a":
                  case "g":
                  case "switch":
                    k += e + "<" + r;
                    k = b(k, p);
                    k += ">\n";
                    f(p.childNodes, e + "\t");
                    k += e + "</" + r + ">\n";
                    break;
                  case "svg":
                    k += '<?xml version="1.0" encoding="utf-8"?>\n';
                    k += "\x3c!-- Generator: sketch.js " + d.__version +
                      " <https://sketch.io/api/> --\x3e\n";
                    k +=
                      '<svg version="1.1" xmlns="http://www.w3.org/2000/svg"';
                    k += ' xmlns:xlink="http://www.w3.org/1999/xlink"';
                    k += " xmlns:" + d.__namepace + '="' + d.__dtd + '"';
                    p.version = p.version || d.__version;
                    k = b(k, p);
                    k += ">\n";
                    c && (k += "<defs>" + c + "</defs>");
                    f(p.childNodes, e + "\t");
                    k += "</svg>";
                    break;
                  case "use":
                    k += e + "<use";
                    k = b(k, p);
                    k += ">\n";
                    k += e + "</use>\n";
                    break;
                  default:
                    f(p.childNodes, e + "\t")
                }
              }
            }
        },
        b = function(c, f) {
          for (var h in f)
            if (void 0 !== f[h]) switch (h) {
              case "href":
                var k = a("xlink:href", f[h], d);
                k && (c += k);
                break;
              case "clipPath":
                (k = a("clip-path", "url(#" + f[h].id + ")", d)) && (c +=
                  k);
                break;
              case "viewBox":
                (k = a(h, f[h].join(" "), d)) && (c += k);
                break;
              case "transform":
              case "gradientTransform":
              case "patternTransform":
                k = f[h];
                if (!k) break;
                (k = a(h, "matrix(" + k.a + "," + k.b + "," + k.c + "," +
                  k.d + "," + k.x + "," + k.y + ")", d)) && (c += k);
                break;
              case "fill":
              case "fillStyle":
                (k = e("fill", f[h], d)) && (c += k);
                break;
              case "stroke":
              case "strokeStyle":
                (k = e("stroke", f[h], d)) && (c += k);
                break;
              case "style":
                c += b("", f.style);
                break;
              case "attributes":
              case "element":
                break;
              default:
                (k = a(h, f[h], d)) && (c += k)
            }
          return c
        },
        c = "",
        p;
      for (p in this.defs) {
        var g = this.defs[p];
        switch (g.type) {
          case "linearGradient":
          case "radialGradient":
            for (var c =
                c + ("<" + g.type), c = b(c, g), c = c + ">\n", m = g.stops,
                u = 0; u < m.length; u++) {
              var t = m[u],
                h = t.color;
              if ("rgba" === h.substr(0, 4)) var h = sketch.color.space(h,
                  "W3>RGBA"),
                r = h.A / 255,
                h = sketch.color.space(h, "RGB>W3"),
                c = c + ('\t<stop offset="' + t.offset +
                  '" style="stop-color:' + h + ";stop-opacity:" + r +
                  ';"/>\n');
              else c += '\t<stop offset="' + t.offset +
                '" style="stop-color:' + t.color + ';"/>\n'
            }
            c += "</" + g.type + ">\n";
            break;
          case "pattern":
            var c = c + "<pattern",
              c = b(c, g),
              c = c + ">\n",
              g = g.childNodes,
              k = "";
            g.length && (f(g, "\t"), c += k);
            c += "</pattern>\n";
            break;
          case "filter":
            c += "<filter";
            c = b(c, g);
            c += ">\n";
            g = g.filter;
            for (u = 0; u < g.length; u++) m = g[u], c += "\t<fe" + m.type,
              c = b(c, m), c += "/>\n";
            c += "</filter>\n";
            break;
          case "clipPath":
            c += "<clipPath";
            c = b(c, g);
            c += ">\n";
            g = g.d;
            for (u = 0; u < g.length; u++) m = g[u], c += "\t<" + m.type,
              c = b(c, m), c += "/>\n";
            c += "</clipPath>\n"
        }
      }
      k = "";
      f([this.vob], "");
      return k
    };
    var d = {
        type: !0,
        childNodes: !0,
        parentNode: !0,
        matrix: !0,
        data: !0,
        bbox: !0
      },
      a = function(a, e, b) {
        if (!d[a]) {
          var c = b.__attributes[a];
          if (!c)
            if (c = b.__attributesNS[a]) a = b.__namepace + ":" + a;
            else if (a =
            a.match(b.rxSplitByUppercase).slice(0, -1).join("-").toLowerCase(),
            c = b.__attributes[a], !c) {
            sketch.feature.debug && console.log(a, e);
            return
          }
          if (c.value !== e) switch (c.format) {
            case "string":
            case "gradientTransform":
            case "patternTransform":
            case "transform":
              if ("string" !== typeof e) break;
              return " " + a + '="' + e + '"';
            case "coordinate":
            case "float":
            case "int":
              if (!isFinite(e)) break;
              return " " + a + '="' + e + '"';
            case "numarray":
              return " " + a + '="' + e + '"';
            default:
              console.log("unhandled", c)
          }
        }
      },
      e = function(a, d, b) {
        var c = b.__attributes[a];
        if (c && c.value !== d) {
          "default" === d && (d = "fill" === a ? b.defaultFill : b.defaultStroke);
          if (b.defs[d]) return " " + a + '="url(#' + d + ')"';
          if (d) return " " + a + '="' + d + '"'
        }
      }
  };
  "undefined" !== typeof module && module.exports ? module.exports =
    g : g(sketch.vector.SVG)
})();
(function(g) {
  var f = g.vector = g.vector || {};
  f.setStyleAt = function(a, d) {
    d = d || {};
    var b = d.style,
      c = b.type;
    f.setStyleFromDropPoint({
      fillMode: d.fillMode,
      dna: b[c],
      layer: d.layer,
      paintType: c,
      point: d.point,
      rect: d.rect
    })
  };
  var d = function(a, d) {
    var b = a.bbox,
      c = b.width / b.viewBox[2],
      e = a.trx2D.clone();
    e.rotate(-b.rotate * g.util.DEG_RAD);
    e.scale(c, c);
    e.matrix.x = 0;
    e.matrix.y = 0;
    d.matrix = e.matrix;
    return a.svg.hitTest(d)
  };
  f.setStyleFromDropPoint = function(a) {
    var e = g.doc,
      b = e.scene,
      c = f.Polygon;
    a = a || {};
    var p = a.dna,
      w = a.layer,
      m =
      a.fillMode,
      u = a.paintType,
      t = a.point;
    a = a.rect;
    if (w)
      if (w.svg) {
        if (a ? (b = b.pointsInObjectFromWorld([{
            x: a.x1,
            y: a.y1
          }, {
            x: a.x2,
            y: a.y1
          }, {
            x: a.x2,
            y: a.y2
          }, {
            x: a.x1,
            y: a.y2
          }], w), t = w.bbox.scale, 0 > t.x * t.y && b.reverse(), c = d(
            w, {
              rect: c.clone(b)
            })) : c = d(w, {
            point: b.pointInObjectFromWorld(t, w)
          }), c.length) {
          if ("group" === m) {
            for (m = c.pop(); m && "g" !== m.type;) m = m.parentNode;
            c = m.childNodes
          } else "single" === m && (m = c.pop(), c = [m]);
          m = w.svg;
          switch (u) {
            case "pattern":
              m.addDef(m.Pattern({
                pattern: g.style.patternCtx[p],
                id: p = "dna" + g.style.hashDNA(p)
              }));
              break;
            case "gradient":
              m.addDef(m.Gradient({
                stops: g.style.getGradientStops({
                  dna: p
                }),
                id: p = "dna" + g.style.hashDNA(p)
              }))
          }
          f.setStyleOnNodes(e, {
            layer: w,
            nodes: c,
            dna: p,
            recursive: !0,
            useRecord: !0,
            useRender: !0
          })
        }
      } else g.style.apply({
        fill: {
          dna: p,
          paintType: u
        },
        selection: b.selection.fromLayers([w]),
        useColorPicker: !0,
        useRecord: !0,
        useRender: !0
      })
  };
  f.setStyleOnNodes = function(d, e) {
    e = e || {};
    for (var b = e.dna || "#000", c = e.layer || d.scene.getOneSelected(),
        f = e.nodes || [], g = e.recursive || !1, m = e.useRecord || !1,
        u = {
          id: c.id,
          fillStyle: b,
          uida: []
        }, t = f.length; t--;) {
      var h = f[t];
      "stroke" !== h.parentNode.id && (h = a(h, "fillStyle", b, g, m),
        m && (u.uida = u.uida.concat(h)), c.dirtyCache = !0, c.dirtyCheck = !
        0, c.hasVectorFill = !0)
    }
    c.dirtyCache && (c.svg.__colormap = void 0);
    m && (d.history && u.uida.length && d.history.store({
      cmd: "VOBNodeList",
      icon: "palette",
      name: "update-clipart-color",
      data: [u]
    }), d.render.clean());
    return !!u.uida.length
  };
  f.resetSVG = function() {
    for (var d = g.doc, e = d.scene.children, b = [], c = 0; c < e.length; c++) {
      var f = e[c];
      f.hasVectorFill && (f.dirtyCache = !0, f.dirtyRender = !0, f.hasVectorFill = !
        1, f.svg.walk(function(c) {
          var d = c.orig_style.fillStyle;
          b.push({
            id: f.id,
            fillStyle: d,
            uida: a(c, "fillStyle", d, !0, !0)
          })
        }, "orig_style"))
    }
    d.history && b.length && d.history.store({
      cmd: "VOBNodeList",
      icon: "remove",
      name: "reset-clipart-color",
      data: b
    })
  };
  var a = function(d, f, b, c, p) {
      if (d) {
        d.current_style = d.current_style || {};
        p ? (d.style[f] = d.current_style[f] || d.style[f], delete d.current_style[
          f]) : d.current_style[f] = d.current_style[f] || d.style[f];
        var g = [],
          m = {};
        m.uid = d.uid;
        m[f] = d.style[f];
        g.push(m);
        d.orig_style =
          d.orig_style || {};
        d.orig_style[f] = d.orig_style[f] || m[f];
        d.style[f] = b;
        var u = c && d.childNodes;
        if (u)
          for (var t = 0; t < u.length; t++) {
            d = u[t];
            var h = d.style;
            e[h[f]] || (d.childNodes ? g = g.concat(a(d, f, b, c, p)) : (m = {},
              m.uid = d.uid, m[f] = h[f], g.push(m), d.orig_style = d.orig_style || {},
              d.orig_style[f] = d.orig_style[f] || m[f], h[f] = b))
          }
        return g
      }
    },
    e = {
      "rgba(0,0,0,0)": !0,
      none: !0
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.vector = g.vector || {};
  g.vector.SVGFont = function(q) {
    g = g.vector.BBox.__self || g;
    var l = g.util,
      b = g.vector;
    b.fonts = b.fonts || {};
    var c = {
        direction: "ltr",
        font: "",
        fontFamily: "sans-serif",
        fontSize: "40px",
        fontStyle: "normal",
        fontWeight: "normal",
        fontVariant: "normal",
        textAlign: "start",
        textBaseline: "alphabetic",
        textDecoration: "none",
        textTransform: "none",
        lineHeight: "1em",
        letterSpacing: 0,
        whiteSpace: "normal",
        ctx: q,
        scaleFactor: 1,
        pkg: {},
        pkgs: {},
        load: function(a, c) {
          var d = function(a) {
            var d, r;
            if (e) r = require("domino").createWindow(a).document;
            else {
              var k = document.createElement("div");
              "string" === typeof a ? k.innerHTML = a : k.appendChild(a);
              r = k
            }
            var g = null,
              q = r.getElementsByTagName("font")[0],
              s = r.getElementsByTagName("font-face")[0];
            a = s.getAttribute("font-family") || a.id;
            var k = (g = s.getElementsByTagName("font-face-name")[0]) ?
              g.getAttribute("name") : a,
              z = s.getAttribute("font-style") || "all",
              w = s.getAttribute("font-variant") || "normal",
              u = s.getAttribute("font-weight") || "all",
              A = s.getAttribute("font-stretch") || "normal",
              C = s.getAttribute("unicode-range") || "U+0-10FFFF",
              F = s.getAttribute("panose-1") || "0 0 0 0 0 0 0 0 0 0",
              E = s.getAttribute("cap-height") || 0,
              D = s.getAttribute("x-height") || 0,
              P = parseFloat(s.getAttribute("units-per-em") || 1E3, 10),
              g = r.getElementsByTagName("missing-glyph")[0],
              G = {
                x: parseFloat(q.getAttribute("horiz-adv-x"), 10),
                y: parseFloat(q.getAttribute("vert-adv-y") || 0, 10) || P
              };
            parseFloat(g ? g.getAttribute("horiz-adv-x") : G.x, 10);
            var q = {
                horiz: {
                  x: parseFloat(q.getAttribute("horiz-origin-x") || 0, 10),
                  y: parseFloat(q.getAttribute("horiz-origin-y") || 0, 10)
                },
                vert: {
                  x: parseFloat(q.getAttribute("vert-origin-x") ||
                    0, 10),
                  y: parseFloat(q.getAttribute("vert-origin-y") || 0, 10)
                }
              },
              J = parseFloat(s.getAttribute("ascent") || P - q.vert.y,
                10),
              N = parseFloat(s.getAttribute("descent") || q.vert.y, 10),
              K = {},
              g = l.arrayToObject(["alphabetic", "ideographic",
                "mathematical", "hanging"
              ]);
            for (d in g)
              if (g = s.getAttribute(d)) K[d] = parseFloat(g, 10);
            s = {};
            r = r.getElementsByTagName("glyph");
            var O;
            for (d in r)
              if ((g = r[d]).getAttribute) {
                var V = g.getAttribute("unicode");
                if (V) {
                  if (V.match(f)) {
                    O = V;
                    if (O.match(f)) {
                      for (var L = {
                            amp: "&",
                            apos: "'",
                            quot: '"',
                            lt: "<",
                            gt: ">"
                          },
                          T = void 0, Q = ""; null !== (T = f.exec(O));) Q =
                        "x" === T[1].charAt(1) ? Q + String.fromCharCode(T[1]
                          .slice(2), 16) : isNaN(parseInt(T[1].slice(1), 10)) ?
                        Q + L(T[1]) : Q + String.fromCharCode(T[1].slice(1));
                      O = Q
                    }
                    O = O.charCodeAt()
                  } else O = V.charCodeAt();
                  var L = parseFloat(g.getAttribute("horiz-adv-x") || G.x,
                      10),
                    T = g.getAttribute("d"),
                    Q = b.SVGPath.toVOBPath(T) || [],
                    U = new b.BBox(Q);
                  s[O] = {
                    unicode: V,
                    name: g.getAttribute("glyph-name"),
                    xadv: L,
                    width: U.x2 - U.x1,
                    height: U.y2 - U.y1,
                    path: T,
                    data: Q
                  }
                }
              }
            d = {
              family: a,
              name: k,
              style: z,
              variant: w,
              weight: u,
              stretch: A,
              range: C,
              panose: F.split(" ").map(parseFloat),
              capHeight: E,
              unitsPerEm: P,
              origin: q,
              advance: G,
              ascent: J,
              descent: N,
              xheight: D,
              baseline: K,
              glyphs: s
            };
            d = p(d);
            c && c(d)
          };
          "string" === typeof a && -1 === a.indexOf("<font") && -1 ===
            a.indexOf("<?xml") ? l.request({
              url: a,
              onload: function(a) {
                d(a.target.responseText)
              },
              onerror: function(a) {},
              onprogress: function(a) {}
            }) : d(a)
        }
      },
      p = function(a) {
        if ("string" === typeof a) {
          var d = a;
          a = b.fonts[d]
        } else d = a.family || "unknown", b.fonts[d] = a;
        c.pkg.family !== d && (a ? c.pkg = c.pkgs[d] = a : d in c.pkgs &&
          (c.pkg = c.pkgs[d]));
        return a
      };
    c.measureText = function(a) {
      if (a) {
        a = "" + a;
        for (var b = c.pkg.glyphs, d = a.length, e = 0, f = c.pkg.advance
            .y, p = 0, k = 0; k < d; k++) {
          var l = b[a.charCodeAt(k)];
          l && (e += l.xadv, p += l.width)
        }
        return {
          width: e * c.scaleFactor,
          height: f * c.scaleFactor,
          actualWidth: p * c.scaleFactor,
          actualHeight: 0 * c.scaleFactor
        }
      }
    };
    c.strokeText = function(a, b, d, e) {
      if (a && isFinite(b + d)) return a = this.drawText(a, b, d, e),
        b = c.ctx, b.stroke(), b.beginPath(), a
    };
    c.fillText = function(a, b, d, e) {
      if (a && isFinite(b + d)) return a = this.drawText(a, b, d, e),
        b = c.ctx, b.fill(),
        b.beginPath(), a
    };
    c.getTextBaseline = function(a) {
      switch (a || this.textBaseline) {
        case "alphabetic":
          return 0;
        case "top":
          return c.pkg.ascent * c.scaleFactor;
        case "hanging":
          return 8 * c.pkg.ascent / 10 * c.scaleFactor;
        case "middle":
        case "absmiddle":
          return ((c.pkg.ascent - c.pkg.descent) / 2 + c.pkg.descent) *
            c.scaleFactor;
        case "ideographic":
          return c.pkg.descent * c.scaleFactor;
        case "bottom":
          return c.pkg.descent * c.scaleFactor;
        default:
          return 0
      }
    };
    c.getTextAlign = function(a, b) {
      switch (a) {
        case "left":
          return 0;
        case "start":
          return "ltr" ===
            c.direction ? 0 : c.measureText(b).width;
        case "end":
          return "ltr" === c.direction ? c.measureText(b).width : 0;
        case "right":
          return c.measureText(b).width;
        case "center":
          return c.measureText(b).width / 2
      }
    };
    c.getScaleFactor = function() {
      var a = c.fontSize;
      if ("number" === typeof a) var b = "px";
      else b = a.toLowerCase(), a = parseFloat(b), b = b.replace(a,
        "");
      isFinite(a) || (a = 1);
      if (l.getScreenMetrics) {
        var d = l.toMetrics || (l.toMetrics = l.getScreenMetrics());
        2 < b.length ? a = d[b + "_px"] : "px" !== b && (a *= d[b +
          "_px"])
      }
      c.scaleFactor = a / c.pkg.unitsPerEm;
      return c.scaleFactor
    };
    c.drawText = function(a, e, f, p) {
      if (a.length) {
        for (var h = 0; h < d.length; h++) a = a.split(d[h]).join(" ");
        c.getScaleFactor();
        var l, h = f || 0;
        l = (e || 0) - this.getTextAlign(this.textAlign, a);
        var h = h + this.getTextBaseline(this.textBaseline),
          k, g, q, s, z;
        "object" === typeof p && (k = p, g = k.minWidth, p = k.maxWidth,
          q = k.maxHeight, z = k.targetWidth, s = k.targetHeight, k =
          k.getData);
        e = c.ctx;
        e.save();
        e.beginPath();
        f = this.measureText(a);
        var y = f.width,
          B = f.height;
        f = k ? new b.Transform : e;
        isFinite(z) ? (f.scale(z / y, 1), l = l * y / z) :
          (isFinite(p) && y > p && (f.scale(p / y, 1), l = l * y / p),
            isFinite(g) && y < g && (f.scale(g / y, 1), l = l * y / g));
        isFinite(s) ? (f.scale(1, s / B), h = h * B / s) : isFinite(q) &&
          B > q && (f.scale(1, q / B), h = h * B / q);
        (l || h) && f.translate(l || 0, h || 0);
        f.scale(c.scaleFactor, -c.scaleFactor);
        p = c.pkg.glyphs;
        q = [];
        "number" === typeof a && (a = String(a));
        s = 0;
        for (z = a.length; s < z; s++) g = p[h = a.charCodeAt(s)], 10 !==
          h && 13 !== h && (g || (g = p["?".charCodeAt()]), g && (g.data ||
            (g.data = b.SVGPath.toVOBPath(g.path) || []), g.data && (h =
              g.data, k && g.path ? q.push({
                d: g.path,
                data: f.flatten(g.data, !0, !1)
              }) : (e.beginPath(), b.Shape.VOBPath(e, h), e.fill()), f.translate(
                g.xadv, 0))));
        e.restore();
        if (k) return {
          childNodes: q
        }
      }
    };
    c.toSVG = function(a, d) {
      new b.SVG({
        ctx: c.ctx,
        src: a,
        onload: function(a) {
          a = a.typeface.pkg.glyphs;
          var c = {},
            e;
          for (e in a) {
            var f = a[e];
            if (f.path) {
              var k = b.SVGPath.toVOBPath(f.path),
                p = new b.BBox(k),
                k = (new b.Transform).translate(0, p.y2).scale(1, -1).flatten(
                  k, !0),
                k = b.SVGPath.fromVOBPath(k),
                l = p.x2 - p.x1,
                s = p.y2 - p.y1,
                p = p.x1;
              c[f.unicode.charCodeAt() + ".svg"] =
                '<?xml version="1.0" encoding="UTF-8"?><svg version="1.1" width="' +
                l + '" height="' + s + '" viewBox="' + p + " 0 " + l +
                " " + s +
                '" xmlns="http://www.w3.org/2000/svg"><path d="' + k +
                '"/></svg>'
            }
          }
          d(c)
        }
      })
    };
    c.setFont = function(b) {
      if (c.font !== b) {
        for (var d = b.trim().split(" "), e = d.length, f = 0, h = 0,
            l = Math.min(3, e); f < l;) {
          var k = d[f];
          if (0 === (h & 1) && -1 !== " normal italic oblique ".indexOf(
              " " + k + " ")) c.fontStyle = d[f++], h |= 1;
          else if (0 === (h & 2) && -1 !== " normal small-caps ".indexOf(
              " " + k + " ")) c.fontVariant = d[f++], h |= 2;
          else if (0 === (h & 4) && (-1 !==
              " normal bold bolder lighter ".indexOf(" " + k + " ") || 3 ===
              k.length &&
              "1" <= k.charAt(0) && "9" >= k.charAt(0) && "0" === k.charAt(
                1) && "0" === k.charAt(2))) c.fontWeight = a[d[f++]], h |=
            4;
          else break
        }
        f < e && (h = d[f], l = h.indexOf("/"), -1 === l ? f++ : (h =
            h.substring(0, l), d[f] = d[f].substring(l)), c.fontSize =
          h);
        f < e && "/" === d[f].substr(0, 1) && ("/" !== d[f] ? c.lineHeight =
          d[f++].substring(1) : ++f < e && (c.lineHeight = d[f++]));
        if (f < e) {
          for (h = d[f++]; f < e;) h += " " + d[f++];
          c.fontFamily = h;
          p(h)
        }
        c.font = b
      }
    };
    b.font && (p(b.font), c.fontFamily = b.font.name);
    return c
  };
  var f = /&(quot|apos|lt|gt|amp|#x[^;]+|#\d+);/g,
    d = ["\t", "\n",
      "\x0B", "\f", "\r"
    ],
    a = {
      normal: 400,
      bold: 700,
      lighter: 300,
      bolder: 500
    },
    e = "undefined" !== typeof module && module.exports;
  e && (module.exports = g.vector.SVGFont)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.vector = g.vector || {},
    d = f.SVGPath = f.SVGPath || {},
    a = {
      m: 2,
      l: 2,
      h: 1,
      v: 1,
      c: 6,
      s: 4,
      q: 4,
      t: 2,
      a: 7,
      z: 0
    };
  d.fromVOBPath = function(a, d) {
    isFinite(d) && f.roundPath && (a = f.roundPath(a, d));
    for (var l = "", b = 0, c, p; b < a.length; b++)
      if (c = a[b]) {
        switch (c.cmd) {
          case "M":
            "M" !== p && (l += "M");
            l += c.x + " " + c.y + " ";
            break;
          case "L":
            "L" !== p && (l += "L");
            l += c.x + " " + c.y + " ";
            break;
          case "C":
            "C" !== p && (l += "C");
            l += c.x1 + " " + c.y1 + " " + c.x2 + " " + c.y2 + " " + c.x +
              " " + c.y + " ";
            break;
          case "Q":
            "Q" !== p && (l += "Q");
            l += c.x1 + " " + c.y1 + " " + c.x + " " + c.y + " ";
            break;
          case "Z":
          case "z":
            l += "Z"
        }
        p = c.cmd
      }
    return l.slice(0, -1)
  };
  d.fromVARPath = function(a) {
    for (var d = "", f = {}, b = 0, c = a.length; b < c; b++)
      if (f = a[b]) switch (f[0]) {
        case "M":
          d += "M" + f[1] + " " + f[2] + " ";
          break;
        case "L":
          d += "L" + f[1] + " " + f[2] + " ";
          break;
        case "C":
          d += "C" + f[1] + " " + f[2] + ", " + f[3] + " " + f[4] +
            ", " + f[5] + " " + f[6] + " ";
          break;
        case "Q":
          d += "Q" + f[1] + " " + f[2] + ", " + f[3] + " " + f[4] + " ";
          break;
        case "Z":
        case "z":
          d += "z"
      }
    return d.slice(0, -1)
  };
  d.fromVOBPolygon = function(a) {
    for (var d = "", f = {}, b = 0, c = a.length; b < c; b++) switch (
      (f = a[b]).cmd) {
      case "Z":
        break;
      default:
      case "M":
      case "L":
        d += f.x + "," + f.y + " "
    }
    return d.slice(0, -1)
  };
  d.toVOBPolygon = function(a) {
    if (a) {
      a = a.match(/[0-9]*/gi);
      for (var d = [], f = 0, b = a.length; f < b; f++) a[f] && d.push(
        parseFloat(a[f]));
      a = [];
      f = 0;
      for (b = d.length; f < b; f += 2) a.push({
        x: d[f],
        y: d[f + 1]
      });
      return a
    }
  };
  d.toVOBPath = function(e) {
    if (e) {
      e = e.replace(/([^e])([+-])/gi, "$1 $2");
      e = e.match(
        /([mlhvcsqtaz])|(([\-0-9]*\.?[0-9]*)|(\.[0-9]+))(e[+-]?[0-9]+)?/gi
      );
      for (var f = [], l = 0, b = e.length; l < b; l++) e[l] && f.push(
        e[l]);
      e = f;
      for (var f = "", c = l = 0, p = 0, g = 0, m = 0, u, t, h =
          "", r = 0, k = []; f = e[l];) {
        var v = a[f.toLowerCase()] + 1;
        if (v) {
          for (var x = 1, b = v, s = []; x < b; x++) s.push(parseFloat(e[
            l + x]));
          r = v;
          l += v
        } else {
          x = 0;
          b = r - 1;
          for (s = []; x < b; x++) s.push(parseFloat(e[l + x]));
          f = "m" === h ? "l" : "M" === h ? "L" : h;
          l += r - 1
        }
        if (f) {
          switch (f) {
            case "M":
              c = s[0];
              p = s[1];
              g = c;
              m = p;
              u = t = null;
              k.push({
                cmd: "M",
                x: c,
                y: p
              });
              break;
            case "m":
              c += s[0];
              p += s[1];
              g = c;
              m = p;
              u = t = null;
              k.push({
                cmd: "M",
                x: c,
                y: p
              });
              break;
            case "L":
              c = s[0];
              p = s[1];
              u = t = null;
              k.push({
                cmd: "L",
                x: c,
                y: p
              });
              break;
            case "l":
              c += s[0];
              p += s[1];
              u = t = null;
              k.push({
                cmd: "L",
                x: c,
                y: p
              });
              break;
            case "H":
              c = s[0];
              u = t = null;
              k.push({
                cmd: "L",
                x: c,
                y: p
              });
              break;
            case "h":
              c += s[0];
              u = t = null;
              k.push({
                cmd: "L",
                x: c,
                y: p
              });
              break;
            case "V":
              p = s[0];
              u = t = null;
              k.push({
                cmd: "L",
                x: c,
                y: p
              });
              break;
            case "v":
              p += s[0];
              u = t = null;
              k.push({
                cmd: "L",
                x: c,
                y: p
              });
              break;
            case "C":
              c = s[4];
              p = s[5];
              u = s[2];
              t = s[3];
              k.push({
                cmd: "C",
                x1: s[0],
                y1: s[1],
                x2: s[2],
                y2: s[3],
                x: s[4],
                y: s[5]
              });
              break;
            case "c":
              0 === s[4] && 0 === s[5] && (s[4] += 1E-4, s[5] += 1E-4);
              k.push({
                cmd: "C",
                x1: s[0] + c,
                y1: s[1] + p,
                x2: s[2] + c,
                y2: s[3] + p,
                x: s[4] + c,
                y: s[5] + p
              });
              u = c + s[2];
              t = p + s[3];
              c += s[4];
              p += s[5];
              break;
            case "S":
              null !== u && h.match(/[sc]/i) || (u = c, t = p);
              k.push({
                cmd: "C",
                x1: c - (u - c),
                y1: p - (t - p),
                x2: s[0],
                y2: s[1],
                x: s[2],
                y: s[3]
              });
              u = s[0];
              t = s[1];
              c = s[2];
              p = s[3];
              break;
            case "s":
              0 === s[2] && 0 === s[3] && (s[2] += 1E-4, s[3] += 1E-4);
              null !== u && h.match(/[sc]/i) || (u = c, t = p);
              k.push({
                cmd: "C",
                x1: c - (u - c),
                y1: p - (t - p),
                x2: c + s[0],
                y2: p + s[1],
                x: c + s[2],
                y: p + s[3]
              });
              u = c + s[0];
              t = p + s[1];
              c += s[2];
              p += s[3];
              break;
            case "Q":
              u = s[0];
              t = s[1];
              c = s[2];
              p = s[3];
              k.push({
                cmd: "Q",
                x1: s[0],
                y1: s[1],
                x: s[2],
                y: s[3]
              });
              break;
            case "q":
              0 === s[2] && 0 === s[3] && (s[2] += 1E-4, s[3] += 1E-4);
              k.push({
                cmd: "Q",
                x1: s[0] + c,
                y1: s[1] + p,
                x: s[2] + c,
                y: s[3] + p
              });
              u = c + s[0];
              t = p + s[1];
              c += s[2];
              p += s[3];
              break;
            case "T":
              null !== u && h.match(/[qt]/i) ? (u = c - (u - c), t = p - (
                t - p)) : (u = c, t = p);
              k.push({
                cmd: "Q",
                x1: u,
                y1: t,
                x: s[0],
                y: s[1]
              });
              c = s[0];
              p = s[1];
              break;
            case "t":
              0 === s[0] && 0 === s[1] && (s[0] += 1E-4, s[1] += 1E-4);
              null !== u && h.match(/[qt]/i) ? (u = c - (u - c), t = p - (
                t - p)) : (u = c, t = p);
              k.push({
                cmd: "Q",
                x1: u,
                y1: t,
                x: c + s[0],
                y: p + s[1]
              });
              c += s[0];
              p += s[1];
              break;
            case "A":
              b = d.arcToBezier(c, p, s[0], s[1], s[2], s[3], s[4], s[5],
                s[6]);
              for (c = 0; c < b.length; c++) k.push(b[c]);
              c = s[5];
              p = s[6];
              break;
            case "a":
              s[5] += c;
              s[6] += p;
              b = d.arcToBezier(c, p, s[0], s[1], s[2], s[3], s[4], s[5],
                s[6]);
              for (c = 0; c < b.length; c++) k.push(b[c]);
              c = s[5];
              p = s[6];
              break;
            case "Z":
              k.push({
                cmd: "Z",
                x: g,
                y: m
              });
              m = g = 0;
              break;
            case "z":
              k.push({
                cmd: "Z",
                x: g,
                y: m
              }), c = g, p = m
          }
          h = f
        }
      }
      return k
    }
  };
  d.arcToBezier = function(a, d, f, b, c, p, g, m, u) {
    var t = c * Math.PI / 180;
    c = Math.sin(t);
    var t = Math.cos(t),
      h = [];
    f = Math.abs(f);
    b = Math.abs(b);
    var r = t * (a - m) * .5 + c * (d - u) * .5,
      k = t * (d - u) * .5 - c * (a - m) * .5,
      r = r * r / (f * f) + k * k / (b * b);
    1 < r && (r = Math.sqrt(r), f *= r, b *= r);
    var r =
      t / f,
      k = c / f,
      v = -c / b,
      x = t / b,
      s = r * a + k * d;
    d = v * a + x * d;
    a = r * m + k * u;
    m = v * m + x * u;
    r = 1 / ((a - s) * (a - s) + (m - d) * (m - d)) - .25;
    0 > r && (r = 0);
    r = Math.sqrt(r);
    g === p && (r = -r);
    p = .5 * (s + a) - r * (m - d);
    u = .5 * (d + m) + r * (a - s);
    s = Math.atan2(d - u, s - p);
    d = Math.atan2(m - u, a - p) - s;
    0 > d && 1 === g ? d += 2 * Math.PI : 0 < d && 0 === g && (d -= 2 *
      Math.PI);
    g = Math.ceil(Math.abs(d / (.5 * Math.PI + .001)));
    for (var z = 0; z < g; z++) {
      m = s + z * d / g;
      var y = s + (z + 1) * d / g,
        r = t * f,
        k = -c * b,
        v = c * f,
        x = t * b;
      a = .5 * (y - m);
      var B = 8 / 3 * Math.sin(.5 * a) * Math.sin(.5 * a) / Math.sin(a);
      a = p + Math.cos(m) - B * Math.sin(m);
      m = u + Math.sin(m) + B * Math.cos(m);
      var A = p + Math.cos(y),
        C = u + Math.sin(y),
        F = A + B * Math.sin(y),
        y = C - B * Math.cos(y);
      h[z] = {
        cmd: "C",
        x1: r * a + k * m,
        y1: v * a + x * m,
        x2: r * F + k * y,
        y2: v * F + x * y,
        x: r * A + k * C,
        y: v * A + x * C
      }
    }
    return h
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    d)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.vector = g.vector || {},
    d = function(a) {
      var d = a.prototype;
      d.render = function(b) {
        g = a.__self || g;
        b = b || {};
        var c = b.ctx || this.ctx,
          d = b.childNodes || (b.childNodes = [this.vob]);
        b.placement || (b.placement = this.placement);
        b.viewBox || (b.viewBox = this.viewBox);
        b.viewBoxStroke || (b.viewBoxStroke = this.viewBoxStroke);
        b.defaultFill && (this.defaultFill = b.defaultFill);
        c.save();
        l.call(this, b);
        this.renderChildNodes(c, b, d);
        c.restore()
      };
      d.hitTest = function(a) {
        var c = a.ctx || (a.ctx = new f.Transform),
          d = a.childNodes ||
          (a.childNodes = [this.vob]);
        a.placement || (a.placement = this.placement);
        a.viewBox || (a.viewBox = this.viewBox);
        a.viewBoxStroke || (a.viewBoxStroke = this.viewBoxStroke);
        this._hitAreas = [];
        this._transform = new f.Transform;
        this._transforms = [];
        c.save();
        l.call(this, a);
        this.hitTestChildNodes(c, a, d);
        c.restore();
        return this._hitAreas
      };
      d.hitTestChildNodes = function(a, c, d) {
        if (d && d.length)
          for (var e = f.Point, m = f.Polygon, l = d.length, g = 0; g <
            l; g++) {
            var h = d[g];
            this.currentNode = h;
            a.save();
            if (h.matrix) {
              var r = h.matrix;
              a.transform(r.a,
                r.b, r.c, r.d, r.x, r.y)
            }
            if (h.bbox) {
              var k = (new f.Transform(a.matrix)).invert(),
                r = f.BBox.toRect(h.bbox);
              if (c.point) k = k.flatten(c.point, !0), e.inPolygon(r, k.x,
                k.y) && (r = h._vertices || (h._vertices = q(h)), e.inPolygonChain(
                r, k.x, k.y) && this._hitAreas.push(h));
              else if (c.rect && (k = k.flatten(c.rect, !0), m.SAT(k, r))) {
                r = h._vertices || (h._vertices = q(h));
                a: {
                  for (var v = f.Polygon, x = 0, s = r.length; x < s; x++)
                    if (v.collision(k, r[x])) {
                      r = !0;
                      break a
                    }
                  r = void 0
                }
                r && this._hitAreas.push(h)
              }
            }
            a.restore();
            h.childNodes && h.childNodes.length && this.hitTestChildNodes(
              a,
              c, h.childNodes)
          }
      };
      var q = function(a) {
          var c = new f.Path;
          c.getData = !0;
          c.dashAdaptive = 1;
          f.Shape.VOBNode(c, a);
          a = (new f.Transform(a.matrix)).flatten(c.data);
          for (var c = [], d, e = 0; e < a.length; e++) {
            var m = a[e];
            "M" === m.cmd ? c.push(d = [m]) : d.push(m)
          }
          return c
        },
        l = function(a) {
          var c = a.calcStroke,
            d = a.ctx,
            e = a.trx || new f.Transform(a.matrix),
            m = a.viewBox,
            l = a.viewBoxStroke,
            c = c ? l : m;
          switch (a.placement) {
            case "crop":
              e.translate(-c[0], -c[1]);
              var e = e.matrix,
                l = c[2] - c[0],
                g = c[3] - c[1],
                m = a.width,
                h = a.height;
              isFinite(m + h) ? (m = Math.min(m /
                    l, h / g), e.a *= m, e.d *= m, e.x += c[0] * (1 - m), e.y +=
                  c[1] * (1 - m), c = (g - l) * m / 2, 0 < c ? e.x += c : e.y -=
                  c, d.canvas.width = a.width, d.canvas.height = a.height) :
                (d.canvas.width = l >> 0, d.canvas.height = g >> 0);
              d.transform(e.a, e.b, e.c, e.d, e.x, e.y);
              this.vob._matrix = e;
              break;
            case "bbox":
              m = e.matrix;
              a = c[2] * m.a;
              m = a - c[0] * m.a;
              e.scale(a / m);
              e.translate(-c[0], -c[1]);
              e.apply(d, !0);
              this.vob._matrix = e.matrix;
              break;
            case "none":
              d.canvas.width = this.ctx.canvas.width, d.canvas.height =
                this.ctx.canvas.height
          }
        };
      d.renderChildNodes = function(a, c, d, e) {
        if (d &&
          d.length) {
          var m = f.Shape;
          this.typeface && (this.typeface.ctx = a);
          for (var l = d.length, g = 0; g < l; g++) {
            var h = d[g],
              r = h.bbox;
            this.currentNode = h;
            a.save();
            a.beginPath();
            if (h.matrix) {
              var k = h.matrix;
              a.transform(k.a, k.b, k.c, k.d, k.x, k.y)
            }
            h.clipPath && h.clipPath.length && (this.renderChildNodes(a,
              c, h.clipPath, !0), a.clip(), a.beginPath());
            m.VOBNode(a, h);
            (k = h.style) && !e && (a.save(), void 0 !== k.opacity && (a.globalAlpha =
                k.opacity), k.fillStyle && (a.save(), this.setStyle(a,
                  this.defs[k.fillStyle] || k, "fillStyle", this.defaultFill
                ), a.globalAlpha *=
                k.fillOpacity, h.content ? (a.font = this.fontStyleToString(
                    a, k), "SVG" === k.fontRenderer ? (this.typeface.setFont(
                    a.font), this.typeface.fillText(h.content, h.x, h.y)) :
                  a.fillText(h.content, h.x, h.y)) : a.fill(), a.restore()),
              a.lineWidth = 0 === k.strokeWidth ? 1E-10 : k.strokeWidth ||
              1, a.lineCap = k.strokeLinecap || "butt", a.lineJoin = k.strokeLinejoin ||
              "miter", a.miterLimit = k.strokeMiterlimit || a.lineWidth,
              k.strokeStyle && "none" !== k.strokeStyle && (a.save(),
                this.setStyle(a, this.defs[k.strokeStyle] || k,
                  "strokeStyle", this.defaultStroke),
                a.globalAlpha *= k.strokeOpacity, h.content ? (a.font =
                  this.fontStyleToString(a, k), "SVG" === k.fontRenderer ?
                  (this.typeface.setFont(a.font), this.typeface.strokeText(
                    h.content, h.x, h.y)) : a.strokeText(h.content, h.x, h.y)
                ) : a.stroke(), a.restore()), a.restore());
            !e && r && this.debugBBox && (k = this.vob._matrix, a.save(),
              a.setTransform(k.a, k.b, k.c, k.d, k.x, k.y), a.strokeStyle =
              "red", a.lineWidth = .25, a.strokeRect(r.x1, r.y1, r.x2 - r
                .x1, r.y2 - r.y1), a.restore());
            a.restore();
            h.childNodes && h.childNodes.length && this.renderChildNodes(
              a,
              c, h.childNodes, e)
          }
        }
      };
      d.setStyle = function(b, c, d, e) {
        g = a.__self || g;
        void 0 !== c.strokeWidth && (b.lineWidth = c.strokeWidth ||
          1E-10);
        void 0 !== c.strokeLinecap && (b.lineCap = c.strokeLinecap);
        void 0 !== c.strokeLinejoin && (b.lineJoin = c.strokeLinejoin);
        void 0 !== c.strokeMiterlimit && (b.miterLimit = c.strokeMiterlimit);
        var m;
        if (c.gradientTransform) {
          var l = c.gradientTransform;
          this.currentNode && this.currentNode.matrix && (m = new f.Transform,
            m.transform(l.a, l.b, l.c, l.d, l.x, l.y), m = m.matrix)
        }
        switch (c.type) {
          case "linearGradient":
            void 0 ===
              c.x1 && (c.x1 = 0);
            void 0 === c.y1 && (c.y1 = 0);
            void 0 === c.x2 && (c.x2 = 0);
            void 0 === c.y2 && (c.y2 = 0);
            if (b) {
              m && b.transform(m.a, m.b, m.c, m.d, m.x, m.y);
              if ("objectBoundingBox" === c.gradientUnits) {
                0 === c.x1 + c.y1 + c.x2 + c.y2 && (c.x2 = 1);
                var q = this.currentNode;
                if (!q.bbox) break;
                e = q.bbox;
                var h = e.x1 + (e.x2 - e.x1) * c.x1,
                  r = e.y1 + (e.y2 - e.y1) * c.y1,
                  k = e.x1 + (e.x2 - e.x1) * c.x2,
                  v = e.y1 + (e.y2 - e.y1) * c.y2;
                m = b.createLinearGradient(h, r, k, v);
                m = (new f.Transform(q.matrix)).invert();
                h = m.point2d(h, r);
                m = m.point2d(k, v);
                m = b.createLinearGradient(h.x, h.y, m.x,
                  m.y)
              } else m = b.createLinearGradient(c.x1, c.y1, c.x2, c.y2);
              e = 0;
              for (l = c.stops.length; e < l; e++) {
                var x = c.stops[e];
                m.addColorStop(x.offset, x.color)
              }
              b[d] = m
            }
            break;
          case "radialGradient":
            void 0 === c.cx && (c.cx = .5);
            void 0 === c.cy && (c.cy = .5);
            void 0 === c.fx && (c.fx = .5);
            void 0 === c.fy && (c.fy = .5);
            void 0 === c.r && (c.r = .5);
            if (b) {
              m && b.transform(m.a, m.b, m.c, m.d, m.x, m.y);
              if ("objectBoundingBox" === c.gradientUnits) {
                q = this.currentNode;
                e = q.bbox;
                if (!q.bbox) break;
                var l = e.x2 - e.x1,
                  x = e.y2 - e.y1,
                  h = e.x1 + l * c.cx,
                  r = e.y1 + x * c.cy,
                  k = e.x1 + l * c.fx,
                  v = e.y1 + x * c.cy,
                  s = Math.max(l, x) * c.r * 1.6;
                m = (new f.Transform(q.matrix)).invert();
                h = m.point2d(h, r);
                m = m.point2d(k, v);
                m = b.createRadialGradient(h.x, h.y, 0, m.x, m.y, s);
                x < l && (l = x / l, b.translate(0, e.y2), b.scale(1, l))
              } else m = b.createRadialGradient(c.cx, c.cy, 0, c.fx, c.fy,
                c.r);
              e = 0;
              for (l = c.stops.length; e < l; e++) x = c.stops[e], m.addColorStop(
                x.offset, x.color);
              b[d] = m
            }
            break;
          case "pattern":
            b.translate(c.x || 0, c.y || 0);
            b[d] = c.pattern || "transparent";
            break;
          default:
            b[d] = "default" === c[d] ? e || this.defaultFill : c[d]
        }
      }
    };
  "undefined" !==
  typeof module && module.exports ? (require("xmldom"), module.exports =
    d) : d(f.SVG)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.SVG = function(d) {
    var a = this,
      e = d.lang;
    a.save = function(a) {
      var e = d.doc,
        b = e.scene,
        c = e.toolkit,
        p = e.canvas2d;
      a = a || {};
      var g, m = a.data || b.children;
      "function" === typeof a ? g = a : "object" === typeof a ? (m =
        a.items || m, g = a.onsave || a.callback || f) : g = f;
      for (var u = [], t = new d.vector.SVG, m = b.clone(m), h = 0; h <
        m.length; h++) {
        var r = m[h],
          k = r.bbox;
        r.style || (r.style = {});
        var v = {
            a: k.scale.x,
            b: 0,
            c: 0,
            d: k.scale.y,
            x: k.x + p.x,
            y: k.y + p.y
          },
          x = {
            id: r.id,
            type: r.type,
            parentNode: t.vob
          },
          s = r.type,
          z = d.detect.brush[s],
          y = d.detect.shape[s];
        if (z || y) {
          var B = r.data;
          z && (x.type = "polyline");
          z && (s = "brush");
          y && (s = "shape");
          switch (s) {
            case "shape":
              s = new d.vector.Shape.record;
              z = Math.max(k.width, k.height) / 2;
              e.toolkit.shape.render(s, k.x, k.y, z, r);
              x.d = s.stringify();
              x.type = "path";
              break;
            case "stamp":
            case "path":
              x.d = d.vector.SVGPath.fromVOBPath(B);
              break;
            case "brush":
            case "polygon":
            case "polyline":
              x.points = d.vector.SVGPath.fromVOBPolygon(B);
              break;
            default:
              console.log(s)
          }
          r.src && (x.src = r.src)
        } else if ("text" === s) x.content = r.content, b.copyAttributes(
          c.text._attributes,
          r, x), v.y += k.height;
        else if ("clipart" === s) {
          s = d.assets.getById(r.src);
          if (!s) continue;
          y = k.viewBox;
          z = y[2] - y[0];
          y = y[3] - y[1];
          x.type = "image";
          x["xlink:href"] = s.toDataURL();
          v.a *= k.width / z;
          v.d *= k.height / y;
          x.width = k.width;
          x.height = k.height
        } else "image" === s ? (x["xlink:href"] = r.src, x.width = k.width,
          x.height = k.height) : console.log(s, r);
        x.bbox = {
          x1: k.x,
          y1: k.y,
          x2: k.x + k.width,
          y2: k.y + k.height
        };
        x.matrix = v;
        x.transform = v;
        k = x;
        v = r.style.opacity;
        s = r.style.fillOpacity;
        z = r.style.fillRule;
        y = "color" === r.fill.type ? r.fill.color : "url(#gradient0)";
        k.style = {
          opacity: v,
          fillOpacity: s,
          fillRule: z,
          fillStyle: y,
          strokeLinecap: r.style.strokeLinecap,
          strokeLinejoin: r.style.strokeLinejoin,
          strokeMiterlimit: r.style.strokeMiterlimit,
          strokeDasharray: r.style.strokeDasharray,
          strokeDashoffset: r.style.strokeDashoffset,
          strokeOpacity: r.style.strokeOpacity,
          strokeStyle: r.style.strokeStyle,
          strokeWidth: r.diameter
        };
        r.labels && (x.labels = r.labels.join(","));
        r.license && (x.license = r.license);
        r.author && (x.author = r.author);
        u.push(x)
      }
      b = e.getBounds();
      t.viewBox = [0, 0, b.width, b.height];
      t.vob.childNodes = u;
      t.vob.metadata = btoa(e.mixinAttributes(e, {}));
      t.stringify ? a.toDataURL ? g(t, t.toDataURL()) : g(t, t.stringify()) :
        console.log("Missing SVGExport module.")
    };
    a.toActions = function(a, e) {
      var b = d.doc,
        c = a.data;
      if (!c.vob) return console.log("error", c);
      c = c.vob.childNodes;
      if (a.mergeIntoScene) var f = [];
      else f = [], b.scene.setData(f);
      var g = function(a) {
        for (var c = 0; c < a.length; c++) {
          var e = a[c];
          e.childNodes && g(e.childNodes);
          if (e.data) {
            for (var h = e.matrix, l = (new CSSMatrix("matrix(" + [h.a,
                    h.b, h.c, h.d, h.x, h.y
                  ].join() +
                  ")")).decompose(), h = l.rotate, k = l.scale, l = l.translate,
                q = new d.vector.bbox(e.data), x = q.x, s = q.y, z = b.scene
                .clone(e.data), y = 0; y < z.length; y++) isFinite(z[y].x) &&
              (z[y].x -= x, z[y].y -= s), isFinite(z[y].x1) && (z[y].x1 -=
                x, z[y].y1 -= s), isFinite(z[y].x2) && (z[y].x2 -= x, z[y]
                .y2 -= s);
            h = {
              zIndex: c,
              composite: "source-over",
              data: z,
              diameter: e.style.strokeWidth,
              opacity: 100 * e.style.fillOpacity,
              fill: {
                type: "color",
                color: e.style.fillStyle
              },
              id: b.scene.createId(e.id),
              type: e.type,
              style: e.style,
              bbox: {
                x: x * k.x + l.x,
                y: s * k.y + l.y,
                width: q.width /
                  k.x,
                height: q.height / k.y,
                units: "objectBoundingBox",
                scale: {
                  x: k.x,
                  y: k.y
                },
                rotate: h.z
              }
            };
            e.labels && (h.labels = e.labels.split(","));
            e.license && (h.license = e.license);
            e.author && (h.author = e.author);
            f.push(h)
          }
        }
      };
      g(c);
      e(f)
    };
    a.add = function(d, e, b) {
      d.mergeIntoScene = !0;
      a.open(d, e, b)
    };
    a.open = function(g, l, b) {
      var c = d.doc;
      if (!g) return console.log("error: missing configuration");
      l = l || g.onload || f;
      b = b || g.onerror || f;
      var p;
      g.data ? p = g.data : "string" === typeof g ? p = g : g.src &&
        (p = g.src);
      0 === p.indexOf("<polygon") && (p =
        '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketchjs="https://sketch.io/dtd/" sketchjs:version="3.0">' +
        p + "</svg>");
      0 === p.indexOf("<svg") && (p =
        '<?xml version="1.0" encoding="UTF-8"?>' + p);
      0 === p.indexOf("<?xml") && (p = "data:image/svg+xml;base64," +
        btoa(p));
      d.loader && d.loader.create("thread", e.translate(
        "reading-format", ".SVG..."), 0);
      var w = g.mergeIntoScene;
      new d.perf;
      return new d.vector.SVG({
        skipRender: !0,
        placement: "none",
        src: p,
        onerror: b,
        onload: function(b) {
          if (b.vob.metadata) {
            var f = JSON.parse(atob(b.vob.metadata));
            c.labels = f.labels;
            c.license = f.license;
            c.author = f.author
          }
          a.toActions({
              data: b,
              mergeIntoScene: w
            },
            function(a) {
              d.loader && d.loader.create("thread", e.translate(
                "rendering") + "...", 50);
              setTimeout(function() {
                if (w) d.io.json.merge(a), d.loader && d.loader.create(
                  "thread", null, 100);
                else {
                  var e = b.vob.viewBox || b.viewBox || [0, 0, window
                    .innerWidth, window.innerHeight
                  ];
                  c.setSize(e[2], e[3]);
                  c.scene.reset();
                  c.scene.setData(a);
                  c.render.preload({
                    chunkBatch: !0,
                    onload: function() {
                      d.loader && d.loader.stop("thread");
                      l && l(a)
                    }
                  })
                }
              }, 1)
            })
        }
      })
    }
  };
  var f = function(d, a) {
    console.log("callback", d, a)
  };
  "undefined" !== typeof module && module.exports &&
    (module.exports = g.module.SVG)
})(sketch);
(function(g) {
  var f = String.fromCharCode(65279);
  g.registerToolkit("text", function(d, a) {
    var e = this,
      g = a.toolkit.area,
      l = a.canvas2d,
      b = a.render,
      c = a.scene,
      p = a.toolkit,
      w = d.util,
      m = d.vector,
      u = d.feature.tools.text;
    e.container = document.createElement("div");
    e.container.className = "sk-textarea-wrap";
    e.id = "text";
    e.units = "objectBoundingBox";
    e._attributes = {
      content: "string",
      fontFamily: "string",
      fontSize: "number",
      fontStyle: "string",
      fontVariant: "string",
      fontWeight: "string",
      letterSpacing: "number",
      lineHeight: "number",
      textAlign: "string",
      textDecoration: "string",
      textShadow: "string",
      textTransform: "string",
      whiteSpace: "string"
    };
    var t = w.clone(e._attributes);
    e.attributes = w.cloneInto(d.attrs.__styledObject, t);
    e.show = g.show;
    e.hide = g.hide;
    e.enable = function() {
      var b = p.select;
      a.tool !== b && b && b.enable({
        cursor: !0,
        searchParam: {
          toolkitId: u.useSearch
        }
      })
    };
    e.disable = function() {
      e.blur();
      var b = p.select;
      a.tool !== b && b && b.disable({
        cursor: !0
      })
    };
    e.loadResource = function(a) {
      var b = a.layer,
        c = a.onerror,
        f = a.onload,
        k = b.fontFamily || "Arial";
      d.style.load(b, function() {
        e.loadFont({
          fontFamily: k,
          onerror: function(a) {
            c && c(b, a)
          },
          onsuccess: function() {
            b.dirtyCheck = !0;
            b.render = h;
            var a = b.bbox;
            a.owidth = a.owidth || a.width;
            a.oheight = a.oheight || a.height;
            f && f(b)
          }
        })
      })
    };
    var h = function(b, d, f) {
      if (!a.__editing || this.id !== a.selection.id) {
        d = c.copyAttributes(e._attributes, this, {
          ctx: b,
          bbox: w.clone(this.bbox),
          composite: this.composite,
          opacity: this.opacity,
          textMetrics: this.__textMetrics
        });
        this.fill && this.fill.enabled && (d.fill = this.fill);
        this.stroke && this.stroke.enabled && (d.stroke = this.stroke);
        var h = d.bbox,
          k = h.width,
          m = h.height,
          p = h.scale;
        h.rotate = 0;
        h.x = 0;
        h.y = 0;
        f ? h.scale = {
          x: 1,
          y: 1
        } : !1 === u.useHTML && (f = p.x, p = p.y, k = 0 > f ? -k *
          f : 0, m = 0 > p ? -m * p : 0, (k || m) && b.translate(k, m)
        );
        this.__textMetrics = e.measureText(d)
      }
    };
    e.loadFont = function(a, b, c) {
      "string" === typeof a && (a = {
        fontFamily: a
      });
      b = b || a.onsuccess;
      c = c || a.onerror;
      var e = a.fontFamily;
      a = function(a) {
        a ? (a = "&ldquo;" + e + "&rdquo; font-family unavailable.",
          c && c(a)) : b && b()
      };
      if (m.text.detectFont(e)) b && b();
      else if (d.lib.text.byName[e]) {
        var f = w.clone(d.lib.text.byName[e]);
        f.filepath = d.lib.text.getSrc(f);
        f.useLoader = !0;
        m.text.attach(f, a)
      } else m.text.attachFromGoogleAPI(e, a)
    };
    var r = function(c, d) {
        if (d = d || a.selection.item) d.dirtyControl = !0, b.clean(
          "toolkit.text." + c)
      },
      k = function() {
        var b = a.selection.item;
        b && (c.updateTransform(b), g.renderControls(b.zIndex, !0))
      },
      v = {
        "Shift Backspace": ["forwardDelete"],
        "Ctrl Shift [": ["justifyLeft"],
        "Ctrl Shift ]": ["justifyRight"],
        "Ctrl Shift \\": ["justifyCenter"],
        "Ctrl Shift Alt \\": ["justifyFull"],
        "Meta Shift S": ["strikeThrough"],
        "Meta B": ["bold"],
        "Meta I": ["italic"],
        "Meta U": ["underline"]
      };
    e.keydown = function(b) {
      if (u.useHTML) {
        setTimeout(function() {
          e.updateObjectSize();
          k()
        }, 0);
        var c = [];
        eventjs.metaKey && c.push("Meta");
        eventjs.ctrlKey && c.push("Ctrl");
        eventjs.shiftKey && c.push("Shift");
        eventjs.altKey && c.push("Alt");
        c.push(eventjs.fromKeyCode[b.keyCode]);
        if (c = v[c.join(" ")]) document.execCommand(c[0], c[1], c[2]),
          eventjs.cancel(b)
      } else eventjs.metaKey && (b = b.keyCode, 86 === b || 88 === b ||
        90 === b ? setTimeout(function() {
          e.updateObjectSize();
          k()
        }, 25) : (c = a.selection.item) && (85 === b ? e.toggleTextStyle(
          c, "textDecoration",
          "underline", "none") : 73 === b ? e.toggleTextStyle(c,
          "fontStyle", "italic", "normal") : 66 === b && e.toggleTextStyle(
          c, "fontWeight", "bold", "normal")))
    };
    e.keypress = function(b) {
      if (u.useHTML) setTimeout(function() {
        e.updateObjectSize();
        k()
      }, 0);
      else {
        var c = a.selection.item;
        if (void 0 !== c && 0 !== b.which && 8 !== b.keyCode && !
          eventjs.metaKey) {
          eventjs.prevent(b);
          var d = e.getContent();
          b = e.cleanText(String.fromCharCode(b.charCode || b.keyCode));
          if ("pre-nowrap" !== c.whiteSpace || 10 !== b.charCodeAt()) {
            var c = e.textarea,
              f = m.text.getRange(c);
            if (f) {
              var h = d.substr(0, f.startOffset),
                d = d.substr(f.endOffset);
              e.setContent(h + b + d);
              (d = e.cleanText(h + b).length) && m.text.setRange(c, d, d);
              e.updateObjectSize();
              k()
            }
          }
        }
      }
    };
    e.keyup = function(a) {
      if (u.useHTML) e.updateObjectSize(), k();
      else if (27 === a.keyCode) c.deselectAll(), k();
      else if (eventjs.metaKey && (88 === a.keyCode || 86 === a.keyCode))
        e.updateObjectSize(), k();
      else if (8 === a.keyCode) {
        var b = e.getContent(),
          d = m.text.getRange();
        d && (a = b.substr(0, d.startOffset), b = b.substr(d.endOffset),
          e.setContent(a + b), (a = a.length) && m.text.setRange(e.textarea,
            a, a), e.updateObjectSize(), k())
      }
    };
    e.createObject = function(b, d) {
      var f = b.layer,
        h = c.copyProperties(e, a.config.text, {});
      c.copyProperties(e, f, h);
      f = c.addObject(h);
      d && d(f)
    };
    e.record = function(f, h, k) {
      d.client.mobile && eventjs.prevent(f);
      if ("eyeDropper" !== d.ui.colorPicker.state) {
        var m = e.style;
        if (void 0 === m.render) h.pause(), e.loadResource({
          layer: e.style,
          onload: function() {
            h.resume();
            e.record(f, h)
          }
        });
        else {
          var p = h.state,
            s = "down" === p,
            t = "up" === p,
            v = !!h.layer;
          a.__interacting = s || "move" === p;
          !0 !== v && s && e.blur();
          var p = a.zoom *
            a.pixelRatio,
            x = a.zoom,
            G = (x - 1) / x,
            J = a.scrollLeft * G,
            N = a.scrollTop * G,
            G = h.start.x / x + J,
            K = h.start.y / x + N;
          h.y = h.y / x + N;
          h.x = h.x / x + J;
          m = m.bbox;
          m.x = Math.min(G, h.x) - 1 * l.x / p;
          m.y = Math.min(K, h.y) - 1 * l.y / p;
          m.width = Math.abs(G - h.x) || 0;
          m.height = Math.abs(K - h.y) || 0;
          m.units = e.units;
          if (s) a.__editing = !0, k = h.layer || {}, t = c.clone(a.config
              .text, !0), s = {
              type: "text",
              fill: new d.style.Fill(t.fill),
              stroke: new d.style.Stroke(t.stroke),
              opacity: t.opacity || 100,
              composite: t.composite,
              render: e.style.render,
              content: k.content || "",
              bbox: w.clone(m)
            },
            c.copyAttributes(e.attributes, t, s), c.copyAttributes(e.attributes,
              k, s), h.layer && c.copyRules(h.layer, s), s = c.addObject(
              s, {
                inGenesis: h.layer ? !1 : !0
              }), c.selectByIdx(s.zIndex), e.setContent(s.content), !1 ===
            v && (v = a.contexts.active, k = v.ctx, w.Canvas.blip(v), c
              .updateTransform(s), b.layer(k, s), g.renderControls(a.selection
                .idx));
          else if (s = a.selection.item) {
            e.dragging = !0;
            p = s.bbox;
            p.x = m.x;
            p.y = m.y;
            p.width = m.width;
            p.height = m.height;
            s.dirtyCheck = !0;
            s.dirtyTransform = !0;
            x = c.getConstraint(s, !1);
            p.x = m.x - (h.x < h.start.x ? x.width -
              p.width : 0);
            p.y = m.y - (h.y < h.start.y ? x.height - p.height : 0);
            p.width = p.owidth = x.width;
            p.height = p.oheight = x.height;
            p.viewBox = [0, 0, p.width, p.height];
            h.layer && w.cloneInto(h.layer, s);
            if (t) {
              e.dragging = !1;
              if (m.width < e.minWidth || m.height < e.minHeight)
                if (u.addByClick) m = a.viewport.width / 3 / a.zoom, x =
                  2 * s.fontSize / a.zoom, s.fontSize /= a.zoom, m = p.width =
                  Math.max(e.defaultWidth, m), x = p.height = Math.max(e.defaultHeight,
                    x), p.viewBox = [0, 0, m, x];
                else {
                  v = a.selection.id;
                  c.deselectAll();
                  c.removeById(v);
                  r("record", s);
                  return
                }!1 === v &&
                (g.inGenesis = a.selection.id, g.show(e.style), e.focus());
              p.owidth = p.width;
              p.oheight = p.height;
              e.updateObjectSize()
            }!1 === v && r("text.record");
            t && k && k(s)
          }
        }
      }
    };
    e.focus = function() {
      e.textarea.focus()
    };
    e.blur = function() {
      e.textarea.blur()
    };
    e.selectAll = function(a) {
      a = a || e.textarea;
      m.text.selectAll(a)
    };
    e.hasSelection = function(a) {
      return m.text.hasSelection(e.textarea)
    };
    e.updateBBox = function() {
      var b = a.selection.item;
      b && (b.content && e.setContent(b.content), e.updateCSSTransform(
        b), r("updateBBox", b))
    };
    var x = String.fromCharCode(32),
      s = String.fromCharCode(160);
    e.cleanText = function(a) {
      return (a || "").split(f).join("").split(s).join(x).split(
        "&nbsp;").join(x).split("\r").join("\n") || f
    };
    e.getContent = function() {
      return u.useHTML ? e.textarea.innerHTML : e.cleanText(e.textarea
        .textContent)
    };
    e.setContent = function(a) {
      u.useHTML ? e.textarea.innerHTML = a : e.textarea.textContent =
        e.cleanText(a)
    };
    e.setForeColor = function(b, c, d) {
      if (u.useHTML) {
        "down" === d && (b.__cache = b.content);
        var f = e.textarea,
          h = e.dummy || (e.dummy = document.createElement("span")),
          k = h.parentNode,
          p, s, l;
        if (a.__editing) {
          var g = window.getSelection().focusNode;
          if (g) {
            !1 === m.text.nodeIsParentOfChild(f, g) && (g = f, m.text.setRange(
              g, 0, 0));
            if (p = m.text.getRange(g)) s = p.startOffset, l = p.endOffset;
            e.selectAll(g.parentNode)
          }
        } else h.contentEditable = !0, h.innerHTML = b.content, k.style
          .display = "block", e.selectAll(h);
        c ? document.execCommand("foreColor", !1, c) : document.execCommand(
          "removeFormat", !1, "foreColor");
        !1 === a.__editing && (b.content = f.innerHTML = h.innerHTML,
          b.dirtyCheck = !0, "up" === d && e.historyUpdateText({
            id: b.id,
            content: b.__cache
          }, {
            id: b.id,
            content: b.content
          }), k.style.display = "none");
        a.__editing && p && m.text.setRange(g, s, l)
      }
    };
    e.historyUpdateText = function(b, c) {
      a.history && b && c && b.content !== c.content && a.history.store({
        cmd: "update",
        icon: "text",
        name: "update-text",
        data: {
          from: [{
            id: c.id,
            content: b.content
          }],
          to: [{
            id: c.id,
            content: c.content
          }]
        }
      })
    };
    e.measureText = function(a) {
      if (u.useHTML) {
        var b = a.bbox,
          c = b.scale,
          d = c.x,
          f = c.y,
          c = eventjs.getDocumentScroll(),
          h = c.pageXOffset,
          k = c.pageYOffset,
          c = e.dummy || (e.dummy = m.text.createMeasureElement()),
          p = c.parentNode,
          s = 0 > d ? b.width * -d : 0,
          l = 0 > f ? b.height * -f : 0;
        c.className = "sk-dummy-text";
        c.style.left = s + h + "px";
        c.style.top = l + k + "px";
        m.text.setFontStyle(a, c);
        c.style.msTransform = c.style.mozTransform = c.style.webkitTransform =
          c.style.transform = "matrix(" + d + ", 0, 0, " + f + ", -" +
          h + ", -" + k + ")";
        c.style.msTransformOrigin = c.style.mozTransformOrigin = c.style
          .webkitTransformOrigin = c.style.transformOrigin = "0 0 0";
        a.fill && a.fill.color && (c.style.color = a.fill.color);
        c.innerHTML = a.content;
        p.style.display = "block";
        c.style.display =
          "inline-block";
        c.style.height = "auto";
        c.style.width = "auto";
        d = c.offsetWidth;
        f = c.offsetHeight;
        c.style.display = "block";
        c.style.height = b.height + "px";
        c.style.width = b.width + "px";
        a.ctx ? html2canvas(c, {
          canvas: a.ctx.canvas,
          onrendered: function(a) {
            p.style.display = "none"
          }
        }) : p.style.display = "none";
        return {
          width: d,
          height: f
        }
      }
      a.content = m.text.entities(a.content);
      return m.text.drawLineBreaks(a)
    };
    e.updateObjectSize = function(b) {
      var d = void 0 === b ? e.getContent() || " " : b.content ||
        " ";
      if (b = b || a.selection.item) {
        var f = b.scale ?
          b.scale.max : 1,
          h = (b.diameter || 0) * f,
          k = b.bbox,
          f = k.scale,
          p = c.copyAttributes(e._attributes, b, {
            bbox: k
          });
        p.content = u.useHTML ? d : m.text.format(d, b);
        if ("pre-nowrap" === b.whiteSpace) {
          var s = k.owidth;
          p.bbox.width = 0;
          var l = e.measureText(p),
            r = m.text.getFontStyle(b),
            r = m.text.measureTextWidth("M", r),
            r = l.width + r;
          s === r ? p.bbox.width = s : (k.x += (s - r) / 2 * f.x, k.viewBox[
            2] = k.owidth = k.width = r, b.dirtyCheck = !0)
        } else l = e.measureText(p);
        u.useHTML ? k.height = l.height : b.__textMetrics = l;
        b.content !== d && (b.dirtyCheck = !0);
        d = k.owidth + h / 2;
        h =
          l.height + h / 2;
        k.height !== h && (b.dirtyCheck = !0, b.dirtyControl = !0, u.autoHeight &&
          (k.height < h && g.inGenesis || !g.inGenesis) && (k.width =
            d, k.height = h, k.viewBox = [0, 0, d, h], e.container.style
            .height = h + "px"));
        e.updateCSS(b)
      }
    };
    e.createTextarea = function() {
      if (e.textarea) {
        var a = e.textarea.style.cssText,
          b = e.getContent();
        e.textarea.parentNode.removeChild(e.textarea);
        e.styleCode.parentNode.removeChild(e.styleCode)
      } else d.ui.tooltip && d.ui.tooltip.add(e.container, ""), b =
        a = "";
      var c = e.styleCode = document.createElement("style");
      c.type = "text/css";
      e.container.appendChild(c);
      c = e.textarea = document.createElement("div");
      c.className = "textarea";
      c.setAttribute("contentEditable", "true");
      c.style.cssText = a + ";" + m.text.CSSWhiteSpace.preWrap;
      e.setContent(b);
      e.container.appendChild(c);
      eventjs.add(c, "drag", eventjs.stop);
      eventjs.add(c, "mouseup", eventjs.stop);
      eventjs.add(c, "keydown", e.keydown);
      eventjs.add(c, "keypress", e.keypress);
      eventjs.add(c, "keyup", e.keyup);
      return c
    };
    e.updateCSS = function(a) {
      e.updateCSSStyle(a);
      e.updateCSSTransform(a)
    };
    e.updateCSSTransform = function(d) {
      if ((d = d || a.selection.item) && d.bbox && (d.id > w.INFINITY_MINUS_8bit ||
          a.selection.items[d.zIndex])) {
        var f = a.pixelRatio,
          h = a.zoom,
          k = a.scrollLeft * (h - 1),
          p = a.scrollTop * (h - 1),
          s = d.bbox,
          g = isFinite(d.opacity) ? d.opacity : 100,
          r = b.cache.padding / 2,
          q = s.rotate,
          t = s.scale.x + 1E-7,
          v = s.scale.y + 1E-7,
          x = function(a) {
            return {
              left: (a.x - (K - K * a.scale.x) / 2) * h + l.x / f - k,
              top: (a.y - (O - O * a.scale.y) / 2) * h + l.y / f - p
            }
          },
          K = s.width,
          O = s.height,
          V = x(s),
          L = Math.max(0, K - 0) * h,
          r = Math.max(0, O - r - 0) * h;
        if (u.clip) var V = c.getBoundingBox(),
          T = a.viewport,
          K = Math.min(L, (T.width - V.x) / t),
          O = Math.min(r, (T.height - V.y) / v),
          V = x(s);
        else K = L, O = r;
        s = e.container.style;
        s.padding = "0px";
        s.opacity = g / 100;
        s.left = V.left + "px";
        s.top = V.top + "px";
        s.width = K + "px";
        s.height = O + "px";
        m.text.setFontStyle(d, e.container, a.zoom);
        e.textarea.style.display = "block" === e.textarea.style.display ?
          "inline-block" : "block";
        e.textarea.style.width = L + "px";
        e.textarea.style.height = r + "px";
        s.transform = s.msTransform = s.OTransform = s.MozTransform =
          s.WebkitTransform = "rotate(" + q + "deg) scale(" + t + "," +
          v + ")";
        s.transformOrigin = s.msTransformOrigin = s.OTransformOrigin =
          s.MozTransformOrigin = s.WebkitTransformOrigin = "50% 50%"
      }
    };
    e.updateCSSStyle = function(b) {
      var c = (b = b || a.selection.item) && b.fill;
      if (c) {
        var f = e.textarea,
          h = c.type,
          k = "webkitFilter" in f.style,
          m = "textShadow" in f.style;
        if ("webkitBackgroundClip" in f.style && k && !u.useHTML) {
          switch (h) {
            case "color":
              var p = "background: " + c.color;
              break;
            case "gradient":
              p = d.style.toCSSGradientBG({
                type: "linear",
                dna: c.gradient,
                angle: -c.angle - 90
              });
              break;
            case "pattern":
              p = "background: url(" +
                d.loc.getMediaUrl(c.pattern) + ")"
          }
          e.styleCode.innerHTML =
            "\t\t\t\t\tdiv.sk-textarea-wrap div.textarea { " + p +
            " }\t\t\t\t";
          f.setAttribute("data-content", f.innerHTML);
          e.container.style.background = b.background && b.background.color ||
            "";
          f.style.textShadow = "none";
          f.style.webkitBackgroundClip = f.style.backgroundClip =
            "text";
          f.style.webkitTextFillColor = f.style.textFillColor =
            "transparent";
          b = d.style.getComposite();
          f.style.webkitBackgroundBlendMode = f.style.backgroundBlendMode =
            b
        } else {
          switch (h) {
            case "color":
              p = c.color;
              break;
            case "gradient":
            case "pattern":
              p = "#000"
          }
          m ? (f.style.color = p, f.style.textShadow = "none") : f.style
            .color = p
        }
      }
    };
    e.toggleTextStyle = function(a, b, c, d) {
      a[b] = a[b] === d ? c : d
    };
    e.style = {
      bbox: {
        x: 200,
        y: 18,
        width: 400,
        height: 470,
        rotate: 0,
        scale: {
          x: 1,
          y: 1
        }
      }
    };
    e.createTextarea();
    e.container.appendChild(e.textarea);
    a.container.appendChild(e.container);
    return p.init(e)
  })
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  function f() {
    if (document.createRange) {
      p.elBreaks = p.createMeasureElement();
      var b = document.createElement("span");
      document.body.appendChild(b);
      p.spaceOffset = 1;
      var c = p;
      var d = g.client;
      d ? (document.body.removeChild(b), b = d.safari || d.chrome ? 0 :
        1) : (d = document.createRange(), b.textContent = "d\u2014d",
        b.className = "wrap", b.style.cssText =
        "display: block; width: 1.6em; " + p.CSSWhiteSpace.preWrap +
        " font: bold 22px arial;", d.setStart(b.firstChild, 0), d.setEnd(
          b.firstChild, b.textContent.length), d = d.getClientRects(),
        document.body.removeChild(b), b = 2 < d.length ? 1 : 0);
      c.useWrapSpace = b;
      p.mOffset = p.useWrapSpace ? 0 : 1;
      return p.getLineBreaks = a
    }
    return document.body.createTextRange ? (p.elBreaks = p.createMeasureElement(),
      p.getLineBreaks = e) : p.getLineBreaks = q
  }

  function d(a) {
    var b = p.elBreaks || (p.elBreaks = p.createMeasureElement());
    b.parentNode.style.display = "block";
    b.style.display = "inline-block";
    b.style.width = a.width ? a.width + "px" : "auto";
    b.style.font = a.font;
    b.style.letterSpacing = (a.letterSpacing || 0) + "px";
    b.style.textAlign = a.textAlign ||
      "left";
    b.style.textDecoration = a.textDecoration || "none";
    b.style.textTransform = a.textTransform || "none";
    return b
  }

  function a(a) {
    var b = d(a);
    b.innerHTML = a.content;
    a = b.firstChild || b;
    var c = document.createRange();
    c.setStart(a, 0);
    c.setEnd(a, 0);
    var e = 1,
      f = a.textContent,
      h = f.length,
      k = [],
      m = 0,
      l = c.getClientRects();
    if (0 === l.length) return {
      data: k,
      lines: k.length,
      height: 1,
      width: 1
    };
    for (var g = l[l.length - 1].top, r = p.spaceOffset, q = p.mOffset,
        t = b.offsetHeight, v = b.offsetWidth, u = [], x = [], w =
        function(a) {
          k.push(a);
          x.push({
            data: u,
            width: da.width
          });
          u = []
        }; f;) {
      if (e > h) {
        w(f);
        break
      }
      c.setStart(a, m);
      c.setEnd(a, e);
      e++;
      var l = c.getClientRects(),
        T = l.length,
        Q = l[T - 1],
        U = g !== Q.top,
        da = U ? l[Math.max(0, T - 3)] || l[Math.max(0, T - 2)] : Q,
        l = e - 1 - m - r + q,
        l = f.substr(0, l).substr(-1),
        T = l.charCodeAt();
      l && 65279 !== T && u.push({
        character: l,
        width: da.width,
        height: da.height,
        left: da.left,
        top: da.top
      });
      U && (e--, l = e - m - r + q, w(f.substr(0, l)), f = f.substr(l),
        m = e - r + q, g = Q.top)
    }
    b.parentNode.style.display = "none";
    return {
      data: k,
      lineMetrics: x,
      lines: k.length,
      height: t,
      width: v
    }
  }

  function e(a) {
    var b = d(a);
    b.innerHTML =
      a.content;
    a = document.body.createTextRange();
    for (var c = 1, e = target.innerText, f = e.length, h = [], k = 0,
        m = b.offsetHeight, p = b.offsetWidth; e;) {
      if (c > f) {
        h.push(e);
        break
      }
      a.moveToElementText(target);
      a.collapse(!0);
      a.moveEnd("character", c);
      a.moveStart("character", k);
      a.select();
      c++;
      1 < a.getClientRects().length && (c--, h.push(e.substr(0, c - k -
        1)), e = e.substr(c - k - 1), k = c - 1)
    }
    b.parentNode.style.display = "none";
    return {
      data: h,
      lines: h.length,
      height: m,
      width: p
    }
  }

  function q(a) {
    for (var b = function(b) {
          e.push(b);
          b = p.measureText(b, a.font);
          l += b.height;
          m = Math.max(b.width, m)
        }, c = function() {
          if (!(p.measureTextWidth(f, a.font) <= a.width)) {
            for (var c = f.length, d = 0, e = 0, h = 0; h < c; h++) {
              var k = f.substr(d, ++e).replace(v, "");
              p.measureTextWidth(k, a.font) > a.width && (k = k.substr(0,
                k.length - 1).replace(v, ""), k.match(r) ? (d = k.split(r),
                k = k[d[0].length], h -= d[1].length, b(d[0] + k)) : k.match(
                " ") ? (d = k.split(" "), h -= d.pop().length, b(d.join(
                " "))) : b(k), d = h, e = 1)
            }
            return f.substr(d, e + 1)
          }
        }, d = a.content.split("\n"), e = [], f = "", h, m = 0, l = 0,
        g = 0; g <= d.length; g++) {
      if (f) {
        b(f);
        if (g === d.length) break;
        f = ""
      }
      for (var q = d[g], t = q.split(k), u = 0, x = 0; x < t.length +
        2; x++) {
        var w = 0 > u - 1 ? "" : q.substr(u - 1, 1),
          V = t[x] || "";
        if (p.measureTextWidth(f + w + V, a.font) <= a.width) f += w +
          V;
        else if (h = c()) f = h + w + V;
        else {
          h = w.match(r) ? w : "";
          if (f || w) p.measureTextWidth(f + h, a.font) > a.width ?
            "\u2013" === h ? V = f + h + V : (b(f), V = h + V) : b(f + h);
          f = V
        }
        u += V.length + 1
      }
    }
    return {
      data: e,
      lines: e.length,
      height: l,
      width: m
    }
  }
  var l = g.util,
    b = g.lang,
    c = g.vector = g.vector || {},
    p = c.text = c.text || {};
  p.entities = function(a) {
    return a.split(String.fromCharCode(160)).join(String.fromCharCode(
      32)).replace(/&/g,
      "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(
      /'/g, "&quot;")
  };
  p.format = function(a, b) {
    if (b.textTransform) switch (b.textTransform) {
      case "uppercase":
        a = a.toUpperCase();
        break;
      case "lowercase":
        a = a.toLowerCase();
        break;
      case "capitalize":
        a = a.replace(/^(.)|\s(.)/g, function(a) {
          return a.toUpperCase()
        })
    }
    if (b.whiteSpace) switch (b.whiteSpace) {
      case "pre-nowrap":
        a = a.split("\n").join(" ");
        break;
      case "pre-line":
      case "nowrap":
      case "normal":
        a = a.replace(/\s{2,}/g, " ")
    }
    return a
  };
  p.textTransform = function(a, b) {
    switch (b) {
      case "uppercase":
        return a.toUpperCase();
      case "lowercase":
        return a.toLowerCase();
      case "capitalize":
        return a.replace(/^(.)|\s(.)/g, function(a) {
          return a.toUpperCase()
        });
      default:
        return a
    }
  };
  p.getMetrics = function(a, b) {
    var c = "ltr";
    window.getComputedStyle && (c = window.getComputedStyle(document.body,
      "").direction);
    var d = p.measureTextHeight(a, b),
      e = p.measureTextWidth(a, b);
    return u({
      marginReset: !0,
      text: a,
      callback: function(a) {
        a.style.cssText = "font: " + b +
          "; white-space: nowrap; display: block;";
        var f = p.image,
          h = f.offsetTop + 1,
          k = h - d;
        a.style.cssText = "font: " +
          b +
          "; white-space: nowrap; line-height: 0; display: block;";
        var m = f.offsetTop + 1;
        a.style.verticalAlign = "sub";
        var l = h - (f.offsetTop - d);
        a.style.verticalAlign = "super";
        return {
          font: b,
          direction: c,
          ascent: h,
          descent: -k,
          height: d,
          width: e,
          textBaseline: {
            alphabetic: 0,
            top: h,
            hanging: 8 * h / 10,
            middle: m,
            ideographic: k,
            bottom: k,
            subScript: l,
            superScript: h - (f.offsetTop - d)
          },
          textAlign: {
            left: 0,
            start: -("ltr" === c) ? 0 : e,
            end: -("ltr" === c) ? e : 0,
            right: -e,
            center: -e / 2
          }
        }
      }
    })
  };
  p.measureText = function(a, b) {
    return {
      width: p.measureTextWidth(a, b),
      height: p.measureTextHeight(a, b)
    }
  };
  p.measureTextWidth = function(a, b) {
    return u({
      text: a + a + a,
      callback: function(a) {
        a.style.cssText = "font: " + b +
          "; white-space: nowrap; display: inline;";
        return a.offsetWidth / 3
      }
    })
  };
  p.measureTextHeight = function(a, b) {
    return u({
      text: "1<br>2<br>3<br>4<br>5<br>6<br>7",
      callback: function(a) {
        a.style.cssText = "font: " + b +
          "; white-space: nowrap; display: inline;";
        return a.offsetHeight / 7 + .5 >> 0
      }
    })
  };
  p.textAlign = function(a, b) {
    var c = window.getComputedStyle(document.body, "").direction,
      d = p.measureTextWidth(a,
        b);
    return u({
      text: a,
      callback: function(a) {
        return {
          left: 0,
          start: -("ltr" === c) ? 0 : d,
          end: -("ltr" === c) ? d : 0,
          right: -d,
          center: -d / 2
        }
      }
    })
  };
  p.textBaseline = function(a, b) {
    var c = p.measureTextHeight(a, b);
    return u({
      marginReset: !0,
      text: a,
      callback: function(a) {
        a.style.cssText = "font: " + b +
          "; white-space: nowrap; display: block;";
        var d = p.image.offsetTop + 1,
          e = d - c;
        a.style.cssText = "font: " + b +
          "; white-space: nowrap; line-height: 0; display: block;";
        return {
          alphabetic: 0,
          top: d,
          hanging: 8 * d / 10,
          middle: p.image.offsetTop + 1,
          ideographic: e,
          bottom: e
        }
      }
    })
  };
  p.textBaselineTop = function(a, b) {
    return u({
      text: a,
      callback: function(a) {
        a.style.cssText = "font: " + b +
          "; white-space: nowrap; display: block;";
        return 1.315 * p.image.offsetTop
      }
    })
  };
  var w, m, u = function(a) {
      var b = document.body;
      p.expand || (p.parent = document.createElement("span"), p.text =
        document.createElement("span"), p.parent.appendChild(p.text), p
        .image = document.createElement("img"), p.image.style.cssText =
        "vertical-align: baseline; background: #000; width: 10px; height: 1px; display: inline;",
        p.image.src =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",
        p.parent.appendChild(p.image), p.expand = document.createElement(
          "div"), p.expand.className = "sk-expand", p.expand.appendChild(
          p.parent), p.container = document.createElement("div"), p.container
        .id = "sk-text-metrics", p.container.appendChild(p.expand), b.insertBefore(
          p.container, b.firstChild));
      if (a)
        if (p.text.innerHTML = a.text, p.expand.style.cssText =
          "display: block;", a.marginReset) {
          a.setup && 1 !== a.setup ||
            (w = b.style.padding, m = b.style.margin, b.style.padding = 0,
              b.style.margin = 0);
          if (!a.setup) var c = a.callback(p.parent);
          a.setup && 2 !== a.setup || (b.style.padding = w, b.style.margin =
            m, p.expand.style.display = "none");
          if (!a.setup) return c
        } else return c = a.callback(p.parent), p.expand.style.display =
          "none", c;
      return p.container
    },
    t = p.getFontStyle = function(a) {
      var b = "";
      a.fontStyle && (b += a.fontStyle + " ");
      a.fontVariant && (b += a.fontVariant + " ");
      a.fontWeight && (b += a.fontWeight + " ");
      a.fontSize && (b += a.fontSize + "px ");
      a.fontFamily &&
        (b += '"' + a.fontFamily + '"');
      return b
    };
  p.setFontStyle = function(a, b, c) {
    c = c || 1;
    var d = (a.fontSize || 30) * c,
      e = a.textMetrics || a.__textMetrics;
    c = e && e.lineHeight ? e.lineHeight * c + "px" : "normal";
    b = b.style;
    b.fontStyle = a.fontStyle || "normal";
    b.fontVariant = a.fontVariant || "normal";
    b.fontWeight = a.fontWeight || "normal";
    b.fontSize = d + "px";
    b.fontFamily = a.fontFamily || "Arial";
    b.letterSpacing = (a.letterSpacing || 0) + "px";
    b.lineHeight = c;
    b.textAlign = a.textAlign || "center";
    b.textDecoration = a.textDecoration || "none";
    b.textTransform = a.textTransform ||
      "none"
  };
  var h = 1 / (180 / Math.PI);
  p.drawLineBreaks = function(a) {
    var b = a.content;
    if (b) {
      var c = t(a),
        e = a.ctx,
        f = a.bbox,
        k = a.textMetrics,
        m = a.fontSize || 0,
        l = a.textAlign || "left",
        r = a.textDecoration || "none",
        q = a.textTransform || "none",
        v = a.letterSpacing || 0,
        u = a.lineHeight || 0,
        x = a.whiteSpace || "normal",
        w = a.useShrinkToFit,
        O = a.useGrowToFit,
        V = !!a.stroke && !!a.stroke.lineWidth && !1 !== a.stroke.enabled,
        L = !!a.fill && !1 !== a.fill.enabled,
        b = p.format(b, a);
      if (!k || !k.data) {
        k = {
          font: c,
          content: b,
          textTransform: q,
          textDecoration: r,
          lineHeight: u,
          letterSpacing: v,
          width: f.width
        };
        if (w || O) {
          c = d(k);
          c.innerHTML = b;
          b = c.offsetHeight;
          if (w && b > f.height) {
            for (; b > f.height && !(1 > m);) m -= 5, c.style.font = t(a),
              b = c.offsetHeight;
            for (; b < f.height && !(500 < m);) m++, c.style.font = t(a),
              b = c.offsetHeight;
            m--
          } else if (O && b < f.height) {
            for (; b < f.height && !(500 < m);) m += 5, c.style.font = t(
              a), b = c.offsetHeight;
            for (; b > f.height && !(1 > m);) m--, c.style.font = t(a), b =
              c.offsetHeight
          }
          c.parentNode.style.display = "none"
        }
        c = k.font = t(a);
        k = p.getLineBreaks(k);
        k.baseline = p.textBaseline("test", c);
        k.lineHeight =
          k.height / k.lines
      }
      w = {
        data: k.data,
        lines: k.lines,
        lineMetrics: k.lineMetrics,
        baseline: k.baseline,
        lineHeight: k.lineHeight,
        height: k.height,
        width: k.width,
        x: f.x,
        y: f.y
      };
      if (e) {
        e.save();
        e.font = c;
        b = f.scale || {
          x: 1,
          y: 1
        };
        O = b.x;
        b = b.y;
        c = f.rotate * h;
        e.translate(f.x, f.y);
        c && e.rotate(c);
        e.translate(-f.x * O, -f.y * b);
        1 === O && 1 === b || e.scale(O, b);
        V && (e.lineWidth = a.stroke.lineWidth, e.strokeStyle = g.style
          .getStyle("stroke", e, 0, 0, f.width, f.height, a));
        L && (e.fillStyle = g.style.getStyle("fill", e, 0, 0, f.width,
          f.height, a));
        a.clip && (e.rect(f.x,
          f.y, f.width, f.height), e.clip());
        a.shadowBlur ? (O = f.y, b = f.x, e.shadowOffsetX = a.shadowOffsetX ||
          0, e.shadowOffsetY = a.shadowOffsetY || 0, e.shadowBlur = a.shadowBlur ||
          0, e.shadowColor = a.shadowColor || "#000") : (a = (a.blur ||
          0) / 2) ? (O = f.y + a, b = f.x - k.width - m, e.shadowOffsetX =
          k.width + m, e.shadowOffsetY = 0, e.shadowBlur = a, e.shadowColor =
          "#000") : (O = f.y, b = f.x);
        a = 0;
        switch (l) {
          case "right":
            a = f.width;
            break;
          case "center":
            a = f.width / 2
        }
        for (var x = "pre-wrap" === x, c = k.baseline, q = c.top, u = k
            .data, m = Math.max(.5, m / 30), k = k.lineMetrics, T = 0, Q =
            u.length; T <
          Q; T++) {
          var U = T * w.lineHeight + O + q,
            da = u[T],
            da = x && -1 === da.indexOf("\n") ? da.trim() : da.replace(
              "\n", "");
          if (0 === v || void 0 === k) {
            var aa = b + a;
            e.textAlign = l;
            L && e.fillText(da, aa, U);
            V && e.strokeText(da, aa, U)
          } else
            for (var aa = b, R = k[T], ea = f.width - R.width, Z = 0; Z <
              da.length; Z++) {
              var ga = R.data[Z];
              L && e.fillText(da[Z], aa + ea / 2, U);
              V && e.strokeText(da[Z], aa + ea / 2, U);
              aa = ga.width
            }
          if (r && "none" !== r && k) switch (R = k[T], r) {
            case "underline":
              e.fillRect(0, U + m + c.top - q, R.width, m);
              break;
            case "overline":
              e.fillRect(0, U + m + c.alphabetic - q, R.width,
                m);
              break;
            case "line-through":
              e.fillRect(0, U + m + 2 * c.middle - q, R.width, m)
          }
        }
        e.restore()
      }
      return w
    }
  };
  var r = /[\u2014\u2013-]/,
    k = /[ \u2014\u2013-]/,
    v = /^\s+|\s+$/g;
  p.CSSWhiteSpace = {};
  p.CSSWhiteSpace.preWrap =
    "white-space: pre-wrap;white-space: -moz-pre-wrap !important;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;";
  p.getLineBreaks = function(a) {
    return f()(a)
  };
  p.createMeasureElement = function() {
    var a = document.createElement("span");
    a.style.cssText = p.CSSWhiteSpace.preWrap;
    a.className = "lineBreakData";
    var b = document.createElement("div");
    b.appendChild(a);
    b.className = "sk-expand";
    p.container = p.container || u();
    p.container.appendChild(b);
    return a
  };
  p.selectAll = function(a) {
    if (a)
      if (document.body.createTextRange) {
        var b = document.body.createTextRange();
        b.moveToElementText(a);
        b.select()
      } else if (window.getSelection) {
      var c = window.getSelection(),
        b = document.createRange();
      b.selectNodeContents(a);
      c.removeAllRanges();
      c.addRange(b)
    }
  };
  p.nodeIsParentOfChild = function(a, b) {
    for (var c = b;;) {
      if (c === a) return !0;
      if (c && c.parentNode) c =
        c.parentNode;
      else return !1
    }
  };
  p.nodeHasFocusedAsChild = function(a) {
    var b = window.getSelection().focusNode;
    return p.nodeIsParentOfChild(a, b)
  };
  p.hasSelection = function(a) {
    return p.nodeHasFocusedAsChild(a) && (a = p.getRange(a)) ? a.endOffset !==
      a.startOffset : !1
  };
  p.getRange = function(a) {
    var b = window.getSelection();
    if (null === b) return a = p.getCursorPos(a), {
      startOffset: a,
      endOffset: a
    };
    if (p.nodeHasFocusedAsChild(a) && (a = b.focusNode)) return 3 ===
      a.nodeType ? b.getRangeAt(0) : a.firstChild ? (a = a.firstChild, {
        startOffset: 0,
        endOffset: a.data &&
          a.data.length || 0
      }) : {
        startOffset: 0,
        endOffset: 0
      }
  };
  p.setRange = function(a, b, c) {
    if (a) {
      for (var d = document.createRange(), e = window.getSelection(); a
        .firstChild;) a = a.firstChild;
      d.setStart(a, b);
      d.setEnd(a, c);
      e.removeAllRanges();
      e.addRange(d)
    }
  };
  p.getCursorPos = function(a) {
    var b = 0;
    if (window.getSelection) {
      var c = window.getSelection();
      c.rangeCount && (c = c.getRangeAt(0), c.commonAncestorContainer.parentNode ===
        a && (b = c.endOffset))
    } else document.selection && document.selection.createRange && (c =
      document.selection.createRange(),
      c.parentElement() === editableDiv && (a = document.createElement(
          "span"), editableDiv.insertBefore(a, editableDiv.firstChild),
        b = c.duplicate(), b.moveToElementText(a), b.setEndPoint(
          "EndToEnd", c), b = b.text.length));
    return b
  };
  p.attach = function(a, b) {
    a.callback = b || a.callback;
    a.family = a.family || a.name;
    var c = new x(a);
    if (!c.detectFont(a)) {
      var d = a.family,
        e = a.filepath,
        f = document.createElement("style");
      f.type = "text/css";
      document.getElementsByTagName("head")[0].appendChild(f);
      d = '@font-face {\t\tfont-family: "' + d + '";\t\tsrc: url("' +
        e + '.eot");\t\tsrc: url("' + e +
        '.eot?#iefix") format("embedded-opentype"),\t\t\turl("' + e +
        '.woff") format("woff"),\t\t\turl("' + e +
        '.ttf") format("truetype"),\t\t\turl("' + e + ".svg#" + d +
        '") format("svg");\t\tfont-weight: normal;\t\tfont-style: normal;\t}';
      f.styleSheet ? f.styleSheet.cssText = d : f.innerHTML = d;
      a.callback && c.waitForFont(a)
    }
  };
  p.attachFromCSS = function(a, b) {
    a.callback = b || a.callback;
    var c = new x(a);
    if (!c.detectFont(a)) {
      var d = a.href.replace(/[^a-zA-Z 0-9]+/g, ""),
        e = document.getElementById(d);
      if (e) return c =
        e.getAttribute("data-error"), a.callback ? a.callback(c) : c;
      a.link = e = document.createElement("link");
      e.href = a.href;
      e.id = d;
      e.setAttribute("rel", "stylesheet");
      e.setAttribute("type", "text/css");
      e.onerror = function() {
        a.callback && a.callback("404");
        e.setAttribute("data-error", "404")
      };
      document.body.appendChild(e);
      c.waitForFont(a)
    }
  };
  p.attachFromGoogleAPI = function(a, b) {
    p.attachFromCSS({
      family: a,
      href: window.location.protocol +
        "//fonts.googleapis.com/css?family=" + a + ":regular",
      callback: function(c) {
        c && (c = "&ldquo;" + a +
          "&rdquo; font-family unavailable.");
        b && b(c)
      }
    })
  };
  var x = function(a) {
      a = a || {};
      var c = this;
      this.metrics = void 0;
      this.test = a.test || "Thequickbrownfox";
      this.font = this.missing = this.arial = this.ctx = this.canvas =
        void 0;
      this.createHash = function(a) {
        c.canvas.width = c.canvas.width;
        c.ctx.font = c.font;
        c.ctx.fillText(a, 0, c.metrics.textBaseline.top);
        return c.ctx.canvas.toDataURL()
      };
      this.getHash = function(a) {
        c.metrics || (c.metrics = p.getMetrics(c.test,
            "16px Arial, Helvetica"), c.canvas = l.Canvas(c.metrics.width,
            c.metrics.height),
          c.font = "16px Arial, Helvetica", c.ctx = c.canvas.ctx, c.ctx
          .font = "16px Arial, Helvetica", c.arial = c.createHash(c.test),
          c.missing = c.createHash(""));
        c.font = '16px "' + a + '", Arial, Helvetica';
        return c.createHash(c.test)
      };
      this.detectFont = function(a) {
        "string" === typeof a && (a = {
          family: a
        });
        if (!a) return console.log("missing params");
        if (!a.family) return console.log("missing family", a);
        var b = a.family,
          d = a.callback,
          e = p.supports[b];
        if ("boolean" === typeof e) return d && d(), e;
        if ("arial" === b.toLowerCase()) return p.supports[a.family] = !
          0, d && d(), !0;
        b = c.getHash(b);
        return b !== c.missing && b !== c.arial ? (p.supports[a.family] = !
          0, d && d(), !0) : !1
      };
      this.waitForFont = function(a) {
        if (!c.detectFont(a)) {
          var d = l.timestamp(),
            e = a.timeout || 2E4,
            f = function(b) {
              p.supports[a.family] = !1;
              a.link && a.link.setAttribute("data-error", "timeout");
              clearInterval(m);
              a.callback("timeout");
              h()
            },
            h = function() {
              g && g.loader && g.loader.stop(a.family)
            },
            k = null,
            m = setInterval(function() {
              var b = c.getHash(a.family),
                g = l.timestamp() - d;
              b !== c.missing && b !== c.arial ? (p.supports[a.family] = !
                  0,
                  clearInterval(m), a.callback(), h()) : g > e ? f() : a.filepath &&
                2E3 < g && !k && (k = l.request({
                  url: a.filepath,
                  onerror: f
                }))
            }, 10);
          g && g.loader && a.useLoader && g.loader.create(a.family, b.translate(
            "loading") + " &ldquo;" + a.family + "&rdquo;")
        }
      }
    },
    c = new x;
  p.supports = {};
  p.detectFont = c.detectFont;
  p.waitForFont = c.waitForFont;
  "undefined" !== typeof module && module.exports && (module.exports =
    g.vector.text)
})(sketch);


(function(sketchObj) {
  sketchObj.registerToolkit("brush", function(f, d) {
    var a = this,
      e = d.canvas2d,
      g = d.contexts,
      l = f.detect,
      b = f.feature,
      c = f.net,
      p = d.render,
      w = d.scene,
      m = f.style,
      u = d.toolkit,
      t = f.util,
      h = f.vector,
      r = h.Cubic,
      k = h.Point;
    this.id = "brush";
    this.units = b.tools.brush.units;
    this.device = {};
    this.batches = {};
    this.position = {};
    this.intervals = {};
    this._attributes = {
      pathSimplify: "number",
      pathSmoothing: "number",
      content: "string",
      finger: "string",
      blur: "number",
      mode: "number",
      curved: "boolean",
      diameter: "number",
      distance: "number",
      increment: "number",
      innerRadius: "number",
      lineWidth: "number",
      outerRadius: "number",
      radius: "number",
      speed: "number",
      spacing: "object",
      spread: "number",
      src: "string",
      tolerance: "number",
      contiguous: "boolean",
      rotate: "object",
      scale: "object",
      translate: "object"
    };
    var v = t.clone(this._attributes);
    this.attributes = t.cloneInto(f.attrs.__styledObject, v);
    this.enabled = !1;
    this.enable = function() {
      var b = a.device.brush;
      b && b.enable && b.enable();
      if (!1 === a.enabled) {
        a.enabled = !0;
        a.ghostEnable();
        var c = a.active.canvas,
          d = b.useMinFingers || 1,
          e = b.useMaxFingers ||
          t.INFINITY;
        a.onDrag = b && b.useMonitor ? eventjs.add(c, "drag", a.onRecord, {
          minFingers: d,
          maxFingers: e,
          monitor: !0
        }) : eventjs.add(c, "drag", a.onRecord, {
          minFingers: d,
          maxFingers: e
        });
        u.select && u.select.enable({
          mouse: !1
        })
      }
    };
    this.disable = function() {
      var b = a.device.brush;
      b && b.disable && b.disable();
      !0 === a.enabled && (a.dragging = !1, a.enabled = !1, a.ghostDisable(),
        a.onDrag.remove(), u.select && u.select.disable({
          mouse: !1
        }))
    };
    this.ghostEnabled = !1;
    this.ghostEnable = function() {
      if (!1 !== a.device.brush.useGhost && eventjs.isMouse && !1 ===
        a.ghostEnabled) {
        a.ghostEnabled = !0;
        var b = a.active.canvas;
        a.onMouseOut = eventjs.add(b, "mouseout", a.onGhostExit);
        a.onMouseMove = eventjs.add(b, "mousemove", a.onGhost)
      }
    };
    this.ghostDisable = function() {
      !0 === a.ghostEnabled && (a.ghostEnabled = !1, a.onMouseOut.remove(),
        a.onMouseMove.remove())
    };
    this.loadResource = function(b) {
      var c = b.layer,
        e = b.onerror,
        h = b.onload,
        k = c.type;
      (b = f.module.toolkit["brush." + k]) ? new b(f, d, c, function(b, d) {
        if (d) e && e(c, "&ldquo;" + name + "&rdquo; " + b.type +
          " unavailable.");
        else {
          b.type = k;
          w.copyProperties(a,
            c, b);
          var f = a.batches[c.finger] || {};
          b.toolkit = a;
          b.toolkitId = "brush";
          b.layer = c;
          b.prepare = b.prepare || u.prepareBrush;
          b.seed = f.seed || b.seed || t.Random.seed();
          b.ctx = a.ctx;
          b.active = a.draw;
          b.cache = a.cache;
          m.load(b, function() {
            c.dirtyCheck = !0;
            c.render = s;
            c.brush = b;
            h && h(c)
          })
        }
      }): e && e(c, k + " unavailable.")
    };
    this.changeDevice = function(b, c, d) {
      this.device = w.copyProperties(a, b);
      this.loadResource({
        layer: this.device,
        onerror: d,
        onload: c
      })
    };
    this.getDevice = function(a, b, c) {
      var e = a;
      "string" === typeof e && (e = t.clone(d.config[a]));
      this.loadResource({
        layer: e,
        onerror: c,
        onload: b
      });
      return e
    };
    this.getPadding = function(a, b) {
      var c = d.config[a.type],
        e = 0;
      c.diameter && a.diameter && (isFinite(a.diameter) ? e = a.diameter ||
        0 : isFinite(a.diameter.value) ? e = a.diameter.value :
        isFinite(a.diameter.min) && (e = a.diameter.max));
      if ("spirograph" === a.type) var f = a.distance || 0,
        e = e + 2 * (Math.abs((a.outerRadius || 0) - (a.innerRadius ||
          0)) + f);
      var f = c.scale && a.scale && a.scale.max || 1,
        h = c.translate && a.translate && a.translate.max || 0,
        h = 2 * Math.sqrt(h * h + h * h);
      return Math.ceil(((2 *
        (c.blur && a.blur || 0) + e + (c.lineWidth && a.lineWidth ||
          0)) * f + h) / 2)
    };
    this.updateObjectSize = function(b, c) {
      var f = b.bbox,
        k = f && f.scale.x || 1,
        m = a.getPadding(b, f);
      if ("floodfill" === b.type) var p = g.layer0,
        m = 0,
        l = {
          x1: 0,
          y1: 0,
          x2: p.width,
          y2: p.height
        };
      else l = isFinite(b.pathSmoothing) ? new h.BBox(h.catmullRomSpline({
        amount: b.pathSmoothing,
        path: b.data
      })) : new h.BBox(b.data);
      if (f) var r = f.units || "objectBoundingBox",
        s = (f.padding || 0) - m,
        p = f.x + s * k,
        t = f.y + s * k,
        s = 0;
      else r = a.units, s = m, p = l.x1, t = l.y1;
      var v = l.x2 - l.x1 + 2 * m,
        u = l.y2 - l.y1 + 2 * m,
        r = {
          x: p - s * k,
          y: t - s * k,
          width: v,
          height: u,
          padding: m,
          units: r,
          viewBox: [0, 0, v, u]
        };
      if (c && !f) {
        p = l.x1 + m * k - m;
        t = l.y1 + m * k - m;
        f = b.data;
        for (k = 0; k < f.length; k++) m = f[k], m.x -= p, m.y -= t,
          isFinite(m.x1 + m.y1) && (m.x1 -= p, m.y1 -= t), isFinite(m.x2 +
            m.y2) && (m.x2 -= p, m.y2 -= t);
        p = d.zoom * d.pixelRatio;
        r.x -= 1 * e.x / p;
        r.y -= 1 * e.y / p;
        return r
      }
      r.scale = f.scale;
      r.rotate = f.rotate;
      return b.bbox = r
    };
    this.onGhostExit = function(b) {
      if (b = a.device.brush) delete b.ghostX, delete b.ghostY
    };
    this.onGhost = function(b) {
      if ("eyeDropper" !== f.ui.colorPicker.state) {
        var c =
          a.device.brush;
        if (c) {
          var e = eventjs.getCoord(b),
            h = eventjs.getBBox(d.container),
            k = d.zoom;
          b = k * d.pixelRatio;
          var p = (e.x - h.x1 - h.scrollLeft) / k,
            e = (e.y - h.y1 - h.pageYOffset - d.scrollTop) / k;
          if (c.ghostDistance && isFinite(c.ghostX + c.ghostY)) {
            var k = c.ghostX - p,
              l = c.ghostY - e,
              g = Math.sqrt(k * k + l * l),
              h = c.ghostDistance;
            g > h && (k = Math.atan2(l, k), c.ghostX = p + Math.cos(k) *
              h, c.ghostY = e + Math.sin(k) * h, c.x = p, c.y = e)
          } else c.ghostY = e, c.ghostX = p, c.px = p, c.py = e, c.x =
            p, c.y = e;
          c.finger = c.finger || "0:A";
          c.interval = c.interval || 0;
          c.seed = c.seed || 1234567;
          c.isGhost = !0;
          c.isRecording = !0;
          c.path = [{
            cmd: "M",
            x: c.ghostX,
            y: c.ghostY
          }, {
            cmd: "L",
            x: c.x,
            y: c.y
          }];
          p = c.prepare();
          p.save();
          p.scale(b, b);
          c.render ? c.render() : (p.globalAlpha = c.opacity / 100, p.globalCompositeOperation =
            m.getComposite(c.composite, !c.isRecording), c.drawStart &&
            c.drawStart(), c.draw && c.draw(null), c.drawEnd && c.drawEnd()
          );
          p.restore()
        }
      }
    };
    this.onMultiRecord = function(b, c, d) {
      c.x -= 20;
      c.y -= 20;
      for (b = c.interval = 0; 2 > b; b++) {
        if (c.pointerStart) {
          var e = u.brush,
            f = w.copyAttributes(e.attributes, e.device.brush);
          f.type =
            a.type;
          e.deviceProxy[b] = f;
          a.loadResource({
            layer: f,
            onerror: function(a, b) {
              console.log(a, b)
            },
            onload: function(a) {
              console.log(a.brush)
            }
          })
        }
        c.x += 20;
        c.y += 20;
        c.interval += 20;
        c.identifier = b;
        c.isFromBrowser = !0;
        a.onRecord(null, c, d)
      }
    };
    this.onScroll = function(b) {
      if (d.__interacting) {
        var c = a.device.brush;
        c && (c.dirtyRender = !0, c.onScroll && c.onScroll(b))
      }
    };
    this.onRecord = function(e, p, l) {
      if ("eyeDropper" !== f.ui.colorPicker.state) {
        var r = u.getMouseId(e, p),
          s = e ? a.device : a.deviceProxy[r];
        if (s && s.brush) {
          a.deviceLastRecord = s;
          a.deviceLastRecordID =
            r;
          var v = s.type,
            s = s.brush;
          s.event = e;
          s.self = p;
          s.state = p.state;
          var x = a.batches[r] || (a.batches[r] = []),
            z = x.path || (x.path = []),
            J = z.length,
            N = eventjs.metaKey,
            K = eventjs.shiftKey,
            O = p.pointerStart,
            V = p.pointerMove,
            L = "move" === p.state,
            T = p.pointerEnd;
          d.__interacting = p.pointerDown && (O || L);
          var Q = p.isFromBrowser || !!e,
            U = Q && c.dataChannel && b.stream.realtime,
            da = d.scrollTop,
            aa = d.scrollLeft,
            R = d.zoom;
          if (O || V) {
            var ea = p.env,
              Z = aa + "x" + da;
            if (Z !== ea.scroll && (ea.scroll = Z, p.resetBoundingBox(),
                s.dirtyRender = !0, V)) return
          }
          var ga = da -
            da / R,
            W = aa - aa / R,
            ma = p.start.x / R + W,
            ua = p.start.y / R + ga,
            ea = p.x / R + W,
            Z = p.y / R + ga,
            ja = {
              x: ea,
              y: Z
            };
          if (!1 !== s.useSnap)
            if (O) s.useSnapShift = K, s.useSnapAngle = void 0;
            else if (s.useSnapShift) {
            var ta = .25 * Math.PI,
              Da = .5 * Math.PI,
              ua = {
                x: ma,
                y: ua
              },
              ma = k.angle(ua, ja);
            if (isFinite(s.useSnapAngle)) var va = s.useSnapAngle,
              ta = k.distance(ua, ja),
              ja = Math.abs(ma - va) >= Da ? -1 : 1,
              ja = k.atRadianDistance(ua, va, ta * ja);
            else if (3 < p.distanceMoved() / R) s.useSnapAngle = Math.round(
              ma / ta) * ta;
            else return
          }
          if (!(O && s.onPointerStart && s.onPointerStart(p, ja) || V &&
              s.onPointerMove && s.onPointerMove(p, ja) || L && s.onPointerDrag &&
              s.onPointerDrag(p, ja))) {
            if (T && s.onPointerEnd && s.onPointerEnd(p, ja)) return a.reset(
              r);
            if (T && J && s.onDoubleTap) {
              V = Date.now();
              Da = s.current;
              ma = z[J - 1];
              if (2 < J && Da && (ta = k.distance(Da, ma), 500 > V - s.timestamp &&
                  25 > ta && s.onDoubleTap(p, ja))) return;
              s.timestamp = V;
              s.current = k.clone(ma)
            }
            if (!s.onPointer || !s.onPointer(p, x, ja))
              if (O ? (e && eventjs.prevent(e), s.interval = x.interval =
                  isFinite(p.interval) ? p.interval : a.interval || 0, s.seed =
                  p.seed || s.seed, a.ghostDisable(),
                  a.dragging = !0, m.load(s), 1 === p.fingers && (e = g.layer0
                    .width, J = g.layer0.height, t.Canvas.blip(g.cache, e,
                      J), t.Canvas.blip(g.active, e, J)), ja.cmd = "M", ja.beginPath = !
                  0, ja.interval = x.interval, s.ghostDistance && (eventjs
                    .supports.touch && (s.ghostX = ea, s.ghostY = Z), Q &&
                    isFinite(s.ghostX + s.ghostY) && (ja.x = s.ghostX + aa /
                      R + W, ja.y = s.ghostY + da / R + ga, delete s.ghostX,
                      delete s.ghostY)), U && (da = p.state + "," + ja.x +
                    "," + ja.y + "," + r, aa = a.interval || 0, R = w.copyAttributes(
                      a.attributes, s), R = w.clone(R, !0), c.dataChannel.send(
                      ["brush", v, da, N, K,
                        R, aa
                      ])), !0 === s.click ? x.splice(0, 1, ja) : (x.push(ja),
                    z.push(ja)), s.ghostDistance && (ja = {}, ja.x = ea, ja
                    .y = Z, ja.cmd = "L", x.push(ja), z.push(ja), U && (da =
                      "move," + ja.x + "," + ja.y + "," + r, c.dataChannel.send(
                        ["brush", v, da, N, K])))) : (e && eventjs.cancel(e),
                  ja.cmd = L ? "L" : "Z", U && (da = p.state + "," + ja.x +
                    "," + ja.y + "," + r, c.dataChannel.send(["brush", v,
                      da, N, K
                    ])), s.lineRecord ? (ja.cmd = "L", x.splice(1, 1, ja),
                    z.splice(1, 1, ja), T && s.lineRecordRotate && (r = x[0],
                      N = x[1], ma = k.angle(r, N), r = k.atTimeOnLine(r, N,
                        .5), N = new h.Transform, N.translate(r.x,
                        r.y), N.rotate(-ma / 2), N.translate(-r.x, -r.y), N.flatten(
                        x), N.flatten(z), x.__rotate = ma * t.RAD_DEG)) : s.click ?
                  "Z" !== ja.cmd && x.splice(0, 1, ja) : (x.push(ja), z.push(
                    ja))), s.dirtyRender = !0, s.isFromBrowser = Q, T) {
                1 === t.count(a.batches) && (a.dragging = !1);
                Q && (a.gestures--, a.interval = s.interval || 0, 1 === p
                  .fingers && a.ghostEnable());
                p = Q || f.peer && f.peer.isStableStream();
                if (Q || p || l) {
                  if (z.length) {
                    var X = a.createObject({
                      device: s,
                      layer: {
                        type: v,
                        toolkitId: "brush",
                        path: z,
                        bbox: {
                          rotate: x.__rotate || 0
                        }
                      }
                    });
                    a.renderToScene(X, function(b) {
                      a.reset(X.finger);
                      !1 === b && y();
                      a.addToHistory(X);
                      l && l(X)
                    })
                  }
                } else y();
                Q && (s.seed = t.Random.seed())
              } else a.animate()
          }
        }
      }
    };
    a.renderToScene = function(c, d) {
      if (b.vector.edit) {
        var e = w.children,
          f = m.useSourceOver[c.composite];
        (e[e.length - 2] || {}).useStickToFront || !f ? p.sceneGCO(
          "toolkit.brush", d) : (w.updateTransform(c), p.layer(a.ctx,
          c, d))
      } else e = g.layer0.ctx, e.globalAlpha = 1, e.globalCompositeOperation =
        "source-over", e.drawImage(g.draw, 0, 0), c.dirtyCheck = !1,
        d()
    };
    this.addToHistory = function(a) {
      d.history && a && d.history.store({
        cmd: "add",
        icon: a.type,
        name: a.type,
        data: [a]
      })
    };
    this.animate = function() {
      !1 === a.rendering && (a.rendering = !0, x())
    };
    this.createObject = function(b, c) {
      var d = b.layer,
        e = w.copyProperties(a, b.device);
      e.data = t.clone(d.path);
      e.bbox = t.cloneInto(d.bbox, a.updateObjectSize(e, !0));
      e.interval = e.data[0].interval;
      d = w.addObject(e);
      c && c(d);
      return d
    };
    this.reset = function(b) {
      var c = a.deviceLastRecord;
      (b = b || a.deviceLastRecordID) && c && (c = c.brush, delete a
        .batches[b], delete a.intervals[b], delete a.position[b +
          "x"], delete a.position[b + "y"], delete c.timestamp,
        delete c.current, delete c.event, delete c.self)
    };
    var x = function() {
        if (-1 === a.dragging) a.rendering = !1;
        else {
          !1 === a.dragging && (a.dragging = -1);
          var b = a.deviceLastRecord,
            e = b && b.brush;
          if (e)
            if (e.dirtyRender || e.speed) {
              e.isGhost = !1;
              e.isRecording = !0;
              var f = d.zoom * d.pixelRatio,
                h = a.batches,
                k = e.prepare();
              k.save();
              k.scale(f, f);
              k.translate(-d.scrollLeft, -d.scrollTop);
              z(k, h);
              k.restore();
              e.postprocess && e.postprocess();
              a.rendering = !0;
              requestAnimationFrame(x);
              if (e.speed && e.isFromBrowser)
                for (var m in a.intervals)
                  if (f = h[m])
                    if (k =
                      a.intervals[m], !(0 < f.length)) {
                      b.brush.state = "move";
                      var p = {
                        cmd: "L",
                        x: k.x,
                        y: k.y
                      };
                      c.dataChannel && c.dataChannel.send(["brush", e.type,
                        "move," + k.x + "," + k.y + "," + m, eventjs.metaKey,
                        eventjs.shiftKey
                      ]);
                      f.push(p);
                      f.path.push(p)
                    }
            } else requestAnimationFrame(x);
          else requestAnimationFrame(x)
        }
      },
      s = function(b, c, d) {
        var e = this.brush;
        if (e) {
          this.dirtyCheck && w.copyAttributes(a.attributes, this, e);
          var f = e.interval || this.interval;
          e.ctx = b;
          e.active = a.draw;
          e.cache = a.cache;
          e.isGhost = !1;
          e.isRecording = !1;
          e.interval = f;
          e.bbox = this.bbox;
          e.state = e.state || "up";
          var h = {};
          h[this.finger] = this.data;
          h[this.finger].interval = f;
          if (!d) {
            d = this.bbox;
            var k = d.scale;
            c.matrix.x = 0 > k.x ? -d.width * k.x : 0;
            c.matrix.y = 0 > k.y ? -d.height * k.y : 0;
            c.matrix.y += d.padding * (k.y - (k.x - 1) - 1);
            c.apply(b, !0)
          }
          z(e.prepare(), h, e, this);
          e.interval = f;
          e.postprocess && e.postprocess()
        } else console.warn("brush missing:", e, this)
      },
      z = function(b, c, d, e) {
        var f = r.pointAtTime,
          k = a.position,
          p = a.intervals,
          g = a.deviceProxy,
          s, q, t;
        for (t in c) {
          e || (b = g[t] || a.device, d = b.brush);
          s = d.opacity / 100;
          q = d.type;
          var v = d.isEraser,
            u = "disco" === d.composite,
            x = d.isRecording,
            w = d.isGhost,
            z = m.getComposite(d.composite, !l.useSafeComposite[q] || !x),
            y = !!d.draw,
            da = isFinite(d.pathSmoothing),
            aa = isFinite(d.pathSimplify);
          d.dirtyRender = !1;
          var R = c[t],
            ea = R.length;
          if (0 !== ea && (R.interval = R.interval || 0, d.path = R.path ||
              R, d.finger = t, b = d.renderTo || d.ctx)) {
            b.save();
            l.useLocalAlpha[q] && (b.globalAlpha = s);
            b.globalCompositeOperation = v && !x ? "source-over" : z;
            if (d.render) {
              if (da || aa) aa && (d.path = h.simplify(d.path, d.pathSimplify, !
                0)), da && (d.path =
                h.catmullRomSpline({
                  amount: d.pathSmoothing,
                  path: d.path
                }));
              u = R[ea - 1];
              d.cmd = u && u.cmd;
              d.render(e || d);
              d.interval = R.interval
            } else
              for (v = 0; v < ea; v++) {
                var Z = x || w ? R.shift() : R[v],
                  z = d.x = Z.x,
                  aa = d.y = Z.y,
                  ga = d.cmd = Z.cmd;
                if ("M" === ga) s = k[t + "x"] = z, q = k[t + "y"] = aa, R
                  .increment = 0, d.px = s, d.py = q, x && ++a.gestures, d.drawStart &&
                  (d.interval = ++R.interval, d.drawStart());
                else {
                  if ("Z" === ga) {
                    d.drawEnd && (d.interval = ++R.interval, d.drawEnd());
                    break
                  }
                  s = k[t + "x"];
                  q = k[t + "y"];
                  d.px = s;
                  d.py = q
                }
                d.speed && (p[t] = Z);
                if (y) {
                  var W = d.spacing,
                    ma = W.min,
                    ua =
                    W.max,
                    ja = z - s,
                    ta = aa - q,
                    W = Math.sqrt(ja * ja + ta * ta) + 1;
                  if (!(W < ma && "M" !== ga)) {
                    ga = ja / W || 0;
                    ma = ta / W || 0;
                    ta = ua || 1;
                    ua = ua < W - 1 ? ua : W - 1;
                    if (da = da && !x) {
                      var Da = R[v + 1],
                        va = Z,
                        X = {
                          x: s,
                          y: q
                        },
                        oa = R[v - 2];
                      if (!(Da && va && X && oa)) continue
                    }
                    Z = s;
                    for (ja = q; ua < W; ua += ta) da ? (aa = f(s, q, X.x +
                        (va.x - oa.x) / 6, X.y + (va.y - oa.y) / 6, va.x + (X
                          .x - Da.x) / 6, va.y + (X.y - Da.y) / 6, va.x, va.y,
                        ua / W), z = aa.x, aa = aa.y) : (z = s + ga * ua, aa =
                        q + ma * ua), u && (b.globalCompositeOperation = 0 ===
                        R.interval % 2 ? "lighter" : "source-over"), d.x = z,
                      d.y = aa, d.px = Z, d.py = ja, d.interval = ++R.interval,
                      d.draw(R.increment),
                      Z = z, ja = aa;
                    k[t + "x"] = z;
                    k[t + "y"] = aa;
                    R.increment++
                  }
                }
              }
            b.restore();
          }
        }
      },
      y = function() {
        t.isEmpty(a.batches) && t.Canvas.blip(a.draw.canvas);
      };
    return u.init(this);
  })
})(sketch);

//Create arrow brush
(function(g) {
  g.registerToolkit("brush.arrow", function(f, d, a, e) {
    var g = d.toolkit,
      l = f.util;
    d = f.vector;
    var b = d.Shape,
      c = d.Point;
    this.prepare = g.prepareBrush;
    this.construct = function(a, b) {
      this.curved = !!a.curved;
      this.diameter = isFinite(a.diameter) ? a.diameter : 30;
      this.ghostDistance = isFinite(a.ghostDistance) ? a.ghostDistance :
        10;
      this.mode = a.mode;
      this.pathSmoothing = this.pathSimplify = .5;
      !1 === this.curved && (this.lineRecordRotate = this.lineRecord = !
        0);
      b(this)
    };
    this.postprocess = function() {
      "up" !== this.state && this.state ||
        l.Canvas.clear(this.active.canvas)
    };
    this.render = function() {
      var a = this.renderTo,
        d = this.path,
        e = d.length - 1,
        l = this.mode || 1,
        h = this.diameter,
        r = h / 2;
      a.save();
      a.beginPath();
      a.lineWidth = h / 4;
      this.isRecording && (a.globalAlpha = this.opacity / 100);
      if (this.curved) {
        a.lineCap = "round";
        a.lineJoin = "round";
        b.VOBPathOffset(a, d, 0, 0);
        l = g.getBBox(this);
        a.strokeStyle = f.style.getStyle("fill", a, l.x1, l.y1, l.x2,
          l.y2, this);
        a.stroke();
        var h = d[e],
          k = d[e];
        if (h && k) {
          for (; e--;)
            if (7 < c.distance(k, d[e])) {
              h = d[e];
              break
            }
          var e = 1,
            d = r / c.distance(h,
              k),
            v = c.atTimeToRadius(h, k, e - d, r),
            x = c.atTimeToRadius(h, k, 1 + d, 0),
            s = c.atTimeToRadius(h, k, e - d, -r);
          a.beginPath();
          p(a, v, x, s);
          a.fillStyle = a.strokeStyle;
          a.fill()
        }
        this.useCache && g.drawFromCache(this)
      } else if (a.lineCap = "miter", a.miterLimit = 20, h = d[0], k =
        d[e], h && k) {
        var e = 1,
          z = .5 * r,
          d = r / c.distance(h, k),
          y = Math.min(1.5, r / 4 * .25);
        if (1 === l) var v = c.atTimeToRadius(h, k, e, z),
          x = c.atTimeToRadius(h, k, e, -z),
          s = c.atTimeToRadius(h, k, -d, -y),
          B = c.atTimeToRadius(h, k, -d, y);
        else 2 === l ? (B = c.atTimeToRadius(h, k, 0, z), s = c.atTimeToRadius(
          h,
          k, 0, -z), x = c.atTimeToRadius(h, k, e + d, -y), v = c.atTimeToRadius(
          h, k, e + d, y)) : (v = c.atTimeToRadius(h, k, e, z), x = c
          .atTimeToRadius(h, k, e, -z), s = c.atTimeToRadius(h, k, 0, -
            z), B = c.atTimeToRadius(h, k, 0, z));
        a.moveTo(v.x, v.y);
        a.lineTo(x.x, x.y);
        a.lineTo(s.x, s.y);
        a.lineTo(B.x, B.y);
        a.closePath();
        if (1 === l || 3 === l) v = c.atTimeToRadius(h, k, e - d, r),
          B = c.atTimeToRadius(h, k, 1 + d, 0), e = c.atTimeToRadius(h,
            k, e - d, -r), p(a, v, B, e);
        if (2 === l || 3 === l) v = c.atTimeToRadius(h, k, d, r), B =
          c.atTimeToRadius(h, k, -d, 0), e = c.atTimeToRadius(h, k, d, -
            r), p(a, e, B, v);
        g.applyStyle(a, this);
        this.useCache && g.drawFromCache(this)
      }
      a.restore()
    };
    var p = function(a, b, d, e) {
      a.moveTo(b.x, b.y);
      a.lineTo(d.x, d.y);
      a.lineTo(e.x, e.y);
      d = c.distance(b, e);
      b = c.atTimeToRadius(b, e, .5, .25 * d);
      a.lineTo(b.x, b.y);
      a.closePath()
    };
    this.construct(a, e)
  })
})(sketch);

//Create calligrapgy brush
(function(g) {
  g.registerToolkit("brush.calligraphy", function(f, d, a, e) {
    var g = d.toolkit;
    this.prepare = g.prepareBrush;
    this.construct = function(a, b) {
      this.diameter = isFinite(a.diameter) ? a.diameter : 30;
      this.spacing = a.spacing || [0, 0];
      this.angle = a.angle || 0;
      this.pathSmoothing = 0;
      b(this)
    };
    this.draw = function() {
      var a = this.diameter,
        b = this.useCache,
        c = this.renderTo;
      c.save();
      c.globalCompositeOperation = "source-over";
      c.beginPath();
      c.lineJoin = "round";
      c.lineCap = "round";
      c.translate(-a / 2, 0);
      c.moveTo(this.px, this.py);
      c.lineTo(this.px +
        a, this.py - a / 2);
      c.lineTo(this.x + a, this.y - a / 2);
      c.lineTo(this.x, this.y);
      c.closePath();
      var a = this.fill.__colors || [],
        d = a.length,
        a = a[Math.abs((2 * this.interval + 1) % (2 * d) - d)];
      c.fillStyle = a;
      c.fill();
      c.strokeStyle = a;
      c.stroke();
      b && g.drawFromCache(this);
      c.restore()
    };
    this.construct(a, e)
  })
})(sketch);

//Create eraser brush
(function(g) {
  g.registerToolkit(["brush.eraser", "brush.paintbrush"], function(f,
    d, a, e) {
    var g = d.toolkit,
      l = d.render,
      b = f.vector.Shape;
    this.bitmap = {};
    this.prepare = g.prepareBrush;
    this.construct = function(a, b) {
      this.diameter = isFinite(a.diameter) ? a.diameter : 30;
      this.blur = isFinite(a.blur) ? a.blur : 10;
      this.spacing = a.spacing || [0, 0];
      this.pathSmoothing = this.pathSimplify = .5;
      b(this)
    };
    this.render = function(a) {
      var e = this.isRecording,
        f = this.isEraser,
        m = this.useTrackGradient,
        u = this.useCache,
        t = this.renderTo,
        h = d.pixelRatio,
        r =
        g.getBBox(this),
        k = this.diameter,
        v = this.blur * h;
      if (v)
        if (a && a.bbox) {
          var x = a.bbox.scale.x;
          a = Math.ceil(a.bbox.width) * h;
          var s = l.cache.padding / Math.abs(x);
          a = a - v + s;
          s = 0
        } else {
          x = d.zoom;
          a = d.viewport;
          var z = a.height,
            y = a.width,
            B = k + v;
          z > y ? (a = y / x + k / 2, s = 0, 0 > this.x * x - y / 2 ?
            (a -= Math.min(0, r.x1 + B), a = -1 * a * h) : (a -= Math.min(
              0, a - (r.x2 + B)), a *= h)) : (a = 0, s = z / x + k / 2,
            0 > this.y * x - z / 2 ? (s -= Math.min(0, r.y1 + B), s = -
              1 * s * h) : (s -= Math.min(0, s - (r.y2 + B)), s *= h))
        } else s = a = 0;
      t.save();
      t.beginPath();
      e && (t.globalAlpha = this.opacity / 100);
      b.VOBPathOffset(t,
        this.path, -a / h, -s / h);
      f ? e = d.backgroundRaw : (e = this.fill.__colors || [0,
        "#000"
      ], e = e[1 % e.length]);
      v ? (t.strokeStyle = "#000", t.shadowOffsetX = a * x, t.shadowOffsetY =
        s * x, t.shadowBlur = Math.abs(v * x), t.shadowColor = e &&
        e.indexOf ? e : "#000") : t.strokeStyle = e;
      t.lineCap = "round";
      t.lineJoin = "round";
      t.lineWidth = k;
      t.stroke();
      t.shadowBlur = null;
      m && g.trackGradient(t, this, r);
      u && g.drawFromCache(this);
      t.restore()
    };
    this.construct(a, e)
  })
})(sketch);

//Create pencil brush
(function(g) {
  g.registerToolkit("brush.pencil", function(f, d, a, e) {
    var g = d.toolkit,
      l = f.vector.Shape;
    this.prepare = g.prepareBrush;
    this.construct = function(a, c) {
      this.diameter = isFinite(a.diameter) ? a.diameter : 30;
      this.spacing = a.spacing || [0, 0];
      this.pathSmoothing = this.pathSimplify = .5;
      c(this)
    };
    this.render = function(a) {
      var c = this.path;
      a = this.renderTo;
      a.save();
      a.beginPath();
      a.lineCap = "round";
      a.lineJoin = "round";
      a.lineWidth = this.diameter;
      this.isRecording && (a.globalAlpha = this.opacity / 100);
      l.VOBPathOffset(a, c, 0, 0);
      c =
        g.getBBox(this);
      a.strokeStyle = f.style.getStyle("fill", a, c.x1, c.y1, c.x2,
        c.y2, this);
      a.stroke();
      this.useCache && g.drawFromCache(this);
      a.restore()
    };
    this.construct(a, e)
  })
})(sketch);

//Create Marker brush
(function(g) {
  g.registerToolkit("brush.marker", function(f, d, a, e) {
    var g = d.toolkit,
      l = f.vector.Shape;
    this.prepare = g.prepareBrush;
    this.construct = function(a, c) {
      this.diameter = isFinite(a.diameter) ? a.diameter : 30;
      this.spacing = a.spacing || [0, 0];
      this.pathSmoothing = this.pathSimplify = .5;
      c(this)
    };
    this.render = function(a) {
      var c = this.path;
      a = this.renderTo;
      a.save();
      a.beginPath();
      a.lineCap = "round";
      a.lineJoin = "round";
      a.lineWidth = this.diameter;
      this.isRecording && (a.globalAlpha = this.opacity / 100);
      l.VOBPathOffset(a, c, 0, 0);
      c =
        g.getBBox(this);
      a.strokeStyle = f.style.getStyle("fill", a, c.x1, c.y1, c.x2,
        c.y2, this);
      a.stroke();
      this.useCache && g.drawFromCache(this);
      a.restore()
    };
    this.construct(a, e)
  })
})(sketch);

//Create streamer brush
(function(g) {
  g.registerToolkit(["brush.streamer", "brush.pen"], function(f, d,
    a,
    e) {
    var g = d.render,
      l = d.toolkit,
      b = {},
      c = function(a, c, d, e, f) {
        if (c = b[c]) {
          f = 1 * c.thickness;
          var h = c.cos,
            l = c.sin,
            k = c.color;
          a.beginPath();
          a.fillStyle = k;
          a.strokeStyle = k;
          a.arc(d, e, f, 0, 2 * Math.PI, !0);
          a.moveTo(c.x + h, c.y + l);
          a.lineTo(d + 1 * h, e + 1 * l);
          a.lineTo(d - 1 * h, e - 1 * l);
          a.lineTo(c.x - h, c.y - l);
          a.lineTo(c.x + h, c.y + l);
          a.fill();
          a.stroke()
        }
      };
    this.construct = function(a, b) {
      this.spacing = a.spacing || [0, 0];
      this.diameter = a.diameter || 10;
      b(this)
    };
    this.prepare =
      function() {
        this.useTrackGradient = "color" !== this.fill.type;
        this.useBlendMode = !f.style.useSourceOver[this.composite];
        if (this.isRecording) {
          if (this.useBlendMode || 100 !== this.opacity) {
            var a = this.renderTo = this.active;
            "down" === this.state && this.useBlendMode && g.prepareGCO(
              this.composite, a.canvas);
            this.useCache = !0;
            a = this.cache
          } else this.useCache = !1, a = this.active;
          return this.renderTo = a
        }
        this.useCache = !1;
        return this.renderTo = this.ctx
      };
    this.drawStart = function() {
      var a = this.finger,
        c = this.renderTo;
      c.lineCap = "round";
      c.lineJoin = "round";
      this.fill.mode = "cycle";
      a = b[a] = {};
      a.x = this.x;
      a.y = this.y;
      a.px = this.x;
      a.py = this.y;
      a.vectorx = 0;
      a.vectory = 0;
      a.cos = 0;
      a.sin = 0;
      a.thickness = 0;
      a.rotation = Math.PI / 2;
      a.color = "#000"
    };
    this.draw = function() {
      var a = this.finger,
        d = this.fill.__colors || [],
        e = b[a];
      if (e && d) {
        var f = this.useCache,
          g = d.length,
          d = d[Math.abs((2 * this.interval + 1) % (2 * g) - g)],
          g = this.renderTo,
          h = this.x - e.px,
          r = this.y - e.py;
        if (5 < Math.abs(h) || 5 < Math.abs(r)) {
          e.color = d;
          0 > h * e.vectorx + r * e.vectory && (c(g, a, this.px, this.py,
              this), e.x = e.px = this.px,
            e.y = e.py = this.py, e.rotation += Math.PI, e.thickness *=
            1);
          e.x += .5 * (this.x - e.x);
          e.y += .5 * (this.y - e.y);
          var a = e.x - e.px,
            k = e.y - e.py,
            q = Math.sqrt(a * a + k * k),
            x = this.diameter,
            s = Math.max(x.min, Math.min(x.max, q)),
            a = 0 !== q ? Math.PI / 2 + Math.atan2(k, a) : 0,
            x = "pen" === this.type ? (.001 + Math.max(0, x.max - s) +
              x.min) / 2 : (.001 + s) / 2,
            x = e.thickness + .42 * (x - e.thickness),
            z = Math.sin(e.rotation),
            y = Math.cos(e.rotation),
            B = Math.sin(a),
            A = Math.cos(a),
            s = e.thickness * z,
            k = e.thickness * y,
            B = x * B,
            A = x * A,
            z = .33 * q * z,
            C = -.33 * q * y,
            q = e.px + k + z,
            y = e.py + s + C,
            z = e.px - k + z,
            C = e.py - s + C;
          g.beginPath();
          g.fillStyle = d;
          g.strokeStyle = d;
          g.moveTo(e.px + k, e.py + s);
          g.quadraticCurveTo(q, y, e.x + A, e.y + B);
          g.lineTo(e.x - A, e.y - B);
          g.quadraticCurveTo(z, C, e.px - k, e.py - s);
          g.lineTo(e.px + k, e.py + s);
          g.fill();
          g.stroke();
          e.px = e.x;
          e.py = e.y;
          e.rotation = a;
          e.thickness = x;
          e.vectorx = h;
          e.vectory = r;
          e.cos = A;
          e.sin = B;
          f && l.drawFromCache(this)
        }
      }
    };
    this.drawEnd = function() {
      var a = this.finger;
      void 0 !== b[a] && (c(this.ctx, a, this.x, this.y, this),
        delete b[a])
    };
    this.construct(a, e)
  })
})(sketch);

(function(g) {
  var f = function(d) {
    return function(a, e, f, l) {
      var b = this,
        c = a.style,
        p = e.toolkit,
        g = a.util,
        m = a.vector,
        u = a.ui,
        t = m.Cubic,
        h = m.Point,
        r = m.Shape,
        k = !0,
        v = !1,
        x = {};
      b.prepare = p.prepareBrush;
      b.construct = function(a, c) {
        b.composite = a.composite || "source-over";
        b.diameter = a.diameter || 0;
        b.lineWidth = a.lineWidth || 1;
        b.opacity = a.opacity || 100;
        b.spacing = a.spacing || [0, 0];
        b.useGhost = !1;
        b.useMonitor = !0;
        b.useSnap = !1;
        v = "polygon" === d;
        k = "path" === d;
        c(b)
      };
      b.enable = function() {
        x = {}
      };
      b.disable = function() {
        b.savePath()
      };
      b.render =
        function(a) {
          var d = b.isRecording;
          a = d ? b.active : b.ctx;
          var e = b.stroke && b.stroke.lineWidth,
            f = G();
          a.beginPath();
          a.lineCap = "round";
          a.lineJoin = "round";
          if (d) a.globalAlpha = b.opacity / 100, a.globalCompositeOperation =
            c.getComposite(b.composite), a.lineWidth = e, b.isEditing ?
            m.VOBPath(a, f) : m.VOBPath(a, f.slice(0, -1));
          else {
            var l = b.bbox.scale,
              l = Math.max(Math.abs(l.x), Math.abs(l.y));
            a.globalAlpha = 1;
            a.lineWidth = e / l;
            m.VOBPath(a, f)
          }
          p.applyStyle(a, b);
          if (d) {
            a.globalAlpha = 1;
            a.globalCompositeOperation = "source-over";
            var g = f && f.length;
            if (g) {
              var s = b.closingPath,
                e = b.editingPath,
                q = b.bendingSegment,
                d = b.selected || {},
                l = d.idx;
              "cp1" === d.type && l--;
              for (var d = g - 1, t = (l || 0) + (s ? 0 : 1), v = 0; v <
                g; v++)
                if (l = f[v]) {
                  var u = l.cmd;
                  if ("C" === u && (v <= t && v >= t - (q ? 2 : 1) || s &&
                      1 === v)) {
                    var w = f[v - 1],
                      u = h(l.x1, l.y1),
                      z = h(l.x2, l.y2);
                    h.equals(u, w) || (V(a, u, "#4f80ff", 3), T.L(a, u, w,
                      "#4f80ff"));
                    h.equals(z, l) || (V(a, z, "#4f80ff", 3), T.L(a, z, l,
                      "#4f80ff"))
                  }
                }
              l = x.pointAtop;
              v = x.pointAtopStart;
              g = x.pointOnPath;
              if (!(g || l && (!v || eventjs.metaKey || eventjs.altKey) ||
                  !1 !== e && !1 !== k) && (l = f[d], u = l.cmd,
                  T[u]))
                if (w = f[d - 1], v) T[u](a, w, l, "#46f224");
                else T[u](a, w, l, "#4f80ff"), L(a, l, "#fff", 2.5);
              if (g)
                if (eventjs.metaKey) e = g.point, a.save(), a.beginPath(),
                  r.exmark(a, e.x, e.y, 3), a.lineWidth = 2.5, a.strokeStyle =
                  "#000", a.stroke(), a.lineWidth = 1.5, a.strokeStyle =
                  "#46f224", a.stroke(), a.restore();
                else if (!1 === e && (u = g.cmd, T[u])) T[u](a, g.point0,
                g.point1, "#4f80ff");
              e = "Z" === f[d].cmd;
              for (v = 0; v < d; v++) !(l = f[v]) || e && v + 1 === d ||
                (g = a, 0 !== v || e ? l.hovered ? eventjs.metaKey ? V(g,
                    l, "#ff3535", 5) : eventjs.altKey ? V(g, l, "#bc19fc", 5) :
                  V(g, l, "#4f80ff",
                    5) : V(g, l, "rgba(0,0,0,0.75)", 3) : l.hovered ?
                  eventjs.metaKey ? L(g, l, "#ff3535", 4.5) : eventjs.altKey ?
                  L(g, l, "#bc19fc", 4.5) : L(g, l, "#46f224", 4.5) : L(g,
                    l, "#fff", 4.5))
            }
          }
        };
      b.calcBBox = function() {
        if (b.path) return new m.BBox(G())
      };
      b.onResize = function() {
        b.toolkit.dragging && J()
      };
      b.onDoubleTap = function(a, c) {
        b.savePath()
      };
      b.onPointerMove = function(a, c) {
        b.self = a;
        b.point = c;
        var d = b.editingPath;
        if (!d || b.adding || b.splittingSegment || b.deletingPoint) {
          for (var e = !1, f = !1, k, p = G(), l = p.length, g = 0; g <
            l; g++) {
            var r = p[g],
              s = r.cmd,
              q = g < l - 1,
              v = r.bbox;
            void 0 !== v || !q && !1 !== d || (v = r.bbox = new m.BBox({
              data: [k || r, r],
              expand: 7,
              convexHull: !0
            }));
            r.hovered = !1;
            v && (v.hovered = !1, h.inBBox(c, v) && (v.hovered = !0, !q ||
              !1 !== e && "point" === e.type || (v = h.distance(r, c),
                7 > v && (r.hovered = !0, e = h.clone(r), e.idx = g, e.type =
                  "point", e.distance = v)), !1 === e && ("C" === s ? (s =
                h(r.x1, r.y1), v = h.distance(s, c), 7 > v && (e = s,
                  e.idx = g, e.type = "cp1", e.distance = v), q && (q =
                  h(r.x2, r.y2), v = h.distance(q, c), 7 > v && (e = q,
                    e.idx = g, e.type = "cp2", e.distance = v), q = t.nearestPointOnCurve(
                    c, [k, s, q, r]), 5 > q.distance &&
                  (!1 === f || q.distance < f.distance) && (f = {
                    cmd: "C",
                    idx: g,
                    time: q.time,
                    distance: q.distance,
                    point: q.point,
                    point0: k,
                    point1: r
                  }))) : "L" === s && q && (v = h.toLineDistance(c, k,
                r), 5 > v && (!1 === f || v < f.distance) && (q = h.nearestOnLine(
                c, k, r, !0), f = {
                cmd: "L",
                idx: g,
                time: q.time,
                distance: v,
                point: q,
                point0: k,
                point1: r
              })))));
            k = r
          }
          d ? O("") : e ? (f = !1, "point" === e.type ? eventjs.altKey ?
              O("Alter Tension") : eventjs.metaKey ? O("Remove Point") :
              eventjs.shiftKey ? O("Move Point w/o Handles") : 0 === e.idx ?
              O("Close Path") : O("Move Point") : eventjs.altKey ? O(
                "Move Handle Mirrored") :
              eventjs.metaKey ? O("Remove Handle") : O("Move Handle")) :
            f ? eventjs.metaKey ? O("Add Point") : eventjs.altKey ? "C" ===
            f.cmd ? O("Move Curve") : O("Move Line") : "C" === f.cmd ?
            O("Bend Curve") : O("Bend Line") : (r = p[l - 1], k = p[l -
              2], r && k ? (v = h.distance(r, k), O("D: " + v.toFixed(2) +
              "px")) : O(""));
          x.pointAtop = e;
          x.pointAtopStart = e && 0 === e.idx;
          x.pointOnPath = f
        }
      };
      b.onPointer = function(a, c, d) {
        b.dirtyRender = !0;
        b.batch = c;
        var e = x.pointAtop,
          f = x.pointAtopStart,
          m = x.pointOnPath;
        c = c.path;
        var p = c.length;
        b.ghostPoint = void 0;
        if (a.pointerStart)
          if (O(""),
            b.selected = void 0, b.adding = !1, b.bendingSegment = !1,
            b.closingPath = !1, b.convertingPoint = !1, b.deletingPoint = !
            1, b.editingPath = !0, b.movingPoint = !1, b.movingPointLocked = !
            1, b.movingSegment = !1, b.splittingSegment = !1, 0 === p) A(
            d, "M"), A(d, "L"), b.adding = !0, b.selected = {
            idx: 0,
            type: "point"
          }, J();
          else if (e) {
          if (eventjs.metaKey)
            if (b.deletingPoint = !0, b.selected = e, d = e.idx, c = e.type,
              "point" === c) {
              m = G();
              c = m[d];
              if (m = m[d + 1]) "M" === c.cmd ? F(m, "M") : "C" === m.cmd &&
                (m.x1 = c.x1, m.y1 = c.y1), m.bbox = void 0;
              P(d, 1)
            } else a = G(), m = a[d - 1], e = a[d],
              d = a[d + 1], "cp1" === c ? (e.x1 = m.x, e.y1 = m.y, m.angleLock =
                e.x1 === m.x2 && e.y1 === m.y2) : (e.x2 = e.x, e.y2 = e.y,
                e.angleLock = e.x2 === d.x1 && e.y2 === d.y1), C(e, m), e
              .bbox = void 0;
          else eventjs.altKey ? (b.convertingPoint = !0, b.selected =
            e, s(c, e)) : eventjs.shiftKey ? (b.movingPoint = !0, b.selected =
            e) : f ? (A(e, "Z"), b.closingPath = !0, b.selected = {
            idx: p,
            type: "point"
          }) : (b.movingPointLocked = !0, b.selected = e);
          N()
        } else if (m) {
          b.selected = m;
          if (eventjs.metaKey) a: switch (b.splittingSegment = !0, d =
            m.idx, a = m.time, e = c[d - 1], c = c[d], m.cmd) {
            case "C":
              a = t.split(e.x,
                e.y, c.x1, c.y1, c.x2, c.y2, c.x, c.y, a);
              m = t.fromArray(a[0].slice(2));
              a = t.fromArray(a[1].slice(2));
              m.angleLock = e.angleLock;
              a.angleLock = c.angleLock;
              P(d, 1, m, a);
              break a;
            case "L":
              c.bbox = void 0, m = h.atTimeOnLine(e, c, a), m.cmd = "L",
                P(d, 0, m)
          } else eventjs.altKey ? b.movingSegment = m : b.bendingSegment =
            m;
          N()
        } else b.isEditing || (A(d, "L"), b.adding = !0, b.selected = {
          idx: p - 1,
          type: "point"
        });
        else if (a.pointerEnd)
          if (b.editingPath = !1, b.closingPath) b.savePath();
          else {
            if (c = c[p - 2]) c.bbox = void 0;
            E(d);
            N()
          } else if (a.pointerDrag) {
          if (!b.deletingPoint &&
            !b.splittingSegment)
            if (b.movingPoint || b.movingPointLocked) m = b.selected, e =
              m.type, m = m.idx, a = c[m], f = c[m + 1], c = c[m - 1],
              "point" === e ? (c = a.x - d.x, d = a.y - d.y, b.movingPoint ?
                (m = G()[m], m.x -= c, m.y -= d, m.angleLock = !1, m.bbox =
                  void 0) : y(m, c, d)) : "cp1" === e ? B(a, f, c, d, "x1",
                "y1") : "cp2" === e && B(a, f, c, d, "x2", "y2");
            else if (b.movingSegment) c = b.movingSegment, m = c.idx, a =
            c.point, e = a.x - d.x, a = a.y - d.y, y(m, e, a), y(m - 1,
              e, a), c.point = d;
          else if (b.bendingSegment) {
            var m = b.bendingSegment,
              e = m.point,
              l = e.x - d.x,
              g = e.y - d.y,
              f = Math.min(.98, Math.max(.02,
                m.time)),
              p = 1 - f,
              e = 3 * f * p * p,
              r = 3 * f * f * p,
              q = .5 >= f ? Math.pow(2 * f, 3) / 2 : 1 - Math.pow(2 * p,
                3) / 2;
            a = (1 - q) / e;
            e = a * l;
            a *= g;
            r = q / r;
            l *= r;
            g *= r;
            f < 1 / 3 ? (l = e * f, g = a * f) : f > 2 / 3 && (e = l *
              p, a = g * p);
            r = b.selected.idx;
            f = c[r];
            p = c[r - 1];
            c = c[r + 1];
            "L" === f.cmd && (t.fromLineSegment(p, f, f), f.angleLock = !
              1);
            f.x1 -= e;
            f.y1 -= a;
            f.x2 -= l;
            f.y2 -= g;
            f.bbox = void 0;
            p && p.angleLock && isFinite(p.x2 + p.y2) && (e = z(h(f.x1,
              f.y1), p), p.x2 = e.x, p.y2 = e.y, p.bbox = void 0);
            c && f.angleLock && isFinite(c.x1 + c.y1) && (e = z(h(f.x2,
              f.y2), f), c.x1 = e.x, c.y1 = e.y, c.bbox = void 0);
            m.point = d
          } else b.convertingPoint ||
            k ? s(c, d) : E(d)
        } else a.pointerMove && (E(d), J());
        return !0
      };
      var s = function(a, c) {
          var d = b.selected,
            e = d.idx,
            f = d.type;
          "cp1" === f && e--;
          var k = a[e],
            m = h.distance(k, c),
            p = m;
          "cp2" === f && (m = p = -m);
          if ("Z" === k.cmd) {
            var l = a.length,
              f = a[(l + e + 1) % l],
              l = a[(l + e + 2) % l],
              g = isFinite(l.x1 + l.y1) ? h(l.x1, l.y1) : k;
            void 0 === d.point && (l = h.angle(f, g), d.point = h.atRadianDistance(
              k, l, .001));
            5 >= p && (c = d.point);
            p = h.distance(f, g)
          }
          var l = h.angle(k, c),
            d = h.atRadianDistance(k, l, -m),
            k = h.atRadianDistance(k, l, +p),
            f = e,
            e = G(),
            l = e.length,
            g = f - 1,
            r = f,
            p = f + 1,
            m = e[f],
            m = m.cmd;
          "M" === m ? "Z" === e[l - 1].cmd && (f = l - 1, r = (l + f -
              1) % l, g = (l + f - 2) % l, p = (l + f + 2) % l) : "Z" ===
            m && (r = (l + f - 1) % l, g = (l + f - 2) % l, p = (l + f +
              2) % l);
          m = e[r];
          f = e[g];
          e = e[p];
          m && ("M" === m.cmd ? b.adding && (e.x2 = d.x, e.y2 = d.y) :
            (m.cmd = "C", m.x2 = d.x, m.y2 = d.y, m.bbox = void 0, void 0 !==
              f.angleLock && b.adding || (f.angleLock = !0), isFinite(m.x1 +
                m.y1) || (m.x1 = f.x, m.y1 = f.y)));
          e && (e.cmd = "C", e.x1 = k.x, e.y1 = k.y, e.bbox = void 0,
            void 0 !== m.angleLock && b.adding || (m.angleLock = !0),
            isFinite(e.x2 + e.y2) || (e.x2 = e.x, e.y2 = e.y));
          f && (C(e, m), C(m, f))
        },
        z = function(a, b) {
          var c =
            h.distance(a, b),
            d = h.angle(a, b);
          return h.atRadianDistance(b, d, c)
        },
        y = function(a, b, c) {
          var d = G(),
            e = d[a];
          a = d[a + 1];
          e.x -= b;
          e.y -= c;
          e.bbox = void 0;
          a && isFinite(a.x1 + a.y1) && (a.x1 -= b, a.y1 -= c, a.bbox =
            void 0);
          isFinite(e.x2 + e.y2) && (e.x2 -= b, e.y2 -= c)
        },
        B = function(a, b, c, d, e, f) {
          b = h(a[e], a[f]);
          var k = b.y - d.y;
          a[e] -= b.x - d.x;
          a[f] -= k;
          a.bbox = void 0;
          "x1" === e ? c.angleLock = !1 : a.angleLock = !1
        },
        A = function(a, c) {
          a = h.clone(a);
          a.cmd = c;
          var d = b.batch;
          d.push(a);
          d.path.push(a);
          b.point = a
        },
        C = function(a, b) {
          a.x1 === b.x && a.y1 === b.y && a.x2 === a.x &&
            a.y2 === a.y && F(a, "L")
        },
        F = function(a, b) {
          a.cmd = b;
          delete a.x1;
          delete a.y1;
          delete a.x2;
          delete a.y2
        },
        E = function(a) {
          if (!b.isEditing) {
            var c = x.pointAtopStart,
              d = G(),
              e = d.length - 1,
              f = d[e];
            f && (c && (c = d[0], a.x = c.x, a.y = c.y), f.x = a.x, f.y =
              a.y, "C" === f.cmd && (f.x2 = a.x, f.y2 = a.y), b.ghostPoint =
              e)
          }
        };
      b.closePath = function() {
        var a;
        a = G();
        a = (a = a[a.length - 1]) ? "Z" === a.cmd : void 0;
        if (!a) {
          a = G();
          var c = a[0];
          c && 2 < a.length && (E(c), A(c, "Z"), b.ghostPoint = void 0)
        }
      };
      b.savePath = function() {
        D();
        var a = G();
        if (1 < a.length) {
          v && b.closePath();
          var c = g.clone(a);
          P(-a.length);
          b.toolkit.createObject({
            device: b,
            layer: {
              path: c
            }
          }, function(a) {
            b.toolkit.addToHistory(a);
            b.toolkit.renderToScene(a);
            N()
          })
        } else K()
      };
      var D = function() {
          var a = b.ghostPoint;
          isFinite(a) && (P(a, 1), b.ghostPoint = void 0)
        },
        P = function(a, c) {
          var d = Array.prototype.slice.call(arguments),
            e = b.batch;
          Array.prototype.splice.apply(e, d);
          Array.prototype.splice.apply(e.path, d);
          x.pointAtop = void 0
        },
        G = function() {
          return b.path || []
        },
        J = function() {
          b.dirtyRender = !0;
          b.toolkit.dragging = !0;
          b.toolkit.animate()
        },
        N = function() {
          b.current =
            void 0;
          b.dirtyRender = !0;
          b.onPointerMove(b.self, b.point)
        },
        K = function() {
          x = {};
          b.dirtyRender = !0;
          b.toolkit.dragging = !1;
          b.toolkit.reset(b.finger);
          e.render()
        },
        O = function(a) {
          u.tooltip && u.tooltip.update(a)
        };
      b.onBackspaceKey = b.onDeleteKey = function(a) {
        if ("down" === a.state)
          if (2 < (b.path || []).length) P(-1, 1), E(b.point), N();
          else return K(), !0
      };
      b.onUndo = function(a) {
        if (2 < (b.path || []).length) P(-1, 1), E(b.point), N();
        else return K(), !0
      };
      b.onRedo = function(a) {
        console.log("redo");
        return !0
      };
      b.onAltKey = b.onMetaKey = b.onShiftKey =
        function(a) {
          N()
        };
      b.onEnterKey = b.onEscapeKey = function(a) {
        "down" === a.state && b.savePath()
      };
      var V = function(a, b, c, d) {
          a.beginPath();
          a.arc(b.x, b.y, d, 0, 2 * Math.PI);
          a.fillStyle = c;
          a.fill();
          a.lineWidth = .75;
          a.strokeStyle = "#fff";
          a.stroke()
        },
        L = function(a, b, c, d) {
          a.beginPath();
          a.rect(b.x - d, b.y - d, 2 * d, 2 * d);
          a.fillStyle = c;
          a.fill();
          a.lineWidth = 1;
          a.strokeStyle = "#000";
          a.stroke()
        },
        T = {
          L: function(a, b, c, d) {
            a.beginPath();
            a.moveTo(b.x, b.y);
            a.lineTo(c.x, c.y);
            a.lineWidth = 1;
            a.strokeStyle = d;
            a.stroke()
          },
          C: function(a, b, c, d) {
            a.beginPath();
            a.moveTo(b.x, b.y);
            a.bezierCurveTo(c.x1, c.y1, c.x2, c.y2, c.x, c.y);
            a.lineWidth = 1;
            a.strokeStyle = d;
            a.stroke()
          }
        };
      b.construct(f, l)
    }
  };
  g.registerToolkit("brush.path", f("path"));
  g.registerToolkit("brush.polygon", f("polygon"));
  g.registerToolkit("brush.polyline", f("polyline"))
})(sketch);

//Create spray paint brush
(function(g) {
  var f = {}, d;
  g.registerToolkit("brush.spraypaint", function(a, e, g, l) {
    var b = this,
      c = e.toolkit,
      p = a.util,
      w = 2 * Math.PI,
      m = .5 * Math.PI,
      u = [],
      t = 0,
      h = 2,
      r = {},
      k = void 0;
    this.create = function(a, b) {
      var c = a.diameter,
        d = p.Canvas(),
        f = d.ctx,
        h = e.pixelRatio;
      d.width = a.image.width = c * h;
      d.height = a.image.height = c * h;
      f.drawImage(a.image, 0, 0, c * h, c * h);
      return f
    };
    this.bitmap = {};
    this.onerror = function() {
      b.image.loaded = !0;
      b.image.error = !0;
      l(b, "404")
    };
    this.onload = function() {
      b.image.loaded = !0;
      l(b)
    };
    this.construct = function(c, d) {
      this.rand =
        new p.Random(this.seed || 1);
      this.spacing = c.spacing || [0, 0];
      this.diameter = c.diameter || 50;
      this.dripDistance = c.drip_distance || 30;
      this.speed = Math.round(!!c.speed && c.speed.value || 20);
      this.src = a.loc.MEDIA + "stamp/Basic/1-live.png";
      f[this.src] ? f[this.src].loaded ? (this.image = f[this.src],
        d(b)) : (this.image = f[this.src], eventjs.add(this.image,
        "error", this.onerror), eventjs.add(this.image, "load",
        this.onload)) : (this.src.split("/"), this.src.split("/"),
        this.image = new Image, eventjs.add(this.image, "error",
          this.onerror),
        eventjs.add(this.image, "load", this.onload), this.image.src =
        this.src, f[this.src] = this.image);
      this.enable()
    };
    this.disable = function() {
      b.enabled = !1;
      d && d.remove()
    };
    this.enable = function() {
      b.enabled = !0;
      d || (d = eventjs.add(window, "deviceorientation", v, !1))
    };
    this.prepare = c.prepareBrush;
    this.drawStart = function() {
      this.rand = new p.Random(this.seed || 1);
      this.bitmap = this.create(this, g);
      r[this.finger] = {
        interval: this.interval + 1,
        scale: 0,
        scaleRatio: 1,
        stepOneVal: 0,
        dripFrameCount: 0,
        prevDist: 0,
        dripPoint: {
          x: this.x,
          y: this.y
        },
        prevPoint: {
          x: this.x,
          y: this.y
        }
      }
    };
    this.drawEnd = function() {
      delete r[this.finger];
      for (var a in r) break;
      "undefined" === typeof a && (this.animating = !1,
        cancelAnimationFrame(x), u = [])
    };
    this.draw = function() {
      var b = this.finger,
        c = this.bitmap;
      if (c.canvas && (c.canvas.width || c.canvas.height) && (b = r[
          b]) && b.dripPoint) {
        var d = this.fill.__colors || [],
          f = d.length,
          d = d[Math.abs((2 * this.interval + f + 1) % (2 * f) - f)];
        if (k !== d && d || b.interval === this.interval) f = c.canvas,
          c.globalCompositeOperation = "source-in", c.fillStyle = d ||
          a.style.fill.color,
          c.fillRect(0, 0, f.width, f.height), k = d;
        2 < this.path.length && !this.animating && (this.animating = !
          0, requestAnimationFrame(x));
        d = this.x - b.prevPoint.x;
        f = this.y - b.prevPoint.y;
        b.prevDist = Math.sqrt(d * d + f * f);
        b.prevPoint = {
          x: this.x,
          y: this.y
        };
        d = this.x - b.dripPoint.x;
        f = this.y - b.dripPoint.y;
        20 > Math.sqrt(d * d + f * f) ? 15 === ++b.dripFrameCount &&
          this.dripDistance && (b.dripFrameCount = 0, u.push(new s({
            x: this.x,
            y: this.y
          }))) : (b.dripFrameCount = 0, b.dripPoint = {
            x: this.x,
            y: this.y
          });
        f = e.pixelRatio;
        d = Math.max((30 - b.prevDist) / 30, 0);
        d = Math.max(1E-5,
          b.scaleRatio * b.scale * d);
        d /= f;
        b.stepOneVal < m && (b.scale = Math.sin(b.stepOneVal), b.stepOneVal +=
          .1);
        var b = this.diameter * f * .5,
          f = this.diameter * f * .5,
          h = b * d,
          p = f * d,
          l = this.isRecording || this.isGhost ? this.active : this.ctx;
        l.save();
        l.translate(this.x - h, this.y - p);
        l.scale(d, d);
        l.translate(b, f);
        l.rotate(this.rand.toDouble() * w);
        l.translate(-b, -f);
        l.drawImage(c.canvas, 0, 0);
        l.restore()
      }
    };
    var v = function(a) {
        if ("undefined" !== typeof window.orientation) {
          var b = window.orientation / 180;.5 === b ? (b = -(a.gamma /
              90), a = a.beta / 90) : -.5 ===
            b ? (b = a.gamma / 90, a = -(a.beta / 90)) : 1 === b ? (b = -
              (a.beta / 90), a = -(a.gamma / 90)) : (b = a.beta / 90, a =
              a.gamma / 90);
          t = 5 * a;
          h = 5 * b
        } else h = a.beta / 90 * 3 + 1.5, t = a.gamma / 90 * 5
      },
      x = function() {
        if (!a.feature.vector.edit) {
          for (var c = 0; c < u.length; c++) {
            var d = u[c];
            d.update();
            d.gamma < d.threshold && d.beta < d.threshold || (u.splice(c,
              1), --c)
          }
          b.enabled && b.animating && requestAnimationFrame(x)
        }
      },
      s = function(c) {
        var d = b.isGhost ? b.active : b.ctx;
        a.style.getComposite(b.composite);
        var e = b.opacity,
          f = 1,
          m = b.diameter,
          p = b.rand.toDouble() * m * .05 + 1,
          l = p / m * 5,
          g =
          b.rand.toDouble() * p,
          r = 0;
        this.color = k;
        this.threshold = m * b.rand.toDouble();
        this.update = function() {
          f -= .005;.5 > f && (f = .5);
          var a = Math.max(1E-5, f * l),
            k = m / 2,
            p = k * a,
            s = m / 2 * a;
          d.save();
          d.translate(c.x - p + g, c.y - s + r);
          d.scale(a, a);
          d.globalAlpha = e / 100;
          d.beginPath();
          d.fillStyle = this.color;
          d.arc(k, m, k, 0, w, !0);
          d.fill();
          d.restore();
          g += 2 * b.rand.toDouble() - 1 + t;
          r += h;
          this.beta++;
          this.gamma++
        };
        this.beta = this.gamma = 0
      };
    this.construct(g, l)
  })
})(sketch);

//Create chrome brush
(function(g) {
  g.registerToolkit("brush.chrome", function(f, d, a, e) {
    var g = d.toolkit;
    this.construct = function(a, b) {
      this.type = "chrome";
      this.lineWidth = a.lineWidth || 1;
      this.spread = a.spread || 30;
      this.spacing = a.spacing || [0, 0];
      b(this)
    };
    this.prepare = g.prepareBrush;
    this.draw = function(a) {
      var b = this.renderTo,
        c = this.path,
        d = this.fill.__colors || [],
        e = 100 * this.spread;
      a = null === a ? c.length : a;
      if (0 !== a) {
        var f = c[a - 1],
          u = c[a - 2] || f;
        if (u) {
          b.beginPath();
          b.lineCap = "round";
          b.lineWidth = this.lineWidth;
          b.moveTo(u.x, u.y);
          b.lineTo(f.x, f.y);
          b.strokeStyle = d[(2 * this.interval + 1) % d.length];
          b.stroke();
          for (var t = Math.max(0, a - 100); t < a; t++) d = c[t].x -
            c[a - 1].x, f = c[t].y - c[a - 1].y, u = d * d + f * f, u <
            e && (b.beginPath(), b.moveTo(c[a - 1].x + .2 * d, c[a - 1]
                .y + .2 * f), b.lineTo(c[t].x - .2 * d, c[t].y - .2 * f),
              b.stroke());
          this.useCache && g.drawFromCache(this, 1)
        }
      }
    };
    this.construct(a, e)
  });
  g.registerToolkit("brush.shader", function(f, d, a, e) {
    var g = d.toolkit;
    this.construct = function(a, b) {
      this.type = "shader";
      this.lineWidth = a.lineWidth || 1;
      this.spread = a.spread || 30;
      this.spacing = a.spacing || [0, 0];
      b(this)
    };
    this.prepare = g.prepareBrush;
    this.draw = function(a) {
      var b = this.renderTo,
        c = this.path,
        d = this.fill.__colors || [],
        e = 100 * this.spread;
      a = null === a ? c.length : a;
      var f, u;
      b.lineCap = "round";
      b.lineWidth = this.lineWidth;
      b.strokeStyle = d[(2 * this.interval + 1) % d.length];
      for (d = 0; d < a; d++) f = c[d].x - c[a - 1].x, u = c[d].y -
        c[a - 1].y, f = f * f + u * u, f < e && (b.beginPath(), b.globalAlpha =
          .1 * (1 - f / e) * this.opacity / 100, b.moveTo(c[a - 1].x,
            c[a - 1].y), b.lineTo(c[d].x, c[d].y), b.stroke());
      this.useCache && g.drawFromCache(this, 1)
    };
    this.construct(a,
      e)
  });
  g.registerToolkit("brush.sketchy", function(f, d, a, e) {
    var g = d.toolkit;
    this.construct = function(a, b) {
      this.type = "sketchy";
      this.lineWidth = a.lineWidth || 1;
      this.spread = a.spread || 30;
      this.spacing = a.spacing || [0, 0];
      b(this)
    };
    this.prepare = g.prepareBrush;
    this.drawStart = function() {
      this.rand = new sketch.util.Random(this.seed || 1)
    };
    this.draw = function(a) {
      if (this.rand) {
        var b = this.renderTo,
          c = this.path,
          d = this.fill.__colors || [],
          e = 100 * this.spread;
        a = null === a ? c.length : a;
        if (0 !== a) {
          var f = c[a - 1],
            u = c[a - 2] || f;
          if (u) {
            b.beginPath();
            b.lineCap = "round";
            b.lineWidth = this.lineWidth;
            b.moveTo(u.x, u.y);
            b.lineTo(f.x, f.y);
            b.strokeStyle = d[(2 * this.interval + 1) % d.length];
            b.stroke();
            for (var t = 0; t < a; t++) d = c[t].x - c[a - 1].x, f = c[
                t].y - c[a - 1].y, u = d * d + f * f, u < e && this.rand.toDouble() >
              u / e / 2 && (b.beginPath(), b.moveTo(c[a - 1].x + .3 * d,
                c[a - 1].y + .3 * f), b.lineTo(c[t].x - .3 * d, c[t].y -
                .3 * f), b.stroke());
            this.useCache && g.drawFromCache(this, 1)
          }
        }
      }
    };
    this.construct(a, e)
  });
  g.registerToolkit("brush.web", function(f, d, a, e) {
    var g = d.toolkit;
    this.construct = function(a, b) {
      this.type =
        "web";
      this.lineWidth = a.lineWidth || 1;
      this.spread = a.spread || 30;
      this.spacing = a.spacing || [0, 0];
      b(this)
    };
    this.prepare = g.prepareBrush;
    this.drawStart = function() {
      this.rand = new sketch.util.Random(this.seed || 1)
    };
    this.draw = function(a) {
      if (this.rand) {
        var b = this.renderTo,
          c = this.path,
          d = this.fill.__colors || [],
          e = 100 * this.spread;
        a = null === a ? c.length : a;
        if (0 !== a) {
          var f = c[a - 1],
            u = c[a - 2] || f;
          if (u) {
            b.beginPath();
            b.lineCap = "round";
            b.lineWidth = this.lineWidth;
            b.moveTo(u.x, u.y);
            b.lineTo(f.x, f.y);
            b.strokeStyle = d[(2 * this.interval +
              1) % d.length];
            b.stroke();
            for (d = 0; d < a; d++) f = c[d].x - c[a - 1].x, u = c[d].y -
              c[a - 1].y, f = f * f + u * u, f < e && .15 > this.rand.toDouble() &&
              (b.beginPath(), b.moveTo(c[a - 1].x, c[a - 1].y), b.lineTo(
                c[d].x, c[d].y), b.stroke());
            this.useCache && g.drawFromCache(this, 1)
          }
        }
      }
    };
    this.construct(a, e)
  });
  g.registerToolkit("brush.fur", function(f, d, a, e) {
    var g = d.toolkit;
    this.construct = function(a, b) {
      this.type = "fur";
      this.lineWidth = a.lineWidth || 1;
      this.diameter = a.diameter || 30;
      this.spacing = a.spacing || [0, 0];
      b(this)
    };
    this.prepare = g.prepareBrush;
    this.drawStart =
      function() {
        this.rand = new sketch.util.Random(this.seed || 1)
      };
    this.draw = function(a) {
      if (this.rand) {
        var b = this.renderTo,
          c = this.path,
          d = this.fill.__colors || [],
          e = this.diameter / 100;
        a = null === a ? c.length : a;
        if (0 !== a) {
          var f = c[a - 1],
            u = c[a - 2] || f;
          if (u) {
            var t;
            b.beginPath();
            b.moveTo(u.x, u.y);
            b.lineTo(f.x, f.y);
            b.lineCap = "round";
            b.lineWidth = this.lineWidth;
            b.strokeStyle = d[(2 * this.interval + 1) % d.length];
            b.stroke();
            for (var h = 0; h < a; h++) d = c[h].x - c[a - 1].x, u = c[
                h].y - c[a - 1].y, t = d * d + u * u, 2E3 > t && .15 >
              this.rand.toDouble() && (b.beginPath(),
                b.moveTo(f.x + d * e, f.y + u * e), b.lineTo(f.x - d * e,
                  f.y - u * e), b.stroke());
            this.useCache && g.drawFromCache(this, 1)
          }
        }
      }
    };
    this.construct(a, e)
  });
  g.registerToolkit("brush.hair", function(f, d, a, e) {
    var g = this,
      l = d.toolkit;
    this.construct = function(a, c) {
      this.type = "hair";
      this.lineWidth = a.lineWidth || 1;
      this.diameter = a.diameter || 30;
      this.spacing = a.spacing || [0, 10];
      this.lookback = a.lookback || 10;
      c(this)
    };
    this.prepare = l.prepareBrush;
    this.drawStart = function() {
      this.rand = new sketch.util.Random(this.seed || 1)
    };
    this.draw = function() {
      if (this.rand) {
        var a =
          this.renderTo,
          c = this.path,
          d = this.fill.__colors || [],
          e = this.diameter / 2,
          f = this.diameter,
          u = c.length,
          t = c[u - 1];
        if (c[u - 2] || t) {
          a.lineCap = "round";
          a.lineWidth = this.lineWidth;
          a.strokeStyle = d[(2 * this.interval + 1) % d.length];
          for (d = 1; d < u; d++) c.length - this.lookback > d || (t =
            c[d], a.beginPath(), a.moveTo(this.px, this.py), a.bezierCurveTo(
              t.x - g.rand.doubleRange(0, f), t.y - g.rand.doubleRange(
                0, f), t.x, t.y, t.x, t.y), a.bezierCurveTo(t.x + g.rand
              .doubleRange(0, e), t.y, t.x, t.y - g.rand.doubleRange(0,
                e), t.x + g.rand.doubleRange(-f, f), t.y +
              g.rand.doubleRange(-e, e)), a.stroke());
          this.useCache && l.drawFromCache(this, 1)
        }
      }
    };
    this.construct(a, e)
  })
})(sketch);

//Create spirograph brush
(function(g) {
  g.registerToolkit("brush.spirograph", function(f, d, a, e) {
    f = d.toolkit;
    var g = !0,
      l = 0,
      b = 1,
      c, p, w = 0;
    this.construct = function(a, b) {
      this.lineWidth = a.lineWidth || 1;
      this.distance = a.distance || 30;
      this.spacing = a.spacing || [0, 10];
      this.contract = a.contract || 0;
      this.increment = a.increment || 1;
      this.outerRadius = a.outerRadius || 10.2;
      this.innerRadius = a.innerRadius || 3.2;
      this.speed = Math.round(isFinite(a.speed) ? a.speed : 100);
      b(this)
    };
    this.prepare = f.prepareBrush;
    this.drawStart = function() {
      l = w = 0;
      b = this.increment;
      p = c = void 0
    };
    this.draw = function() {
      var a = this.isRecording ? this.active : this.ctx,
        d = this.fill.__colors || [],
        e = this.innerRadius,
        f = this.outerRadius;
      0 === this.contract && (w = this.distance);
      a.lineWidth = this.lineWidth;
      for (var r = this.speed >> 0; r--;) {
        if (w > this.distance || 0 > w) g = !g;
        g ? (l -= b, w -= this.contract) : (l += b, w += this.contract);
        var k = (f - e) / e * l,
          v = (f - e) * Math.cos(l) + w * Math.cos(k),
          k = (f - e) * Math.sin(l) - w * Math.sin(k),
          v = v + this.x,
          k = k + this.y;
        if (c) {
          a.beginPath();
          a.moveTo(c, p);
          a.lineTo(v, k);
          var x = d.length,
            x = d[Math.abs((2 * this.interval + 1) %
              (2 * x) - x)];
          a.strokeStyle = x;
          a.stroke()
        }
        c = v;
        p = k
      }
    };
    this.construct(a, e)
  })
})(sketch);

//Create crayon brush
(function(g) {
  g.registerToolkit("brush.crayon", function(f, d, a, e) {
    var g = this,
      l = d.toolkit,
      b = f.util;
    g.bitmap = {};
    g.getStampResource = function(a, b, c) {
      f.assets.getItem(a) ? b(f.assets.getItem(a)) : f.assets.add({
        type: "image",
        src: a,
        onerror: c,
        onload: function(a, c) {
          b(c)
        }
      })
    };
    g.prepare = l.prepareBrush;
    g.construct = function(a, d) {
      g.rand = new b.Random(g.seed || 1);
      g.diameter = a.diameter || 20;
      g.speed = a.speed || void 0;
      g.rotate = a.rotate || {
        min: 0,
        max: 0
      };
      g.scale = a.scale || {
        min: 1,
        max: 1
      };
      g.translate = a.translate || {
        min: 0,
        max: 0
      };
      g.spacing = a.spacing || c(g.diameter);
      g.pollock = a.pollock || !1;
      g.src = a.src || void 0;
      g.resource = new Image;
      g.src ? g.getStampResource(g.src, function(a) {
        g.resource = a;
        g.resource.loaded = !0;
        g.resource.error = !1;
        d(g)
      }, function() {
        g.resource.loaded = !0;
        g.resource.error = !0;
        d(g, "404")
      }) : d(g)
    };
    g.drawStart = function() {
      g.scaleX = g.bbox && g.bbox.scale.x || 1;
      "crayon" === g.type && (g.fill.mode = "cycle", g.spacing = c(g
        .diameter), g.src = void 0, g.scale = {
        min: 1,
        max: 1
      }, g.rotate = {
        min: 1,
        max: 360
      });
      var a = g.finger,
        d = g.rand = new b.Random(g.seed ||
          1);
      g.rr = d.toDouble();
      g.sr = d.toDouble();
      g.bitmap[a] = g.create();
      g.isRecording && g.useGlobalAlpha && (a = g.cache, a.canvas.width =
        g.ctx.canvas.width, a.canvas.height = g.ctx.canvas.height)
    };
    g.draw = function() {
      var a = g.renderTo,
        c = g.ratio,
        d = g.finger;
      if (g.bitmap[d]) {
        var d = g.bitmap[d],
          e = d.canvas.width,
          l = d.canvas.height,
          h = e / 2,
          r = l / 2;
        if (h && r) {
          var k = g.translate.min || 1E-5,
            v = g.translate.max || 1E-5;
          if (0 === k && 0 === v) var x = 0,
            k = 0;
          else x = (v - k) * g.rand.toDouble() + k, k = (v - k) * g.rand
            .toDouble() + k;
          var v = g.scale.min,
            s = g.scale.max,
            c = 1 ===
            v && 1 === s ? c || 1E-5 : ((s - v) * g.rand.toDouble() + v) *
            c || 1E-5,
            v = 0,
            z = g.rotate.min,
            s = g.rotate.max;
          0 !== z && 0 !== s && (z <= s ? v = (s - z) * g.rand.toDouble() +
            z : (v = z - s, z = (360 - v) * g.rand.toDouble(), v = z >
              s ? z + v : z));
          g.pollock || a.save();
          "cycle" === g.fill.mode && (s = g.fill.__colors || [], z = s
            .length, s = s[Math.abs((2 * g.interval + 1) % (2 * z) - z)],
            s !== d.fillStyle && (d.fillStyle = s, d.fillRect(0, 0, e,
              l)));
          a.translate(g.x - h * c, g.y - r * c);
          1 !== c && a.scale(c, c);
          0 !== v && (a.translate(h, r), a.rotate(v * b.DEG_RAD), a.translate(-
            h, -r));
          a.translate(1 * x / c, 1 * k / c);
          a.drawImage(d.canvas,
            0, 0);
          g.decorate && (a.beginPath(), a.fillStyle = d.fillStyle, f.vector
            .Shape.star(a, 0, 0, 10, 5, 2), a.fill());
          g.pollock || a.restore();
          g.isRecording && g.useGlobalAlpha && (g.active.save(), g.active
            .globalAlpha = g.opacity / 100, g.active.globalCompositeOperation =
            "copy", g.active.drawImage(a.canvas, 0, 0), g.active.restore()
          )
        }
      }
    };
    g.drawEnd = function() {
      delete g.bitmap[g.finger]
    };
    g.create = function() {
      var a = g.finger,
        b = g.diameter * d.pixelRatio,
        c = Math.round(g.scale.max * b);
      if (!a || !c) return console.warn("stamp error", a, c);
      if (g.bitmap[a]) var e =
        g.bitmap[a],
        l = e.canvas;
      else l = f.util.Canvas(), e = l.ctx;
      if (g.src) {
        b = g.resource;
        if (b.error) return e;
        if ("clipart" === b.type) var h = b.viewBox,
          r = h[2],
          k = r - h[0],
          h = h[3] - h[1];
        else k = b.width, h = b.height;
        k > c && (h *= c / k, k = c);
        h > c && (k *= c / h, h = c);
        var v = Math.sqrt(k * k + h * h);
        v > c && (c /= v, k *= c, h *= c);
        l.width = k;
        l.height = h;
        "clipart" === b.type ? (c = k / r, l = (new f.vector.Transform)
          .scale(c), b.render({
            ctx: e,
            matrix: l.matrix
          })) : e.drawImage(b, 0, 0, k, h)
      } else {
        k = l.width = c;
        h = l.height = c;
        l = e.getImageData(0, 0, k, h);
        r = l.data;
        c = 25 * b;
        b /= 2;
        for (v = 0; v < c; v++) {
          var x =
            g.rand.toDouble() * b,
            s = 2 * g.rand.toDouble() * Math.PI,
            z = Math.sin(s) * x + b + .5 >> 0,
            s = Math.cos(s) * x + b + .5 >> 0;
          z >= k || 0 >= z || s >= h || 0 >= s || (r[4 * (s * k + z) +
            3] = 255 * (1.5 - x / b))
        }
        e.putImageData(l, 0, 0)
      }
      e.globalCompositeOperation = "none" === g.fill[g.fill.type] ?
        "source-atop" : "source-in";
      e.fillStyle = f.style.getStyle("fill", e, 0, 0, k, h, g);
      e.fillRect(0, 0, k, h);
      v = Math.sqrt(k * k + h * h);
      g.ratio = 1 / (v / g.diameter);
      return g.bitmap[a] = e
    };
    var c = function(a) {
      a = Math.sqrt(a);
      return {
        min: a,
        max: a
      }
    };
    g.construct(a, e);
  })
})(sketch);



//Create floodfill brush
(function(g) {
  g.registerToolkit("brush.floodfill", function(f, d, a, e) {
    var g = this,
      l = d.canvas2d,
      b = f.dom,
      c = f.feature,
      p = d.contexts,
      w = f.util;
    this.construct = function(a, b) {
      this.type = "floodfill";
      this.lineRecord = !0;
      this.movable = !1;
      this.usePixelData = this.useStretchToEdge = !0;
      this.tolerance = a.tolerance || 25;
      this.antialias = a.antialias || !1;
      this.contiguous = a.contiguous || !1;
      b(this)
    };
    this.prepare = function() {
      this.useBlendMode = !f.style.useSourceOver[this.composite];
      if (this.isGhost) return this.renderTo = this.active;
      if (this.isRecording) {
        var a =
          this.renderTo = this.active;
        a.clearRect(0, 0, a.canvas.width, a.canvas.height);
        this.useBlendMode && "up" !== this.state && a.drawImage(p.layer0,
          0, 0);
        return a
      }
      this.useCache = !1;
      return this.renderTo = this.ctx
    };
    this.render = function() {
      if (!this.isGhost && (!1 !== c.vector.edit || "z" === this.cmd)) {
        var a = "down" === this.state,
          b = this.isRecording,
          e = this.renderTo,
          h = this.bbox || {
            x: 0,
            y: 0,
            scale: {
              x: 1,
              y: 1
            }
          },
          g = d.zoom / d.pixelRatio * (h.scale.x || 1),
          k = this.path || layer.data || [],
          q = "gradient" === this.fill.type;
        if (q) var x = k[0],
          k = k[1] || x;
        else k =
          x = k[1] || k[0];
        var s = Math.round(h.x + x.x * g),
          z = Math.round(h.y + x.y * g),
          h = Math.ceil(l.orientX),
          g = Math.ceil(l.orientY),
          y = d.viewport,
          B = y.width >> 0,
          A = y.height >> 0,
          C = p.layer0.ctx,
          y = p.cache.ctx,
          F = C.canvas.width,
          E = C.canvas.height;
        y.canvas.width = F;
        y.canvas.height = E;
        w.Canvas.blip(p.active);
        100 === this.tolerance ? (e.save(), e.globalAlpha = this.opacity /
          100, e.fillStyle = f.style.getStyle("fill", e, 0, 0, F, E,
            this), e.fillRect(0, 0, B, A), e.restore()) : (!a && q ||
          delete this.QLFloodFill, this.QLFloodFill = this.QLFloodFill ||
          new f.gl.QLFloodFill({
            src: C,
            srcRect: {
              x: h,
              y: g,
              width: B,
              height: A
            },
            dst: y,
            dstRect: {
              x: 0,
              y: 0
            },
            tolerance: this.tolerance / 100,
            contiguous: this.contiguous
          }), this.QLFloodFill.render({
            x: s - h - d.scrollLeft,
            y: z - g - d.scrollTop
          }), b || delete this.QLFloodFill, this.antialias && (y.drawImage(
            y.canvas, 0, 0, F, E, .5, .5, F, E), y.drawImage(y.canvas,
            0, 0, F, E, -.5, -.5, F, E)), "erase" !== this.composite &&
          (y.save(), y.globalCompositeOperation = "source-in", x.x ===
            k.x && x.y === k.y ? (this.fill.angle = void 0, y.fillStyle =
              f.style.getStyle("fill", e, 0, 0, F, E, this)) : (a = x.x -
              (k.x - x.x), x = x.y -
              (k.y - x.y), q = k.x, k = k.y, this.fill.angle = void 0,
              y.fillStyle = f.style.getStyle("fill", e, a, x, q, k,
                this)), y.fillRect(0, 0, F, E), y.restore()), e.save(),
          e.globalCompositeOperation = f.style.getComposite(this.composite),
          e.globalAlpha = this.opacity / 100, b ? e.drawImage(y.canvas,
            h + d.scrollLeft, g + d.scrollTop) : e.drawImage(y.canvas,
            d.scrollLeft, d.scrollTop), e.restore(), this.drawControl()
        )
      }
    };
    this.drawControl = function(a) {
      a = a || g;
      var b = d.pixelRatio,
        c = d.scrollLeft,
        e = d.scrollTop,
        f = p.active.ctx,
        k = a.bbox || {
          x: 0,
          y: 0,
          scale: {
            x: 1,
            y: 1
          }
        },
        l = (k.scale.x || 1) * d.zoom,
        x = g.path || a.data || [];
      if (a = "gradient" === g.fill.type) var s = x[0],
        w = x[1] || s;
      else w = s = x[1] || x[0];
      x = Math.round(k.x + s.x * l) - c;
      s = Math.round(k.y + s.y * l) - e;
      c = Math.round(k.x + w.x * l) - c;
      e = Math.round(k.y + w.y * l) - e;
      if ("select" === d.tool.type && d.tool.coord) {
        var y = d.tool.coord,
          B = y.x,
          A = y.y;
        g.last = void 0;
        g.control = void 0;
        d.tool.coord = void 0
      }
      f.strokeStyle = "rgba(255,255,255,0.7)";
      a && (f.beginPath(), f.moveTo(x, s), f.lineTo(c, e), f.stroke());
      f.beginPath();
      f.fillStyle = "#000";
      f.arc(x, s, 6 * b, 0, 2 * Math.PI);
      y &&
        f.isPointInPath(B, A) && (f.fillStyle = "#f00", g.control = 0);
      f.fill();
      f.stroke();
      a && (f.beginPath(), f.fillStyle = "#000", f.arc(c, e, 4 * b,
        0, 2 * Math.PI), y && f.isPointInPath(B, A) && (f.fillStyle =
        "#f00", g.control = 1), f.fill(), f.stroke());
      return [{
        id: "anchor",
        type: "button",
        bbox: {
          units: "objectBoundingBox",
          x: 0,
          y: 0,
          width: window.innerWidth,
          height: window.innerHeight,
          rotate: 0,
          scale: {
            x: 1,
            y: 1
          }
        }
      }]
    };
    this.move = function(a) {
      var c;
      c = b.measure(d.container);
      var e = d.zoom / d.pixelRatio;
      c = {
        x: a.x / e + (d.scrollLeft - c.x1 - c.pageXOffset),
        y: a.y /
          e + (d.scrollTop - c.y1 - c.pageYOffset)
      };
      var f = g.control,
        e = g.layer,
        p = e.data;
      e.brush.state = a.state;
      void 0 === f ? (f = g.last || c, p[0] && (p[0].x -= f.x - c.x,
        p[0].y -= f.y - c.y), p[1] && (p[1].x -= f.x - c.x, p[1].y -=
        f.y - c.y)) : (p[f].x = c.x, p[f].y = c.y);
      e.dirtyCache = !0;
      e.dirtyRender = !0;
      d.render("root.select.moveActions");
      g.last = "up" === a.state ? void 0 : c
    };
    this.construct(a, e)
  })
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.gl = g.gl || {};
  g.gl.QLFloodFill = function() {
    var f, d, a, e, g, l, b, c, p, w, m, u, t, h, r, k, v, x, s, z, y,
      B, A, C, F, E, D = function(a) {
        p = a.src;
        w = a.srcRect || {
          x: 0,
          y: 0,
          width: p.canvas.width,
          height: p.canvas.height
        };
        m = a.srcData || p.getImageData(w.x, w.y, w.width, w.height);
        t = a.dst;
        h = a.dstRect || {
          x: 0,
          y: 0
        };
        r = a.dstData || t.getImageData(w.x, w.y, w.width, w.height);
        v = w.width || 0;
        x = w.height || 0;
        s = 4 * v;
        if ("number" === typeof a.tolerance) {
          var b = 255 * a.tolerance;
          z = [b, b, b, b]
        } else b = a.tolerance, z = [255 * b[0], 255 * b[1], 255 * b[2],
          255 * b[3]
        ];
        y =
          a.contiguous
      };
    D.prototype.render = function(D) {
      if (!isFinite(D.x + D.y)) return console.log(
        "pt.x || pt.y is NaN");
      var J = Math.round(D.x),
        N = Math.round(D.y);
      D = s * N + 4 * J;
      B = t.createImageData(v * x / 4 + 1 >> 0, 1).data;
      m = m || p.getImageData(w.x, w.y, w.width, w.height);
      r = r || t.getImageData(w.x, w.y, w.width, w.height);
      u = m.data;
      k = r.data;
      f = u[D] - z[0];
      d = u[D + 1] - z[1];
      a = u[D + 2] - z[2];
      e = u[D + 3] - z[3];
      g = u[D] + z[0];
      l = u[D + 1] + z[1];
      b = u[D + 2] + z[2];
      c = u[D + 3] + z[3];
      C = [];
      E = F = 0;
      if (y)
        for (P(J, N); 0 < E;) {
          A = C[F];
          F++;
          E--;
          for (var N = v * (A.y + 1) + A.startx, K = v * (A.y -
                1) + A.startx, O = A.y - 1, V = A.y + 1, J = A.endx, L = A
              .startx; L <= J; L++) D = s * O + 4 * L, 0 < A.y && !B[K] &&
            u[D] >= f && u[D] <= g && u[D + 1] >= d && u[D + 1] <= l &&
            u[D + 2] >= a && u[D + 2] <= b && u[D + 3] >= e && u[D + 3] <=
            c && P(L, O), D = s * V + 4 * L, A.y < x - 1 && !B[N] && u[D] >=
            f && u[D] <= g && u[D + 1] >= d && u[D + 1] <= l && u[D + 2] >=
            a && u[D + 2] <= b && u[D + 3] >= e && u[D + 3] <= c && P(L,
              V), N++, K++
        } else
          for (J = u.length, D = 0; D < J; D += 4) N = u[D + 3] / 255,
            N * u[D] >= f && N * u[D] <= g && N * u[D + 1] >= d && N * u[
              D + 1] <= l && N * u[D + 2] >= a && N * u[D + 2] <= b && u[
              D + 3] >= e && u[D + 3] <= c && (k[D + 3] = 255);
      t.putImageData(r, h.x, h.y)
    };
    var P = function(h, m) {
      for (var p =
          h, r = s * m + 4 * h, t = v * m + h; B[t] = 1, k[r + 3] = 255,
        t--, r -= 4, p--, !(0 > p) && u[r] >= f && u[r] <= g && u[r +
          1] >= d && u[r + 1] <= l && u[r + 2] >= a && u[r + 2] <= b &&
        u[r + 3] >= e && u[r + 3] <= c;);
      for (var x = h, r = s * m + 4 * h, t = v * m + h; B[t] = 1, k[r +
          3] = 255, t++, r += 4, x++, !(x >= v) && u[r] >= f && u[r] <=
        g && u[r + 1] >= d && u[r + 1] <= l && u[r + 2] >= a && u[r +
          2] <= b && u[r + 3] >= e && u[r + 3] <= c;);
      E + F === C.length && (C.splice(0, F), F = 0);
      C[F + E] = {
        startx: ++p,
        endx: --x,
        y: m
      };
      E++
    };
    return D
  }()
})(sketch);

(function(g) {
  g.registerToolkit("brush.textbrush", function(f, d, a, e) {
    var g = 0,
      l = 0;
    this.prepare = d.toolkit.prepareBrush;
    this.construct = function(a) {
      this.fontFamily = a.fontFamily || "Georgia";
      this.fontSize = a.fontSizeFloor || {
        min: 10,
        max: 100
      };
      this.content = a.content && a.content.value || "";
      this.spacing = a.spacing || [0, 10];
      e(this)
    };
    this.drawStart = function() {
      g = this.x;
      l = this.y
    };
    this.draw = function() {
      var a = this.ctx,
        c = this.fill.__colors || [],
        d = this.x - g,
        e = this.y - l,
        f = Math.sqrt(d * d + e * e);
      a.save();
      a.font = Math.max(this.fontSize.min,
        f / 2) + "px " + this.fontFamily;
      a.fillStyle = c[(2 * this.interval + 1) % c.length];
      var c = this.content[this.interval % this.content.length],
        u = a.measureText(c).width;
      f > u && (d = Math.atan2(e, d), a.translate(g, l), a.rotate(d),
        a.fillText(c, 0, 0), g += Math.cos(d) * u, l += Math.sin(d) *
        u);
      a.restore()
    };
    this.construct(a, e)
  })
})(sketch);

(function(sketchObj) {
  sketchObj.registerToolkit(["brush.oil", "brush.pastel"], function(d, a, e, g) {
    var l = this,
      b, c, p, w, m = {};
    this.construct = function(a, b) {
      this.opacity = a.opacity || 100;
      this.rotate = a.rotate || {
        min: 0,
        max: 0
      };
      this.diameter = a.diameter || 30;
      this.bristles = a.bristles || 30;
      var c = this.diameter / 3;
      this.spacing = a.spacing || {
        min: c,
        max: c
      };
      this.blend = a.blend || .97;
      this.fill = a.fill || d.style.fill;
      b(this)
    };
    this.drawStart = function() {
      var e = this.ctx;
      this.interval = this.interval || 0;
      this.rand = new d.util.Random(this.seed || 1);
      m[this.finger] =
        f(this);
      var g = e.canvas,
        h = this.bbox || {
          x: 0,
          y: 0
        };
      b = e.getImageData(0, 0, g.width, g.height);
      c = a.contexts.layer0.ctx.getImageData(h.x, h.y, g.width, g.height);
      p = b.data;
      w = c.data
    };
    this.drawEnd = function() {
      delete m[this.finger]
    };
    this.draw = function() {
      if (m[this.finger])
        for (var a = this.blend, b = 1 - a, c = m[this.finger], d = c
            .length, e = this.ctx.canvas.width, f = this.ctx.canvas.height,
            g = this.rotate.min, s = this.rotate.max, g = 0 === g && 0 ===
            s ? 0 : (s - g) * this.rand.toDouble() + g, s = this.px >>
            0, q = this.py >> 0, y = 0; y < d; y++) {
          var B = c[y],
            A = B.color;
          if (g) var C =
            Math.cos(g) * B.x - Math.sin(g) * B.y >> 0,
            F = Math.sin(g) * B.x + Math.cos(g) * B.y >> 0;
          else C = B.x, F = B.y;
          this.isRecording || (C += this.diameter / 2, F += this.diameter /
            2);
          B = 4 * ((q + F) * e + (s + C));
          if (!(0 > s + C || s + C > e - 1 || 0 > q + F || q + F > f -
              1))
            if (p[B + 3]) {
              var C = w[B + 0],
                F = w[B + 1],
                E = w[B + 2],
                D = w[B + 3];
              isFinite(C) || (C = p[B + 0]);
              isFinite(F) || (F = p[B + 1]);
              isFinite(E) || (E = p[B + 2]);
              D < p[B + 3] && (D = p[B + 3]);
              var P = A.r = A.r * a + C * b,
                G = A.g = A.g * a + F * b,
                J = A.b = A.b * a + E * b,
                A = A.a * l.opacity / 100;
              p[B + 0] = w[B + 0] = (P * A + C * (255 - A)) / 255;
              p[B + 1] = w[B + 1] = (G * A + F * (255 - A)) / 255;
              p[B + 2] = w[B + 2] = (J * A + E * (255 - A)) / 255;
              A = A / 255 * D + A;
              A > D && (p[B + 3] = A);
            } else p[B + 0] = A.r, p[B + 1] = A.g, p[B + 2] = A.b, p[B +3] = A.a;
        }
    };
    this.postprocess = function(a) {
      this.ctx.putImageData(b, 0, 0)
    };
    this.construct(e, sketchObj)
  });
  var f = function(d) {
    var a = [],
      e = {},
      f = d.diameter * d.bristles,
      l = d.diameter / 2 >> 0,
      b = d.fill.__colors || [],
      c = b[(2 * ++d.interval + 1) % b.length];
    if (!c.substr) return console.log("does not support patterns");
    "color" === d.fill.type ? (c = sketchObj.color.space(c, "W3>HEX24>RGBA"),
      d.brushColor = [c.R, c.G, c.B, c.A]) : (d.brushColor = c.substr(
        5, c.length - 6).split(",").map(function(a) {
        return parseInt(a)
      }),
      d.brushColor[3] *= 255);
    for (var p = 0; p < f; p++) {
      d.fill.noise && (c = b[(2 * ++d.interval + 1) % b.length], d.brushColor =
        c.substr(5, c.length - 6).split(",").map(function(a) {
          return parseInt(a)
        }), d.brushColor[3] *= 255);
      var w = d.rand.toDouble() * l,
        c = 1.5 - w / l,
        m = 2 * d.rand.toDouble() * Math.PI,
        u = Math.sin(m) * w + l + .5 >> 0,
        w = Math.cos(m) * w + l + .5 >> 0,
        m = u + "" + w;
      "undefined" === typeof e[m] && (e[m] = !0, a.push({
        x: u - l,
        y: w - l,
        color: {
          r: d.brushColor[0],
          g: d.brushColor[1],
          b: d.brushColor[2],
          a: 255 * c
        }
      }))
    }
    return a
  }
})(sketch);

(function(g) {
  g.registerToolkit("eyedropper", function(f, d) {
    var a = this,
      e = d.toolkit,
      g = d.scene;
    f.module.Listener(a);
    a.id = "eyedropper";
    a.enabled = !1;
    a.enable = function() {
      !1 === a.enabled && (a.enabled = !0, a.onDrag = eventjs.add({
        type: "drag",
        monitor: !0,
        position: "relative",
        target: d.contexts.active,
        listener: a.onPointer,
        fingers: 1
      }), e.select && d.tool !== e.select && e.select.enable({
        mouse: !1,
        key: !0
      }))
    };
    a.disable = function() {
      !0 === a.enabled && (a.enabled = !1, a.onDrag.remove(), e.select &&
        d.tool !== e.select && e.select.disable({
          mouse: !1,
          key: !0
        }))
    };
    a.onPointer = function(d, b) {
      var c = g.findPixel(b),
        e = b.pointerEnd;
      (b.pointerMove || b.pointerStart) && a.on.over ? a.on.over(c) :
        e && a.on.select ? a.on.select(c) : 255 === c[3] && (c = f.color
          .space(c, "RGB>HEX24>W3"), f.ui.colorPicker.update(c, !0))
    };
    return e.init(a)
  })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Thumbnailer = function(q, l, b) {
    "string" === typeof q && (q = {
      src: q
    });
    var c;
    b = q.src;
    var p = q.canvas || f(),
      w = p.ctx || p.getContext("2d");
    l = q.onload || l;
    var m = q.background || "none";
    "none" === m && (m = "");
    var u = q.shadow || !1,
      t = q.resample || "bicubic",
      h = q.center || !1,
      r = function() {
        var a = c.width,
          b = c.height;
        if (a || b) {
          var b = g.util.fitSize(a, b, q),
            d = b.width,
            f = b.height,
            a = b.ratio,
            k = b.crop,
            r = b.croparea;
          p.width = d;
          p.height = f;
          m && (w.save(), w.rect(0, 0, d, f), w.fillStyle = m, w.fill(),
            w.restore());
          u &&
            (w.shadowBlur = u.blur || 0, w.shadowOffsetX = u.offsetX || 0,
              w.shadowOffsetY = u.offsetY || 0, w.shadowColor = u.color ||
              "transparent");
          var b = r.x1,
            v = r.y1,
            F = r.x2,
            r = r.y2,
            E = F - b,
            D = r - v;
          if ("stretch" === k) w.drawImage(c, b, v, E, D, 0, 0, d, f);
          else {
            var k = Math.round(E * a) || 1,
              P = Math.round(D * a) || 1,
              d = Math.round(h ? (d - k) / 2 : 0),
              f = Math.round(h ? (f - P) / 2 : 0);
            if ("lanczos" === t && "undefined" !== typeof e) {
              var G = c.width / k,
                J = c.height / P,
                a = Math.max(G, J) >> 0;
              c = e(c, k, P, a);
              Math.round(F / G);
              Math.round(r / J)
            }
            w.drawImage(c, b, v, E, D, d, f, k, P)
          }
          l && l(p, c)
        } else l && l(p,
          c), console.error("missing image")
      },
      k = String(b),
      v = "function" === typeof FlashCanvas;
    d[k] || v && "[object]" === k ? (c = b, r()) : (p.setAttribute(
        "data-src", b), c = "undefined" === typeof document ? new a.Image :
      new Image, v ? (c.src = b, w.loadImage(c, r)) : g.util.loadImage({
        src: b,
        image: c,
        onload: r
      }));
    return p
  };
  g.util.fitSize = function(a, d, b) {
    b = b || {};
    var c = b.crop || "none",
      e = isFinite(b.width) ? b.width : "auto",
      f = isFinite(b.height) ? b.height : "auto",
      g = b.maxWidth || Infinity,
      u = b.maxHeight || Infinity,
      t = b.minWidth || 0,
      h = b.minHeight || 0;
    if (!e &&
      !g || !f && !u) return console.error("invalid dimensions");
    b = b.croparea;
    b = Array.isArray(b) ? {
      x1: b[0],
      y1: b[1],
      x2: b[2] || a,
      y2: b[3] || d
    } : b || {
      x1: 0,
      y1: 0,
      x2: a,
      y2: d
    };
    a = "fit" === c;
    d = b.x2 - b.x1 || 0;
    var r = b.y2 - b.y1 || 0,
      k = d / r;
    if (0 === d || 0 === r) console.warn("invalid dimensions");
    else {
      var v = e,
        x = f;
      "auto" === e && "auto" === f ? (v = d, x = r) : "auto" === e ? v =
        k * x : "auto" === f && (x = 1 / k * v);
      v > g && (v = g, "auto" === f && (x = 1 / k * v));
      x > u && (x = u, "auto" === e && (v = k * x));
      v < t && (v = t, "auto" === f && (x = 1 / k * v));
      x < h && (x = h, "auto" === e && (v = k * x));
      "none" === c ? k = 1 : (e = v / x < k, k = a && e ||
        !a && !e ? x / r : v / d);
      return {
        crop: c,
        croparea: b,
        width: v,
        height: x,
        ratio: k
      }
    }
  };
  var f = function() {
      var d;
      d = "undefined" === typeof document ? new a : document.createElement(
        "canvas");
      d.ctx = d.getContext("2d");
      return d
    },
    d = {
      "[object HTMLImageElement]": !0,
      "[object HTMLCanvasElement]": !0,
      "[object Canvas]": !0
    };
  if ("undefined" !== typeof module && module.exports) {
    var a = require("canvas"),
      e = require("./ResampleLanczos.js");
    module.exports = g.module.Thumbnailer
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.UI = function(f, d) {
    var a = f.dom,
      e = f.feature,
      g = f.lang,
      l = d.render,
      b = f.style,
      c = f.client,
      p = f.util.string,
      w = d.toolkit,
      m = f.ui,
      u = f.util,
      t = m.vars;
    m.media = {};
    m.media.clear =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=";
    m.media.transparent = f.gen.interlace({
      id: "transparent"
    });
    m.refresh = function(a) {
      m.setToolMenu(a, !0);
      m.configureRebuild(a)
    };
    m.configureBuild = function(b, c) {
      c = !!c;
      var h = a.$("#sk-configure");
      if (h && 0 !== h.offsetWidth && !1 !== f.sidebar.opened) {
        f.windows.restore && setTimeout(f.windows.restore, 1);
        var k = v(b);
        if (b = b || k.type) {
          k = isFinite(k.id) ? d.scene.createHash(k, {
            seed: !0,
            bbox: !0
          }) : k.type;
          if (String(k) === h.getAttribute("sk-hash")) {
            if (!1 === c) {
              var g;
              a: {
                h = b;
                if (d.scene && d.scene.children) {
                  var l = (k = d.selection.item) ? k.toolkit : {};
                  for (g in m.ranges) {
                    var r = m.ranges[g];
                    if (!r) {
                      e.debug && console.debug("disabled", g);
                      g = void 0;
                      break a
                    }
                    var s = void 0;
                    k && (s = k[g]);
                    void 0 === s && l.device && (s = l.device.brush ? l.device
                      .brush[g] :
                      l.device[g]);
                    void 0 === s && (s = d.scene.clone(d.config[h][g], !0));
                    if (void 0 !== s) {
                      var s = void 0 !== s.max ? [s.min, s.max] : void 0 !==
                        s.value ? s.value : s,
                        q = r.thumbs;
                      if (2 === q.length) {
                        if (q[0].value !== s[0] || q[1].value !== s[1]) q[0].value =
                          s[0], q[1].value = s[1], r.update(0, "load"), r.update(
                            1, "load")
                      } else 1 === q.length && (s = s[0] || s, q[0].value !==
                        s && (q[0].value = s, r.update(0, "load")))
                    }
                  }
                }
                g = void 0
              }
              return g
            }
          } else h.setAttribute("sk-hash", k);
          g = a.$("#sk-configure .sk-configure-header");
          "image" !== b || e.canvas.glfx || (b = "clipart");
          m.configureRebuild(b);
          d.scene && d.scene.children || !g || (h = p.ucwords(b.replace(
              "gl_", "").replace(/([A-Z])/g, " $1")), g.innerHTML =
            "<span>" + h + "</span>")
        }
      }
    };
    m.ranges = {};
    m.configureRebuild = function(b) {
      var c = a.empty("#sk-configure");
      e.pane.header && (0 === b.indexOf("gl_") ? m.addHeader(c, {
          title: b.substr(3)
        }) : "select" === d.tool.type ? m.addHeader(c, {
          title: "settings",
          right: {
            icon: "icon-gear",
            onclick: function(a, b) {
              m.contextMenu.show({
                target: b.target,
                menu: 1 === d.selection.length ? m.menu.select : d.selection
                  .length ? m.menu.selectMultiple : m.menu.selectDefault
              })
            }
          }
        }) :
        m.addHeader(c, {
          title: "settings"
        }));
      a.append(c, '<div class="sk-pane-content"></div>');
      if (c = x()) a.empty(c), m.ranges = {}, d.selection.item ? k(b,
          r(d.selection.item)) : window.glfx && window.glfx.config[b] ?
        k(b, glfx.config[b]) : k(b, d.config[b]), f.detect.useNoConfigure[
          b] && ("screenshot" === b ? (m.appendLineBreak(c), a.append(c,
            '<div class="sk-content-info">\t\t\t\t\t\t' + g.translate(
              "screenshot-tool-message") + "\t\t\t\t\t\t</div>")) :
          "zoom" === b ? (m.appendLineBreak(c), a.append(c,
            '<div class="sk-content-info">\t\t\t\t\t\t' +
            g.translate("zoom-tool-message") + "\t\t\t\t\t\t</div>")) :
          "select" === b && (m.appendLineBreak(c), a.append(c,
            '<div class="sk-content-info">\t\t\t\t\t\t\t<span class="sk-selection-count"></span>\t\t\t\t\t\t</div>'
          ), d.scene && d.scene.updateSelectionInfo()))
    };
    var h = u.arrayToObject(
        "reset filePicker subtool resource palette toolkit".split(" ")),
      r = function(a) {
        var c = d.config[a.type],
          e = w.getToolkit(a.type);
        if (!e) return console.warn(a);
        if (e = e.attributes) {
          var f = {},
            k;
          for (k in c)
            if (h[k]) f[k] = c[k];
            else switch (e[k]) {
              case "string":
                c[k] instanceof
                t.Select ? (f[k] = c[k], f[k].setValue(a[k])) : f[k] = a[k];
                break;
              case "style":
                f[k] = "fill" === k ? new b.Fill(a[k]) : new b.Stroke(a[k]);
                break;
              case "object":
              case "number":
                if (!c[k] || !c[k].clone) continue;
                f[k] = c[k].clone(a[k])
            }
          a.filter && (f.filter = new t.FilterStack({
            filter: a.filter
          }), delete f.palette);
          return f
        }
        return c
      },
      k = function(a, c) {
        var d = x(),
          h;
        for (h in c) {
          var k = c[h];
          if (k && k.type && !k.hidden) switch (k.constructor.type || k.type) {
            case "input":
            case "number":
              m.appendTag("Input", d, k);
              break;
            case "button":
              m.appendLineBreak(d);
              m.appendButton(d, k);
              break;
            case "checkbox":
              m.appendTag("Checkbox", d, k);
              break;
            case "clamp":
              k.onchange = s(c, k);
              m.appendRange(d, k);
              break;
            case "html":
              m.appendHTML(d, k);
              break;
            case "palette":
              2 === e.palette.version ? (c.fill && f.palette.createTrigger(
                d, c, c.fill, "fill", "fill"), c.stroke && f.palette.createTrigger(
                d, c, c.stroke, "stroke", "stroke")) : f.palette.append(d,
                c);
              break;
            case "select":
              var g = "blend" === k.label;
              if (g || e.style.blend) g && (k.selected = b.getCompositeReadable(
                k.selected)), m.appendSelect(d, k);
              break;
            case "textarea":
              m.appendTag("Input",
                d, k);
              break;
            case "filePicker":
              m.appendFilePicker(d, k);
              break;
            case "resource":
              m.appendResource(d, k);
              break;
            case "subtool":
              m.createSubtool(d, k, c.type);
              break;
            case "filter":
              m.appendFilterStack(d, k)
          }
        }
      },
      v = function(a) {
        a = a || d.tool.type;
        return d.selection.item || d.config[a] || window.glfx && window
          .glfx.config[a] || {}
      },
      x = function() {
        return a.$("#sk-configure .sk-pane-content")
      };
    m.appendFilePicker = function(b, c) {
      var d = a.create("div");
      d.className = "sk-file-picker";
      d.textContent = g.translate("load-your-own-image");
      b.appendChild(d);
      f.uploader.addFileInput({
        target: d,
        onchange: function(a, b) {
          if (c.onchange) c.onchange(a, b);
          else f.uploader.onChangeDefault(a, b)
        }
      })
    };
    m.appendButton = function(a, b) {
      var c = m.createElement("div", b);
      c.innerHTML = g.translate(b.title);
      c.classList.add("button");
      m.addClick(c, b.onclick);
      a.appendChild(c)
    };
    m.createSubtool = function(b, c, d) {
      var f = a.create("div");
      b.appendChild(f);
      var h = w.getToolCategory(d);
      if (h = m.icons[h])
        if ("list" === e.ui.subtool) {
          b = 0;
          for (var k in h.children) c = a.create(
              '<div class="sk-subtool"></div>'),
            a.setClass(c, h.children[k]), k === d && a.setClass(c,
              "selected"), f.appendChild(c), 0 === ++b % 6 && (c.style.borderRight =
              "none"),
            function(a, b) {
              m.tooltip && m.tooltip.add(a, b);
              m.addClick(a, function() {
                w.setType(b)
              })
            }(c, k)
        } else {
          f = {};
          for (k in h.children) {
            console.log("@@ Adding " + h.children[k]);
            f[k] = '<span class="' + h.children[k] + ' sk-icon"></span> ' + g.translate(k);
          } 
          d = new m.SelectMenu({
            id: "subtool",
            className: "selectmenu-holder",
            container: b,
            selected: d,
            options: f,
            onchange: function(a) {
              w.setType(a)
            }
          });
          m.appendLabel(b, d.container, c.title)
        }
    };
    m.appendTag = function(a,
      b, c) {
      var d = c.label;
      a = m[a](c);
      m.appendLabel(b, a, d)
    };
    m.appendHTML = function(a, b) {
      var c = m.createElement("div", b);
      b.innerHTML && (c.innerHTML = b.innerHTML);
      b.construct && b.construct(c);
      a.appendChild(c)
    };
    m.appendLabel = function(b, c, d) {
      m.appendLineBreak(b);
      var e = a.create("label"),
        f = a.create("span");
      f.className = "sk-title";
      f.innerHTML = g.translate(d);
      e.appendChild(f);
      e.appendChild(c);
      e.className = "sk-label";
      b.appendChild(e);
      return e
    };
    m.ensureInstanceOf = function(a, b) {
      return a instanceof b ? a : new b(a)
    };
    m.appendSelect =
      function(a, b) {
        b = m.ensureInstanceOf(b, t.Select);
        var c = new m.SelectMenu({
          id: b.param,
          className: "selectmenu-holder",
          container: a,
          labelIcon: b.labelIcon,
          options: b.getOptions(),
          selected: b.selected,
          tooltip: b.title,
          onopen: b.onopen,
          onclose: b.onclose,
          onchange: function(a) {
            b.onchange(b.param, a);
            d.saveSettings()
          }
        });
        m.appendLabel(a, c.container, b.label);
        return c
      };
    m.appendResource = function(a, b) {
      var c = b.format;
      m.appendLineBreak(a);
      F(a, b, c)
    };
    m.appendLineBreak = function(b) {
      a.append(b, '<div class="sk-break"></div>')
    };
    m.appendRange =
      function(b, c) {
        c = m.ensureInstanceOf(c, t.Range);
        var d = c.getArray(),
          e = c.param;
        "spacing" === e && (d = [d[0]]);
        m.appendLineBreak(b);
        var f = a.create("div");
        f.className = "sk-slider";
        b.appendChild(f);
        var h = a.create("span");
        h.className = "sk-title";
        f.appendChild(h);
        eventjs.add([f, h, b], "touchdown", eventjs.cancel, {
          strict: !0
        });
        h.setAttribute("data-cmd", e);
        h.innerHTML = g.translate(e);
        h = a.create("span");
        h.className = "values";
        f.appendChild(h);
        for (var k = 0; k < d.length; k++) {
          var p = m.Input({
            type: "text",
            format: "number",
            className: "value" +
              k,
            min: c.clamp.min,
            max: c.clamp.max,
            value: d[k],
            onchange: function(a) {
              var b = parseInt(this.className.substr(5)),
                c = l.thumbs[b];
              c.value !== a && (c.value = a, l.update(b))
            }
          });
          h.appendChild(p);
          d[k + 1] && (p = a.create("small"), p.innerHTML = "/", h.appendChild(
            p))
        }
        var l = new m.Range({
          parent: f,
          className: "sk-range",
          value: d.toString(),
          min: c.clamp.min,
          max: c.clamp.max,
          format: c.format,
          gradient: c.gradient,
          canCross: c.canCross,
          canPush: c.canPush,
          onchange: function(b, d) {
            w.area.inGenesis && w.area.hide();
            a.$(".value" + d.index, b.element.parentNode).value =
              10 < c.clamp.max ? Math.round(d.value) : Math.round(10 *
                d.value) / 10;
            if (c.onchange) return c.onchange(b, d)
          }
        });
        return m.ranges[e] = l
      };
    var s = function(a, b) {
      return function(c, e) {
        var f = "end" === c.state;
        if ("load" !== c.state) {
          var h = d.selection.items,
            k = u.isEmpty(h) && !1 === f;
          if (!k || void 0 === h) {
            var k = b.param,
              g = w.setConfigure(a, k, c.values);
            g && (g.getValue && (g = g.getValue()), w.setParam({
              selection: h,
              cacheObject: c,
              moduleId: a.type,
              param: k,
              value: g
            }), f && d.saveSettings())
          }
        }
      }
    };
    m.setToolMenu = function(b, c) {
      var d, e = w.getToolCategory(b);
      "brushes" === e ? d = a.$(".sk-brush-menu") : "shapes" === e ?
        d = a.$(".sk-shape-menu") : "utilities" === e && (d = a.$(
          ".sk-utility-menu"));
      if ((d = d || a.$("#tool-" + b) || a.$("." + e)) && d.parentNode) {
        if ((e = m.icons[e]) && e.children && (e = e.children[b.replace(
            "_", " ")], !0 !== e))
          if (d.id = "tool-" + b, d.setAttribute("data-title", g.translate(
              b)), 0 === e.indexOf("icon-")) {
            var f = a.$("img", d);
            f && (f.src = m.media.clear);
            if (f = a.$(".sk-icon", d) || d) {
              for (var h = "", k = f.className.split(" "), p = 0; p < k.length; p++)
                0 !== k[p].indexOf("icon-") && (h += " " + k[p]);
              f.className = h + " " + e
            }
          } else a.$("img", d).src = src;
        c || m.domSelectTool(d)
      }
    };
    m.addClick = function(a, b) {
      eventjs.add(a, "mousedown", function(a) {
        var b = document.activeElement;
        b && b.blur && b.blur();
        eventjs.cancel(a)
      });
      eventjs.add(a, "click", b)
    };
    m.on_dblclick_setup_tool = function(a, b) {
      f.sidebar.open()
    };
    m.on_click_setup_tool = function(a, b) {
      eventjs.prevent(a);
      var d = b.target,
        e = m.domParseSkTool(d),
        h = e.type;
      e.type && e.shortcut && (w.getConfig(e.type) || w.clone(e.type,
        e.shortcut));
      if (w.exists(e.type)) {
        if (e.type && (e.fill || e.stroke)) {
          var k =
            w.getConfig(e.type);
          f.style.cloneFillStroke(e, k)
        }
        m.setFilterStack(e);
        f.exec(h, function() {
          if (e.composite)
            for (var a = e.composite.split(","), b = 0; b < a.length; b++) {
              var h = a[b];
              if (c.gco[h]) {
                f.style.setComposite(h);
                break
              }
            }
          m.domSelectTool(d);
          f.ui.setPane("configure")
        }, function() {
          console.warn(h, "error or cancel")
        })
      } else f.exec(h, function() {})
    };
    m.domSelectTool = function(b) {
      a.setClass({
        className: "selected",
        list: a.$$(".sk-toolset .selected"),
        target: b,
        on: !0
      })
    };
    m.domParseSkTool = function(a) {
      var b = a.getAttribute("data-tool");
      if (b) return a = f.loc.parseQuery(b), d.scene.decompress(a);
      a = a.id;
      return {
        type: a && 0 === a.indexOf("tool") && a.substr(5)
      }
    };
    m.TSEvents = {};
    m.TSEvents.add = function(a) {
      z("add", a)
    };
    m.TSEvents.remove = function(a) {
      z("remove", a)
    };
    var z = function(b, c) {
        c = c || ".sk-toolset";
        u.each(a.$$(c + " img"), function(a) {
          eventjs[b](a, "mousedown", function() {
            return !1
          })
        });
        u.each(a.$$(c + " .sk-tool"), function(c) {
          var d = m.domParseSkTool(c).type;
          if (d && (u.each(a.$$(".sk-arrow", c), function(a) {
              var e, h;
              f.detect.brush[d] ? (e = "brushes", h = g.translate(
                  "choose-brush")) :
                f.detect.shape[d] ? (e = "shapes", h = g.translate(
                  "choose-shape")) : f.detect.utility[d] ? (e =
                  "utilities", h = g.translate("choose-utility")) : f.detect
                .media[d] && (e = "media", h = g.translate(
                  "choose-media"));
              eventjs[b](a, "mousedown", function(a) {
                eventjs.cancel(a);
                m.on_click_setup_tool(a, {
                  target: c
                });
                m.contextMenu.show({
                  target: this,
                  menu: m.menu[e]
                })
              });
              m.tooltip && m.tooltip[b](a, h)
            }), eventjs[b](c, "click", m.on_click_setup_tool), eventjs[
              b](c, "dblclick", m.on_dblclick_setup_tool), eventjs[b](c,
              "contextmenu", eventjs.cancel), m.tooltip)) m.tooltip[b](c,
            function() {
              return c.title || c.getAttribute("data-title")
            })
        })
      },
      y = function() {
        return "undefined" === typeof alertify ? console.warn(
          "alertify undefined") : !0
      },
      B = function(a, b) {
        if (!0 === b.skip) return b.callback(!0);
        "string" === typeof b && (b = {
          message: b
        });
        if (y()) {
          var c = g.translate(b.message),
            d = b.labels || {
              ok: "ok",
              cancel: "cancel"
            };
          d.ok = g.translate(d.ok || "ok");
          d.cancel = g.translate(d.cancel || "cancel");
          d.disregard && (d.disregard = g.translate(d.disregard));
          alertify.dialog(a, {
            message: '<h3 class="confirm-message">' + c + "</h3>",
            labels: d,
            callback: b.callback
          })
        }
      };
    m.alert = function(a) {
      B("alert", a)
    };
    m.confirm = function(a) {
      B("confirm", a)
    };
    m.error = function(a, b) {
      if (y()) return alertify.error(a, b)
    };
    m.log = function(a, b) {
      if (y()) return alertify.log(a, b)
    };
    m.appendFilterStack = function(a, b) {
      var c = b.value[0][0],
        e = "gl_" + c.id,
        f = window.glfx.config[e];
      if (f) {
        var h = d.selection.item,
          g = h && h.filter && h.filter[0][0];
        g && (c = g);
        g = l.getGLFX();
        g.activeFilter = c;
        g.activeItem = h;
        k(e, f)
      }
    };
    m.setFilterStackFromQuery = function(a) {
      a = d.scene.decompress(f.loc.parseQuery(a));
      m.setFilterStack(a);
      f.exec(a.type)
    };
    m.setFilterStack = function(a) {
      var c = d.config[a.type];
      if (c)
        if (a.filter) {
          var e = w.getToolkit(c.toolkit);
          d.scene.copyProperties(e, a, c);
          c.filter = a.filter;
          a.fill && (b.cloneFillStroke(c, b), b.fill.type = "color", f.palette
            .setPaintMethod("fill"))
        } else c.filter && (delete c.filter, delete c.usePixelData,
          delete c.useBackgroundOverlay)
    };
    var A = function(a) {
        var b = v(a),
          c = f.lib[a],
          d = c.tree,
          e = b.src || "",
          h = 0,
          k;
        for (k in d) ++h;
        c = b.fontFamily ? (a = f.lib.text.byName[b.fontFamily]) && a.category ||
          c.defaultCategory || k : (a = c.byPath[e.replace(a + "/", "")]) &&
          a.folder || c.defaultCategory || k;
        return c
      },
      C = {
        text: "fonts",
        stamp: "stamps",
        clipart: "clipart"
      },
      F = function(b, c, h) {
        b = a.append(b, '<div class="sk-resources"></div>');
        if (e.ui.scrollerCategories) {
          var k = A(h),
            g = f.lib[h].tree,
            p = {};
          c = c.title || C[h];
          for (var l in g) "Your Files" !== l && (p[l] = l);
          new m.SelectMenu({
            id: h + "_categories",
            className: "categories",
            tooltip: c,
            container: b,
            selected: k,
            options: p,
            onchange: function(a) {
              m.scrollers[h].scrollTo(a)
            }
          })
        }
        new m.InfiniteScroll(f,
          d, {
            type: h,
            target: b,
            folder: "*"
          })
      };
    m.fullpath = void 0;
    m.pageOnChange = void 0;
    m.pageTimeout = void 0;
    m.pageBuildFn = function(a, b) {
      var c = f.ui.fullpath;
      if ("configure" !== c || 1 === a) {
        if (m.pages[c]) m.pages[c](a, b);
        m.setPane(c, !0)
      }
    };
    m.pages = m.pages || {};
    m.pages.Configure = function() {
      m.configureBuild()
    };
    m.pages.Layers = function(a) {
      a = a || {};
      a = a.delay;
      "layers:" === f.ui.fullpath && (clearTimeout(m.pageTimeout), m.pageTimeout =
        setTimeout(function() {
          var a = f.perf();
          m.treeLayers.setData(d.scene.children);
          m.treeLayers.render();
          e.debug &&
            console.debug("rebuildLayers", a())
        }, a || 100))
    };
    m.pages.History = function(a) {
      a = a || {};
      a = a.delay;
      "history:" === f.ui.fullpath && (clearTimeout(m.pageTimeout), m
        .pageTimeout = setTimeout(function() {
          var a = f.perf();
          m.treeHistory.setData(d.history.vector.data);
          m.treeHistory.render();
          e.debug && console.debug("rebuildHistory", a())
        }, a || 100))
    };
    m.setPane = function(b, c) {
      if (m.fullpath !== b || !0 === c) {
        m.pageOnChange && (m.pageOnChange(), m.pageOnChange = void 0);
        var d = b.split(":");
        b = d[0] || "";
        var d = d[1] || "",
          e = b + ":" + d,
          h = ".icon-" + b.split("-").shift();
        (h = a.$(".sk-sidebar " + h)) && a.setClass({
          target: h,
          className: "selected",
          on: !0,
          list: a.$$(".sk-sidebar .tabs span")
        });
        a.setClass({
          target: "#sk-" + b,
          list: ".sk-pane",
          className: "selected"
        });
        m.fullpath = e;
        switch (b) {
          case "configure":
            m.configureBuild();
            break;
          case "document-new":
            m.pages.New();
            break;
          case "document-resize":
            m.pages.Resize();
            break;
          case "document-background":
            m.pages.Background();
            break;
          case "document-open":
            f.fs.fs && f.fs.updateProjects();
            break;
          default:
            if (e = p.ucwords(b), m.pages[e]) m.pages[e]({
              delay: !0,
              subpage: d
            });
            else a.$("#sk-" + b) || console.log("does this happen?")
        }
        u.setItem("ui.fullpath", m.fullpath);
        u.foreach(a.$$(".sk-translate"), function(a) {
          a.innerHTML = g.translate(a.innerHTML)
        })
      }
    };
    m.UISidebarTabs = function() {
      var b = function(b, d) {
          var e = a.append(c, '<span class="sk-' + b + " icon-" + b +
            '"></span>');
          m.tooltip && m.tooltip.add(e, d || b);
          m.addClick(e, function() {
            f.ui.setPane(b)
          })
        },
        c = a.$(".sk-sidebar .tabs");
      e.pane.configure && b("configure", "settings");
      e.pane.layers && (b("layers"), f.on("deselect", function(a) {
        "layers:" ===
        f.ui.fullpath && m.treeLayers.deselect(a)
      }), f.on("select", function(a) {
        "layers:" === f.ui.fullpath && m.treeLayers.select(a)
      }));
      e.pane.history && b("history");
      e.pane.open && b("document", "file");
      e.pane.save && b("save", "export");
      f.module.TreeMenu && (b = f.module.TreeMenu, m.treeLayers = new b(
          f, d, "#sk-layers .sk-pane-content", d.scene.children), m.treeHistory =
        new b(f, d, "#sk-history .sk-pane-content", d.history.vector.data)
      );
      f.on("transform", m.pages.History);
      f.on("open", m.pageBuildFn);
      f.on("undo", m.pageBuildFn);
      f.on("redo", m.pageBuildFn);
      f.on("cut", m.pageBuildFn);
      f.on("paste", m.pageBuildFn);
      f.on("sendForwards", m.pageBuildFn);
      f.on("sendBackwards", m.pageBuildFn);
      f.on("layerRemove", m.pageBuildFn);
      f.on("layerAdd", m.pageBuildFn);
      u.getItem("ui.fullpath", function(a) {
        f.ui.setPane(a || "configure")
      })
    };
    m.scrollable = function(a, b) {
      e.preventScroll && c.mobile && eventjs.add(a, "drag", function(
        c, d) {
        b || eventjs.stop(c);
        var e = a.scrollTop,
          f = d.ly - d.y;
        d.lx = d.x;
        d.ly = d.y;
        "touchmove" === c.type && (0 >= f && 0 >= e ? eventjs.prevent(
            c) : 0 <= f && e + a.offsetHeight >=
          a.scrollHeight && eventjs.prevent(c))
      }, {
        strict: !0
      })
    };
    m.addHeader = function(b, c) {
      var d = function(b, c) {
          if (b) {
            var d = a.append(p, '<span class="' + ("sk-href sk-" + c +
              " " + b.icon) + '"></span>');
            m.addClick(d, b.onclick)
          }
        },
        e = c.left,
        f = c.right,
        h = c.title,
        k = c.icon,
        p = a.append(b, '<div class="sk-row-head"></div>');
      a.appendText(p, g.translate(h));
      d(e, "left");
      d(f, "right");
      c.icon && a.append(p, '<span class="' + k + ' icon"></span>')
    };
    m.addFooter = function(b, c) {
      var d = a.append(b, '<div class="sk-footer"></div>');
      c.className && d.classList.add(c.className);
      c.cancel && m.addButton(d, c.cancel);
      c.ok && m.addButton(d, c.ok)
    };
    m.addButton = function(a, b) {
      m.appendButton(a, new t.Button(b))
    };
    m.Checkbox = function(b) {
      var c = b.param,
        e = b.checked,
        f = b.onchange,
        h = m.createElement("div", b),
        k = a.create("div"),
        g = a.create("div");
      k.appendChild(g);
      h.appendChild(k);
      var p = h.classList;
      h.className = "sk-checkbox";
      e && p.add("sk-checked");
      m.addClick(h, function(a) {
        m.tooltip && m.tooltip.update("");
        (a = b.checked = !p.contains("sk-checked")) ? p.add(
          "sk-checked"): p.remove("sk-checked");
        f ? f.call(b, a) :
          w.setParam({
            param: c,
            value: a
          });
        d.saveSettings()
      });
      return h
    };
    m.createElement = function(b, c) {
      var d = a.create(b);
      c.className && u.each(c.className.split(" "), function(a) {
        d.classList.add(a)
      });
      c.style && (d.style.cssText = c.style);
      c.title && m.tooltip && m.tooltip.add(d, c.title);
      c.onblur && eventjs.add(d, "blur", c.onblur);
      c.onfocus && eventjs.add(d, "focus", c.onfocus);
      d.$attr = c;
      d.$setParam = function(a, b) {
        void 0 !== c[a] && (c[a] = b);
        void 0 !== d[a] && (d[a] = b)
      };
      return d
    };
    m.contextMenu = m.contextMenu || {};
    m.contextMenu.show = function(b) {
      var c =
        b.target,
        d = b.point;
      b = b.menu;
      if (c) var c = a.measure(c),
        e = c.x1,
        f = c.y1 + c.height + 7;
      else d && (e = d.x, f = d.y);
      contextmenu.show(b, e, f)
    }
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.ui || (g.ui = {});
  var f = g.util,
    d = g.ui.vars = {};
  d.Button = function(d) {
    a(this, d = d || {});
    this.type = "button";
    this.onclick = d.callback || d.onclick
  };
  d.Checkbox = function(e) {
    a(this, e = e || {});
    this.type = "checkbox";
    this.checked = e.checked;
    this.onchange = e.onchange;
    this.setValue = function(a) {
      "boolean" === typeof a && this.checked !== a && (this.checked =
        a, this.onchange && this.onchange.call(this, a))
    };
    this.getValue = function() {
      return this.checked
    };
    this.clone = function(a) {
      var g = f.clone(e);
      a && (g.checked = a);
      return new d.Checkbox(g)
    }
  };
  d.HTML = function(d) {
    a(this, d = d || {});
    this.type = "html";
    this.innerHTML = d.innerHTML;
    this.construct = d.construct
  };
  d.Input = function(e) {
    a(this, e = e || {});
    this.type = e.type || "input";
    this.value = e.value;
    if ("number" === e.type || "number" === e.format) this.max = e.max ||
      f.INFINITY, this.min = e.min || -f.INFINITY, this.step = e.step ||
      "any", this.format = e.format || "number";
    this.onchange = e.onchange;
    this.setValue = function(a) {
      if ("number" === this.type && (a = parseFloat(a), this.max < a ||
          this.min > a)) return !1;
      this.value !== a && (this.value = a, this.onchange &&
        this.onchange.call(this, a))
    };
    this.getValue = function() {
      return this.value
    };
    this.clone = function(a) {
      var g = f.clone(e);
      a && (g.value = a);
      return new d.Input(g)
    }
  };
  d.Range = function(e) {
    a(this, e = e || {});
    var g = e.value;
    "object" === typeof g ? (this.min = isFinite(g.min) ? g.min : g[0],
      this.max = isFinite(g.max) ? g.max : g[1], this.getValue =
      function() {
        return {
          min: this.min,
          max: this.max
        }
      }, this.getArray = function() {
        return [this.min, this.max]
      }) : (this.value = g, this.getValue = function() {
      return this.value
    }, this.getArray = function() {
      return [this.value]
    });
    this.type = "clamp";
    this.format = e.format || "float";
    this.canCross = e.canCross;
    this.canPush = e.canPush;
    this.gradient = e.gradient;
    this.clamp = {};
    this.clamp.min = e.min;
    this.clamp.max = e.max;
    this.onchange = e.onchange;
    this.clone = function(a) {
      var b = f.clone(e);
      a && (b.value = a);
      return new d.Range(b)
    }
  };
  d.Select = function(e) {
    a(this, e = e || {});
    e.onchange || g.feature.debug && console.warn(
      "Select requires onchange", e);
    this.type = "select";
    this.labelIcon = e.labelIcon || "";
    this.options = e.options;
    this.selected = e.selected;
    this.onchange =
      e.onchange;
    this.onclose = e.onclose;
    this.onopen = e.onopen;
    this.setValue = function(a) {
      "string" === typeof a && (this.selected = a)
    };
    this.getValue = function() {
      return this.selected
    };
    this.getOptions = function() {
      var a = this.options;
      if ("function" === typeof a) return a();
      if (Array.isArray(a)) {
        for (var d = {}, b = 0; b < a.length; b++) {
          var c = a[b];
          d[c] = c
        }
        return d
      }
      return a
    };
    this.clone = function(a) {
      var g = f.clone(e);
      a && (g.selected = a);
      return new d.Select(g)
    }
  };
  d.Textarea = function(e) {
    a(this, e = e || {});
    this.type = "textarea";
    this.value = e.value;
    this.setValue = function(a) {
      "string" === typeof a && (this.value = a)
    };
    this.getValue = function() {
      return this.value
    };
    this.clone = function(a) {
      var g = f.clone(e);
      a && (g.value = a);
      return new d.Textarea(g)
    }
  };
  d.ColorPicker = function(e) {
    a(this, e = e || {});
    this.type = "color";
    this.color = e.color;
    this.setValue = function(a) {
      "string" === typeof a && (this.color = a)
    };
    this.getValue = function() {
      return this.color
    };
    this.clone = function(a) {
      var g = f.clone(e);
      a && (g.color = a);
      return new d.ColorPicker(g)
    }
  };
  d.Palette = function(d) {
    a(this, d || {});
    this.type =
      "palette"
  };
  d.FilePicker = function(d) {
    a(this, d = d || {});
    this.type = "filePicker";
    this.formats = d.formats;
    this.onchange = d.onchange
  };
  d.Resource = function(e) {
    a(this, e = e || {});
    this.type = "resource";
    this.format = e.format;
    this.clone = function(a) {
      a = f.clone(e);
      return new d.Resource(a)
    }
  };
  d.SubTool = function(d) {
    a(this, d || {});
    this.type = "subtool"
  };
  d.FilterStack = function(d) {
    a(this, d = d || {});
    this.type = "filter";
    this.value = d.filter;
    this.setValue = function(a) {
      this.value = a
    };
    this.getValue = function() {
      return this.value
    }
  };
  var a = function(a,
    d) {
    d.className && (a.className = d.className);
    d.style && (a.style = d.style);
    d.param && (a.param = d.param);
    d.title && (a.title = d.title);
    d.label && (a.label = d.label);
    d.hidden && (a.hidden = d.hidden);
    d.onfocus && (a.onfocus = d.onfocus);
    d.onblur && (a.onblur = d.onblur);
    d.useGhostLayer && (a.useGhostLayer = !0)
  }
})(sketch);

//Build toolbar buttons
"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  sketchObj.ui = sketchObj.ui || {};
  sketchObj.ui.Button = function(buttonObj) {
    var language = sketchObj.lang;
    this.data = {};
    this.add = function(buttonObj) {
      if (buttonObj && buttonObj.id && !this.data[buttonObj.id]) {
        console.debug("[Button] Add button " + buttonObj.title);
        var parent = buttonObj.parent,
          source = buttonObj.src;
        delete buttonObj.parent;
        delete buttonObj.src;
        var newSpan1 = document.createElement("span");
        newSpan1.className = "sk-tool";
        var newSpan2 = document.createElement("span");
        newSpan2.className = "sk-tool-title";
        newSpan2.innerHTML = language.translate(buttonObj.title || "");
        newSpan1.appendChild(newSpan2);
        buttonObj.symbol && (newSpan2 = document.createElement("span"), newSpan2.className = "sk-icon " + buttonObj.symbol, newSpan1.appendChild(newSpan2));
        newSpan1.events = {};
        for (var attribute in buttonObj) switch (attribute) {
          case "id":
          case "className":
            newSpan1[attribute] = buttonObj[attribute];
            break;
          case "onclick":
            newSpan1.events[attribute] = eventjs.add(newSpan1, attribute.substr(2), buttonObj[attribute]);
            break;
          case "title":
            newSpan1.setAttribute("data-title", buttonObj[attribute]);
            break;
          case "style":
          case "symbol":
          case "image":
            break;
          default:
            newSpan1.setAttribute(attribute, buttonObj[attribute]);
        }
        parent.appendChild(newSpan1);
        source && (parent = new Image, parent.src = source, parent.width = 26, newSpan1.appendChild(parent));

        return this.data[buttonObj.id] = newSpan1;
      }
    };
    this.remove = function(a) {
      if (a = this.data[a]) 
        delete this.data[buttonObj.id], a.parentNode && a.parentNode.removeChild(a);
    };
    this.disable = function(a) {
      if (a = this.data[a])
       a.classList.add("disabled"), a.events.onclick.remove();
    };
    this.enable = function(a) {
      if (a = this.data[a]) 
        a.classList.remove("disabled"), a.events.onclick.add();
    };
    return buttonObj ? this.add(buttonObj) : this;
  }
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.ui = g.ui || {};
  g.ui.Input = function(f) {
    var d = g.dom,
      a = g.ui;
    f = a.ensureInstanceOf(f, g.ui.vars.Input);
    var e = function(a, c) {
        if (!1 === f.setValue(a) || c) q.value = f.value
      },
      q = a.createElement("input", f);
    q.type = f.type;
    q.value = f.value;
    if (f.useGhostLayer) {
      var l = d.create("div");
      l.className = "sk-ghost-backdrop open";
      eventjs.add(q, "focus", function() {
        d.append(document.body, l)
      });
      eventjs.add(q, "blur", function() {
        d.remove(l)
      })
    }
    eventjs.add(q, "mousedown", eventjs.stop);
    "number" === f.format ? (q.step = f.step, q.min = f.min,
      q.max = f.max, eventjs.add(q, "keydown,change", function(a) {
        eventjs.stop(a);
        var c = f.min,
          d = f.max,
          g = "any" === f.step ? 1 : f.step,
          m = "number" === q.type;
        a = a.keyCode;
        38 === a || 40 === a ? m || (m = parseFloat(q.value.replace(
            /[^0-9]/g, "")), 38 === a && (m += g), 40 === a && (m -= g),
          g = Math.max(c, Math.min(d, m)), e(g, !0)) : setTimeout(
          function() {
            var a = parseFloat(q.value.replace(/[^0-9]/g, "")),
              a = Math.max(c, Math.min(d, a));
            e(a)
          }, 1)
      })) : eventjs.add(q, "change", function() {
      e(this.value)
    });
    return q
  }
})(sketch);

"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.ui = g.ui || {};
  g.ui.Range = function(a) {
    var e = this,
      q = a.css,
      l = a.onchange;
    e.target = a.target;
    e.setValue = function(a, b) {
      1 === e.thumbs.length && "undefined" === typeof b && (b = a, a =
        0);
      e.thumbs[a].value = b;
      e.update(a, "set")
    };
    e.target && (e.target.onchange && (l = e.target.onchange), e.target
      .setValue = e.setValue, a.value = e.target.value, a.min = e.target
      .getAttribute("min"), a.max = e.target.getAttribute("max"), a.step =
      e.target.getAttribute("step"));
    e.values = f(a.value, 0);
    e.min = d(a.min, 0);
    e.max = d(a.max, 100);
    e.step = d(a.step,
      1);
    e.thumbs = [];
    e.format = a.format;
    !0 === a.canCross ? (e.canCross = !0, e.canPush = !1) : !1 === a.canPush ?
      (e.canCross = !1, e.canPush = !1) : (e.canCross = !1, e.canPush = !
        0);
    var b = document.createElement("div"),
      c = document.createElement("span");
    c.className = "sk-track";
    b.appendChild(c);
    for (var p = 0, w = e.values.length, c = 0; c < w; c++) {
      var m = document.createElement("div");
      b.appendChild(m);
      e.thumbs.push({
        index: c,
        element: m,
        left: 0,
        value: e.values[c]
      })
    }
    if (2 === w) {
      var u = document.createElement("div");
      u.className = "sk-range-span";
      b.appendChild(u);
      var t = document.createElement("div");
      t.className = "sk-range-span";
      t.style.display = "none";
      b.appendChild(t)
    }
    e.element = b;
    e.setup = function() {
      a.parent && a.parent.appendChild(b);
      if (!q && (a.css = q = {}, a.className ? (q.slider = "", q.thumb =
            "") : (q.slider =
            "background: #000 -webkit-radial-gradient(45px 45px, cover, rgb(0, 0, 0) 0%, rgb(255, 255, 255) 100%); border: 1px solid #000; border-radius: 25px; width: 500px; height: 40px; top: 0; position: relative; z-index: 100",
            q.thumb =
            "background: #fff -webkit-radial-gradient(45px 45px, cover, rgb(0, 100, 255) 0%, rgb(255, 255, 255) 100%); border: 2px solid rgba(0,100,255,1); top: -2px; border-radius: 25px; width: 40px; height: 40px; position: absolute;"
          ),
          g.gen && g.gen.rangeBar && !g.feature.ui.customRangeBar)) {
        var c = g.gen.rangeBar({
          gradient: a.gradient,
          barWidth: b.offsetWidth
        });
        q.slider += "\t\t\t\t\tbackground-image: url(" + c.toDataURL() +
          ");\t\t\t\t\tbackground-size:" + c.style.width + " " + c.style
          .height + ";"
      }
      b.className = a.className;
      b.style.cssText = q.slider;
      for (c = 0; c < w; c++) e.thumbs[c].element.style.cssText = q.thumb
    };
    e.setAnimate = function(a, b) {
      var c = e.thumbs[a].element,
        d = c.style.left;
      c.style.cssText = q.thumb;
      c.style.left = d
    };
    e.update = function(a, c) {
      var d = a || 0,
        f = e.thumbs[d],
        g = e.values,
        m = f.element,
        p = b.offsetWidth || 236,
        y = m.offsetWidth || 10,
        B = y / 2;
      e.state = c || "change";
      y = p - y;
      y *= Math.max(0, Math.min(1, (f.value - e.min) / (e.max - e.min)));
      if (e.canPush) {
        var A = y + B;
        if (A < f.left)
          for (var C = f.index - 1; - 1 < C; C--) {
            var F = e.thumbs[C];
            F.left > A && (F.element.style.cssText = q.thumb, F.element.style
              .left = y + "px", F.left = A, F.value = f.value, g[C] = f.value,
              l(e, F))
          } else
            for (C = f.index + 1; C < w; C++) F = e.thumbs[C], F.left <
              A && (F.element.style.cssText = q.thumb, F.element.style.left =
                y + "px", F.left = A, F.value = f.value, g[C] = f.value,
                l(e, F));
        f.left = A
      } else if (e.canCross) f.left = y + B;
      else {
        A = y + B;
        if (A < f.left)
          for (C = f.index - 1; - 1 < C; C--) {
            if (F = e.thumbs[C], F.left > A) {
              y = F.left - B;
              A = F.left;
              F.value = f.value;
              g[C] = f.value;
              l(e, F);
              break
            }
          } else
            for (C = f.index + 1; C < w; C++)
              if (F = e.thumbs[C], F.left < A) {
                y = F.left - B;
                A = F.left;
                F.value = f.value;
                g[C] = f.value;
                l(e, F);
                break
              }
        f.left = A
      }
      g[d] = f.value;
      m.style.left = Math.round(y) + "px";
      l(e, f);
      2 === w && (d = e.thumbs[0].left, f = e.thumbs[1].left, d <= f ?
        (u.style.left = Math.min(d, f) + "px", u.style.width = Math.abs(
          d - f) + "px", t.style.display = "none") :
        (u.style.left = "0px", u.style.width = f + "px", t.style.left =
          d + "px", t.style.width = p - d + "px", t.style.display =
          "block"))
    };
    e.wheel = function(a, b) {
      var c = e.thumbs[0],
        d = (c.value - e.min) / (e.max - e.min),
        d = Math.min(1, Math.max(0, d - b.wheelDelta / 5E3));
      c.value = d * (e.max - e.min) + e.min;
      e.update(0, b.state)
    };
    e.mousedown = function(a, c) {
      for (var d = eventjs.getCoord(a), f = eventjs.getBBox(b), g =
          Infinity, m, d = d.x - f.x1, f = 0; f < w; f++) {
        var l = e.thumbs[f],
          q = l.left - d,
          t = Math.abs(q);
        if (0 > q && t <= g || -1 < q && t < g) g = t, m = l
      }
      if (m) {
        var u = m.element,
          C = m.index;
        u.style.zIndex =
          ++p;
        eventjs.proxy.drag({
          event: a,
          target: b,
          position: "relative",
          animationFrame: !0,
          listener: function(a, d) {
            var f = b.offsetWidth;
            e.setAnimate(C, "move" !== d.state);
            var h = u.offsetWidth,
              f = Math.max(0, Math.min(f - h, d.x - h / 2)) / (f - h);
            "down" === d.state ? (eventjs.blur(), eventjs.cancel(a),
              h = "start") : "up" === d.state ? (eventjs.cancel(a), h =
              "end") : (eventjs.cancel(a), h = "change");
            m.value = f * (e.max - e.min) + e.min;
            e.update(C, h);
            c && c(d)
          }
        })
      }
    };
    eventjs.add(b, "mousedown", e.mousedown);
    e.target && e.target.parentNode && (e.target.parentNode.insertBefore(
      b,
      e.target), e.target.style.display = "none");
    e.setup();
    for (c = w - 1; - 1 < c; c--) e.update(c, "load"), e.state =
      "load";
    return e
  };
  var f = function(a) {
      var d = [];
      if (!a) return [];
      for ("number" === typeof a ? a = [a] : "string" === typeof a && (
          a = -1 !== a.indexOf(",") ? a.split(",") : a.split(" ")); a.length;) {
        var f = parseFloat(a.shift());
        d.push(f)
      }
      return d
    },
    d = function(a, d) {
      return "number" === typeof a ? a : "NaN" === String(parseFloat(a)) ?
        d : parseFloat(a)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = {};
  g.ui = g.ui || {};
  g.ui.SelectMenu = function(d) {
    if (d) {
      d.id || console.warn("id not defined");
      var a = this,
        e = g.dom,
        q = g.lang,
        l = g.client,
        b = g.util,
        c = g.ui,
        p = d.id,
        w = d.container,
        m = d.options,
        u = d.selected,
        t = d.icon,
        h = d.title,
        r = d.className,
        k = d.tooltip,
        v = d.style || "",
        x = !1 !== d.useBackdrop,
        s = d.onchange,
        z = d.onopen,
        y = d.onclose,
        B = document.createElement("div");
      B.className = "sk-selectmenu-container";
      p && (B.id = p);
      r && B.classList.add(r);
      h && (B.title = q.translate(h));
      v && (B.style.cssText = v);
      w.appendChild(B);
      var A =
        l.mobile,
        C = document.createElement(A ? "a" : "input");
      C.href = "#";
      C.className = "sk-focus-element";
      B.appendChild(C);
      var F = document.createElement("div");
      F.className = "sk-selectmenu-header";
      var E = document.createElement("span");
      E.className = "data-header";
      F.appendChild(E);
      t ? 0 === t.indexOf("http") || 0 === t.indexOf(".") ? (d =
          document.createElement("img"), d.src = t, F.appendChild(d)) :
        (l = document.createElement("span"), l.className = t, F.appendChild(
          l)) : (l = document.createElement("span"), l.className = d.labelIcon ||
          "icon-caret-down",
          F.appendChild(l));
      B.appendChild(F);
      k && c.tooltip && c.tooltip.add(F, function() {
        return q.translate(a.tooltip)
      });
      var D = document.createElement("ul");
      D.className = "sk-selectmenu";
      var P = document.createElement("div");
      P.className = "icon-caret-down arrow-down arrow";
      var G = document.createElement("div");
      G.className = "icon-caret-up arrow-up arrow";
      var J = document.createElement("div");
      J.className = "sk-selectmenu-backdrop";
      J.appendChild(D);
      J.appendChild(P);
      J.appendChild(G);
      var N = function(c, d) {
          b.foreach(c, function(c, f) {
            var h =
              c.name || c,
              k = d ? h : f,
              g = document.createElement("li");
            if ("~br~" === h) g.className = "sk-selectmenu-break";
            else {
              var m = document.createElement("span"),
                p = q.translate(h);
              da.push(k);
              U[k] = {
                id: k,
                idx: f,
                name: h,
                translation: p.replace(/(<([^>]+)>)/ig, "").trim(),
                target: m
              };
              h = function(c, d) {
                eventjs.cancel(c);
                var e = m.querySelector(".sk-selectmenu-option").getAttribute(
                  "data-id");
                250 > b.timestamp() - a.openTimestamp || (a.setValue(e),
                  a.close())
              };
              A ? (eventjs.add(m, "mousedown", eventjs.stop), eventjs.add(
                m, "click", h)) : (eventjs.add(m,
                "mousedown", eventjs.cancel), eventjs.add(m, "mouseup",
                h), eventjs.add(m, "mouseover", function(a) {
                e.setClass({
                  target: this,
                  list: D.querySelectorAll(".sk-selectmenu-item"),
                  className: "sk-hovered"
                })
              }));
              h = document.createElement("span");
              h.className = "sk-selectmenu-option";
              h.innerHTML = p;
              h.setAttribute("data-id", k);
              m.className = "sk-selectmenu-item";
              k === a.selected && m.classList.add("sk-selected");
              m.appendChild(h);
              g.appendChild(m)
            }
            D.appendChild(g)
          })
        },
        K = function(a, b) {
          var c = window.innerWidth,
            d = a.width,
            e = Math.max(d, b.width),
            f = b.x1,
            c = c - b.x2,
            h = Math.max(f, c);
          D.style.minWidth = d + "px";
          c >= e ? D.style.left = a.x1 + a.margin[0] + "px" : f >= e ? D
            .style.left = a.x2 - e - a.margin[0] + "px" : (D.style.width =
              h + "px", D.style.left = f > c ? "0px" : a.x1 + "px");
          e = window.innerHeight;
          d = b.height;
          f = a.y1;
          c = e - a.y2;
          h = Math.max(f, c);
          c >= d ? D.style.top = a.y2 + "px" : f >= d ? D.style.top = a.y1 -
            d + "px" : (D.style.height = h + "px", D.style.top = f > c ?
              "0px" : a.y2 + "px")
        },
        O = function() {
          if (a.selectedElement) {
            var b = eventjs.getBBox(a.selectedElement),
              c = eventjs.getBBox(D),
              d = c.height - b.height,
              b = b.y1 - c.y1;
            0 >
              b ? D.scrollTop += b - 12 : b > d && (D.scrollTop += b - d +
                12)
          }
        };
      a.isOpen = function() {
        return D.classList.contains("open")
      };
      a.open = function() {
        if (!a.isOpen()) {
          clearTimeout(a.close.timeout);
          D.style.display = "block";
          var b = D.querySelector(".sk-hovered");
          b && b.classList.remove("sk-hovered");
          x ? (document.body.appendChild(J), J.style.zIndex = 999999) :
            (document.body.appendChild(D), D.style.zIndex = 999999);
          b = e.measure(F);
          D.style.top = b.y1 + b.height + "px";
          "left" !== g.feature.pane.projects && (D.style.left = b.x1 +
            b.margin[3] + "px");
          D.style.height =
            "";
          D.style.width = "";
          setTimeout(function() {
            x ? J.classList.add("open") : D.classList.add("open")
          }, 1);
          var c = e.measure(D);
          K(b, c);
          A || (c = e.measure(D), V(G, c, c.y1 + 2, "paddingTop"), V(P,
            c, c.y2 - 12, "paddingBottom"));
          O();
          T();
          z && z()
        }
      };
      var V = function(a, b, c, d) {
        D.offsetHeight < D.scrollHeight ? (a.style.display = "block",
          a.style.height = "12px", a.style.width = b.width + "px", a.style
          .top = c + "px", a.style.left = b.x1 + "px", D.style[d] =
          "12px") : (a.style.display = "none", D.style[d] = "")
      };
      a.close = function(b, c) {
        f[b || a.id].input.blur();
        setTimeout(function() {
          x ?
            J.classList.remove("open") : D.classList.remove("open");
          a.close.timeout = setTimeout(function() {
            D.style.position = "";
            D.style.left = "";
            D.style.top = "";
            D.style.display = "none";
            x ? J.parentNode && J.parentNode.removeChild(J) : D.parentNode &&
              D.parentNode.removeChild(D)
          }, 250)
        }, 100);
        y && y()
      };
      a.setValue = function(b, c) {
        b = String(b);
        if (c || a.selected !== b) {
          var d = U[b];
          d && (d = d.target, a.selectedElement = d, a.selected = b, O(),
            R(), e.setClass({
              target: d,
              list: D.querySelectorAll(".sk-selectmenu-item"),
              className: "sk-selected"
            }), !0 !== c && s &&
            s(b))
        }
      };
      d = function(b) {
        a.openTimestamp = null;
        a.close(null, !0)
      };
      var L = function(c) {
          var d = b.timestamp();
          50 > d - a.openTimestamp || (a.openTimestamp = d, eventjs.cancel(
            c), a.isOpen() ? a.close() : (C.focus(), a.open()))
        },
        l = function(c) {
          var d = c.keyCode;
          if (27 === d || 13 === d) eventjs.stop(c), C.blur(), a.close();
          else if (c = 0, 40 === d && c++, 38 === d && c--, c) {
            var d = c,
              e = a.selected;
            c = da.length - 1;
            e = da.indexOf(e);
            e = b.clamp(e + d, 0, c);
            e = da[e];
            a.setValue(e)
          } else Q(d)
        },
        T = function() {
          0 === D.scrollTop ? G.classList.remove("active") : G.classList
            .add("active");
          D.scrollTop + D.offsetHeight === D.scrollHeight ? P.classList.remove(
            "active") : P.classList.add("active")
        },
        Q = function(b) {
          if (8 === b) C.value = "";
          else {
            var c, d = 0;
            setTimeout(function() {
              var b = C.value.toLowerCase();
              if (b[0]) {
                clearTimeout(C.timeout);
                C.timeout = setTimeout(function() {
                  C.value = ""
                }, 1E3);
                var e = function(a, b) {
                    for (var c = 0; c < a.length && b[c] === a[c]; c++);
                    return c
                  },
                  f;
                for (f in U) {
                  var h = U[f],
                    k = h.translation.toLowerCase();
                  (k = e(k, b)) && k > d && (c = h.id, d = k)
                }
                c && a.setValue(c)
              }
            }, 0)
          }
        };
      c.scrollable(D);
      eventjs.add(C, "blur", d);
      eventjs.add(J, "mousedown", eventjs.cancel);
      eventjs.add(J, "click", d);
      A ? eventjs.add(F, "click", L) : (eventjs.add(C,
        "keydown,keypress", l), eventjs.add(G, "hover", function(a,
        b) {
        D.scrollTop += -25
      }), eventjs.add(P, "hover", function(a, b) {
        D.scrollTop += 25
      }), eventjs.add(D, "scroll", T), eventjs.add(F, "drag",
        function(b, c) {
          "down" === c.state ? L(b) : "up" === c.state && 15 < c.distanceMoved() &&
            a.close()
        }));
      var U, da;
      f[p] = a;
      a.container = B;
      a.input = C;
      a.ul = D;
      a.id = p;
      a.options = m;
      a.selected = u;
      a.tooltip = k;
      a.rebuild = function() {
        aa()
      };
      var aa = function() {
          e.empty(D);
          U = {};
          da = [];
          if (Array.isArray(a.options)) N(a.options, !0);
          else {
            var b, c;
            for (c in a.options) "string" !== typeof a.options[c] && (b =
              document.createElement("span"), b.innerHTML = q.translate(c),
              b.className = "optgroup", D.appendChild(b), N(a.options[c])
            );
            b || N(a.options)
          }
          R()
        },
        R = function() {
          if (void 0 === t) {
            var b = U[a.selected];
            b && (E.innerHTML = q.translate(b.name))
          }
        };
      aa();
      return a
    }
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.UICursor = function(f, d) {
    var a = f.client,
      e = f.feature,
      g = f.ui,
      l = f.util,
      b = f.vector,
      c = l.Canvas(),
      p = c.ctx,
      w, m = function(a) {
        return (c.style.cursor = a) === c.style.cursor.split('"').join(
          "")
      },
      u = f.ui.media.transparent.css,
      t = m(u + ", auto"),
      h = !a.safari;
    h && (h = m("-webkit-image-set(" + u + " 2x), auto"));
    var r = {
        n: 360,
        ne: 45,
        e: 90,
        se: 135,
        s: 180,
        sw: 225,
        w: 270,
        nw: 315
      },
      k = {
        ns: 360,
        nesw: 45,
        ew: 90,
        nwse: 135
      },
      v = Object.keys(r),
      x = Object.keys(k),
      s = {};
    b.SVGPath && (s.resize = b.SVGPath.toVOBPath(
        "M14.3,8.5 9.7,2.2 5.1,8.5 8.3,8.5 8.3,17.3 11.1,17.3 11.1,8.5z"
      ),
      s.rotate = b.SVGPath.toVOBPath(
        "M16.6,8.5l-1.4-1.4c-2.9-2.9-7.6-2.9-10.5,0L3.3,8.4L1.5,6.6l-0.9,6.3l6.4-1l-1.8-1.8l1.3-1.3c1.9-1.9,5-1.9,6.9,0l1.4,1.4L13,12.1l6.4,1l-1-6.4C18.4,6.7,16.6,8.5,16.6,8.5z"
      ));
    g.setCursor = function(f, g) {
      if (!a.mobile) {
        f = f || "";
        var m, q;
        if (f.indexOf && -1 !== f.indexOf("-")) {
          var u = f.split(", ")[0].split("-");
          q = u[0];
          m = u[1]
        }
        var u = d.contexts.active,
          F, E;
        r[q] ? (F = r[q], E = v) : k[q] && (F = k[q], E = x);
        if (F && (g = g || d.scene.getFocused())) {
          var D = g.bbox,
            P = D.scale;
          F = D.rotate + b.Degree.scale(F, P.x, P.y);
          D =
            Math.round((F + 3600) % 360 / 45);
          f = f.replace(q, E[D % E.length]);
          q = f + (F - F % 10 >> 0);
          w !== q && (w = q, t && s[m] && e.ui.dynamicCursor && (q = h &&
            a._pixelRatio || 1, E = (c.width = c.height = 20 * q) / 2,
            p.translate(E, E), p.rotate(F * l.DEG_RAD), p.translate(-E, -
              E), p.scale(q, q), b.Shape.VOBPath(p, s[m]), p.shadowBlur =
            3, p.shadowOffsetX = 0, p.shadowOffsetY = 1, p.shadowColor =
            "#000", p.lineWidth = 2, p.strokeStyle = "#fff", p.stroke(),
            p.shadowBlur = null, p.fillStyle = "#000", p.fill(), m = c
            .toDataURL(), f = h && 2 === q ? "-webkit-image-set(url(" +
            m + ") 2x) 10 10, " + f : "url(" +
            m + ") 10 10, " + f), u.style.cursor = f)
        } else f || (m = d.tool, q = e.ui.cursors, f = q[m.type] ? q[m
          .type] : ""), w !== f && (w = f, u.style.cursor = f)
      }
    }
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Keyboard = function(f, d) {
    var a = this,
      e = f.dom,
      g = f.feature,
      l = f.client,
      b = d.toolkit,
      l = f.client,
      c = f.ui,
      p = f.util;
    a.pressed = {};
    a.keydown = function(a) {
      eventjs.keyTracker(a);
      var r = p.isEditingText(),
        k = eventjs.altKey,
        v = a.keyCode,
        x = eventjs.metaKey,
        s = eventjs.shiftKey;
      switch (v) {
        case 75:
          if (x && s && l.nodewebkit) {
            var z = require("nw.gui").Window.get();
            z.isKioskMode ? require("nw.gui").App.quit() : z.enterKioskMode()
          }
          break;
        case 219:
          if (x) return k ? f.exec("layer-to-back") : f.exec(
              "layer-backwards"),
            w(a);
          break;
        case 221:
          if (x) return k ? f.exec("layer-to-front") : f.exec(
            "layer-forwards"), w(a);
          break;
        case 80:
          if (x) return f.print(), w(a);
          break;
        case 83:
          if (x) return k ? f.download.image() : s && b.screenshot ? f.exec(
            "screenshot") : f.save.fromQuery(), w(a);
          break;
        case 27:
          if (p.eventOverride("onEscapeKey", a)) return;
          f.windows.hasFocus && f.windows.hasFocus() ? f.windows.closeFocused() :
            (d.scene.deselectAll(), d.render());
          u("escapeKey", a);
          return w(a)
      }
      if (!r && "eyeDropper" !== c.colorPicker.state && !p.eventOverride(
          eventjs.getKeyID(a),
          a)) {
        switch (v) {
          case 48:
            if (s && g.zoom) {
              if (r && !x) break;
              f.exec("zoom-reset");
              return w(a)
            }
            break;
          case 173:
          case 189:
            if (s && g.zoom) {
              if (r && !x) break;
              f.exec("zoom-out");
              return w(a)
            }
            break;
          case 61:
          case 187:
            if (s && g.zoom) {
              if (r && !x) break;
              f.exec("zoom-in");
              return w(a)
            }
            break;
          case 188:
            if (t("configure")) return w(a);
            break;
          case 68:
            if (t("download")) return w(a);
            break;
          case 78:
            if (t("document-new")) return w(a);
            break;
          case 79:
            if (x && l.chooseEntry) return f.open.chooseEntry(function(a) {
              d.addMedia({
                openAsNew: !0,
                blob: a
              })
            }), w(a);
            if (t("document-open")) return w(a);
            break;
          case 80:
            if (t("print")) return w(a);
            break;
          case 83:
            if (t("share")) return w(a);
            break;
          case 32:
            d.orient ? (a.preventDefault(), "zoom" !== d.tool.type && (f
                .ptool = d.tool.type, f.exec("zoom"))) : p.toggleVideo &&
              p.toggleVideo();
            return;
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
            if (g.hotkeys) switch (a = g.hotkeys[v - 49], a) {
              case "brush":
              case "shape":
                if ((r = e.$(".sketch-select-" + a)) && r.id) return f.exec(
                  r.id.replace("tool-", ""));
              default:
                return f.exec(a)
            }
            return;
          case 191:
            if (s) return f.exec("help");
            return;
          case 46:
          case 8:
            eventjs.cancel(a);
            f.exec("layer-delete");
            u("deleteKey", a);
            return;
          case 13:
            document.activeElement === document.body && eventjs.cancel(a);
            e.$("#alertify-ok") && e.$("#alertify-ok").click();
            u("enterKey", a);
            return;
          case 18:
            if (g.ui.quickSelect && b.select) {
              if (x) break;
              if (!g.vector.edit) return;
              d.tool !== b.select && (f.ptool = d.tool.type, f.exec(
                "select"))
            }
            return;
          case 65:
            x && (eventjs.cancel(a), s ? f.exec("select-inverse") : f.exec(
              "select-all"));
            return;
          case 67:
            s ? f.exec("color-picker") : x && (eventjs.cancel(a),
              f.exec("layer-copy"));
            return;
          case 73:
            f.exec("debug-action");
            return;
          case 86:
            if (x && !m()) {
              if (d.__rendering) return;
              d.tool.reset && d.tool.reset();
              eventjs.cancel(a);
              f.exec("layer-paste", "select" !== d.tool.type)
            }
            return;
          case 88:
            x && (eventjs.cancel(a), f.exec("layer-cut"));
            return;
          case 90:
            if (x) {
              eventjs.cancel(a);
              if (d.__rendering) return;
              if (s) {
                if (p.eventOverride("onRedo", a)) break;
                f.exec("redo")
              } else {
                if (p.eventOverride("onUndo", a)) break;
                f.exec("undo")
              }
            }
            return;
          case 37:
            if (f.on.leftKey) f.on.leftKey(a);
            else if (d.selection.length) {
              eventjs.altKey ?
                f.exec("layer-clone-left", 1) : f.exec("layer-move-left",
                  1);
              eventjs.cancel(a);
              break
            } else if (p.changeVideoFilter && f.rtc.videos.you) {
              p.changeVideoFilter(-1);
              break
            } else {
              if (d.tool.device && d.tool.device.brush && d.tool.device.brush
                .isGhost) {
                a = d.tool.device.brush;
                a.seed++;
                d.tool.ghost(a.event);
                return
              }
              s && f.sidebar && f.sidebar.close && f.sidebar.close()
            }
            break;
          case 39:
            if (f.on.rightKey) f.on.rightKey(a);
            else if (d.selection.length) {
              eventjs.altKey ? f.exec("layer-clone-right", 1) : f.exec(
                "layer-move-right", 1);
              eventjs.cancel(a);
              break
            } else if (p.changeVideoFilter && f.rtc.videos.you) {
              p.changeVideoFilter(1);
              break
            } else {
              if (d.tool.device && d.tool.device.brush && d.tool.device.brush
                .isGhost) {
                a = d.tool.device.brush;
                a.seed--;
                d.tool.ghost(a.event);
                return
              }
              s && f.sidebar && f.sidebar.open && f.sidebar.open()
            }
            break;
          case 38:
            f.on.upKey ? f.on.upKey(a) : k && d.pages && d.pages.length ?
              (d.setPage(-1, "useRelative"), eventjs.cancel(a)) : d.selection
              .length && (eventjs.altKey ? f.exec("layer-clone-up", 1) :
                f.exec("layer-move-up", 1), eventjs.cancel(a));
            break;
          case 40:
            f.on.downKey ?
              f.on.downKey(a) : k && d.pages && d.pages.length ? (d.setPage(
                1, "useRelative"), eventjs.cancel(a)) : d.selection.length &&
              (eventjs.altKey ? f.exec("layer-clone-down", 1) : f.exec(
                "layer-move-down", 1), eventjs.cancel(a));
            break;
          default:
            return
        }
        w(a, !1)
      }
    };
    a.keyup = function(c) {
      eventjs.keyTracker(c);
      var e = eventjs.metaKey,
        k = c.keyCode;
      if (!f.util.isEditingText() && (a.pressed[k] = !1, e && f.ptool &&
          (d.scene.deselectAll(), f.exec(f.ptool), delete f.ptool), !p.eventOverride(
            eventjs.getKeyID(c), c))) switch (k) {
        case 18:
          if (g.ui.quickSelect &&
            b.select) {
            if (!f.ptool || !g.vector.edit) break;
            f.exec(f.ptool);
            delete f.ptool
          }
          break;
        case 32:
          d.orient && f.exec(f.ptool);
          break;
        case 37:
        case 38:
        case 39:
        case 40:
          d.selection.move(0, 0, {
            method: "record"
          })
      }
    };
    var w = function(b, c) {
        d.scene.setDirtyControl();
        a.pressed[b.keyCode] = !0;
        !1 !== c && eventjs.cancel(b)
      },
      m = function() {
        return !1 === l.clipboard || l.safari || !eventjs.getEventSupport(
          d.focusElement, "paste") ? !1 : !!(d.scene && d.scene.paste &&
          d.addMedia)
      };
    (function() {
      var b = {};
      a.enable = function() {
        if (l.clipboard = m()) d.focusEditable !==
          d.focusElement && (b.onPasteEditable = eventjs.add(d.focusEditable,
            "paste", d.scene.onPasteNative)), b.onPaste = eventjs.add(d
            .focusElement, "paste", d.scene.onPasteNative)
      };
      a.disable = function() {
        eventjs.removeEvents(b)
      }
    })();
    var u = function(a, b) {
        if (f.on[a]) f.on[a](b)
      },
      t = function(a) {
        if (eventjs.shiftKey && f.fs.supported && c.setPane) return f.sidebar
          .open(), c.setPane(a), !0
      }
  }
})(sketch);
(function(g) {
  g.ui = g.ui || {};
  g.ui.scrollers = {};
  g.ui.InfiniteScroll = function(d, a, e) {
    var g = d.feature,
      l = e.type,
      b = e.target,
      c = d.lib[l];
    if (c && c.paths) {
      var p = d.ui.scrollers,
        w = p[l],
        m = !1;
      w && (m = g.ui.addToLibrary ? w.positions.length === c.paths.length :
        !0);
      if (m) return w.target = b, w.show(e);
      w = new f(d, a, e);
      return p[l] = w
    }
  };
  var f = function(d, a, e) {
    var f = this,
      g = d.dom,
      b = d.feature,
      c = d.lang,
      p = a.render,
      w = a.toolkit,
      m = d.util;
    f.credits = void 0;
    f.folder = e.folder;
    f.media = void 0;
    f.positions = [];
    f.scroller = void 0;
    f.scrollTop = 0;
    f.target =
      e.target;
    f.type = e.type;
    f.hide = function() {
      f.scroller.style.display = "none"
    };
    f.show = function(a) {
      var b = d.lib[f.type];
      if (b && b.paths) {
        var c = f.folder = a.folder,
          e = f.credits;
        a = f.scroller;
        var h = f.target;
        a.style.display = "none";
        a.scrollTop = f.scrollTop;
        h.appendChild(a);
        h.appendChild(e);
        for (var e = 0, h = b.paths, k = h.length, m = 0; m < k; m++) {
          var p = h[m],
            r = p.container;
          if (p.image && r) {
            var t = !c || "*" === c,
              v = p.selected === c;
            "Your Files" === c && 0 === b.getSrc(p).indexOf("#") || v ||
              t ? (e++, r.style.display = "inline-block") : r.style.display =
              "none"
          }
        }(b =
          g.$(".noItemsAdded")) || (b = g.create(
            '<div class="noItemsAdded"></div>'), b.textContent =
          "No files have been added.", a.appendChild(b));
        b.style.display = 0 === e ? "block" : "none";
        a.style.display = "block";
        f.scrollTo();
        f.lazyLoad();
        return f
      }
    };
    f.lazyLoad = function() {
      var a = f.scroller,
        b = a.scrollTop,
        c = a.offsetHeight;
      a.style.display = "none";
      for (var d = f.positions, e = f.folder, h = [], k = f.media.paths,
          g = k.length, m = 0; m < g; m++) {
        var p = k[m],
          l = !e || "*" === e,
          r = p.selected === e;
        ("Your Files" === e && "#" === p.filepath[0] || r || l) && h.push(
          p)
      }
      e =
        h.length;
      for (k = 0; k < e; k++)
        if (g = d[k]) m = g[0], m >= b - g[1] && m <= b + c && (m = h[
          k], g = m.image, m = m.container, g && m && (g.src = m.getAttribute(
          "data-thumbnail")));
      a.style.display = "block"
    };
    f.calcMetrics = function(a, b, c) {
      b = a.offsetWidth - v;
      c = c.thumbnail;
      var d = c._height / c._width,
        e = isFinite(c.rows) ? c.rows : 5,
        f = isFinite(c.columns) ? c.columns : 4,
        h = isFinite(c.padding) ? c.padding : 0;
      b /= f;
      b = m.cloneInto(c, {
        width: Math.round(b),
        height: Math.round(b * d),
        padding: h,
        columns: f,
        rows: e
      });
      a.style.cssText += "max-height: " + b.height * b.rows + "px;";
      return b
    };
    var u = function(c, d) {
      c.events && eventjs.removeEvents(c.events);
      c.events = {};
      c.events.click = eventjs.add(c, "click", t);
      if (d) {
        var e = function(c, d) {
          b.vector.edit || a.scene.deselectAll();
          d.drag = a.addFromDrag({
            target: d,
            event: c,
            src: d.getAttribute("data-src")
          })
        };
        "longpress" === d ? c.events.longpress = eventjs.add(c,
          "longpress",
          function(a, b) {
            eventjs.stop(a);
            "start" === b.state && e(a, b.target)
          }) : c.events.mousedown = eventjs.add(c, "mousedown",
          function(a, b) {
            eventjs.stop(a);
            e(a, this)
          })
      }
    };
    f.select = function(a) {
      g.setClass({
        className: "selected",
        list: g.$$("." + f.type, f.scroller),
        target: a,
        on: !0
      })
    };
    var t = function(a, e) {
      var k = d.doc,
        m = e.target,
        r = f.type,
        t = m.getAttribute("data-src"),
        v = m.getAttribute("data-name"),
        u = t.split("/"),
        w = b.placement.mediaClick;
      f.select(m);
      var D = document.createElement("span");
      D.className = "loader";
      m.appendChild(D);
      setTimeout(function() {
        h(r, u[u.length - 2]);
        if (m.drag) {
          m.drag.remove();
          var a = g.$("#sk-draggable");
          a && a.parentNode.removeChild(a)
        }
        var a = "text" === r,
          b = "stamp" === r;
        (a = !("select" === k.tool.type && k.selection.length || a ||
          b)) &&
        k.scene.deselectAll();
        k.changeMedia({
          src: t,
          fontFamily: v,
          type: r,
          onerror: function() {
            d.ui.log(c.translate("loading-error") + " \u201c" + v +
              "\u201d");
            m.removeChild(D)
          },
          onload: function() {
            p.dirtyControls = !0;
            m.removeChild(D)
          }
        });
        a && w && k.addObject({
          type: r,
          src: t
        })
      }, 250)
    };
    f.scrollTo = function(a) {
      "undefined" === typeof a ? a = f.scroller.querySelector(
        ".selected") : "string" === typeof a && (a = f.scroller.querySelector(
        ".hash" + m.hash(a)));
      if (a && a.nodeName) {
        var b = a.offsetTop;
        a.classList.contains("sk-divider") && (b += a.offsetHeight);
        f.scroller.scrollTop = b;
        f.scrollTop = b
      }
    };
    var h = function(a, b) {
        var c = f.credits;
        c.innerHTML = "";
        c.style.display = "none";
        var e = d.lib[a].credits;
        if (e && e[b]) {
          c.style.display = "block";
          var e = e[b],
            h = g.create('<a target="_blank" href="' + e.url + '"></a>'),
            k = document.createElement("span");
          k.setAttribute("data-title", e.name);
          k.textContent = e.name;
          h.appendChild(k);
          c.appendChild(document.createTextNode("By: "));
          c.appendChild(h)
        }
      },
      r = function() {
        console.warn("error", this)
      },
      k = function() {
        var a = "stamp" === f.type || "text" === f.type,
          c = this.canvas;
        m.thumbnailer({
          background: "none",
          src: this,
          canvas: c,
          width: c.width,
          height: c.height,
          crop: "edge",
          center: !0,
          shadow: a && b.ui.scrollerShadow,
          onload: function(b) {
            if (a) {
              var c = b.className || "";
              c.indexOf("selected");
              var e = b.getContext("2d");
              e.save();
              e.globalCompositeOperation = "source-atop";
              e.fillStyle = d.feature.ui.scrollerAtopColor;
              e.fillRect(0, 0, b.width, b.height);
              b.setAttribute("data-className", c);
              e.restore()
            }
          }
        })
      },
      v = function() {
        var a = document.createElement("p");
        a.style.width = "100%";
        a.style.height =
          "200px";
        var b = document.createElement("div");
        b.style.position = "absolute";
        b.style.top = "0px";
        b.style.left = "0px";
        b.style.visibility = "hidden";
        b.style.width = "200px";
        b.style.height = "150px";
        b.style.overflow = "hidden";
        b.appendChild(a);
        document.body.appendChild(b);
        var c = a.offsetWidth;
        b.style.overflow = "scroll";
        a = a.offsetWidth;
        c === a && (a = b.clientWidth);
        document.body.removeChild(b);
        return c - a + 2
      }();
    (function(e) {
      e = f.type;
      var p = d.lib[e];
      if (p && p.paths) {
        p.thumbnail = p.thumbnail || {};
        var t = g.create(
            '<div class="sk-configure-scroller sk-scroller"></div>'),
          v = g.create('<div class="sk-configure-credits"></div>'),
          B = f.target;
        B.appendChild(t);
        B.appendChild(v);
        f.scroller = t;
        f.credits = v;
        f.media = p;
        f.thumbnail = f.calcMetrics(t, e, p);
        f.positions = [];
        h(e, f.folder);
        if (v = a.selection.item || a.config[e]) {
          var B = d.detect.useSrc,
            A = v.type,
            C = d.lib[v.type];
          if (B[v.type]) {
            var F = a.tool.type;
            !v.src && d.lib[A] && (v.src = C.getSrc(C.paths[0]));
            B[F] && A !== F && w.setTool(A);
            v = v.src || ""
          } else v = v.fontFamily ? C.getSrc(C.byName[v.fontFamily]) ||
            "" : void 0
        } else v = "";
        var B = ("clipart" === e || "image" ===
            e) && b.placement.mediaDrag,
          A = b.ui.scrollerCategories,
          E = f.thumbnail,
          C = E.padding,
          F = E.width,
          D = E.height,
          E = E.columns,
          P = a.pixelRatio,
          G = f.positions;
        t.style.display = "none";
        for (var J = "", N = 0, K = 0, O, V = p.paths, L = V.length, T =
            0; T < L; T++) {
          var Q = V[T],
            U = p.getSrc(Q, !0),
            da = p.getThumbnail(Q);
          if (Q.category !== J && A) {
            var J = Q.category || "Your Files",
              N = "hash" + m.hash(J),
              aa = document.createElement("div");
            aa.className = N + " sk-divider";
            aa.style.height = "35px";
            aa.textContent = c.translate(J);
            t.appendChild(aa);
            N = 0;
            K += 35;
            0 !== T && (K += D)
          } else ++N ===
            E && (N = 0, K += D);
          var aa = Q.canvas,
            R = F * P,
            ea = D * P;
          if (aa && aa.width === R && aa.height === ea) var Z = Q.image,
            R = Q.container;
          else Z = Q.image = document.createElement("img"), aa = Q.canvas =
            m.Canvas(R - 2 * C, ea - 2 * C), R = Q.container = document.createElement(
              "span"), aa.style.padding = C + "px", aa.style.width = F +
            "px", aa.style.height = D + "px", aa.title = Q.filename, R.style
            .width = F + "px", R.style.height = D + "px", R.setAttribute(
              "data-src", U), R.setAttribute("data-thumbnail", da), R.setAttribute(
              "data-name", Q.name), R.setAttribute("data-n", T), R.className =
            e, R.appendChild(aa), Z.canvas = aa, Z.onload = k, Z.onerror =
            r;
          u(R, B);
          U && -1 !== v.indexOf(U) && (O = R);
          G.push([K, D]);
          t.appendChild(R)
        }
        t.style.display = "block";
        f.select(O)
      }
    })(e);
    f.show(e);
    d.ui.scrollable(f.scroller);
    eventjs.add(f.scroller, "scroll", function() {
      var a = f.scroller;
      f.scrollTop = a.scrollTop;
      clearTimeout(a.timeout);
      a.timeout = setTimeout(function() {
        f.lazyLoad()
      }, 100)
    });
    return f
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.UIStartWindow = function(f, d) {
    var a = f.dom,
      e = f.lang,
      g = f.client,
      l = f.ui,
      b = f.util;
    l.pages.Library = function() {
      var b = a.empty("#sk-document-open");
      l.addHeader(b, {
        title: "open",
        left: {
          icon: "icon-left",
          onclick: s("document")
        }
      });
      a.append(b,
        '<div class="sk-doc-listing sk-pane-content"></div>');
      B(b, ".doc-open-remove", function(a) {
        l.addClick(a, function(a) {
          f.fs.removeProject();
          d.reset()
        })
      });
      B(b, ".doc-open-save", function(a) {
        l.addClick(a, function(a) {
          f.fs.saveProject()
        })
      });
      B(b,
        ".doc-open-duplicate",
        function(a) {
          l.addClick(a, function(a) {
            f.fs.createProject()
          })
        })
    };
    var c = {
      dpi: 72,
      format: "jpeg",
      quality: 94,
      sizeTo: "scale",
      width: 640,
      height: 480,
      x: 0,
      y: 0,
      scale: 100
    };
    l.pages.Share = function(b) {
      b = b || {};
      k.store();
      if (b.subpage) {
        var e = a.empty("#sk-share"),
          h = b.subpage;
        b = f.api[h];
        b.preloadScript && b.preloadScript();
        l.addHeader(e, {
          title: b.proper,
          icon: b.icon,
          left: {
            icon: "icon-left",
            onclick: s("share")
          }
        });
        l.addFooter(e, {
          ok: {
            title: "share",
            className: "green",
            onclick: function() {
              f.save.canvas(m(c), function(a) {
                d.__lastSynchronized =
                  d.__lastModified;
                f.api.test(h, a, d.title, d.description)
              })
            }
          }
        });
        var g = a.append(e, "div"),
          p = function() {
            a.empty(g);
            w(g, c, p)
          };
        p()
      } else e = a.empty("#sk-share"), l.addHeader(e, {
          title: "share",
          left: {
            icon: "icon-left",
            onclick: s("save")
          }
        }), b = function(b) {
          var c = f.api[b],
            d = a.create('<div class="sk-row">' + c.proper + "</div>");
          eventjs.add(d, "click", function() {
            f.ui.setPane("share:" + b)
          });
          a.append(d, "<span></span>").className = "right " + c.icon;
          e.appendChild(d)
        }, b("facebook"), b("gdrive"), b("gmail"), b("pinterest"), b(
          "reddit"),
        b("sketchio"), b("twitter"), b("webcamfx")
    };
    l.pages.Print = function() {
      var b = a.empty("#sk-print");
      k.store();
      l.addHeader(b, {
        title: "print",
        left: {
          icon: "icon-left",
          onclick: s("save")
        }
      });
      l.addFooter(b, {
        ok: {
          title: "print",
          className: "green",
          onclick: function() {
            f.print(m(c))
          }
        }
      });
      c.dpi = d.dpi;
      c.width = d.bounds.width;
      c.height = d.bounds.height;
      var e = a.append(b, "div"),
        h = function() {
          a.empty(e);
          w(e, c, h);
          p(e, c)
        };
      h()
    };
    l.pages.Download = function() {
      var b = a.empty("#sk-download");
      k.store();
      l.addHeader(b, {
        title: "download",
        left: {
          icon: "icon-left",
          onclick: s("save")
        }
      });
      var e = {
          jpeg: !0,
          pdf: !0,
          webp: !1,
          png: !0
        },
        h = {
          jpeg: !0,
          pdf: !1,
          webp: !0,
          png: !0
        },
        g = a.append(b, "div"),
        r = function() {
          a.empty(g);
          l.appendSelect(g, {
            label: "fileFormat",
            param: "fileFormat",
            selected: c.format,
            options: u(),
            onchange: function(a, b) {
              c.format !== b && (c.format = b, r())
            }
          });
          h[c.format] && w(g, c, r);
          e[c.format] && p(g, c);
          l.addFooter(b, {
            ok: {
              title: "download",
              className: "green",
              onclick: function() {
                d.__lastSynchronized = d.__lastModified;
                "zip" === c.format ? f.download.zip() : "pdf" === c.format ?
                  f.download.pdf(m(c)) :
                  f.download.image(m(c))
              }
            }
          })
        };
      r()
    };
    var p = function(a, b) {
        l.appendSelect(a, {
          label: "dpi",
          param: "dpi",
          selected: b.dpi,
          options: {
            72: e.translate("72dpi"),
            150: e.translate("150dpi"),
            300: e.translate("300dpi")
          },
          onchange: function(a, c) {
            b.dpi = parseInt(c)
          }
        })
      },
      w = function(a, b, c) {
        l.appendSelect(a, {
          label: "sizeTo",
          param: "sizeTo",
          selected: b.sizeTo,
          options: {
            fit: e.translate("fitWithin"),
            scale: e.translate("scale")
          },
          onchange: function(a, e) {
            b.sizeTo !== e && (d.toolkit.setTool(d.defaultTool), b.sizeTo =
              e, c())
          }
        });
        switch (b.sizeTo) {
          case "fit":
            l.appendTag("Input",
              a, {
                min: 1,
                max: 8192,
                type: "number",
                label: "width",
                value: b.width,
                onchange: function(a) {
                  b.width = a
                }
              });
            l.appendTag("Input", a, {
              min: 1,
              max: 8192,
              type: "number",
              label: "height",
              value: b.height,
              onchange: function(a) {
                b.height = a
              }
            });
            break;
          case "scale":
            l.appendSelect(a, {
              label: "size",
              param: "size",
              selected: b.scale,
              options: {
                50: "0.5x",
                100: "1x",
                200: "2x"
              },
              onchange: function(a, c) {
                b.scale = parseInt(c)
              }
            })
        }
      },
      m = function(a) {
        var b = {};
        b.format = a.format;
        b.quality = a.quality / 100;
        b.dpi = a.dpi;
        if ("pdf" !== a.format) switch (a.sizeTo) {
          case "scale":
            b.scale =
              a.scale / 100;
            break;
          case "fit":
            b.crop = "edge", b.center = !0, b.width = a.width, b.height =
              a.height
        }
        return b
      },
      u = function() {
        var a = {};
        g.io.jpeg && (a.jpeg = '<span class="icon-image"></span> JPEG');
        g.io.blob && (a.pdf = '<span class="icon-file-pdf"></span> PDF');
        g.io.png && (a.png = '<span class="icon-image"></span> PNG');
        g.io.webp && (a.webp = '<span class="icon-image"></span> WebP');
        g.io.blob && (a.zip =
          '<span class="icon-file-zip"></span> SKETCHPAD');
        return a
      };
    l.pages.Upload = function() {
      var c = a.empty("#sk-document-upload");
      k.store();
      l.addHeader(c, {
        title: "upload",
        left: {
          icon: "icon-left",
          onclick: s("document")
        }
      });
      var d = a.append(c, '<div class="sk-row do-upload-new">' + e.translate(
            "upload-as-new") +
          '<span class="right icon-ring"></span></div>'),
        c = a.append(c, '<div class="sk-row do-upload-into">' + e.translate(
          "place") + '<span class="right icon-ring"></span></div>');
      b.addFileInput(d, !0);
      b.addFileInput(c, !1)
    };
    l.pages.New = function() {
      var b = a.empty("#sk-document-new");
      k.store();
      l.addHeader(b, {
        title: "new",
        left: {
          icon: "icon-left",
          onclick: s("document")
        }
      });
      a.append(b, '<div class="sk-row">' + e.translate("dimensions") +
        "</div>");
      t(b, "new");
      l.addFooter(b, {
        ok: {
          title: "create",
          className: "green",
          onclick: function() {
            k.updateDoc();
            f.exec("new-confirm", function() {
              f.client.fs && f.fs.createProject();
              f.ui.setPane("document-open")
            })
          }
        }
      })
    };
    l.pages.Resize = function() {
      k.store();
      var b = a.empty("#sk-document-resize");
      l.addHeader(b, {
        title: "resize",
        left: {
          icon: "icon-left",
          onclick: s("document")
        }
      });
      t(b, "resize");
      l.addFooter(b, {
        className: "buttons",
        ok: {
          title: "apply",
          className: "green",
          onclick: function() {
            f.ui.setPane("document")
          }
        },
        cancel: {
          title: "reset",
          className: "grey",
          onclick: function() {
            k.reset()
          }
        }
      });
      l.pageOnChange = k.storeSize
    };
    l.pages.Background = function() {
      k.store();
      var b = a.empty("#sk-document-background");
      l.addHeader(b, {
        title: "background",
        left: {
          icon: "icon-left",
          onclick: s("document")
        }
      });
      h(b, "background")
    };
    var t = function(c, d) {
        k.updateCacheData(v);
        var f = function(b) {
            a.append(g, k.query[b] = l.Input({
              type: "number",
              value: k[b],
              onchange: function(a) {
                k[b] = a;
                "new" !== d && k.updateDoc();
                r("presets",
                  k.getPresetKey())
              }
            }))
          },
          h = a.append(c, '<div class="divider"></div>'),
          g = a.append(h, '<div class="doc-new-size"></div>');
        a.append(g, '<span class="doc-new-presets"></span>');
        a.append(g, '<div class="sk-break"></div>');
        a.append(g,
          '<span style="width: 60px; display: inline-block; text-align: right; padding-right: 8px;">' +
          e.translate("width") + "</span>");
        f("width");
        a.append(g, '<span class="doc-new-units"></span>');
        a.append(g, '<div class="sk-break"></div>');
        a.append(g,
          '<span style="width: 60px; display: inline-block; text-align: right; padding-right: 8px;">' +
          e.translate("height") + "</span>");
        f("height");
        B(c, ".doc-new-units", function(a) {
          a = new l.SelectMenu({
            id: "units",
            tooltip: "choose-units",
            container: a,
            selected: k.units,
            options: k.param.unit,
            onchange: function(a) {
              if (k.units !== a) {
                var c = k.width,
                  d = k.height,
                  e = window.innerWidth,
                  f = window.innerHeight;
                if ("%" === k.units) c = c / 100 * e, d = d / 100 * f;
                else var h = b.toMetrics[k.units + ">px"],
                  c = c * h,
                  d = d * h;
                "%" === a ? (c = c / e * 100, d = d / f * 100) : (h =
                  b.toMetrics["px>" + a], c *= h, d *= h);
                k.width = c;
                k.height = d;
                k.units = a;
                r("presets", k.getPresetKey());
                r("width",
                  k.width);
                r("height", k.height)
              }
            }
          });
          k.query.units = a
        });
        B(c, ".doc-new-presets", function(a) {
          a = new l.SelectMenu({
            id: "presets",
            tooltip: "choose-preset-size",
            container: a,
            selected: k.preset,
            options: k.param.preset,
            onchange: function(a) {
              if (k.preset !== a) {
                switch (k.preset = a) {
                  case "custom":
                    break;
                  default:
                    k.updateCacheData(k.param.presetData[k.preset])
                }
                "new" !== d && k.updateDoc();
                r("units", k.units);
                r("width", k.width);
                r("height", k.height)
              }
            }
          });
          k.query.presets = a
        })
      },
      h = function(c, h) {
        a.append(c, '<div class="sk-doc-listing-new"></div>');
        var g = new f.style.Fill(d.background, f.style.fill),
          m = {
            fill: g,
            stroke: {}
          },
          p = function(a) {
            var b = a.data;
            a = a.state;
            b.paintType && (g.type = b.paintType);
            b.dna && (g[b.paintType] = b.dna);
            f.style.cloneInto(b, g);
            !1 === b.enabled ? d.setBackground("transparent") : d.setBackground(
              g);
            "up" !== a && "end" !== a && !0 !== a || k.storeBackground()
          },
          r = {
            blank: {
              id: "white",
              background: "white"
            },
            grid: {
              id: "grid",
              background: f.gen.grid("grid")
            },
            graphPaper: {
              id: "graphPaper",
              background: f.gen.grid("graphPaper")
            },
            lined: {
              id: "lined",
              background: f.gen.paper("lined")
            },
            looseLeaf: {
              id: "looseLeaf",
              background: f.gen.paper("looseLeaf")
            },
            notebook: {
              id: "notebook",
              background: f.gen.paper("notebook")
            },
            blueprint: {
              id: "blueprint",
              background: f.gen.grid("blueprint")
            },
            transparent: {
              id: "transparent",
              background: f.gen.interlace({
                size: 12,
                innerColor: "#fff",
                outerColor: "#d9d9d9"
              })
            },
            custom: {
              id: "custom",
              background: d.background
            }
          },
          s = c.querySelector(".sk-doc-listing");
        l.scrollable(s);
        s = c.querySelector(".sk-doc-listing-new");
        l.scrollable(s);
        for (var q in r) {
          var t = document.createElement("div"),
            v = r[q],
            u = e.translate(q);
          t.setAttribute("data-id", q);
          t.className = "fileEntry " + v.id;
          t.title = u;
          s.appendChild(t);
          v.id === k.background && (t.className += " fileEntrySelected");
          var x = document.createElement("span");
          x.innerHTML = u;
          t.appendChild(x);
          u = b.Canvas(110, 60);
          x = u.ctx;
          "custom" === q ? x.fillStyle = f.style.getStyle("fill", x, 0,
            0, 110, 60, {
              fill: g
            }) : (x.scale(.5, .5), x.fillStyle = v.background);
          x.fillRect(0, 0, 220, 120);
          t.appendChild(u)
        }
        B(c, "#sk-document-" + h + " .fileEntry", function(b) {
          l.addClick(b, function(c) {
            a.setClass({
              target: b,
              list: "div",
              className: "fileEntrySelected"
            });
            c = b.getAttribute("data-id");
            "custom" === c ? f.palette.createTrigger(null, m, g,
              "custom", "background", p) : (c = r[c], d.setBackground({
              src: c.id,
              raw: c.background
            }), k.storeBackground(), k.background = c.id, k.updateDoc())
          })
        })
      },
      r = function(a, b) {
        var c = k.query[a];
        c && (c.setValue ? c.setValue(b) : c.value = b)
      },
      k = l.DOC = {
        query: {},
        controller: {},
        param: {
          unit: {
            "in": "in",
            mm: "mm",
            cm: "cm",
            px: "px",
            "%": "%"
          },
          preset: {
            screen: "Size of Screen",
            window: "Size of Window",
            "size:377x197,units:px,dpi:72": "377 x 197 (Facebook)",
            "size:640x480,units:px,dpi:72": "640 x 480",
            "size:800x600,units:px,dpi:72": "800 x 600",
            "size:1024x768,units:px,dpi:72": "1024 x 768",
            "size:1280x800,units:px,dpi:72": "1280 x 800",
            "size:1680x1050,units:px,dpi:72": "1680 x 1050",
            "size:1920x1200,units:px,dpi:72": "1920 x 1200",
            "size:180x150,units:px,dpi:72": "180 x 150 (Rectangle)",
            "size:200x250,units:px,dpi:72": "300 x 250 (Medium Rectangle)",
            "size:728x90,units:px,dpi:72": "728 x 90 (Leaderboard)",
            "size:550x250,units:px,dpi:72": "550 x 250 (Wide Skyscraper)",
            "size:2x3,units:in,dpi:300": "2 x 3",
            "size:3x5,units:in,dpi:300": "3 x 5 (Index Card)",
            "size:4x6,units:in,dpi:300": "4 x 6 (Postcard)",
            "size:5x7,units:in,dpi:300": "5 x 7 (L, 2L)",
            "size:8x10,units:in,dpi:300": "8 x 10 (Photo)",
            "size:8.5x11,units:in,dpi:300": "8.5 x 11 (Letter)",
            "size:11x14,units:in,dpi:300": "11 x 14 (Legal)",
            "size:11x17,units:in,dpi:300": "11 x 17 (Tabloid)",
            "size:16x20,units:in,dpi:300": "16 x 20 (Poster)",
            "size:20x30,units:in,dpi:300": "20 x 30 (Poster)",
            "size:12x14,units:in,dpi:150": "12 x 14 (T-Shirt - mens)",
            "size:10x12,units:in,dpi:150": "12 x 14 (T-Shirt - womens)",
            custom: "Custom"
          },
          presetData: {}
        },
        width: 100,
        height: 100,
        dpi: 72,
        background: "transparent",
        preset: "window",
        units: "%",
        getPresetKey: function() {
          var a = k.param.presetData,
            b;
          for (b in a) {
            var c = a[b];
            if (c.width === k.width && c.height === k.height && c.units ===
              k.units && c.dpi === k.dpi) return c.type
          }
          return "custom"
        },
        updateAll: function(a) {
          a && (k.updateCacheData(a), a = k.query, a.width && (a.width.value =
              k.width), a.height && (a.height.value = k.height), a.presets &&
            a.presets.setValue(k.preset),
            a.units && a.units.setValue(k.units), k.updateDoc(), r(
              "presets", k.getPresetKey()))
        },
        updateCacheData: function(a) {
          k.width = a.width;
          k.height = a.height;
          k.units = a.units;
          k.dpi = a.dpi;
          k.preset = k.getPresetKey();
          a.background && (k.background = a.background)
        },
        updateDoc: function() {
          d.background !== k.background && d.setBackground(k.background);
          if (d.width !== k.width || d.height !== k.height || d.units !==
            k.units) {
            if ("%" === k.units) {
              var a = k.width,
                c = k.height;
              d.setSize(a, c, "%", k.dpi)
            } else c = b.toMetrics[k.units + ">px"], a = k.width * c, c *=
              k.height,
              d.setSize(a, c, "px", k.dpi);
            d.orient.reset();
            d.orient.render("root.startWindow")
          }
        },
        storeSize: function() {
          var a = x,
            c = d.getMetrics();
          b.equals(a, c) || d.history.store({
            cmd: "resize-doc",
            name: "resize-doc",
            icon: "crop",
            data: {
              from: a,
              to: c
            }
          })
        },
        storeBackground: function() {
          var a = v.background,
            b = d.background;
          a !== b && (d.history.store({
            cmd: "set-background",
            name: "set-background",
            icon: "crop",
            data: {
              from: a,
              to: b
            }
          }), v.background = d.background)
        },
        reset: function() {
          k.updateAll(v)
        },
        store: function() {
          v = d.mixinAttributes(d, {});
          x = d.getMetrics()
        }
      };
    (function() {
      var a = k.param.preset,
        c = k.param.presetData,
        d;
      for (d in a) {
        var e = {};
        e.type = d;
        "custom" !== d && ("window" === d ? (e.units = "%", e.width =
          100, e.height = 100, e.dpi = 72) : "screen" === d ? (e.units =
          "px", e.width = window.screen.width, e.height = window.screen
          .height, e.dpi = 72) : (b.each(d.split(","), function(a) {
          a = a.split(":");
          e[a[0]] = a[1]
        }), e.size && (a = e.size.split("x"), e.width = parseFloat(
          a[0]), e.height = parseFloat(a[1]))));
        c[d] = e
      }
    })();
    var v, x;
    l.setupStartWindow = function() {
      var b = a.$(".sk-sidebar-left");
      b && (z(b, "document-new"),
        z(b, "document-open"), z(b, "document-upload"), z(b,
          "document-resize"), z(b, "document-background"), z(b,
          "download"), z(b, "print"), z(b, "share"), l.pages.Library(),
        l.pages.Upload(), l.pages.Download(), l.pages.Share(), f.setupHistory
        .add({
          type: "resize-doc",
          fn: function(a, b, c, e, f) {
            0 < f && d.history.findCmd({
              within: c ? f : -f,
              cmd: "resize-doc"
            }) || d.setMetrics(c ? b.from : b.to)
          }
        }), f.setupHistory.add({
          type: "set-background",
          fn: function(a, b, c, e, f) {
            0 < f && d.history.findCmd({
              within: c ? f : -f,
              cmd: "set-background"
            }) || d.setBackground(c ?
              b.from : b.to)
          }
        }))
    };
    var s = function(a) {
        return function() {
          f.ui.setPane(a)
        }
      },
      z = function(a, b) {
        y(a, ".to-" + b, function() {
          f.ui.setPane(b)
        })
      },
      y = function(a, b, c) {
        B(a, b, function(a) {
          l.addClick(a, c)
        })
      },
      B = function(a, b, c) {
        a = a.querySelectorAll(b);
        for (b = 0; b < a.length; b++) c(a[b])
      }
  }
})(sketch);
var OES_texture_float_linear = function() {
  function g(a) {
    if (!a.getExtension("OES_texture_float")) return !1;
    var b = a.createFramebuffer(),
      d = a.createTexture();
    a.bindTexture(a.TEXTURE_2D, d);
    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.NEAREST);
    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST);
    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);
    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);
    a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, 1, 1, 0, a.RGBA, a.UNSIGNED_BYTE,
      null);
    a.bindFramebuffer(a.FRAMEBUFFER,
      b);
    a.framebufferTexture2D(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0, a.TEXTURE_2D,
      d, 0);
    b = a.createTexture();
    a.bindTexture(a.TEXTURE_2D, b);
    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.LINEAR);
    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.LINEAR);
    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);
    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);
    a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, 2, 2, 0, a.RGBA, a.FLOAT,
      new Float32Array([2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0
      ]));
    var d = a.createProgram(),
      e = a.createShader(a.VERTEX_SHADER),
      f = a.createShader(a.FRAGMENT_SHADER);
    a.shaderSource(e,
      "      attribute vec2 vertex;      void main() {        gl_Position = vec4(vertex, 0.0, 1.0);      }    "
    );
    a.shaderSource(f,
      "      uniform sampler2D texture;      void main() {        gl_FragColor = texture2D(texture, vec2(0.5));      }    "
    );
    a.compileShader(e);
    a.compileShader(f);
    a.attachShader(d, e);
    a.attachShader(d, f);
    a.linkProgram(d);
    e = a.createBuffer();
    a.bindBuffer(a.ARRAY_BUFFER, e);
    a.bufferData(a.ARRAY_BUFFER,
      new Float32Array([0, 0]), a.STREAM_DRAW);
    a.enableVertexAttribArray(0);
    a.vertexAttribPointer(0, 2, a.FLOAT, !1, 0, 0);
    e = new Uint8Array(4);
    a.useProgram(d);
    a.viewport(0, 0, 1, 1);
    a.bindTexture(a.TEXTURE_2D, b);
    a.drawArrays(a.POINTS, 0, 1);
    a.readPixels(0, 0, 1, 1, a.RGBA, a.UNSIGNED_BYTE, e);
    return 127 === e[0] || 128 === e[0]
  }

  function f() {}

  function d(a) {
    "OES_texture_float_linear" === a ? (void 0 === this.$OES_texture_float_linear$ &&
      Object.defineProperty(this, "$OES_texture_float_linear$", {
        enumerable: !1,
        configurable: !1,
        writable: !1,
        value: new f
      }), a = this.$OES_texture_float_linear$) : a = l.call(this, a);
    return a
  }

  function a() {
    var a = b.call(this); - 1 === a.indexOf(
      "OES_texture_float_linear") && a.push(
      "OES_texture_float_linear");
    return a
  }
  try {
    var e = document.createElement("canvas").getContext(
      "experimental-webgl")
  } catch (q) {}
  if (e && -1 === e.getSupportedExtensions().indexOf(
      "OES_texture_float_linear") && g(e)) {
    var l = WebGLRenderingContext.prototype.getExtension,
      b = WebGLRenderingContext.prototype.getSupportedExtensions;
    WebGLRenderingContext.prototype.getExtension =
      d;
    WebGLRenderingContext.prototype.getSupportedExtensions = a
  }
};
"undefined" === typeof glfx && (glfx = {});
(function(g) {
  var f = g.util;
  glfx.debug = !1;
  glfx.filters = {};
  glfx.presets = [];
  glfx.presetId = 0;
  glfx.contexts = [];
  glfx.textures = {};
  glfx.loadFilters = function(a) {
    glfx.filters.colormap ? glfx.filters.colormap.construct() : (glfx
      .presets = [
        [
          [{
            cmd: "input",
            id: "source0",
            name: "natural displace",
            enabled: !0
          }]
        ]
      ], a())
  };
  glfx.destroy = function() {
    for (var a = 0; a < glfx.contexts.length; a++) {
      var b = glfx.contexts[a];
      b.parentNode && b.parentNode.removeChild(b);
      for (var c = b.gl, d = c.layers, e = 0; e < d.length; e++) b = d[
          e], b.TEXTURE && b.TEXTURE.destroy(),
        b.parentNode && b.parentNode.removeChild(b);
      c.layers = []
    }
    glfx.contexts = []
  };
  glfx.applyShader = function(a, b, c, e) {
    b = b || a.offsetWidth;
    c = c || a.offsetHeight;
    b = new d(a, b, c, e);
    glfx.contexts.push({
      source: a,
      gl: b
    });
    return b
  };
  var d = function(a, b, c, d) {
    var e = this;
    this.pixelRatio = d || 1;
    this.source = a;
    this.layers = [];
    this.display = !1;
    new f.perf;
    this.render = function(a) {
      var d = e.source,
        f = e.filters;
      if (f)
        for (var h = !1, g = Math.max(f.length, e.layers.length), m =
            0; m < g; m++) {
          var p = m === f.length - 1,
            l = f[m];
          if (l) {
            if (e.layers[m]) {
              var q = e.layers[m],
                t = q.TEXTURE;
              t.clean ? delete t.clean : t.loadContentsOf(d, b, c)
            } else q = glfx.canvas(), t = q.texture(d), q.glfx = e, q.className =
              "texture" + m, q.TEXTURE = t, q.pixelRatio = e.pixelRatio ||
              1, d.parentNode && d.parentNode.appendChild(q), e.layers[m] =
              q;
            q.style.display = e.display ? e.display : p ? "block" :
              "none";
            p = q.draw(t, b, c);
            if (l = e.loadStack(l, a, p))(h = h || 1 === l) || p.update()
          } else {
            var q = e.layers[m];
            q.style.display = "none"
          }
        }
      a && a()
    };
    this.viewport = function(a, d, f, h, g) {
      e.pixelRatio = g || e.pixelRatio;
      e.msaa && (f *= 2, h *= 2);
      b = f;
      c = h;
      f = e.layers;
      h =
        f.length;
      for (g = 0; g < h; g++) {
        var m = f[g];
        m.style.width = b / e.pixelRatio + "px";
        m.style.height = c / e.pixelRatio + "px";
        m.ctx.viewport(a, d, b, c);
        for (g = 0; g < f.length; g++) m = f[g], m.TEXTURE && (m.TEXTURE
          .destroy(), m.TEXTURE = m.texture(e.source), m.TEXTURE.clean = !
          0)
      }
    };
    this.loadStack = function(a, b, c) {
      for (var d = !1, f = 0; f < a.length; f++) {
        var h = a[f];
        if (!1 !== h.enabled) switch (h.cmd) {
          case "shader":
            var k = h.data;
            if (!glfx.filters[h.id]) {
              console.warn("missing filter", h.id);
              break
            }
            switch (h.id) {
              case "colormap":
                if (glfx.filters.colormap.loadResource(k[1],
                    function() {
                      c ? e.render(b) : e.loadStack(a, b, c)
                    })) return console.warn("colormap not available"), 0;
                break;
              case "displacement":
                if (glfx.filters.displacement.loadResource(k[4], function() {
                    c ? e.render(b) : e.loadStack(a, b, c)
                  })) return console.warn("displacement map not available"),
                  0;
                break;
              case "blend":
                k[3] = e.layers[0], k[4] = e.layers[1]
            }
            c && (d = d || !c[h.id].apply(c, h.data))
        }
      }
      c || b && b();
      return 1 + !d
    };
    this.setFilter = function(a) {
      e.filters = a
    };
    this.setDefaults = function() {
      this.filters = {};
      for (var a in glfx.filters) this.filters[a] = {
        index: 0,
        enabled: !1,
        values: glfx.filters[a].defaults
      }
    };
    this.animate = function(a) {
      glfx.animate(a)
    };
    this.play = function() {
      e.animating = !0
    };
    this.pause = function() {
      e.animating = !1
    };
    this.getComposite = function(a) {
      if (e.filters) {
        var b = e.layers[e.filters.length - 1];
        a = a || {};
        return a.mime ? b.toDataURL(a.mime, a.quality) : b
      }
    };
    this.setDefaults();
    return this
  };
  glfx.render = function(a) {
    if (!glfx.animationId || a)
      if (glfx.animationId || !g.rtc) glfx.requestAnimation(!0), glfx.cancelAnimation();
      else {
        var b = function() {
            c.removeEventListener("playing",
              b);
            setTimeout(function() {
              glfx.requestAnimation(!0);
              glfx.cancelAnimation();
              c.pause()
            }, 250)
          },
          c = g.rtc.getFocusVideo();
        c && (c.addEventListener("playing", b), c.play())
      }
  };
  glfx.animate = function(a) {
    null === a ? glfx.animationId ? glfx.cancelAnimation() : glfx.requestAnimation(
      a) : a ? glfx.requestAnimation(a) : glfx.cancelAnimation()
  };
  glfx.requestAnimation = function(a) {
    !0 === a && glfx.animationId && glfx.cancelAnimation();
    a = glfx.contexts.length;
    for (var b = 0; b < a; b++) {
      var c = glfx.contexts[b].gl;
      c && "none" !== c.display && c.render()
    }
    glfx.animationId =
      glfx.debug ? setTimeout(glfx.requestAnimation, 70) : window.requestAnimationFrame(
        glfx.requestAnimation)
  };
  glfx.cancelAnimation = function() {
    glfx.animationId && window.cancelAnimationFrame(glfx.animationId);
    delete glfx.animationId
  };
  glfx.loadResource = function(a, b, c, d, e, m, p) {
    d = d || g.loc.MEDIA + a[b];
    if ("string" !== typeof d || glfx.textures[d]) return !1;
    p = p || d.replace("./media/", "");
    g.loader && 0 === !d.indexOf("data") && g.loader.create("thread",
      p);
    var l = f.loadImage({
      src: d,
      onload: function() {
        var f = document.createElement("canvas"),
          q = f.getContext("2d");
        if (e && m) f.width = e, f.height = m, q.drawImage(l, 0, 0);
        else {
          var t = q.createPattern(l, "repeat");
          f.width = l.width;
          f.height = l.height;
          q.scale(1, 1);
          q.fillStyle = t;
          q.fillRect(0, 0, 1 * f.width, 1 * f.height)
        }
        setTimeout(function() {
          f.ctx = q;
          glfx.textures[d] = a[b] = f;
          c && c(f);
          g.loader && g.loader.create("thread", p, 100)
        }, 0)
      },
      onprogress: void 0
    });
    glfx.textures[d] = l;
    return !0
  };
  glfx.param = function(a, b, c) {
    return {
      param: a,
      format: b,
      value: c
    }
  };
  glfx.config = {};
  glfx.register = function(b) {
    var c = b.type,
      d = "gl_" + c,
      e = glfx.config[d] = {};
    e.toolkit = "media";
    e.type = d;
    var d = g.ui.vars,
      m = b.defaults = [],
      p = b.paramIndex = {},
      l = {
        temperature: ["#568fcf", "#f7e146"],
        tint: ["#00ae47", "#c73baf"],
        exposure: ["#777", "#eee"],
        brightness: ["#777", "#eee"],
        contrast: ["#777", "#eee"]
      };
    b.param || console.log(b);
    for (var q = 0; q < b.param.length; q++) {
      var t = b.param[q];
      t || console.log(c);
      var u = t.param,
        w = t.value;
      p[u] = q;
      m.push(w);
      t = t.format.replace(")", "").split("(");
      switch (t[0]) {
        case "px":
        case "int":
          t = a(t);
          e[u] = new d.Range({
            value: w,
            param: u,
            min: t[0] || 0,
            max: t[1] || 100
          });
          break;
        case "float":
          t = a(t);
          e[u] = new d.Range({
            value: w,
            param: u,
            min: t[0] || 0,
            max: t[1] || 1
          });
          break;
        case "degree":
          t = a(t);
          e[u] = new d.Range({
            value: w,
            param: u,
            min: t[0] || 0,
            max: t[1] || 360
          });
          break;
        case "radian":
          t = a(t);
          e[u] = new d.Range({
            value: w,
            param: u,
            min: t[0] || 0,
            max: t[1] || 360 * f.DEG_RAD
          });
          break;
        case "color":
          e[u] = new d.ColorPicker({
            color: w
          });
          break;
        case "select":
          break;
        default:
          console.log(t[0])
      }
      l[u] && e[u] && (e[u].gradient = l[u])
    }
    glfx.filters[c] = b
  };
  var a = function(a) {
    return a[1] ? a[1].split(",").map(function(a) {
      return "width" ===
        a ? window.innerWidth : "width/2" === a ? window.innerWidth /
        2 : "height" === a ? window.innerHeight : "height/2" === a ?
        window.innerHeight / 2 : parseFloat(a)
    }) : ""
  };
  glfx.dragCenterPoint = function(a, b) {
    var c = b.env,
      d = c.type;
    if (a && a.activeFilter) {
      var e = glfx.filters[d] && glfx.filters[d].paramIndex,
        d = glfx.config["gl_" + d];
      d.centerX.value = a.activeFilter.data[e.centerX] = b.x / c.width;
      d.centerY.value = a.activeFilter.data[e.centerY] = b.y / c.height;
      glfx.render("glfx.dragCenterPoint")
    }
  };
  glfx.getStack = function(a) {
    for (var b = [], c = glfx.presets[glfx.presetId],
        d = 0; d < c.length; d++) {
      for (var e = [], f = c[d], g = 0; g < f.length; g++) {
        var m = f[g];
        !1 !== m.enabled && ("blend" === m.id ? (e.shift(), e.push({
          cmd: "shader",
          id: "blend",
          data: [m.data[0], m.data[1], m.data[2], "texture0",
            "texture1"
          ]
        })) : e.push(m))
      }
      b.push(e)
    }
    return a ? encodeURIComponent(JSON.stringify(b)) : JSON.stringify(
      b)
  };
  glfx.getContextByIndex = function(a) {
    return glfx.contexts[a]
  };
  glfx.getContext = function(a, b) {
    b = b || {
      preserveDrawingBuffer: !0,
      premultipliedAlpha: !1
    };
    return a.getContext("webgl", b) || a.getContext(
      "experimental-webgl",
      b)
  };
  glfx.canvas = function() {
    var a = document.createElement("canvas");
    try {
      var b = glfx.gl = glfx.getContext(a);
      "function" === typeof OES_texture_float_linear && (
        OES_texture_float_linear(), OES_texture_float_linear = !1)
    } catch (d) {
      throw glfx.gl = null, "This browser does not support WebGL";
    }
    a._ = {
      gl: b,
      isInitialized: !1,
      dirty: !1,
      texture: null,
      spareTexture: null,
      flipXYShader: null,
      flipYShader: null
    };
    a.ctx = b;
    a.texture = t(q);
    a.draw = t(c);
    a.update = t(p);
    a.replace = t(w);
    a.contents = t(m);
    a.getPixelArray = t(u);
    for (var e in glfx.filters) a[e] =
      t(glfx.filters[e].shader);
    return a
  };
  glfx.simpleShader = function(a, b, c, d) {
    (c || this._.texture).use();
    this._.spareTexture.drawTo(function() {
      a.invalid || a.uniforms(b).drawRect()
    });
    this._.spareTexture.swapWith(d || this._.texture)
  };
  var e = function(a) {
      return {
        _: a,
        loadContentsOf: function(a, b, c) {
          glfx.gl = this._.gl;
          this._.loadContentsOf(a, b, c)
        },
        destroy: function() {
          this._ && (glfx.gl = this._.gl, this._.destroy())
        }
      }
    },
    q = function(a) {
      var b = e(glfx.Texture.fromElement(a));
      return a.texture = b
    },
    l, b = function(a, b) {
      var c = glfx.gl;
      if (c.getExtension("OES_texture_float") && c.getExtension(
          "OES_texture_float_linear") && !l) {
        var d = new glfx.Texture(100, 100, c.RGBA, c.FLOAT);
        try {
          d.drawTo(function() {
            l = c.FLOAT
          })
        } catch (e) {}
        d.destroy()
      }
      this.width = a;
      this.height = b;
      this.randomSeed = new f.Random(1);
      this._.texture && this._.texture.destroy();
      this._.spareTexture && this._.spareTexture.destroy();
      this._.extraTexture && this._.extraTexture.destroy();
      this._.extraTexture2 && this._.extraTexture.destroy();
      this._.texture = new glfx.Texture(a, b, c.RGBA, l);
      this._.spareTexture =
        new glfx.Texture(a, b, c.RGBA, l);
      this._.extraTexture = new glfx.Texture(0, 0, c.RGBA, l);
      this._.extraTexture2 = new glfx.Texture(0, 0, c.RGBA, l);
      this._.flipXYShader = this._.flipXYShader || new glfx.Shader(null,
        "\t\tuniform sampler2D texture;\t\tvarying vec2 texCoord;\t\tvoid main() {\t\t\tgl_FragColor = texture2D(texture, vec2(1.0 - texCoord.x, 1.0 - texCoord.y));\t\t}\t"
      );
      this._.flipYShader = this._.flipYShader || new glfx.Shader(null,
        "\t\tuniform sampler2D texture;\t\tvarying vec2 texCoord;\t\tvoid main() {\t\t\tgl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\t\t}\t"
      );
      this._.isInitialized = !0;
      this._.dirty = !1
    },
    c = function(a, c, d) {
      !this._.dirty && this._.isInitialized && a._.width == this.width &&
        a._.height == this.height || b.call(this, c ? c : a._.width, d ?
          d : a._.height);
      this.now = Date.now();
      this.startTime = this.startTime || this.now - 1;
      this.random = this.randomSeed.toDouble();
      a._.use();
      this._.texture.drawTo(function() {
        glfx.Shader.getDefaultShader().drawRect()
      });
      return this
    },
    p = function() {
      this._.texture.use();
      this._.flipYShader.drawRect();
      return this
    },
    w = function(a) {
      a.parentNode.insertBefore(this,
        a);
      a.parentNode.removeChild(a);
      return this
    },
    m = function() {
      var a = new glfx.Texture(this._.texture.width, this._.texture.height,
        gl.RGBA, gl.UNSIGNED_BYTE);
      this._.texture.use();
      a.drawTo(function() {
        glfx.Shader.getDefaultShader().drawRect()
      });
      return e(a)
    },
    u = function() {
      var a = glfx.gl,
        b = this._.texture.width,
        c = this._.texture.height,
        d = new Uint8Array(b * c * 4);
      this._.texture.drawTo(function() {
        a.readPixels(0, 0, b, c, a.RGBA, a.UNSIGNED_BYTE, d)
      });
      return d
    },
    t = function(a) {
      return function() {
        glfx.gl = this._.gl;
        return a.apply(this,
          arguments)
      }
    }
})(sketch);
glfx.Shader = function() {
  var g = function(a, d) {
      var f = glfx.gl,
        g = f.createShader(a);
      f.shaderSource(g, d);
      f.compileShader(g);
      if (!f.getShaderParameter(g, f.COMPILE_STATUS)) {
        var b = f.getShaderInfoLog(g);
        if (glfx.handleError) {
          glfx.handleError(b);
          return
        }
        throw "compile error: " + f.getShaderInfoLog(g);
      }
      return g
    },
    f, d = function(a, d, q) {
      var l = glfx.gl;
      q = q || "NORMAL";
      this.texCoordAttribute = this.vertexAttribute = null;
      this.program = l.createProgram();
      a = g(l.VERTEX_SHADER, a ||
        "\tattribute vec2 vertex;\tattribute vec2 _texCoord;\tvarying vec2 texCoord;\tvoid main() {\t\tvec2 coord = vertex * 2.0 - 1.0;\t\tgl_Position = vec4(coord.x, coord.y, 0.0, 1.0);\t\ttexCoord = _texCoord;\t}"
      );
      if (!a) return this.invalid = !0;
      l.attachShader(this.program, a);
      d = d ||
        "\tuniform sampler2D texture;\tvarying vec2 texCoord;\tvoid main() {\t\tgl_FragColor = texture2D(texture, texCoord);\t}";
      if (f) {
        d = "#define " + q + ";\nprecision " + f + " float;" + d;
        var b = g(l.FRAGMENT_SHADER, d);
        if (!b) return this.invalid = !0;
        l.attachShader(this.program, b)
      } else try {
        b = g(l.FRAGMENT_SHADER, "#define " + q +
          ";\nprecision highp float;" + d), l.attachShader(this.program,
          b), f = "highp"
      } catch (c) {
        b = g(l.FRAGMENT_SHADER, "#define " + q +
          ";\nprecision mediump float;" + d), l.attachShader(this.program,
          b), f = "mediump"
      }
      l.linkProgram(this.program);
      if (!l.getProgramParameter(this.program, l.LINK_STATUS)) throw "link error: " +
        l.getProgramInfoLog(this.program);
      this.invalid = !1
    };
  d.prototype.destroy = function() {
    glfx.gl.deleteProgram(this.program);
    this.program = null
  };
  d.prototype.uniforms = function(a) {
    var d = glfx.gl;
    d.useProgram(this.program);
    for (var f in a)
      if (a.hasOwnProperty(f)) {
        var g = d.getUniformLocation(this.program, f);
        if (null !== g) {
          var b = a[f];
          if (Array.isArray(b))
            if (b.format) {
              var c = b.format;
              if (-1 !== c.indexOf("matrix")) d[c](g, !1, new Float32Array(
                b));
              else d[c](g, new Float32Array(b))
            } else switch (b.length) {
                case 1:
                  d.uniform1fv(g, new Float32Array(b));
                  break;
                case 2:
                  d.uniform2fv(g, new Float32Array(b));
                  break;
                case 3:
                  d.uniform3fv(g, new Float32Array(b));
                  break;
                case 4:
                  d.uniform4fv(g, new Float32Array(b));
                  break;
                case 9:
                  d.uniformMatrix3fv(g, !1, new Float32Array(b));
                  break;
                case 16:
                  d.uniformMatrix4fv(g, !1, new Float32Array(b));
                  break;
                default:
                  throw "dont\u2019t know how to load uniform \u201c" + f +
                    "\u201d of length " + b.length;
              } else if (isFinite(b)) d.uniform1f(g,
                b);
              else throw "attempted to set uniform \u201c" + f +
                "\u201d to invalid value " + (b || "undefined").toString();
        }
      }
    return this
  };
  d.prototype.textures = function(a) {
    var d = glfx.gl;
    d.useProgram(this.program);
    for (var f in a) a.hasOwnProperty(f) && d.uniform1i(d.getUniformLocation(
      this.program, f), a[f]);
    return this
  };
  d.prototype.drawRect = function(a, d, f, g) {
    var b = glfx.gl,
      c = b.getParameter(b.VIEWPORT);
    d = void 0 !== d ? (d - c[1]) / c[3] : 0;
    a = void 0 !== a ? (a - c[0]) / c[2] : 0;
    f = void 0 !== f ? (f - c[0]) / c[2] : 1;
    g = void 0 !== g ? (g - c[1]) / c[3] : 1;
    null ==
      b.vertexBuffer && (b.vertexBuffer = b.createBuffer());
    b.bindBuffer(b.ARRAY_BUFFER, b.vertexBuffer);
    b.bufferData(b.ARRAY_BUFFER, new Float32Array([a, d, a, g, f, d,
      f, g
    ]), b.STATIC_DRAW);
    null == b.texCoordBuffer && (b.texCoordBuffer = b.createBuffer(),
      b.bindBuffer(b.ARRAY_BUFFER, b.texCoordBuffer), b.bufferData(b.ARRAY_BUFFER,
        new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), b.STATIC_DRAW));
    null == this.vertexAttribute && (this.vertexAttribute = b.getAttribLocation(
      this.program, "vertex"), b.enableVertexAttribArray(this.vertexAttribute));
    null ==
      this.texCoordAttribute && (this.texCoordAttribute = b.getAttribLocation(
        this.program, "_texCoord"), b.enableVertexAttribArray(this.texCoordAttribute));
    b.useProgram(this.program);
    b.bindBuffer(b.ARRAY_BUFFER, b.vertexBuffer);
    b.vertexAttribPointer(this.vertexAttribute, 2, b.FLOAT, !1, 0, 0);
    b.bindBuffer(b.ARRAY_BUFFER, b.texCoordBuffer);
    b.vertexAttribPointer(this.texCoordAttribute, 2, b.FLOAT, !1, 0,
      0);
    b.drawArrays(b.TRIANGLE_STRIP, 0, 4)
  };
  d.getDefaultShader = function() {
    var a = glfx.gl;
    a.defaultShader = a.defaultShader || new glfx.Shader;
    return a.defaultShader
  };
  return d
}();
glfx.Texture = function() {
  var g = function(a, d, f, g) {
    var b = glfx.gl;
    this.gl = b;
    this.id = b.createTexture();
    this.width = a;
    this.height = d;
    this.format = f;
    this.type = g;
    b.bindTexture(b.TEXTURE_2D, this.id);
    b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, b.LINEAR);
    b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, b.LINEAR);
    b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, b.CLAMP_TO_EDGE);
    b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, b.CLAMP_TO_EDGE);
    a && d && b.texImage2D(b.TEXTURE_2D, 0, this.format, a, d, 0,
      this.format, this.type,
      null)
  };
  g.prototype.loadContentsOf = function(a, d, f) {
    var g = glfx.gl;
    a && (this.width = d || a.width || a.videoWidth, this.height = f ||
      a.height || a.videoHeight, this.width && this.height && (g.bindTexture(
        g.TEXTURE_2D, this.id), g.texImage2D(g.TEXTURE_2D, 0, this.format,
        this.format, this.type, a)))
  };
  g.prototype.initFromBytes = function(a, d, f) {
    var g = glfx.gl;
    this.width = a;
    this.height = d;
    this.format = g.RGBA;
    this.type = g.UNSIGNED_BYTE;
    g.bindTexture(g.TEXTURE_2D, this.id);
    g.texImage2D(g.TEXTURE_2D, 0, g.RGBA, a, d, 0, g.RGBA, this.type,
      new Uint8Array(f))
  };
  g.prototype.destroy = function() {
    glfx.gl.deleteTexture(this.id);
    this.id = null
  };
  g.prototype.use = function(a) {
    var d = glfx.gl;
    d.activeTexture(d.TEXTURE0 + (a || 0));
    d.bindTexture(d.TEXTURE_2D, this.id)
  };
  g.prototype.unuse = function(a) {
    var d = glfx.gl;
    d.activeTexture(d.TEXTURE0 + (a || 0));
    d.bindTexture(d.TEXTURE_2D, null)
  };
  g.prototype.ensureFormat = function(a, d, f, g) {
    var b = glfx.gl;
    if (1 == arguments.length) {
      var c = arguments[0];
      a = c.width;
      d = c.height;
      f = c.format;
      g = c.type
    }
    if (a != this.width || d != this.height || f != this.format || g !=
      this.type) this.width =
      a, this.height = d, this.format = f, this.type = g, b.bindTexture(
        b.TEXTURE_2D, this.id), b.texImage2D(b.TEXTURE_2D, 0, this.format,
        a, d, 0, this.format, this.type, null)
  };
  g.prototype.drawTo = function(a) {
    var d = glfx.gl;
    d.framebuffer = d.framebuffer || d.createFramebuffer();
    d.bindFramebuffer(d.FRAMEBUFFER, d.framebuffer);
    d.framebufferTexture2D(d.FRAMEBUFFER, d.COLOR_ATTACHMENT0, d.TEXTURE_2D,
      this.id, 0);
    d.checkFramebufferStatus(d.FRAMEBUFFER) !== d.FRAMEBUFFER_COMPLETE ?
      (console.error("incomplete framebuffer"), a()) : (d.viewport(0,
        0, this.width, this.height), a(), d.bindFramebuffer(d.FRAMEBUFFER,
        null))
  };
  var f = null,
    d = function(a) {
      null == f && (f = document.createElement("canvas"));
      f.width = a.width;
      f.height = a.height;
      a = f.getContext("2d");
      a.clearRect(0, 0, f.width, f.height);
      return a
    };
  g.prototype.fillUsingCanvas = function(a) {
    var e = glfx.gl;
    a(d(this));
    this.format = e.RGBA;
    this.type = e.UNSIGNED_BYTE;
    e.bindTexture(e.TEXTURE_2D, this.id);
    e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, f);
    return this
  };
  g.prototype.toImage = function(a) {
    var e = glfx.gl;
    this.use();
    glfx.Shader.getDefaultShader().drawRect();
    var g = this.width * this.height * 4,
      l = new Uint8Array(g),
      b = d(this),
      c = b.createImageData(this.width, this.height);
    e.readPixels(0, 0, this.width, this.height, e.RGBA, e.UNSIGNED_BYTE,
      l);
    for (e = 0; e < g; e++) c.data[e] = l[e];
    b.putImageData(c, 0, 0);
    a.src = f.toDataURL()
  };
  g.prototype.swapWith = function(a) {
    var d;
    d = a.id;
    a.id = this.id;
    this.id = d;
    d = a.width;
    a.width = this.width;
    this.width = d;
    d = a.height;
    a.height = this.height;
    this.height = d;
    d = a.format;
    a.format = this.format;
    this.format = d
  };
  g.fromElement = function(a, d, f) {
    var g = glfx.gl;
    if (g) return g = new glfx.Texture(0, 0, g.RGBA, g.UNSIGNED_BYTE),
      g.loadContentsOf(a, d, f), g
  };
  return g
}();
glfx.helper = {};
glfx.helper.warpShader = function(g, f) {
  return new glfx.Shader(null, g +
    "    uniform sampler2D texture;    uniform vec2 texSize;    varying vec2 texCoord;    void main() {        vec2 coord = texCoord * texSize;        " +
    f +
    "        gl_FragColor = texture2D(texture, coord / texSize);        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);        if (coord != clampedCoord) {            /* fade to transparent if we are outside the image */            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));        }    }"
  )
};
glfx.randomShader =
  "    float random(vec3 scale, float seed) {        /* use the fragment position for a different seed per-pixel */        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);    }";
glfx.helper.RGB_HSL =
  "vec3 RGB_HSL(vec3 rgb) {\n\tvec3 hsl;\n\tfloat fmin = min(min(rgb.r, rgb.g), rgb.b);\n\tfloat fmax = max(max(rgb.r, rgb.g), rgb.b);\n\tfloat fdelta = fmax - fmin;\n\thsl.z = (fmax + fmin) / 2.0;\n\tif (fdelta == 0.0) {\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t} else {\n\t\tif (hsl.z < 0.5) {\n\t\t\thsl.y = fdelta / (fmax + fmin);\n\t\t} else {\n\t\t\thsl.y = fdelta / (2.0 - fmax - fmin);\n\t\t}\n\t\tvec3 delta = (((fmax - rgb) / 6.0) + (fdelta / 2.0)) / fdelta;\n\t\tif (rgb.r == fmax ) {\n\t\t\thsl.x = delta.z - delta.y;\n\t\t} else if (rgb.g == fmax) {\n\t\t\thsl.x = (1.0 / 3.0) + delta.x - delta.z;\n\t\t} else if (rgb.b == fmax) {\n\t\t\thsl.x = (2.0 / 3.0) + delta.y - delta.x;\n\t\t}\n\t\tif (hsl.x < 0.0) {\n\t\t\thsl.x += 1.0;\n\t\t} else if (hsl.x > 1.0) {\n\t\t\thsl.x -= 1.0;\n\t\t}\n\t}\n\treturn hsl;\n}";
glfx.helper.simplex_noise =
  "vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\nfloat snoise (vec2 v) {\n\tconst vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);\n\tvec2 i  = floor(v + dot(v, C.yy) );\n\tvec2 x0 = v -   i + dot(i, C.xx);\n\tvec2 i1;\n\ti1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\tvec4 x12 = x0.xyxy + C.xxzz;\n\tx12.xy -= i1;\n\ti = mod289(i);\n\tvec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));\n\tvec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n\tm = m*m ;\n\tm = m*m ;\n\tvec3 x = 2.0 * fract(p * C.www) - 1.0;\n\tvec3 h = abs(x) - 0.5;\n\tvec3 ox = floor(x + 0.5);\n\tvec3 a0 = x - ox;\n\tm *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\tvec3 g;\n\tg.x  = a0.x  * x0.x  + h.x  * x0.y;\n\tg.yz = a0.yz * x12.xz + h.yz * x12.yw;\n\treturn 130.0 * dot(m, g);\n}";
glfx.register({
  type: "colorMatrix",
  param: [glfx.param("invert", "int(0,1)", 0), glfx.param("tint",
      "float(-64,64)", 0), glfx.param("temperature", "float(-64,64)",
      0), glfx.param("brightness", "float(-1,1)", 0), glfx.param(
      "contrast", "float(-1,1)", 0), glfx.param("exposure",
      "float(0,2)", 1), glfx.param("colorize", "int(0,16777215)", 0),
    glfx.param("monotone", "int(0,16777215)", 0), glfx.param(
      "saturation", "float(0,2)", 1), glfx.param("sepia", "int(0,1)",
      0), glfx.param("hue", "float(0,360)", 0)
  ],
  shaderCode: "\t\tuniform sampler2D texture;\n\t\tuniform float m0;\n\t\tuniform float m1;\n\t\tuniform float m2;\n\t\tuniform float m3;\n\t\tuniform float m4;\n\t\tuniform float m5;\n\t\tuniform float m6;\n\t\tuniform float m7;\n\t\tuniform float m8;\n\t\tuniform float m9;\n\t\tuniform float m10;\n\t\tuniform float m11;\n\t\tuniform float m12;\n\t\tuniform float m13;\n\t\tuniform float m14;\n\t\tuniform float m15;\n\t\tuniform float m16;\n\t\tuniform float m17;\n\t\tuniform float m18;\n\t\tuniform float m19;\n\t\tvarying vec2 texCoord;\n\t\tvoid main() {\n\t\t\tvec4 z = texture2D(texture, texCoord).rgba;\n\t\t\tfloat r = clamp((z.r * m0) + (z.g * m1) + (z.b * m2) + (z.a * m3) + m4, 0.0, 1.0);\n\t\t\tfloat g = clamp((z.r * m5) + (z.g * m6) + (z.b * m7) + (z.a * m8) + m9, 0.0, 1.0);\n\t\t\tfloat b = clamp((z.r * m10) + (z.g * m11) + (z.b * m12) + (z.a * m13) + m14, 0.0, 1.0);\n\t\t\tfloat a = clamp((z.r * m15) + (z.g * m16) + (z.b * m17) + (z.a * m18) + m19, 0.0, 1.0);\n\t\t\tz.r = r;\n\t\t\tz.g = g;\n\t\t\tz.b = b;\n\t\t\tz.a = a;\n\t\t\tgl_FragColor = z;\n\t\t}",
  shader: function(g, f, d, a, e, q, l, b, c, p, w) {
    var m = glfx.gl,
      u = glfx.filters.colorMatrix;
    u.dirty && delete m.colorMatrix;
    m.colorMatrix = m.colorMatrix || new glfx.Shader(null, u.shaderCode);
    g = sk.gl.ColorMatrix.setFilter({
      saturation: c,
      invert: g,
      hue: w,
      sepia: p,
      tint: f,
      temperature: d,
      exposure: q,
      brightness: a / 255,
      contrast: e,
      colorize: l,
      monotone: b
    }).matrix;
    f = {};
    for (d = 0; d < g.length; d++) f["m" + d] = g[d];
    glfx.simpleShader.call(this, m.colorMatrix, f);
    return this
  }
});
glfx.register({
  type: "mirror",
  param: [glfx.param("flipX", "int(0,1)", 0), glfx.param("flipY",
    "int(0,1)", 0)],
  shaderCode: [
    "\tattribute vec2 vertex;\n\tattribute vec2 _texCoord;\n\tuniform float flipX;\n\tuniform float flipY;\n\tvarying vec2 texCoord;\n\tvoid main() {\n\t\tvec2 coord = vertex * 2.0 - 1.0;\n\t\tfloat x = flipX > 0.0 ? 1.0 - coord.x - 1.0 : coord.x;\n\t\tfloat y = flipY > 0.0 ? 1.0 - coord.y - 1.0 : coord.y;\n\t\tgl_Position = vec4(x, y, 0.0, 1.0);\n\t\ttexCoord = _texCoord;\n\t}",
    "    uniform sampler2D texture;\n    varying vec2 texCoord;\n    void main() {\n        gl_FragColor = texture2D(texture, texCoord);\n    }"
  ],
  shader: function(g, f, d) {
    d = glfx.gl;
    var a = glfx.filters.mirror;
    a.dirty && delete d.mirror;
    d.mirror = d.mirror || new glfx.Shader(a.shaderCode[0], a.shaderCode[
      1]);
    glfx.simpleShader.call(this, d.mirror, {
      flipX: isFinite(g) ? g : 0,
      flipY: isFinite(f) ? f : 0
    });
    return this
  }
});
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Server = function(f, d) {
    var a = this,
      e = f.feature,
      g = f.lang,
      l = f.util,
      b;
    a.servers = [];
    a.addHost = function(a) {
      l.cloneInto([a], a.servers)
    };
    a.getHost = function(b) {
      for (var c = a.servers, d = 0, e = b.length, f = c.length; e--;)
        d += b[e].charCodeAt();
      return c[d % f]
    };
    a.auth = function(a) {
      e.requireAuth ? l.request({
        url: f.loc.host + "check-login.html",
        onload: function(b) {
          a("true" === b.target.responseText)
        }
      }) : a(!0)
    };
    a.getResource = function() {
      if (f.loc.GET) return f.loc.getFileID() || f.loc.getRandomID();
      console.warn("GET not setup");
      return "new";
    };
    a.open = function(b, c) {
      var m = f.loc.GET,
        u = a.getResource();
      if (void 0 === u) return (m = e.session.path) ? f.loc.setHash(e
        .sync.hashFlag, m) : (m = e.defaultSketch) ? (m = m.replace(
        "sketch=", ""), f.loc.setHash(e.sync.hashFlag, m)) : f.loc.setHash(
        e.sync.hashFlag, "new");
      if ("new" === u) return d.scene && d.scene.reset(!0), d.history &&
        d.history.reset(), delete e.session.path, d.on.sketchReady(d);
      if (!f.client.nodewebkit) {
        var t = g.translate("downloading") + "...";
        f.loader && f.loader.create("thread",
          t);
        e.session.path = u;
        var h = function() {
            b && b();
            d.on.sketchReady(d);
            f.loader && f.loader.stop("thread")
          },
          u = u + "&format=" + d.format + "&timestamp=" + l.timestamp();
        l.request({
          url: m + u,
          onerror: function(a) {
            f.loader && f.loader.create("thread", t, 100);
            e.debug ? console.log("server connection error", a) : (f.loc
              .setHash(e.sync.hashFlag, "new"), c && c())
          },
          onload: function(a) {
            a = a.target.responseText;
            if (a.startsWith("<?xml") || a.startsWith("<svg")) f.loader &&
              f.loader.create("thread", t, 99), f.open.svg(a, h, h);
            else if (a.startsWith("<")) f.loader &&
              f.loader.create("thread", t, 100), e.debug ? console.log(
                "invalid data from server", a) : f.loc.setHash(e.sync.hashFlag,
                "new");
            else if (a.startsWith("{")) f.loader && f.loader.create(
              "thread", t, 99), f.open.json(a, h, h);
            else if (f.open.sketch) {
              for (var b = new Uint8Array(a.length), c = 0; c < a.length; c++)
                b[c] = a.charCodeAt(c) & 255;
              f.loader && f.loader.create("thread", t, 99);
              f.open.sketch(new Blob([b.buffer], {
                type: "application/zip"
              }), function() {
                d.on.sketchReady(d)
              })
            } else f.loader && f.loader.create("thread", t, 100), h()
          },
          onprogress: function(a) {
            var b =
              a.total || parseInt(this.getResponseHeader(
                "Content-xlength"));
            isNaN(b) || (a = a.loaded / b * 100 >> 0, f.loader && f.loader
              .create("thread", t, Math.max(0, a - 1)))
          }
        })
      }
    };
    a.save = function(d) {
      d = d || {};
      var g = d.url,
        m = d.sync || e.sync,
        q = d.metadata || m.metadata || {},
        t = d.onabort || m.onabort,
        h = d.onerror || m.onerror,
        r = d.onprogress || m.onprogress,
        k = d.onsave || m.onsave;
      250 > l.timestamp() - b || (b = l.timestamp(), a.auth(function(
        a) {
        a ? f.save.sync({
          sync: m,
          onprogress: function(a) {
            r && r(0, "prepare")
          },
          onsuccess: function(a) {
            for (var b in a)
              if ("folder" ===
                b)
                for (var d = a.folder, e = 0; e < d.length; e++) {
                  var f = d[e];
                  q[f.filename] = f.blob
                } else q[b] = a[b];
            c({
              url: g,
              metadata: q,
              onabort: t,
              onerror: h,
              onprogress: function(a, b) {
                r && r(a, b)
              },
              onsave: k
            })
          }
        }) : f.exec("login")
      }))
    };
    a.saveData = function(b) {
      b = b || {};
      (function() {
        a.auth(function(a) {
          a ? c(b) : f.exec("login")
        })
      })()
    };
    var c = function(a) {
      var b = a.url || f.loc.POST,
        c = a.metadata,
        g = a.onabort,
        t = a.onerror,
        h = a.onprogress,
        r = a.onsave;
      if (!a || !l.count(c)) return console.warn(
        "server sync is not setup");
      a = {
        action: b,
        confirm: "text",
        files: []
      };
      var k =
        a.files,
        b = function(a, b) {
          k.push({
            name: a,
            data: b
          })
        };
      if (e.sync.hashId) {
        var q = e.session.path;
        q && b("sync", q)
      }
      for (var x in c) b(x, c[x]);
      "string" !== typeof c.fileName && b("fileName", d.title);
      a.onprogress = function(a, b) {
        h && h(a.transferPercent, "sync")
      };
      a.onabort = function(a, b) {
        g && g(b)
      };
      a.onerror = function(a, b) {
        t && t(b)
      };
      a.onupload = function(a, b) {
        e.debug && console.log(a.transferTotal, b, a);
        "false" === b || "<" === b[0] ? (console.warn(
          "invalid server response", b), t && t(b)) : ((e.sync.json ||
            e.sync.zip || e.sync.svg) && e.sync.hashId &&
          (f.loc.setHash(e.sync.hashFlag, b), l.setItem("sync", b)),
          f.emit("save", b, k), r && r(b, k))
      };
      new f.uploader.upload(a)
    }
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.dom,
    d = g.util,
    a = g.lang,
    e = function(b, c) {
      var e = g.client.flash,
        l = '<h3 class="confirm-message" style="line-height: 2em;">' + a
        .translate("image-ready-to-share") + "<br>";
      e && (l +=
        '<button id="copy-button" class="icon-clipboard" data-clipboard-text="' +
        b + '" style="cursor:pointer" title="' + a.translate(
          "copy-to-clipboard") + '"></button> ');
      l += '<a href="' + b + '" target="_blank">' + d.string.ellipse(b,
        50) + "</a> ";
      l += "</h3>";
      alertify.set({
        labels: {
          ok: a.translate("ok")
        }
      });
      alertify.alert(l, e ? function() {
          ZeroClipboard.destroy()
        } :
        void 0);
      e && (e = f.$("#copy-button"), (new ZeroClipboard(e)).on(
        "complete",
        function(b) {
          g.ui.log(a.translate("share-link-copied"))
        }))
    };
  g.api = new function() {
    var p = this,
      l = {};
    this.test = function(b, c, d, h) {
      var p = l[b] || {};
      alertify.close(p.lastItem);
      var k = g.api[b],
        q = k.proper,
        x = 0;
      k.init(function() {
          var s = "sk-loader-" + b,
            z = '<span id="' + s + '">...</span>';
          k.uploading ? g.ui.log(a.translate("still-uploading", q) + z) :
            p = l[b] = g.ui.log(
              '<img src="./media/ux/loader.gif" style="border-radius: 50%;"> ' +
              a.translate("uploading-to",
                q) + z, 0);
          g.assets.createId(c, function(b) {
            k.post({
              title: d,
              description: h,
              canvas: c,
              hash: b,
              onupload: function(b) {
                var c = a.translate("upload-complete", q);
                p.lastItem ? (p.lastItem.innerHTML = c, p.close(p.lastItem)) :
                  g.ui.log(c);
                k.shareProxy || e(b, "")
              },
              onprogress: function(a) {
                a = "number" === typeof a ? 100 * a >> 0 : a.loaded /
                  a.total * 100 >> 0;
                a + 5 > x && (f.$("#" + s).textContent = ": " + a +
                  "%", x = a + 5)
              },
              onerror: function() {
                var b = a.translate("upload-failed", q) + " :(";
                p.lastItem ? (p.lastItem.innerHTML = b, p.close(p.lastItem)) :
                  g.ui.log(b)
              }
            })
          })
        },
        function() {
          g.ui.log(a.translate("could-not-authorize") + " :(")
        })
    };
    this.construct = function(a, b, c, e) {
      window[b] ? c && c() : d.loadScript({
        url: a,
        verify: b,
        error: e,
        callback: function() {
          setTimeout(function() {
            c && c()
          }, 100)
        }
      })
    };
    this.verify = function(a, b, c) {
      if (a.verified) return a.verified;
      a.init(function() {
        b(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7])
      })
    };
    this.share = function(a) {
      var b = a.target,
        c = p.sites[b];
      c && e(c(a), b)
    };
    this.shareProxy = function(a) {
      var d = this;
      this.provider = a;
      this.proper = g.api.sitesDefs[a].proper;
      this.icon =
        g.api.sitesDefs[a].icon;
      this.shareProxy = !0;
      this.init = function(a, b) {
        d.verified = !0;
        a && a()
      };
      this.post = function(e) {
        if (g.api.verify(d, d.post, arguments)) {
          var f = e.title,
            p = e.description,
            k = e.onupload;
          g.api.local.post({
            hash: e.hash,
            canvas: e.canvas,
            onprogress: e.onprogress || c,
            onerror: e.onerror || b,
            onupload: function(b) {
              k && k(b);
              g.api.share({
                target: a,
                title: f,
                description: p,
                shareUrl: b,
                mediaUrl: b
              })
            }
          })
        }
      }
    };
    this.sites = {
      digg: function(a) {
        return "http://digg.com/submit?url=" + encodeURIComponent(a.shareUrl)
      },
      stumbleupon: function(a) {
        return "https://www.stumbleupon.com/submit?url=" +
          encodeURIComponent(a.shareUrl)
      },
      reddit: function(a) {
        return "http://www.reddit.com/submit?url=" +
          encodeURIComponent(a.shareUrl)
      },
      googleplus: function(a) {
        return "https://plus.google.com/share?url=" +
          encodeURIComponent(a.shareUrl)
      },
      gmail: function(a) {
        return "http://mail.google.com/mail/" + ("?view=cm&fs=1&su=" +
          encodeURIComponent(a.title) + "&body=" + encodeURIComponent(
            a.shareUrl))
      },
      delicious: function(a) {
        return "http://del.icio.us/post" + ("?url1=" +
          encodeURIComponent(a.shareUrl) + "&title=" +
          encodeURIComponent(a.title))
      },
      myspace: function(a) {
        return "http://www.myspace.com/Modules/PostTo/Pages/" + (
          "?u=" + encodeURIComponent(a.shareUrl) + "&t=" +
          encodeURIComponent(a.title))
      },
      slashdot: function(a) {
        return "http://slashdot.org/slashdot-it.pl?op=basic&url=" +
          encodeURIComponent(a.shareUrl)
      },
      yahoo: function(a) {
        return "http://buzz.yahoo.com/submit/?url=" +
          encodeURIComponent(a.shareUrl)
      },
      technorati: function(a) {
        return "http://www.technorati.com/faves?add=" +
          encodeURIComponent(a.shareUrl)
      },
      linkedin: function(a) {
        return "http://www.linkedin.com/shareArticle" +
          ("?mini=true&url=" + encodeURIComponent(a.mediaUrl) +
            "&title=" + encodeURIComponent(a.title) + "&summary=" +
            encodeURIComponent(a.description) + "&source=" +
            encodeURIComponent(a.shareUrl))
      },
      tumblr: function(a) {
        return "http://www.tumblr.com/share/link" + ("?url=" +
          encodeURIComponent(a.shareUrl) + "&name=" +
          encodeURIComponent(a.title) + "&description=" +
          encodeURIComponent(a.description))
      },
      twitter: function(a) {
        return "http://twitter.com/share" + ("?text=" +
          encodeURIComponent(a.title) + " " + encodeURIComponent(a.description) +
          "&url=" +
          encodeURIComponent(a.shareUrl))
      },
      facebook: function(a) {
        return "https://www.facebook.com/sharer/sharer.php" + (
          "?s=100&p[title]=" + encodeURIComponent(a.title) +
          "&p[summary]=" + encodeURIComponent(a.description) +
          "&p[url]=" + encodeURIComponent(a.shareUrl) +
          "&p[images][0]=" + encodeURIComponent(a.mediaUrl))
      },
      pinterest: function(a) {
        return "https://pinterest.com/pin/create/button" + ("?url=" +
          encodeURIComponent(a.shareUrl) + "&media=" +
          encodeURIComponent(a.mediaUrl) + "&description=" +
          encodeURIComponent(a.title) + " " + encodeURIComponent(a.description)
        )
      },
      sketchio: function(a) {
        return a.shareUrl
      }
    }
  };
  g.api.sitesDefs = {
    googleplus: {
      icon: "icon-gplus",
      proper: "Google+"
    },
    delicious: {
      icon: "icon-delicious",
      proper: "Delicious"
    },
    facebook: {
      icon: "icon-facebook",
      proper: "Facebook"
    },
    gmail: {
      icon: "icon-email",
      proper: "GMail"
    },
    linkedin: {
      icon: "icon-image",
      proper: "LinkedIn"
    },
    imgur: {
      icon: "icon-image",
      proper: "Image"
    },
    myspace: {
      icon: "icon-myspace",
      proper: "MySpace"
    },
    pinterest: {
      icon: "icon-pinterest",
      proper: "Pinterest"
    },
    reddit: {
      icon: "icon-reddit",
      proper: "Reddit"
    },
    sketchio: {
      icon: "icon-infinity",
      proper: "SketchIO"
    },
    sketchpad: {
      icon: "icon-infinity",
      proper: "Sketchpad"
    },
    stumbleupon: {
      icon: "icon-stumbleupon",
      proper: "StumbleUpon"
    },
    tumblr: {
      icon: "icon-tumblr",
      proper: "Tumblr"
    },
    twitter: {
      icon: "icon-twitter",
      proper: "Twitter"
    },
    webcamfx: {
      icon: "icon-infinity",
      proper: "WebcamFX"
    }
  };
  (function() {
    for (var a =
        "twitter pinterest sketchio reddit tumblr stumbleupon gmail".split(
          " "), b = 0; b < a.length; b++) {
      var c = a[b];
      g.api[c] = new g.api.shareProxy(c)
    }
  })();
  g.api.facebook = new g.api.shareProxy("facebook");
  var q = function(a, b) {
    this.provider =
      a;
    this.proper = g.api.sitesDefs[a].proper;
    this.icon = g.api.sitesDefs[a].icon;
    this.init = function(a, b) {
      a && a()
    };
    this.post = function(a) {
      if (g.client.io.blob) {
        var c = a.onpost,
          d = a.onupload;
        a.canvas.toBlobURL(function(a) {
          a = window.location.protocol + b + a;
          d && d(a);
          c && c(a)
        })
      } else g.api.imgur.post(a)
    }
  };
  if ("sketch.io" === window.location.host) g.api.sketchpad = new q(
      "sketchpad", "//sketch.io/sketchpad/?image="), g.api.webcamfx =
    new q("webcamfx", "//sketch.io/webcam-fx/?image=");
  else {
    var l = window.location.host;
    g.api.sketchpad =
      new q("sketchpad", "//" + l + "/sketch.io/sketch-src/www/?image=");
    g.api.webcamfx = new q("webcamfx", "//" + l +
      "/sketch.io/sketch-filter/www/?image=")
  }
  g.api.imgur = new function(a) {
    var e = this;
    this.uploading = !1;
    this.lastHash = void 0;
    this.src = "";
    this.appId = "4a049ad1cf40d49";
    this.init = function(a, b) {
      a && a()
    };
    this.post = function(f) {
      if (!e.uploading) {
        var g = f.hash,
          l = f.canvas,
          h = f.onpost,
          r = f.onupload,
          k = f.onprogress || c,
          q = f.onerror || b;
        e.lastHash === g ? (r && r(e.src), h && h(e.src)) : (e.uploading = !
          0, l.toBlob(function(b) {
            var c = new FormData;
            c.append("image", b);
            d.request({
              url: "https://api.imgur.com/3/image.json",
              data: c,
              headers: {
                Authorization: "Client-ID " + e.appId
              },
              onprogress: k,
              onerror: function(a) {
                e.uploading = !1;
                q && q(a)
              },
              onload: function(b) {
                e.uploading = !1;
                try {
                  var c = JSON.parse(b.target.responseText).data.link,
                    c = a.indexOf("https://") ? a + c.replace("http://",
                      "https://") : a + c;
                  r && r(c);
                  h && h(c);
                  e.src = c;
                  e.lastHash = g
                } catch (d) {
                  console.warn(d)
                }
              }
            })
          }))
      }
    }
  }("");
  g.api.filepicker = new function() {
    var a = this;
    this.appId = "AmXVSjplaSwalHIqs9E6Qz";
    this.init = function(b,
      c) {
      var d = window.location.protocol,
        d = (0 === d.indexOf("http") ? d : "https:") +
        "//api.filepicker.io/v1/filepicker.js";
      g.api.construct(d, "filepicker", function() {
        a.verified = !0;
        filepicker.setKey(a.appId);
        b && b()
      }, c || function() {
        console.log(FPError.toString())
      })
    };
    this.store = function(b, c, d, e) {
      if (g.api.verify(a, a.store, arguments)) {
        var f = b.toDataURL("image/png").split(",")[1],
          l = f.length;
        filepicker.store(f, {
          mimetype: "image/png",
          base64decode: !0
        }, function(a) {
          c && c(a.url)
        }, function(a) {
          d && d(a.toString())
        }, function(a) {
          e &&
            e({
              loaded: a / 100 * l,
              total: l
            })
        })
      }
    };
    this.post = function(b) {
      if (g.api.verify(a, a.post, arguments)) {
        var c = b.onpost,
          d = b.onupload;
        g.api.local.post({
          hash: b.hash,
          canvas: b.canvas,
          onprogress: b.onprogress,
          onerror: b.onerror,
          onupload: function(a) {
            d && d(a);
            filepicker.exportFile(a, function(a) {
              c && c(a.url)
            })
          }
        })
      }
    }
  };
  g.api.local = new function(a) {
    var e = this;
    this.src = "";
    this.lastHash = void 0;
    this.uploading = !1;
    this.host = window.location.host;
    this.init = function(a, b) {
      a && a()
    };
    this.post = function(a) {
      if (!e.uploading) {
        var f = a.hash,
          p = a.canvas,
          h = a.onpost,
          l = a.onupload,
          k = a.onprogress || c,
          q = a.onerror || b;
        e.lastHash === f ? (l && l(e.src), h && h(e.src)) : (e.uploading = !
          0, g.feature.io.filePickerIO ? g.api.filepicker.store(p,
            function(a) {
              l && l(a);
              h && h(a);
              e.src = a;
              e.uploading = !1;
              e.lastHash = f
            }, q, k) : d.request({
            url: "https://sketch.io/upload.php",
            data: "canvasData=" + p.toDataURL("image/png"),
            headers: {
              "Content-Type": "canvas/upload"
            },
            onprogress: k,
            onerror: function(a) {
              q && q(a);
              e.uploading = !1
            },
            onload: function(a) {
              a = "https://sketch.io/render/" + a.target.response;
              l && l(a);
              h &&
                h(a);
              e.src = a;
              e.uploading = !1;
              e.lastHash = f
            }
          }))
      }
    }
  };
  var b = function(a) {
      console.log(a)
    },
    c = function(a) {
      console.log(a.loaded / a.total * 100 >> 0)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f, d = g.util;
  g.api = g.api || {};
  g.api.gdrive = function() {
    var l = this,
      b = d.exists("chrome.identity.getAuthToken"),
      c = e[window.location.host];
    this.provider = "gdrive";
    this.proper = "Google Drive";
    this.icon = "icon-google-drive";
    this.uploading = !1;
    this.lastHash = void 0;
    this.src = "";
    this.preloadScript = function(a) {
      b || d.loadScript({
        url: "https://apis.google.com/js/client.js",
        verify: ["gapi", "gapi.auth"],
        error: onerror,
        callback: function() {
          gapi.auth.init(function() {
            a && a()
          })
        }
      })
    };
    this.init = function(a, c) {
      var e =
        function() {
          d.setItem(l.provider, "");
          c && c()
        };
      if (!b) {
        if ("undefined" === typeof gapi) {
          g.ui.log("Loading Google Drive...");
          l.preloadScript(function() {
            l.auth(a, e)
          });
          return
        }
        var f = gapi.auth.getToken();
        if (f) {
          a && a(f);
          return
        }
      }
      l.auth(a, e)
    };
    this.getToken = function(a) {
      d.getItem(l.provider, function(b) {
        try {
          (b = JSON.parse(b)) && b.access_token || (b = "")
        } catch (c) {
          b = ""
        }
        a(b)
      })
    };
    this.revoke = function() {
      l.getToken(function(a) {
        a && (g.ui.log("Logging out of Google Drive..."), d.request({
          method: "GET",
          url: "https://accounts.google.com/o/oauth2/revoke?token=" +
            a.access_token,
          contentType: "application/json",
          onload: function() {
            f = void 0;
            d.setItem(l.provider, "")
          },
          onerror: function(a) {
            console.warn(a)
          }
        }))
      })
    };
    this.auth = function(a, e, f) {
      var g = Date.now(),
        q = function(b) {
          var c = {};
          c.timestamp = g;
          c.access_token = b;
          d.setItem(l.provider, JSON.stringify(c));
          a && a(c)
        };
      b ? chrome.identity.getAuthToken({
        interactive: !0
      }, function(a) {
        chrome.runtime.lastError ? e && e(chrome.runtime.lastError) :
          q(a)
      }) : l.getToken(function(b) {
        if (b && 1 > (g - b.timestamp) / 1E3 / 60 / 60) gapi.auth.setToken(
          b), a && a(b);
        else {
          var d = {
            immediate: !1,
            client_id: c,
            scope: "https://www.googleapis.com/auth/drive"
          };
          b && !f && (d.immediate = !0);
          setTimeout(function() {
            gapi.auth.authorize(d, function() {
              var b = gapi.auth.getToken();
              b ? q(b.access_token) : (l.revoke(), setTimeout(
                function() {
                  l.auth(a, null, !0)
                }, 250))
            })
          }, 1)
        }
      })
    };
    this.html_files = function(a, b) {
      l.getToken(function(c) {
        if (c) {
          c = document.querySelector(".drive-files");
          for (var d = [], e = document.createElement("div"), f =
              function() {
                var a = this.querySelector("img").getAttribute(
                    "data-src"),
                  b = "&access_token=" +
                  b.access_token;
                g.ui.log("loading file...");
                g.doc.addMedia({
                  src: a + b,
                  name: a + b,
                  onload: function() {}
                })
              }, l = 0; l < a.length; l++) {
            var k = a[l];
            if (b[k.mimeType]) {
              var q = document.createElement("div"),
                x = new Image,
                s = document.createTextNode(k.title);
              x.height = 64;
              x.src = k.thumbnailLink;
              x.setAttribute("data-src", k.downloadUrl);
              var z = document.createElement("div");
              z.style.cssText =
                "display: inline-block; width: 64px; height: 64px; overflow: hidden; margin-right: 15px;";
              z.appendChild(x);
              q.onclick = f;
              q.title = "open '" + k.title +
                "'";
              q.style.cssText =
                "clear: both; margin-bottom: 10px; cursor: pointer;";
              q.appendChild(z);
              q.appendChild(s);
              e.appendChild(q);
              d.push(k)
            }
          }
          d.length ? (c.innerHTML = "", c.appendChild(e)) : c.innerHTML =
            "<h3>You have no images stored in Google Drive</h3>"
        }
      })
    };
    this.list = function(b) {
      b = b || {};
      var c = b.mime || a,
        d = b.callback;
      l.init(function() {
        g.ui.log("updating listing...");
        gapi.client.request({
          path: "/drive/v2/files",
          method: "GET",
          params: {
            maxResults: "100"
          }
        }).execute(function(a) {
          a.error ? (l.revoke(), l.auth(function() {
              l.list(b)
            },
            null, !0)) : ((f = a) && l.html_files(f.items, c), d &&
            d(ret))
        });
        setTimeout(function() {
          f && l.html_files(f.items, c)
        }, 1)
      })
    };
    this.open = function() {};
    this.post = function(a) {
      var b = a.title,
        c = a.hash,
        d = a.canvas,
        e = a.onpost,
        f = a.onupload,
        r = a.onprogress || onprogressHandler,
        k = a.onerror || onerrorHandler;
      l.lastHash === c ? (f && f(l.src), e && e(l.src)) : l.init(
        function(a) {
          if (a) {
            if (!l.uploading) {
              l.uploading = !0;
              var p = d.toDataURL("image/png"),
                s = {
                  title: b,
                  mimeType: "image/png"
                },
                z = function(a) {
                  l.uploading = !1;
                  if (a = JSON.parse(a.target.response).webContentLink) a =
                    a.replace("&export=download", ""), f && f(a), e && e(a),
                    l.src = a, l.lastHash = c
                },
                y = function(a) {
                  l.uploading = !1;
                  console.warn(a)
                };
              if (g.client.io.blob) d.toBlob(function(b) {
                (new q({
                  url: "https://www.googleapis.com/upload/drive/v2/files/?uploadType=resumable",
                  contentType: "image/png",
                  content: b,
                  chunkSize: 262144,
                  metadata: s,
                  token: a.access_token,
                  onprogress: r,
                  onsuccess: z,
                  onerror: y
                })).upload()
              });
              else {
                var p = p.replace(
                    /^data:image\/(gif|png|jpg|jpeg);base64,/, ""),
                  p =
                  "\r\n-----------------------------\r\nContent-Type: application/json\r\n\r\n" +
                  JSON.stringify(s) +
                  "\r\n-----------------------------\r\nContent-Type: image/png\r\nContent-Transfer-Encoding: base64\r\n\r\n" +
                  p + "\r\n-------------------------------",
                  B = new XMLHttpRequest;
                B.open("POST",
                  "https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart", !
                  0);
                B.setRequestHeader("Authorization", "Bearer " + a.access_token);
                B.setRequestHeader("Content-Type",
                  "multipart/mixed; boundary=---------------------------"
                );
                B.onerror = y;
                B.onload = z;
                B.send(p)
              }
            }
          } else k && k()
        })
    }
  };
  f = void 0;
  var a = {
      "image/png": !0,
      "image/jpeg": !0,
      "image/gif": !0
    },
    e = {
      "": "54252469699-45phq7q6u8oi91kush4a6v6n9i4ka0hl.apps.googleusercontent.com",
      kkghjbajgkcialbbimbifdcjilhcgoim: "828302415973-qpnlkmra7tmdc62a4gd94e2c6skia8di.apps.googleusercontent.com",
      bnfbibiicdfhenmnkeacdmooflkkjpia: "828302415973-3tq345a2c72koncls5nfllgnrbn9kfa8.apps.googleusercontent.com",
      "sketch.io": "828302415973-377dfk3c23o3eq0sk2vqimt5vbl9fk3k.apps.googleusercontent.com",
      "dev.sketch.io": "828302415973-s418csujk7eo8kdg82vns0d12m29kn30.apps.googleusercontent.com",
      "c.zoop.io": "828302415973-d551rg91j3babem55647ml4ogbccbrgm.apps.googleusercontent.com",
      localhost: "828302415973-h8cbjd7k1oe2rmdfuofkqj5r0jurldfq.apps.googleusercontent.com"
    };
  g.api.gdrive = new g.api.gdrive;
  var q = function() {
    var a = function() {
      this.interval = 1E3;
      this.maxInterval = 6E4
    };
    a.prototype.retry = function(a) {
      setTimeout(a, this.interval);
      this.interval = this.nextInterval()
    };
    a.prototype.reset = function() {
      this.interval = 1E3
    };
    a.prototype.nextInterval = function() {
      var a = 2 * this.interval + this.getRandomInt(0, 1E3);
      return Math.min(a, this.maxInterval)
    };
    a.prototype.getRandomInt = function(a, c) {
      return Math.random() * (c - a + 1) + a >> 0
    };
    return function(b) {
      var c = this,
        e = b.content,
        f = b.contentType || e.type,
        g = b.metadata || {
          title: e.name,
          mimeType: f
        },
        q = b.fileId ? "PUT" : "POST",
        t = b.token,
        h = b.url,
        r = b.chunkSize || 0,
        k = b.offset || 0,
        v = new a,
        x = b.onsuccess || function() {},
        s = b.onprogress || function() {},
        z = b.onerror || function() {};
      c.upload = function() {
        d.request({
          url: h,
          method: q,
          headers: {
            Authorization: "Bearer " + t,
            "Content-Type": "application/json",
            "X-Upload-Content-Length": C(e),
            "X-Upload-Content-Type": f
          },
          data: JSON.stringify(g),
          onprogress: function(a) {},
          onload: function(a) {
            h = a.target.getResponseHeader("Location");
            y()
          },
          onerror: function(a) {
            z(a.target.response)
          }
        })
      };
      c.resume = function() {
        d.request({
          url: h,
          method: "PUT",
          headers: {
            "Content-Range": "bytes */" + C(e),
            "X-Upload-Content-Type": f
          },
          onload: B,
          onerror: A
        })
      };
      var y = function() {
          var a = e,
            b = C(a);
          if (k || r) r && (b = Math.min(k + r, C(a))), a = a.slice(k,
            b);
          d.request({
            url: h,
            method: "PUT",
            headers: {
              "Content-Type": f,
              "Content-Range": "bytes " + k + "-" + (b - 1) + "/" +
                C(e),
              "X-Upload-Content-Type": f
            },
            data: a,
            onprogress: function(b) {
              var c = k / C(e);
              b = b.loaded / b.total * C(a) / C(e) + c;
              s && s(b)
            },
            onload: B,
            onerror: A
          })
        },
        B = function(a) {
          var b = a.target;
          200 === b.status || 201 === b.status ? x(a) : 308 === b.status &&
            ((a = b.getResponseHeader("Range")) && (k = parseInt(a.match(
              /\d+/g).pop(), 10) + 1), v.reset(), y())
        },
        A = function(a) {
          a = a.target;
          a.status && 500 > a.status ? z(a.response) : v.retry(c.resume)
        },
        C = function(a) {
          return a.size || a.length || 0
        }
    }
  }()
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Convert = function(a) {
    var e = this,
      g = a.dom,
      l = a.util || (a.util = {});
    a.io || (a.io = {});
    e.fileToImage = function(b, c, e) {
      if (!b) return console.warn("fileToImage", arguments);
      var g = b.src || b;
      c = c || b.onload || f;
      e = e || b.onerror || d;
      var m = a.util.loadImage({
        src: g,
        onerror: e,
        onload: function() {
          c(m)
        }
      })
    };
    e.fileToCanvas = function(a, c, g) {
      if (!a) return console.warn("fileToCanvas", arguments);
      var l = a.src || a,
        m = a.canvas;
      c = c || a.onload || f;
      g = g || a.onerror || d;
      e.fileToImage(l, function(a) {
        c(e.imageToCanvas(a,
          m))
      }, g)
    };
    e.fileToPattern = function(a, c, g) {
      if (!a) return console.warn("fileToPattern", arguments);
      var l = a.src || a;
      c = c || a.onload || f;
      g = g || a.onerror || d;
      e.fileToCanvas(l, function(a) {
        var b = e.imageToPattern(a);
        b.canvas = a;
        c(b)
      }, g)
    };
    e.htmlToCanvas = function(a, c, e) {
      if (!a) return console.warn("htmlToCanvas", arguments);
      if ("undefined" === typeof html2canvas) return console.warn(
        "html2canvas undefined");
      var l = a.html || a;
      c = c || a.onload || f;
      e = e || a.onerror || d;
      var m = g.$("#sk-htmlToCanvas") || g.append(document.body,
        '<div id="sk-htmlToCanvas" style="position:fixed;top:0;left:0;display:none"></div>'
      );
      m.style.display = "block";
      m.innerHTML = l;
      html2canvas(m, {
        onerror: e,
        onrendered: function(a) {
          c(a);
          m.style.display = "none"
        }
      })
    };
    e.imageToCanvas = function(b, c) {
      if (!b) return console.warn("imageToCanvas", arguments);
      c ? (c.ctx = c.ctx || c.getContext("2d"), c.width = b.width, c.height =
        b.height) : c = l.Canvas(b.width, b.height);
      a.client.ios && window.MegaPixImage ? (new MegaPixImage(b)).render(
        c, {
          maxWidth: 1E3,
          maxHeight: 1E3
        }) : c.ctx.drawImage(b, 0, 0);
      return c
    };
    e.imageToPattern = function(a, c) {
      if (!a) return console.warn("imageToPattern",
        arguments);
      c = e.imageToCanvas(a, c);
      return c.ctx.createPattern(a, "repeat")
    };
    e.blobToText = function(a, c, e) {
      if (!a) return console.warn("blobToText", arguments);
      var g = a.blob || a;
      c = c || a.onload || f;
      e = e || a.onerror || d;
      var m = new FileReader;
      m.onerror = e;
      m.onload = function(a) {
        c(a.target.result)
      };
      m.readAsText(g)
    };
    e.blobToArrayBuffer = function(a, c) {
      var d = a.slice(0, a.size),
        e = new FileReader;
      e.onload = function(a) {
        c(new function(a, b) {
          var c = 0;
          this.buffer = a;
          this.dataView = b = b || new DataView(a);
          this.readInt8 = function() {
            if (!(c + 1 >
                a.byteLength)) return b.getUint8(c++ - 1, !1)
          };
          this.readInt16 = function() {
            if (!(c + 2 > a.byteLength)) return b.getUint16((c += 2) -
              2, !1)
          };
          this.readInt32 = function() {
            if (!(c + 4 > a.byteLength)) return b.getUint32((c += 4) -
              4, !1)
          };
          this.readString32 = function(a) {
            a = this.readInt32();
            for (var d = 0, e = ""; d < a; d++) e += String.fromCharCode(
              b.getUint16(c, !1)), c += 2;
            return e
          };
          this.seekString = function(d) {
            for (var e = "", f = a.byteLength, g = 0; e !== d && c <
              f;) {
              ++g;
              var m = String.fromCharCode(b.getUint8(c, !1));
              c++;
              if (d[e.length] === m) {
                if (e += m, e === d) return g
              } else e =
                ""
            }
          }
        }(e.result))
      };
      e.readAsArrayBuffer(d)
    };
    return e
  };
  var f = function() {
      console.log("onload", arguments)
    },
    d = function() {
      console.warn("onerror", arguments)
    };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Convert)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Download = function(f) {
    var d = this,
      a = f.dom,
      e = f.util,
      g = f.lang;
    d.blob = function(a, b) {
      var d = f.doc;
      a = a || new Blob(["hello world"]);
      b = b || d.title + ".txt";
      d = f.client.io.blob;
      f.client.chooseEntry ? chrome.fileSystem.chooseEntry({
        type: "saveFile",
        suggestedName: b
      }, function(b) {
        b.createWriter(function(b) {
          b.write(a)
        }, function(a) {
          console.log(a)
        })
      }) : d ? (d = URL.createObjectURL(a), saveAs(a, b)) : (d = URL
        .createObjectURL(a), c.download(d, b))
    };
    d.text = function(a, b, e) {
      var g = f.doc;
      b = b || g.title +
        ".txt";
      e = e || "text/plain";
      f.client.io.blob ? d.blob(new Blob([a], {
        type: e
      }), b) : (a = "data:" + e + ";base64," + btoa(a), c.download(a,
        b))
    };
    d.canvas = function(a, b, g, q) {
      c.isReady() && (a = a || e.Canvas(), g = g || "image/png", q =
        q || 1, b = l(b, g), e.exists(
          "canvas2ImagePlugin.saveImageDataToLibrary") ?
        canvas2ImagePlugin.saveImageDataToLibrary(function(a) {
          alertify.alert(
            "Image successfully saved to your Photo Gallery.")
        }, function(a) {
          alertify.alert("There was an error saving your image.")
        }, a) : f.client.io.blob ? a.toBlob(function(a) {
          d.blob(a,
            b)
        }, g, q) : (a = a.toDataURL(g, q), c.download(a, b)))
    };
    var l = function(a, b) {
      var c = f.doc,
        d = b.split("/").pop(),
        c = a || c.title || "sketch";
      return -1 === c.indexOf(d) ? c + "." + d : c
    };
    d.sketch = d.zip = function(a) {
      var b = f.doc;
      c.isReady() && f.save.zip(function(c) {
        var e = a || b.title;
        a = -1 === e.indexOf(".sketchpad") ? e + ".sketchpad" : e;
        d.blob(c, a)
      })
    };
    d.svg = function(a, b) {
      var e = f.doc;
      c.isReady() && f.save.svg({
        assets: b,
        callback: function(b, c) {
          var f = a || e.title;
          a = -1 === f.indexOf(".svg") ? f + ".svg" : f;
          d.text(b, a, "image/svg+xml")
        }
      })
    };
    d.json = function(a,
      b) {
      var g = f.doc;
      c.isReady() && f.save.json({
        assets: b,
        callback: function(b) {
          var c = a || g.title;
          b = JSON.stringify(b, e.json.filterCircular);
          a = -1 === c.indexOf(".json") ? c + ".json" : c;
          d.text(b, a, "application/json")
        }
      })
    };
    d.image = function(a, e, g, l, q, h, r, k) {
      c.onReady(function(c) {
        var x = b(a, e, g, l, q, h, r, k);
        f.save.canvas(x, function(a) {
          72 === x.dpi ? d.canvas(a, x.filename, x.mime, x.quality) :
            d.canvasDPI(a, x.filename, x.mime, x.quality)
        })
      })
    };
    (function() {
      d.canvasDPI = function(b, c, e, k, g) {
        e = e || "image/png";
        k = k || 1;
        c = l(c, e);
        b.toBlob(function(b) {
          f.convert.blobToArrayBuffer(b,
            function(f) {
              f = a[e](b, f, g);
              d.blob(f, c)
            })
        }, e, k)
      };
      var a = {
          "image/jpeg": function(a, b, c) {
            b = b.dataView;
            b.setUint8(13, 1);
            b.setUint16(14, c);
            b.setUint16(16, c);
            return new Blob([b])
          },
          "image/png": function(a, c, d) {
            d = b(d / 72 * 2834.6472);
            d = [112, 72, 89, 115].concat(d).concat(d).concat(1);
            d = b(d.length - 4).concat(d).concat(e(d));
            var f = c.seekString("IDATx") - 5 - 4;
            c = a.slice(0, f);
            a = a.slice(f, a.size);
            return new Blob([c, new Uint8Array(d), a], {
              type: "image/png"
            })
          }
        },
        b = function(a) {
          return [a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, a & 255]
        },
        c = [0, 1996959894,
          3993919788, 2567524794, 124634137, 1886057615, 3915621685,
          2657392035, 249268274, 2044508324, 3772115230, 2547177864,
          162941995, 2125561021, 3887607047, 2428444049, 498536548,
          1789927666, 4089016648, 2227061214, 450548861, 1843258603,
          4107580753, 2211677639, 325883990, 1684777152, 4251122042,
          2321926636, 335633487, 1661365465, 4195302755, 2366115317,
          997073096, 1281953886, 3579855332, 2724688242, 1006888145,
          1258607687, 3524101629, 2768942443, 901097722, 1119000684,
          3686517206, 2898065728, 853044451, 1172266101, 3705015759,
          2882616665, 651767980,
          1373503546, 3369554304, 3218104598, 565507253, 1454621731,
          3485111705, 3099436303, 671266974, 1594198024, 3322730930,
          2970347812, 795835527, 1483230225, 3244367275, 3060149565,
          1994146192, 31158534, 2563907772, 4023717930, 1907459465,
          112637215, 2680153253, 3904427059, 2013776290, 251722036,
          2517215374, 3775830040, 2137656763, 141376813, 2439277719,
          3865271297, 1802195444, 476864866, 2238001368, 4066508878,
          1812370925, 453092731, 2181625025, 4111451223, 1706088902,
          314042704, 2344532202, 4240017532, 1658658271, 366619977,
          2362670323, 4224994405,
          1303535960, 984961486, 2747007092, 3569037538, 1256170817,
          1037604311, 2765210733, 3554079995, 1131014506, 879679996,
          2909243462, 3663771856, 1141124467, 855842277, 2852801631,
          3708648649, 1342533948, 654459306, 3188396048, 3373015174,
          1466479909, 544179635, 3110523913, 3462522015, 1591671054,
          702138776, 2966460450, 3352799412, 1504918807, 783551873,
          3082640443, 3233442989, 3988292384, 2596254646, 62317068,
          1957810842, 3939845945, 2647816111, 81470997, 1943803523,
          3814918930, 2489596804, 225274430, 2053790376, 3826175755,
          2466906013, 167816743,
          2097651377, 4027552580, 2265490386, 503444072, 1762050814,
          4150417245, 2154129355, 426522225, 1852507879, 4275313526,
          2312317920, 282753626, 1742555852, 4189708143, 2394877945,
          397917763, 1622183637, 3604390888, 2714866558, 953729732,
          1340076626, 3518719985, 2797360999, 1068828381, 1219638859,
          3624741850, 2936675148, 906185462, 1090812512, 3747672003,
          2825379669, 829329135, 1181335161, 3412177804, 3160834842,
          628085408, 1382605366, 3423369109, 3138078467, 570562233,
          1426400815, 3317316542, 2998733608, 733239954, 1555261956,
          3268935591, 3050360625,
          752459403, 1541320221, 2607071920, 3965973030, 1969922972,
          40735498, 2617837225, 3943577151, 1913087877, 83908371,
          2512341634, 3803740692, 2075208622, 213261112, 2463272603,
          3855990285, 2094854071, 198958881, 2262029012, 4057260610,
          1759359992, 534414190, 2176718541, 4139329115, 1873836001,
          414664567, 2282248934, 4279200368, 1711684554, 285281116,
          2405801727, 4167216745, 1634467795, 376229701, 2685067896,
          3608007406, 1308918612, 956543938, 2808555105, 3495958263,
          1231636301, 1047427035, 2932959818, 3654703836, 1088359270,
          936918E3, 2847714899,
          3736837829, 1202900863, 817233897, 3183342108, 3401237130,
          1404277552, 615818150, 3134207493, 3453421203, 1423857449,
          601450431, 3009837614, 3294710456, 1567103746, 711928724,
          3020668471, 3272380065, 1510334235, 755167117
        ],
        e = function(a, d) {
          d = (d | 0) ^ 4294967295;
          for (var e = 0, f = a.length; e < f; e++) d = d >>> 8 ^ c[(d ^
            a[e]) & 255];
          return b(d ^ 4294967295)
        }
    })();
    d.pdf = function(a, l, m, u, t, h, r, k) {
      var v = f.doc;
      f.loader && f.loader.create("thread", g.translate(
        "reading-files") + "...");
      c.onReady(function(c) {
        var g = b(a, l, m, u, t, h, r, k);
        f.io.pdf.save(e.cloneInto({
          onprogress: function(a) {
            f.loader &&
              f.loader.create("thread", null, a)
          },
          onsuccess: function(a) {
            d.blob(a, (g.filename || v.title) + ".pdf")
          },
          onerror: function() {
            console.warn("error saving pdf")
          }
        }, g))
      })
    };
    var b = function(a, b, c, d, e, h, g, k) {
        var l = f.doc,
          q = typeof a,
          s = "object" === q ? a : {},
          z = function(a, b, c) {
            typeof s[a] !== b && (s[a] = c)
          },
          y = function(a, b, c) {
            if ("function" === typeof c)
              if (s.callback) {
                var d = s.callback;
                s.callback = function() {
                  d();
                  c()
                }
              } else s.callback = c;
            if (typeof c === b) return s[a] = c, !0
          };
        "number" === q || "undefined" === q ? (y("x", "number", a), y(
            "y", "number", b),
          y("width", "number", c), y("height", "number", d), y("mime",
            "string", e), y("quality", "number", h), y("dpi", "number",
            g), y("callback", "function", k)) : "string" === q ? (y(
          "mime", "string", a), y("quality", "number", b), y(
          "callback", "function", c)) : "function" === q && y(
          "callback", "function", a);
        a = l.pixelRatio;
        b = l.getBounds();
        b.width && z("width", "number", b.width * a);
        b.height && z("height", "number", b.height * a);
        z("mime", "string", "image/png");
        z("quality", "number", 1);
        z("dpi", "number", l.dpi);
        0 !== s.mime.indexOf("image/") && (s.mime = "image/" +
          s.mime);
        return s
      },
      c = new function() {
        var b = "undefined" === typeof document ? !1 : "download" in
          document.createElement("a");
        this.lapse = 1E3;
        this.getElement = function() {
          var b = this.element || a.$("#sk-download-element");
          if (b) return b;
          this.element = document.createElement("a");
          this.element.id = "download";
          this.element.target = "_blank";
          this.element.style.display = "none";
          this.element.timestamp = e.timestamp() - this.lapse;
          document.body.appendChild(this.element);
          return this.element
        };
        this.isReady = function(a) {
          var b = this.getElement(),
            c = e.timestamp();
          if (c - b.timestamp >= this.lapse) return a ? !0 : b.timestamp =
            c
        };
        this.onReady = function(a) {
          var b = this.getElement();
          if (this.isReady(!0)) return a(b), b
        };
        this.download = function(a, d) {
          if (b) {
            var e = c.getElement();
            e.download = d;
            e.href = a;
            e.click()
          } else window.open().document.write("<title>" + d +
            '</title><img src="' + a + '"/>')
        }
      };
    return d
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Download)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Open = function(f) {
    var d = this,
      a = f.convert,
      e = f.io,
      g = f.lang,
      l = f.util.string,
      b = f.util;
    d.folder = function(c) {
      var e = c.entries,
        w = c.onerror,
        m = c.onsuccess,
        u = c.onprogress;
      f.loader && f.loader.create("thread", g.translate(
        "reading-files") + "...");
      var t, h = new b.Queue({
        items: e,
        flatten: !0,
        oncomplete: function() {
          t ? d.json(t, m, u) : (f.loader && f.loader.create(
            "thread", null, 100), w && w())
        },
        next: function(b, c, d) {
          c = (d + 1) / e.length * 100 >> 0;
          f.loader && f.loader.create("thread", null, Math.max(0,
            c - 1));
          if (b.name) switch (b.name) {
            case "README.txt":
              h.next();
              break;
            case "sketch.json":
              a.blobToText(b, function(a) {
                t = a;
                h.next()
              });
              break;
            default:
              f.assets.add({
                blob: b,
                onerror: h.next,
                onload: h.next,
                targetId: "#" + l.filenameSansExtension(b.name)
              })
          } else return h.next()
        }
      })
    };
    d.chooseEntry = function(c, d) {
      if (b.exists("navigator.camera.getPicture")) navigator.camera.getPicture(
        function(b) {
          a.fileToCanvas(b, function(a) {
            a.toBlob(function(a) {
              a.path = b;
              a.name = l.filename(b);
              c(a);
              navigator.camera.cleanup()
            })
          })
        }, d, {
          destinationType: Camera.DestinationType.NATIVE_URI,
          sourceType: Camera.PictureSourceType.PHOTOLIBRARY,
          allowEdit: !1,
          targetWidth: 640,
          targetHeight: 480,
          saveToPhotoAlbum: !1
        });
      else return b.exists("chrome.fileSystem.chooseEntry") ? (chrome
        .fileSystem.chooseEntry({
          type: "openFile",
          accepts: [{
            extensions: f.uploader.formats
          }]
        }, function(a) {
          a && a.file(function(a) {
            c(a)
          })
        }), !0) : !1
    };
    d.svg = d.clipart = d.image = function(a) {
      var d = f.doc;
      "string" === typeof a && (a = {
        src: a
      });
      var e = a.callback || a.onload,
        g = a.onprogress,
        l = a.onerror,
        q = a.src || "",
        h = function(b) {
          if (a.openAsNew) {
            f.exec("reset");
            var h = b.width;
            b = b.height;
            d.setSize(h, b);
            d.scene.add({
              centerOnPoint: !0,
              type: "image",
              src: q,
              width: h,
              height: b,
              x: h / 2,
              y: b / 2
            }, function() {
              d.setTool("select");
              d.scene.deselectAll();
              d.orient.reset();
              d.orient.render();
              e && e()
            }, onerror)
          } else d.addMedia(a)
        };
      if (a.blob) f.assets.add(a.blob, function(a, b) {
        h(b)
      }, l, g);
      else if (-1 !== q.indexOf("filesystem:")) {
        var r = new Image;
        r.src = q;
        r.onprogress = g;
        r.onerror = l;
        r.onload = function() {
          var a = b.Canvas(this.width, this.height);
          a.ctx.drawImage(this, 0, 0);
          h(a)
        }
      } else f.assets.add(q, function(a,
        b) {
        h(b)
      }, l, g)
    };
    d.fromQuery = function(a, b, g) {
      var m = f.doc,
        l = f.feature;
      "string" === typeof a && (a = f.loc.getQuery(a, "sk"));
      a.file && f.lib.template.byId[a.file] ? f.lib.template.open(a.file,
          b, g) : a.file && "new" === a.file ? (m.orient.reset(), b()) :
        a.folder ? (e.json.folder = a.folder, d.json({
          src: a.folder + "sketch.json",
          onload: b,
          onerror: g
        })) : a.image ? d.image({
          src: a.image,
          openAsNew: !0,
          onload: b,
          onerror: g
        }) : a.json ? d.json({
          src: a.json,
          onload: b,
          onerror: g
        }) : l.stream.sketch ? f.peer.openDefaultResource(b, g) : f.fs
        .supported ? f.fs.openDefaultProject(b,
          g) : f.server.open ? f.server.open(b, g) : b && b()
    };
    f.server && (d.remote = f.server.open);
    e.zip && (d.sketch = e.zip.open);
    e.svg && (d.svg = e.svg.open);
    e.pdf && (d.pdf = e.pdf.open);
    e.json && (d.json = e.json.open);
    return d
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Open)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Print = function(f) {
    var d = f.dom;
    return function(a) {
      a = a || {};
      var e = function(e) {
        var f = 72 / (a.dpi || 72),
          b = f * e.width + "px",
          f = f * e.height + "px";
        e.style.width = b;
        e.style.height = f;
        var c;
        (c = d.$("#sk-printable")) || (c = d.append(document.body,
          '<div id="sk-printable"></div>'));
        c.style.width = b;
        c.style.height = f;
        c.innerHTML = "";
        c.appendChild(e);
        window.print()
      };
      "CANVAS" === a.nodeName ? e(a) : f.save.canvas(a, e)
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Print)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.Save = function(f) {
    var d = this,
      a = f.feature,
      e = f.io,
      g = f.util;
    d.console = function(a) {
      d.canvas(a, f.log)
    };
    d.toDataURL = function(a, b) {
      var c = w(arguments);
      a = c.params;
      b = c.onsuccess;
      var e = p(a),
        f = a.quality || 1;
      d.canvas(a, function(a) {
        b(a.toDataURL(e, f))
      })
    };
    d.toBlob = function() {
      var a = w(arguments),
        b = a.params,
        c = a.onsuccess,
        e = p(b),
        f = b.quality || 1;
      d.canvas(b, function(a) {
        a.toBlob(function(a) {
          c(a)
        }, e, f)
      })
    };
    d.toBlobURL = function() {
      var a = w(arguments),
        b = a.onsuccess;
      d.toBlob(a.params,
        function(a) {
          b(URL.createObjectURL(a))
        })
    };
    d.canvas = function() {
      var b = f.doc,
        c = b.canvas2d,
        e = b.render,
        h = w(arguments),
        p = h.params,
        k = h.onsuccess;
      d.perf = f.perf();
      var v = b.getBounds();
      if (p.crop) var x = v.width,
        s = v.height,
        z = 0,
        y = 0,
        B = function(a) {
          g.thumbnailer({
            src: a,
            width: p.width || v.width,
            height: p.height || v.height,
            background: p.background,
            center: p.center,
            croparea: p.croparea,
            crop: p.crop,
            onload: k
          })
        };
      else x = isFinite(p.width) ? p.width : v.width, s = isFinite(p.height) ?
        p.height : v.height, z = isFinite(p.x) ? p.x : 0, y = isFinite(
          p.y) ?
        p.y : 0, B = function(a) {
          k && k(a)
        };
      var A = b.pixelRatio,
        h = 72 * A,
        C = isFinite(p.dpi) ? p.dpi : h,
        F = C / 72,
        E = p.scale || 1;
      1 !== E && (C *= E, F = C / 72);
      var h = isFinite(p.highRes) ? p.highRes : e.highRes || C !== h,
        C = p.useVisibleRegion || !1,
        D = (E = p.useSelection || !1) || p.useBBox || !isFinite(z + y +
          x + s),
        P = p.usePixelBBox,
        G = p.background || void 0;
      "transparent" !== b.background && ("default" === G ? G = b.backgroundRaw :
        a.canvas.useBGSave && !G && (G = b.backgroundRaw));
      P && f.raster.getPixelBBox ? (D = f.raster.getPixelBBox(b.contexts
          .layer0.ctx), z = D.x / A >> 0, y = D.y / A >> 0, x =
        D.width / A >> 0, s = D.height / A >> 0) : D && b.scene ? (D =
        b.scene.getBoundingBox(p), z = D.x * F >> 0, y = D.y * F >> 0,
        x = D.width * F >> 0, s = D.height * F >> 0) : (z -= b.scrollLeft,
        y -= b.scrollTop, x *= F, s *= F);
      x = Math.ceil(x);
      s = Math.ceil(s);
      C && (x = Math.min(x, c.width), s = Math.min(s, c.height), z =
        Math.max(z, 0), y = Math.max(y, 0));
      if (f.getSnapshot) return f.getSnapshot(B, x, s);
      if (b.scene) {
        var J = c.width,
          N = c.height,
          K = c.x,
          O = c.y,
          V = b.zoom,
          L = e.highRes,
          T = b.contexts.layer0,
          Q = T.width,
          U = T.height;
        x !== T.width && (T.width = x);
        s !== T.height && (T.height = s);
        b.pixelRatio = F;
        b.zoom = 1;
        c.width = x;
        c.height = s;
        c.x = -z - b.x * F;
        c.y = -y - b.y * F;
        e.clipped = !1;
        e.selected = E && b.selection.items;
        e.highRes = h;
        b.scene.deselectAll();
        e.now(function() {
          e.clipped = !1;
          e.selected = !1;
          e.highRes = L;
          c.width = J;
          c.height = N;
          c.x = K;
          c.y = O;
          b.zoom = V;
          b.pixelRatio = A;
          var a = l(z, y, x, s, F, G);
          Q !== T.width && (T.width = Q);
          U !== T.height && (T.height = U);
          b.render("save.canvas");
          B(a)
        })
      } else B(l(z, y, x, s, F, G))
    };
    var l = function(a, c, d, e, p, k) {
        var l = f.doc,
          x = g.Canvas(d, e),
          s = x.ctx;
        k && "none" !== k && "transparent" !== k && (s.save(), s.scale(
            p, p), s.fillStyle =
          k, s.translate(-Math.abs(a % d), -Math.abs(c % e)), s.fillRect(
            0, 0, 2 * d, 2 * e), s.restore());
        a = l.contexts;
        for (var z in a) b[z] || s.drawImage(a[z], 0, 0, d, e);
        return x
      },
      b = {
        cache: !0,
        active: !0,
        draw: !0
      };
    e && e.json ? (d.json = e.json.save, d.assets = e.json.assets) :
      d.json = d.assets = function() {
        console.warn("IO.JSON support not included.")
      };
    d.toServer = f.server && f.server.save ? f.server.save : function() {
      console.warn("IO.Server support not included.")
    };
    d.toFS = f.fs.saveProject ? f.fs.saveProject : function() {
      console.warn("IO.FileSystem support not included.")
    };
    d.svg = e && e.svg ? e.svg.save : function() {
      console.warn("IO.SVG support not included.")
    };
    d.pdf = e && e.pdf ? e.pdf.save : function() {
      console.warn("IO.PDF support not included.")
    };
    d.zip = function(a, b) {
      a = a || g.errorHandler("onsuccess");
      d.folder(function(c) {
        e.zip.encode(c, function(b) {
          a(b)
        }, b)
      })
    };
    d.folder = function(a) {
      a = a || g.errorHandler("onsuccess");
      d.json({
        assets: "get",
        callback: function(b, d) {
          var e = [],
            f;
          for (f in d) {
            var k = c[d[f].type];
            e.push({
              filename: f.substr(1) + "." + k,
              blob: d[f]
            })
          }
          e.push({
            filename: "sketch.json",
            blob: new Blob([b], {
              type: "application/json"
            })
          });
          a(e)
        }
      })
    };
    d.sync = function(a) {
      a = a || {};
      var b = a.onprogress,
        c = a.onsuccess || g.errorHandler("onsuccess");
      a = a.sync || {};
      if (!g.count(a)) return c();
      var e = 0,
        p;
      for (p in a) a[p] && (!0 === a[p] && (a[p] = {}), e++);
      var k = e,
        l = function(a) {
          b && b((k - (e - 1)) / k * 100);
          --e || c && c(s)
        },
        x, s = {};
      for (p in a)
        if (x = a[p]) switch (p) {
          case "metadata":
            (function(a) {
              for (var b in a) s[b] = a[b]
            })(x);
            l("metadata");
            break;
          case "folder":
            d.folder(function(a) {
              s.folder = a;
              l("folder")
            }, !0);
            break;
          case "zip":
            d.zip(function(a) {
              s.sketch =
                a;
              l("zip")
            });
            break;
          case "svg":
            d.svg(function(a, b) {
              s.svg = b;
              l("svg")
            });
            break;
          case "json":
            d.json({
              toServer: !0,
              toBlob: x.toBlob,
              assets: x.assets,
              callback: function(a) {
                s.json = a;
                l("json")
              }
            });
            break;
          case "thumb":
            x.background = f.doc.backgroundRaw, x.suffix = x.suffix ||
              "thumb";
          case "image":
            var z = x.format || "png";
            x.idx = x.suffix ? x.suffix + "." + z : z;
            (function(a) {
              a.toBlob ? d.toBlob(a, function(b) {
                s[a.idx] = b;
                l("image")
              }) : d.toDataURL(a, function(b) {
                s[a.idx] = b;
                l("image")
              })
            })(x);
            break;
          default:
            l()
        }
    };
    d.confirm = function(a) {
      a = a || {};
      var b = a.onrequestsave,
        c = a.oncontinue,
        d = a.oncancel;
      a = function() {
        f.ui.confirm({
          message: "change-doc-confirm",
          callback: function(a) {
            !0 === a ? b && b() : -1 === a ? c && c() : d && d()
          },
          labels: {
            ok: "save",
            cancel: "cancel",
            disregard: "dontSave"
          }
        })
      };
      f.doc.needsSync() ? a() : c && c()
    };
    d.chooseEntry = function(a, b, c) {
      return f.client.nodewebkit ? (b = f.dom.create(
        '<input id="export_file" type="file" nwsaveas />'), b.addEventListener(
        "change",
        function(b) {
          console.log(this.value);
          require("fs").writeFile(this.value, a, function(a) {
            a && alert("error" +
              a)
          })
        }, !1), b.click(), !0) : g.exists(
        "chrome.fileSystem.chooseEntry") ? (chrome.fileSystem.chooseEntry({
        type: "saveFile",
        suggestedName: "blah.image"
      }, function(a) {
        a.createWriter(function(a) {
          a.onwriteend = function(b) {
            a.onwriteend = null;
            a.truncate(content.size)
          };
          a.onerror = function(a) {
            console.log("Write failed: " + a.toString())
          };
          a.write(blob)
        }, errorHandler)
      }), !0) : !1
    };
    d.fromQuery = function(b, c, d) {
      !a.sync.enabled || f.client.nodewebkit || f.client.incognito ?
        f.download.image() : f.on.requestsave ? f.on.requestsave({
          onsuccess: b,
          onerror: c,
          onprogress: d
        }) : f.fs.supported ? f.fs.saveProject({
          onsuccess: b,
          onerror: c,
          onprogress: d
        }) : f.server.save({
          onsave: b,
          onerror: c,
          onprogress: d
        })
    };
    var c = {
        "image/png": "png",
        "image/gif": "gif",
        "image/jpeg": "jpeg",
        "image/svg+xml": "svg"
      },
      p = function(a) {
        return a.mime ? a.mime : a.format ? "image/" + a.format :
          "image/png"
      },
      w = function(a) {
        var b = a[0] || {};
        return "function" === typeof b ? {
          params: {},
          onsuccess: b,
          onerror: a[1]
        } : {
          params: b,
          onsuccess: a[1] || b.onsuccess || b.callback || g.errorHandler(
            "onsuccess"),
          onerror: a[2] || b.onerror ||
            g.errorHandler("onerror")
        }
      }
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.Save)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.JSON = function(a) {
    var e = this,
      q = a.convert,
      l = a.feature,
      b = a.lang,
      c = a.loc,
      p = a.util,
      w = p.arrayToObject(["[object Blob]", "[object File]"]),
      m = function(b, e, g) {
        if (void 0 === b) return console.warn("missing params");
        "object" !== typeof b && (b = {
          json: b
        });
        e = e || b.onload || f;
        g = g || b.onerror || d;
        var k = b.json || b.blob || b.hash && b || b.src || b;
        if (w[String(k)]) return q.blobToText(k, function(a) {
          m(a, e, g)
        });
        if ("string" === typeof k) {
          if (k.startsWith("<")) {
            a.loader && a.loader.stop("thread");
            return
          }
          if (c.isValidXhrUrl(k)) return p.request({
            url: k,
            onload: function(a) {
              b.json = a.target.responseText;
              m(b, e, g)
            }
          });
          try {
            var l = JSON.parse(k)
          } catch (x) {
            return g(x, k)
          }
        }
        return l ? e(l, k) : g()
      },
      u = function(a, b, c) {
        if (c || b) a = JSON.stringify(a);
        c && (a = new Blob([a], {
          type: "application/json"
        }));
        return a
      };
    this.open = function(c, d, f) {
      var k = a.doc,
        g = c.mergeIntoScene || !1;
      d = c.onload || d;
      f = c.onerror || f;
      var p = function(c, p) {
        if (g) return e.merge(c, d, f);
        var m = b.translate("opening-format", ".JSON") + "...",
          q = function() {
            a.loader && a.loader.stop("thread");
            a.assets && a.assets.addFromActions(k.scene.children);
            a.emit("open");
            d && d()
          },
          t = function(b) {
            a.loader && a.loader.create("thread", m, 99 * b >> 0)
          },
          x = function() {
            k.setSize(u.width, u.height, u.units, u.dpi);
            k.scrollTo(u.scrollLeft, u.scrollTop);
            k.orient.reset();
            k.scene.reindex();
            k.render.preload({
              chunkBatch: !0,
              onprogress: t,
              onload: q
            })
          };
        a.loader && a.loader.create("thread", m);
        "sketch" === c.title && (c.title = k.title = l.doc.title);
        "..." === c.description && (c.description = k.description = l
          .doc.description);
        c.actions && k.scene.setData(c.actions, !0);
        c = e.upgrade(c, p);
        k.history && l.history.vector &&
          c.history && c.history.vector && (k.history.vector = c.history
            .vector);
        var u = c.metadata || {};
        k.mixinAttributes(u, k);
        u.background ? k.setBackground(u.background, x, x) : x()
      };
      m(c, function(b, c) {
        b.assets ? a.assets.addList(b.assets, function() {
          p(b, c)
        }) : p(b, c)
      }, f)
    };
    this.merge = function(b, c, d) {
      var e = a.doc;
      if (b) {
        b = b.actions ? b.actions : b;
        for (d = 0; d < b.length; d++) {
          var f = b[d];
          void 0 === e.scene.getById(f.id) && e.scene.push(f)
        }
        e.scene.reindex();
        e.render.preload({
          chunkBatch: !0,
          onload: function() {
            a.assets && a.assets.addFromActions(e.scene.children);
            c && c()
          }
        })
      } else d && d()
    };
    this.save = function(b) {
      var c = a.doc;
      "function" === typeof b && (b = {
        onsave: b
      });
      "object" !== typeof b && (b = {});
      var d = b.toServer || !1,
        k = b.toBlob || !1,
        g = b.assets || null,
        p = b.quality || 1,
        m = !1 !== b.stringify,
        q = b.onsave || b.callback || f,
        w = c.scene.children,
        B = {};
      if (b = c.history) d ? (d = l.sync.json) && d.history && (B.history = {},
        B.history.vector = b.vector) : l.history.vector && (B.history = {},
        B.history.vector = b.vector);
      B.metadata = c.mixinAttributes(c, {});
      B.version = a.__version;
      B.title = c.title;
      B.description = c.description;
      "sketch" === B.title && (B.title = c.title = l.doc.title);
      "..." === B.description && (B.description = c.description = l.doc
        .description);
      if (g) {
        var A = "encode" === g;
        e.assets({
          quality: p,
          toDataURL: A,
          onsuccess: function(a) {
            B.actions = c.scene.compress(w);
            c.scene.roundData(B.actions);
            A && (B.assets = a);
            var b = u(B, m, k);
            q(b, a)
          }
        })
      } else B.actions = c.scene.compress(w), c.scene.roundData(B.actions),
        g = u(B, m, k), q(g)
    };
    this.assets = function(b) {
      b = b || {};
      var c = a.doc,
        c = b.layers || c.scene.children,
        d = b.onsuccess || f,
        e = b.toBlobURL || !1,
        g = b.toDataURL ||
        !1,
        p = b.mime || "image/png",
        m = b.quality || 1;
      1 !== m && (p = "image/jpeg");
      var q = function() {
        !--C && F >= A - 1 && d(w)
      };
      b = function(b) {
        ++C;
        var c = a.assets.getId(b.src);
        if (w[c] || !u) q();
        else {
          if (c) {
            b.src = c;
            var d = a.assets.data[c];
            b = b.type;
            if ("clipart" === b) {
              if ("function" !== typeof d.stringify) return l.debug &&
                console.warn("cannot stringify svg", d), q();
              if (g) return w[c] = d.srcXML && !d.__colormap ? d.srcXML :
                d.stringify(), q()
            } else if (a.detect.useStampResource[b] && "image/jpeg" ===
              p && (b = d.getContext("2d"), b.save(), b.globalCompositeOperation =
                "destination-atop", b.fillStyle = "#fff", b.fillRect(0, 0,
                  d.width, d.height), b.restore()), g) return w[c] = a.assets
              .getDataURL(c, p, m), q();
            return e ? a.assets.getBlobURL(c, function(a) {
              w[c] = a;
              q()
            }, p, m) : a.assets.getBlob(c, function(a) {
              w[c] = a;
              q()
            }, p, m)
          }
          return q()
        }
      };
      var u = l.sync.localRefs,
        w = {},
        A = c.length;
      if (0 === A || a.fromServer) return d(w);
      for (var C = 0, F = 0; F < A; F++) {
        var E = c[F];
        E.src ? b(E) : q(++C)
      }
    };
    this.upgrade = function(b, c) {
      b.version = b.version || "2.0a";
      b.version = b.version.replace("dev", "");
      var d = new p.version(b.version ||
          "2.0"),
        e = {
          "2.0a": d.isLessThan("2.0a"),
          "3.3": d.isLessThan("3.3"),
          "3.4": d.isLessThan("3.4"),
          "3.4.6": d.isLessThan("3.4.6"),
          "3.4.6.1": d.isLessThan("3.4.6.1"),
          "3.5.9.2": d.isLessThan("3.5.9.2"),
          "3.6.9": d.isLessThan("3.6.9")
        };
      console.log(b.version);
      for (var f = b.actions || [], m = 0, s = f.length; m < s; m++) {
        var q = f[m];
        if (e["3.6.9"]) {
          if (e["3.5.9.2"]) {
            if (e["3.4.6"]) {
              if (e["3.3"]) {
                if (e["2.0a"]) {
                  var u = q;
                  u.color_mode && (u.fill.mode = u.color_mode);
                  u.color_noise && (u.fill.noise = u.color_noise);
                  u.flow && (u.spacing = u.flow)
                }
                u = q;
                "string" ===
                typeof u.src && (u.src = u.src.replace("/brush/",
                  "/stamp/"), u.src = u.src.replace("/animal/",
                  "/animals/"));
                "polygon" === u.type && (u.type = "regularPolygon");
                "radialBurst" === u.type && (u.spread = u.slope, delete u.slope);
                "0,00000000" === u.fill.gradient && (u.fill.gradient =
                  "none")
              }
              u = q;
              u.content && (u.content = u.content.split("\uf7c2\uf7a0").join(
                " "));
              g.detect.brush[u.type] && u.bbox.padding && (u.bbox.x -= 2 *
                u.bbox.padding, u.bbox.y -= 2 * u.bbox.padding);
              "paint" === u.composite && (u.composite = "source-over");
              "light" === u.composite &&
                (u.composite = "lighter");
              isFinite(u.saturation) && (u.type = "image");
              "image" === u.type && (delete u.hue, delete u.saturation,
                delete u.temperature, delete u.tint, delete u.exposure,
                delete u.brightness, delete u.contrast, delete u.filters)
            }
            u = q;
            "floodfill" === u.type && (u.usePixelData = !0);
            u.roundness && (u.roundness /= 200);
            u.filters && (u.filter = u.filters, delete u.filters)
          }
          "string" !== typeof q.toolkitId && (q.toolkitId = g.doc.toolkit
            .getToolkitId(q.type));
          q.fill && (q.fill.enabled = !0, q.fill.angle = 225);
          q.stroke && (q.stroke.angle =
            225)
        }
      }
      f = b.metadata = b.metadata || {};
      e["3.6.9"] && (e["3.4.6.1"] && (e["3.4.6"] && (e["3.4"] && (e =
              b.metadata, b.title && (e.title = b.title), b.description &&
              (e.description = b.description), isFinite(b.width) && (e.width =
                b.width), isFinite(b.height) && (e.height = b.height)), e =
            b.metadata, "string" !== typeof e.units && (e.units = !1 ===
              e.autoResize || !1 === e.infiniteCanvas ? "px" : "%")), e =
          b.metadata, isFinite(e.x + e.y) && (e.x = -e.x, e.y = -e.y)),
        e = b.metadata, b.history && b.history.vector && (b.history.vector = {
          max: 4294967295,
          current: 0,
          data: []
        }), "bluePrint" ===
        e.background && (e.background = "blueprint"), "%" === e.units &&
        (e.width *= 100, e.height *= 100));
      f.uuid = f.uuid || p.uuid();
      f.background = f.background || "transparent";
      f.units = f.units || "%";
      isFinite(f.width + f.height) || (f.units = "%", f.width = 100,
        f.height = 100);
      isFinite(f.x + f.y) || (f.x = 0, f.y = 0);
      f.pages && f.pages.length || (f.pages = {
        length: 1,
        data: [{
          width: f.width,
          height: f.height
        }]
      });
      l.debug && d.isLessThan(a.__version.replace("dev", "")) &&
        console.warn("upgraded from:", d);
      return b
    }
  };
  var f = function() {
      console.log("success", arguments)
    },
    d = function() {
      console.warn("error", arguments)
    };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.JSON)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.ABR = function(f) {
    var d = f.io,
      a = f.feature,
      e = f.util;
    d.blobToABR = function(d, b) {
      var c, f, w, m, u = function(d) {
        var h = function() {
            if (!(y + 1 > A.byteLength)) return A.getUint8(y++ - 1, !1)
          },
          l = function() {
            if (!(y + 2 > A.byteLength)) return A.getUint16((y += 2) -
              2, !1)
          },
          t = function() {
            if (!(y + 4 > A.byteLength)) return A.getUint32((y += 4) -
              4, !1)
          },
          s = function(a) {
            var b = t();
            if (0 === b) return y = brush.next, a && E();
            a = 0;
            for (var c = ""; a < b; a++) c += String.fromCharCode(A.getUint16(
              y, !1)), y += 2;
            return c
          },
          u = function(a) {
            for (var b =
                "", c = A.byteLength, d = 0; b !== a && y < c;) {
              ++d;
              var e = String.fromCharCode(A.getUint8(y, !1));
              y++;
              if (a[b.length] === e) {
                if (b += e, b === a) return d
              } else b = ""
            }
          },
          y = 0,
          B = 0,
          A = new DataView(d);
        c = [];
        f = l();
        m = w = 0;
        var C = function() {
            if (F !== m && !(y > A.byteLength - 1)) {
              var d = {};
              d.idx = F;
              c.push(d);
              D && (d.type = l());
              d.byteSize = t();
              if (P)
                for (; 0 !== d.byteSize % 4;) d.byteSize++;
              d.next = y + d.byteSize;
              if (D) {
                if (2 !== d.type) return y = d.next, E();
                y += 4;
                d.spacing = l();
                2 === f && (d.name = g(s(!0)));
                d.antialiasing = h();
                y += 8
              } else y += 1 === w ? 47 : 301;
              var r = t(),
                C = t(),
                J = t(),
                L = t(),
                T = l(),
                Q = h();
              d.width = L - C;
              d.height = J - r;
              d.size = d.width * (T >> 3) * d.height;
              r = e.Canvas(d.width, d.height);
              C = r.ctx;
              J = C.getImageData(0, 0, r.width, r.height);
              L = J.data;
              if (0 === Q)
                if (8 === T)
                  for (var Q = y, U = 0, T = y + d.size; Q < T; Q++, U +=
                    4) L[U] = 0, L[U + 1] = 0, L[U + 2] = 0, L[U + 3] = A.getUint8(
                    Q);
                else
                  for (Q = y, U = 0, T = y + d.size; Q < T; Q += 4, U += 4)
                    L[U] = A.getUint8(Q), L[U + 1] = A.getUint8(Q + 1), L[U +
                      2] = A.getUint8(Q + 2), L[U + 3] = A.getUint8(Q + 3);
              else {
                for (var U = 0, da = [], Q = 0; Q < d.height; Q++) da[Q] =
                  A.getUint16(y, !1), y += 2;
                T = 8 === T ? 3 : 0;
                for (Q = 0; Q < d.height; Q++)
                  for (var aa =
                      0; aa < da[Q];) {
                    var R = A.getUint8(y);
                    y++;
                    aa++;
                    128 <= R && (R -= 256);
                    if (0 > R) {
                      if (-128 != R) {
                        var R = -R + 1,
                          ea = A.getUint8(y);
                        y++;
                        aa++;
                        for (var Z = 0; Z < R; Z++, U += T + 1) L[U + 3] = ea
                      }
                    } else
                      for (Z = 0; Z < R + 1; Z++, U += T + 1) L[U + T] = A.getUint8(
                        y), y++, aa++
                  }
              }
              P && (y = G + B, B += u("Nm  TEXT"), d.name = g(s()), B +=
                u("Nm  TEXT"), B += u("Nm  TEXT"));
              C.putImageData(J, 0, 0);
              a.debugCache && (document.body.appendChild(r), r.style.background =
                "#ffffaa");
              b(r, d, (F + 1) / m * 100, E);
              y = d.next
            }
          },
          F = 0,
          E = function() {
            setTimeout(function() {
              C(F++)
            }, 1)
          },
          D = 6 > f,
          P = 6 <= f;
        if (D) m = l(), C();
        else if (P) {
          w =
            l();
          u("8BIMsamp");
          var G = t() + y;
          d = y;
          for (m = 0; y < G;) {
            for (var J = t(); 0 !== J % 4;) J++;
            y += J;
            m++
          }
          y = d;
          C()
        }
      };
      if ("undefined" !== typeof FileReader) {
        var t = d.slice(0, d.size),
          h = new FileReader;
        h.onload = function(a) {
          u(h.result)
        };
        h.readAsArrayBuffer(t)
      } else u(d)
    };
    var g = function(a) {
      a = a.replace(/\W/g, "").trim();
      return unescape(JSON.parse('"' + a + '"'))
    };
    return d.blobToABR
  };
  "undefined" !== typeof module && module.exports && (DataView =
    require("buffer-dataview"), module.exports = g.module.ABR)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.GBR = function(f) {
    var d = f.feature,
      a = f.io,
      e = f.util;
    a.blobToGBR = function(a, f) {
      var b = {
          0: "headerSize",
          4: "version",
          8: "width",
          12: "height",
          16: "colorDepth",
          20: "namespace",
          24: "spacing"
        },
        c = {},
        g = function(a) {
          a = new DataView(a);
          for (var g = 0; 28 > g; g += 4) c[b[g]] = a.getUint32(g, !1);
          c.name = "";
          for (var g = 28, h = c.headerSize - 1; g < h; g++) c.name +=
            String.fromCharCode(a.getUint8(g));
          var p = e.Canvas(c.width, c.height),
            k = p.ctx,
            m = k.getImageData(0, 0, p.width, p.height),
            q = m.data,
            s = a.byteLength;
          if (1 ===
            c.colorDepth)
            for (g = h, h = 0; g < s; g++, h += 4) {
              var w = a.getUint8(g);
              q[h + 0] = 0;
              q[h + 1] = 0;
              q[h + 2] = 0;
              q[h + 3] = w
            } else
              for (s -= 4, g = h; g < s; g += 4) {
                var h = a.getUint8(g),
                  w = a.getUint8(g + 1),
                  y = a.getUint8(g + 2),
                  B = a.getUint8(g + 3);
                q[4 * g + 0] = 255 - h;
                q[4 * g + 1] = 255 - w;
                q[4 * g + 2] = 255 - y;
                q[4 * g + 3] = 255 - B
              }
          k.putImageData(m, 0, 0);
          d.debugCache && (p.style.background = "#ffffaa", document.body
            .appendChild(p));
          f && f(p, c, 100)
        };
      if ("undefined" !== typeof FileReader) {
        var w = a.slice(0, a.size),
          m = new FileReader;
        m.onload = function(a) {
          g(m.result)
        };
        m.readAsArrayBuffer(w)
      } else g(a)
    };
    return a.blobToGBR
  };
  "undefined" !== typeof module && module.exports && (DataView =
    require("buffer-dataview"), module.exports = g.module.GBR)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.util = g.util || {};
  g.util.Uploader = function(d) {
    var a = this,
      e = g.dom,
      q = g.util;
    d = d || {};
    this.debug = !1;
    this.mode = d.mode || "read";
    this.action = d.action || "./filesystem.php?upload=true";
    this.confirm = d.confirm || "text";
    this.onUpload = d.onupload;
    this.onProgress = d.onprogress;
    this.onLoad = d.onload;
    this.onError = d.onerror;
    this.onAbort = d.onabort;
    this.onChangeDefault = this.onChange = d.onchange || f("onchange");
    this.directory = d.directory || !1;
    this.maxFiles = d.maxFiles || 1;
    this.maxFileSize = d.maxFileSize || 104857600;
    "object" === typeof d.fakeInput ? (this.fakeInput = d.fakeInput,
        this.fakeInputParent = d.fakeInputParent || null) : "object" ===
      typeof d.fileInput && (this.fileInput = d.fileInput);
    this.dropAreaContainer = d.dropArea;
    this.dropAreaMessage = d.dropAreaMessage || "Drop File(s) Here";
    this.dropAreaStyle = d.dropAreaStyle || "";
    this.files = {};
    this.filesByName = {};
    this.filesByPath = {};
    this.formats = {};
    var l = (d.formats || "jpg,jpeg,gif,png").split(",");
    for (d = 0; d < l.length; d++) this.formats[l[d].trim().toLowerCase()] = !
      0;
    this.addFileInput = function(c) {
      c =
        c || {};
      c.nodeName && (c = {
        target: c
      });
      var d = c.target,
        f = c.wrapper,
        h = c.onchange || a.onChange;
      if (c = d && d.parentNode) {
        if ("sk-fileWrapper" === c.className) return;
        a.fileInput = null
      }
      if (!d || !d.querySelector(".sk-fileInput")) {
        var p = a.fakeInput = d;
        if (a.fileInput) a.initFileInput(a.fileInput);
        else if (p || f) {
          var m = a.fileInput = document.createElement("input");
          m.style.cssText =
            "position: absolute; top: 0; z-index: 99999; font-size: 1000px; text-align: right; cursor: pointer; right: 0; filter: alpha(opacity: 0); opacity: 0.01;";
          m.style.width = "100%";
          m.style.height = "100%";
          m.className = "sk-fileInput";
          var q = function(b, c) {
            a.onChange = a.onChangeDefault || a.onChange;
            eventjs.remove(document.body, "focus", q)
          };
          eventjs.add(m, "mousedown", function(b) {
            a.onChange = h
          });
          eventjs.add(m, "click", function(a, b) {
            eventjs.add(document.body, "focus", q)
          });
          l.length && g.client && g.client.chooseEntry ? eventjs.add(m,
            "click",
            function(b) {
              eventjs.cancel(b);
              g.open.chooseEntry(function(b) {
                a.handleFiles([b])
              })
            }) : (m.setAttribute("type", "file"), m.setAttribute(
            "capture",
            "camera"));
          1 < a.maxFiles ? (m.setAttribute("name", "files[]"), m.setAttribute(
            "multiple", "multiple")) : m.setAttribute("name", "file");
          a.directory && (m.setAttribute("directory", ""), m.setAttribute(
            "mozdirectory", ""), m.setAttribute("webkitdirectory", ""));
          if (f) f.appendChild(m);
          else {
            c = a.fakeInputParent || p.parentNode;
            f = document.createElement("span");
            f.className = "sk-fileWrapper";
            f.style.cssText =
              "position: relative; overflow: hidden; z-index: 0;";
            p.style.cssText && (f.style.cssText += p.style.cssText);
            b[p.nodeName] &&
              (f.style.display = "inline-block");
            var t = !0,
              d = function() {
                t && (t = !1, a.fakeInputParent ? a.fakeInputParent.appendChild(
                    f) : p.parentNode && p.parentNode.replaceChild(f, p), f
                  .appendChild(p), f.appendChild(m));
                var c = e.measure(p),
                  d = c.width,
                  c = c.height;
                !b[p.nodeName] && d && c && (f.style.width = d + "px", f.style
                  .height = c + "px")
              };
            c = e.measure(p);
            var u = c.height;
            c.width || u ? d() : setTimeout(d, 250)
          }
          eventjs.add(m, "mousedown,mousemove,mouseup", eventjs.stop);
          a.initFileInput(m)
        }
      }
    };
    var b = {
      A: !0,
      SPAN: !0
    };
    this.initFileInput = function(b) {
      b &&
        (b.onchange = function(c) {
          if (b.files && b.files.length) a.handleFiles(c.target.files,
            function() {
              b.value = ""
            }, c);
          else {
            var d = b.value,
              e = d.replace(/\\/g, "/").replace(/.*\//, "");
            a.handleFiles([{
              src: d,
              name: e
            }], null, c)
          }
        })
    };
    var c = document.createElement("form");
    c.id = "sk-uploader";
    this.addDropArea = function(b) {
      b = b || {};
      b.nodeName && (b = {
        target: b
      });
      var d = d || a.dropAreaContainer;
      b = !b.target;
      c.innerHTML = a.dropAreaMessage;
      a.dropAreaStyle && (c.style.cssText += a.dropAreaStyle);
      c.onclick = function() {
        e()
      };
      c.ondragenter = function(a) {
        eventjs.cancel(a);
        return !1
      };
      c.ondragover = function(a) {
        eventjs.cancel(a);
        return !1
      };
      c.ondrop = function(b) {
        eventjs.cancel(b);
        e();
        var c = b.dataTransfer;
        c && (c.items ? new h(c.items, function(c) {
          c.length && a.handleFiles(c, null, b)
        }) : c.files && (c = c.files, c.length && a.handleFiles(c,
          null, b)))
      };
      c.ondragleave = function(a) {
        var b = eventjs.getCoord(a);
        if (0 !== b.x || 0 !== b.y)
          for (b = document.elementFromPoint(b.x, b.y); b !== document &&
            b;) {
            if ("sk-uploader" === b.id) return;
            b = b.parentNode
          }
        eventjs.cancel(a);
        setTimeout(e, 100)
      };
      var e = function() {
        c.className =
          "";
        e.timeout = setTimeout(function() {
          c.style.display = "none"
        }, 250)
      };
      d === window && (d = document.body);
      b && d.appendChild(c);
      d.ondragenter = function(a) {
        (a = a.dataTransfer) && a.types && t(a.types, "Files") && (
          clearTimeout(e.timeout), c.style.display = "block",
          setTimeout(function() {
            c.className = "visible";
            c.style.display = "table"
          }, 10))
      };
      d === document.body && eventjs.add(window, "resize", function(
        a) {
        window.innerWidth && window.innerHeight && (c.style.width =
          window.innerWidth + "px", c.style.height = window.innerHeight +
          "px")
      })
    };
    this.handleFiles =
      function(b, c, d) {
        if (a.onProgress) a.onProgress({
          transferPercent: 0
        }, d);
        var e = 0,
          f = function(b, c) {
            c.src && (c = [c]);
            for (var d in c) {
              var e = a.files[d],
                f = c[d];
              e.src = f.src;
              e.size = f.size;
              e.type = f.type;
              e.name = f.name
            }
            l()
          },
          h = {
            jpg: !0,
            jpeg: !0,
            gif: !0,
            png: !0
          },
          g = function(b) {
            var c = b.hash;
            if (b.type && !h[b.type.substr(6).toLowerCase()]) {
              var d = new FileReader;
              d.onload = function(b) {
                a.files[c].src = b.target.result;
                a.files[c].isRead = !0;
                return l()
              };
              d.readAsText(b)
            } else try {
              var e = URL.createObjectURL(b);
              a.files[c].src = e;
              a.files[c].isRead = !0;
              return l()
            } catch (k) {
              try {
                d = new FileReader, d.onload = function(b) {
                  a.files[c].src = b.target.result;
                  a.files[c].isRead = !0;
                  return l()
                }, d.readAsDataURL(b)
              } catch (g) {
                b.upload = new a.upload({
                  file: b,
                  onupload: f
                })
              }
            }
          },
          l = function(a) {
            a ? m() : setTimeout(m, 30)
          },
          m = function() {
            if (a.onProgress) a.onProgress({
              transferPercent: e / b.length * 100 >> 0
            }, d);
            var h = b[e];
            if (++e > a.maxFiles || !h) {
              if (a.onLoad) a.onLoad();
              if (1 === a.maxFiles) {
                if ("undefined" === typeof b[0]) {
                  if (a.onError) a.onError(a, "UPLOAD_ERR_FORMAT");
                  c && c();
                  return
                }
                var m = p(b[0]);
                a.file = a.files[m] || b[0];
                c && c();
                return a.onChange(a, d || {})
              }
              for (var q in a.files);
              c && c();
              return a.files[q] ? a.onChange(a, d || {}) : void 0
            }
            q = h.name || h.fileName || "";
            var t = h.path || q,
              m = h.type || "",
              u;
            m && (u = m.split("/").pop());
            a.formats[u] || (u = q.split(".").pop().toLowerCase());
            var m = p(h),
              w = a.files[m];
            if (w && (a.changedFiles[m] = w, a.changedFilesByName[q] = w,
                a.changedFilesByPath[t] = w, "upload" === a.mode && w.isUploaded ||
                "read" === a.mode && w.isRead)) return l(!0);
            if (!a.formats[u]) {
              if (a.onError) a.onError(a, "UPLOAD_ERR_FORMAT");
              return l(!0)
            }
            u = h.fileSize || h.size;
            if (0 === u) {
              if (a.onError) a.onError(a, "UPLOAD_ERR_NO_FILE");
              return l(!0)
            }
            if (u && u > a.maxFileSize) {
              if (a.onError) a.onError(a, "UPLOAD_ERR_FORM_SIZE");
              return l(!0)
            }
            h.hash = m;
            a.files[m] = h;
            a.filesByName[q] = h;
            a.filesByPath[t] = h;
            a.changedFiles[m] = h;
            a.changedFilesByName[q] = h;
            a.changedFilesByPath[t] = h;
            if ("upload" === a.mode) h.upload = new a.upload({
              file: h,
              onupload: f
            });
            else if ("read" === a.mode) g(h);
            else return l(!0)
          };
        a.changedFiles = {};
        a.changedFilesByName = {};
        a.changedFilesByPath = {};
        l()
      };
    var p = function(a) {
      var b = {};
      b.name = a.name || a.fileName;
      b.src = a.src;
      b.size = a.size || a.fileSize;
      b.type = a.type;
      a = JSON.stringify(b);
      for (var b = 5381, c = 0, d = a.length; c < d; c++) var e = a.substr(
          c, 1).charCodeAt(),
        b = (b << 5) + b + e;
      return b
    };
    this.UPLOAD_ERR = {
      UPLOAD_ERR_INI_SIZE: "The uploaded file exceeds the upload_max_filesize directive",
      UPLOAD_ERR_FORM_SIZE: "The uploaded file exceeds the MAX_FILE_SIZE directive",
      UPLOAD_ERR_PARTIAL: "The uploaded file was only partially uploaded",
      UPLOAD_ERR_NO_FILE: "No file was uploaded",
      UPLOAD_ERR_NO_TMP_DIR: "Missing a temporary folder",
      UPLOAD_ERR_CANT_WRITE: "Failed to write file to disk",
      UPLOAD_ERR_EXTENSION: "A PHP extension stopped the file upload",
      UPLOAD_ERR_FORMAT: "The uploaded file was an invalid format",
      UPLOAD_ERR_XHTTP: ""
    };
    this.upload = function(b) {
      this.onAbort = b.onabort;
      this.onUpload = b.onupload;
      this.onProgress = b.onprogress;
      this.onError = b.onerror;
      this.action = b.action || a.action;
      this.confirm = b.confirm || a.confirm;
      this.files = 0 === String(b.file).indexOf("[object") ? [b.file] :
        b.files;
      this.bytes = this.timeLapse = this.timeRemaining = this.transferPercent =
        this.transferTotal = this.transferSpeed = 0;
      window.FormData ? m(this, this.onUpload) : u(this, this.onUpload)
    };
    var w = function(a, b) {
        var c = Object.prototype.toString.call(a);
        "[object Object]" === c && a.src && (c = "");
        switch (c) {
          case "[object Array]":
            for (var c = 0, d = a.length; c < d; c++) b(a[c]);
            break;
          case "[object Object]":
            for (d in a) b(a[d], d);
            break;
          default:
            b(a)
        }
      },
      m = function(b) {
        if ("[object Blob]" === String(b.files)) var c = b.files;
        else c = new FormData, w(b.files,
          function(a, b) {
            if ("undefined" !== typeof a.data) c.append(b || a.name || a
              .fileName, a.data);
            else if (a.src && "data:" === a.src.substr(0, 5)) {
              var d = JSON.stringify(a);
              c.append(b || a.name || a.fileName, d)
            } else c.append(b || a.hash, a)
          });
        var d = new XMLHttpRequest;
        d.upload.onprogress = function(c) {
          if (c.lengthComputable) {
            var d = c.loaded;
            b.lengthComputable = !0;
            b.transferPercent = Math.round(100 * d / c.total);
            b.transferTotal = q.bytesToSize(d);
            var e = 2 * (d - b.bytes);
            0 !== e && (b.bytes = d, b.transferSpeed = q.bytesToSize(e),
              b.timeRemaining = q.getTimeFormat((c.total -
                b.bytes) / e), b.timeLapse = q.getTimeFormat(Date.now() -
                c.timeStamp));
            if (b.onProgress) b.onProgress(b, c);
            else if (a.onProgress) a.onProgress(b, c)
          } else b.lengthComputable = !1, b.transferSpeed = 0, b.transferTotal =
            0, b.transferPercent = 0, b.timeRemaining = 0
        };
        d.onload = function(c) {
          "[object Blob]" !== String(b.files) && w(b.files, function(a,
            b) {
            "undefined" === typeof a.date && (a.isUploaded = !0)
          });
          var d = c.target.responseText;
          if ("json" === b.confirm) try {
            d = JSON.parse(d)
          } catch (e) {
            console.log(c.target.responseText)
          }
          if (a.UPLOAD_ERR[d]) {
            if (a.onError) a.onError(a,
              d);
            if (b.onError) b.onError(a, d)
          } else {
            if (a.onLoad) a.onLoad(b, d);
            if (b.onUpload) b.onUpload(b, d)
          }
        };
        d.onerror = function(c) {
          if (a.onError) a.onError(a, "UPLOAD_ERR_XHTTP", c);
          if (b.onError) b.onError(a, "UPLOAD_ERR_XHTTP", c)
        };
        d.onabort = function(c) {
          if (a.onAbort) a.onAbort(a, "UPLOAD_ERR_XHTTP", c);
          if (b.onAbort) b.onAbort(a, "UPLOAD_ERR_XHTTP", c)
        };
        d.open("POST", b.action, !0);
        d.send(c)
      },
      u = function(b) {
        var c = document.createElement("form");
        document.body.appendChild(c);
        var d = document.createElement("iframe");
        d.setAttribute("id",
          "upload_iframe");
        d.setAttribute("name", "upload_iframe");
        d.setAttribute("width", "0");
        d.setAttribute("height", "0");
        d.setAttribute("border", "0");
        d.setAttribute("style", "width: 0; height: 0; border: none;");
        var e = function() {
          try {
            var e = d.contentDocument.body
          } catch (f) {
            try {
              e = d.contentWindow.document.body
            } catch (h) {
              e = d.document.body
            }
          }
          if (e.innerHTML) {
            w(b.files, function(a) {
              "undefined" === typeof a.date && (a.isUploaded = !0)
            });
            e = e.innerHTML;
            if ("json" === b.confirm) try {
              e = JSON.parse(e)
            } catch (g) {
              console.log && console.log(e)
            }
            if (a.UPLOAD_ERR[e]) {
              if (a.onError) a.onError(a,
                e);
              if (b.onError) b.onError(a, e)
            } else {
              if (a.onLoad) a.onLoad(a, e);
              if (b.onUpload) b.onUpload(a, e)
            }
          }
          setTimeout(function() {
            c.parentNode && c.parentNode.removeChild(c);
            a.fileInput.parent && a.fileInput.parent.appendChild(a.fileInput)
          }, 250)
        };
        d.addEventListener ? d.addEventListener("load", e, !0) : d.attachEvent &&
          d.attachEvent("onload", e);
        c.appendChild(d);
        window.frames.upload_iframe.name = "upload_iframe";
        w(b.files, function(b, d) {
          if ("undefined" !== typeof b.data) {
            var e = document.createElement("input");
            e.type = "hidden";
            e.value =
              b.data;
            e.name = d || b.name || b.fileName
          } else b.src && "data:image/" === b.src.substr(0, 11) ? (e =
              document.createElement("input"), e.type = "hidden", e.value =
              JSON.stringify(b), e.name = d || b.name || b.fileName) :
            "string" === typeof b ? (e = document.createElement("input"),
              e.type = "hidden", e.value = b, e.name = d) : (e = a.fileInput,
              e.parent = e.parentNode, e.name = d || b.hash);
          c.appendChild(e)
        });
        c.setAttribute("target", "upload_iframe");
        c.setAttribute("action", b.action);
        c.setAttribute("method", "post");
        c.setAttribute("enctype", "multipart/form-data");
        c.setAttribute("encoding", "multipart/form-data");
        c.submit()
      },
      t = function(a, b) {
        for (var c = a.length; c--;)
          if (a[c] === b) return !0;
        return !1
      },
      h = function(a, b, c) {
        c = isFinite(c) ? c : Infinity;
        var d = this;
        this.files = [];
        this.pending = 0;
        this.recurse = function(a, b, c) {
          this.pending++;
          if (!a) return d.runCallback();
          a.isFile ? a.file(function(a) {
            a.path = b + a.name;
            d.files.push(a);
            d.runCallback()
          }) : a.isDirectory && a.createReader().readEntries(function(
            e) {
            for (var f = 0; f < e.length; f++) d.recurse(e[f], b + a.name +
              "/", c + 1);
            d.runCallback()
          })
        };
        this.runCallback = function() {
          --this.pending || b(this.files)
        };
        for (c = 0; c < a.length; c++)
          if (a[c].webkitGetAsEntry) {
            var e = a[c].webkitGetAsEntry();
            this.recurse(e, "", 0)
          }
        return this
      };
    this.dropAreaContainer && this.addDropArea();
    (this.fakeInput || this.fileInput) && this.addFileInput();
    return this
  };
  var f = function(d) {
    return function() {
      console.warn(d, arguments)
    }
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.setup.add(function(f) {
    var d = f.feature,
      a = f.io,
      e = f.lang,
      g = f.util,
      l = ["jpg", "jpeg", "gif", "png", "svg"];
    a.zip && l.push("zip");
    a.json && a.zip && l.push("sketchpad");
    d.io.pdf && l.push("pdf");
    d.io.psd && l.push("psd");
    a.blobToABR && l.push("abr");
    a.blobToGBR && l.push("gbr");
    g.exists("Color.open.GGR") && l.push("ggr");
    g.exists("Color.open.GPL") && l.push("gpl");
    (f.uploader = new g.Uploader({
      confirm: "json",
      action: f.loc.POST,
      mode: "read",
      maxFiles: f.client.ios ? 1 : Infinity,
      formats: l.join(","),
      dropArea: document.body,
      dropAreaMessage: '\t\t<div class="sk-uploader-anim"></div>\t\t  <div class="sk-uploader-text">Drop files here<br>\t\t\t  <div><i>Accepted formats: </i><br>.' +
        l.join(" .") + "</div>\t\t  </div>\t\t</div>",
      onchange: function(a, c) {
        if (isFinite(c.pageX)) {
          for (var d = eventjs.elementsFromEvent(c), e = 0; e < d.length; e++) {
            var g = d[e];
            if (g.matches(".sk-dummy-canvas")) {
              f.setDocument(g.getAttribute("data-pid"));
              break
            }
          }
          d = f.doc;
          e = d.scene.pointInSceneFromEvent(c);
          a.addMedia({
            self: a,
            pt: {
              x: e.x - d.x,
              y: e.y - d.y
            }
          })
        } else a.addMedia({
          self: a
        })
      },
      onprogress: function(a) {
        f.loader && f.loader.create("thread", "Uploading...", a.transferPercent)
      },
      onerror: function(a, c, d) {
        f.loader && f.loader.stop("thread");
        f.ui.log(e.translate("upload-invalid"))
      }
    })).addMedia = function(a) {
      var c = f.doc;
      if (!c.addMedia) return console.warn("doc.addMedia undefined");
      var e = a.pt || {},
        l = a.self,
        m = a.openAsNew;
      c.config.reset("image");
      c.scene.deselectAll();
      var u = [],
        t = function() {
          e.x += d.io.translateX;
          e.y += d.io.translateY;
          d.vector.edit ? isFinite(c.selection.idx) && u.push(c.selection
              .idx) :
            c.scene.deselectAll();
          setTimeout(h.next, 50)
        };
      a = l.changedFilesByName;
      if (a["sketch.json"]) return f.open.folder({
        entries: a
      });
      var h = new g.Queue({
        flatten: !1,
        items: l.changedFiles,
        oncomplete: function() {
          1 === u.length ? f.ui.configureBuild && f.ui.configureBuild(
            c.scene.children[u[0]].type, !0) : (c.scene.deselectAll(),
            c.scene.selectByIdx(u, !1), c.render.clean(
              "setup.uploader"))
        },
        next: function(a) {
          h = this;
          var b = 0 === (a.type || "").indexOf("image/"),
            d = {
              openAsNew: m,
              blob: a,
              x: e.x,
              y: e.y,
              onload: t
            },
            g = f.vortex;
          g && b && e.x && e.y ? (g.create(a,
            e,
            function() {
              g.destroy(a.src);
              c.addMedia(d)
            }), g.update(a.src, a.name || "adding image")) : c.addMedia(
            d)
        }
      })
    }
  })
})(sketch);
(function(g) {
  var f = g.document,
    d = function() {
      var a = !1,
        d = [],
        q, l, b, c, p, w, m, u, t, h, r, k = {
          labels: {
            ok: "OK",
            cancel: "Cancel"
          },
          delay: 4E3,
          buttonReverse: !1,
          buttonFocus: "ok",
          transition: void 0,
          addListeners: function(a) {
            var d = "undefined" !== typeof c,
              e = "undefined" !== typeof l,
              h = "undefined" !== typeof b,
              g = r && r.length,
              m = [],
              t = function(b) {
                if (!q.verify || !1 !== q.verify(r)) {
                  eventjs.prevent(b);
                  x(b);
                  if (r && r.length)
                    for (b = 0; b < r.length; b++) {
                      var c = r[b];
                      c.id ? m[c.id] = c.value : m.push(c.value)
                    }
                  "function" === typeof a && (r && r.length ? a(!0, m) :
                    a(!0))
                }
              },
              v = function(b) {
                eventjs.prevent(b);
                x(b);
                "function" === typeof a && a(-1)
              },
              u = function(b) {
                eventjs.prevent(b);
                x(b);
                "function" === typeof a && a(!1)
              },
              x = function(a) {
                k.hide();
                k.unbind(f.body, "keyup", w);
                k.unbind(p, "focus", J);
                d && k.unbind(c, "click", t);
                e && k.unbind(l, "click", u);
                h && k.unbind(b, "click", v)
              },
              w = function(a) {
                var b = a.keyCode;
                32 !== b || g || t(a);
                27 === b && e && u(a)
              },
              J = function(a) {
                g ? r[0].focus() : !e || k.buttonReverse ? c.focus() : l.focus()
              };
            k.bind(p, "focus", J);
            d && k.bind(c, "click", t);
            e && k.bind(l, "click", u);
            h && k.bind(b,
              "click", v);
            k.bind(f.body, "keyup", w);
            k.transition.supported || k.setFocus()
          },
          bind: function(a, b, c) {
            "object" === typeof eventjs ? eventjs.add(a, b, c) :
              "function" === typeof a.addEventListener ? a.addEventListener(
                b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c)
          },
          handleErrors: function() {
            return "undefined" !== typeof g.onerror ? (g.onerror =
              function(a, b, c) {
                k.error("[" + a + " on line " + c + " of " + b + "]", 0)
              }, !0) : !1
          },
          appendButtons: function(a, b) {
            return k.buttonReverse ? b + a : a + b
          },
          build: function(a, b) {
            var c = b.type,
              d = b.message || "",
              e = b.className ||
              "",
              h = f.createElement("div");
            h.className = "alertify-dialog";
            if ("none" === k.buttonFocus) {
              var g = f.createElement("button");
              g.id = "alertify-noneFocus";
              g.className = "alertify-hidden";
              h.appendChild(g)
            }
            g = f.createElement("article");
            g.className = "alertify-inner";
            var l = f.createElement("p");
            l.className = "alertify-message";
            "object" === typeof d ? l.appendChild(d) : l.innerHTML = d;
            g.appendChild(l);
            if ("prompt" === c) {
              var d = b.fields,
                p = f.createElement("div");
              p.className = "alertify-text-wrapper";
              d.forEach(function(a) {
                if ("textarea" ===
                  a.type) {
                  var b = f.createElement("textarea");
                  b.innerHTML = a.value || ""
                } else b = f.createElement("input"), b.value = a.value ||
                  "", b.type = a.type;
                b.id = a.id;
                b.title = a.title;
                b.className = "alertify-text";
                var c = f.createElement("span");
                c.textContent = a.title;
                p.appendChild(c);
                p.appendChild(b)
              });
              l.appendChild(p)
            }
            d = f.createElement("nav");
            d.className = "alertify-buttons";
            g.appendChild(d);
            h.appendChild(g);
            g = f.createElement("button");
            g.id = "alertify-resetFocus";
            g.className = "alertify-resetFocus";
            g.innerHTML = "Reset Focus";
            h.appendChild(g);
            switch (c) {
              case "confirm":
              case "prompt":
                v(d, "cancel");
                v(d, "disregard");
                v(d, "ok");
                break;
              case "alert":
                v(d, "ok")
            }
            t.className = "alertify alertify-" + c + " " + e;
            u.className = "alertify-cover";
            a.style.maxHeight = "";
            a.innerHTML = "";
            a.appendChild(h);
            c = Math.min(d.offsetHeight + l.offsetHeight, .75 * window.innerHeight);
            a.style.maxHeight = c + "px";
            eventjs.add(a, "mousedown", eventjs.stop)
          }
        },
        v = function(a, b) {
          if (k.labels[b]) {
            var c = f.createElement("button");
            c.className = "alertify-button alertify-button-" + b;
            c.id = "alertify-" + b;
            c.innerHTML =
              k.labels[b];
            a.appendChild(c)
          }
        };
      k.close = function(a, b) {
        a = a || k.lastItem;
        var c = isFinite(b) ? b : k.delay;
        k.bind(a, "click", function() {
          e(a)
        });
        var d = function(a) {
            a.stopPropagation();
            k.unbind(this, k.transition.type, d);
            this.parentNode && this.parentNode.removeChild(this);
            h.hasChildNodes() || (h.className += " alertify-logs-hidden")
          },
          e = function(a) {
            "undefined" !== typeof a && a.parentNode === h && (k.transition
              .supported ? (k.bind(a, k.transition.type, d), a.className +=
                " alertify-log-hide") : (h.removeChild(a), h.hasChildNodes() ||
                (h.className +=
                  " alertify-logs-hidden")))
          };
        0 !== b && setTimeout(function() {
          e(a)
        }, c)
      };
      k.dialog = function(b, c, g, l, p) {
        var r;
        if ("[object Object]" === String(c)) {
          var q = c;
          c = q.message;
          g = q.callback;
          l = q.fields;
          p = q.className;
          r = q.verify;
          q.labels && (k.labels = q.labels)
        }
        m = f.activeElement;
        var t = function() {
          h && null !== h.scrollTop && u && null !== u.scrollTop || t()
        };
        if ("string" !== typeof b) throw Error("type must be a string");
        if ("undefined" !== typeof g && "function" !== typeof g) throw Error(
          "callback must be a function");
        "function" === typeof k.init &&
          (k.init(), t());
        d.push({
          type: b,
          message: c,
          callback: g,
          verify: r,
          fields: x(l),
          className: p
        });
        return a ? this : k.setup()
      };
      var x = function(a) {
        var b = [];
        "string" === typeof a && (a = [a]);
        if (Array.isArray(a))
          for (var c = {
              string: "text",
              number: "number",
              "boolean": "checkbox"
            }, d = 0; d < a.length; d++) {
            var e = a[d],
              f = typeof e;
            "object" === f ? b.push(e) : (f = c[f]) && b.push({
              type: f,
              placeholder: e
            })
          }
        0 === b.length && b.push({
          type: "text",
          placeholder: ""
        });
        return b
      };
      k.extend = function(a) {
        if ("string" !== typeof a) throw Error(
          "extend method must have exactly one paramter");
        return function(b, c) {
          k.log(b, a, c);
          return this
        }
      };
      k.hide = function() {
        if (m) {
          var b;
          d.splice(0, 1);
          0 < d.length ? k.setup(!0) : (a = !1, b = function(a) {
              a.stopPropagation();
              t.className += " alertify-isHidden";
              k.unbind(t, k.transition.type, b)
            }, k.transition.supported ? (k.bind(t, k.transition.type, b),
              t.className = "alertify alertify-hide alertify-hidden") : t
            .className =
            "alertify alertify-hide alertify-hidden alertify-isHidden",
            u.className = "alertify-cover alertify-cover-hidden", m !==
            f.body && m.focus())
        }
      };
      k.init = function() {
        f.createElement("nav");
        f.createElement("article");
        f.createElement("section");
        u = f.createElement("div");
        u.setAttribute("id", "alertify-cover");
        u.className = "alertify-cover alertify-cover-hidden";
        f.body.appendChild(u);
        t = f.createElement("section");
        t.setAttribute("id", "alertify");
        t.className = "alertify alertify-hidden alertify-isHidden";
        f.body.appendChild(t);
        h = f.createElement("section");
        h.setAttribute("id", "alertify-logs");
        h.className = "alertify-logs alertify-logs-hidden";
        f.body.appendChild(h);
        f.body.setAttribute("tabindex", "0");
        var a, b = !1,
          c = f.createElement("fakeelement"),
          d = {
            transition: "transitionend",
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "otransitionend"
          },
          e;
        for (e in d)
          if (void 0 !== c.style[e]) {
            a = d[e];
            b = !0;
            break
          }
        k.transition = {
          type: a,
          supported: b
        };
        delete k.init
      };
      k.log = function(a, b, c) {
        var d = function() {
          h && null !== h.scrollTop || d()
        };
        "function" === typeof k.init && (k.init(), d());
        h.className = "alertify-logs";
        k.notify(a, b, c);
        return {
          lastItem: k.lastItem,
          close: k.close,
          hide: k.hide
        }
      };
      k.notify = function(a,
        b, c) {
        var d = f.createElement("article");
        d.className = "alertify-log" + ("string" === typeof b && "" !==
          b ? " alertify-log-" + b : "");
        d.innerHTML = a;
        h.appendChild(d);
        setTimeout(function() {
          d.className += " alertify-log-show"
        }, 50);
        k.close(d, c);
        k.lastItem = d
      };
      k.set = function(a) {
        if ("object" !== typeof a && a instanceof Array) throw Error(
          "args must be an object");
        for (var b in a) a.hasOwnProperty(b) && (k[b] = a[b])
      };
      k.setFocus = function() {
        r && r.length ? (r[0].focus(), r[0].select()) : w.focus()
      };
      k.setup = function(h) {
        var g = d[0],
          m;
        a = !0;
        m = function(a) {
          a.stopPropagation();
          k.setFocus();
          k.unbind(t, k.transition.type, m)
        };
        k.transition.supported && !h && k.bind(t, k.transition.type, m);
        k.build(t, g);
        eventjs.add(u, "click", k.hide);
        eventjs.add(t.firstChild, "click", eventjs.stop);
        p = f.querySelector("#alertify-resetFocus");
        c = f.querySelector("#alertify-ok") || void 0;
        l = f.querySelector("#alertify-cancel") || void 0;
        b = f.querySelector("#alertify-disregard") || void 0;
        w = "cancel" === k.buttonFocus ? l : "none" === k.buttonFocus ?
          f.querySelector("#alertify-noneFocus") : c;
        r = f.querySelectorAll(".alertify-text-wrapper .alertify-text") ||
          void 0;
        q = g;
        if (r && r.length)
          for (var v = 0; v < g.fields.length; v++) r[v].placeholder = g
            .fields[v].placeholder || "";
        h && k.setFocus();
        k.addListeners(g.callback);
        return this
      };
      k.unbind = function(a, b, c) {
        "object" === typeof eventjs ? eventjs.remove(a, b, c) :
          "function" === typeof a.removeEventListener ? a.removeEventListener(
            b, c, !1) : a.detachEvent && a.detachEvent("on" + b, c)
      };
      return {
        close: function(a, b) {
          k.close(a, b || 1)
        },
        log_visible: function() {
          return !(!f.querySelector(".alertify-logs") || f.querySelector(
            ".alertify-logs.alertify-logs-hidden"))
        },
        hide: function(a, b) {
          k.hide()
        },
        alert: function(a, b, c) {
          return k.dialog("alert", a, b, "", c)
        },
        confirm: function(a, b, c) {
          return k.dialog("confirm", a, b, "", c)
        },
        extend: k.extend,
        init: k.init,
        log: function(a, b) {
          return k.log(a, "", b)
        },
        prompt: function(a, b, c, d) {
          return k.dialog("prompt", a, b, c, d)
        },
        success: function(a, b) {
          return k.log(a, "success", b)
        },
        error: function(a, b) {
          return k.log(a, "error", b)
        },
        dialog: k.dialog,
        set: k.set,
        labels: k.labels,
        debug: k.handleErrors
      }
    };
  "function" === typeof define && define.amd ? define([], function() {
      return new d
    }) :
    "undefined" === typeof g.alertify && (g.alertify = new d)
})(this);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.UIPalette = function(f, d) {
    var a = this,
      e = f.dom,
      g = f.feature,
      l = f.lang,
      b = f.ui,
      c = f.util;
    f.module.Listener(a);
    var p, w, m, u = "color";
    a.paintMethod = "fill";
    var t = function(a) {
      var b = a.data,
        c = a.paintMethod,
        d = {
          useRender: !0,
          useRecord: a.state || !0
        };
      d.configure = a.configure;
      d[c] = b;
      f.style.apply(d)
    };
    (function() {
      a.createTrigger = function(d, h, k, l, p, m) {
        var r = h.type,
          v = k.constructor.type,
          u = {
            stroke: "fill",
            fill: "stroke"
          }[v],
          w = c.Canvas(),
          G = function(a) {
            var b = h[v] && h[v].__cache,
              c = h[u] && h[u].__cache;
            t({
              data: {
                enabled: a
              },
              paintMethod: v,
              state: !0
            });
            J(a);
            b && c && !1 === b.vars.checked && !1 === c.vars.checked &&
              (c.vars.setValue(!0), c.input.classList.add("sk-checked"))
          },
          J = function(a) {
            a ? f.style.renderSwatch(w, k.type, k[k.type], 44, 28) : f.style
              .renderSwatch(w, "pattern", b.media.transparent, 44, 28)
          },
          N = function() {
            var c = function(a) {
              var c = "color" === a.type;
              l.style.display = "gradient" === a.type ? "block" :
                "none";
              c && b.colorPicker.update(a.color, !1)
            };
            a.removeListeners("setPane");
            a.on("setPane", c);
            var d = b.fullpath ? e.empty("#sk-" +
              b.fullpath.replace(":", "")) : e.empty("#sk-configure");
            b.addHeader(d, {
              title: p,
              left: {
                icon: "icon-left",
                onclick: function() {
                  b.fullpath && "configure:" !== b.fullpath ? b.setPane(
                    b.fullpath, !0) : b.configureBuild(null, !0)
                }
              }
            });
            G(!0);
            d = e.append(d, '<div class="sk-pane-content"></div>');
            a.append(d, h, k);
            "stroke" === v && (b.appendRange(d, {
              label: "lineWidth",
              param: "lineWidth",
              title: "lineWidth",
              value: k.lineWidth,
              min: .001,
              max: 50,
              format: "px",
              onchange: function(a, b) {
                t({
                  data: {
                    lineWidth: b.value
                  },
                  paintMethod: "stroke",
                  state: a.state,
                  configure: h
                })
              }
            }), g.style.lineJoin && f.detect.shape[r] && b.appendSelect(
              d, {
                label: "lineJoin",
                param: "lineJoin",
                title: "lineJoin",
                selected: k.lineJoin,
                options: ["round", "bevel", "miter"],
                onchange: function(a, b) {
                  t({
                    data: {
                      lineJoin: b
                    },
                    paintMethod: "stroke",
                    state: !0,
                    configure: h
                  })
                }
              }));
            var l = e.append(d, '<div class="sk-gradient-opts"></div>');
            g.style.colorMode && !f.detect.useColorCycle[r] && ("cycle" ===
              k.mode && (k.mode = "linear"), b.appendSelect(l, {
                label: "colorMode",
                param: "colorMode",
                title: "colorMode",
                selected: k.mode,
                options: ["linear",
                  "radial"
                ],
                onchange: function(a, b) {
                  t({
                    data: {
                      mode: b
                    },
                    paintMethod: v,
                    state: !0,
                    configure: h
                  });
                  N()
                }
              }), "linear" === k.mode && b.appendRange(l, {
                value: k.angle,
                min: 0,
                max: 360,
                format: "degree",
                label: "angle",
                param: "angle",
                title: "angle",
                onchange: function(a, b) {
                  t({
                    data: {
                      angle: b.value >> 0
                    },
                    paintMethod: v,
                    state: a.state,
                    configure: h
                  })
                }
              }));
            g.style.colorNoise && b.appendTag("Checkbox", l, {
              label: "colorNoise",
              param: "colorNoise",
              title: "colorNoise",
              checked: !!k.noise,
              onchange: function(a) {
                t({
                  data: {
                    noise: a
                  },
                  paintMethod: v,
                  state: !0,
                  configure: h
                })
              }
            });
            c(k);
            a.setPaintMethod(v);
            t = m || x
          };
        b.addClick(w, N);
        b.tooltip && b.tooltip.add(w, "choose-" + v);
        var K = e.create("div");
        K.className = "sk-style";
        K.appendChild(w);
        var O = {
          checked: !0
        };
        if (h.fill && h.stroke) {
          var O = new b.vars.Checkbox({
              label: "enable",
              param: "enable",
              title: function() {
                return O.checked ? "disable" : "enable"
              },
              checked: k.enabled,
              onchange: function(a) {
                G(a)
              }
            }),
            V = b.Checkbox(O);
          h[v].__cache = {};
          h[v].__cache.vars = O;
          h[v].__cache.input = V;
          K.appendChild(V)
        }
        J(O && O.checked);
        d ? l ? b.appendLabel(d, K, l) : d.appendChild(K) : N();
        t = m || x
      }
    })();
    a.append = function(b, c) {
      if (!c.useBackgroundOverlay)
        if (a.container) b.appendChild(a.container);
        else {
          e.append(b, '<div id="sk-palette"></div>');
          var d = c.fill,
            f = {};
          f.paintMethod = d.method;
          f.paintType = d.type;
          a.init(f)
        }
    };
    (function() {
      a.init = function(b) {
        b = b || {};
        var d = b.colorPicker,
          e = b.paintMethod || a.paintMethod,
          f = b.onready;
        u = b.paintType || u;
        a.paintMethod = e;
        h();
        g.palette.colorPicker && (c.exists("sk.color.picker") ? k(d) :
          console.warn("sk.color.picker is not loaded"));
        a.update(u, !0, !0, f);
        a.setIndicator()
      };
      var h = function() {
          var d = e.empty("#sk-palette"),
            h = e.create('<div class="sk-header"></div>'),
            k = g.style.gradient && "Gradients",
            r = g.style.pattern && "Patterns",
            s = g.style.color && "Colors";
          if (!1 !== g.palette.header) {
            var t = g.palette.header,
              v = e.create('<div class="sk-header-content"></div>');
            v.innerHTML = k && r || r && s || s && k ? t || "" : t || k ||
              s || r;
            h.appendChild(v);
            g.palette.closeButton && (k = e.create(
              '<span class="sk-close icon-close"></span>'), eventjs.add({
              target: k,
              mousedown: eventjs.cancel,
              click: function(a, b) {
                eventjs.cancel(a);
                setTimeout(function() {
                  f.windows.close(b.target.parentNode.parentNode.getAttribute(
                    "data-id"))
                }, 1)
              }
            }), h.appendChild(k));
            d.appendChild(h)
          }
          k = e.create('<div class="sk-palette-content"></div>');
          g.palette.grid && (m = e.create(
            '<div class="sk-scroller sk-scroller-official sk-scroller-palette"></div>'
          ), b.scrollable(m), k.appendChild(m), k.appendChild(e.create(
            '<div style="clear: both; padding: 5px;"></div>')), w = e.create(
            '<div class="sk-scroller sk-scroller-palette"></div>'), b.scrollable(
            w), k.appendChild(w), k.appendChild(e.create(
            '<div style="clear: both"></div>')));
          p = e.create('<div class="editor"></div>');
          p.style.display = "none";
          k.appendChild(p);
          d.appendChild(k);
          if (g.style.gradient || g.style.pattern) {
            var u = e.create('<ol class="tabs"></ol>');
            h.appendChild(u);
            h = function(d) {
              var e = c.Canvas();
              e.style.background = b.media.transparent.css;
              var f = document.createElement("span");
              f.className = d + "-indicator";
              f.appendChild(e);
              u.appendChild(f);
              eventjs.add(f, "click", function(b) {
                eventjs.prevent(b);
                a.updateAndRecord(d)
              });
              e = document.createElement("span");
              e.textContent = l.translate(d);
              f.appendChild(e)
            };
            g.style.color && h("color");
            g.style.gradient && h("gradient");
            g.style.pattern && h("pattern")
          }
          a.container = d
        },
        k = function(c) {
          c = c || {};
          var h = c.width || 206,
            k = c.height || 165,
            l = c.theme,
            p = c.onclose;
          c = c.onchange || function(b, c, d) {
            "down" === c && a.deselect("color");
            t({
              data: {
                paintType: "color",
                dna: d
              },
              paintMethod: a.paintMethod,
              state: c
            })
          };
          var m = e.$("#sk-palette .editor"),
            r = g.palette.eyeDropper ? {
              canvas: d.contexts.layer0,
              target: d.contexts.active
            } : null,
            s = g.palette.closeButton;
          "boolean" !== typeof s && (s = !!p);
          b.colorPicker =
            new f.color.picker({
              recordId: "sk-palette",
              recordWindow: f.windows.record,
              onchange: c,
              onclose: p,
              theme: l,
              container: m,
              feature: {
                closeButton: !1,
                hexInput: g.palette.hexInput,
                eyeDropper: r
              },
              modules: {
                hue: {
                  column: 2,
                  enable: !0,
                  width: 30,
                  height: k
                },
                satval: {
                  column: 1,
                  enable: !0,
                  width: h - 40,
                  height: k
                },
                alpha: {
                  column: 3,
                  enable: !1,
                  width: 30,
                  height: k
                }
              }
            });
          e.append(b.colorPicker.element, '<div class="clear"></div>');
          return b.colorPicker
        }
    })();
    a.setPane = function(b, c) {
      !1 === g.palette[b] && (g.palette[b] = !0, g.palette.grid = !0,
        g.palette.header =
        "", a.init());
      a.update(b, !1, !1, c);
      a.emit("setPane", f.style[a.paintMethod])
    };
    a.setPaintMethod = function(b, c) {
      a.paintMethod = b;
      a.update(f.style[b].type, !1, !1, c);
      a.setIndicator()
    };
    a.deselect = function(a, b) {
      b = b || w;
      a = a || u;
      var d = e.$$("." + a + ".selected", b);
      c.foreach(d, function(a) {
        a.classList.remove("selected")
      })
    };
    a.update = function(d, l, r, t) {
      var x = f.perf(),
        C = f.style[a.paintMethod];
      d = d || C.type;
      if (u !== d || l)
        if (u = C.type = d, void 0 !== p) {
          switch (C.type) {
            case "color":
              g.palette.colorPicker && (p.style.display = "block");
              break;
            case "gradient":
            case "pattern":
              p.style.display = "none"
          }
          if (g.palette.grid) {
            a.queue && a.queue.cancel();
            (l = e.$("." + d + "-indicator")) && e.setClass(l,
              "selected", !0, "span");
            d = C.type;
            l = "color" === d;
            var F = "gradient" === d,
              E = "pattern" === d,
              D = d + f.style.hashDNA(C[d]);
            m.style.display = "none";
            e.setClass(m, "color", l);
            e.setClass(m, "gradient", F);
            e.setClass(m, "pattern", E);
            e.setClass(w, "color", l);
            e.setClass(w, "gradient", F);
            e.setClass(w, "pattern", E);
            r && (e.empty(w), e.empty(m));
            var P = f.style[d];
            if (P) {
              var G, J, N = g.palette.drag &&
                !f.client.mobile,
                K = "color" === d && b.tooltip;
              a.queue = new c.Queue({
                items: P,
                flatten: !0,
                instant: !0,
                oncancel: t,
                oncomplete: function() {
                  g.debug && console.log("build palette", d, x());
                  a.setIndicator();
                  t && t()
                },
                next: function(a, e, l) {
                  a = P[l];
                  e = f.style.hashDNA(a);
                  var p = d + e,
                    t = f.style[d + "Official"][e] ? m : w,
                    u = document.getElementById(p);
                  if (u && !r) return h(d, u, e, D, p), this.next();
                  var x = c.Canvas(),
                    u = document.createElement("li");
                  u.id = p;
                  u.className = d;
                  u.setAttribute("data-type", d);
                  u.setAttribute("data-dna", a);
                  u.appendChild(x);
                  G ||
                    J || (t.appendChild(u), J = (G = x.offsetWidth) || x.offsetHeight);
                  f.style.renderSwatch(x, d, a, G, J);
                  h(d, u, e, D, p);
                  t.appendChild(u);
                  K && b.tooltip.add(x, a.toUpperCase());
                  N && eventjs.add(x, "drag", k);
                  eventjs.add(x, "click", v);
                  g.palette.buildInstant ? this.next() : 0 !== l % 10 ?
                    this.next() : setTimeout(this.next, 0)
                }
              })
            }
          }
        }
    };
    a.rebuild = function(b) {
      b = e.$$("#sk-palette .sk-scroller-palette " + (b ? "." + b :
        "li"));
      e.remove(b);
      a.update(null, !0)
    };
    var h = function(a, b, c, d, h) {
      f.style[a + "Official"][c] && (m.style.display = "block", e.setClass(
        b, "official", !0));
      h === d && e.setClass(b, "selected", !0)
    };
    a.updateAndRecord = function(b) {
      var c = f.style[a.paintMethod][b];
      a.setPane(b);
      t({
        data: {
          paintType: b,
          dna: c
        },
        paintMethod: a.paintMethod,
        state: !0
      })
    };
    var r = function(a, b) {
      for (var c = e.$$("." + a + "-indicator canvas"), d = 0; d < c.length; d++) {
        var h = c[d],
          k = h.offsetWidth;
        f.style.renderSwatch(h, a, b[a], k, k || h.offsetHeight)
      }
    };
    a.setIndicator = function() {
      var b = f.doc,
        c = a.paintMethod,
        d = f.style[c] || b.tool.device[c];
      b.scene && 1 === b.selection.length && (b = b.scene.getOneSelected()) &&
        "clipart" !==
        b.type && (c = b && b[c]) && (d[c.type] = c[c.type]);
      r("color", d);
      r("gradient", d);
      r("pattern", d);
      c = e.$$(".style-indicator canvas");
      for (b = 0; b < c.length; b++) c[b].style.cssText = "color" ===
        d.type ? "background: " + d.color : f.style.toCSSGradientBG({
          dna: d.gradient
        });
      c = d.type;
      d = f.style.hashDNA(d[c]);
      (d = e.$("#" + c + d)) && e.setClass({
        target: d,
        list: d.parentNode.querySelectorAll("li"),
        className: "selected",
        on: !0
      })
    };
    var k = function(a, b) {
        var c = f.doc;
        eventjs.cancel(a);
        "down" === b.state && (b.clone = e.clone(b.target,
            "sk-palette-clone"),
          b.metrics = e.measure(b.target), document.body.appendChild(b.clone)
        );
        var d = b.x - b.start.x,
          h = b.y - b.start.y;
        10 < Math.max(Math.abs(d), Math.abs(h)) && c.selection.reset();
        "up" === b.state ? (e.remove(b.clone), v(a, b), d = eventjs.getCoord(
            a), document.elementFromPoint(d.x, d.y) === c.contexts.active &&
          (h = b.target.parentNode, d = h.getAttribute("data-type"), h =
            h.getAttribute("data-dna"), f.vector.setStyleFromDropPoint({
              dna: h,
              layer: c.hovered.item,
              paintType: d,
              point: a
            }))) : (c = b.clone.style, c.position = "absolute", c.left =
          d + b.metrics.x1 +
          "px", c.top = h + b.metrics.y1 + "px", c.cursor = "crosshair"
        )
      },
      v = function(c, d) {
        eventjs.prevent(c);
        var h = a.paintMethod,
          k = d.target.parentNode,
          l = k.getAttribute("data-type"),
          p = k.getAttribute("data-dna");
        a[h] = p;
        a.deselect(l, w);
        a.deselect(l, m);
        e.setClass(k, "selected", !0);
        setTimeout(function() {
          "pattern" === l ? f.style.loadPattern(p, function(b) {
              t({
                data: {
                  paintType: l,
                  dna: p
                },
                paintMethod: a.paintMethod,
                state: !0
              })
            }) : "color" === l && b.colorPicker.update ? "none" !== p &&
            b.colorPicker.update(p, !0) : t({
              data: {
                paintType: l,
                dna: p
              },
              paintMethod: a.paintMethod,
              state: !0
            });
          g.debug && console.log("dna", p)
        }, 10)
      };
    (function() {
      a.visible = !1;
      a.show = function(d) {
        a.visible = !0;
        d = d || {};
        var h = d.aside;
        if (d = d.style) {
          var k = f.style.validate(dna);
          k && (t({
            data: {
              dna: d
            },
            paintMethod: a.paintMethod,
            state: !0
          }), "color" === k && b.colorPicker && b.colorPicker.update(
            d))
        }
        if (h) {
          k = d = 0;
          if (h.target) {
            var g = e.measure(h.target);
            d += g.x1;
            k += g.y1
          }
          if (h.position) {
            var l = e.$("#sk-palette"),
              g = l.style.display;
            l.style.display = "block";
            var p = c.arrayToObject(h.position.split(" "));
            p.bottom && (k -= l.offsetHeight);
            p.right && (d -= l.offsetWidth);
            l.style.display = g
          }
          h.top && (k += h.top);
          h.bottom && (k -= h.bottom);
          h.left && (d += h.left);
          h.right && (d -= h.right);
          l.style.left = d + "px";
          l.style.top = k + "px";
          f.windows.record({
            id: "sk-palette",
            x: d,
            y: k,
            left: d / window.innerWidth,
            top: k / window.innerHeight,
            display: "block"
          });
          f.windows.open("#sk-palette", !1)
        } else f.windows.open("#sk-palette")
      };
      a.hide = function() {
        a.visible = !1;
        f.windows.close("#sk-palette")
      };
      a.toggle = function(b) {
        var c = e.$("#sk-palette");
        f.windows.isOpen(c) ? a.hide() : a.show(b)
      }
    })();
    var x = t;
    return a
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch.color = sketch.color || {};
(function(g) {
  g.color.picker = function(a) {
    a = a || {};
    var c = this,
      l = g.color.space,
      w = {
        light: {
          arrow: "000",
          interlace: {
            size: 8,
            color1: "#fff",
            color2: "#eee"
          }
        },
        dark: {
          arrow: "#fff",
          interlace: {
            size: 8,
            color1: "#fff",
            color2: "#eee"
          }
        }
      };
    c.init = function() {
      g.ui.zIndexGlobal = g.ui.zIndexGlobal || 100;
      c.pixelRatio = 1;
      c.state = "colorPicker";
      c.color = q(a.color || "#000");
      c.container = a.container || document.body;
      c.margin = a.margin || 10;
      c.offset = c.margin / 2;
      c.strokeColor = a.strokeColor || "rgba(255,255,255,0.15)";
      c.recordId = a.recordId;
      c.feature =
        a.feature || {};
      c.eyeDropper = c.feature.eyeDropper || {};
      c.theme = w[a.theme || "dark"];
      var h = c.theme.arrow,
        l = document.createElement("canvas"),
        k = l.getContext("2d"),
        p = 16 / 3;
      l.width = 16;
      l.height = 16;
      for (var m = 0; 20 > m; m++) k.beginPath(), k.fillStyle = h, k.moveTo(
        0, 4), k.lineTo(4, 0), k.lineTo(4, 8), k.fill();
      k.translate(-p, -16);
      c.arrow = l;
      h = document.createElement("canvas");
      h.width = 10;
      h.height = 10;
      l = h.getContext("2d");
      l.lineWidth = 1;
      l.beginPath();
      k = h.width / 2;
      p = h.width / 2;
      l.arc(k, p, 4.5, 0, 2 * Math.PI, !0);
      l.strokeStyle = "#000";
      l.stroke();
      l.beginPath();
      l.arc(k, p, 3.5, 0, 2 * Math.PI, !0);
      l.strokeStyle = "#FFF";
      l.stroke();
      c.circle = h;
      k = c.theme.interlace;
      h = k.size;
      l = k.color1;
      p = k.color2;
      k = document.createElement("canvas").getContext("2d");
      k.canvas.width = 2 * h;
      k.canvas.height = 2 * h;
      k.fillStyle = l;
      k.fillRect(0, 0, h, h);
      k.fillStyle = p;
      k.fillRect(h, 0, h, h);
      k.fillStyle = p;
      k.fillRect(0, h, h, h);
      k.fillStyle = l;
      k.fillRect(h, h, h, h);
      h = k.createPattern(k.canvas, "repeat");
      try {
        h.data = k.canvas.toDataURL()
      } catch (s) {}
      c.interlace = h;
      c.onChange = a.onChange || a.onchange;
      c.onClose =
        a.onClose || a.onclose;
      c.onMouseDown = a.onMouseDown || a.onmousedown;
      c.onMouseUp = a.onMouseUp || a.onmousedown;
      h = c.modules = a.modules || {
        hue: !0,
        satval: !0,
        alpha: !0
      };
      l = c.config = {};
      h.hue && (k = h.hue, l.hue = {
        column: 0,
        enable: !a.modules || k.enable || !1,
        width: isFinite(k.width) ? k.width : 30,
        height: isFinite(k.height) ? k.height : 200
      });
      h.satval && (k = h.satval, l.satval = {
        column: 1,
        enable: !a.modules || k.enable || !1,
        width: isFinite(k.width) ? k.width : 200,
        height: isFinite(k.height) ? k.height : 200
      });
      h.alpha && (k = h.alpha, l.alpha = {
        column: 2,
        enable: !a.modules ||
          k.enable || !1,
        width: isFinite(k.width) ? k.width : 30,
        height: isFinite(k.height) ? k.height : 200
      });
      h = c.element = document.createElement("div");
      h.id = a.id || "ColorPicker";
      a.className && (h.className = a.className);
      a.style && (h.style.cssText = a.style);
      a.draggable && eventjs.proxy.dragElement(h);
      c.container.appendChild(h);
      c.feature.hexInput && d(c);
      c.feature.closeButton && e(c);
      f(c);
      return c
    };
    c.update = function(a, b) {
      b = void 0 === b ? "update" : b;
      a && (c.color = q(a));
      u.alpha.enable || (c.color.A = 255);
      var d = 0,
        e = 0,
        f = -1,
        g;
      for (g in t) {
        var l =
          t[g];
        !1 !== l.enable && (d += l.width + c.margin + c.offset - 5, f !==
          l.row && (e += l.height + 2 * c.margin, f = l.row))
      }
      d *= c.pixelRatio;
      e *= c.pixelRatio;
      f = c.canvas;
      g = c.element;
      if (f.width !== d || f.height !== e) f.width = d, f.height = e,
        f.style.cssText = "left: " + -(c.offset - 1) + "px;", g.style.height =
        e + "px", g.style.width = d + "px";
      c.render(b, !!a);
      return c
    };
    c.render = function(a, b) {
      var d = t.satval,
        e = t.hue,
        f = t.alpha,
        g = c.canvas,
        q = c.ctx;
      q.clearRect(0, 0, g.width, g.height);
      var u = l({
        H: c.color.H,
        S: 100,
        V: 100
      }, "HSV>RGB>HEX24>W3");
      l.HEX_RGB("0x" + u);
      var g =
        c.offset,
        w = t.satval.width,
        A = t.satval.height,
        C = c.ctx;
      C.save();
      C.fillStyle = c.interlace;
      C.fillRect(g, c.offset, t.satval.width, t.satval.height);
      C.globalAlpha = c.color.A / 255;
      C.fillStyle = m(u, "satval");
      C.fillRect(g, g, w, A);
      u = C.createLinearGradient(g, g, w + g, 0);
      u.addColorStop(0, m("rgba(255, 255, 255, 1)", "satval"));
      u.addColorStop(1, m("rgba(255, 255, 255, 0)", "satval"));
      C.fillStyle = u;
      C.fillRect(g, g, w, A);
      u = C.createLinearGradient(0, g, 0, A + g);
      u.addColorStop(0, "rgba(0, 0, 0, 0)");
      u.addColorStop(1, "rgba(0, 0, 0, 1)");
      C.fillStyle = u;
      C.fillRect(g, g, w, A);
      C.strokeStyle = m(c.strokeColor, "satval");
      C.strokeRect(g + .5, g + .5, w - 1, A - 1);
      C.restore();
      g = c.ctx;
      w = t.satval.width + c.margin + c.offset;
      g.fillStyle = c.interlace;
      g.fillRect(w, c.offset, t.hue.width, t.hue.height);
      A = g.createLinearGradient(0, 0, 0, t.hue.height + c.offset);
      A.addColorStop(0, m("rgba(255, 0, 0, 1)", "hue"));
      A.addColorStop(5 / 6, m("rgba(255, 255, 0, 1)", "hue"));
      A.addColorStop(4 / 6, m("rgba(0, 255, 0, 1)", "hue"));
      A.addColorStop(.5, m("rgba(0, 255, 255, 1)", "hue"));
      A.addColorStop(2 /
        6, m("rgba(0, 0, 255, 1)", "hue"));
      A.addColorStop(1 / 6, m("rgba(255, 0, 255, 1)", "hue"));
      A.addColorStop(1, m("rgba(255, 0, 0, 1)", "hue"));
      g.save();
      g.globalAlpha = c.color.A / 255;
      g.fillStyle = A;
      g.fillRect(w, c.offset, t.hue.width, t.hue.height);
      g.strokeStyle = m(c.strokeColor, "hue");
      g.strokeRect(w + .5, c.offset + .5, t.hue.width - 1, t.hue.height -
        1);
      g.restore();
      f.enable && (g = c.ctx, w = t.satval.width + 2 * c.margin + t.hue
        .width + c.offset, g.fillStyle = c.interlace, g.fillRect(w, c
          .offset, t.alpha.width, t.satval.height), A = l.HSV_RGB({
          H: c.color.H,
          S: c.color.S,
          V: c.color.V
        }), C = g.createLinearGradient(0, 0, 0, t.satval.height), A.A =
        255, C.addColorStop(0, m(l.RGBA_W3(A), "alpha")), A.A = 0, C.addColorStop(
          1, m(l.RGBA_W3(A), "alpha")), g.fillStyle = C, g.fillRect(w,
          c.offset, t.alpha.width, t.satval.height), g.strokeStyle = c
        .strokeColor, g.strokeRect(w + .5, c.offset + .5, t.alpha.width -
          1, t.satval.height - 1));
      g = l(c.color, "HSVA>RGBA");
      w = l(g, "RGB>HEX24>W3");
      c.feature.hexInput && (c.hexInput.value = w.substr(1), c.hexBox
        .style.backgroundColor = l(g, "RGBA>W3"));
      q.save();
      f.enable && (q.globalAlpha =
        f.enable ? 1 : 0, f = d.width + 2 * c.margin + e.width + f.width +
        c.offset, w = (255 - c.color.A) / 255 * d.height - 2, q.drawImage(
          c.arrow, f + 2, Math.round(w) + c.offset - 1));
      e && (q.globalAlpha = e.enable ? 1 : 0, f = d.width + c.margin +
        c.offset + e.width, w = (360 - c.color.H) / 362 * d.height -
        2, w = Math.round(w) + c.offset - 1, q.drawImage(c.arrow, f +
          2, w), q.beginPath(), q.moveTo(f - e.width, w + 3.5), q.lineTo(
          f, w + 3.5), q.strokeStyle = "rgba(255,255,255,0.5)", q.stroke(),
        q.beginPath(), q.moveTo(f - e.width, w + 4.5), q.lineTo(f, w +
          4.5), q.strokeStyle = "rgba(0,0,0,0.5)", q.stroke());
      d && (q.globalAlpha = d.enable ? 1 : 0, f = c.color.S / 100 * d
        .width, w = (1 - c.color.V / 100) * d.height, f -= c.circle.width /
        2, w -= c.circle.height / 2, q.drawImage(c.circle, Math.round(
          f) + c.offset, Math.round(w) + c.offset));
      q.restore();
      c.onChange && a && b && (d = c.toString(g), c.onChange(g, a, d))
    };
    var m = function(a, b) {
      if (!0 === t[b].enable) return a;
      a = "rgba" === a.substr(0, 4) ? l(a, "W3>RGBA") : l(a,
        "W3>HEX32>RGBA");
      var c = Math.round(.33 * a.R + .33 * a.G + .33 * a.B);
      return "rgba(" + c + "," + c + "," + c + "," + a.A / 255 * .42 +
        ")"
    };
    c.toggle = function(a) {
      return "boolean" ===
        typeof a ? a ? c.open() : c.close() : -1 === (" " + c.element.className +
          " ").indexOf(" opened ") ? c.open() : c.close()
    };
    c.open = function() {
      var d = c.element,
        d = c.recordId || d.id,
        e = document.getElementById(d);
      if (!e) return console.warn("#" + d + " does not exist");
      a.recordWindow && a.recordWindow && a.recordWindow({
        id: d,
        display: "block"
      }); - 1 === (" " + e.className + " ").indexOf(" opened ") && (e
        .className = (e.className + " opened").trim());
      e.style.display = "block";
      e.style.zIndex = g.ui.zIndexGlobal++;
      window.clearTimeout(e.interval);
      return c
    };
    c.close = function() {
      var d = c.element,
        d = c.recordId || d.id,
        e = document.getElementById(d);
      a.recordWindow && a.recordWindow({
        id: d,
        display: "none"
      });
      e.className = (" " + e.className + " ").replace(" opened ", " ")
        .trim();
      e.interval = setTimeout(function() {
        e.style.display = "none"
      }, 250);
      return c
    };
    c.destory = function() {
      document.body.removeChild(c.element);
      for (var a in c) delete c[a];
      return c
    };
    c.toString = function(a) {
      a = a || c.color;
      isFinite(a.H) && (a = l(a, "HSVA>RGBA"));
      return 255 === a.A ? l(a, "RGB>HEX24>W3") : l(a, "RGBA>W3")
    };
    c.init();
    var u = c.modules,
      t = c.config;
    c.update();
    c.toggle("undefined" === typeof a.display);
    return c
  };
  var f = function(a) {
      var c = a.element,
        d = a.config,
        e = document.createElement("canvas"),
        f = e.getContext("2d");
      a.canvas = e;
      a.ctx = f;
      c.appendChild(e);
      eventjs.add(e, "drag", function(f, m) {
        eventjs.stop(f);
        var h = "down" === m.state,
          r = "up" === m.state;
        if (h && ("function" === typeof a.mouseLayerExit && a.mouseLayerExit(),
            a.onMouseDown)) a.onMouseDown(f);
        if (r && a.onMouseUp) a.onMouseUp(f);
        var k = a.margin / 2,
          q = m.x - k,
          k = m.y - k,
          x = l(q, 0, e.width),
          s = l(k,
            0, e.height);
        if ("hexInput" === m.target.className) h && eventjs.stop(f), c
          .style.cursor = "text";
        else {
          if (x !== q || s !== k) a.feature.drag ? (c.style.cursor =
            "move", h && eventjs.proxy.drag({
              position: "move",
              event: f,
              target: c,
              animationFrame: !0,
              listener: function(d, e) {
                var f = window.innerWidth,
                  h = window.innerHeight,
                  k = e.target.offsetWidth,
                  l = e.target.offsetHeight;
                e.x + k > f && (e.x = f - k);
                e.y + l > h && (e.y = h - l);
                0 > e.x && (e.x = 0);
                0 > e.y && (e.y = 0);
                c.style.left = e.x + "px";
                c.style.top = e.y + "px";
                "down" === e.state ? c.style.zIndex = g.ui.zIndexGlobal++
                  : "up" ===
                  e.state && params.recordWindow && params.recordWindow({
                    id: a.recordId || c.id,
                    left: e.x / f,
                    top: e.y / h,
                    display: "block"
                  });
                eventjs.prevent(d)
              }
            })) : c.style.cursor = "default";
          else if (x <= d.satval.width) {
            if (!1 === d.satval.enable) return;
            h && eventjs.stop(f);
            c.style.cursor = "default";
            h && eventjs.proxy.drag({
              position: "relative",
              event: f,
              target: e,
              animationFrame: !0,
              listener: function(c, e) {
                var f = l(e.x - a.offset, 0, d.satval.width),
                  h = l(e.y - a.offset, 0, d.satval.height);
                a.color.S = f / d.satval.width * 100;
                a.color.V = 100 - h / d.satval.height * 100;
                a.render(e.state, !0);
                eventjs.prevent(c)
              }
            })
          } else if (x > d.satval.width + a.margin && x <= d.satval.width +
            a.margin + a.offset + d.hue.width) {
            if (!1 === d.hue.enable) return;
            h && eventjs.stop(f);
            c.style.cursor = "crosshair";
            h && eventjs.proxy.drag({
              position: "relative",
              event: f,
              target: e,
              animationFrame: !0,
              listener: function(c, e) {
                var f = l(e.y - a.offset, 0, d.satval.height);
                a.color.H = 360 - 360 * Math.min(1, f / d.satval.height);
                a.render(e.state, !0);
                eventjs.prevent(c)
              }
            })
          } else if (d.alpha && x > d.satval.width + d.alpha.width + 2 *
            a.margin && x <= d.satval.width +
            2 * a.margin + a.offset + 2 * d.alpha.width) {
            if (!1 === d.alpha.enable) return;
            h && eventjs.stop(f);
            c.style.cursor = "crosshair";
            h && eventjs.proxy.drag({
              position: "relative",
              event: f,
              target: e,
              animationFrame: !0,
              listener: function(c, e) {
                var f = l(e.y - a.offset, 0, d.satval.height);
                a.color.A = 255 * (1 - Math.min(1, f / d.satval.height));
                a.render(e.state, !0);
                eventjs.prevent(c)
              }
            })
          } else c.style.cursor = "default";
          r && (c.style.cursor = "default");
          return !1
        }
      })
    },
    d = function(b) {
      var c = b.hexBoxContainer = document.createElement("div");
      b.interlace.data &&
        (c.style.backgroundImage = "url(" + b.interlace.data + ")");
      c.className = "hexBox";
      var d = b.element,
        e = b.hexBox = document.createElement("div");
      c.appendChild(e);
      d.appendChild(c);
      b.eyeDropper.target && a(b);
      var f = /[^a-f0-9]/gi,
        l = b.hexInput = document.createElement("input");
      l.className = "hexInput";
      l.size = 6;
      l.type = "text";
      eventjs.add(l, "mousedown", eventjs.stop);
      eventjs.add(l, "keydown keyup change", function(a) {
        var c = a.keyCode;
        eventjs.keyTracker(a);
        setTimeout(function() {
          var d = l.value.replace(f, "").substr(0, 6),
            d = g.color.space(d,
              "W3>HEX24");
          if ("NaN" !== String(d)) {
            if ("keydown" === a.type || "keyup" === a.type)
              if (40 === c) d = Math.max(0, d - (a.shiftKey ? 10 : 1)),
                l.value = g.color.space(d, "HEX24>W3").substr(1);
              else if (38 === c) d = Math.min(16777215, d + (a.shiftKey ?
              10 : 1)), l.value = g.color.space(d, "HEX24>W3").substr(
              1);
            else if (!eventjs.metaKey || 86 !== c) return;
            16777215 < d && (d = 16777215);
            0 > d && (d = 0);
            b.update(g.color.space(d, "HEX24>RGB"), "up")
          }
        }, 50);
        27 === c && b.blur()
      });
      d.appendChild(l)
    },
    a = function(a) {
      var c = a.element,
        d = a.modules,
        e = document.createElement("span");
      e.className = "icon-eyedropper";
      a.feature.closeButton && (e.style.marginRight = "16px");
      c.appendChild(e);
      var f = a.eyeDropper.target,
        l = null;
      a.mouseLayerUpdate = function(c) {
        eventjs.prevent(c);
        c = eventjs.getCoord(c);
        var e = eventjs.getBBox(f);
        c.x += e.scrollLeft - e.x1;
        c.y += e.scrollTop - e.y1;
        c = a.eyeDropper.canvas.getContext("2d").getImageData(c.x, c.y,
          1, 1);
        0 !== c.data[3] && (l = g.color.space(c.data, "RGBA>HSVA"), d.alpha ||
          (l.A = 255), a.update(l))
      };
      a.mouseLayerExit = function() {
        eventjs.remove(document.body, "mouseup", a.mouseLayerExit);
        eventjs.remove(f, "mousemove", a.mouseLayerUpdate);
        l && a.update(l, "up");
        a.hexBoxContainer.className = "hexBox";
        f.style.cursor = "default";
        setTimeout(function() {
          a.state = "colorPicker"
        }, 50)
      };
      g.ui.tooltip && g.ui.tooltip.add(e, "eyedropper");
      eventjs.add(e, "click", function(c) {
        if ("eyeDropper" === a.state) return a.mouseLayerExit();
        l = null;
        a.state = "eyeDropper";
        a.hexBoxContainer.className = "hexBox active";
        f.style.cursor = "crosshair";
        setTimeout(function() {
          eventjs.add(document.body, "mouseup", a.mouseLayerExit);
          eventjs.add(f,
            "mousemove", a.mouseLayerUpdate)
        }, 0)
      })
    },
    e = function(a) {
      var c = a.element,
        d = document.createElement("div");
      d.className = "hexClose icon-close";
      d.innerHTML = "x";
      g.ui.tooltip && g.ui.tooltip.add(d, "Close Color Picker");
      eventjs.add(d, "mousedown", eventjs.cancel);
      eventjs.add(d, "click", a.onClose || function(c) {
        eventjs.cancel(c);
        a.close()
      });
      c.appendChild(d)
    },
    q = function(a) {
      "string" === typeof a ? a = "hsla" === a.substr(0, 4) ? g.color.space(
          a, "W3>HSLA>RGBA>HSVA") : "rgba" === a.substr(0, 4) ? g.color.space(
          a, "W3>RGBA>HSVA") : "rgb" === a.substr(0,
          3) ? g.color.space(a, "W3>RGB>HSV") : g.color.webcolors[a] ? g.color
        .space(g.color.webcolors[a], "W3>HEX24>RGB>HSV") : g.color.space(
          a, "W3>HEX24>RGB>HSV") : "undefined" !== typeof a.R && (a = g.color
          .space(a, "RGB>HSV"));
      "undefined" === typeof a.A && (a.A = 255);
      return a
    },
    l = function(a, c, d) {
      return a < c ? c : a > d ? d : a
    }
})(sketch);
var EnableContextMenu = function(g, f) {
  function d(a) {
    setTimeout(a, 0)
  }

  function a(a) {
    var b = 0,
      c = 0;
    if (a.getClientRects) return a.getClientRects()[0];
    do b += a.offsetLeft, c += a.offsetTop, a = a.offsetParent; while (
      a);
    return {
      left: b,
      top: c
    }
  }

  function e(a) {
    return a.get ? a.get(0) : a
  }

  function q(a, b) {
    if ("none" !== a.style.display) {
      if (b) throw "no need to fade";
      a.style.display = "none";
      var c = a.launcher;
      c && c.removeAttribute("open");
      E.visible--
    }
  }

  function l() {
    var a = K.pop();
    q(a);
    return a
  }

  function b() {
    N.style.opacity = "0.0";
    J = setTimeout(function() {
      for (; K.length;) l(!1);
      N.style.display = "none";
      N.style.opacity = "1.0";
      y()
    }, V)
  }

  function c(a) {
    "inline-block" !== a.style.display && (a.style.display =
      "inline-block", E.visible++)
  }

  function p(a) {
    a.stopPropagation();
    a.preventDefault()
  }

  function w(a, b) {
    return b.nodeName === a ? b : w(a, b.parentNode || {
      nodeName: a
    })
  }

  function m(a) {
    var b = w("CMENU", a.target);
    if (O) {
      if (O === b) {
        K.push(b);
        O = void 0;
        return
      }
      console.error("SHOULD NOT BE A PREVIEW")
    }
    a = K.length;
    b = K.indexOf(b);
    for (a -= 1; a > b; a--) l()
  }

  function u(a) {
    if ("CMENU" !== a.target.nodeName || 0 !== a.offsetX) return a.stopPropagation(),
      a.preventDefault(), !1
  }

  function t(a) {
    T = clearTimeout(T);
    if (w("CMENU", a.toElement) === O) return !1;
    O && (q(O), O = void 0)
  }

  function h(b) {
    T = clearTimeout(T);
    T = setTimeout(function() {
      var d = b.srcElement,
        e = d._contextMenu;
      e.launcher = d;
      d.setAttribute("open", !0);
      O && O !== e && q(O);
      O = e;
      d = a(d);
      e.style.top = d.top - 5 + "px";
      e.style.left = d.left + d.width - 1 + "px";
      c(e)
    }, 200)
  }

  function r(a) {
    var b = a.parentNode,
      c;
    eventjs.add(a, "mouseover", m, !1);
    eventjs.add(a, "mousedown", u);
    eventjs.add(a, "contextmenu", p);
    "CMENU" === b.nodeName ? (c = g.createElement("menuitem"),
      a.classList.add("submenu"), c.className = a.className, c.innerHTML =
      a.innerHTML, c._contextMenu = a, eventjs.add(c, "mouseover", h),
      eventjs.add(c, "mouseout", t), b.replaceChild(c, a)) : b.removeChild(
      a);
    N.appendChild(a)
  }

  function k(a, b, d) {
    d -= 5;
    L = new Date;
    K.push(a);
    a.style.top = d + "px";
    a.style.left = b + "px";
    c(a);
    N.style.display = "block";
    Q = !1;
    var e = b + a.offsetWidth,
      f = d + a.offsetHeight,
      h = document.body.offsetHeight,
      g = document.body.offsetWidth;
    f > h && (a.style.top = d - (f - h) + "px");
    e > g && (a.style.left = b - (e - g) + "px")
  }

  function v(b, c, d) {
    var e;
    void 0 === d && (d = b.target);
    e = a(d);
    void 0 === c && (c = s(d));
    k(c, e.left, e.top + e.height + 8);
    b && (b.preventDefault(), b.stopPropagation());
    Q = !0;
    return !1
  }

  function x(a, b, c) {
    v(a);
    Q = !1
  }

  function s(a) {
    if (a && a.hasAttribute) return a._contextMenu ? a._contextMenu :
      a.hasAttribute("contextmenu") ? (a = g.getElementById(a.getAttribute(
        "contextmenu")), a._contextMenu = a) : s(a.parentNode)
  }

  function z(a) {
    var b = s(a.srcElement),
      c = a.clientX,
      d = a.clientY;
    k(b, a.clientX, a.clientY);
    Q = !0;
    P = c;
    G = d;
    a.preventDefault();
    a.stopPropagation();
    return !1
  }

  function y() {
    U.forEach(function(a) {
      try {
        a()
      } catch (b) {
        setTimeout(function() {
          throw b;
        }, 0)
      }
    });
    U = []
  }

  function B() {
    K = [];
    N = g.createElement("div");
    var a = "osx10_7",
      c = 0;
    /Mac/.test(navigator.userAgent) ? a = "osx10_7" : /Win/.test(
      navigator.userAgent) && (a = "win7");
    g.body.classList && (g.body.classList.add(a), N.className =
      "_contextmenu_screen_", V = 150, L = 0, g.body.appendChild(N),
      eventjs.add(N, "contextmenu", function(a) {
        a.preventDefault()
      }), eventjs.add(N, "mousedown", function(a) {
        b(a)
      }), eventjs.add(N, "mouseup", function(a) {
        a.stopPropagation();
        if (!c) {
          var d = a.target;
          if ("MENUITEM" === d.nodeName) {
            if (d._contextMenu) return !1;
            if (Q) {
              var e;
              document.createEvent && (e = document.createEvent(
                "MouseEvents"));
              d && d.dispatchEvent && e && e.initMouseEvent && (e.initMouseEvent(
                "click", !0, !0, document.defaultView, 1, a.screenX, a.screenY,
                a.clientX, a.clientY, !1, !1, !1, !1, 0, null), d.dispatchEvent(
                e))
            }
          }
          300 > new Date - L ? Q = !1 : b(a)
        }
      }), eventjs.add(N, "mousewheel", function(a) {
        a.preventDefault();
        a.stopPropagation();
        return !1
      }, !0), eventjs.add(N, "contextmenu", function(a) {
        N.style.display =
          "none";
        var e = g.elementFromPoint(a.clientX, a.clientY),
          f = s(e),
          h, l, m;
        if (f) {
          N.style.display = "block";
          clearTimeout(J);
          a.preventDefault();
          if (K[0] === f && (e = a.clientX, h = a.clientY, l = e - P,
              m = h - G, P = e, G = h, 50 > l * l + m * m)) {
            N.style.opacity = "1.0";
            N.style.display = "block";
            clearTimeout(J);
            d(b);
            return
          }
          c++;
          setTimeout(function() {
            for (; K.length;) {
              var b = K.pop();
              q(b)
            }
            N.style.display = "none";
            N.style.opacity = "1.0";
            N.style.display = "block";
            d(function() {
              c--;
              k(f, a.clientX, a.clientY)
            })
          }, V);
          return !1
        }
        N.style.opacity = "1.0";
        N.style.display =
          "block";
        clearTimeout(J);
        d(b)
      }), eventjs.add(N, "mouseover", function(a) {
        a.target === N && (T = clearTimeout(T), O && (q(O), O = void 0))
      }))
  }

  function A() {
    var a = g.getElementsByTagName("cmenu"),
      b, c, d = [];
    b = 0;
    for (c = a.length; b < c; b++) d[b] = a[b];
    b = 0;
    for (c = d.length; b < c; b++) r(d[b])
  }

  function C() {
    var a = g.querySelectorAll("[contextmenu]"),
      b, c, d;
    c = 0;
    for (d = a.length; c < d; c++) b = a[c], b._contextMenu = g.getElementById(
        b.getAttribute("contextmenu")), "INPUT" === b.nodeName ? (
        eventjs.add(b, "mouseup", x), eventjs.add(b, "contextmenu", v)) :
      eventjs.add(b,
        "contextmenu", z)
  }

  function F(a) {
    var b = g.createElement("cmenu"),
      c, d, e, f;
    b.setAttribute("type", "context");
    c = 0;
    for (d = a.length; c < d; c++)
      if (e = a[c]) {
        if (e.children) f = F(e.children), f.setAttribute("label", e.label);
        else if (e.hr) f = g.createElement("hr");
        else {
          f = g.createElement("menuitem");
          f.innerHTML = e.label;
          f.className = e.className || "";
          e.onclick && eventjs.add(f, "mouseup", e.onclick);
          e.icon && (f.icon = e.icon);
          e.checked && f.setAttribute("checked", e.checked ? "checked" :
            "");
          var h, k = {
            label: !0,
            icon: !0,
            hr: !0,
            onclick: !0,
            checked: !0
          };
          for (h in e) e.hasOwnProperty(h) && k[h] && f.dataset && (f.dataset[
            h] = e[h])
        }
        b.appendChild(f)
      }
    return b
  }

  function E(a) {
    a = F(a);
    var b, c, d, e;
    g.body.appendChild(a);
    if (D) return a;
    b = a.getElementsByTagName("cmenu");
    c = [a];
    d = 0;
    for (e = b.length; d < e; d++) c.push(b[d]);
    d = 0;
    for (e = c.length; d < e; d++) r(c[d]);
    return a
  }
  var D = !1,
    P, G, J, N, K, O, V, L, T, Q = !1,
    U = [],
    da = f.contextmenu;
  E.visible = 0;
  E.hide = function(a, b) {
    a = a || E.menu;
    q(a, b)
  };
  E.show = function(a, b, c, d) {
    E.menu = a;
    if (D) throw "Not supported!";
    "string" === typeof a ? a = g.getElementById(a) : (a =
      e(a), a.id = a.id || (0 | 1E4 * Math.random()).toString(30));
    "number" === typeof b ? (k(a, b, c), Q = d || Q) : (v(null, a, e(
      b)), Q = !1);
    return this
  };
  E.then = function(a) {
    D ? a() : U.push(a)
  };
  E.attach = function(a, b) {
    a = e(a);
    b = e(b);
    b.id = b.id || (0 | 1E4 * Math.random()).toString(30);
    a._contextMenu = b;
    "INPUT" === a.nodeName || "BUTTON" === a.nodeName ? (eventjs.add(
      a, "mouseup", x), eventjs.add(a, "contextmenu", v)) : eventjs.add(
      a, "contextmenu", z)
  };
  E.noConflict = function() {
    f.contextmenu = da;
    return E
  };
  D || (B(), A(), C());
  return f.contextmenu = E
};
(function(g) {
  g.module = g.module || {};
  g.module.TreeMenu = function(f, d, a, e) {
    var g = this,
      l = f.dom,
      b = f.lang,
      c = f.feature,
      p = f.detect,
      w = d.history,
      m = d.render,
      u = d.toolkit,
      t = f.util,
      h = f.ui,
      r = "#sk-layers .sk-pane-content" === a,
      k = "#sk-history .sk-pane-content" === a,
      v = e,
      x = null;
    g.setData = function(a) {
      v = a
    };
    g.length = -1;
    g.render = function() {
      x = l.$(a);
      if (g.length === v.length && k) s();
      else {
        l.empty(x);
        g.shifted = null;
        g.selected = null;
        var b = x,
          c = void 0,
          d = {},
          e = r ? 0 : -1,
          f = v.length;
        if (e || f)
          for (g.length = f, y(x, 0, "before"); e < f; e++) {
            var h = v[e] || {
                name: "new-doc"
              },
              m = String(h.groupId);
            "undefined" === m ? (c = void 0, b = B(x, h, e)) : d[m] ? (c =
              m, B(d[c], h, e)) : m !== c && (c = m, -1 === c.indexOf(
              ".") && (b = x), b = d[c] = B(b, h, e, !0))
          } else l.append(x,
            '<span style="padding: 15px; display: inline-block;">No layers added</span>'
          );
        k && s();
        return g
      }
    };
    var s = function() {
      var a = g.length,
        b = w.vector.current,
        c = l.$(".file.enabled", x),
        d = a;
      c && (c.classList.remove("enabled"), d = parseInt(c.getAttribute(
        "data-layer")));
      for (c = Math.min(d, b); c < a; c++)
        if (d = l.$(".file" + c, x)) c === b ? (d.classList.add(
            "enabled"),
          z(d)) : c > b ? z(d) : d.classList.remove("selected")
    };
    g.select = function(a) {
      a.forEach(function(a) {
        a && z(l.$(".file" + a.zIndex), !0)
      })
    };
    g.deselect = function(a) {
      a.forEach(function(a) {
        a && z(l.$(".file" + a.zIndex), !1)
      })
    };
    var z = function(a, b, c) {
        a && (c = c && l.$$("li", x), l.setClass(a, "selected", b, c),
          g.selected = a)
      },
      y = function(a, b, c) {
        var d = l.create('<span class="divider ' + c + '"></span>');
        d.setAttribute("data-layer", b);
        d.setAttribute("data-command", c);
        a.insertBefore(d, a.firstChild)
      },
      B = function(a, b, c, e) {
        var f = l.create('<li data-layer="' +
          c + '"></li>');
        if (e) {
          e = l.create("ul");
          var h = String(b.groupId).split(".").pop();
          A(b, f, h, c + 1);
          f.appendChild(e);
          a.insertBefore(f, a.firstChild);
          y(e, c - 1, "before");
          y(a, c + 1, "after");
          return e
        }
        e = b.name || b.type || "";
        h = l.create("span");
        h.className = "content";
        f.appendChild(h);
        f.className = "file file" + c;
        if (r) {
          d.selection.items[c] && z(f);
          var g = new Image;
          g.width = 18;
          g.height = 29;
          J(g, b);
          h.appendChild(g)
        } else g = l.create("b"), g.className = "icon-" + (b.icon ||
          "file"), h.appendChild(g), -1 !== c && (g = l.create("i"), g.style
          .cssText = "float: right; padding-right: 10px;",
          g.textContent = "#" + (c + 1), h.appendChild(g));
        C(b, f, h, e);
        a.insertBefore(f, a.firstChild);
        eventjs.add(f, "mousedown", E(b, f));
        y(a, c + 1, "after");
        return a
      },
      A = function(a, b, c, d) {
        var e = l.create("input");
        e.className = "checkbox";
        e.type = "checkbox";
        e.checked = !0;
        b.appendChild(e);
        d = l.create("label");
        var f = l.create('<span class="carret"></span>');
        d.appendChild(f);
        b.appendChild(d);
        C(a, b, d, c, !0);
        eventjs.add(f, "mousedown", function(a, b) {
          e.checked = !e.checked
        });
        eventjs.add({
          target: d,
          mousedown: eventjs.prevent,
          dblclick: function(a,
            b) {
            e.checked = !e.checked
          }
        })
      },
      C = function(a, c, e, f, h) {
        h = l.create("font");
        h.innerHTML = b.translate(f);
        e.appendChild(h);
        if (r) {
          eventjs.add(e, "contextmenu", F);
          eventjs.add(e, "drag", G(c), {
            position: "difference"
          });
          f = l.create('<span class="icon-gear"></span>');
          eventjs.add(f, "mousedown", E(a, c));
          eventjs.add(f, "mousedown", F);
          var g = function(a) {
              return !1 === a ? "icon-eye-close" : "icon-eye-open"
            },
            k = l.create("span");
          k.className = g(a.visible);
          eventjs.add(k, "mousedown", function(b) {
            eventjs.cancel(b);
            b = !(a.visible = !1 !== a.visible);
            k.className = g(b);
            u.setParam({
              selection: d.selection.fromLayers([a]),
              filter: a.type,
              param: "visible",
              value: b
            })
          });
          c = l.create("div");
          c.className = "right";
          c.appendChild(f);
          c.appendChild(k);
          e.appendChild(c)
        }
      },
      F = function(a) {
        eventjs.cancel(a);
        h.contextMenu.show({
          target: this,
          menu: h.menu.layers
        })
      },
      E = function(a, b) {
        return r ? P(a, b) : D(a, b)
      },
      D = function(a, b) {
        return function(a) {
          eventjs.cancel(a);
          a = w.vector.current;
          var c = N(b);
          (a -= c) && (0 > a ? w.redo(Math.abs(a)) : w.undo(a));
          g.selected = b
        }
      },
      P = function(a, b) {
        return function(c) {
          eventjs.cancel(c);
          if (eventjs.shiftKey) {
            var e = g.selected;
            c = N(b);
            var f = N(e || b),
              e = Math.min(c, f);
            for (c = Math.max(c, f); e <= c; e++)(f = d.scene.children[e]) &&
              (eventjs.metaKey ? f.selected ? d.scene.deselect(e) : d.scene
                .selectByIdx(e, !1) : d.scene.selectByIdx(e, !1))
          } else eventjs.metaKey ? a.selected ? d.scene.deselect(a.zIndex) :
            d.scene.selectByIdx(a.zIndex, !1) : !1 === b.classList.contains(
              "selected") && d.scene.selectByIdx(a.zIndex, !0);
          g.selected = b;
          m.clean()
        }
      },
      G = function(a) {
        var b = null,
          c = null,
          e = N(a),
          f = function() {
            if (c) {
              var a = N(c),
                f = c.getAttribute("data-command");
              console.log("send", e, a, f);
              d.scene.sendTo({
                idx: a,
                record: !0
              });
              m.clean();
              g.render();
              l.setClass({
                target: c,
                className: "hover",
                on: !1,
                list: l.$$("span.divider", x)
              })
            }
            x.classList.remove("dragging");
            b && (b = null)
          };
        return function(h, g) {
          if (!eventjs.metaKey && !eventjs.shiftKey) {
            var k = "up" === g.state;
            "down" === g.state && (x.classList.add("dragging"), g.selected =
              a.classList.contains("selected"), g.offsetTop = a.offsetTop
            );
            if (5 >= g.distanceMoved()) {
              if (k) return g.selected && d.scene.selectByIdx(e, !0), f()
            } else {
              eventjs.cancel(h);
              null ===
                b && (b = a.cloneNode(!0), b.classList.add("moving"), x.appendChild(
                  b));
              var m = b.style;
              m.display = "none";
              var p = eventjs.getCoord(h),
                r = eventjs.getBBox(x),
                p = document.elementFromPoint(p.x - r.pageXOffset, p.y - r
                  .pageYOffset);
              m.top = g.y + g.offsetTop + "px";
              for (m.display = ""; p;) {
                if (p === x || p === document) return k && f();
                if (p.classList.contains("divider")) {
                  c = p;
                  break
                } else p = p.parentNode
              }
              p && l.setClass({
                target: p,
                className: "hover",
                on: !0,
                list: l.$$("span.divider", p.parentNode)
              });
              k && f()
            }
          }
        }
      },
      J = function(a, b) {
        if (b.ctx) {
          var d = b.ctx.canvas,
            e;
          c.cache257 && p.useColorCycle[b.type] && (e = [0, 0, b.bbox.width,
            b.bbox.height
          ]);
          var f = d.thumb = d.thumb || t.thumbnailer({
            crop: "edge",
            croparea: e,
            center: !0,
            background: "#fff",
            src: d,
            width: 18,
            height: 28
          });
          f.blobURL ? a.src = f.blobURL : f.toBlobURL(function(b) {
            f.blobURL = b;
            a.src = b
          })
        } else a.src = h.media.clear, a.style.background = "#04a";
        h.tooltip.add(a, function() {
          return d ? '<img src="' + t.thumbnailer({
            crop: "edge",
            croparea: e,
            center: !0,
            background: "#fff",
            src: d,
            width: 50,
            height: 50
          }).toDataURL() + '">' : "out of bounds"
        }, 50)
      },
      N = function(a) {
        return parseFloat(a.getAttribute("data-layer"))
      };
    return g.render()
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.UISidebar = function(f, d) {
    var a = this,
      e = f.dom,
      g = f.util;
    f.module.Listener(a);
    a.opened = !1;
    a.disabled = !0;
    var l = "sk-sidebar-" + d,
      b = e.$("." + l),
      c = document.documentElement;
    if (b && b.parentNode) {
      for (var p, w = b.offsetWidth, m = ["transform",
          "webkitTransform", "MozTransform", "OTransform",
          "msTransform"
        ], e = 0; e < m.length; e++)
        if ("string" === typeof b.style[m[e]]) {
          p = !0;
          m = m[e];
          break
        }
      a.setAnimate = function(a, c) {
        b.style.cssText = "transition: " + (a ? "all" : "none") + " " +
          (c || .35) + "s;"
      };
      a.setPosition =
        function(a) {
          var c = "right" === d ? -1 : 1;
          p ? (b.style[m] = "translate3d(" + a * c + "px, 0, 0)", b.style[
            d] = 0) : b.style[d] = a + "px"
        };
      a.open = function() {
        g.setItem("show-sidebar-" + d, "true");
        a.disabled || !1 !== a.opened || (a.opened = !0, clearTimeout(
          a.timeoutClose), a.timeoutOpen = (function() { //setTimeout(function() {
          a.setPosition(0);
          c.classList.add("sk-sidebar-active-" + d);
          f.ui.configureBuild();
          a.on.open && a.on.open()
        })())//, 1))
      };
      a.close = function() {
        g.setItem("show-sidebar-" + d, "false");
        a.disabled || !0 !== a.opened || (a.opened = !1, a.setPosition(-
          w), c.classList.remove("sk-sidebar-active-" +
          d), clearTimeout(a.timeoutOpen), a.on.close && a.on.close())
      };
      a.toggle = function() {
        a.setAnimate(!0, .35);
        !0 === a.opened ? a.close() : a.open()
      };
      a.disable = function() {
        a.disabled || (a.disabled = !0, eventjs.remove(b, "drag", u))
      };
      a.enable = function() {
        a.disabled && (a.disabled = !1, eventjs.add(b, "drag", u))
      };
      var u = function(b, c) {
        eventjs.stop(b);
        var e = "up" === c.state,
          f = "move" === c.state;
        "down" === c.state && (c.moved = !1, c.timestamp = g.timestamp());
        var l = c.start;
        if ("right" === d) var m = l.x - c.x,
          p = l.y - c.y;
        else m = c.x - l.x, p = c.y - l.y;
        l = Math.abs(m);
        p = Math.abs(p);
        f && l > p && eventjs.prevent(b);
        if (!a.disabled) {
          a.opened ? (f = Math.min(0, m), -20 <= f && !c.moved ? f = 0 :
            c.moved = !0) : (f = Math.min(0, Math.max(0, m) - w), f <=
            -w + 20 && !c.moved ? f = -w : c.moved = !0);
          if (e)
            if (eventjs.prevent(b), e = g.timestamp() - c.timestamp, e =
              Math.min(350, e) / 1E3, m = !c.moved && c.isArrow, a.opened
            ) {
              if (-50 >= f || m) return a.setAnimate(!0, e), a.close();
              f = 0
            } else {
              if (f >= -w + 50 || m) return a.setAnimate(!0, e), a.open();
              f = -w
            }
          a.setAnimate(!1);
          a.setPosition(f)
        }
      };
      f.ui.scrollable(b, !0);
      c.classList.add("sk-sidebar-ready");
      a.enable();
      return this
    }
    console.warn(l + " does not exist")
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f, d = {
    id: "loader",
    bars: 12,
    radius: 0,
    lineWidth: 14,
    lineHeight: 40,
    timeout: 0,
    display: !0
  };
  g.ui = g.ui || {};
  g.ui.Loader = function(q) {
    var l = this;
    void 0 === f && (f = !!document.createElement("canvas").getContext);
    if (f) {
      var b = g.ui.Loader.threads;
      "string" === typeof q && (q = {
        message: q
      });
      "boolean" === typeof q && (q = {
        display: !1
      });
      "undefined" === typeof q && (q = {});
      q.container = q.container || document.body;
      if (q.container) {
        for (var c in d) "undefined" === typeof q[c] && (q[c] = d[c]);
        var p = function(a) {
            for (var c in b)
              if (b[c] ===
                a) return c
          },
          w = document.getElementById(q.id);
        if (w) this.span = w.parentNode.getElementsByTagName("span")[0];
        else {
          var m = document.createElement("div");
          c = document.createElement("span");
          c.className = "message";
          m.className = d.id;
          m.style.cssText = a("opacity", 400);
          this.span = c;
          this.div = m;
          w = document.createElement("canvas");
          w.id = q.id;
          w.style.cssText =
            "opacity: 1; position: absolute; z-index: 10000;";
          m.appendChild(w);
          m.appendChild(c);
          var u = document.createElement("div");
          u.className = "meter";
          u.style.padding = "10px";
          c = document.createElement("span");
          c.style.width = "3%";
          u.appendChild(c);
          this.meter = c;
          this.meterContainer = u;
          this.span.appendChild(u);
          q.container.appendChild(m)
        }
        var t = q.bars,
          h = q.radius,
          r = 2 * (q.lineHeight + 20) + 2 * q.radius;
        e(q.container);
        var k = window.devicePixelRatio || 1;
        w.width = r * k;
        w.height = r * k;
        var v = 0,
          x = w.getContext("2d");
        x.globalCompositeOperation = "lighter";
        x.shadowOffsetX = 1;
        x.shadowOffsetY = 1;
        x.shadowBlur = 0;
        x.shadowColor = "rgba(0,0,0,0.5)";
        this.messages = {};
        this.threads = g.ui.Loader.threads;
        this.create = function(a, c, d) {
          a = b[a] = b[a] || l.add(c);
          isFinite(a) && c && "string" === typeof(c.message || c) ? l.update(
            a, c.message || c, c.percent || d) : isFinite(d) && l.update(
            a, null, d)
        };
        this.update = function(a, b, c) {
          "object" === typeof a && (c = a.percent, b = a.message, a = a
            .id);
          if (!isFinite(a))
            for (a in l.messages);
          if (a = l.messages[a]) a.message = b = b || a.message,
            "number" === typeof c && (a.span.innerHTML = c + "%"), "..." ===
            b.substr(-3) ? (a._message = b.substr(0, b.length - 3), a.messageAnimate = [
              ".&nbsp;&nbsp;", "..&nbsp;", "..."
            ].reverse()) : (a._message = b, a.messageAnimate = !1), a.element
            .innerHTML =
            b
        };
        this.add = function(b) {
          b || (b = {
            message: ""
          });
          "string" === typeof b && (b = {
            message: b
          });
          this.span.style.cssText = "background: " + (q.background ? q.background :
            "rgba(0,0,0,1)") + ";";
          this.div.style.cssText = a("opacity", 400);
          this.stopPropagation ? this.div.style.cssText +=
            "background: rgba(0,0,0,0.25);" : (this.div.style.pointerEvents =
              "none", this.div.style.height = 0);
          this.div.style.opacity = 1;
          this.div.style.display = "block";
          q.background && (this.div.style.background = q.backgrond);
          var c = Date.now(),
            d = Math.abs(c * Math.random() >>
              0),
            e = b.message,
            f = document.createElement("div");
          f.style.cssText = a("opacity", 500);
          var h = document.createElement("span");
          h.style.cssText = "float: right; width: 50px;";
          var g = document.createElement("span");
          g.innerHTML = e;
          f.appendChild(g);
          f.appendChild(h);
          f.appendChild(document.createElement("br"));
          c = this.messages[d] = {
            seed: d,
            container: f,
            element: g,
            span: h,
            message: e,
            timeout: 1E3 * (b.timeout || q.timeout),
            timestamp: c,
            getProgress: b.getProgress
          };
          this.span.appendChild(f);
          this.span.style.display = "block";
          this.update(c.seed,
            e);
          b.onstart && setTimeout(b.onstart, 150);
          this.center();
          this.interval || b.delay || z();
          clearInterval(this.interval);
          this.interval = setInterval(z, 30);
          return d
        };
        this.remove = function(a) {
          v += .07;
          Date.now();
          "object" === typeof a && (a = a.join(":"));
          a && (a = ":" + a + ":");
          for (var c in this.messages) {
            var d = this.messages[c];
            if (!a || -1 !== a.indexOf(":" + d.seed + ":")) {
              var e = p(d.seed);
              e && delete b[e];
              delete this.messages[d.seed];
              d.container.style.color = "#99ff88";
              s(d);
              d.getProgress && (d.span.innerHTML = "100%")
            }
          }
        };
        this.stop = function(a) {
          "string" ===
          typeof a && (a = p(a));
          if (isFinite(a)) this.update(a, null, 100);
          else {
            l.remove();
            clearInterval(l.interval);
            delete l.interval;
            if (q.oncomplete) q.oncomplete();
            w && w.style && (setTimeout(function() {
              l.div.style.opacity = 0
            }, 1), setTimeout(function() {
              l.interval || (l.stopPropagation = !1, m.style.display =
                "none", x.clearRect(0, 0, r, r))
            }, 400))
          }
        };
        this.center = function() {
          var a = e(q.container),
            b = a.width - r,
            a = (document.documentElement && document.documentElement.scrollTop ||
              document.body.scrollTop) + (a.height - r) / 2 - Math.max(70,
              l.span.offsetHeight /
              2) + r;
          w.style.left = b / 2 + "px";
          w.style.top = a - r + "px";
          w.style.width = r + "px";
          w.style.height = r + "px";
          l.span.style.top = a + "px"
        };
        c = document.createElement("style");
        document.getElementsByTagName("head")[0].appendChild(c);
        c.styleSheet ? c.styleSheet.cssText =
          ".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; font-size: 1em; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 80%; float: left }.loader span.message div:last-child { border-bottom: none; }" :
          c.innerHTML =
          ".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; font-size: 1em; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 80%; float: left }.loader span.message div:last-child { border-bottom: none; }";
        var s = function(a) {
            setTimeout(function() {
              a.container.style.opacity = 0
            }, 1);
            setTimeout(function() {
              a.container.parentNode.removeChild(a.container)
            }, 250)
          },
          z = function() {
            var a = Date.now();
            l.center();
            for (var b in l.messages) {
              var c = l.messages[b],
                d = v / .07 >> 0,
                e = parseInt(c.span.innerHTML);
              if (isFinite(e) && 100 <= e) l.remove(c.seed);
              else {
                if (0 === d % 5 && c.getProgress) {
                  if (c.timeout && c.timestamp && a - c.timestamp > c.timeout) {
                    l.remove(c.seed);
                    continue
                  }
                  e = c.getProgress();
                  if (100 <= e) {
                    l.remove(c.seed);
                    continue
                  }
                  c.span.innerHTML = (e >>
                    0) + "%"
                }
                0 === d % 10 && c.messageAnimate && (c.element.innerHTML =
                  c._message + c.messageAnimate[d / 10 % c.messageAnimate.length]
                )
              }
            }
            b || l.stop();
            if (isFinite(l.percent)) l.meterContainer.style.display = "",
              l.meter.style.width = l.percent + "%";
            else {
              //Draw loading flower
              l.meterContainer.style.display = "none";
              x.save();
              x.clearRect(0, 0, r * k, r * k);
              x.scale(k, k);
              x.translate(r / 2, r / 2);
              a = 360 - 360 / t;
              for (b = 0; b < t; b++) {
                c = b / t * 2 * Math.PI + v;
                x.save();
                x.translate(h * Math.sin(-c), h * Math.cos(-c));
                x.rotate(c);
                var c = -q.lineWidth / 2,
                  d = q.lineWidth,
                  e = q.lineHeight,
                  f = d / 2;
                x.beginPath();
                x.moveTo(c + f, 0);
                x.lineTo(c + d - f, 0);
                x.quadraticCurveTo(c + d, 0, c + d, 0 + f);
                x.lineTo(c + d, 0 + e - f);
                x.quadraticCurveTo(c + d, 0 + e, c + d - f, 0 + e);
                x.lineTo(c + f, 0 + e);
                x.quadraticCurveTo(c, 0 + e, c, 0 + e - f);
                x.lineTo(c, 0 + f);
                x.quadraticCurveTo(c, 0, c + f, 0);
                x.fillStyle = "hsla(" + b / (t - 1) * a +
                  ", 100%, 50%, 0.85)";
                x.fill();
                x.restore()
              }
              x.restore();
              v += .07
            }
          };
        if (!1 === q.display) return this;
        q.message && l.add(q.message);
        return this
      }
    }
  };
  g.ui.Loader.threads = {};
  var a = function(a, d) {
      return "\t\t-webkit-transition-property: " + a +
        ";\t\t-webkit-transition-duration: " +
        d + "ms;\t\t-moz-transition-property: " + a +
        ";\t\t-moz-transition-duration: " + d +
        "ms;\t\t-o-transition-property: " + a +
        ";\t\t-o-transition-duration: " + d +
        "ms;\t\t-ms-transition-property: " + a +
        ";\t\t-ms-transition-duration: " + d + "ms;"
    },
    e = function(a) {
      if (window.innerWidth && window.innerHeight) var d = window.innerWidth,
        b = window.innerHeight;
      else "CSS1Compat" === document.compatMode && document.documentElement &&
        document.documentElement.offsetWidth ? (d = document.documentElement
          .offsetWidth, b = document.documentElement.offsetHeight) :
        document.body && document.body.offsetWidth && (d = document.body
          .offsetWidth, b = document.body.offsetHeight);
      a && (d = a.offsetWidth);
      return {
        width: d,
        height: b
      }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.UITooltip = function(f) {
    var d = this,
      a = f.lang,
      e, g, l, b, c = !1,
      p = {},
      w = !1,
      m = void 0;
    d.add = function(a, b, c) {
      "string" === typeof a && (a = document.querySelector(a));
      h(a, "add", b, c)
    };
    d.remove = function(a) {
      h(a, "remove")
    };
    d.update = function(a, c, e) {
      a ? (a !== m || b) && d.show(a, c, e) : d.hide()
    };
    d.create = function() {
      e = document.createElement("div");
      e.setAttribute("id", "sk-tooltip");
      e.style.opacity = 0;
      e.style.filter = "alpha(opacity=0)";
      p.move = eventjs.add(document, "mousemove", t);
      p.down = eventjs.add(e,
        "mousedown", eventjs.cancel);
      document.body.appendChild(e);
      window.event && (w = !0, l = e.offsetWidth, g = e.offsetHeight,
        t(window.event));
      return e
    };
    d.destroy = function() {
      e && (eventjs.removeEvents(p), e.parentNode.removeChild(e), e =
        null)
    };
    d.show = function(f, h, p) {
      m = f = a.translate(f);
      e = e || d.create();
      e.innerHTML = f;
      e.style.width = "auto";
      e.style.display = "block";
      clearTimeout(b);
      b = void 0;
      c || (c = !0);
      e.style.opacity = 1;
      w = !0;
      l = e.offsetWidth;
      g = e.offsetHeight;
      h && (w = !1, u(h))
    };
    d.hide = function() {
      c && (e = e || d.create(), e.style.opacity =
        0, clearTimeout(b), b = setTimeout(function() {
          m = void 0;
          c = w = !1;
          e.style.display = "none"
        }, 250))
    };
    var u = function(a) {
        var b = Math.max(0, a.x + 15);
        a = Math.max(0, a.y + 0);
        var c = Math.max(0, l - (window.innerWidth - b)),
          d = Math.max(0, g - (window.innerHeight - a));
        c ? (c = l + 30, e.classList.remove("right")) : e.classList.add(
          "right");
        eventjs.isTouch && (a -= 15, b += 22);
        e.style.left = b - c + "px";
        e.style.top = a - d + "px"
      },
      t = function(a) {
        w && u(eventjs.getCoord(a))
      },
      h = function(a, b, c, e) {
        eventjs[b](a, "mouseover", function(a) {
          eventjs.stop(a);
          "function" === typeof c ?
            d.update(c(), null, e) : d.update(c, null, e)
        });
        eventjs[b](a, "mouseout", r)
      },
      r = function(a) {
        eventjs.stop(a);
        d.update("")
      };
    return d
  }
})(sketch);
(function(g) {
  function f() {
    var a = -1,
      b = this;
    b.append = function(c) {
      var d, e = b.table;
      for (d = 0; d < c.length; d++) a = a >>> 8 ^ e[(a ^ c[d]) & 255]
    };
    b.get = function() {
      return ~a
    }
  }

  function d(a, b, c) {
    if (a.slice) return a.slice(b, b + c);
    if (a.webkitSlice) return a.webkitSlice(b, b + c);
    if (a.mozSlice) return a.mozSlice(b, b + c);
    if (a.msSlice) return a.msSlice(b, b + c)
  }

  function a(a, b) {
    var c, d;
    c = new ArrayBuffer(a);
    d = new Uint8Array(c);
    b && d.set(b, 0);
    return {
      buffer: c,
      array: d,
      view: new DataView(c)
    }
  }

  function e() {}

  function q(a) {
    var c = this,
      d;
    c.size = 0;
    c.init = function(e, f) {
      var h = new Blob([a], {
        type: L
      });
      d = new b(h);
      d.init(function() {
        c.size = d.size;
        e()
      }, f)
    };
    c.readUint8Array = function(a, b, c, e) {
      d.readUint8Array(a, b, c, e)
    }
  }

  function l(b) {
    var c = this,
      d;
    c.size = 0;
    c.init = function(a) {
      for (var e = b.length;
        "=" == b.charAt(e - 1);) e--;
      d = b.indexOf(",") + 1;
      c.size = Math.floor(.75 * (e - d));
      a()
    };
    c.readUint8Array = function(c, e, f) {
      var h = a(e),
        k = 4 * Math.floor(c / 3),
        l = 4 * Math.ceil((c + e) / 3),
        l = g.atob(b.substring(k + d, l + d));
      for (c = k = c - 3 * Math.floor(k / 4); c < k + e; c++) h.array[
        c - k] = l.charCodeAt(c);
      f(h.array)
    }
  }

  function b(a) {
    this.size = 0;
    this.init = function(b) {
      this.size = a.size;
      b()
    };
    this.readUint8Array = function(b, c, e, f) {
      var h = new FileReader;
      h.onload = function(a) {
        e(new Uint8Array(a.target.result))
      };
      h.onerror = f;
      h.readAsArrayBuffer(d(a, b, c))
    }
  }

  function c() {}

  function p(a) {
    var b;
    this.init = function(a) {
      b = new Blob([], {
        type: L
      });
      a()
    };
    this.writeUint8Array = function(a, c) {
      b = new Blob([b, Q ? a : a.buffer], {
        type: L
      });
      c()
    };
    this.getData = function(c, d) {
      var e = new FileReader;
      e.onload = function(a) {
        c(a.target.result)
      };
      e.onerror = d;
      e.readAsText(b,
        a)
    }
  }

  function w(a) {
    var b = "",
      c = "";
    this.init = function(c) {
      b += "data:" + (a || "") + ";base64,";
      c()
    };
    this.writeUint8Array = function(a, d) {
      var e, f = c.length,
        h = c;
      c = "";
      for (e = 0; e < 3 * Math.floor((f + a.length) / 3) - f; e++) h +=
        String.fromCharCode(a[e]);
      for (; e < a.length; e++) c += String.fromCharCode(a[e]);
      2 < h.length ? b += g.btoa(h) : c = h;
      d()
    };
    this.getData = function(a) {
      a(b + g.btoa(c))
    }
  }

  function m(a) {
    var b;
    this.init = function(c) {
      b = new Blob([], {
        type: a
      });
      c()
    };
    this.writeUint8Array = function(c, d) {
      b = new Blob([b, Q ? c : c.buffer], {
        type: a
      });
      d()
    };
    this.getData =
      function(a) {
        a(b)
      }
  }

  function u(a, b, c, d, e, f, h, g, k, l) {
    function m(b) {
      b = b.data;
      var d = b.data;
      b.onappend && (s += d.length, c.writeUint8Array(d, function() {
        f(!1, d);
        p()
      }, l));
      b.onflush && (d ? (s += d.length, c.writeUint8Array(d, function() {
        f(!1, d);
        a.removeEventListener(T, m, !1);
        g(s)
      }, l)) : (a.removeEventListener(T, m, !1), g(s)));
      b.progress && h && h(q + b.current, e)
    }

    function p() {
      q = r * K;
      q < e ? b.readUint8Array(d + q, Math.min(K, e - q), function(b) {
        a.postMessage({
          append: !0,
          data: b
        });
        r++;
        h && h(q, e);
        f(!0, b)
      }, k) : a.postMessage({
        flush: !0
      })
    }
    var r = 0,
      q, s;
    s = 0;
    a.addEventListener(T, m, !1);
    p()
  }

  function t(a, b, c, d, e, f, h, g, k, l) {
    function m() {
      var s;
      r = p * K;
      r < e ? b.readUint8Array(d + r, Math.min(K, e - r), function(b) {
        var g = a.append(b, function() {
          h && h(d + r, e)
        });
        q += g.length;
        f(!0, b);
        c.writeUint8Array(g, function() {
          f(!1, g);
          p++;
          setTimeout(m, 1)
        }, l);
        h && h(r, e)
      }, k) : (s = a.flush()) ? (q += s.length, c.writeUint8Array(s,
        function() {
          f(!1, s);
          g(q)
        }, l)) : g(q)
    }
    var p = 0,
      r, q = 0;
    m()
  }

  function h(a, b, c) {
    var d = new XMLHttpRequest;
    d.addEventListener("load", function() {
      var a = new Blob([this.responseText], {
          type: "text/javascript"
        }),
        a = window.URL.createObjectURL(a),
        a = new Worker(a);
      b && b.call(c, a)
    }, d);
    d.open("get", a, !0);
    d.send()
  }

  function r(a, b, c, d, e, k, l, m, p) {
    function r(a, b) {
      e && !a && v.append(b)
    }

    function q(a) {
      k(a, v.get())
    }
    var s, v = new f;
    g.zip.useWebWorkers ? -1 !== zip.workerScriptsPath.indexOf(window
      .location.host) ? (s = new Worker(g.zip.workerScriptsPath + O),
      u(s, a, b, c, d, r, l, q, m, p)) : h(g.zip.workerScriptsPath +
      O,
      function(e) {
        u(e, a, b, c, d, r, l, q, m, p)
      }, this) : t(new g.zip.Inflater, a, b, c, d, r, l, q, m, p);
    return s
  }

  function k(a,
    b, c, d, e, k, l) {
    function m(a, b) {
      a && s.append(b)
    }

    function p(a) {
      d(a, s.get())
    }

    function r() {
      q.removeEventListener(T, r, !1);
      u(q, a, b, 0, a.size, m, e, p, k, l)
    }
    var q, s = new f;
    g.zip.useWebWorkers ? -1 !== zip.workerScriptsPath.indexOf(window
      .location.host) ? (q = new Worker(g.zip.workerScriptsPath + V),
      q.addEventListener(T, r, !1), q.postMessage({
        init: !0,
        level: c
      })) : h(g.zip.workerScriptsPath + V, function(a) {
      q = a;
      q.addEventListener(T, r, !1);
      q.postMessage({
        init: !0,
        level: c
      })
    }, this) : g.zip.Deflater ? t(new g.zip.Deflater, a, b, 0, a.size,
      m, e, p,
      k, l) : console.log("meh");
    return q
  }

  function v(a, b, c, d, e, h, g, k, l) {
    function m() {
      var f = p * K;
      f < d ? a.readUint8Array(c + f, Math.min(K, d - f), function(a) {
        e && r.append(a);
        g && g(f, d, a);
        b.writeUint8Array(a, function() {
          p++;
          m()
        }, l)
      }, k) : h(d, r.get())
    }
    var p = 0,
      r = new f;
    m()
  }

  function x(a) {
    var b, c = "",
      d, e =
      "\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00f8\u00a3\u00d8\u00d7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u00ae\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb___\u00a6\u00a6\u00c1\u00c2\u00c0\u00a9\u00a6\u00a6++\u00a2\u00a5++--+-+\u00e3\u00c3++--\u00a6-+\u00a4\u00f0\u00d0\u00ca\u00cb\u00c8i\u00cd\u00ce\u00cf++__\u00a6\u00cc_\u00d3\u00df\u00d4\u00d2\u00f5\u00d5\u00b5\u00fe\u00de\u00da\u00db\u00d9\u00fd\u00dd\u00af\u00b4\u00ad\u00b1_\u00be\u00b6\u00a7\u00f7\u00b8\u00b0\u00a8\u00b7\u00b9\u00b3\u00b2_ "
      .split("");
    for (b = 0; b < a.length; b++) d = a.charCodeAt(b) & 255, c = 127 <
      d ? c + e[d - 128] : c + String.fromCharCode(d);
    return c
  }

  function s(a) {
    var b, c = "";
    for (b = 0; b < a.length; b++) c += String.fromCharCode(a[b]);
    return c
  }

  function z(a, b, c, d, e) {
    a.version = b.view.getUint16(c, !0);
    a.bitFlag = b.view.getUint16(c + 2, !0);
    a.compressionMethod = b.view.getUint16(c + 4, !0);
    a.lastModDateRaw = b.view.getUint32(c + 6, !0);
    var f;
    a: {
      var h = a.lastModDateRaw,
        g = (h & 4294901760) >> 16,
        h = h & 65535;
      try {
        f = new Date(1980 + ((g & 65024) >> 9), ((g & 480) >> 5) - 1,
          g & 31, (h & 63488) >> 11, (h & 2016) >>
          5, 2 * (h & 31), 0);
        break a
      } catch (k) {}
      f = void 0
    }
    a.lastModDate = f;
    if (1 === (a.bitFlag & 1)) e(F);
    else {
      if (d || 8 != (a.bitFlag & 8)) a.crc32 = b.view.getUint32(c + 10, !
          0), a.compressedSize = b.view.getUint32(c + 14, !0), a.uncompressedSize =
        b.view.getUint32(c + 18, !0);
      4294967295 === a.compressedSize || 4294967295 === a.uncompressedSize ?
        e(E) : (a.filenameLength = b.view.getUint16(c + 22, !0), a.extraFieldLength =
          b.view.getUint16(c + 24, !0))
    }
  }

  function y(b, c) {
    function d() {}

    function e(d, f) {
      b.readUint8Array(b.size - d, d, function(b) {
        b = a(b.length, b).view;
        1347093766 !=
          b.getUint32(0) ? e(d + 1, f) : f(b)
      }, function() {
        c(D)
      })
    }
    d.prototype.getData = function(d, e, f, h) {
      function g(a, b) {
        s && s.terminate();
        s = null;
        a && a(b)
      }

      function k(b) {
        var c = a(4);
        c.view.setUint32(0, b);
        return q.crc32 == c.view.getUint32(0)
      }

      function l(a, b) {
        h && !k(b) ? m() : d.getData(function(a) {
          g(e, a)
        })
      }

      function m() {
        g(c, J)
      }

      function p() {
        g(c, G)
      }
      var q = this,
        s;
      b.readUint8Array(q.offset, 30, function(e) {
        e = a(e.length, e);
        var g;
        1347093252 != e.view.getUint32(0) ? c(C) : (z(q, e, 4, !1, c),
          g = q.offset + 30 + q.filenameLength + q.extraFieldLength,
          d.init(function() {
            0 ===
              q.compressionMethod ? v(b, d, g, q.compressedSize, h, l,
                f, m, p) : s = r(b, d, g, q.compressedSize, h, l, f, m,
                p)
          }, p))
      }, m)
    };
    return {
      getEntries: function(f) {
        22 > b.size ? c(C) : e(22, function(e) {
          var h, g;
          h = e.getUint32(16, !0);
          g = e.getUint16(8, !0);
          b.readUint8Array(h, b.size - h, function(b) {
            var e = 0,
              h = [],
              k, l, m = a(b.length, b);
            for (b = 0; b < g; b++) {
              k = new d;
              if (1347092738 != m.view.getUint32(e)) {
                c(C);
                return
              }
              z(k, m, e + 6, !0, c);
              k.commentLength = m.view.getUint16(e + 32, !0);
              k.directory = 16 == (m.view.getUint8(e + 38) & 16);
              k.offset = m.view.getUint32(e + 42, !0);
              l = s(m.array.subarray(e +
                46, e + 46 + k.filenameLength));
              k.filename = 2048 === (k.bitFlag & 2048) ?
                decodeURIComponent(escape(l)) : x(l);
              k.directory || "/" != k.filename.charAt(k.filename.length -
                1) || (k.directory = !0);
              l = s(m.array.subarray(e + 46 + k.filenameLength + k.extraFieldLength,
                e + 46 + k.filenameLength + k.extraFieldLength + k.commentLength
              ));
              k.comment = 2048 === (k.bitFlag & 2048) ?
                decodeURIComponent(escape(l)) : x(l);
              h.push(k);
              e += 46 + k.filenameLength + k.extraFieldLength + k.commentLength
            }
            f(h)
          }, function() {
            c(D)
          })
        })
      },
      close: function(a) {
        a && a()
      }
    }
  }

  function B(a) {
    var b,
      c = [];
    for (b = 0; b < a.length; b++) c.push(a.charCodeAt(b));
    return c
  }

  function A(b, c, d) {
    function e(a, b) {
      g && g.terminate();
      g = null;
      a && a(b)
    }

    function f() {
      e(c, P)
    }

    function h() {
      e(c, J)
    }
    var g, l = {},
      m = [],
      p = 0;
    return {
      add: function(r, q, s, t, u) {
        function w(c) {
          var e;
          A = u.lastModDate || new Date;
          y = a(26);
          l[r] = {
            headerArray: y.array,
            directory: u.directory,
            filename: Y,
            offset: p,
            comment: B(unescape(encodeURIComponent(u.comment || "")))
          };
          y.view.setUint32(0, 335546376);
          u.version && y.view.setUint8(0, u.version);
          d || 0 === u.level || u.directory || y.view.setUint16(4,
            2048);
          y.view.setUint16(6, (A.getHours() << 6 | A.getMinutes()) <<
            5 | A.getSeconds() / 2, !0);
          y.view.setUint16(8, (A.getFullYear() - 1980 << 4 | A.getMonth() +
            1) << 5 | A.getDate(), !0);
          y.view.setUint16(22, Y.length, !0);
          e = a(30 + Y.length);
          e.view.setUint32(0, 1347093252);
          e.array.set(y.array, 4);
          e.array.set(Y, 30);
          p += e.array.length;
          b.writeUint8Array(e.array, c, f)
        }

        function x(c, d) {
          var h = a(16);
          p += c || 0;
          h.view.setUint32(0, 1347094280);
          "undefined" != typeof d && (y.view.setUint32(10, d, !0), h.view
            .setUint32(4, d, !0));
          q && (h.view.setUint32(8, c, !0),
            y.view.setUint32(14, c, !0), h.view.setUint32(12, q.size, !
              0), y.view.setUint32(18, q.size, !0));
          b.writeUint8Array(h.array, function() {
            p += 16;
            e(s)
          }, f)
        }

        function z() {
          u = u || {};
          r = r.trim();
          u.directory && "/" != r.charAt(r.length - 1) && (r += "/");
          l.hasOwnProperty(r) ? c(N) : (Y = B(unescape(
            encodeURIComponent(r))), m.push(r), w(function() {
            q ? d || 0 === u.level ? v(q, b, 0, q.size, !0, x, t, h,
              f) : g = k(q, b, u.level, x, t, h, f) : x()
          }, f))
        }
        var y, Y, A;
        q ? q.init(z, h) : z()
      },
      close: function(c) {
        var d, h = 0,
          g = 0,
          k, r;
        for (k = 0; k < m.length; k++) r = l[m[k]], h += 46 + r.filename
          .length +
          r.comment.length;
        d = a(h + 22);
        for (k = 0; k < m.length; k++) r = l[m[k]], d.view.setUint32(g,
            1347092738), d.view.setUint16(g + 4, 5120), d.array.set(r.headerArray,
            g + 6), d.view.setUint16(g + 32, r.comment.length, !0), r.directory &&
          d.view.setUint8(g + 38, 16), d.view.setUint32(g + 42, r.offset, !
            0), d.array.set(r.filename, g + 46), d.array.set(r.comment,
            g + 46 + r.filename.length), g += 46 + r.filename.length + r
          .comment.length;
        d.view.setUint32(g, 1347093766);
        d.view.setUint16(g + 8, m.length, !0);
        d.view.setUint16(g + 10, m.length, !0);
        d.view.setUint32(g + 12,
          h, !0);
        d.view.setUint32(g + 16, p, !0);
        b.writeUint8Array(d.array, function() {
          e(function() {
            b.getData(c)
          })
        }, f)
      }
    }
  }
  var C = "File format is not recognized.",
    F = "File contains encrypted entry.",
    E = "File is using Zip64 (4gb+ file size).",
    D = "Error while reading zip file.",
    P = "Error while writing zip file.",
    G = "Error while writing file data.",
    J = "Error while reading file data.",
    N = "File already exists.",
    K = 524288,
    O = "inflate.js",
    V = "deflate.js",
    L = "text/plain",
    T = "message",
    Q;
  try {
    Q = 0 === (new Blob([new DataView(new ArrayBuffer(0))])).size
  } catch (U) {}
  f.prototype.table =
    function() {
      var a, b, c, d = [];
      for (a = 0; 256 > a; a++) {
        c = a;
        for (b = 0; 8 > b; b++) c = c & 1 ? c >>> 1 ^ 3988292384 : c >>>
          1;
        d[a] = c
      }
      return d
    }();
  q.prototype = new e;
  q.prototype.constructor = q;
  l.prototype = new e;
  l.prototype.constructor = l;
  b.prototype = new e;
  b.prototype.constructor = b;
  c.prototype.getData = function(a) {
    a(this.data)
  };
  p.prototype = new c;
  p.prototype.constructor = p;
  w.prototype = new c;
  w.prototype.constructor = w;
  m.prototype = new c;
  m.prototype.constructor = m;
  g.zip = {
    Reader: e,
    Writer: c,
    BlobReader: b,
    Data64URIReader: l,
    TextReader: q,
    BlobWriter: m,
    Data64URIWriter: w,
    TextWriter: p,
    createReader: function(a, b, c) {
      a.init(function() {
        b(y(a, c))
      }, c)
    },
    createWriter: function(a, b, c, d) {
      a.init(function() {
        b(A(a, c, d))
      }, c)
    },
    workerScriptsPath: "inc/Zip/",
    useWebWorkers: !1
  }
})(this);
(function() {
  function g(a) {
    function b(e) {
      c.data ? e() : a.getData(new v, function(a) {
        c.data = a;
        d = new z(a);
        e()
      }, null, c.checkCrc32)
    }
    var c = this,
      d;
    c.size = 0;
    c.init = function(b) {
      this.size = a.uncompressedSize;
      b()
    };
    c.readUint8Array = function(a, c, e, f) {
      b(function() {
        d.readUint8Array(a, c, e, f)
      }, f)
    }
  }

  function f(a) {
    function b(a) {
      c += a.uncompressedSize || 0;
      a.children.forEach(b)
    }
    var c = 0;
    b(a);
    return c
  }

  function d(a, b, c) {
    function e() {
      h++;
      h < a.children.length ? f(a.children[h]) : b()
    }

    function f(a) {
      a.directory ? d(a, e, c) : (a.reader = new a.Reader(a.data,
        c), a.reader.init(function() {
        a.uncompressedSize = a.reader.size;
        e()
      }))
    }
    var h = 0;
    a.children.length ? f(a.children[h]) : b()
  }

  function a(a) {
    var b = a.parent.children;
    b.forEach(function(c, d) {
      c.id == a.id && b.splice(d, 1)
    })
  }

  function e(a, b, c, d, e) {
    function f(a, b, c, d, e) {
      function g() {
        var l = b.children[k];
        l ? a.add(l.getFullname(), l.reader, function() {
          h += l.uncompressedSize || 0;
          f(a, l, function() {
            k++;
            g()
          }, d, e)
        }, function(a) {
          d && d(h + a, e)
        }, {
          directory: l.directory,
          version: l.zipVersion
        }) : c()
      }
      var k = 0;
      g()
    }
    var h = 0;
    f(a, b, c, d, e)
  }

  function q(a,
    b, c, d) {
    function e(a, b) {
      a.isDirectory && a.createReader().readEntries(b);
      a.isFile && b([])
    }

    function f(a, b, c) {
      e(b, function(b) {
        function e(b) {
          function c(a) {
            f(a, b, function() {
              g++;
              h()
            })
          }
          b.isDirectory && c(a.addDirectory(b.name));
          b.isFile && b.file(function(d) {
            var e = a.addBlob(b.name, d);
            e.uncompressedSize = d.size;
            c(e)
          }, d)
        }

        function h() {
          var a = b[g];
          a ? e(a) : c()
        }
        var g = 0;
        h()
      })
    }
    b.isDirectory ? f(a, b, c) : b.file(function(d) {
      a.addBlob(b.name, d);
      c()
    }, d)
  }

  function l(a, b, c, d, e, f, h) {
    function g(a, b, c, d, e, f) {
      function l(b) {
        function c(a) {
          k +=
            b.uncompressedSize || 0;
          g(a, b, function() {
            p++;
            m()
          }, d, e, f)
        }
        b.directory ? a.getDirectory(b.name, {
          create: !0
        }, c, e) : a.getFile(b.name, {
          create: !0
        }, function(a) {
          b.getData(new zip.FileWriter(a, zip.getMimeType(b.name)),
            c,
            function(a) {
              d && d(k + a, f)
            }, h)
        }, e)
      }

      function m() {
        var a = b.children[p];
        a ? l(a) : c()
      }
      var p = 0;
      m()
    }
    var k = 0;
    b.directory ? g(a, b, c, d, e, f) : b.getData(new zip.FileWriter(
      a, zip.getMimeType(b.name)), c, d, h)
  }

  function b(a) {
    a.entries = [];
    a.root = new t(a)
  }

  function c(a, b, c, d, e) {
    function f() {
      var g = h * r;
      d && d(g, a.size);
      g < a.size ?
        a.readUint8Array(g, Math.min(r, a.size - g), function(a) {
          b.writeUint8Array(new Uint8Array(a), function() {
            h++;
            f()
          })
        }, e) : b.getData(c)
    }
    var h = 0;
    f()
  }

  function p(a, b, d, e) {
    var f = this;
    !a || a.constructor == f.Writer && f.data ? b(f.data) : (f.reader ||
      (f.reader = new f.Reader(f.data, e)), f.reader.init(function() {
        a.init(function() {
          c(f.reader, a, b, d, e)
        }, e)
      }))
  }

  function w(a, b, c, d) {
    if (a.directory) return d ? new t(a.fs, b, c, a) : new u(a.fs, b,
      c, a);
    throw "Parent entry is not a directory.";
  }

  function m() {}

  function u(a, b, c, d) {
    m.prototype.init.call(this,
      a, b, c, d);
    this.Reader = c.Reader;
    this.Writer = c.Writer;
    this.data = c.data;
    this.getData = c.getData || p
  }

  function t(a, b, c, d) {
    m.prototype.init.call(this, a, b, c, d);
    this.directory = !0
  }

  function h() {
    b(this)
  }
  var r = 524288,
    k = zip.TextWriter,
    v = zip.BlobWriter,
    x = zip.Data64URIWriter,
    s = zip.TextReader,
    z = zip.BlobReader,
    y = zip.Data64URIReader,
    B = zip.createReader,
    A = zip.createWriter;
  g.prototype = new zip.Reader;
  g.prototype.constructor = g;
  g.prototype.checkCrc32 = !1;
  m.prototype = {
    init: function(a, b, c, d) {
      if (a.root && d && d.getChildByName(b)) throw "Entry filename already exists.";
      c || (c = {});
      this.fs = a;
      this.name = b;
      this.id = a.entries.length;
      this.parent = d;
      this.children = [];
      this.zipVersion = c.zipVersion || 20;
      this.uncompressedSize = 0;
      a.entries.push(this);
      d && this.parent.children.push(this)
    },
    getFileEntry: function(a, b, c, e, h) {
      var g = this;
      d(g, function() {
        l(a, g, b, c, e, f(g), h)
      }, e)
    },
    moveTo: function(b) {
      if (b.directory) {
        if (b.isDescendantOf(this)) throw "Entry is a ancestor of target entry.";
        if (this != b) {
          if (b.getChildByName(this.name)) throw "Entry filename already exists.";
          a(this);
          this.parent = b;
          b.children.push(this)
        }
      } else throw "Target entry is not a directory.";
    },
    getFullname: function() {
      for (var a = this.name, b = this.parent; b;) a = (b.name ? b.name +
        "/" : "") + a, b = b.parent;
      return a
    },
    isDescendantOf: function(a) {
      for (var b = this.parent; b && b.id != a.id;) b = b.parent;
      return !!b
    }
  };
  m.prototype.constructor = m;
  var C;
  u.prototype = C = new m;
  C.constructor = u;
  C.getText = function(a, b, c, d) {
    this.getData(new k(d), a, b, c)
  };
  C.getBlob = function(a, b, c, d) {
    this.getData(new v(a), b, c, d)
  };
  C.getData64URI = function(a, b, c, d) {
    this.getData(new x(a), b, c, d)
  };
  t.prototype = C = new m;
  C.constructor = t;
  C.addDirectory = function(a) {
    return w(this,
      a, null, !0)
  };
  C.addText = function(a, b) {
    return w(this, a, {
      data: b,
      Reader: s,
      Writer: k
    })
  };
  C.addBlob = function(a, b) {
    return w(this, a, {
      data: b,
      Reader: z,
      Writer: v
    })
  };
  C.addData64URI = function(a, b) {
    return w(this, a, {
      data: b,
      Reader: y,
      Writer: x
    })
  };
  C.addFileEntry = function(a, b, c) {
    q(this, a, b, c)
  };
  C.addData = function(a, b) {
    return w(this, a, b)
  };
  C.importBlob = function(a, b, c) {
    this.importZip(new z(a), b, c)
  };
  C.importText = function(a, b, c) {
    this.importZip(new s(a), b, c)
  };
  C.importData64URI = function(a, b, c) {
    this.importZip(new y(a), b, c)
  };
  C.exportBlob =
    function(a, b, c) {
      this.exportZip(new v("application/zip"), a, b, c)
    };
  C.exportText = function(a, b, c) {
    this.exportZip(new k, a, b, c)
  };
  C.exportFileEntry = function(a, b, c, d) {
    this.exportZip(new zip.FileWriter(a, "application/zip"), b, c, d)
  };
  C.exportData64URI = function(a, b, c) {
    this.exportZip(new x("application/zip"), a, b, c)
  };
  C.importZip = function(a, b, c) {
    var d = this;
    B(a, function(a) {
      a.getEntries(function(a) {
        a.forEach(function(a) {
          var b = d,
            c = a.filename.split("/"),
            e = c.pop();
          c.forEach(function(a) {
            b = b.getChildByName(a) || new t(d.fs,
              a, null, b)
          });
          a.directory || w(b, e, {
            data: a,
            Reader: g
          })
        });
        b()
      })
    }, c)
  };
  C.exportZip = function(a, b, c, h) {
    var g = this;
    d(g, function() {
      A(a, function(a) {
        e(a, g, function() {
          a.close(b)
        }, c, f(g))
      }, h)
    }, h)
  };
  C.getChildByName = function(a) {
    var b, c;
    for (b = 0; b < this.children.length; b++)
      if (c = this.children[b], c.name == a) return c
  };
  h.prototype = {
    remove: function(b) {
      a(b);
      this.entries[b.id] = null
    },
    find: function(a) {
      var b = a.split("/"),
        c = this.root;
      for (a = 0; c && a < b.length; a++) c = c.getChildByName(b[a]);
      return c
    },
    getById: function(a) {
      return this.entries[a]
    },
    importBlob: function(a, c, d) {
      b(this);
      this.root.importBlob(a, c, d)
    },
    importText: function(a, c, d) {
      b(this);
      this.root.importText(a, c, d)
    },
    importData64URI: function(a, c, d) {
      b(this);
      this.root.importData64URI(a, c, d)
    },
    exportBlob: function(a, b, c) {
      this.root.exportBlob(a, b, c)
    },
    exportText: function(a, b, c) {
      this.root.exportText(a, b, c)
    },
    exportFileEntry: function(a, b, c, d) {
      this.root.exportFileEntry(a, b, c, d)
    },
    exportData64URI: function(a, b, c) {
      this.root.exportData64URI(a, b, c)
    }
  };
  zip.fs = {
    FS: h,
    ZipDirectoryEntry: t,
    ZipFileEntry: u
  };
  zip.getMimeType =
    function() {
      return "application/octet-stream"
    }
})();
(function(g) {
  function f() {
    function a(c, d, e, l, p, q, s, v, u, x, w) {
      var z, y, ca, Y, A, Na, X, B, ba, $;
      X = 0;
      ca = e;
      do f[c[d + X]]++, X++, ca--; while (0 !== ca);
      if (f[0] == e) return s[0] = -1, v[0] = 0, b;
      Na = v[0];
      for (Y = 1; Y <= C && 0 === f[Y]; Y++);
      A = Y;
      Na < Y && (Na = Y);
      for (ca = C; 0 !== ca && 0 === f[ca]; ca--);
      y = ca;
      Na > ca && (Na = ca);
      v[0] = Na;
      for (v = 1 << Y; Y < ca; Y++, v <<= 1)
        if (0 > (v -= f[Y])) return m;
      if (0 > (v -= f[ca])) return m;
      f[ca] += v;
      k[1] = Y = 0;
      X = 1;
      for (B = 2; 0 !== --ca;) k[B] = Y += f[X], B++, X++;
      X = ca = 0;
      do 0 !== (Y = c[d + X]) && (w[k[Y]++] = ca), X++; while (++ca <
        e);
      e = k[y];
      X = k[0] = ca = 0;
      d = -1;
      ba = -Na;
      for ($ = B = g[0] = 0; A <= y; A++)
        for (c = f[A]; 0 !== c--;) {
          for (; A > ba + Na;) {
            d++;
            ba += Na;
            $ = y - ba;
            $ = $ > Na ? Na : $;
            if ((z = 1 << (Y = A - ba)) > c + 1 && (z -= c + 1, B = A, Y <
                $))
              for (; ++Y < $ && !((z <<= 1) <= f[++B]);) z -= f[B];
            $ = 1 << Y;
            if (x[0] + $ > r) return m;
            g[d] = B = x[0];
            x[0] += $;
            0 !== d ? (k[d] = ca, h[0] = Y, h[1] = Na, Y = ca >>> ba -
                Na, h[2] = B - g[d - 1] - Y, u.set(h, 3 * (g[d - 1] + Y))) :
              s[0] = B
          }
          h[1] = A - ba;
          X >= e ? h[0] = 192 : w[X] < l ? (h[0] = 256 > w[X] ? 0 : 96,
            h[2] = w[X++]) : (h[0] = q[w[X] - l] + 16 + 64, h[2] = p[w[
            X++] - l]);
          z = 1 << A - ba;
          for (Y = ca >>> ba; Y < $; Y += z) u.set(h, 3 * (B + Y));
          for (Y = 1 << A - 1; 0 !== (ca & Y); Y >>>= 1) ca ^=
            Y;
          ca ^= Y;
          for (Y = (1 << ba) - 1;
            (ca & Y) != k[d];) d--, ba -= Na, Y = (1 << ba) - 1
        }
      return 0 !== v && 1 != y ? t : b
    }

    function c(a) {
      var b;
      d || (d = [], e = [], f = new Int32Array(C + 1), h = [], g =
        new Int32Array(C), k = new Int32Array(C + 1));
      e.length < a && (e = []);
      for (b = 0; b < a; b++) e[b] = 0;
      for (b = 0; b < C + 1; b++) f[b] = 0;
      for (b = 0; 3 > b; b++) h[b] = 0;
      g.set(f.subarray(0, C), 0);
      k.set(f.subarray(0, C + 1), 0)
    }
    var d, e, f, h, g, k;
    this.inflate_trees_bits = function(b, f, h, g, k) {
      c(19);
      d[0] = 0;
      b = a(b, 0, 19, 19, null, null, h, f, g, d, e);
      if (b == m) k.msg = "oversubscribed dynamic bit lengths tree";
      else if (b ==
        t || 0 === f[0]) k.msg = "incomplete dynamic bit lengths tree",
        b = m;
      return b
    };
    this.inflate_trees_dynamic = function(f, h, g, k, l, p, r, q, s) {
      c(288);
      d[0] = 0;
      p = a(g, 0, f, 257, z, y, p, k, q, d, e);
      if (p != b || 0 === k[0]) return p == m ? s.msg =
        "oversubscribed literal/length tree" : p != u && (s.msg =
          "incomplete literal/length tree", p = m), p;
      c(288);
      p = a(g, f, h, 0, B, A, r, l, q, d, e);
      return p != b || 0 === l[0] && 257 < f ? (p == m ? s.msg =
        "oversubscribed distance tree" : p == t ? (s.msg =
          "incomplete distance tree", p = m) : p != u && (s.msg =
          "empty distance tree with lengths", p = m), p) : b
    }
  }

  function d() {
    var a, d = 0,
      e, f = 0,
      g = 0,
      k = 0,
      l = 0,
      p = 0,
      r = 0,
      q = 0,
      s, t = 0,
      v, u = 0;
    this.init = function(b, c, d, f, h, g) {
      a = F;
      r = b;
      q = c;
      s = d;
      t = f;
      v = h;
      u = g;
      e = null
    };
    this.proc = function(x, z, y) {
      var Y, ca, A = 0,
        X = 0,
        B = 0,
        ba, $, ia, B = z.next_in_index;
      ba = z.avail_in;
      A = x.bitb;
      X = x.bitk;
      $ = x.write;
      for (ia = $ < x.read ? x.read - $ - 1 : x.end - $;;) switch (a) {
        case F:
          if (258 <= ia && 10 <= ba) {
            x.bitb = A;
            x.bitk = X;
            z.avail_in = ba;
            z.total_in += B - z.next_in_index;
            z.next_in_index = B;
            x.write = $;
            a: {
              y = s;
              A = t;
              X = v;
              B = u;
              ba = x;
              $ = z;
              var C = void 0,
                pa = void 0,
                T = void 0,
                Q = ca = Y = ia = void 0,
                U = void 0,
                L = void 0,
                R = void 0,
                da = void 0,
                Xa = void 0,
                ka = void 0,
                ha = C = C = void 0,
                Q = $.next_in_index,
                U = $.avail_in;
              Y = ba.bitb;
              ca = ba.bitk;
              L = ba.write;
              R = L < ba.read ? ba.read - L - 1 : ba.end - L;
              da = h[r];
              Xa = h[q];
              do {
                for (; 20 > ca;) U--, Y |= ($.read_byte(Q++) & 255) <<
                  ca, ca += 8;
                C = Y & da;
                pa = y;
                T = A;
                ha = 3 * (T + C);
                if (0 === (ia = pa[ha])) Y >>= pa[ha + 1], ca -= pa[ha +
                  1], ba.window[L++] = pa[ha + 2], R--;
                else {
                  do {
                    Y >>= pa[ha + 1];
                    ca -= pa[ha + 1];
                    if (0 !== (ia & 16)) {
                      ia &= 15;
                      ka = pa[ha + 2] + (Y & h[ia]);
                      Y >>= ia;
                      for (ca -= ia; 15 > ca;) U--, Y |= ($.read_byte(Q++) &
                        255) << ca, ca += 8;
                      C = Y & Xa;
                      pa = X;
                      T = B;
                      ha = 3 * (T + C);
                      ia = pa[ha];
                      do
                        if (Y >>= pa[ha + 1], ca -= pa[ha + 1], 0 !== (ia &
                            16)) {
                          for (ia &= 15; ca < ia;) U--, Y |= ($.read_byte(Q++) &
                            255) << ca, ca += 8;
                          C = pa[ha + 2] + (Y & h[ia]);
                          Y >>= ia;
                          ca -= ia;
                          R -= ka;
                          if (L >= C) C = L - C, 0 < L - C && 2 > L - C ? (ba
                            .window[L++] = ba.window[C++], ba.window[L++] =
                            ba.window[C++]) : (ba.window.set(ba.window.subarray(
                            C, C + 2), L), L += 2, C += 2), ka -= 2;
                          else {
                            C = L - C;
                            do C += ba.end; while (0 > C);
                            ia = ba.end - C;
                            if (ka > ia) {
                              ka -= ia;
                              if (0 < L - C && ia > L - C) {
                                do ba.window[L++] = ba.window[C++]; while (0 !==
                                  --ia)
                              } else ba.window.set(ba.window.subarray(C, C + ia),
                                L), L += ia;
                              C = 0
                            }
                          }
                          if (0 < L - C && ka > L - C) {
                            do ba.window[L++] =
                              ba.window[C++]; while (0 !== --ka)
                          } else ba.window.set(ba.window.subarray(C, C + ka),
                            L), L += ka;
                          break
                        } else if (0 === (ia & 64)) C += pa[ha + 2], C += Y &
                        h[ia], ha = 3 * (T + C), ia = pa[ha];
                      else {
                        $.msg = "invalid distance code";
                        ka = $.avail_in - U;
                        ka = ca >> 3 < ka ? ca >> 3 : ka;
                        U += ka;
                        Q -= ka;
                        ca -= ka << 3;
                        ba.bitb = Y;
                        ba.bitk = ca;
                        $.avail_in = U;
                        $.total_in += Q - $.next_in_index;
                        $.next_in_index = Q;
                        ba.write = L;
                        y = m;
                        break a
                      }
                      while (1);
                      break
                    }
                    if (0 === (ia & 64)) {
                      if (C += pa[ha + 2], C += Y & h[ia], ha = 3 * (T + C),
                        0 === (ia = pa[ha])) {
                        Y >>= pa[ha + 1];
                        ca -= pa[ha + 1];
                        ba.window[L++] = pa[ha + 2];
                        R--;
                        break
                      }
                    } else {
                      0 !==
                        (ia & 32) ? (ka = $.avail_in - U, ka = ca >> 3 < ka ?
                          ca >> 3 : ka, U += ka, Q -= ka, ca -= ka << 3, ba.bitb =
                          Y, ba.bitk = ca, $.avail_in = U, $.total_in += Q -
                          $.next_in_index, $.next_in_index = Q, ba.write = L,
                          y = c) : ($.msg = "invalid literal/length code", ka =
                          $.avail_in - U, ka = ca >> 3 < ka ? ca >> 3 : ka, U +=
                          ka, Q -= ka, ca -= ka << 3, ba.bitb = Y, ba.bitk =
                          ca, $.avail_in = U, $.total_in += Q - $.next_in_index,
                          $.next_in_index = Q, ba.write = L, y = m);
                      break a
                    }
                  } while (1)
                }
              } while (258 <= R && 10 <= U);
              ka = $.avail_in - U;
              ka = ca >> 3 < ka ? ca >> 3 : ka;
              U += ka;
              Q -= ka;
              ca -= ka << 3;
              ba.bitb = Y;
              ba.bitk = ca;
              $.avail_in = U;
              $.total_in +=
                Q - $.next_in_index;
              $.next_in_index = Q;
              ba.write = L;
              y = b
            }
            B = z.next_in_index;
            ba = z.avail_in;
            A = x.bitb;
            X = x.bitk;
            $ = x.write;
            ia = $ < x.read ? x.read - $ - 1 : x.end - $;
            if (y != b) {
              a = y == c ? K : V;
              break
            }
          }
          g = r;
          e = s;
          f = t;
          a = E;
        case E:
          for (Y = g; X < Y;) {
            if (0 !== ba) y = b;
            else return x.bitb = A, x.bitk = X, z.avail_in = ba, z.total_in +=
              B - z.next_in_index, z.next_in_index = B, x.write = $, x.inflate_flush(
                z, y);
            ba--;
            A |= (z.read_byte(B++) & 255) << X;
            X += 8
          }
          Y = 3 * (f + (A & h[Y]));
          A >>>= e[Y + 1];
          X -= e[Y + 1];
          ca = e[Y];
          if (0 === ca) {
            k = e[Y + 2];
            a = N;
            break
          }
          if (0 !== (ca & 16)) {
            l = ca & 15;
            d = e[Y + 2];
            a = D;
            break
          }
          if (0 ===
            (ca & 64)) {
            g = ca;
            f = Y / 3 + e[Y + 2];
            break
          }
          if (0 !== (ca & 32)) {
            a = K;
            break
          }
          a = V;
          z.msg = "invalid literal/length code";
          y = m;
          x.bitb = A;
          x.bitk = X;
          z.avail_in = ba;
          z.total_in += B - z.next_in_index;
          z.next_in_index = B;
          x.write = $;
          return x.inflate_flush(z, y);
        case D:
          for (Y = l; X < Y;) {
            if (0 !== ba) y = b;
            else return x.bitb = A, x.bitk = X, z.avail_in = ba, z.total_in +=
              B - z.next_in_index, z.next_in_index = B, x.write = $, x.inflate_flush(
                z, y);
            ba--;
            A |= (z.read_byte(B++) & 255) << X;
            X += 8
          }
          d += A & h[Y];
          A >>= Y;
          X -= Y;
          g = q;
          e = v;
          f = u;
          a = P;
        case P:
          for (Y = g; X < Y;) {
            if (0 !== ba) y = b;
            else return x.bitb =
              A, x.bitk = X, z.avail_in = ba, z.total_in += B - z.next_in_index,
              z.next_in_index = B, x.write = $, x.inflate_flush(z, y);
            ba--;
            A |= (z.read_byte(B++) & 255) << X;
            X += 8
          }
          Y = 3 * (f + (A & h[Y]));
          A >>= e[Y + 1];
          X -= e[Y + 1];
          ca = e[Y];
          if (0 !== (ca & 16)) {
            l = ca & 15;
            p = e[Y + 2];
            a = G;
            break
          }
          if (0 === (ca & 64)) {
            g = ca;
            f = Y / 3 + e[Y + 2];
            break
          }
          a = V;
          z.msg = "invalid distance code";
          y = m;
          x.bitb = A;
          x.bitk = X;
          z.avail_in = ba;
          z.total_in += B - z.next_in_index;
          z.next_in_index = B;
          x.write = $;
          return x.inflate_flush(z, y);
        case G:
          for (Y = l; X < Y;) {
            if (0 !== ba) y = b;
            else return x.bitb = A, x.bitk = X, z.avail_in =
              ba, z.total_in += B - z.next_in_index, z.next_in_index =
              B, x.write = $, x.inflate_flush(z, y);
            ba--;
            A |= (z.read_byte(B++) & 255) << X;
            X += 8
          }
          p += A & h[Y];
          A >>= Y;
          X -= Y;
          a = J;
        case J:
          for (Y = $ - p; 0 > Y;) Y += x.end;
          for (; 0 !== d;) {
            if (0 === ia && ($ == x.end && 0 !== x.read && ($ = 0, ia =
                $ < x.read ? x.read - $ - 1 : x.end - $), 0 === ia && (x
                .write = $, y = x.inflate_flush(z, y), $ = x.write, ia =
                $ < x.read ? x.read - $ - 1 : x.end - $, $ == x.end && 0 !==
                x.read && ($ = 0, ia = $ < x.read ? x.read - $ - 1 : x.end -
                  $), 0 === ia))) return x.bitb = A, x.bitk = X, z.avail_in =
              ba, z.total_in += B - z.next_in_index, z.next_in_index =
              B, x.write =
              $, x.inflate_flush(z, y);
            x.window[$++] = x.window[Y++];
            ia--;
            Y == x.end && (Y = 0);
            d--
          }
          a = F;
          break;
        case N:
          if (0 === ia && ($ == x.end && 0 !== x.read && ($ = 0, ia =
              $ < x.read ? x.read - $ - 1 : x.end - $), 0 === ia && (x.write =
              $, y = x.inflate_flush(z, y), $ = x.write, ia = $ < x.read ?
              x.read - $ - 1 : x.end - $, $ == x.end && 0 !== x.read &&
              ($ = 0, ia = $ < x.read ? x.read - $ - 1 : x.end - $), 0 ===
              ia))) return x.bitb = A, x.bitk = X, z.avail_in = ba, z.total_in +=
            B - z.next_in_index, z.next_in_index = B, x.write = $, x.inflate_flush(
              z, y);
          y = b;
          x.window[$++] = k;
          ia--;
          a = F;
          break;
        case K:
          7 < X && (X -= 8, ba++, B--);
          x.write =
            $;
          y = x.inflate_flush(z, y);
          $ = x.write;
          if (x.read != x.write) return x.bitb = A, x.bitk = X, z.avail_in =
            ba, z.total_in += B - z.next_in_index, z.next_in_index = B,
            x.write = $, x.inflate_flush(z, y);
          a = O;
        case O:
          return y = c, x.bitb = A, x.bitk = X, z.avail_in = ba, z.total_in +=
            B - z.next_in_index, z.next_in_index = B, x.write = $, x.inflate_flush(
              z, y);
        case V:
          return y = m, x.bitb = A, x.bitk = X, z.avail_in = ba, z.total_in +=
            B - z.next_in_index, z.next_in_index = B, x.write = $, x.inflate_flush(
              z, y);
        default:
          return y = w, x.bitb = A, x.bitk = X, z.avail_in = ba, z.total_in +=
            B - z.next_in_index,
            z.next_in_index = B, x.write = $, x.inflate_flush(z, y)
      }
    };
    this.free = function() {}
  }

  function a(a, e) {
    var g = this,
      k = T,
      l = 0,
      p = 0,
      q = 0,
      s, v = [0],
      u = [0],
      x = new d,
      z = 0,
      Y = new Int32Array(3 * r),
      ca = new f;
    g.bitk = 0;
    g.bitb = 0;
    g.window = new Uint8Array(e);
    g.end = e;
    g.read = 0;
    g.write = 0;
    g.reset = function(a, b) {
      b && (b[0] = 0);
      k == ea && x.free(a);
      k = T;
      g.bitk = 0;
      g.bitb = 0;
      g.read = g.write = 0
    };
    g.reset(a, null);
    g.inflate_flush = function(a, c) {
      var d, e, f;
      e = a.next_out_index;
      f = g.read;
      d = (f <= g.write ? g.write : g.end) - f;
      d > a.avail_out && (d = a.avail_out);
      0 !== d && c == t && (c = b);
      a.avail_out -= d;
      a.total_out += d;
      a.next_out.set(g.window.subarray(f, f + d), e);
      e += d;
      f += d;
      f == g.end && (f = 0, g.write == g.end && (g.write = 0), d = g.write -
        f, d > a.avail_out && (d = a.avail_out), 0 !== d && c == t &&
        (c = b), a.avail_out -= d, a.total_out += d, a.next_out.set(g
          .window.subarray(f, f + d), e), e += d, f += d);
      a.next_out_index = e;
      g.read = f;
      return c
    };
    g.proc = function(a, d) {
      var e, r, t, y, A, X, ba;
      y = a.next_in_index;
      A = a.avail_in;
      r = g.bitb;
      t = g.bitk;
      X = g.write;
      for (ba = X < g.read ? g.read - X - 1 : g.end - X;;) switch (k) {
        case T:
          for (; 3 > t;) {
            if (0 !== A) d = b;
            else return g.bitb =
              r, g.bitk = t, a.avail_in = A, a.total_in += y - a.next_in_index,
              a.next_in_index = y, g.write = X, g.inflate_flush(a, d);
            A--;
            r |= (a.read_byte(y++) & 255) << t;
            t += 8
          }
          e = r & 7;
          z = e & 1;
          switch (e >>> 1) {
            case 0:
              r >>>= 3;
              t -= 3;
              e = t & 7;
              r >>>= e;
              t -= e;
              k = Q;
              break;
            case 1:
              e = [];
              var B = [],
                $ = [
                  []
                ],
                ia = [
                  []
                ];
              f.inflate_trees_fixed(e, B, $, ia);
              x.init(e[0], B[0], $[0], 0, ia[0], 0);
              r >>>= 3;
              t -= 3;
              k = ea;
              break;
            case 2:
              r >>>= 3;
              t -= 3;
              k = da;
              break;
            case 3:
              return r >>>= 3, t -= 3, k = W, a.msg =
                "invalid block type", d = m, g.bitb = r, g.bitk = t, a.avail_in =
                A, a.total_in += y - a.next_in_index, a.next_in_index =
                y, g.write = X, g.inflate_flush(a, d)
          }
          break;
        case Q:
          for (; 32 > t;) {
            if (0 !== A) d = b;
            else return g.bitb = r, g.bitk = t, a.avail_in = A, a.total_in +=
              y - a.next_in_index, a.next_in_index = y, g.write = X, g.inflate_flush(
                a, d);
            A--;
            r |= (a.read_byte(y++) & 255) << t;
            t += 8
          }
          if ((~r >>> 16 & 65535) != (r & 65535)) return k = W, a.msg =
            "invalid stored block lengths", d = m, g.bitb = r, g.bitk =
            t, a.avail_in = A, a.total_in += y - a.next_in_index, a.next_in_index =
            y, g.write = X, g.inflate_flush(a, d);
          l = r & 65535;
          r = t = 0;
          k = 0 !== l ? U : 0 !== z ? Z : T;
          break;
        case U:
          if (0 === A || 0 === ba && (X == g.end &&
              0 !== g.read && (X = 0, ba = X < g.read ? g.read - X - 1 :
                g.end - X), 0 === ba && (g.write = X, d = g.inflate_flush(
                  a, d), X = g.write, ba = X < g.read ? g.read - X - 1 : g
                .end - X, X == g.end && 0 !== g.read && (X = 0, ba = X <
                  g.read ? g.read - X - 1 : g.end - X), 0 === ba))) return
          g.bitb = r, g.bitk = t, a.avail_in = A, a.total_in += y -
            a.next_in_index, a.next_in_index = y, g.write = X, g.inflate_flush(
              a, d);
          d = b;
          e = l;
          e > A && (e = A);
          e > ba && (e = ba);
          g.window.set(a.read_buf(y, e), X);
          y += e;
          A -= e;
          X += e;
          ba -= e;
          if (0 !== (l -= e)) break;
          k = 0 !== z ? Z : T;
          break;
        case da:
          for (; 14 > t;) {
            if (0 !== A) d = b;
            else return g.bitb = r, g.bitk =
              t, a.avail_in = A, a.total_in += y - a.next_in_index, a.next_in_index =
              y, g.write = X, g.inflate_flush(a, d);
            A--;
            r |= (a.read_byte(y++) & 255) << t;
            t += 8
          }
          p = e = r & 16383;
          if (29 < (e & 31) || 29 < (e >> 5 & 31)) return k = W, a.msg =
            "too many length or distance symbols", d = m, g.bitb = r,
            g.bitk = t, a.avail_in = A, a.total_in += y - a.next_in_index,
            a.next_in_index = y, g.write = X, g.inflate_flush(a, d);
          e = 258 + (e & 31) + (e >> 5 & 31);
          if (!s || s.length < e) s = [];
          else
            for (ba = 0; ba < e; ba++) s[ba] = 0;
          r >>>= 14;
          t -= 14;
          q = 0;
          k = aa;
        case aa:
          for (; q < 4 + (p >>> 10);) {
            for (; 3 > t;) {
              if (0 !== A) d = b;
              else return g.bitb =
                r, g.bitk = t, a.avail_in = A, a.total_in += y - a.next_in_index,
                a.next_in_index = y, g.write = X, g.inflate_flush(a, d);
              A--;
              r |= (a.read_byte(y++) & 255) << t;
              t += 8
            }
            s[L[q++]] = r & 7;
            r >>>= 3;
            t -= 3
          }
          for (; 19 > q;) s[L[q++]] = 0;
          v[0] = 7;
          e = ca.inflate_trees_bits(s, v, u, Y, a);
          if (e != b) return d = e, d == m && (s = null, k = W), g.bitb =
            r, g.bitk = t, a.avail_in = A, a.total_in += y - a.next_in_index,
            a.next_in_index = y, g.write = X, g.inflate_flush(a, d);
          q = 0;
          k = R;
        case R:
          for (;;) {
            e = p;
            if (!(q < 258 + (e & 31) + (e >> 5 & 31))) break;
            for (e = v[0]; t < e;) {
              if (0 !== A) d = b;
              else return g.bitb = r, g.bitk = t,
                a.avail_in = A, a.total_in += y - a.next_in_index, a.next_in_index =
                y, g.write = X, g.inflate_flush(a, d);
              A--;
              r |= (a.read_byte(y++) & 255) << t;
              t += 8
            }
            e = Y[3 * (u[0] + (r & h[e])) + 1];
            $ = Y[3 * (u[0] + (r & h[e])) + 2];
            if (16 > $) r >>>= e, t -= e, s[q++] = $;
            else {
              ba = 18 == $ ? 7 : $ - 14;
              for (B = 18 == $ ? 11 : 3; t < e + ba;) {
                if (0 !== A) d = b;
                else return g.bitb = r, g.bitk = t, a.avail_in = A, a.total_in +=
                  y - a.next_in_index, a.next_in_index = y, g.write = X,
                  g.inflate_flush(a, d);
                A--;
                r |= (a.read_byte(y++) & 255) << t;
                t += 8
              }
              r >>>= e;
              t -= e;
              B += r & h[ba];
              r >>>= ba;
              t -= ba;
              ba = q;
              e = p;
              if (ba + B > 258 + (e & 31) + (e >> 5 & 31) ||
                16 == $ && 1 > ba) return s = null, k = W, a.msg =
                "invalid bit length repeat", d = m, g.bitb = r, g.bitk =
                t, a.avail_in = A, a.total_in += y - a.next_in_index, a.next_in_index =
                y, g.write = X, g.inflate_flush(a, d);
              $ = 16 == $ ? s[ba - 1] : 0;
              do s[ba++] = $; while (0 !== --B);
              q = ba
            }
          }
          u[0] = -1;
          ba = [];
          B = [];
          $ = [];
          ia = [];
          ba[0] = 9;
          B[0] = 6;
          e = p;
          e = ca.inflate_trees_dynamic(257 + (e & 31), 1 + (e >> 5 &
            31), s, ba, B, $, ia, Y, a);
          if (e != b) return e == m && (s = null, k = W), d = e, g.bitb =
            r, g.bitk = t, a.avail_in = A, a.total_in += y - a.next_in_index,
            a.next_in_index = y, g.write = X, g.inflate_flush(a, d);
          x.init(ba[0],
            B[0], Y, $[0], Y, ia[0]);
          k = ea;
        case ea:
          g.bitb = r;
          g.bitk = t;
          a.avail_in = A;
          a.total_in += y - a.next_in_index;
          a.next_in_index = y;
          g.write = X;
          if ((d = x.proc(g, a, d)) != c) return g.inflate_flush(a, d);
          d = b;
          x.free(a);
          y = a.next_in_index;
          A = a.avail_in;
          r = g.bitb;
          t = g.bitk;
          X = g.write;
          ba = X < g.read ? g.read - X - 1 : g.end - X;
          if (0 === z) {
            k = T;
            break
          }
          k = Z;
        case Z:
          g.write = X;
          d = g.inflate_flush(a, d);
          X = g.write;
          if (g.read != g.write) return g.bitb = r, g.bitk = t, a.avail_in =
            A, a.total_in += y - a.next_in_index, a.next_in_index = y,
            g.write = X, g.inflate_flush(a, d);
          k = ga;
        case ga:
          return d =
            c, g.bitb = r, g.bitk = t, a.avail_in = A, a.total_in += y -
            a.next_in_index, a.next_in_index = y, g.write = X, g.inflate_flush(
              a, d);
        case W:
          return d = m, g.bitb = r, g.bitk = t, a.avail_in = A, a.total_in +=
            y - a.next_in_index, a.next_in_index = y, g.write = X, g.inflate_flush(
              a, d);
        default:
          return d = w, g.bitb = r, g.bitk = t, a.avail_in = A, a.total_in +=
            y - a.next_in_index, a.next_in_index = y, g.write = X, g.inflate_flush(
              a, d)
      }
    };
    g.free = function(a) {
      g.reset(a, null);
      Y = g.window = null
    };
    g.set_dictionary = function(a, b, c) {
      g.window.set(a.subarray(b, b + c), 0);
      g.read = g.write =
        c
    };
    g.sync_point = function() {
      return k == Q ? 1 : 0
    }
  }

  function e() {
    function d(a) {
      if (!a || !a.istate) return w;
      a.total_in = a.total_out = 0;
      a.msg = null;
      a.istate.mode = ca;
      a.istate.blocks.reset(a, null);
      return b
    }
    var e = this;
    e.mode = 0;
    e.method = 0;
    e.was = [0];
    e.need = 0;
    e.marker = 0;
    e.wbits = 0;
    e.inflateEnd = function(a) {
      e.blocks && e.blocks.free(a);
      e.blocks = null;
      return b
    };
    e.inflateInit = function(c, f) {
      c.msg = null;
      e.blocks = null;
      if (8 > f || 15 < f) return e.inflateEnd(c), w;
      e.wbits = f;
      c.istate.blocks = new a(c, 1 << f);
      d(c);
      return b
    };
    e.inflate = function(a,
      d) {
      var e, f;
      if (!a || !a.istate || !a.next_in) return w;
      d = d == v ? t : b;
      for (e = t;;) switch (a.istate.mode) {
        case ja:
          if (0 === a.avail_in) return e;
          e = d;
          a.avail_in--;
          a.total_in++;
          if (((a.istate.method = a.read_byte(a.next_in_index++)) & 15) !=
            ua) {
            a.istate.mode = $;
            a.msg = "unknown compression method";
            a.istate.marker = 5;
            break
          }
          if ((a.istate.method >> 4) + 8 > a.istate.wbits) {
            a.istate.mode = $;
            a.msg = "invalid window size";
            a.istate.marker = 5;
            break
          }
          a.istate.mode = ta;
        case ta:
          if (0 === a.avail_in) return e;
          e = d;
          a.avail_in--;
          a.total_in++;
          f = a.read_byte(a.next_in_index++) &
            255;
          if (0 !== ((a.istate.method << 8) + f) % 31) {
            a.istate.mode = $;
            a.msg = "incorrect header check";
            a.istate.marker = 5;
            break
          }
          if (0 === (f & ma)) {
            a.istate.mode = ca;
            break
          }
          a.istate.mode = Da;
        case Da:
          if (0 === a.avail_in) return e;
          e = d;
          a.avail_in--;
          a.total_in++;
          a.istate.need = (a.read_byte(a.next_in_index++) & 255) << 24 &
            4278190080;
          a.istate.mode = va;
        case va:
          if (0 === a.avail_in) return e;
          e = d;
          a.avail_in--;
          a.total_in++;
          a.istate.need += (a.read_byte(a.next_in_index++) & 255) <<
            16 & 16711680;
          a.istate.mode = X;
        case X:
          if (0 === a.avail_in) return e;
          e = d;
          a.avail_in--;
          a.total_in++;
          a.istate.need += (a.read_byte(a.next_in_index++) & 255) << 8 &
            65280;
          a.istate.mode = oa;
        case oa:
          if (0 === a.avail_in) return e;
          a.avail_in--;
          a.total_in++;
          a.istate.need += a.read_byte(a.next_in_index++) & 255;
          a.istate.mode = ia;
          return p;
        case ia:
          return a.istate.mode = $, a.msg = "need dictionary", a.istate
            .marker = 0, w;
        case ca:
          e = a.istate.blocks.proc(a, e);
          if (e == m) {
            a.istate.mode = $;
            a.istate.marker = 0;
            break
          }
          e == b && (e = d);
          if (e != c) return e;
          a.istate.blocks.reset(a, a.istate.was);
          a.istate.mode = ba;
        case ba:
          return c;
        case $:
          return m;
        default:
          return w
      }
    };
    e.inflateSetDictionary = function(a, c, d) {
      var e = 0,
        f = d;
      if (!a || !a.istate || a.istate.mode != ia) return w;
      f >= 1 << a.istate.wbits && (f = (1 << a.istate.wbits) - 1, e =
        d - f);
      a.istate.blocks.set_dictionary(c, e, f);
      a.istate.mode = ca;
      return b
    };
    e.inflateSync = function(a) {
      var c, e, f;
      if (!a || !a.istate) return w;
      a.istate.mode != $ && (a.istate.mode = $, a.istate.marker = 0);
      if (0 === (c = a.avail_in)) return t;
      e = a.next_in_index;
      for (f = a.istate.marker; 0 !== c && 4 > f;) a.read_byte(e) ==
        Y[f] ? f++ : f = 0 !== a.read_byte(e) ? 0 : 4 - f, e++, c--;
      a.total_in +=
        e - a.next_in_index;
      a.next_in_index = e;
      a.avail_in = c;
      a.istate.marker = f;
      if (4 != f) return m;
      c = a.total_in;
      e = a.total_out;
      d(a);
      a.total_in = c;
      a.total_out = e;
      a.istate.mode = ca;
      return b
    };
    e.inflateSyncPoint = function(a) {
      return a && a.istate && a.istate.blocks ? a.istate.blocks.sync_point() :
        w
    }
  }

  function q() {}

  function l() {
    var a = new q,
      d = k,
      e = new Uint8Array(512),
      f = !1;
    a.inflateInit();
    a.next_out = e;
    this.append = function(h, g) {
      var k, l = [],
        p = 0,
        m = 0,
        r = 0,
        q;
      if (0 !== h.length) {
        a.next_in_index = 0;
        a.next_in = h;
        a.avail_in = h.length;
        do {
          a.next_out_index =
            0;
          a.avail_out = 512;
          0 !== a.avail_in || f || (a.next_in_index = 0, f = !0);
          k = a.inflate(d);
          if (f && k == t) return -1;
          if (k != b && k != c) throw "inflating: " + a.msg;
          if ((f || k == c) && a.avail_in == h.length) return -1;
          a.next_out_index && (512 == a.next_out_index ? l.push(new Uint8Array(
            e)) : l.push(new Uint8Array(e.subarray(0, a.next_out_index))));
          r += a.next_out_index;
          g && 0 < a.next_in_index && a.next_in_index != p && (g(a.next_in_index),
            p = a.next_in_index)
        } while (0 < a.avail_in || 0 === a.avail_out);
        q = new Uint8Array(r);
        l.forEach(function(a) {
          q.set(a, m);
          m += a.length
        });
        return q
      }
    };
    this.flush = function() {
      a.inflateEnd()
    }
  }
  var b = 0,
    c = 1,
    p = 2,
    w = -2,
    m = -3,
    u = -4,
    t = -5,
    h = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191,
      16383, 32767, 65535
    ],
    r = 1440,
    k = 0,
    v = 4,
    x = [96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8,
      112, 0, 8, 48, 0, 9, 192, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9,
      160, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 224, 80, 7, 6, 0, 8, 88,
      0, 8, 24, 0, 9, 144, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 208,
      81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 176, 0, 8, 8, 0, 8, 136, 0,
      8, 72, 0, 9, 240, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7,
      43, 0, 8, 116, 0, 8, 52, 0, 9, 200, 81, 7, 13, 0, 8, 100, 0, 8,
      36, 0,
      9, 168, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 232, 80, 7, 8, 0, 8,
      92, 0, 8, 28, 0, 9, 152, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9,
      216, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 184, 0, 8, 12, 0, 8,
      140, 0, 8, 76, 0, 9, 248, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8,
      163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 196, 81, 7, 11, 0, 8,
      98, 0, 8, 34, 0, 9, 164, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 228,
      80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 148, 84, 7, 67, 0, 8, 122, 0,
      8, 58, 0, 9, 212, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 180, 0, 8,
      10, 0, 8, 138, 0, 8, 74, 0, 9, 244, 80, 7, 5, 0, 8, 86, 0, 8, 22,
      192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 204, 81, 7, 15,
      0, 8, 102, 0, 8, 38, 0, 9, 172, 0, 8, 6, 0, 8, 134,
      0, 8, 70, 0, 9, 236, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 156, 84,
      7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 220, 82, 7, 27, 0, 8, 110, 0, 8,
      46, 0, 9, 188, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 252, 96, 7,
      256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8,
      49, 0, 9, 194, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 162, 0, 8, 1,
      0, 8, 129, 0, 8, 65, 0, 9, 226, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0,
      9, 146, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 210, 81, 7, 17, 0,
      8, 105, 0, 8, 41, 0, 9, 178, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9,
      242, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8,
      117, 0, 8, 53, 0, 9, 202, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9,
      170, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 234, 80,
      7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 154, 84, 7, 83, 0, 8, 125, 0, 8,
      61, 0, 9, 218, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 186, 0, 8,
      13, 0, 8, 141, 0, 8, 77, 0, 9, 250, 80, 7, 3, 0, 8, 83, 0, 8, 19,
      85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 198, 81, 7, 11,
      0, 8, 99, 0, 8, 35, 0, 9, 166, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9,
      230, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 150, 84, 7, 67, 0, 8,
      123, 0, 8, 59, 0, 9, 214, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9,
      182, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 246, 80, 7, 5, 0, 8, 87,
      0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 206,
      81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 174, 0, 8, 7, 0, 8, 135, 0,
      8, 71, 0, 9, 238, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0,
      9, 158, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 222, 82, 7, 27, 0,
      8, 111, 0, 8, 47, 0, 9, 190, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9,
      254, 96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8,
      112, 0, 8, 48, 0, 9, 193, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9,
      161, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 225, 80, 7, 6, 0, 8, 88,
      0, 8, 24, 0, 9, 145, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 209,
      81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 177, 0, 8, 8, 0, 8, 136, 0,
      8, 72, 0, 9, 241, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7,
      43, 0, 8, 116, 0, 8, 52, 0, 9, 201, 81, 7, 13, 0, 8, 100, 0, 8,
      36, 0, 9, 169, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 233, 80, 7, 8,
      0, 8, 92, 0, 8, 28, 0, 9, 153, 84, 7, 83, 0, 8,
      124, 0, 8, 60, 0, 9, 217, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9,
      185, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 249, 80, 7, 3, 0, 8, 82,
      0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 197,
      81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 165, 0, 8, 2, 0, 8, 130, 0,
      8, 66, 0, 9, 229, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 149, 84, 7,
      67, 0, 8, 122, 0, 8, 58, 0, 9, 213, 82, 7, 19, 0, 8, 106, 0, 8,
      42, 0, 9, 181, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 245, 80, 7, 5,
      0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0,
      9, 205, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 173, 0, 8, 6, 0, 8,
      134, 0, 8, 70, 0, 9, 237, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 157,
      84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 221,
      82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 189, 0, 8, 14, 0, 8, 142, 0,
      8, 78, 0, 9, 253, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82,
      7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 195, 80, 7, 10, 0, 8, 97, 0, 8,
      33, 0, 9, 163, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 227, 80, 7, 6,
      0, 8, 89, 0, 8, 25, 0, 9, 147, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0,
      9, 211, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 179, 0, 8, 9, 0, 8,
      137, 0, 8, 73, 0, 9, 243, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8,
      258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 203, 81, 7, 13, 0, 8,
      101, 0, 8, 37, 0, 9, 171, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 235,
      80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 155, 84, 7, 83, 0, 8, 125, 0,
      8, 61, 0, 9, 219, 82, 7, 23, 0, 8, 109, 0,
      8, 45, 0, 9, 187, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 251, 80, 7,
      3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51,
      0, 9, 199, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 167, 0, 8, 3, 0,
      8, 131, 0, 8, 67, 0, 9, 231, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9,
      151, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 215, 82, 7, 19, 0, 8,
      107, 0, 8, 43, 0, 9, 183, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9,
      247, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8,
      119, 0, 8, 55, 0, 9, 207, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9,
      175, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 239, 80, 7, 9, 0, 8, 95,
      0, 8, 31, 0, 9, 159, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 223,
      82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 191, 0, 8, 15,
      0, 8, 143, 0, 8, 79, 0, 9, 255
    ],
    s = [80, 5, 1, 87, 5, 257, 83, 5, 17, 91, 5, 4097, 81, 5, 5, 89, 5,
      1025, 85, 5, 65, 93, 5, 16385, 80, 5, 3, 88, 5, 513, 84, 5, 33,
      92, 5, 8193, 82, 5, 9, 90, 5, 2049, 86, 5, 129, 192, 5, 24577, 80,
      5, 2, 87, 5, 385, 83, 5, 25, 91, 5, 6145, 81, 5, 7, 89, 5, 1537,
      85, 5, 97, 93, 5, 24577, 80, 5, 4, 88, 5, 769, 84, 5, 49, 92, 5,
      12289, 82, 5, 13, 90, 5, 3073, 86, 5, 193, 192, 5, 24577
    ],
    z = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35,
      43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0
    ],
    y = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4,
      4, 4, 4, 5, 5, 5, 5, 0, 112, 112
    ],
    B = [1, 2, 3, 4, 5, 7, 9, 13, 17,
      25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537,
      2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577
    ],
    A = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9,
      9, 10, 10, 11, 11, 12, 12, 13, 13
    ],
    C = 15;
  f.inflate_trees_fixed = function(a, c, d, e) {
    a[0] = 9;
    c[0] = 5;
    d[0] = x;
    e[0] = s;
    return b
  };
  var F = 0,
    E = 1,
    D = 2,
    P = 3,
    G = 4,
    J = 5,
    N = 6,
    K = 7,
    O = 8,
    V = 9,
    L = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1,
      15
    ],
    T = 0,
    Q = 1,
    U = 2,
    da = 3,
    aa = 4,
    R = 5,
    ea = 6,
    Z = 7,
    ga = 8,
    W = 9,
    ma = 32,
    ua = 8,
    ja = 0,
    ta = 1,
    Da = 2,
    va = 3,
    X = 4,
    oa = 5,
    ia = 6,
    ca = 7,
    ba = 12,
    $ = 13,
    Y = [0, 0, 255, 255];
  q.prototype = {
    inflateInit: function(a) {
      this.istate =
        new e;
      a || (a = 15);
      return this.istate.inflateInit(this, a)
    },
    inflate: function(a) {
      return this.istate ? this.istate.inflate(this, a) : w
    },
    inflateEnd: function() {
      if (!this.istate) return w;
      var a = this.istate.inflateEnd(this);
      this.istate = null;
      return a
    },
    inflateSync: function() {
      return this.istate ? this.istate.inflateSync(this) : w
    },
    inflateSetDictionary: function(a, b) {
      return this.istate ? this.istate.inflateSetDictionary(this, a,
        b) : w
    },
    read_byte: function(a) {
      return this.next_in.subarray(a, a + 1)[0]
    },
    read_buf: function(a, b) {
      return this.next_in.subarray(a,
        a + b)
    }
  };
  var pa;
  g.zip ? g.zip.Inflater = l : (pa = new l, g.addEventListener(
    "message",
    function(a) {
      a = a.data;
      a.append && g.postMessage({
        onappend: !0,
        data: pa.append(a.data, function(a) {
          g.postMessage({
            progress: !0,
            current: a
          })
        })
      });
      a.flush && (pa.flush(), g.postMessage({
        onflush: !0
      }))
    }, !1))
})(this);
(function(g) {
  function f() {
    var a = this;
    a.build_tree = function(b) {
      var d = a.dyn_tree,
        e = a.stat_desc.static_tree,
        f = a.stat_desc.elems,
        h, g = -1,
        k;
      b.heap_len = 0;
      b.heap_max = t;
      for (h = 0; h < f; h++) 0 !== d[2 * h] ? (b.heap[++b.heap_len] =
        g = h, b.depth[h] = 0) : d[2 * h + 1] = 0;
      for (; 2 > b.heap_len;) k = b.heap[++b.heap_len] = 2 > g ? ++g :
        0, d[2 * k] = 1, b.depth[k] = 0, b.opt_len--, e && (b.static_len -=
          e[2 * k + 1]);
      a.max_code = g;
      for (h = Math.floor(b.heap_len / 2); 1 <= h; h--) b.pqdownheap(
        d, h);
      k = f;
      do h = b.heap[1], b.heap[1] = b.heap[b.heap_len--], b.pqdownheap(
          d, 1), e = b.heap[1],
        b.heap[--b.heap_max] = h, b.heap[--b.heap_max] = e, d[2 * k] =
        d[2 * h] + d[2 * e], b.depth[k] = Math.max(b.depth[h], b.depth[
          e]) + 1, d[2 * h + 1] = d[2 * e + 1] = k, b.heap[1] = k++, b.pqdownheap(
          d, 1); while (2 <= b.heap_len);
      b.heap[--b.heap_max] = b.heap[1];
      h = a.dyn_tree;
      for (var g = a.stat_desc.static_tree, l = a.stat_desc.extra_bits,
          p = a.stat_desc.extra_base, m = a.stat_desc.max_length, r, q,
          s = 0, f = 0; f <= c; f++) b.bl_count[f] = 0;
      h[2 * b.heap[b.heap_max] + 1] = 0;
      for (k = b.heap_max + 1; k < t; k++) e = b.heap[k], f = h[2 * h[
          2 * e + 1] + 1] + 1, f > m && (f = m, s++), h[2 * e + 1] = f,
        e > a.max_code ||
        (b.bl_count[f]++, r = 0, e >= p && (r = l[e - p]), q = h[2 *
          e], b.opt_len += q * (f + r), g && (b.static_len += q * (g[2 *
          e + 1] + r)));
      if (0 !== s) {
        do {
          for (f = m - 1; 0 === b.bl_count[f];) f--;
          b.bl_count[f]--;
          b.bl_count[f + 1] += 2;
          b.bl_count[m]--;
          s -= 2
        } while (0 < s);
        for (f = m; 0 !== f; f--)
          for (e = b.bl_count[f]; 0 !== e;) g = b.heap[--k], g > a.max_code ||
            (h[2 * g + 1] != f && (b.opt_len += (f - h[2 * g + 1]) * h[2 *
              g], h[2 * g + 1] = f), e--)
      }
      h = a.max_code;
      k = b.bl_count;
      b = [];
      e = 0;
      for (f = 1; f <= c; f++) b[f] = e = e + k[f - 1] << 1;
      for (k = 0; k <= h; k++)
        if (l = d[2 * k + 1], 0 !== l) {
          e = d;
          f = 2 * k;
          g = b[l]++;
          p = 0;
          do p |= g & 1, g >>>= 1, p <<=
            1; while (0 < --l);
          e[f] = p >>> 1
        }
    }
  }

  function d(a, b, c, d, e) {
    this.static_tree = a;
    this.extra_bits = b;
    this.extra_base = c;
    this.elems = d;
    this.max_length = e
  }

  function a(a, b, c, d, e) {
    this.good_length = a;
    this.max_lazy = b;
    this.nice_length = c;
    this.max_chain = d;
    this.func = e
  }

  function e(a, b, c, d) {
    var e = a[2 * b];
    a = a[2 * c];
    return e < a || e == a && d[b] <= d[c]
  }

  function q() {
    function a() {
      var b;
      for (b = 0; b < u; b++) gb[2 * b] = 0;
      for (b = 0; b < p; b++) jb[2 * b] = 0;
      for (b = 0; b < w; b++) Ha[2 * b] = 0;
      gb[2 * h] = 1;
      cb = nb = qa.opt_len = qa.static_len = 0
    }

    function b(a, c) {
      var d, e = -1,
        f, h = a[1],
        g = 0,
        l = 7,
        p = 4;
      0 === h && (l = 138, p = 3);
      a[2 * (c + 1) + 1] = 65535;
      for (d = 0; d <= c; d++) f = h, h = a[2 * (d + 1) + 1], ++g < l &&
        f == h || (g < p ? Ha[2 * f] += g : 0 !== f ? (f != e && Ha[2 *
            f]++, Ha[2 * r]++) : 10 >= g ? Ha[2 * k]++ : Ha[2 * v]++,
          g = 0, e = f, 0 === h ? (l = 138, p = 3) : f == h ? (l = 6, p =
            3) : (l = 7, p = 4))
    }

    function c(a) {
      qa.pending_buf[qa.pending++] = a
    }

    function g(a) {
      c(a & 255);
      c(a >>> 8 & 255)
    }

    function l(a, b) {
      La > x - b ? (Pa |= a << La & 65535, g(Pa), Pa = a >>> x - La,
        La += b - x) : (Pa |= a << La & 65535, La += b)
    }

    function q(a, b) {
      var c = 2 * a;
      l(b[c] & 65535, b[c + 1] & 65535)
    }

    function t(a, b) {
      var c, d = -1,
        e, f = a[1],
        h = 0,
        g = 7,
        p = 4;
      0 ===
        f && (g = 138, p = 3);
      for (c = 0; c <= b; c++)
        if (e = f, f = a[2 * (c + 1) + 1], !(++h < g && e == f)) {
          if (h < p) {
            do q(e, Ha); while (0 !== --h)
          } else 0 !== e ? (e != d && (q(e, Ha), h--), q(r, Ha), l(h -
            3, 2)) : 10 >= h ? (q(k, Ha), l(h - 3, 3)) : (q(v, Ha), l(h -
            11, 7));
          h = 0;
          d = e;
          0 === f ? (g = 138, p = 3) : e == f ? (g = 6, p = 3) : (g = 7,
            p = 4)
        }
    }

    function ba() {
      16 == La ? (g(Pa), La = Pa = 0) : 8 <= La && (c(Pa & 255), Pa >>>=
        8, La -= 8)
    }

    function fb(a, b) {
      var c, d, e;
      qa.pending_buf[qb + 2 * cb] = a >>> 8 & 255;
      qa.pending_buf[qb + 2 * cb + 1] = a & 255;
      qa.pending_buf[rb + cb] = b & 255;
      cb++;
      0 === a ? gb[2 * b]++ : (nb++, a--, gb[2 * (f._length_code[b] +
          m + 1)]++,
        jb[2 * f.d_code(a)]++);
      if (0 === (cb & 8191) && 2 < Ra) {
        c = 8 * cb;
        d = ha - Ia;
        for (e = 0; e < p; e++) c += jb[2 * e] * (5 + f.extra_dbits[e]);
        if (nb < Math.floor(cb / 2) && c >>> 3 < Math.floor(d / 2))
          return !0
      }
      return cb == kb - 1
    }

    function ub(a, b) {
      var c, d, e = 0,
        g, k;
      if (0 !== cb) {
        do c = qa.pending_buf[qb + 2 * e] << 8 & 65280 | qa.pending_buf[
            qb + 2 * e + 1] & 255, d = qa.pending_buf[rb + e] & 255, e++,
          0 === c ? q(d, a) : (g = f._length_code[d], q(g + m + 1, a),
            k = f.extra_lbits[g], 0 !== k && (d -= f.base_length[g], l(d,
              k)), c--, g = f.d_code(c), q(g, b), k = f.extra_dbits[g], 0 !==
            k && (c -= f.base_dist[g], l(c, k))); while (e <
          cb)
      }
      q(h, a);
      Ya = a[2 * h + 1]
    }

    function O() {
      8 < La ? g(Pa) : 0 < La && c(Pa & 255);
      La = Pa = 0
    }

    function wb(a, b, c) {
      l((Da << 1) + (c ? 1 : 0), 3);
      O();
      Ya = 8;
      g(b);
      g(~b);
      qa.pending_buf.set(na.subarray(a, a + b), qa.pending);
      qa.pending += b
    }

    function Ja(c) {
      var e = 0 <= Ia ? Ia : -1,
        h = ha - Ia,
        g, k, p = 0;
      if (0 < Ra) {
        eb.build_tree(qa);
        Ma.build_tree(qa);
        b(gb, eb.max_code);
        b(jb, Ma.max_code);
        sa.build_tree(qa);
        for (p = w - 1; 3 <= p && 0 === Ha[2 * f.bl_order[p] + 1]; p--)
        ;
        qa.opt_len += 3 * (p + 1) + 14;
        g = qa.opt_len + 3 + 7 >>> 3;
        k = qa.static_len + 3 + 7 >>> 3;
        k <= g && (g = k)
      } else g = k = h + 5;
      if (h + 4 <= g && -1 != e) wb(e,
        h, c);
      else if (k == g) l((va << 1) + (c ? 1 : 0), 3), ub(d.static_ltree,
        d.static_dtree);
      else {
        l((X << 1) + (c ? 1 : 0), 3);
        e = eb.max_code + 1;
        h = Ma.max_code + 1;
        p += 1;
        l(e - 257, 5);
        l(h - 1, 5);
        l(p - 4, 4);
        for (g = 0; g < p; g++) l(Ha[2 * f.bl_order[g] + 1], 3);
        t(gb, e - 1);
        t(jb, h - 1);
        ub(gb, jb)
      }
      a();
      c && O();
      Ia = ha;
      Ea.flush_pending()
    }

    function $a() {
      var a, b, c, d;
      do {
        d = ib - fa - ha;
        if (0 === d && 0 === ha && 0 === fa) d = za;
        else if (-1 == d) d--;
        else if (ha >= za + za - ca) {
          na.set(na.subarray(za, za + za), 0);
          hb -= za;
          ha -= za;
          Ia -= za;
          c = a = Ca;
          do b = Ga[--c] & 65535, Ga[c] = b >= za ? b - za : 0; while (
            0 !== --a);
          c = a = za;
          do b = la[--c] & 65535, la[c] = b >= za ? b - za : 0; while (
            0 !== --a);
          d += za
        }
        if (0 === Ea.avail_in) break;
        a = Ea.read_buf(na, ha + fa, d);
        fa += a;
        fa >= oa && (ra = na[ha] & 255, ra = (ra << bb ^ na[ha + 1] &
          255) & Ta)
      } while (fa < ca && 0 !== Ea.avail_in)
    }

    function lb(a) {
      var b = 65535,
        c;
      for (b > Fa - 5 && (b = Fa - 5);;) {
        if (1 >= fa) {
          $a();
          if (0 === fa && a == A) return R;
          if (0 === fa) break
        }
        ha += fa;
        fa = 0;
        c = Ia + b;
        if (0 === ha || ha >= c)
          if (fa = ha - c, ha = c, Ja(!1), 0 === Ea.avail_out) return R;
        if (ha - Ia >= za - ca && (Ja(!1), 0 === Ea.avail_out)) return
        R
      }
      Ja(a == E);
      return 0 === Ea.avail_out ? a == E ? Z : R : a == E ? ga : ea
    }

    function mb(a) {
      var b =
        xa,
        c = ha,
        d, e = Ua,
        f = ha > za - ca ? ha - (za - ca) : 0,
        h = sb,
        g = ya,
        k = ha + ia,
        l = na[c + e - 1],
        p = na[c + e];
      Ua >= Sa && (b >>= 2);
      h > fa && (h = fa);
      do
        if (d = a, na[d + e] == p && na[d + e - 1] == l && na[d] == na[
            c] && na[++d] == na[c + 1]) {
          c += 2;
          for (d++; na[++c] == na[++d] && na[++c] == na[++d] && na[++c] ==
            na[++d] && na[++c] == na[++d] && na[++c] == na[++d] && na[++
              c] == na[++d] && na[++c] == na[++d] && na[++c] == na[++d] &&
            c < k;);
          d = ia - (k - c);
          c = k - ia;
          if (d > e) {
            hb = a;
            e = d;
            if (d >= h) break;
            l = na[c + e - 1];
            p = na[c + e]
          }
        }
      while ((a = la[a & g] & 65535) > f && 0 !== --b);
      return e <= fa ? e : fa
    }

    function Qa(a) {
      for (var b = 0, c, d;;) {
        if (fa <
          ca) {
          $a();
          if (fa < ca && a == A) return R;
          if (0 === fa) break
        }
        fa >= oa && (ra = (ra << bb ^ na[ha + (oa - 1)] & 255) & Ta, b =
          Ga[ra] & 65535, la[ha & ya] = Ga[ra], Ga[ra] = ha);
        Ua = Ba;
        Xa = hb;
        Ba = oa - 1;
        0 !== b && Ua < Za && (ha - b & 65535) <= za - ca && (ob != y &&
          (Ba = mb(b)), 5 >= Ba && (ob == z || Ba == oa && 4096 < ha -
            hb) && (Ba = oa - 1));
        if (Ua >= oa && Ba <= Ua) {
          d = ha + fa - oa;
          c = fb(ha - 1 - Xa, Ua - oa);
          fa -= Ua - 1;
          Ua -= 2;
          do ++ha <= d && (ra = (ra << bb ^ na[ha + (oa - 1)] & 255) &
            Ta, b = Ga[ra] & 65535, la[ha & ya] = Ga[ra], Ga[ra] = ha); while (
            0 !== --Ua);
          ka = 0;
          Ba = oa - 1;
          ha++;
          if (c && (Ja(!1), 0 === Ea.avail_out)) return R
        } else if (0 !== ka) {
          if ((c =
              fb(0, na[ha - 1] & 255)) && Ja(!1), ha++, fa--, 0 === Ea.avail_out)
            return R
        } else ka = 1, ha++, fa--
      }
      0 !== ka && (fb(0, na[ha - 1] & 255), ka = 0);
      Ja(a == E);
      return 0 === Ea.avail_out ? a == E ? Z : R : a == E ? ga : ea
    }
    var qa = this,
      Ea, Oa, Fa, Ka, za, Aa, ya, na, ib, la, Ga, ra, Ca, wa, Ta, bb,
      Ia, Ba, Xa, ka, ha, hb, fa, Ua, xa, Za, Ra, ob, Sa, sb, gb, jb,
      Ha, eb = new f,
      Ma = new f,
      sa = new f;
    qa.depth = [];
    var rb, kb, cb, qb, nb, Ya, Pa, La;
    qa.bl_count = [];
    qa.heap = [];
    gb = [];
    jb = [];
    Ha = [];
    qa.pqdownheap = function(a, b) {
      for (var c = qa.heap, d = c[b], f = b << 1; f <= qa.heap_len;) {
        f < qa.heap_len && e(a, c[f + 1], c[f],
          qa.depth) && f++;
        if (e(a, d, c[f], qa.depth)) break;
        c[b] = c[f];
        b = f;
        f <<= 1
      }
      c[b] = d
    };
    qa.deflateInit = function(b, c, e, f, h, g) {
      f || (f = ta);
      h || (h = L);
      g || (g = B);
      b.msg = null;
      c == s && (c = 6);
      if (1 > h || h > V || f != ta || 9 > e || 15 < e || 0 > c || 9 <
        c || 0 > g || g > y) return J;
      b.dstate = qa;
      Aa = e;
      za = 1 << Aa;
      ya = za - 1;
      wa = h + 7;
      Ca = 1 << wa;
      Ta = Ca - 1;
      bb = Math.floor((wa + oa - 1) / oa);
      na = new Uint8Array(2 * za);
      la = [];
      Ga = [];
      kb = 1 << h + 6;
      qa.pending_buf = new Uint8Array(4 * kb);
      Fa = 4 * kb;
      qb = Math.floor(kb / 2);
      rb = 3 * kb;
      Ra = c;
      ob = g;
      b.total_in = b.total_out = 0;
      b.msg = null;
      qa.pending = 0;
      qa.pending_out = 0;
      Oa =
        ua;
      Ka = A;
      eb.dyn_tree = gb;
      eb.stat_desc = d.static_l_desc;
      Ma.dyn_tree = jb;
      Ma.stat_desc = d.static_d_desc;
      sa.dyn_tree = Ha;
      sa.stat_desc = d.static_bl_desc;
      La = Pa = 0;
      Ya = 8;
      a();
      ib = 2 * za;
      for (b = Ga[Ca - 1] = 0; b < Ca - 1; b++) Ga[b] = 0;
      Za = da[Ra].max_lazy;
      Sa = da[Ra].good_length;
      sb = da[Ra].nice_length;
      xa = da[Ra].max_chain;
      fa = Ia = ha = 0;
      Ba = Ua = oa - 1;
      ra = ka = 0;
      return D
    };
    qa.deflateEnd = function() {
      if (Oa != ma && Oa != ua && Oa != ja) return J;
      na = la = Ga = qa.pending_buf = null;
      qa.dstate = null;
      return Oa == ua ? N : D
    };
    qa.deflateParams = function(a, b, c) {
      var d = D;
      b == s && (b = 6);
      if (0 > b || 9 < b || 0 > c || c > y) return J;
      da[Ra].func != da[b].func && 0 !== a.total_in && (d = a.deflate(
        C));
      Ra != b && (Ra = b, Za = da[Ra].max_lazy, Sa = da[Ra].good_length,
        sb = da[Ra].nice_length, xa = da[Ra].max_chain);
      ob = c;
      return d
    };
    qa.deflateSetDictionary = function(a, b, c) {
      a = c;
      var d = 0;
      if (!b || Oa != ma) return J;
      if (a < oa) return D;
      a > za - ca && (a = za - ca, d = c - a);
      na.set(b.subarray(d, d + a), 0);
      Ia = ha = a;
      ra = na[0] & 255;
      ra = (ra << bb ^ na[1] & 255) & Ta;
      for (b = 0; b <= a - oa; b++) ra = (ra << bb ^ na[b + (oa - 1)] &
        255) & Ta, la[b & ya] = Ga[ra], Ga[ra] = b;
      return D
    };
    qa.deflate = function(a,
      b) {
      var e, f, g;
      if (b > E || 0 > b) return J;
      if (!a.next_out || !a.next_in && 0 !== a.avail_in || Oa == ja &&
        b != E) return a.msg = aa[G - J], J;
      if (0 === a.avail_out) return a.msg = aa[G - K], K;
      Ea = a;
      e = Ka;
      Ka = b;
      Oa == ma && (f = ta + (Aa - 8 << 4) << 8, g = (Ra - 1 & 255) >>
        1, 3 < g && (g = 3), f |= g << 6, 0 !== ha && (f |= W), Oa =
        ua, f += 31 - f % 31, c(f >> 8 & 255), c(f & 255));
      if (0 !== qa.pending) {
        if (Ea.flush_pending(), 0 === Ea.avail_out) return Ka = -1, D
      } else if (0 === Ea.avail_in && b <= e && b != E) return Ea.msg =
        aa[G - K], K;
      if (Oa == ja && 0 !== Ea.avail_in) return a.msg = aa[G - K], K;
      if (0 !== Ea.avail_in || 0 !== fa || b !=
        A && Oa != ja) {
        e = -1;
        switch (da[Ra].func) {
          case T:
            e = lb(b);
            break;
          case Q:
            a: {
              for (e = 0;;) {
                if (fa < ca) {
                  $a();
                  if (fa < ca && b == A) {
                    e = R;
                    break a
                  }
                  if (0 === fa) break
                }
                fa >= oa && (ra = (ra << bb ^ na[ha + (oa - 1)] & 255) &
                  Ta, e = Ga[ra] & 65535, la[ha & ya] = Ga[ra], Ga[ra] =
                  ha);
                0 !== e && (ha - e & 65535) <= za - ca && ob != y && (Ba =
                  mb(e));
                if (Ba >= oa)
                  if (f = fb(ha - hb, Ba - oa), fa -= Ba, Ba <= Za && fa >=
                    oa) {
                    Ba--;
                    do ha++, ra = (ra << bb ^ na[ha + (oa - 1)] & 255) & Ta,
                      e = Ga[ra] & 65535, la[ha & ya] = Ga[ra], Ga[ra] = ha; while (
                      0 !== --Ba);
                    ha++
                  } else ha += Ba, Ba = 0, ra = na[ha] & 255, ra = (ra <<
                    bb ^ na[ha + 1] & 255) & Ta;
                else f = fb(0,
                  na[ha] & 255), fa--, ha++;
                if (f && (Ja(!1), 0 === Ea.avail_out)) {
                  e = R;
                  break a
                }
              }
              Ja(b == E);
              e = 0 === Ea.avail_out ? b == E ? Z : R : b == E ? ga : ea
            }
            break;
          case U:
            e = Qa(b)
        }
        if (e == Z || e == ga) Oa = ja;
        if (e == R || e == Z) return 0 === Ea.avail_out && (Ka = -1),
          D;
        if (e == ea) {
          if (b == C) l(va << 1, 3), q(h, d.static_ltree), ba(), 9 > 1 +
            Ya + 10 - La && (l(va << 1, 3), q(h, d.static_ltree), ba()),
            Ya = 7;
          else if (wb(0, 0, !1), b == F)
            for (e = 0; e < Ca; e++) Ga[e] = 0;
          Ea.flush_pending();
          if (0 === Ea.avail_out) return Ka = -1, D
        }
      }
      return b != E ? D : P
    }
  }

  function l() {
    this.total_out = this.avail_out = this.total_in = this.avail_in =
      this.next_out_index = this.next_in_index = 0
  }

  function b(a) {
    var b = new l,
      c = A,
      d = new Uint8Array(512);
    "undefined" == typeof a && (a = s);
    b.deflateInit(a);
    b.next_out = d;
    this.append = function(a, e) {
      var f, h = [],
        g = 0,
        k = 0,
        l = 0,
        p;
      if (a.length) {
        b.next_in_index = 0;
        b.next_in = a;
        b.avail_in = a.length;
        do {
          b.next_out_index = 0;
          b.avail_out = 512;
          f = b.deflate(c);
          if (f != D) throw "deflating: " + b.msg;
          b.next_out_index && (512 == b.next_out_index ? h.push(new Uint8Array(
            d)) : h.push(new Uint8Array(d.subarray(0, b.next_out_index))));
          l += b.next_out_index;
          e && 0 < b.next_in_index &&
            b.next_in_index != g && (e(b.next_in_index), g = b.next_in_index)
        } while (0 < b.avail_in || 0 === b.avail_out);
        p = new Uint8Array(l);
        h.forEach(function(a) {
          p.set(a, k);
          k += a.length
        });
        return p
      }
    };
    this.flush = function() {
      var a, c = [],
        e = 0,
        f = 0,
        h;
      do {
        b.next_out_index = 0;
        b.avail_out = 512;
        a = b.deflate(E);
        if (a != P && a != D) throw "deflating: " + b.msg;
        0 < 512 - b.avail_out && c.push(new Uint8Array(d.subarray(0, b
          .next_out_index)));
        f += b.next_out_index
      } while (0 < b.avail_in || 0 === b.avail_out);
      b.deflateEnd();
      h = new Uint8Array(f);
      c.forEach(function(a) {
        h.set(a,
          e);
        e += a.length
      });
      return h
    }
  }
  var c = 15,
    p = 30,
    w = 19,
    m = 256,
    u = m + 1 + 29,
    t = 2 * u + 1,
    h = 256,
    r = 16,
    k = 17,
    v = 18,
    x = 16,
    s = -1,
    z = 1,
    y = 2,
    B = 0,
    A = 0,
    C = 1,
    F = 3,
    E = 4,
    D = 0,
    P = 1,
    G = 2,
    J = -2,
    N = -3,
    K = -5,
    O = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8,
      8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10,
      10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11,
      11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
      12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13,
      13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
      13, 13, 13, 13, 13,
      13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
      14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
      14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
      14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
      14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
      15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
      15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
      15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
      15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21, 21,
      21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23,
      23, 23, 24, 24, 24, 24, 24,
      24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25,
      25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26,
      26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
      26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27,
      27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,
      27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28,
      28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,
      28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,
      28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,
      28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29,
      29, 29, 29, 29, 29, 29, 29,
      29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
      29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
      29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
      29, 29, 29, 29
    ];
  f._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11,
    11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15,
    15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17,
    17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19,
    19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20,
    20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,
    21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,
    22, 23, 23,
    23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24,
    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25,
    25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,
    25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26,
    26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
    26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27,
    27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,
    27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28
  ];
  f.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24,
    28, 32, 40, 48, 56, 64, 80, 96,
    112, 128, 160, 192, 224, 0
  ];
  f.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128,
    192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192,
    12288, 16384, 24576
  ];
  f.d_code = function(a) {
    return 256 > a ? O[a] : O[256 + (a >>> 7)]
  };
  f.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3,
    3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0
  ];
  f.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7,
    7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13
  ];
  f.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2,
    3, 7
  ];
  f.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2,
    14, 1, 15
  ];
  d.static_ltree = [12, 8, 140,
    8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8,
    92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8, 130, 8, 66, 8,
    194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210,
    8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8,
    42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58,
    8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8,
    166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182,
    8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8,
    110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190, 8, 126,
    8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225,
    8, 17, 8, 145, 8, 81, 8, 209,
    8, 49, 8, 177, 8, 113, 8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41,
    8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8,
    185, 8, 121, 8, 249, 8, 5, 8, 133, 8, 69, 8, 197, 8, 37, 8, 165,
    8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8,
    117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173, 8, 109,
    8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8,
    253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467,
    9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9,
    11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43,
    9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9,
    283, 9, 155, 9, 411, 9,
    91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123,
    9, 379, 9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9,
    327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9,
    359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9, 407, 9, 87, 9, 343,
    9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9,
    247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9, 79, 9, 335, 9, 207,
    9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9,
    495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9, 223, 9, 479,
    9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9,
    0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72,
    7, 40, 7, 104, 7,
    24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7,
    84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8,
    99, 8, 227, 8
  ];
  d.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28,
    5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17,
    5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27,
    5, 7, 5, 23, 5
  ];
  d.static_l_desc = new d(d.static_ltree, f.extra_lbits, m + 1, u, c);
  d.static_d_desc = new d(d.static_dtree, f.extra_dbits, 0, p, c);
  d.static_bl_desc = new d(null, f.extra_blbits, 0, w, 7);
  var V = 9,
    L = 8,
    T = 0,
    Q = 1,
    U = 2,
    da = [new a(0, 0, 0, 0, T), new a(4, 4, 8, 4, Q), new a(4,
        5, 16, 8, Q), new a(4, 6, 32, 32, Q), new a(4, 4, 16, 16, U),
      new a(8, 16, 32, 32, U), new a(8, 16, 128, 128, U), new a(8, 32,
        128, 256, U), new a(32, 128, 258, 1024, U), new a(32, 258, 258,
        4096, U)
    ],
    aa =
    "need dictionary;stream end;;;stream error;data error;;buffer error;;"
    .split(";"),
    R = 0,
    ea = 1,
    Z = 2,
    ga = 3,
    W = 32,
    ma = 42,
    ua = 113,
    ja = 666,
    ta = 8,
    Da = 0,
    va = 1,
    X = 2,
    oa = 3,
    ia = 258,
    ca = ia + oa + 1;
  l.prototype = {
    deflateInit: function(a, b) {
      this.dstate = new q;
      b || (b = c);
      return this.dstate.deflateInit(this, a, b)
    },
    deflate: function(a) {
      return this.dstate ? this.dstate.deflate(this,
        a) : J
    },
    deflateEnd: function() {
      if (!this.dstate) return J;
      var a = this.dstate.deflateEnd();
      this.dstate = null;
      return a
    },
    deflateParams: function(a, b) {
      return this.dstate ? this.dstate.deflateParams(this, a, b) : J
    },
    deflateSetDictionary: function(a, b) {
      return this.dstate ? this.dstate.deflateSetDictionary(this, a,
        b) : J
    },
    read_buf: function(a, b, c) {
      var d = this.avail_in;
      d > c && (d = c);
      if (0 === d) return 0;
      this.avail_in -= d;
      a.set(this.next_in.subarray(this.next_in_index, this.next_in_index +
        d), b);
      this.next_in_index += d;
      this.total_in += d;
      return d
    },
    flush_pending: function() {
      var a = this.dstate.pending;
      a > this.avail_out && (a = this.avail_out);
      0 !== a && (this.next_out.set(this.dstate.pending_buf.subarray(
            this.dstate.pending_out, this.dstate.pending_out + a), this
          .next_out_index), this.next_out_index += a, this.dstate.pending_out +=
        a, this.total_out += a, this.avail_out -= a, this.dstate.pending -=
        a, 0 === this.dstate.pending && (this.dstate.pending_out = 0)
      )
    }
  };
  var ba;
  g.zip ? g.zip.Deflater = b : (ba = new b, g.addEventListener(
    "message",
    function(a) {
      a = a.data;
      a.init && (ba = new b(a.level),
        g.postMessage({
          oninit: !0
        }));
      a.append && g.postMessage({
        onappend: !0,
        data: ba.append(a.data, function(a) {
          g.postMessage({
            progress: !0,
            current: a
          })
        })
      });
      a.flush && g.postMessage({
        onflush: !0,
        data: ba.flush()
      })
    }, !1))
})(this);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module = g.module || {};
  g.module.ZIP = function(d) {
    var a = this,
      e = d.util,
      g = d.lang;
    this.open = function(e, b) {
      var c = d.doc,
        f = function() {
          b && b(c)
        };
      b = b || c.on.sketchReady;
      a.decodeBlob(e, function(a) {
        (a = a["sketch.json"]) ? d.open.json(a, f, f): f()
      })
    };
    this.decodeBlob = function(a, b) {
      var c = {},
        p = 0,
        w = !1,
        m = f(a.size),
        u = g.translate("decoding-format", m);
      d.loader && d.loader.create("thread", u);
      d.loader && d.loader.create("decoding", "...");
      var t = function() {
        --p || (d.loader && d.loader.create("thread", null, 100), d.loader &&
          d.loader.create("decoding",
            null, 100), b && b(c))
      };
      d.io.zip.decode({
        blob: a,
        oncomplete: function() {
          w = !0;
          t()
        },
        onchange: function(a) {
          var b = a.blob,
            e = b.type,
            f = a.filename,
            g = a.next;
          if (0 === b.size) return g();
          switch (e) {
            case "application/json":
              p++;
              (function(a) {
                d.convert.blobToText(b, function(b) {
                  c[a] = b;
                  w ? t() : g()
                })
              })(f);
              break;
            case "text/plain":
              g();
              break;
            default:
              var l = "#" + f.split(".").shift();
              "image/svg+xml" === b.type ? d.convert.blobToText(b,
                function(a) {
                  d.assets.add({
                    type: "clipart",
                    data: a,
                    onload: g,
                    onerror: g,
                    targetId: l
                  })
                }) : (a = URL.createObjectURL(b),
                d.assets.add({
                  type: "image",
                  src: a,
                  onload: g,
                  onerror: g,
                  targetId: l
                }))
          }
        },
        onprogress: function(a, b, c, g) {
          c = e.string.filename(c);
          var l = c.length;
          12 < l && (c = c.substr(0, 12));
          12 !== l && (c += "...");
          g = f(g);
          d.loader && d.loader.create("thread", u, Math.max(0, a - 1));
          d.loader && d.loader.create("decoding", c + " (" + g + ")",
            Math.max(0, b - 1))
        }
      })
    };
    this.encode = function(a, b, c, f) {
      if (e.exists("zip")) {
        zip.fs.FS();
        var g = function(a, b, c, d) {
            if ("string" === typeof b) a.addText(d, b);
            else if (b.blob) a.addBlob(b.filename, b.blob);
            else if (b.length)
              for (c =
                0; c < b.length; c++) a.addBlob(b[c].filename, b[c].blob);
            else
              for (d in b) {
                var e = a.addDirectory(d);
                g(e, b[d], c, d)
              }
          },
          m = 0,
          q = zip.fs.entries[0];
        new e.Queue({
          items: a,
          flatten: !0,
          next: function(a, b, c) {
            g(q, a, c, b);
            this.next()
          },
          oncomplete: function() {
            q.exportBlob(function(a) {
              b(a)
            }, function(a, b, d) {
              c && (a = Math.round(a / b * 100), a !== m && (c(a), m =
                a))
            }, f)
          }
        })
      } else d.feature.debug && console.log("missing: zip library")
    };
    this.getEntries = function(a, b, c) {
      c = c || function(a) {
        d.feature.debug && console.error(a);
        b()
      };
      zip.createReader(new zip.BlobReader(a),
        function(a) {
          a.getEntries(function(c) {
            a.close();
            b(c)
          })
        }, c)
    };
    this.decode = function(a, b, c, f, g) {
      b = a.onchange || b;
      c = a.oncomplete || c;
      f = a.onprogress || f;
      g = a.onerror || g;
      a = a.blob || a;
      var m = {
          json: "application/json",
          txt: "text/plain",
          svg: "image/svg+xml",
          png: "image/png",
          jpeg: "image/jpeg",
          jpg: "image/jpeg",
          gif: "image/gif"
        },
        q = function(a) {
          var d = a.length - 1,
            g = 0,
            k = 0,
            l = "",
            q = 0,
            s = 0,
            u = new e.Queue({
              items: a,
              flatten: !0,
              next: function(a, t, w) {
                u = this;
                k = w / d;
                s = Math.min(d, w + 1) / d - k;
                var C = w === d,
                  F = a.filename;
                l = e.string.filename(F);
                0 === l.indexOf(".") ?
                  C ? c && c() : this.next() : (t = F.split(".").pop(), a
                    .getData(new zip.BlobWriter(m[t]), function(a) {
                      b({
                        blob: a,
                        filename: F,
                        idx: w,
                        length: d,
                        percent: g,
                        batchPercent: q,
                        next: u.next
                      });
                      C && c && c()
                    }, f && function(a, b, c) {
                      q = a / b;
                      a = 100 * (k + s * q) >> 0;
                      a !== g && f(g = a, 100 * q >> 0, l, b)
                    }))
              }
            })
        };
      a.entries ? q(a.entries) : zip.createReader(new zip.BlobReader(
        a), function(a) {
        a.getEntries(function(b) {
          a.close();
          q(b)
        })
      }, g || function(a) {
        d.feature.debug && console.error(a);
        c && c()
      })
    }
  };
  var f = function(d, a) {
    a = a || 0;
    for (var e = 0, f = d || 0; 1024 <= f;) e++, f /= 1024;
    return parseInt(f).toFixed(a) +
      " " + "bytes kb mb gb tb pb".split(" ")[e]
  };
  "undefined" !== typeof module && module.exports && (module.exports =
    g.module.ZIP)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.util;
  g.module = g.module || {};
  g.module.RTC = function(f, b, c) {
    var g = f.feature,
      w = f.lang;
    c = c || {};
    "function" === typeof c && (c = {
      onready: c
    });
    c.onerror = c.onerror || function(a) {};
    c.onready = c.onready || function(a) {};
    if (!f.rtc.initialized) {
      var m = g.stream.video,
        u = g.stream.audio;
      if (m || u) {
        if (!f.client.fn.getUserMedia()) return c.onerror();
        f.loader && f.loader.create("camera", {
          message: w.translate("loading"),
          onstart: function() {
            f.rtc.initialized = !0;
            var t = document.getElementById("videos");
            navigator.getUserMedia({
              audio: u,
              video: {
                mandatory: {},
                optional: []
              }
            }, function(a) {
              h(a, "you", !0)
            }, function(a) {
              c.onerror && c.onerror(a);
              f.loader && f.loader.create("camera", null, 50);
              f.ui.log(
                "There was an error loading the camera, please check your browser permissions."
              )
            });
            eventjs.add(window, "resize", function() {
              f.rtc.arrange.fn()
            });
            var h = function(h, k, v) {
              if (!k || !h) return console.log("missing sream", k, h);
              if (document.getElementById("stream-" + k)) return
              console.log("element created");
              var u = document.createElement("div");
              u.className = "videoStream";
              u.style.background = "#000";
              t.appendChild(u);
              var s = document.createElement("video");
              s.style.display = "none";
              d(s, h);
              v && (s.volume = 0);
              s.setAttribute("autoplay", !0);
              s.setAttribute("data-id", k);
              s.id = "stream-" + k;
              u.appendChild(s);
              v = new a;
              u.videoStateToggle = v;
              u.appendChild(v.element);
              v = new e;
              u.nextPrevToggle = v;
              u.appendChild(v.element);
              g.stream.spectrumAnalysis && q(h);
              var w = f.rtc.videos[k] = {
                  id: k,
                  element: s,
                  parent: u
                },
                y = function() {
                  console.log("camera waiting");
                  try {
                    f.rtc.arrange.fn(), setTimeout(function() {
                        if (f.sfclient)
                          for (var a in f.sfclient.peerConnections) {
                            var b =
                              f.sfclient.peerConnections[a];
                            b.peerConnection.addStream(h);
                            console.log("add stream", h, b.peerConnection)
                          }
                        c.onready("effect")
                      }, 500), console.log("camera done!"), f.loader && f.loader
                      .create("camera", null, 100)
                  } catch (a) {
                    setTimeout(y, 100)
                  }
                },
                B = function() {
                  clearTimeout(A);
                  eventjs.remove(s, "playing", B);
                  if (m && glfx.applyShader) {
                    var a = glfx.applyShader(s);
                    a.pixelRatio = b.pixelRatio;
                    var d = a.canvas = a.canvas || document.createElement(
                      "canvas");
                    d.className = "videoStream";
                    w.canvas = d;
                    w.ctx = d.ctx;
                    s.gl = a;
                    c.onready && s.gl.setFilter(glfx.presets[glfx.presetId ||
                      0])
                  }
                  y()
                };
              s.play();
              var A = setTimeout(function() {
                s.play()
              }, 500);
              eventjs.add(s, "playing", B);
              return s
            }
          }
        })
      }
    }
  };
  var d = function(a, b) {
    navigator.mozGetUserMedia ? (a.mozSrcObject = b, a.play()) :
      window.URL && (a.src = URL.createObjectURL(b))
  };
  g.module.RTCManager = function(a, b) {
    var c = this,
      e = a.feature;
    c.on = c.on || {};
    c.on.addRemoteStream = function(a) {
      var b = document.createElement("video");
      d(b, a);
      b.style.cssText =
        "width: 256px; position: absolute; top: 0; left: 0; z-index: 999";
      b.play();
      document.body.appendChild(b);
      console.log(a.getAudioTracks(),
        a.getVideoTracks())
    };
    c.container = document.getElementById("videos");
    c.arrange = new c.VideoGrid(a, b, c);
    c.playing = e.stream.videoAtop;
    c.videos = {};
    c.initialized = !1;
    c.getDefaultID = function() {
      var b = a.net.peerId || "you",
        c;
      for (c in a.rtc.videos)
        if (b !== c) return c;
      return b
    };
    c.setMute = function(b) {
      var c = a.rtc.getDefaultID();
      a.rtc.getFocusVideo(c).muted = b ? "muted" : ""
    };
    c.play = function(a) {
      f(a, !0)
    };
    c.pause = function(a) {
      f(a, !1)
    };
    c.toggle = function(a, b) {
      b = "boolean" === typeof b ? b : !c.playing;
      f(a, b)
    };
    var f = function(a, b) {
      var d =
        b ? "play" : "pause";
      if ("[object HTMLVideoElement]" === String(a)) {
        var e = {},
          f = a.getAttribute("data-id");
        e[f] = a;
        a = e
      } else a = c.videos;
      var e = !1,
        f = c.videos,
        g;
      for (g in f) {
        var l = f[g],
          p = l.element;
        if (a[l.id] && (b ? l.parent.videoStateToggle.play() : l.parent
            .videoStateToggle.pause(), p[d](), p.playing = b, p.gl)) p.gl[
          d]();
        p.playing && (e = !0)
      }
      c.playing = e;
      glfx.animate && glfx.animate(e)
    };
    c.getFocusVideo = function(b) {
      if ((b = b || c.getDefaultID()) && a.rtc.videos[b]) return a.rtc
        .videos[b].element;
      console.log("missing " + b)
    };
    return c
  };
  var a =
    function() {
      var a = document.createElement("span"),
        b = document.createElement("span");
      b.className = "pause icon-pause";
      eventjs.add(b, "click", function() {
        g.rtc.playing ? (c.play(), g.rtc.pause()) : (c.pause(), g.rtc.play())
      });
      a.appendChild(b);
      var c = {};
      c.element = a;
      c.play = function() {
        b.classList.remove("icon-play");
        b.classList.add("icon-pause")
      };
      c.pause = function() {
        b.classList.add("icon-play");
        b.classList.remove("icon-pause")
      };
      return c
    },
    e = function() {
      var a = document.createElement("span"),
        b = document.createElement("span");
      b.className = "next icon-right";
      a.appendChild(b);
      var c = document.createElement("span");
      c.className = "prev icon-left";
      a.appendChild(c);
      eventjs.add(b, "click", function(a, b) {
        f.changeVideoFilter(1)
      });
      eventjs.add(c, "click", function() {
        f.changeVideoFilter(-1)
      });
      eventjs.add([c, b], "mousedown", eventjs.cancel);
      return {
        element: a
      }
    };
  f.changeVideoFilter = function(a, b) {
    var c = g.rtc.getDefaultID();
    b = b || g.rtc.getFocusVideo(c);
    if (c = glfx.presets) {
      var d = c.length,
        d = Math.abs((glfx.presetId + a + d) % d);
      b.presetId = glfx.presetId = d;
      b.gl &&
        (b.gl.setFilter(c[d]), glfx.render())
    }
  };
  f.toggleVideo = function(a, b) {
    g.rtc.toggle()
  };
  var q = function(a) {
    var b = g.audioContext = "AudioContext" in window ? new AudioContext :
      "webkitAudioContext" in window ? new webkitAudioContext : null;
    if (b) {
      a = b.createMediaStreamSource(a);
      var c = b.createJavaScriptNode(2048, 1, 1);
      c.connect(b.destination);
      c.onaudioprocess = function() {
        var a = new Uint8Array(d.frequencyBinCount);
        d.getByteFrequencyData(a);
        for (var b = 0, c = a.length / 4, e = 0; e < c; e++) b += a[e];
        a = b / c;
        b = glfx.getContextByIndex(0);
        c = doc.config.gl_test;
        e = glfx.filters.test && glfx.filters.test.paramIndex;
        b && b.filters && b.filters.test && (b.filters.test.values[e.amount] =
          a / 100);
        c.amount.value = a / 100
      };
      var d = b.createAnalyser();
      d.smoothingTimeConstant = .3;
      d.fftSize = 32;
      d.connect(c);
      a.connect(d)
    }
  }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  g.module.RTCManager.prototype.VideoGrid = function(f, d, a) {
    var e = this;
    e.fn = function(d) {
      var g = f.rtc.videos,
        b;
      for (b in g);
      d !== e.method && (g = window.innerWidth - 200, b = window.innerHeight,
        "string" === typeof d && (e.method = d), f.feature.stream.videoAtop ?
        (a.container.style.display = "block", e[e.method](g, b)) : a.container
        .style.display = "none")
    };
    e.method = "singleBottomRight";
    e.grid = function(a, d) {};
    e.split = function(d, g) {
      var b = Object.keys(f.net.users.data),
        c = a.videos,
        p = b && b[0] || "you",
        w = b && b[1],
        m;
      for (m in c) {
        var b =
          c[m],
          u = b.parent.style,
          t = b.element;
        m === p ? (e.setSize(t, d, g, 0, !0, !0), a.play(t), u.display =
          "block") : m === w ? (b = e.setSize(t, d / 4, g / 4, 1, !0),
          e.setPosition(t, d - b.width - 1, g - b.height), a.play(t),
          u.display = "block") : (a.pause(t), u.display = "none")
      }
    };
    e.focus = function(d, g, b) {
      b = b || f.net.peerId || "you";
      var c = a.videos,
        p;
      for (p in c) {
        var w = c[p],
          m = w.element,
          w = w.parent.style;
        p === b ? (e.setSize(m, d, g, 0, !0, !0), a.play(m), w.display =
          "block") : (a.pause(m), w.display = "none")
      }
    };
    e.singleBottomRight = function(d, g, b) {
      var c;
      b = b || f.rtc.getDefaultID();
      for (var p in a.videos) {
        var w = a.videos[p],
          m = w.parent.style,
          w = w.element;
        p === b ? (c = e.setSize(w, Math.max(200, d / 4), Math.max(200,
            g / 4), 1, !0), e.setPosition(w, 0, 0), a.play(w), m.display =
          "block") : (a.pause(w), m.display = "none")
      }
      c && (a.container.style.width = c.width + "px", a.container.style
        .height = c.height + "px")
    };
    e.single = function(d, g) {
      var b, c = f.net.peerId || "you",
        p = a.videos,
        w;
      for (w in p) {
        var m = p[w],
          u = m.element,
          m = m.parent.style;
        w === c ? (b = e.setSize(u, d, g, 0, !1, !0), a.play(u), m.display =
          "block") : (a.pause(u), m.display = "none")
      }
      b &&
        (a.container.style.width = b.width + "px", a.container.style.height =
          b.height + "px")
    };
    e.setSize = function(a, f, b, c, g, w) {
      var m = f / a.videoWidth,
        u = b / a.videoHeight;
      g = g ? m > u ? m : u : m > u ? u : m;
      g = {
        width: a.videoWidth * g >> 0,
        height: a.videoHeight * g >> 0
      };
      w && e.toCenter(a, f, b, g.width, g.height);
      f = a.parentNode;
      f.style.zIndex = c || 0;
      f.style.width = g.width + "px";
      f.style.height = g.height + "px";
      a.width = g.width * d.pixelRatio;
      a.height = g.height * d.pixelRatio;
      return g
    };
    e.setPosition = function(a, d, b) {
      a.parentNode.style.right = d + "px";
      a.parentNode.style.bottom =
        b + "px"
    };
    e.toCenter = function(a, d, b, c, f) {
      d = (d - c) / 2;
      b = (b - f - 40) / 2;
      0 > b && (b *= 2);
      0 > d && (d *= 2);
      e.setPosition(a, d, b)
    };
    return e
  }
})(sketch);
if ("undefined" === typeof glfx) var glfx = {};
(function(g) {
  g.loadFilters = function(f) {
    glfx.filters.colormap && glfx.filters.colormap.construct();
    var d = g.presets = [
        [
          [{
            cmd: "input",
            id: "source0",
            name: "default",
            enabled: !0
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "old tv",
            enabled: !0
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [.5, .06637168141592921, .6902654867256637, 1024]
          }, {
            cmd: "shader",
            id: "bulgePinch",
            enabled: !0,
            data: [.5, .5, .8, .5663716814159292]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.7, 0, .3, .22123893805309736]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1,
              1
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "natural displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.23008849557522115, .3097345132743363]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.5707964601769911, 1]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.9734513274336283, .2654867256637168, .2654867256637168,
              0, 0, .017699115044247815
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace"
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.026548672566371667, .10619469026548678]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.9424778761061947, 11]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.6415929203539823, 1]
          }, {
            cmd: "shader",
            id: "triangleBlur",
            enabled: !0,
            data: [6.6371681415929205]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.6858407079646017, .4646017699115045,
              1.3274336283185841, 1.0176991150442478
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .05752212389380531, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "dot shift"
          }, {
            cmd: "shader",
            id: "bulgePinch",
            enabled: !0,
            data: [.5,
              .5132743362831859, .5, .6814159292035398
            ]
          }, {
            cmd: "shader",
            id: "dotScreen",
            enabled: !0,
            data: [.5, .5, .001, 1.504424778761062]
          }, {
            cmd: "shader",
            id: "RGBShift",
            enabled: !0,
            data: [2.057326162527829, .030530973451327433]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [116.28318584070797]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "wood",
            enabled: !0
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [-2.2566371681415927, .12389380530973451, 1],
            enabled: !0
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.9424778761061947, .1327433628318584, 0, .9690265486725664,
              41, .1327433628318584
            ]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.8805309734513275, 3]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.5929203539823009, .5486725663716814,
              22.90265486725664, 0, 0, 0, 0
            ],
            enabled: !0
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.7, 0, 0, .3]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [13, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .08108108108108109]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .05405405405405406, 2.47787610619469,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2657657657657657]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.972972972972973, 1.8716814159292035,
              7.4774774774774775, .5270270270270271, 0, .18018018018018012
            ]
          }, {
            id: "triangleBlur",
            cmd: "shader",
            enabled: !0,
            data: [50, 50]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [13, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .0752212389380531]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 7]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, 2.47787610619469,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [1.920353982300885, 1, 1, .025, 5.640884955752212, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 19]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1, 1.8716814159292035, .08849557522123894, .584070796460177,
              0, -.026548672566371723
            ]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [13, 1, 1, "texture0", "texture1"]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-1, 0]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "sepia glow sketch",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [3, .0752212389380531, .11946902654867257]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.6238938053097345, .001, .6548672566371682, .001]
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [.8849557522123894, 9.823008849557521]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, 1]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.2566371681415929, .5]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "bronze hatch",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [10, 0, .6371681415929203, 0]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [3, .11946902654867257, .1592920353982301]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.7477876106194691, .9557522123893806]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.19469026548672574, .415929203539823]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [92]
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [1.0619469026548671,
              10
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .10619469026548672]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .5973451327433629, .6194690265486725,
              1.752212389380531, 0, -.6371681415929203
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [2, 1, 1, .025, 5.640884955752212, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.6548672566371682, 3]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.584070796460177, .9823008849557522,
              8.141592920353983, 2.0442477876106193, 0, -.7787610619469026
            ]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [4, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230087, -.19469026548672563]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5,
              .5, .10619469026548672
            ]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7168141592920354, .0663716814159292, .17699115044247787,
              3, 0, -.6460176991150443
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [2, 1, 1, .025, 5.640884955752212, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1, 3, 1.1504424778761062, 1, 0, -.026548672566371723]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [16, .7964601769911505, .7300884955752213, "texture0",
              "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230087, -.19469026548672563]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .10619469026548672]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [2, 1, 1, .025, 5.640884955752212, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1, 3, 1.1504424778761062, 1, 0, -.026548672566371723]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [16, .7964601769911505, .7300884955752213, "texture0",
              "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 7]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.0221238938053097, .41150442477876104, .7079646017699115,
              2.1238938053097343, 0, -.9469026548672567
            ]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 8]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 19]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.9955752212389382, 3, .5309734513274336, 0, 0, -.21238938053097345]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5,
              .26548672566371684
            ]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [16, .7964601769911505, .7300884955752213, "texture0",
              "texture1"
            ]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.053097345132743445, .18584070796460184]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "bulgePinch",
            cmd: "shader",
            enabled: !0,
            data: [.4774774774774775, .31981981981981983, .5, .4864864864864864]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.7162162162162162, 2.972972972972973,
              8.378378378378379, 0, 10, .072072072072072
            ]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 17]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .13513513513513514, 10.18018018018018, 0]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, .2, .018018018018018018, 2015]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.7612612612612613, 6]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .04954954954954955, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [29]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [29]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .7027027027027026, 3.153153153153153,
              1.2297297297297296
            ]
          }, {
            id: "edgeWork",
            cmd: "shader",
            enabled: !0,
            data: [.885135135135135]
          }, {
            id: "colorify",
            cmd: "shader",
            enabled: !0,
            data: [.2072072072072072, [255, 0, 0]]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.584070796460177, .831858407079646]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.9955752212389382, 2.5353982300884956,
              9.29203539823009, 2.7876106194690267, 0, .07079646017699126
            ]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .048672566371681415]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [26]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [2, 1, 1, .025, 5.640884955752212, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 15]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [17, .7964601769911505, .7300884955752213,
              "texture0", "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.5309734513274337, 5]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [20]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.35398230088495575, .7920353982300885,
              84.23008849557522, 0, 0, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [9, 1, .9778761061946902, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.6548672566371682, 18]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7035398230088495, .10619469026548672, .8849557522123894,
              1.1017699115044248, 0, -.23893805309734517
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.21238938053097345, 1, 34.29203539823009, .0051991150442477875,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.7256637168141593, 1]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [13, 1, .9778761061946902, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230087, .7345132743362832]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .10619469026548672]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [2, 1, 1, .025, 5.640884955752212, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 19]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.008849557522124, 3, .5309734513274336, 1, 0, -.008849557522123908]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [10, .7964601769911505, .7300884955752213, "texture0",
              "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230087,
              .7345132743362832
            ]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .10619469026548672]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [2, 1, 1, .025, 5.640884955752212, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1, 3, 1.1504424778761062, 1, 0, -.026548672566371723]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [16, .7964601769911505, .7300884955752213, "texture0",
              "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230087, .7345132743362832]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .10619469026548672]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [2, 1, 1, .025, 5.640884955752212, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 3]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1, 3, 1.1504424778761062, 1, 0, -.026548672566371723]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [16, .7964601769911505, .7300884955752213, "texture0",
              "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .0752212389380531]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 7]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [1.920353982300885,
              1, 1, .025, 5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 19]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1, 3, 1.1504424778761062, 1, 0, -.026548672566371723]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [4, .7964601769911505, .7300884955752213, "texture0",
              "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142,
              0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [1.920353982300885, 1, 2.752212389380531, .025,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "ripple",
            cmd: "shader",
            enabled: !0,
            data: [.84070796460177, .4424778761061947, 1, .5]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [1, -.12389380530973448]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [4, .7566371681415929, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 16]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "ripple",
            cmd: "shader",
            enabled: !0,
            data: [.84070796460177, .4424778761061947, 1, .5]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [1, .008849557522123908]
          }, {
            cmd: "shader",
            id: "tron",
            data: [1.3097345132743363, 1, 7.570796460176992,
              .025, 5.640884955752212, 0, 0
            ],
            enabled: !0
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [4, .7566371681415929, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 18]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [.4424778761061947, 1.991150442477876]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "ripple",
            cmd: "shader",
            enabled: !0,
            data: [.84070796460177, .4424778761061947, 1, .5]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [1, .008849557522123908]
          }, {
            cmd: "shader",
            id: "tron",
            data: [1.3097345132743363, 1, 7.570796460176992, .025,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 3]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [16, .7566371681415929, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.6194690265486725, 15]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.0353982300884956, .03982300884955752, .2654867256637168,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [.4424778761061947, 1.991150442477876]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [1.3097345132743363, 1, 7.570796460176992, .025,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 3]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [13, .7787610619469026, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.6194690265486725, 10]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.0353982300884956, 0, 10.442477876106196,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [1.7699115044247788, 7.300884955752212]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.6460176991150443, 1, 15.017699115044248, .0051991150442477875,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [4, .7699115044247787, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.6194690265486725, 10]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.0353982300884956, 0, 10.442477876106196,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.16371681415929204, .19469026548672566, .048672566371681415]
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [1.7699115044247788, 7.300884955752212]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.6460176991150443, 1, 15.017699115044248, .0051991150442477875,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [4, .7699115044247787, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.7831858407079646, 9]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.0353982300884956, 0, 10.442477876106196,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .19469026548672566, .03982300884955752]
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [.9734513274336283, 9.15929203539823]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.6460176991150443,
              1, 15.017699115044248, .0051991150442477875,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [2, .7699115044247787, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.7831858407079646, 9]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.0353982300884956, 0, 10.442477876106196, .9424778761061947,
              0, .053097345132743445
            ]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .27876106194690264, .004424778761061947]
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [.9734513274336283, 9.15929203539823]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.6460176991150443, 1, 15.017699115044248, .02190265486725664,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [2, .7699115044247787, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 3]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.0353982300884956, 0, 10.442477876106196,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.12389380530973451, .45132743362831856,
              15.017699115044248, .0051991150442477875,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [2, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 3]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .10619469026548672, .8849557522123894,
              1.8185840707964602, 0, -.23893805309734517
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.12389380530973451, .45132743362831856,
              15.017699115044248, .0051991150442477875,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [2, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230089, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [3, 3, 13.008849557522124, 3, 0, -.22123893805309736]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.11504424778761062, .336283185840708, 100, 0, 0, 0, 0],
            enabled: !0
          }, {
            id: "lumaKey",
            cmd: "shader",
            enabled: !0,
            data: [0, .22566371681415928]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [2, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.5309734513274337, 6]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .10619469026548672, .8849557522123894,
              1.8185840707964602, 0, -.23893805309734517
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.12389380530973451, .45132743362831856,
              15.017699115044248, .0051991150442477875,
              5.640884955752212, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [0, 1, .9778761061946902, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.5309734513274337, 5]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .10619469026548672, .8849557522123894,
              1.8185840707964602, 0, -.23893805309734517
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.23893805309734514, .43565309734513274, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [9, 1, .9778761061946902, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "newsprint",
            enabled: !0
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [.5, 0, 1, 5]
          }, {
            cmd: "shader",
            id: "dotScreen",
            enabled: !0,
            data: [.19911504424778761, .21238938053097345,
              4.36486766914688, 2.920353982300885
            ]
          }, {
            cmd: "shader",
            id: "RGBShift",
            enabled: !0,
            data: [.001, .001327433628318584]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.672566371681416, .5176991150442478, .4424778761061947,
              .21238938053097345
            ]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.6946902654867256, .7212389380530974]
          }, {
            cmd: "shader",
            id: "tiltShift",
            enabled: !0,
            data: [.001, .22566371681415928, .5796460176991151, .4557522123893805,
              2.6548672566371683, 1063.0088495575221
            ]
          }, {
            cmd: "shader",
            id: "sepia",
            enabled: !0,
            data: [1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "newsprint"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [2.0132743362831858, .001, .3185840707964602,
              1309.3097345132744
            ]
          }, {
            cmd: "shader",
            id: "dotScreen",
            enabled: !0,
            data: [.5, .5, .001, 5.20353982300885]
          }, {
            cmd: "shader",
            id: "RGBShift",
            enabled: !0,
            data: [2.1963346870229525, .003982300884955752]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.7, .3, .3, .3]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230089, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .915929203539823, .7964601769911505,
              1.470962389380531, 0, .5381637168141593
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.09734513274336283,
              .39297566371681414, 100, 0, 0, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 18]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [14, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230089, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .6238938053097345, .7964601769911505,
              1.3805309734513274, 0, .7079646017699115
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.09734513274336283,
              .39297566371681414, 100, 0, 0, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 18]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [2, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230089, 10]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, 0, 0, 2.190265486725664, 0, -1]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894, .39297566371681414, 100, 0, 0,
              0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [18, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230089, 10]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, 0, 0, 2.190265486725664, 0, -1]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894, .39297566371681414,
              100, 0, 0, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [18, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.41150442477876104, 6]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, 0, 0, 2.190265486725664, 0, -1]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894,
              .39297566371681414, 100, 0, 0, 0, 0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [18, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.41150442477876104, 6]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .7433628318584071, .08849557522123894,
              2.176991150442478, 0, .23008849557522115
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894, .39297566371681414, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [18, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230089, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .915929203539823, .7964601769911505,
              1.470962389380531, 0, .5381637168141593
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.09734513274336283, .39297566371681414, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 18]
          }, {
            id: "lumaKey",
            cmd: "shader",
            enabled: !0,
            data: [.1504424778761062, .23008849557522124]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [14, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.9380530973451328, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.2610619469026547,
              .09292035398230089, 1.0619469026548671, 0, 0, .5381637168141593
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [0, .41150442477876104, 19.836283185840706, 0, 0, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 18]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [14, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.41150442477876104, 6]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, 0, 20, 3, 0, .23008849557522115]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894, .39297566371681414, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [18, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.6415929203539823,
              18
            ]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, 0, 20, 3, 0, .23008849557522115]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894, .39297566371681414, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [0, 1, 1, "texture0", "texture1"]
          }, {
            id: "edgeDetect",
            cmd: "shader",
            enabled: !0,
            data: [-.8761061946902657, .30973451327433627, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.7, .3, .3, .3]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.41150442477876104, 6]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, 0, 20, 3, 0, .23008849557522115]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894, .39297566371681414, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [18, 1, 1, "texture0",
              "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.3407079646017699, 4]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, 0, .7964601769911505,
              1.470962389380531, 0, .5381637168141593
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.09734513274336283, .30973451327433627, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 7]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [9, 1, .9778761061946902,
              "texture0", "texture1"
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.3407079646017699, 4]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .8495575221238938, .17699115044247787,
              1.3805309734513274, 15, .6017699115044248
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.09734513274336283, .30973451327433627, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 7]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [9, 1, .9778761061946902, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7699115044247788, .8495575221238938, .17699115044247787,
              1.3805309734513274, 15, .6017699115044248
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.09734513274336283, .30973451327433627, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 12]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [9, 1, .9778761061946902, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7699115044247788, .8495575221238938, .17699115044247787,
              1.3805309734513274, 15, .6017699115044248
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.09734513274336283, .30973451327433627, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1,
              8
            ]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [9, 1, .9778761061946902, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.41150442477876104, 6]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, 0, 20, 3, 0, .23008849557522115]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894, .39297566371681414, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [18, 1, 1, "texture0", "texture1"]
          }, {
            id: "brightnessContrast",
            cmd: "shader",
            enabled: !0,
            data: [.06194690265486735, .18584070796460184]
          }, {
            id: "sepia",
            cmd: "shader",
            enabled: !0,
            data: [.4026548672566372]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.6415929203539823, 18]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071,
              .10619469026548672, 0, 2.495575221238938, 0, .6283185840707965
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.008849557522123894, .39297566371681414, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [0, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "green displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 11]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.6415929203539823, 1]
          }, {
            cmd: "shader",
            id: "triangleBlur",
            enabled: !0,
            data: [7.743362831858407]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.47787610619469023, .4070796460176991]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.9424778761061947, .0663716814159292, .08849557522123894,
              .6504424778761062
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-2.601769911504425, .048672566371681415, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "pink"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [-3, .05752212389380531, 1],
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            data: [1, 10],
            enabled: !0
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.16814159292035402, .34513274336283195]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.001, .004424778761061954]
          }, {
            cmd: "shader",
            id: "lumaKey",
            enabled: !0,
            data: [.001, .9336283185840708]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "blue"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [-3, .09734513274336283, 1],
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            data: [1, 10],
            enabled: !0
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.5486725663716814,
              .5929203539823009
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "Rainbow room"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [3, .07079646017699115, 1],
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            data: [1, 19],
            enabled: !0
          }, {
            cmd: "shader",
            id: "invert",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [.3982300884955752, .2920353982300885]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "crisp",
            enabled: !0
          }, {
            id: "unsharpMask",
            cmd: "shader",
            enabled: !0,
            data: [3.274336283185841, 4.0265486725663715]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [20]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.18584070796460228, .26548672566371684, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "sepia glow sketch"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.5, 1, 0]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.6238938053097345, .001, .6548672566371682, .001]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, 1]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.2566371681415929, .5]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "bronze hatch"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [10, .001, .6106194690265486, 5]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.8495575221238938, 1, .1592920353982301]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.7433628318584071, .9557522123893806]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.12831858407079644, .5]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [121.06194690265488]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "dark glow",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.31858407079646023,
              .32, 56.19469026548672, 0, 0, 0, 0
            ],
            enabled: !0
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "tron kaleidoscope",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.25663716814159293, .28761061946902655,
              84.66814159292035, 0, 0, 11.283185840707963, 0
            ],
            enabled: !0
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "swirl",
            enabled: !0,
            data: [0, .5, 335.4424778761062, 1]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.35, 0, 42, 0, 3, 10, 2],
            enabled: !0
          }, {
            cmd: "shader",
            id: "kaleidoscope",
            enabled: !0,
            data: [1.55,
              5
            ]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, .5]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: ["ADD", 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 18]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.7433628318584071, .915929203539823, .7964601769911505,
              0, 17, .32743362831858414
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.336283185840708, .32, 100, 0, 0, 0, 0],
            enabled: !0
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [14, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "light glow",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [.7, 1, 1],
            enabled: !0
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [.4, .32, 24, 0, 0, 0, 0],
            enabled: !0
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: ["ADD", 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "cracks",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 10]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [.7, 1, 1],
            enabled: !0
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.9955752212389382, 0, 0, 1.0221238938053097, 50, -.8053097345132744]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.168141592920354, .5309734513274337, 100, 0, 0, 0, 0],
            enabled: !0
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.7, .1, .3, .3]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [11, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "high contrast",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 1]
          }, {
            id: "lensBlur",
            cmd: "shader",
            enabled: !0,
            data: [7.079646017699115, .75, 0]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [-.5575221238938051, 1, 1],
            enabled: !0
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.1238938053097347, .8805309734513275, 100, 0, 0, 0, 0],
            enabled: !0
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.7, .1, .3, .3]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [11, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "green canvas",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 9]
          }, {
            id: "lensBlur",
            cmd: "shader",
            enabled: !0,
            data: [29.646017699115045, .75, 0]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [-.5575221238938051, 1, 1],
            enabled: !0
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.9955752212389382, 0, 0, 1.7256637168141593, 28, -.11504424778761058]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.13274336283185842, .8805309734513275,
              100, 0, 0, 0, 0
            ],
            enabled: !0
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.7, .1, .3, .3]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [11, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "coffee stains",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 14]
          }, {
            id: "lensBlur",
            cmd: "shader",
            enabled: !0,
            data: [29.646017699115045, .75, 0]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [-.5575221238938051, 1, 1],
            enabled: !0
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.9955752212389382, 1.247787610619469,
              10.353982300884956,
              .7831858407079646, 22, .1504424778761062
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.13274336283185842, .8805309734513275, 100, 0, 0, 0,
              0
            ],
            enabled: !0
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.7, .1, .3, .3]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [11, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "sunrise",
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 15]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [.7, 1, 1],
            enabled: !0
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.9955752212389382, .15486725663716813, 0,
              2.349557522123894, 29, .10619469026548667
            ]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "tron",
            data: [.11504424778761062, .4823008849557522, 100, 0, 0, 0,
              3.451327433628318
            ],
            enabled: !0
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.7, .1, .3, .3]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [11, 1, 1, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "orange radiant"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.7699115044247787, 1, 1]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.6327433628318584, .001, .4, .001]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.37168141592920356, .23451327433628322]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [264.42477876106193]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [.5044247787610618, .7699115044247788]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "blue radiant"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [6.3008849557522115,
              .001, .001, 1693.4557522123894
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.8849557522123894, 1, 1]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.37168141592920356, .23451327433628322]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [265]
          }, {
            cmd: "shader",
            id: "denoise",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [.49557522123893816, .7699115044247788]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "burn radiant"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !1,
            data: [6.3008849557522115,
              .001, .001, 1693.4557522123894
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.672566371681416, 1, 1]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [1, .001, .28761061946902655, .001]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.20353982300884954, .8230088495575221]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "burn fire",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [6.3008849557522115, 0, .5221238938053098, 1943]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.672566371681416, 1, .3]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [1, .001, .28761061946902655, .001]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.20353982300884954, .8230088495575221]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "kiwi",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [10, .001, .6106194690265486, 5]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.7699115044247788, .40707964601769914, 1]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.9513274336283186,
              1
            ]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.19469026548672574, .584070796460177]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [149.73451327433628]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "yellow monster",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [.6902654867256635, .5486725663716814, 1],
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            data: [.8716814159292036, 13],
            enabled: !0
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.4601769911504425,
              .8407079646017699
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "oompa loompa"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [-3, .03982300884955752, .8938053097345132],
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            data: [1, 0],
            enabled: !0
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.5663716814159292, .5929203539823009]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "green displace"
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 11]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.6415929203539823, 1]
          }, {
            cmd: "shader",
            id: "triangleBlur",
            enabled: !0,
            data: [6.6371681415929205]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.47787610619469023, .4070796460176991]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.5973451327433629, 1, 16, 1]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .030973451327433628, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "natural displace"
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.2743362831858407, .5]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.5707964601769911, 8]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.6415929203539823, 1]
          }, {
            cmd: "shader",
            id: "triangleBlur",
            enabled: !0,
            data: [6.6371681415929205]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.9734513274336283, .17699115044247787, .1327433628318584,
              .6637168141592921
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .030973451327433628, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "white displace"
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.8849557522123894, 6]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.30973451327433627, 1.836283185840708,
              .01, 2.433628318584071
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-1.7256637168141593, .04424778761061947, 1]
          }, {
            cmd: "shader",
            id: "invert",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [.7345132743362832, .2743362831858407]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "blue displace"
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 18]
          }, {
            cmd: "shader",
            id: "triangleBlur",
            enabled: !0,
            data: [.001]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.30973451327433627, 1.0619469026548671,
              2.1238938053097343,
              2.433628318584071
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-1.7256637168141593, .04424778761061947, 1]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.15486725663716816, .26106194690265483]
          }, {
            cmd: "shader",
            id: "invert",
            enabled: !0,
            data: []
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "red displace"
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.34513274336283184, 10]
          }, {
            cmd: "shader",
            id: "triangleBlur",
            enabled: !0,
            data: [.001]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.5530973451327434, 1.6150442477876106,
              .24336283185840707, 2.3451327433628317
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-1.7256637168141593, .04424778761061947, 1]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.15486725663716816, .26106194690265483]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "vulcan"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.42, 1, .5398230088495575]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.7433628318584071, .9557522123893806]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.28, .5]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [106.72566371681417]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [.008849557522123908, .3982300884955752]
          }, {
            cmd: "shader",
            id: "vibrance",
            enabled: !0,
            data: [.017699115044247815]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "monster"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.6371681415929205, 1, .7964601769911505]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.22123893805309736, .5]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [194.3362831858407]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "old film"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [10, .001, .5088495575221239, 5]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.3, 1, .4778761061946903]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.001, .001, .8053097345132744, .3]
          }, {
            cmd: "shader",
            id: "sepia",
            enabled: !0,
            data: [.8]
          }, {
            cmd: "shader",
            id: "vibrance",
            enabled: !0,
            data: [1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "invert green"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [3, .2079646017699115, 1],
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            data: [1,
              3
            ],
            enabled: !0
          }, {
            cmd: "shader",
            id: "denoise",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.16814159292035402, .34513274336283195]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "invert blue"
          }, {
            cmd: "shader",
            id: "edgeDetect",
            data: [3, .07079646017699115, 1],
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            data: [.8716814159292036, 15],
            enabled: !0
          }, {
            cmd: "shader",
            id: "invert",
            enabled: !0,
            data: [30]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-.1415929203539823, .7079646017699115]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "zoom distort #1"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [.5, .3893805309734513, .6592920353982301, 5]
          }, {
            cmd: "shader",
            id: "colorHalftone",
            enabled: !0,
            data: [.5, .5, 3.169394358488818, 3.101769911504425]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.7, .3, .3, .3]
          }, {
            cmd: "shader",
            id: "zoomBlur",
            enabled: !0,
            data: [.5, .5, .10176991150442478]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "zoom distort #2"
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.7, .8451327433628318, 1, 1]
          }, {
            cmd: "shader",
            id: "zoomBlur",
            enabled: !0,
            data: [.5,
              .5, .33185840707964603
            ]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [0, .5]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "zoom distort #3"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [10, .001, .5088495575221239, 5]
          }, {
            cmd: "shader",
            id: "bulgePinch",
            enabled: !0,
            data: [.6742857142857143, .32857142857142857, 200, .5]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.4424778761061947, 1, .2]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.7433628318584071, .9557522123893806]
          }, {
            cmd: "shader",
            id: "noise",
            enabled: !0,
            data: [.001]
          }, {
            cmd: "shader",
            id: "zoomBlur",
            enabled: !0,
            data: [.41, .2342857142857143, .4336283185840708]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.17699115044247793, .5]
          }, {
            cmd: "shader",
            id: "colorMatrixOld",
            enabled: !0,
            data: [313.8053097345133]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [0, .3982300884955752]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "kaleidoscope",
            enabled: !0
          }, {
            cmd: "shader",
            id: "swirl",
            enabled: !0,
            data: [.5, .5, 662.3362831858408, 2.477876106194689]
          }, {
            cmd: "shader",
            id: "kaleidoscope",
            enabled: !0,
            data: [5.754952914098117,
              12.787610619469026
            ]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.7079646017699115, .6769911504424779]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [.03539823008849563, .31858407079646023]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "green kaleidoscope"
          }, {
            cmd: "shader",
            id: "popArt",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "swirl",
            enabled: !0,
            data: [.5, .5, 862.3008849557523, .9734513274336276]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.5, 1, 1]
          }, {
            cmd: "shader",
            id: "kaleidoscope",
            enabled: !0,
            data: [1.1, 4.716814159292035]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.7654867256637168, .1902654867256637]
          }, {
            cmd: "shader",
            id: "hueSaturation",
            enabled: !0,
            data: [-1, 0]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "ancient kaleidoscope"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [.5, .22123893805309736, 1.5663716814159292,
              1068.1017699115046
            ]
          }, {
            cmd: "shader",
            id: "popArt",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "bulgePinch",
            enabled: !0,
            data: [.5, .5, 1, -.06194690265486724]
          }, {
            cmd: "shader",
            id: "swirl",
            enabled: !0,
            data: [.5, .5, 999, 1]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.5, 1, 0]
          }, {
            cmd: "shader",
            id: "kaleidoscope",
            enabled: !0,
            data: [4.976505176925425, 7.6902654867256635]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.7, .3, .3, .3]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, .7964601769911505]
          }, {
            cmd: "shader",
            id: "sepia",
            enabled: !0,
            data: [.8]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "ancient kaleidoscope"
          }, {
            cmd: "shader",
            id: "film",
            enabled: !0,
            data: [.5, .2, 1, 2024]
          }, {
            cmd: "shader",
            id: "popArt",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "bulgePinch",
            enabled: !0,
            data: [.5, .5, .1415929203539823,
              .12389380530973448
            ]
          }, {
            cmd: "shader",
            id: "swirl",
            enabled: !0,
            data: [.5, .5, .001, 1.6814159292035402]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.5, 1, .6371681415929203]
          }, {
            cmd: "shader",
            id: "colorIsolation",
            enabled: !0,
            data: [.5]
          }, {
            cmd: "shader",
            id: "kaleidoscope",
            enabled: !0,
            data: [3.169394358488818, 2.911504424778761]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [.7, .3, .09734513274336283, .3]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.6592920353982301, .6504424778761062]
          }, {
            cmd: "shader",
            id: "tiltShift",
            enabled: !0,
            data: [.001, .24336283185840707, .5929203539823009, .5619469026548672,
              15, 200
            ]
          }, {
            cmd: "shader",
            id: "sepia",
            enabled: !0,
            data: [.8]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "ancient kaleidoscope",
            enabled: !0
          }, {
            cmd: "shader",
            id: "popArt",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "bulgePinch",
            enabled: !0,
            data: [.5, .5, .1415929203539823, .12389380530973448]
          }, {
            cmd: "shader",
            id: "swirl",
            enabled: !0,
            data: [.5, .5, .001, 1.6814159292035402]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [.32432432432432456, .38288288288288286, .6371681415929203]
          }, {
            cmd: "shader",
            id: "colorIsolation",
            enabled: !0,
            data: [.5]
          }, {
            cmd: "shader",
            id: "oldFilm",
            enabled: !0,
            data: [1, .08558558558558559, .09734513274336283, 0]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.6592920353982301, .6504424778761062]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.026548672566371667, .10619469026548678]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.9324324324324325, 3]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1,
              1
            ]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [.6858407079646017, .4646017699115045,
              1.3274336283185841, 1.0176991150442478
            ]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .04954954954954955, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "tron",
            cmd: "shader",
            enabled: !0,
            data: [1.4234234234234233, .5180180180180181,
              9.91891891891892, .009346846846846847, 0,
              2.027027027027027, 4.324324324324325
            ]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.6261261261261262, 6]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-.21621621621621623, .25225225225225223, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.4189189189189189, 5]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-.21621621621621623, .25225225225225223, 1]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [.4504504504504504, .11261261261261261, 1, 1714]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.3423423423423423, -.3783783783783784]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.4189189189189189, 5]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-.21621621621621623, .25225225225225223, 1]
          }, {
            id: "vibrance",
            cmd: "shader",
            enabled: !0,
            data: [.43243243243243246]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [.4504504504504504, .11261261261261261, 1, 1714]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.3423423423423423, -.3783783783783784]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.7252252252252253, 0]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-.21621621621621623, .25225225225225223, 1]
          }, {
            id: "vibrance",
            cmd: "shader",
            enabled: !0,
            data: [.43243243243243246]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.05405405405405406,
              .10810810810810811
            ]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.7297297297297297, 19]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, 1]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.8198198198198199, -1]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-.21621621621621623, .25225225225225223, 1]
          }, {
            id: "vibrance",
            cmd: "shader",
            enabled: !0,
            data: [.36036036036036045]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [.4504504504504504, 0, 1.009009009009009, 1714]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.05405405405405406, .06306306306306309]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.7297297297297297, 19]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, 1]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.5225225225225225, .11711711711711703]
          }, {
            id: "brightnessContrast",
            cmd: "shader",
            enabled: !0,
            data: [.15315315315315314, .08108108108108114]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, .04954954954954955, .954954954954955, 1833]
          }, {
            id: "colorHalftone",
            cmd: "shader",
            enabled: !0,
            data: [.009009009009009009, .18468468468468469,
              2.717053105807389, 18
            ]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.5225225225225225, .11711711711711703]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.05405405405405406, .06306306306306309]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.6711711711711712,
              19
            ]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, 1]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.5315315315315315, .32432432432432434]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, .04954954954954955, .954954954954955, 1833]
          }, {
            id: "colorHalftone",
            cmd: "shader",
            enabled: !0,
            data: [.4954954954954955, .12162162162162163,
              6.283185307179586, 8
            ]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.5315315315315315, .32432432432432434]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "hexagonalPixelate",
            cmd: "shader",
            enabled: !0,
            data: [.5, .11711711711711711, 8.135135135135135]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, 1]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.5315315315315315, .32432432432432434]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.6711711711711712, 19]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, .04954954954954955, .954954954954955, 1833]
          }, {
            id: "colorHalftone",
            cmd: "shader",
            enabled: !0,
            data: [.4954954954954955, .12162162162162163,
              6.283185307179586, 8
            ]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.5315315315315315, .32432432432432434]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "hexagonalPixelate",
            cmd: "shader",
            enabled: !0,
            data: [.5451923076923076, .3923076923076923,
              16.60810810810811
            ]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.43243243243243246, 19]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.45760000000000056, .5945945945945945]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, 1]
          }, {
            id: "lumaKey",
            cmd: "shader",
            enabled: !0,
            data: [.3153153153153153, .04954954954954955]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.43243243243243246, 19]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, 0, 0, 1833]
          }, {
            id: "colorHalftone",
            cmd: "shader",
            enabled: !0,
            data: [.4954954954954955, .12162162162162163,
              6.283185307179586, 8
            ]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.45760000000000056, .5945945945945945]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "hexagonalPixelate",
            cmd: "shader",
            enabled: !0,
            data: [.5451923076923076, .3923076923076923,
              16.60810810810811
            ]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.43243243243243246, 19]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.46846846846846846, .5945945945945945]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, 1]
          }, {
            id: "lumaKey",
            cmd: "shader",
            enabled: !0,
            data: [.3153153153153153, .04954954954954955]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.43243243243243246, 19]
          }, {
            id: "colorHalftone",
            cmd: "shader",
            enabled: !0,
            data: [.4954954954954955, .8693693693693694,
              .5377500938577123, 19
            ]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.46846846846846846, .5945945945945945]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "tron",
            cmd: "shader",
            enabled: !0,
            data: [0, .30180180180180183, 70.56756756756756, .014076576576576579,
              2.14990990990991, 48.1981981981982, 5.900900900900901
            ]
          }, {
            cmd: "shader",
            id: "triangleBlur",
            enabled: !0,
            data: [14.63963963963964]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, .46396396396396394]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, 0, .07207207207207207, 1823]
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.38738738738738737, .12612612612612611, .481981981981982,
              0
            ]
          }, {
            id: "lumaKey",
            cmd: "shader",
            enabled: !0,
            data: [.3783783783783784, 0]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.027027027027026973, .1351351351351351]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "tron",
            cmd: "shader",
            enabled: !0,
            data: [0, .23873873873873874, 1, .014076576576576579,
              2.14990990990991,
              48.1981981981982, 5.900900900900901
            ]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [1, .46396396396396394]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, 0, .07207207207207207, 1823]
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [0, .10810810810810811, .44144144144144143, 0]
          }, {
            id: "lumaKey",
            cmd: "shader",
            enabled: !0,
            data: [.3783783783783784, 0]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            id: "colorHalftone",
            cmd: "shader",
            enabled: !0,
            data: [.4189189189189189, .35135135135135137,
              4.783145571681757, 2
            ]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "tron",
            cmd: "shader",
            enabled: !0,
            data: [0, .23873873873873874, 1, .014076576576576579,
              2.14990990990991, 48.1981981981982, 5.900900900900901
            ]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.26126126126126126, 15]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [1.635135135135135, 0, 3.873873873873874,
              1.8918918918918919
            ]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.9279279279279279, .38738738738738737]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.26126126126126126,
              15
            ]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, .0945945945945946, .26126126126126126, 1823]
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.545045045045045, .11261261261261261, .8378378378378378,
              0
            ]
          }, {
            id: "lumaKey",
            cmd: "shader",
            enabled: !0,
            data: [.3963963963963964, 0]
          }, {
            id: "tiltShift",
            cmd: "shader",
            enabled: !0,
            data: [.1, .11711711711711711, .9, .9, 61.261261261261254,
              1046
            ]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "tron",
            cmd: "shader",
            enabled: !0,
            data: [0, .23873873873873874, 1, .014076576576576579,
              2.14990990990991, 48.1981981981982, 5.900900900900901
            ]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.26126126126126126, 15]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.9279279279279279, .38738738738738737]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [.26126126126126126, 15]
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, .0945945945945946, .18018018018018017, 1641]
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.1036036036036036, .11261261261261261, .34684684684684686,
              0
            ]
          }, {
            id: "lumaKey",
            cmd: "shader",
            enabled: !0,
            data: [.11711711711711711, 0]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            id: "sepia",
            cmd: "shader",
            enabled: !0,
            data: [.2972972972972973]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.026548672566371667, .10619469026548678]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.6621621621621623, .5405405405405406,
              1.0810810810810811, .8648648648648649, 30, .1
            ]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 9]
          }, {
            id: "colorIsolation",
            cmd: "shader",
            enabled: !0,
            data: [198, 360]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.2072072072072072, .5675675675675675]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .04954954954954955, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [-.026548672566371667, .10619469026548678]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.6621621621621623, .5405405405405406, 0, 0,
              10, .072072072072072
            ]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 9]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .10810810810810811, 13.243243243243244, 0]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 11]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .04954954954954955, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.19819819819819817, .1351351351351351]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.5135135135135134, .5945945945945946, 0, 0, 10, .072072072072072]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 9]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.06407567567567574]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [0, 1]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .10810810810810811, 13.243243243243244, 0]
          }, {
            id: "colorIsolation",
            cmd: "shader",
            enabled: !0,
            data: [198, 360]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.43243243243243246, -1]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 11]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .04954954954954955, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.19819819819819817, .1351351351351351]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.5135135135135134, .5945945945945946, 0, 0, 10, .072072072072072]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 9]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .013513513513513514, .09009009009009009, 0, 0]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.8198198198198198, 4]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .04954954954954955, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "rainbow tron",
            enabled: !0
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.9292035398230087, -.19469026548672563]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [30]
          }, {
            id: "zoomBlur",
            cmd: "shader",
            enabled: !0,
            data: [.5, .5, .10619469026548672]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.95, .0663716814159292, .17699115044247787,
              1.4867256637168142, 0, -.6106194690265487
            ]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.2743362831858407]
          }],
          [{
            cmd: "input",
            id: "source0",
            enabled: !0
          }, {
            cmd: "shader",
            id: "tron",
            data: [2, 1, 1, .025, 5.640884955752212, 0, 0],
            enabled: !0
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 11]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1, 3, 1.1504424778761062, 1, 0, -.026548672566371723]
          }],
          [{
            cmd: "shader",
            id: "blend",
            data: [17, 1, .8423423423423423, "texture0", "texture1"]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.41891891891891886, 2.27027027027027,
              7.567567567567568, 3, 36, -.7657657657657657
            ]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.135135135135135, .4864864864864865,
              18.01801801801802, 1.743243243243243, 29, .6126126126126126
            ]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .12162162162162163, .18018018018018017, .41891891891891886]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 4]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.22522522522522526, .7297297297297298]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.1711711711711712, .32432432432432434]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .02252252252252252, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [.41891891891891886,
              2.27027027027027, 7.567567567567568, 3, 36, -.7657657657657657
            ]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.135135135135135, .4864864864864865,
              18.01801801801802, 1.743243243243243, 29, .6126126126126126
            ]
          }, {
            id: "lensBlur",
            cmd: "shader",
            enabled: !0,
            data: [0, .75, 1.726460827648445]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .12162162162162163, .18018018018018017, .41891891891891886]
          }, {
            id: "bleachBypass",
            cmd: "shader",
            enabled: !0,
            data: [.4774774774774775]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.22522522522522526, .7297297297297298]
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.1711711711711712, .32432432432432434]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .02252252252252252, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .12162162162162163, .18018018018018017, .41891891891891886]
          }, {
            id: "edgeWork",
            cmd: "shader",
            enabled: !0,
            data: [.885135135135135]
          }, {
            id: "colorify",
            cmd: "shader",
            enabled: !0,
            data: [.2072072072072072, [255, 0, 0]]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .12162162162162163, .18018018018018017, .41891891891891886]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            id: "edgeWork",
            cmd: "shader",
            enabled: !0,
            data: [.885135135135135]
          }, {
            id: "colorify",
            cmd: "shader",
            enabled: !0,
            data: [.2072072072072072, [255, 0, 0]]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 1]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            id: "film",
            cmd: "shader",
            enabled: !0,
            data: [0, .15315315315315314, .42342342342342343, 775]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.7, .18468468468468469, .15315315315315314, .0045045045045045045]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            id: "ripple",
            cmd: "shader",
            enabled: !0,
            data: [4.1887902047863905, 1, .5, .5]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .12162162162162163, .18018018018018017, .41891891891891886]
          }, {
            id: "edgeWork",
            cmd: "shader",
            enabled: !0,
            data: [.885135135135135]
          }, {
            id: "oldFilm",
            cmd: "shader",
            enabled: !0,
            data: [.21621621621621623, 1, 1, 0]
          }, {
            id: "denoise",
            cmd: "shader",
            enabled: !0,
            data: [10]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.19819819819819817,
              .1351351351351351
            ]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.5135135135135134, .5945945945945946, 0, 0, 10, .072072072072072]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 9]
          }, {
            id: "ink",
            cmd: "shader",
            enabled: !0,
            data: [.06407567567567574]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [0, 1]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .10810810810810811, 13.243243243243244, 0]
          }, {
            id: "colorIsolation",
            cmd: "shader",
            enabled: !0,
            data: [198, 360]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [1, 11]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [-.7027027027027026, -.29729729729729726]
          }, {
            id: "invert",
            cmd: "shader",
            enabled: !0,
            data: []
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .04954954954954955, 1]
          }]
        ],
        [
          [{
            cmd: "input",
            id: "source0",
            name: "turquoise displace",
            enabled: !0
          }, {
            cmd: "shader",
            id: "brightnessContrast",
            enabled: !0,
            data: [.19819819819819817, .19819819819819817]
          }, {
            id: "displacement",
            cmd: "shader",
            enabled: !0,
            data: [1.5135135135135134, .16216216216216217,
              2.0720720720720722, 0, 10, .09009009009009006
            ]
          }, {
            cmd: "shader",
            id: "colormap",
            enabled: !0,
            data: [1, 9]
          }, {
            cmd: "shader",
            id: "displacement",
            enabled: !0,
            data: [3, .10810810810810811, 13.243243243243244, 0]
          }, {
            id: "colormap",
            cmd: "shader",
            enabled: !0,
            data: [.36486486486486486, 7]
          }, {
            id: "hueSaturation",
            cmd: "shader",
            enabled: !0,
            data: [.027027027027026973, .15315315315315314]
          }, {
            cmd: "shader",
            id: "vignette",
            enabled: !0,
            data: [.7702702702702703, 1]
          }, {
            cmd: "shader",
            id: "edgeDetect",
            enabled: !0,
            data: [-3, .04954954954954955, 1]
          }]
        ]
      ],
      a = sk.loc.getSearch().filter;
    if (a)
      if (32 === a.length) sk.util.request({
        url: "./filesystem.php?filter=" +
          a,
        data: "test!",
        onerror: function(a) {
          sk.loader && sk.loader.stop("thread");
          f()
        },
        onload: function(a) {
          sk.loader && sk.loader.stop("thread");
          try {
            var b = JSON.parse(a.target.responseText);
            d.unshift(b)
          } catch (c) {}
          f()
        },
        onprogress: function(a) {
          a = a.loaded / a.total * 100 >> 0;
          sk.loader && sk.loader.create("thread", sk.lang.translate(
            "loading") + "...", a)
        }
      });
      else {
        try {
          a = JSON.parse(atob(a)), "string" === typeof a ? d.unshift(
            JSON.parse(a)) : d.unshift()
        } catch (e) {}
        f && f()
      } else f && f();
    for (a = 0; a < d.length; a++) {
      var q = d[a];
      q.name = q[0][0].name;
      1 < q.length && (q[q.length - 1] = [{
        cmd: "input",
        id: "source0"
      }, q[q.length - 1][0]]);
      for (var l = 0; l < q.length; l++)
        for (var b = q[l], c = 0; c < b.length; c++) {
          var p = b[c];
          "undefined" === typeof p.enabled && (p.enabled = !0)
        }
    }
    g.removed = [];
    g.presets.removeItem = function(a) {
      a = glfx.presets.splice(a, 1);
      for (var b = 0; b < a.length; b++) glfx.removed.push(a[b])
    }
  }
})(glfx);
glfx.register({
  type: "bleachBypass",
  param: [glfx.param("opacity", "float(0,2)", 1)],
  shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float opacity;\nvoid main() {\n\tvec4 base = texture2D( texture, texCoord );\n\tvec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );\n\tfloat lum = dot( lumCoeff, base.rgb );\n\tvec3 blend = vec3( lum );\n\tfloat L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );\n\tvec3 result1 = 2.0 * base.rgb * blend;\n\tvec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );\n\tvec3 newColor = mix( result1, result2, L );\n\tfloat A2 = opacity * base.a;\n\tvec3 mixRGB = A2 * newColor.rgb;\n\tmixRGB += ( ( 1.0 - A2 ) * base.rgb );\n\tgl_FragColor = vec4( mixRGB, base.a );\n}",
  shader: function(g) {
    var f =
      glfx.gl,
      d = glfx.filters.bleachBypass;
    d.dirty && delete f.bleachBypass;
    f.bleachBypass = f.bleachBypass || new glfx.Shader(null, d.shaderCode);
    glfx.simpleShader.call(this, f.bleachBypass, {
      opacity: g
    });
    return this
  }
});
glfx.register({
  type: "brightnessContrast",
  param: [glfx.param("brightness", "float(-0.5,0.5)", 0), glfx.param(
    "contrast", "float(-0.5,0.5)", 0)],
  shaderCode: "uniform sampler2D texture;\nuniform float brightness;\nuniform float contrast;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tcolor.rgb += brightness;\n\tif (contrast > 0.0) {\n\t\tcolor.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\n\t} else {\n\t\tcolor.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\n\t}\n\tgl_FragColor = color;\n}",
  shader: function(g,
    f) {
    var d = glfx.gl,
      a = glfx.filters.brightnessContrast;
    a.dirty && delete d.brightnessContrast;
    d.brightnessContrast = d.brightnessContrast || new glfx.Shader(
      null, a.shaderCode);
    glfx.simpleShader.call(this, d.brightnessContrast, {
      brightness: sketch.util.clamp(-1, g, 1),
      contrast: sketch.util.clamp(-1, f, 1)
    });
    return this
  }
});
glfx.register({
  type: "colorify",
  param: [glfx.param("amount", "float(0,2)", .2), glfx.param("color",
    "color", [255, 0, 0])],
  shaderCode: "uniform vec3 color;\nuniform float amount;\nuniform sampler2D texture;\nvarying vec2 texCoord;\nvoid main() {\nvec4 point = texture2D( texture, texCoord );\nvec3 luma = vec3( 0.299, 0.587, 0.114 );\nfloat v = dot( point.xyz, luma );\ngl_FragColor = vec4( v * color, point.w ) * amount + (1.0 - amount) * point;\n}",
  shader: function(g, f) {
    var d = glfx.gl,
      a = glfx.filters.colorify;
    a.dirty &&
      delete d.colorify;
    d.colorify = d.colorify || new glfx.Shader(null, a.shaderCode);
    glfx.simpleShader.call(this, d.colorify, {
      amount: g,
      color: f
    });
    return this
  }
});
glfx.register({
  type: "colorIsolation",
  param: [glfx.param("hueStart", "int(0,360)", 180), glfx.param(
    "hueEnd", "int(0,360)", 260)],
  shaderCode: [
    "uniform sampler2D texture;\nuniform float hueStart;\nuniform float hueEnd;\nvarying vec2 texCoord;",
    glfx.helper.RGB_HSL,
    "void main(void) {\n\tvec3 color = texture2D(texture, texCoord).rgb;\n\tvec3 hsl = RGB_HSL(color);\n\tfloat gray = 0.299 * color.r + 0.587 * color.g + 0.114 * color.b;\n\tgl_FragColor.a = 1.0;\n\tif (hsl.x >= hueStart && hsl.x <= hueEnd) {\n\t\tgl_FragColor.rgb = color;\n\t} else {\n\t\tgl_FragColor.rgb = vec3(gray, gray, gray);\n\t}\n}"
  ].join("\n"),
  shader: function(g,
    f) {
    var d = glfx.gl,
      a = glfx.filters.colorIsolation;
    a.dirty && delete d.colorIsolation;
    d.colorIsolation = d.colorIsolation || new glfx.Shader(null, a.shaderCode);
    glfx.simpleShader.call(this, d.colorIsolation, {
      hueEnd: (f || 1E-4) / 360,
      hueStart: (g || 1E-4) / 360
    });
    return this
  }
});
(function() {
  var g =
    "bgy black-white blues color-negative funky-contrast googley high-contrast-bw hue-minus-60 hue-plus-60 hue-plus-180 infrared inverse monochrome nightvision posterize radioactive red-to-cyan saturated sepia thermal"
    .split(" ");
  glfx.register({
    type: "colormap",
    textures: g,
    construct: function() {
      for (var f =
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAETklEQVRIS22TW2gcdRTGv5nd2czeN8mmm1vVFR/WxocYKVEQrII3qC+2FaSKbcEqpoJCKdRKIFgQfOhDH7y8BHwVoQ/iW60taY1tUxtSrbdoQpo0lybbzWZnd2Zvf8/5z+zsrpuFgWW+Pd/5fuecVSDeEfjmNnB8ErgD+gToCUFVYlDQgUrmEWDsCnDmb3rfRk+Q3kegkK4qnShfDwIf/AhMGKT57VpESW+nh/TP14GPpoC0KmuBsOvN9aVDpI0vOt4h8g7LWtZUJY7iwDlgptTgTbkcb6n7vgYKmpPb9uZaBZ3wqF0wy1+RpstcnFttqFWVLnqX9ArMMbgT3gGXAdQ4rOo4UPW1gNcbfOk2qIN3UKMuGaBQOtsUjoda8/bSb4zSGSdcMzjDeak+V/zMGWoNvO7t14eQ3nrPWRgNvNGbaiOdr2N5ec+24BqxxXrfJw1hUd9ah9yax2nuD+/Bevqgs5XmyXrJINp1BEtLw04DDshbI3B6NE8fNTiKhblU08Z5qAwejL6EttAgFucH3Wti6Bp4LPE2quS8cocA5Nbq4Lo2gHBiP4rmItZWXmsBD7fvg6YnYRq3sLHxoXNNdjYeanvPCCoVA4XNn6CoyqNCgX2uDM5bC4SeQSD6NKzCLO6tHW46KRv8MOAJwdy6gUxmtB5OgvdK8JK1hnxmArnCeNPGg9EXCfxxWMYfMLIXYJV+cM+Vw9XAza3rMPNTKJZvyKFwrjZtFyKJAxI8n7lE2r8EMisvlWsbwfPZCZSrKxBiwx1qHXwSpjWDCumKV90rag0CgWEE258n8DkYmxdQrixRg3nZQOOTir8BVesk8Gnkc5PUYBkQWdmA9VjvMZRLaRQyV2AVb9sNFIU2Hoc//Bz8kSdh5WfJ+zxpqzKgl7Yrh7rjCKDqcqgF4xppq6iSrnkehs+TRLTnLRStuyjcvwyr/Jesr4oV6J4hhGKvwBfcRRv/DfnsJcq9gopgfRUB77OIdb9L38swN3+GaU7LvlVZvwbFr50QAf9uBDteIPB55Am8VFmU4dnA732KwA8SeJzC3ZTgrNkBVhHUXibwkRZwDiCoQWfHp9DDu1vAuVaIe+jt+57AfeT9C4FfdcE5nBDr2JmkK7CWCXyiCZxrebv9D00T+O8EfrEJnGv56d05ReDXCPxmE7jUcR/KA8msKBYWYGQuEvi8C2YHoAYPUoPcDPJbl5vABbhBGj39V+V/ybJ+dXU7HDfIIJE4T950TdW7zlDX5OTZG9ikAX2LQo7B61uR9RSO9WjgC/qb/Ck3Zg+17g3kEGz7ZBtw2xswEPCNbgsOZNHdXYES1s+KUmWhBdw2yJHBWAM4BZfg3CALXTehVE86OkPZW2Nw1lMpFfP/HPsfeJo01g3sO7AD35171T3HRvBIpIjjJ1M4/fHwtuBDT/gwenoI+/f2OwO1L6IG/uahPpwaG8RjSa87cAHubYOfODWAoyMp/AcbUr3EZfSLKAAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAAcklEQVRIS+2VwQ7AIAhD4f8/GiUZxjBK3DjswEg8vbRiJcpEJHO1Lf4D+HACRISY9Q7iqnDVaiH/xdEEHBuAA2R6Y6jBCt+1kf+N+wAeG7gAMr1nvsEKj7S7P+QWwGuDK4BMj5g1WOHV15vn5r1/ge4BDJuRXu/4rz6bAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAAeklEQVRIS2NkYGD4D8RYwX8GYQYZ4Yu4pBmevGVk4GSdiFP++28mBkaGDpzyIPMZGd7SVJ6ZUROn+X//swDtHw2A0RQwmgVGy4DRQnAk1wL/g3GWAf/+MzMwMc7EU00xAquReTjl//1nBOo/gkceZP5fGssL4DGfiQEAQpWPHrbb0F0AAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABbElEQVRIS+2TvU4CQRDHZwGNNja+iU9oiImFiTZamegj2EDQeKAJH4FGVCz8iIlUEhotFBG4HX+7d8DhC1yhkwx7e7+dY+Y/s0axiYg08TK+Kcrv3FSeZMy2hZ/j+QUqYvXY86ZRz7d+xVt9SXCFO5v/h9VsqtxoP1QbF1gxIoc8d5MC6KOECX5A8r0kt0cy4V2L2DLrNmy4EP8MR0AEcjyPu+9NTREgTW50Z+jbcU2CNdYzCikkEwwf/K7N+xpeooDSAt/3uyviq3gR7iZhVqBtx9xKVawU/aTMJ0Dtcqrc6Manz6aTFWngF3Gh0y69Du59go7X8QoFuDOua87ePvb8eptDwIxKgJ/AZwIMLv3jTW5M/EQCE8LdzEWmX2upcsqJBLijEY1Vilty95m7HRfR7UcT0KFrjRUE4FwtI7Mx7r3vRgLQ3TqrG/NT+HccPw4DVyZ8BB9JgHQFzo6mAsh6qvxfgP8J+ONX4Adw0T2ZvsIGMgAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAFIklEQVRISy2VyW8cRRTGv+q9p6vtWew4Hs/m8Y6dsd3eZmwCSUjuRBFCkTjkwok7/wpnJMQBLogDnBAIFBQWkUgBQhSQyCEocgyOkYCIKG5+PdjWN6+6vlre+6reKyMp9/hJwQRYl6OL8jRQqCUFMjpULF9l+qbAOu1zcNtws0P+VyWyOg1aipSBPZUYF6tD2+iGRlTRpKpaABk7bTO2B6Zou+YzjZqqGif84LiqDfoX4SewpeAHeMaC53KrnadW28epZli7CsbTIyXGVx1flvNQ/aeBsicBfMC+vtqnKirlwj9p5VjMl9aeGHX/FV4K/zzlgSONekaTrtG66+gCE3eOQy0882WeHqnkeaqBpuspcwOdNYE280BdYP56IOtFqgepprGZGyFeSasmRJCSzOObrG3VCCpaDAnOSbVlUi07VpO03UfXVfYRz69qOayp71W1DjcPxl0E2L+jMms2Q6sVxg28VBmYdkJV6B/bP1Lqumr4gXo+AuDfmodvXqgEf1uPRrHSFKe8SozbtHugw3ccFAKUnTzioww5FTtaDz2dDwJth6FmAwS4+1g28jXuO2phN8JAe3AZtsM48/1DjcSxpqJIMyALY+1EMc5EakQIcOtHlaNEzYgA0hq8ZY1US9jTWPPtNxqDb0WpehYBkopWac/CjTEnvPGTxlmzydqrFgESq7UkVZvvMvtUrh+qgs9NsJaEGliESPDNhirh79TnViOhmM/t5sh3Em6CNWolRmyLAPNBHgZGE4HLKTrKmPwCkzexM1jz5YEiFm3BF8jYZJf+NfraBf/pvko20qyN1Q08bdiStvhexjbSWObje0pxfA4spym81bod0Tzt0wRjPrypCn3z4IxNNajVhnYajDHGvH9HE0nEeEQFgwrpUxtRiz1G2dN790B16zPfQyBf/WqglVqkVpUbwPfo26HGCXSWoDMrDapGi6AB4ppBgFdO5SLwJpgOXa0S5FmCK4SYSTnhr/6gQBS3wdECAfbgBwTeg2sjhvnid/gIVWOthD68r03aS6ABzCf3JYLLCCbDrnF7egQ+VwiQjsh8dHvI7xDwFn2bJ0J1GDMU4IO7w/X3WKuPABuIcWZsZLh2uRD4vQM5icehedpNi719LSFAAwFs6sm847G80V5qODhxAEYLVUd1gi8NBXirl4vrL8/Reeym52qLOrAee1xDFrj/j0SO1OCfBxl8gRWuVycmRe79DR+pG4Xao05kvq8Vcm+RvkZMEbxzAJ9oAVyMOX3yc5Fc7ZICk1xxc/tnkhFhaL8EdmIKHGPatGuMMbd+gS/SKmJ+rK0w0hztepECfJuvOQD8OIuPl/B5i0Po4ludQytS19wg4UmBi7HRpYgaQCp0sKcQogSMvruQU/glgj7noBLYAsvG0RwBmz+fST6LOI4u09/H9sAC/DQBmyNKLA67nq9rjqdNsOS46hrykkJkDhHIK1GEEl2lGGaOr1knUAM7ybf5/QG81SJjrriWImjVppDVGVMr+H1uUFFcWeuyxy2g3QHj7DOKNQ8P4Tl98DI+9EH7pGgnHIZ5gO/UuAvgsv9/EWxw0JWiCIaFAPkVIij+DNVfenH4FJInueGZI27DDL4LvAp2wQro5o7aWIcXAYWGeEMuTxzCYZu5O3w2HVPMjXiUSnoTbNJqM7YOxnlFHEOK0d/hMX0d7IIhx7FVsEa/wZM2rHEN2wdN2sWzbIHREXzxbHt67cTWsWXmIj//hf/cAHCVr/7Jcz86nCX9B+yIwCAYJ6H7AAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAA/klEQVRIS6WVLQ7CQBCFZw2Cy6CxKASSIyAIByBBI0h6AAwW1wtwARSKHgDbhAOQoJa2YZtheLPdn8p+eV9n325bQ+urJXDZzaG7a447hCmHu6zm93HOUD6aywKiBaIgX14yuYAcjrLcr3JXQLLgW4Avr7LLi+ix70+TPGomgNv5GJ7QLttcQ9zYagFfgVDB0AMQd25twBzOs8gv+V8BsQK5QF9eMjlgDkdZ7td4X0CqwBWA8u/tnUbVlFR3wymR2zbbfqSLCf5Ih3IqZvgvECoAA6xuNZ3KpzqgG15bgI9zhvLRXBYQLWAFLKsnlef6Z0f4Dkm3XICPI8bzqfwD3FHc1cBpDLIAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABa0lEQVRIS7WV4a1FQBCFKQEloAS0QAsoAS3QAkpAC7pCCd6bm5zNWLv25iYkfsiZ3Znz7eywLcs6/1/tE8fxR9v3Xbw8uKoq8YmYbdtE7DiOl70phutt295yc70sS21ttJfruk/lGzX7GwA687Q7ASCdQ4KB4ziseZ6FjhhusO/7i04xXG+aRmkCNQVBYDT5FGAEQAm4QXkzAOCQyACZpwcA+B7c4DRNt87ietd1Ai7PjXzo0F8pGAFQi6F4VZI8zy8G0OIqANwY4tZ1FetJlzsJVwiGUQPWZ1mm9X6ep2XbZFH/GAGYyKZpqjxBABiG4dGgDEDupGVZLlDkTiqKQlsiAfU8710AURQphyMA0JBTzRCcIL8C/JShqwDwTqrr+maQd1IYhu8C8H3/YxCG5WxUoG6IUqEYgqoY0gkA1wAGV0UHAGuSJHkXgOM4WvOUmVqU/x7laniH4GR5DM0A1e8VMRwA3XkZpAnAHyu6DAchzeRWAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAE4klEQVRIS0WUTWhcVRiG3zMzmWSSpklTU1MzM5lkfjNJmoptBFMQrZYkTREVYzcilKJWGom4qYgiglD8qa0ibpS6UBD8wULtzoVVxI0IFrXJTGpEqtid9DftzFyf79xJXZycyX2/c+73Pue9x0kKChpSQdnmsN85xpD6mV1uq1y1oYJDt9Gsy/s5p+Suh6XluqLL8nouwnNGkd/5SE737D8kVeuMQPFzgXJRnjNsLlL3xCsf+PWqNLweX5EGY1llGQVqXvvoG/SG123upKblTymFnmN8/v159jbN9gjUthxo3e+BYn9L/eg/XmgP37+2B+t76CWxEij6j/CXiweR6nXlMVzEkBkrMuz/pAdwB38HeGY6z4O1OatkkJUrbkPNKE4TZjqEGQL0gKb2agN6Fw3GabDgmnpzvvfpF+hiULfQ5HqDgIGCYz16nvnJIx9yRBlvcjP6unMNtVCTt3cB+PUvv0UfbBqsK4XWgcEWIOQB/MUZXArdH0JD7Yw+atoZVuOmpnqCSOWS3PKNm8ZDADSPifTUPo2oT5FKqBcAUMB4odEEUL5bafQyGEreNIACAzAYAizs0Hp+bTdIlbrXSzzPNYGmpx+jwbR2ACGB3mIg/fvDFO08+DKABjROfRd6G7rVWBJNf+rox6wf0K1ASqJ3olkKYgzb582TP6ADkH5S6H3onaShDUhW4w7OZ4IoAAyCgGCNhzG3BGR1//w7NNyjaGVVkSV0A9AIISTrWXU9tKAJzniY6uhSLQTgk8ILAeFKs1rH+jvRy+xdZJSa+6csQfmdNLdZk0DYgtbCSa3p1kd6ej96v8YwOUEqWtFjJGEtkfcdfBVAaXWxfpb6BHorRmMYLAHowNFPPCAbD9BbJ3q7/9wASSLdW8fGgpgBWCIFS1fkVgxC5uYJHjh2moY6AXAVSKvU1FQ0AHUAAWDy0HEaX09Nn2IAilSB4FNiADC450XdxfoxTFpKouhFSxBm06YX9tJcJzWb2WcAkBmfJDM4gCGXn0XfpFEATvBkxCBhcA1AZvqAB9SG/iApGke3pMU4adtn1/wbXjcAe9h7G8/agBBvgnQnv5oMYtVLnN5FucplucVr0h8GIeU/gSOn/qXhDqhf8RAc94X77YbydQzWstp3/Cea6tBw0OtTEjXdkgCEFJ/J2HOf8tIODGzyKYlVaoA0HQDs73YfRuvgE+llTlEDJK8P0S56wRLQAbxeUpSixiCFSRoyQLlH0HsU0W2aY8dxD2noZpIGp59F72MktRvdPsUx9Dh3UgxQ7uzilE9AFAiOFERIgX4Fwl81j+DEUlqlIAHRy0AiIdVriiyuUoNeG9Th7+o0lwDSRhJw1QOIVEIIKUzMvVfR7ZzPsDaqHPR7Pcp9YhDS6G7hlB5l/Rb0UUyUaDJMUj0EMPM2zScwt1Fb0cvoZRRL0pCtzz/jdYOwl5Mep2tLSYkau8hd/nG0bg9hxt9FA7wr4yFakly9MecvQVUuMpirADjLOIPJC3X90thJcSsNX5aWGKZXALR4Xfq5ps8ulDHWygs3hPBMw6SAoLM1vfR1AuIGoJs6u0zZ1zQMCEgz754nIa3UbPCX7XCQJIn/627htKbQJ1g/ymcygklLiQOgzMDM+5hro6abhPSxj9014ackalz+ea8bhGn07ej2qRlEg/AfgMD6H2ekyGsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAEyklEQVRIS1WVW2xUVRSG/zOdzkynM5SmpdDSM5dzzp7Ti4gSuYghvsjlSY3RGkMCPpiIIbxI4oUHjAZjTNQQ35UQEwyRN2J4NzEx0Wh8I1GghSqoeEOjIdA5fmvPacGHxaZ7rVmz/2//e00gKUuifiVRTS6uK2nXe2v+t1v9rQqaV9IsqhPX7tRFdUXU7XlAKpIX0WkU5Np5H2pb1Bx6ZqNKukL+kg+3VnKOGvo3qDn+2j5VtEjuYh4L6owGcklVIXWffvSOqvrR5zJdyGuuyFUyhRuqOv/lOdV0Ld//Pl/nqV1UyL9LWlCffsr3lz9v32VnXlSAokwcsJ3UNOVWKU0IZxBsXaWw+BUlBaKfvTKABlir/D3IOqhk6DpgAgUZANp97JfZH2CtAmgQQBPqRIGK2QKoAdAAQFxRQk2LmoN7dyttSaUMSNkFjmwgqWmXATSg468fVtoMVOkuKiNvPZRdlFsPAFfW2VMf+nx1CUhd8l1A+bp5heGSzn/9hdJQCpauSksIt7A63+cSAPY8AgAOp+uaQPBMUte0B1FXh3XX9J9qcsAASClfmHIzqRtUJ7Goq125prgVKAaSi4sIL3G7gIoqHoQb6vL/wEPqOcnqSh5UBIjdW2fUacrnPSRzCYKSdr9a5A/uexIBvc+XyGcIMze4sAugko4fOwoMKeU7yhlOAo7MKYgLJ7s6e+ZjpRP0bwfsWd6E5wDoE+jQ8zmAH/jgDQlRD+GAGZwwzfri42Na3cjU5fBlXdU9yQD7Jt4cU9OeDXU1aZ4AoQDITlICUIXVoqqp2m21EBRR42JzSJGVJ9cGFI6Kh3EDABwCUlfwPVyr57gIgbu2bVIHAD6f3IGU4JIWfV54dq8XuJzvOaln8Uajq/feekOddQBsAyEp5BDuBvD+25k8+cuEvZV/6YYLALEFB5x8abuElcxSvZrr2gaAWRwwA4DDT9yvYW5/tkkb6PbzXqdwSgdQU66qR+9tKkR8HHPzHtJlnNW/AmrDUFmTiDFAvafWlzsJULipMzqkaJJ7IW8CLJadFOG4XTu2yY3bkwEQLrF8X+6kFmAPPrdfyVr2cbHlEw/BdPSeUqBzZ3AA4vymueBX4qZ3ggCgD/ZL62/1hoZvbAPpd4bUoDYD4NSrc5y+oI1A6gKgi8AqQ2nWO2VALz+1U2vscNSkLYM0z9Bc9ACmcMrcplmNczuRF0+sOAlIgNoCgPH1AfOCI5GP2/aElp1UVLpmRM0cgMMhDtDLTopw0u6HtysZYx8AzgDZReC0nhabAd99AwCb0ADwEMwFfxCIxgn67Jg0AZAVADbRGSj6m3xNOnHEAxgF0k363KTxbQQ29Iu24oDTRw70AJlLGksegA26CpDMKa88/ZjGsXeCMH+43EkGacqVtH/zJo0CpZU75P9OKmrHuhGtYQbYM4sRaLPobifNrhtTyC+PzSmbIwmRJgA0J3COQNmNHMDyM7Ab/pn4i7gNj9PSWp5F/lNnvxg9p1jNP9LnJ7xAjRskA3l3n9+kk+/6/DACd0ze8rPEAHTpUwP2J0cP+/x95Gfs9iaBRJ+MPmXc9ubeOY1w+LYN2VycQbLzFOlx4MGtGuZ2GzaI+fwKgNxJO8MxjYwHCnkOMaB93upyJ/0HOBGQJypfZzsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAElUlEQVRIS02V22tdRRTG125NCYoiliRNT25nn71PbkYRLOINXyxpUkEpBd+rUsWTFlPEB198FjRNpLSC/4AXBGljowUfpVopatKanHPS9GKorYqapiTNuYy/b/ZO0sAwOfOtWTPrN9/MDszMWRSZb/nYLEcfp7/j2KK40cqEWJRjHF294tRHse0Z2mUX0K+RyOIuxrL0m7GFQ6/YLPqPyEs+TwadmDRubGLM5tB+RfteOXyeHejt9KGd+nrK5gJnMwyfI0a9/4ua0dtstjhvs4HZb2jnGf5ca2zkabKaq6Chk0Nr/MT/p72exAV5C11JPzc2LQCbIPJxg9WBU6EtMf7POhwB4/dw1Gh15l4kx79oSx6QAApSZIeHnrBa3O4hnCVmOQpTQAnkj0ZeRW9FvwuCB6S40KYmxq1KsSpyJi3AQ0gBlSe/sWrc5CHpIH5B+nQDQJu54gL72+7Xv0COafpz6FNpTPCC7XYlhDKtpqJy6emlQPbu6fUbLTKhQmHL/P+XiktB7I23mWNOnd8VgNyhv0X/B2M36N+K7kULfROkVQ8ysqvk/488xwaftHq+DQhZf1LTNOllAKwy/0zhNQ+oFndyiuaL/IGYWXStuTA+jtYMpHZ/ylpDED7TCbOmm/yWvonYjF1E1xoCKUcKQjBqr7vSlgTAPE0A1jyI5CqMjrzo7V5EE4Qq/6+w8espoNGhfg9ADpKVq8y5w8ZvM3aTfn++0SxkI+g1rk6V3Gv0AiGYg9n7zXV3miNvDcDa4Bo5VmjSDw8+xdyMB1TL57xT5IAV4m8Rc+zNg+g7OLyORPdOkJsEMmeTRyc2rks9n/VOki6QghCcsPcBEFhxKwAAcVWDYc4qYWSrbOj42BFghCZIglBGr7GwCvib9oEAEe9YXADkpiqFrwHgNv2B4X6zbKLXyechAkCQlePp+D5z2S6uTaLLhZpfEUhAP9P1oLmedorMcooxa+cSSAAQ6AO7n7V6904AdnkA67reBDnovcIbCQAAWT45CDlFOQQp+M6+9A4oNlAcEC5RwCJtSwcbwgVfnDzuARQFKb0qZRJI00l9cvQIBST33rsETb0Kkf7uyEtmndznnggICQCdQo0CKhT48vCA1123IMX+PVl3kq7U4/EDZh0A6CEm1WuMy0nSd2W2m/Vl0ABE/rp3UuydIoj7nn/OrJtHVQ80V0IPtPYhXdcl+N1+diquvM1sDghywQIbvEHb2pazs9PcIU64BJxielV0ygLlgHD65Im0wJDCAu+A9abH8+NxHARMFWDdsQcwl14nWf6dAoBYx/UKQswJRR6AYuS0/UOPmMvwKPYlG9e9v9tJj0YPme3ky9KXZf6mvu6k3pYWs4FW1pbLdK31xiXXWy7gvJbdIgBKXNVSg/MuEITLbOBP2pWbl7BwaIv34ADG/XtBm2fmAgnOz5zxBVpvzq6peMWoT6/DV6dwUAadAowNKkYOUYxgfDj+tlkrcPoTQNrkFcblJIEoHNpn1oL2MPN70s1zwpe9kxyf4cfMmiluQPP1KU8/43pIiYnyAGjCAQPE4EIPQJ/x9A37H9Jl4SYYwSaSAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACYElEQVRIS51Vu1JUQRQ8s+wuS1laBgSKhQr8AJGvn/EH+AJ/wBwDM80slKJICYgMzC1U1BL/Qk2wlu57pu85d3ZNDC5z7+np091nBihmNl/Hj008Ozaya1hXu6d06779tdtY7+F7s9aITVGbYX1pl3YH71t4X6/1jL8Cfhf1HTyz2ldc9n8D/D6wjdp7mjSIHwPfgq+bjS9pnMDfdsOlL2qQ/x74rSW+hJddDGAbAtcrgQZoVEZO0YABnOBD0craB+AMrrrCaf9H4GtdP+fJnL4/Adf7kOseiLN364vf3O/4oi/tP+v6O54H47Vi5amN5mEugrcCy8yxqQf4l4FiZzjBbDAPUgGHNQ04ArZDzQOj/mIwz8F9n9OA+O2DKTaph1L2bGWeT1xEXbH/ERCXvb7UAYR4mJsAP683IIbgxvlkXD1zb4YgXzdEq7SIf+37D4PTG/uXZzbubkA+RYlzlcG49m6QZHLOu4Diy7wmXGDgsj+N1jy/yc/afjJujjrfml8R1TOeg6vuPZwfuuFbGcpzm/S/Ajn4sMHw1HRLFgUiOHuNYeJ7cwMioJv5AYO6jjk4a8KzrzyAMfZc1AG1wanN2kU34MXg5HJPeWHT/gZQlNPi6g1cIJvWYNice35CoD01x1yUuDhDrtkDqB3Z78GJh3axR0AO7U8KEL6o/QT8dx1ft8Zxaj8Etob3t8BjaO6Je9ibeHltq/NlwXex4Qb+O1CgPTU14B+ToUAEfwz+DPwD+9UPQINhcIpz2Ac1gIKzt3PdqALqQBSc3BGCcoDBjeActuE5hr4OIwdfqfgVGtt+FRgQnlgAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAADXUlEQVRIS12V8U4TQRDG56gan8On8WV8GZ9CY2KMRvEPE0PUPxBFQQXaQu8OegUhIK0Vabnu+H0zu9fWJpM97rezM/PN7JEpfnsiQvsG2xSVZ1jTT6UEU9mN/DPW5ws8GJcFrvJikeuR7GVz/w2c9XKJD8Dpr7KN959gc64S9NT4Djjz24C9wnP6BR1Z/B3EcK7g81/QmwWu8hFo1bCfkWm31gMKYEFchDXAw3iGaiH75BbE+Rvwk8RDKft4T/6DReD5NZ4vFng3chbBIingGO8sjdCXrsVX+Ivxp7BJTFL1ZIlv4YwnYLMmv0twtfwZfwvvH2NNEikEcM7znT9aEmB1ihJF2thgRcK+wqiU4FCd5ZJj7eDP3SjSJp45CV5AAa7SJqc/9pB9SQVAoByB29ZlJuldolDufyS9GH/OXWh2ScNAetjb5hTGIpnb9yb+BTjjk7uI63jm6udPwcOS/7rlkSbg4bWy250YhIlSBG4a8wAIcBgFoMoMxMPfNgEKXAKN/j5JTG4tcfiX9I8C21XD3+8aXjqPXUxX7X1MUEMF7gWyi/TnlHxo4p/9x33K5vwa+UEA8/UztrEmnumDv9rHS44pi+c4spsshFdD61zIOQHkXNN1oXDkR8k/7knfk4HxHngUOJ7DKeEonhovzd8aECeJDeCUXXAC68PIvXgKSc5vxaU16CcaFJC/F+gNVPtWjIxfOYcIe5wE8/dvwW9YpvevtGIBK54kBaAYHMsKdj7pSQXWCBSL4XeBe67B+5HTnwnaymSZwNQF5PkMbgKDsxgTeFqYf+OXrhP25MZLb8BKOtfvOyelMH4M/wB/FMc9jQhik6nTMfjMecaVIgWbYjYw03t/dHALBTIJ2D4Njrz37FB/lEtF3mISYBSJAsHY4TPjKKzl/mQMcoCVAUZD8NvOmWASmgJyz+SyMN5BDBbpQs0nUYcQiP6IYSLERpnAiKPDATg63EKByJGTQKFTM3U4BK/hPwPHChGcsxkKAQQCMPG7sJjoAf4ukMQZrDzNUWhM/A73uEgU6AR2/AsTwqlhQiwAnMX2sMcmaJy4XyMTAJwxSo7hBAKZv39IuSahTaAaAvGdWeRxSil2jf8iFca7Y+ZF8Xth+cACLkolN3iuzbr4/+GcH0aRfyr+o1L6Opf/AAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAB00lEQVRIS32V4W3CMBCFkxGSjEBnoCOgroC6AVJHQOoGtIUFQKQL0BIWACVdgLZhASroBBU9O3nmcr7kB3LE8V587z6bMAiCSxzHQRxFQZIk3vo0ndJPgtb6fJnaekgfTf+WZa6u+WzzolGXPp9l6dW5z/F0Vuvw+bPVan/qSs1fuho0AdiA6JMo6+RlSo3H1lyrL9JXq8XLpc9qnTk9Nsl9dsVHQy999t+lp+c+P+dfVQ+fsHfTswG0TXC+XFJjSWuDEwoIG9ZCep7NiB4TYFR7EGX0bDzNagKCHhvnPu+bTUMvQzIBST0P6etwUPWOiP5t3wWgkWAQ7ppgNeHIvsRSQDSYZ6w2AH7EBEkgCE1LkkAQjqgkAARxPQ8JBEm9I2BwN2gEIEnY5rkjQEN0RQF1TXCRpvW0qyMkG+QEaSRxgkBN5eETpO2DE8T1joDh/dALgJNgLiFOgJxAlfCVABmS3QAjQOo5QaCGk+QRhMu6JskRBOrq7xG0JEiSEI4eRmoAIOF4OnkE8Cb3FFDXGdwVhUcA13OCtAleCcK90SRJI4iTpBHUIGH8OG4NwKRo/kY0AjDJ6pb1CUCT9hJSCICeE8QJgF4SJCeoEcR9WgmqSfoHqy297CyhZKsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAD0ElEQVRIS+WU+28UVRSAv9lOd7ZPiu3WtpTaLLSNfVg3tKDQEiovixAjgmLQgCRqMLXxxSKgBEJYiQH5xUfib4YEkgYiakyIxMQQDE0U67NQ7FKxRR59bLfd7mN2dsa7s6W1drf8AZ5kktl8Z+/c+91zjgQY4vnfhmSdm2mwwI7l+hh6fwB9REUf0zAiBoYedyNnp6IHNXRN/E6gKyUrlehoJKnElEzB/TNxWXAt+f8zBBd7ShaWdBk9MANPE1zsP1FIuOuNOU1luIpW0hHw8MNoH795+6HHB13DWD7uRFrvIPr0PLgyDJe8KJ5RuB3E8IZRbwaRLBJKvR19IITuEwL9KoY6KRAJbHX5RDqH0MNRjJjIf8c4V38XPNFBYtyZh3p5OClXHswlctmX9KBx7kUP6VM//VLXfmOzvZmarApy5Gx0QyeghxjR/AyogyzasJr73atoLVxD0+xF3FBvcy34N53Bq3T4e/jygaMoNfcQPvwwrzoa+Gmsl299N+CaFzwjsP9H84PWgjTUPU4h0Yftkg/jVgBjKIR6PWDy1Pw0Im87sR3rxhgIEvWFzUrUw/ENm3xXrcljIoyYyOikSNluQ3PVohzvJtIlRPxHpJyrxPkJT5yPV4T0Z6DPmGsrxCJZEpfI+Y1cqNlNdWYFmSnpU3LEHZPmmEX4YD0nml6jIaeOIls+oajKSHSUQdVLtRAr51jRXq7Ete1ZNthXmgJ/Dfwhnr/4rPqwuaYlVUJ+rJTF+5rjAvtEBcYqblxgjKeuKqHuwKN8d7bDrE6le5TwOZErQpIlrCuKcbqbaT/TgdJ2FWNQVGivf4IrjxRTJS7z4pmfsbX1oF7xIhkiZpqAZwfPsyJ3iahiUYcJQvpgCR8+vp3n52wkzaJMy0jJEPNjk4NNb6zn6PzXudeaN2UtSRIrixayNhRQ8t5yTlbupiLDgV8bY1AbFu+i9cZDKRey313IF40uPMFevh/r5nile5LPF/zQQk4v3cGhvpO0j9yCZZ9PcOu8bFR3PaeWuXD3tnHx61/uLkAzNGRJTupop+cIu+57wWyfRGFbW4rzwGo+rdhJebpjWoo5P2pzCR9ZzDnnOzTOrp+SExNktkCRaIG9C/hkbQtbCp/AarHGb3acx97NYby1nJaWZ9hXun2aQHMYbynjxdanOFj6Ct8MXbi7gJmqI8Zuqv0UWO1J04rbN/NV1R5qsyoTC6rIMW/1dOMO1uUtn9aKsQOa/dtaxd7ntvJmyTayUjIm1rojwKJYkJ50sOatdXxU5qLYVjBN0J1hHHp/qdnWD81y8g/5bJgXFalsYwAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABTklEQVRIS+WUTU4CQRCFq3oYTZANG+LChKUnYKsuNCbyM5PIMIAbjHoWr+CGC3g3d8Zo4swI9d7AwhQXmAU8ur9+3Z1XRauIVJuPLCRsReZyZDqRE1OVD1OPx+HCeFaabPxKP/aLQ3GQd9uJ8SGWSf4DHXOfbtuu5/J+LzV+xfOzb5w/+sQ+/R78Ht+ubngAGSKaMvGHMrLE0gKdoPGXqc8HxjMELssKFUgLdIC22AEej0dGcvIF/UmBfbSF0nq8c4wOSlBoyakT+jsxJjyu0vgA3gcW0TUr8FKhcjOqhl8b+/zc+A39z+ykWckO4Bvg8ujWnPgWeWIFM3aCBky4PBobH9K34vlTjmu/y6XxAVT3dVaW5JoJPrICQfk8c/4/P2Pt8J9dc7T383ne+bFgzy9tjBdH5I3rVrxVUPzw+Z3xU/pfa//uVvAf4M0O4A92eNe5n4UIVQAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAD10lEQVRIS21TS2hUZxT+buZ9J2Ym87p3HomvuHHluosuXbhQQ2uT+qC1Ig0KQVwr7hTaTSlIN4VCV+5KcaeYqK21D9CFoPRBaRcWkWhijKkzk8z1fOf//8lknMAlmXz3fK9zxgMQbRnxUCjGUQlTCOs+6o0samNZ1Md8fHr4V+TyQyiVE6jUMqgSF6zW8NGoZ/HJ9F2MFmIoVZIIBa/1zNZrPj56/w6KRcHDtMFkzs3Xqj6OTt5CUWaDKmd9fYe6deGuyv+OHLyJUpBCINy9vjhbDTOYPjgvvtPqSz2TnzqCB0Ea05Pzhpv4OHF55G/OVsppeFu3xSOaC8UshY0BEkhYeWnqwJwSdAUoQgIRCCtpTE3O6awWYwVq/GwFPnxvXkt1wTlLM0Elg3IxhcNTN/VzVXQbMs9ZalcEL+WTOHb0tmJaOH1Zbs4Wckl8fPxHwU2pDfmtvgKZHU0iP5zAyZm7qLJQF5zFlFMoymzOj8PbN1mO3GacAAlUYCSB4yfumM1ocFNM4ASycZw89fNG8xIklOCBNEtzuUwMp87+1sW5lVC2Qu7RLQn4iSGcPX/fbI3B5OEszeeyCQiMc5ceKK7BWUyR3AmMpGNyvMDFLx8pzsKr9FUw3Om4p/gXX/9huBlcFlaUUvMSfIjwegTvwme7I3cyNO+CZ5OiLj+ff/V7dyu9wZMxYYiAy9/+pXh/cJVfi/DNd//arWwOruTNDq5c/0+D9QdHB/D+X8f3vzzVjVZKm4OT21tZw7VHSxqsLMHzEjxjg+N1B97LNn54/EpPncG5cYXJvboGLLfhXZ17N9oInsRwygRHmwJt3Phz2ZijwHAcKRvce70OvFzDT09WVYBbyWfkpFyzq4K/aOPearu7cVcqWmJOzGOpjYdxmI2LOVcqg9McFlv4u5DUS+Q16Q+DvzLm8byFx+M+RsVXhudiS2VwchNf2D2iG48RtqU6bjxrwvvn6YGoIM31B6d5PGvhycTwwOA0R4LFPXkx93Zwh6+8U8Kg4HjeBBZaaO4Noccm16TBaV6M6yP60f7awOCc5TvRocbA4JxV/Mj4wOCKL8oFdDofiLTdOJvV4GLOEUyNGQF7UtrsguDWZHRsq/ku0TxntRgbgAZObIdunNx2Kzov4nw3mtm5EZy403b46Ql7rjKvmqY4nV+S+dld5pr6fBtcnjO7TKl9vhSTx+s0D0VqjgQkd+YdwewEYM+1txhHoAL2XHuDK/5CeM/IvHL3FEMzxPh/4gOCY0lw6s7uNGGdN1sMlqVw+j69YzM3ufiOfD3BpczIAnoW0vW9Iph8jd8AGXkDBBF2wzEAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACoklEQVRIS32UTWgTQRTHXxCF1pa6CYiIYt1sJIpeetngrUoRNnoWqyl4EMFLcvJSvKTgQY9JLoooIR8IpeAhJDlJhUpIDqLXJApFEISQ+gGStFjfm+YNs7uzLgzDzv+9NzO/+c+EAGAfrLMgWiyKjfrJv2VCOBLHEICZE3OwfdU6iDtnYj+PzQQrtix0+iKRCBw6MwvvlzHuwkEtO/FU6hxDcX/NKSjfjoKT2XTpHBMOh0W9brfr02mA9cFgoNW5TqA4EUJYaF8tSJPuXDwGvfh1+L6wAOErl8VkY9z4z5gJOwIQASBIBMAWOn1TJw3YXESN9AlEO/FA6jzPkdMz8JIgXTLBSb4AwzC0kMaxadiuf/LpKqRer+eqrxaidQ2HQ20+x4UsyxIA1NMhCEy4WCzKCdTxHwjp2/kb8PnuLaFT28WNjxDML3TIV+wHCMhOXJM6zTF7fA62lqLwJTYPv1F3kqtigQyR13H41FFYvWNB6t6GT1cPrN1ui1wvRK7T7/e1+RKAbdsSgAqBAdRqNd8JEgiGUSqVXBvkPOpH8WlYf/Rc6jS2h2DGCOgP9gRgL3lTLlB10sdFBIlAjZUnPl110tbGWwlAhch76XQ62nwJwHEcFwDvHWy1WoEWpQnr9br2BBlEuVz2LUB1Ui6Xc+kCEm58F6/QCAH1Vu77dHbShyUThplnLgBeJzWbTW2+BJBKpXwAVIvRIxRkL5qMLOi1sJrfaDQCT5BAVCoV7QIZYD6f9+nsJLpy7zIPfQBUJ7159VqbLwGk02ktAHYCvbJea3EyjfMjFARJvaM6ixIgvsP8lqhvEgHy6lyHABIgnc5OWl97rAXANULZbDYQAC9EtznW+JUNgqQ+QroY7x31xugsrMZUq9X/brBQKATqVOcfWDzWBBi0sj0AAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAE10lEQVRIS1WVz28VVRTHv3fmta9A6e8f0J/vzcx7ry2lVWmxYEAiRqkCGlkQEzf+ZAHEf8CF7tyyMCYm7vwbXLiUBApUFrIw8Jo2mjRSKKWEtrZ9pePnzLwKTnI6b+73nHvP+dxzb52kuMifgpyK8jAfy/CdUa9qGGnkt+lSCZ/nfk49qBmvR1GMjj2fx36b7pTN5BSgmU9xO12nVF2vh/febF59vEO04jP07bg6j0d8rNb6UF3E2hwF9KhCHsk8Qpf2N4fqRMvbGjaOXti0tWJ1s1Z/R6g2tBxma0S2RoU61onHxymqiSMrHodS7JGAzwK+ClsAqGTkGhsUsdDpmTkSZxwwBsjgqH2fXFOXaucCXdyyomfRV/F7RnKs1tFGfE71fwU6wefpSoz+EL9V9A2ps07ZJvT5QKPor5P8Mayox+j/UN2mGhrz2rMQkps0TvKHCTu6acU9lboX1d4YaPfDQP3k+DJzHKK4MUKHWEt9s+ppCNWBlsOimHINUtV6tgzAqea4F/GA7QwORSAYiGLsqxcQrnYPkWu6iD50d03Fp7FK6069Gz4JdqLvZ8ZIp8oz+vyXaY1tb7KjwGntlEbzcllSiwPt+61V363FGl+dBt4D4NVKIy3E51SzEqj1TqCPgPjlSkzxd4DzUBp2xOfVtByooZxCPLfhdBYfdd+WBpe0Kxuq6RHzw+MQw4epYYJ5RgxAYVat6F3UF1jX2dDOm7l6+Xa63BfX8zqMMFSFMMAkBdq7HxDO3w2ALU2gnzcIf2+o9HRb/WsM7GpGp9DIumFeP+H/2rVF5ebJINsMhD65DA0e0kPtbbp8fUqfXr2l0XmyPcieDNB7GQDVk95qoKM3Hut7S37+Fsms0pIN6Ggu0J4HeRXhcuGZ04V16/cpWmUNPS9tBCqRT2mJDkIyUGOYolm5mjApfsA6fOcoV49kXwLgyjAv2gobqZ7PwW07px7nhh3w65jIHNkd/p5k7MCjTeVXCdvYJee1p4ePLjmPz9dAGLj9RFrI8MUR8brRGhOIWv5D122HrtEBK8TtzaEDIAoxFlle1pWpG/ri1ynVdaAXAeRRYAslZIFwX3p/6rF+NL5t0+hskAfIulBZjsZxuB64H+sMqb1hAApz6BwRkrcNHLJ7rAqiSB52bJx+PpIAMPFVPgftN6J1QZgAoFUj2r3aASd5H2e89IQsFjgifksVAN88PzDHJ0Dwb7Ili43oNGCUTQDJLegrfL5B966S1cp+EuQqi9owOk2PFC7/rpvoLdfpKlJ0zgABx8w5jQDpWzpp8u4MALhSHQA6AERnjHL5jXM8RsvbukSOilIA9oxT5UsMWZ0DCQgn0JLtvbcSADsFjiYwDEDq5DwDYLspHcHOoh3DJtD8cgW9KQXgKsmt/LF1ifmge/dq0bkjIlZ2bBGX3yX+nkF/M9GbAGQAuGdE9lrT21rSZ+gfmF7uIJ4jFO1D4wZURZP4jOtPOo3cyl3PAQHHnjPYGPEflsvJeU/L5LxjJ7Bh/BIIdgwSPT5XBcB9mASnR2GQUQPhOys+ndz0cezg//SGRNvR7S4ZfqGTfGd3cPpMvhjPb1vDd3ZF2eP0zn/royU6EJylnj7v4mP5HTStal7yTzR9Tifxrqqn3eyS+z993sNeYWT4hfh/ASIGdLzkBWWRAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACGUlEQVRIS41UzytEURS+L2yMhcdojEfKno218gco/gNZSFmQzSyU8qP8KMKCWfgxmiz8SKZJyUIWM0pKShIWrGxIVtbMd59z577z7n05det1v3vvO9/3nXMcIcRPaYn2xgrR5iVEazJeWnXCa6gtLVd0jWUAW/HhhazEEab7i7tnCscHf//w/CaA+2fK/79+eA3h2KD83j6+jLh/xrViBDj/EUAXpyXhCiw8Hqv3RH9qThInchyfWt2WpCk4vnOQl+/pob9/UShKsjzo/8+P91aiyO/7803maQunRE5WgM1BOBxFkAQASSTejPUnTizuidTEjBSASHJ8bT2t7lEe+v2T433ltk4CpPD+bfFMmcFJAn9/upYC4NsUTm9nkxKAXNRLECUc5SA5bCOoC6A7i4Rq4k1iYXoiIBxyoISB720sKwF0J+l+IZdRAnCSuP9ymQu8x0VwRno6AgL4IpR7ED0aVaJUwnDW5KDuMJzlBLkAinx9Ugq0OZ8KCEAka/7w063ZgADYp8D9u3w6IICO45yzNNgdEgAADRkMoagepB7lA4eI6CVscpA7zAmaBAAxEKmuTYijpdGQAMARwK+ykyEBsE/h7I33GQXwRXAFpqxtmoIQDSHToOE9aipRXsLcQZPDOkGbACBZWZcUxZUhowDAZAUUlgesApBKUVOUpqxtyOhDiBLX+5D3KC9RUwnrDtocJoLRAlSJXzPjvXzSk6dAAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAFmklEQVRIS22VaXBTZRSGn6RNmqQtTbc0TRcEBRQUlUVBUAuyuMDoiCJWGdfxB/4RR0cdl9Hxh6PiuAwD6kABgY6yKVbBUVlkp6VQUBFq9422aW1paZM2aa7vbS1U8f7M991z3uc977mxGCQbDH1muiA3He7y0uSJIc22+9Kp1QqPu2GRD6alcNJu5fqh52NtOvPAAh/B0fHsMgzuse+59P68OHhIte/0Uue28W13mCUJ+wbO41X7sSR40IcxJYXiKPiyuYdlvoMD5xNi4NE0mJ9O5xWx/NQXYV1NgO2jj+rQAverdm4GzPRQER/N9gshPq4MUDXhGGREw8OqvTAD48ZEDuj6l+eCrKjqwXLRgOlOeMQLd3tp8Tn5IRQhr6qb3WMLBxosThCcGtyWymmHlW3ne3m9MogxWQ1GmeAp8EAGobHD2Ks38usDrK3qxcgphrmxAldtmdqYEkNBsI+86gBH6g2M+3S+OHEAfLpMtVnY1NLDOxJHix3jNdU3Tb3XR9dVceyWqSb41poQdCdgrCoaMHVWGtUytUCmrhT46XPSbPFi/HikfyDG5CSOyONNTUE+ki7aZKjrShkwNcPgYTk7L532LBc/hiOslbiddX3Qk4SxUQ4v1MRneCh1RfFNR4h3qwL81aQRRcvRXw7L/XT6xrvZp55fNQT4zGzQIej4URilSoDA/WkOdvQIXOL31Sl04WRIHo/RvgME/rvStLmtl7eqguCXofYs8E7CsG7uT5OZow213eTXhOFCPCSM0WRvwYj7nIZEOwWBsPoGONGgi4Z4UsdD9mwiCW/3p2mzv4f3TFNb7eAcCemTdGeODKicZ7RnOvvB10jcD7UmuCaSOE4FcjCGfUip83JwPBMkYA4h98vs/xe4VihuFPhuUo05NLmfZmevaWo3e4eAk5UDtkmcci9i6/+A450tsV6+H5lLfl2AjYPgw0ZD5jSZezsUBVg5/Rk+vwx8FkSkP/8sLyx6hWXVg+AjLoJTr1XOK8SyJbjAWG/ukgke1I/uayDrVrmkJnta+WDWsyyvDlLZqPxYFTXPjRIgccErYfVJljz1JiuqNfF2B8RepQaTNdk5UKYpri1k5nPL2F0XgV7tYPK1qi3h9pthRz18fQL7q5/S26wdtWm9vBP1vmqf1/RXHyf6l1LC76yHTu230kTGFE3+DjipFGw8huNQBcFPvhFsqmpfp4HpLOoGxbAMdv6Kq7iO7lW7wJHdnybS5kKzkre6CNv+Muxn/FruXXMNgtpv99gh4H/B1uO4jlbRvUIRjTLBVThTYCb4mlNY9pzFdaqBrnX7Ba7fzEglq0G5IibwmIPl2Mva6NxaMpAmEzxmELwE17EaEv1B6gvKJU5pMsE7JHR1MdF7S4k53cSobij5uUVp0nuD4PkCP1iBs6qDaYad7w7oW5A9Qxo1mE0C3/GbwGtJVarm98Wz/KS+bR7V9sukVYUD4Gf9jAtayQ0ly4ADbxj9kYrV1A91qkgxzsOVxNZ3MSPiYPNR7WuWIhXSzq0/DT/9QWxJPb7OMPf1JfD+r5pOihrUaC/zjmI/VI6ttJWJoWge703lyVpBOabCrmbYIlOLqhnWGGBWxMnSUBYT/UpF1xUytQSrTHX+1sjICxHVdvNS33Di/II/o73+okjgMrXiPLdE7DzR62Eh6Vj80r29GgpOqXYtSa1B7u6LZWk4i6uJx3JGbHkydd+fxPzRzJiAvpnhJJ6PZBNNlAzwBwwOdyg2/wZfEvKRgxyqV4MNAv9Z4Ccugb8QzsaDA0uRBK4rwn6w7CL4YyY4irTKW/K1FttO/Ac8kwlo3cwbr8VilTjn742M6BwCjlbIPH86jEMDsZe3M1XgT/4DPvjfapnfhut4HUktA+DPCfwagQ8+tik1Avf3gz8QTuTFyPB+8MHnb+qTbKvji/PkAAAAAElFTkSuQmCC"
          .split(" "),
          d = glfx.filters.colormap.textures, a = 0; a < g.length; a++)
        glfx.loadResource(d, a, null, f[a], 64, 8, "colormap/" + g[a])
    },
    output: function() {
      for (var f = g.length, d = [], a = 0; a < g.length; a++) !1 ===
        glfx.filters.colormap.loadResource(a, function() {
          if (!--f)
            for (var a = 0; a < g.length; a++) {
              var q = glfx.filters.colormap.textures[a].toDataURL();
              d.push(q)
            }
        }) && --f
    },
    loadResource: function(f, d) {
      var a = glfx.filters.colormap.textures;
      return "string" !== typeof a[f] ? !1 : glfx.loadResource(a, f,
        d, sketch.loc.MEDIA + "colormap/" + a[f] + ".png", 64, 8)
    },
    param: [glfx.param("amount",
      "float(0,1)", 1), glfx.param("mapId", "int(0," + (g.length -
      1) + ")", 1)],
    shaderCode: "uniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float amount;\nvec4 sampleAs3DTexture(sampler2D tex, vec3 texCoord, float size) {\n\tfloat sliceSize = 1.0 / size;\n\tfloat slicePixelSize = sliceSize / size;\n\tfloat sliceInnerSize = slicePixelSize * (size - 1.0);\n\tfloat zSlice0 = min(floor(texCoord.z * size), size - 1.0);\n\tfloat zSlice1 = min(zSlice0 + 1.0, size - 1.0);\n\tfloat xOffset = slicePixelSize * 0.5 + texCoord.x * sliceInnerSize;\n\tfloat s0 = xOffset + (zSlice0 * sliceSize);\n\tfloat s1 = xOffset + (zSlice1 * sliceSize);\n\tvec4 slice0Color = texture2D(tex, vec2(s0, texCoord.y));\n\tvec4 slice1Color = texture2D(tex, vec2(s1, texCoord.y));\n\tfloat zOffset = mod(texCoord.z * size, 1.0);\n\treturn mix(slice0Color, slice1Color, zOffset);\n}\nvoid main(void) {\n\tvec4 sample = texture2D(texture0, texCoord);\n\tvec4 colorMap = sampleAs3DTexture(texture1, sample.rgb, 8.0);\n\tgl_FragColor = amount * colorMap + sample * (1.0 - amount);\n\tgl_FragColor.a = sample.a;\n}",
    shader: function(f, d) {
      var a = glfx.gl,
        e = glfx.filters.colormap;
      e.dirty && delete a.colormap;
      a.colormap = a.colormap || new glfx.Shader(null, e.shaderCode);
      e = glfx.filters.colormap.textures;
      if ("string" === typeof e[d]) return console.log("string");
      this._.extraTexture.loadContentsOf(e[d]);
      this._.extraTexture.use(1);
      a.colormap.textures({
        texture0: 0,
        texture1: 1
      });
      glfx.simpleShader.call(this, a.colormap, {
        time: (this.now - this.startTime) / 1E3,
        amount: Math.max(0, isFinite(f) ? f : 1),
        texSize: [this.width, this.height]
      });
      this._.extraTexture.unuse(1);
      return this
    }
  })
})();
glfx.register({
  type: "colorMatrixOld",
  param: [glfx.param("hue", "int(0,360)", 100)],
  shaderCode: "\t\tuniform sampler2D texture;\n\t\tuniform mat4 matrix;\n\t\tuniform float hue;\n\t\tvarying vec2 texCoord;\n\t\tvoid main() {\n\t\t\tvec4 sample = texture2D(texture, texCoord);\n\t\t\tvec3 z = sample.rgb;\n\t\t\tfloat n = hue * 0.01745;\n\t\t\tfloat r = 0.212671, g = 0.715160, b = 0.072169, c = cos(n), s = sin(n);\n\t\t\tfloat m0 = (r+(c*(1.0-r)))+(s*(-r)), m1 = (g+(c*(-g)))+(s*(-g)), m2 = (b+(c*(-b)))+(s*(1.0-b)), m3 = 0.0, m4 = 0.0,\n\t\t\t\t  m5 = (r+(c*(-r)))+(s*0.143), m6 = (g+(c*(1.0-g)))+(s*0.14), m7 = (b+(c*(-b)))+(s*-0.283), m8 = 0.0, m9 = 0.0,\n\t\t\t\t  m10 = (r+(c*(-r)))+(s*(-(1.0-r))), m11 = (g+(c*(-g)))+(s*g), m12 = (b+(c*(1.0-b)))+(s*b), m13 = 0.0, m14 = 0.0,\n\t\t\t\t  m15 = 0.0, m16 = 0.0, m17 = 0.0, m18 = 1.0, m19 = 0.0,\n\t\t\t\t  m20 = 0.0, m21 = 0.0, m22 = 0.0, m23 = 0.0, m24 = 1.0;\n\t\t\tz.r = clamp((z.r * m0) + (z.g * m1) + (z.b * m2) + (1.0 * m3) + m4, 0.0, 1.0);\n\t\t\tz.g = clamp((z.r * m5) + (z.g * m6) + (z.b * m7) + (1.0 * m8) + m9, 0.0, 1.0);\n\t\t\tz.b = clamp((z.r * m10) + (z.g * m11) + (z.b * m12) + (1.0 * m13) + m14, 0.0, 1.0);\n\t\t\tgl_FragColor = vec4(z, sample.a);\n\t\t}",
  shader: function(g) {
    var f =
      glfx.gl,
      d = glfx.filters.colorMatrixOld;
    d.dirty && delete f.colorMatrixOld;
    f.colorMatrixOld = f.colorMatrixOld || new glfx.Shader(null, d.shaderCode);
    glfx.simpleShader.call(this, f.colorMatrixOld, {
      hue: sketch.util.clamp(0, g, 100)
    });
    return this
  }
});
glfx.register({
  type: "hueSaturation",
  param: [glfx.param("hue", "float(-1,1)", 0), glfx.param(
    "saturation", "float(-1,1)", 0)],
  shaderCode: "uniform sampler2D texture;\nuniform float hue;\nuniform float saturation;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\t\n\t/* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\n\tfloat angle = hue * 3.14159265;\n\tfloat s = sin(angle), c = cos(angle);\n\tvec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n\tfloat len = length(color.rgb);\n\tcolor.rgb = vec3(\n\t\tdot(color.rgb, weights.xyz),\n\t\tdot(color.rgb, weights.zxy),\n\t\tdot(color.rgb, weights.yzx)\n\t);\n\t\n\t/* saturation adjustment */\n\tfloat average = (color.r + color.g + color.b) / 3.0;\n\tif (saturation > 0.0) {\n\t\tcolor.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\n\t} else {\n\t\tcolor.rgb += (average - color.rgb) * (-saturation);\n\t}\n\t\n\tgl_FragColor = color;\n}",
  shader: function(g,
    f) {
    var d = glfx.gl,
      a = glfx.filters.hueSaturation;
    a.dirty && delete d.hueSaturation;
    d.hueSaturation = d.hueSaturation || new glfx.Shader(null, a.shaderCode);
    glfx.simpleShader.call(this, d.hueSaturation, {
      hue: sketch.util.clamp(-1, g, 1),
      saturation: sketch.util.clamp(-1, f, 1)
    });
    return this
  }
});
glfx.register({
  type: "invert",
  param: [],
  shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nvoid main() {\n\tgl_FragColor = texture2D(texture, texCoord);\n\tgl_FragColor = vec4(1.0 - gl_FragColor.rgb, gl_FragColor.a);\n}",
  shader: function(g) {
    g = glfx.gl;
    var f = glfx.filters.invert;
    f.dirty && delete g.invert;
    g.invert = g.invert || new glfx.Shader(null, f.shaderCode);
    glfx.simpleShader.call(this, g.invert, {});
    return this
  }
});
glfx.register({
  type: "lumaKey",
  param: [glfx.param("clipBlack", "float(0,2)", .9), glfx.param(
    "clipWhite", "float(0,1)", 1)],
  shaderCode: "varying vec2 texCoord;\nuniform sampler2D texture;\nuniform float threshold;\nuniform float clipBlack;\nuniform float clipWhite;\nconst vec3 lumcoeff = vec3(0.2125, 0.7154, 0.0721);\nvoid main (void) {\n\tvec4 pixel = texture2D(texture, texCoord);\n\tfloat luma = dot(pixel.rgb, lumcoeff);\n\tfloat alpha = 1.0 - smoothstep(clipBlack, clipWhite, luma);\n\tgl_FragColor = vec4(pixel.rgb, min(pixel.a, alpha) );\n}",
  shader: function(g, f) {
    var d = glfx.gl,
      a = glfx.filters.lumaKey;
    a.dirty && delete d.lumaKey;
    d.lumaKey = d.lumaKey || new glfx.Shader(null, a.shaderCode);
    glfx.simpleShader.call(this, d.lumaKey, {
      clipBlack: g,
      clipWhite: f
    });
    return this
  }
});
glfx.register({
  type: "sepia",
  param: [glfx.param("amount", "float", .8)],
  shaderCode: "uniform sampler2D texture;\nuniform float amount;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat r = color.r;\n\tfloat g = color.g;\n\tfloat b = color.b;\n\t\n\tcolor.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\n\tcolor.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\n\tcolor.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\n\t\n\tgl_FragColor = color;\n}",
  shader: function(g) {
    var f =
      glfx.gl,
      d = glfx.filters.sepia;
    d.dirty && delete f.sepia;
    f.sepia = f.sepia || new glfx.Shader(null, d.shaderCode);
    glfx.simpleShader.call(this, f.sepia, {
      amount: sketch.util.clamp(0, g, 1)
    });
    return this
  }
});
glfx.register({
  type: "vibrance",
  param: [glfx.param("amount", "float(-1,1)", 0)],
  shaderCode: "uniform sampler2D texture;\nuniform float amount;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat average = (color.r + color.g + color.b) / 3.0;\n\tfloat mx = max(color.r, max(color.g, color.b));\n\tfloat amt = (mx - average) * (-amount * 3.0);\n\tcolor.rgb = mix(color.rgb, vec3(mx), amt);\n\tgl_FragColor = color;\n}",
  shader: function(g) {
    var f = glfx.gl,
      d = glfx.filters.vibrance;
    d.dirty && delete f.vibrance;
    f.vibrance = f.vibrance || new glfx.Shader(null, d.shaderCode);
    glfx.simpleShader.call(this, f.vibrance, {
      amount: sketch.util.clamp(-1, g, 1),
      resolution: [1 / this.width, 1 / this.height]
    });
    return this
  }
});
glfx.register({
  type: "lensBlur",
  param: [glfx.param("radius", "px", 10), glfx.param("brightness",
    "float(-1,1)", .75), glfx.param("angle", "radian", 0)],
  shader: function(g, f, d) {
    var a = glfx.gl;
    a.lensBlurPrePass = a.lensBlurPrePass || new glfx.Shader(null,
      "\t\t\tuniform sampler2D texture;\t\t\tuniform float power;\t\t\tvarying vec2 texCoord;\t\t\tvoid main() {\t\t\t\tvec4 color = texture2D(texture, texCoord);\t\t\t\tcolor = pow(color, vec4(power));\t\t\t\tgl_FragColor = vec4(color);\t\t\t}\t\t"
    );
    var e =
      "\t\t\tuniform sampler2D texture0;\t\t\tuniform sampler2D texture1;\t\t\tuniform vec2 delta0;\t\t\tuniform vec2 delta1;\t\t\tuniform float power;\t\t\tvarying vec2 texCoord;\t\t\t" +
      glfx.randomShader +
      "\t\t\tvec4 sample(vec2 delta) {\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(delta, 151.7182), 0.0);\t\t\t\t\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tfor (float t = 0.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset) / 30.0;\t\t\t\t\tcolor += texture2D(texture0, texCoord + delta * percent);\t\t\t\t\ttotal += 1.0;\t\t\t\t}\t\t\t\treturn color / total;\t\t\t}\t\t";
    a.lensBlur0 = a.lensBlur0 ||
      new glfx.Shader(null, e +
        "\t\t\tvoid main() {\t\t\t\tgl_FragColor = sample(delta0);\t\t\t}\t\t"
      );
    a.lensBlur1 = a.lensBlur1 || new glfx.Shader(null, e +
      "\t\t\tvoid main() {\t\t\t\tgl_FragColor = (sample(delta0) + sample(delta1)) * 0.5;\t\t\t}\t\t"
    );
    a.lensBlur2 = a.lensBlur2 || (new glfx.Shader(null, e +
      "\t\t\tvoid main() {\t\t\t\tvec4 color = (sample(delta0) + 2.0 * texture2D(texture1, texCoord)) / 3.0;\t\t\t\tgl_FragColor = pow(color, vec4(power));\t\t\t}\t\t"
    )).textures({
      texture1: 1
    });
    for (var e = [], q = 0; 3 > q; q++) {
      var l =
        d + q * Math.PI * 2 / 3;
      e.push([g * Math.sin(l) / this.width, g * Math.cos(l) / this.height])
    }
    g = Math.pow(10, sketch.util.clamp(-1, f, 1));
    glfx.simpleShader.call(this, a.lensBlurPrePass, {
      power: g
    });
    this._.extraTexture.ensureFormat(this._.texture);
    glfx.simpleShader.call(this, a.lensBlur0, {
      delta0: e[0]
    }, this._.texture, this._.extraTexture);
    glfx.simpleShader.call(this, a.lensBlur1, {
      delta0: e[1],
      delta1: e[2]
    }, this._.extraTexture, this._.extraTexture);
    glfx.simpleShader.call(this, a.lensBlur0, {
      delta0: e[1]
    });
    this._.extraTexture.use(1);
    glfx.simpleShader.call(this, a.lensBlur2, {
      power: 1 / g,
      delta0: e[2]
    });
    return this
  }
});
glfx.register({
  type: "tiltShift",
  param: [glfx.param("startX", "float", .1), glfx.param("startY",
      "float", .1), glfx.param("endX", "float", .9), glfx.param(
      "endY", "float", .9), glfx.param("blurRadius", "px(0,100)", 15),
    glfx.param("gradientRadius", "px(0,width)", 200)
  ],
  shaderCode: [
    "uniform sampler2D texture;\nuniform float blurRadius;\nuniform float gradientRadius;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\nvarying vec2 texCoord;",
    glfx.randomShader,
    "void main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\t\n\t/* randomize the lookup values to hide the fixed number of samples */\n\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\t\n\tvec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n\tfloat radius = smoothstep(0.0, 1.0, abs(dot(texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sample = texture2D(texture, texCoord + delta / texSize * percent * radius);\n\t\t\n\t\t/* switch to pre-multiplied alpha to correctly blur transparent images */\n\t\tsample.rgb *= sample.a;\n\t\t\n\t\tcolor += sample * weight;\n\t\ttotal += weight;\n\t}\n\t\n\tgl_FragColor = color / total;\n\t\n\t/* switch back from pre-multiplied alpha */\n\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}"
  ].join("\n"),
  shader: function(g, f, d, a, e, q) {
    var l = glfx.gl;
    l.tiltShift = l.tiltShift || new glfx.Shader(null, glfx.filters.tiltShift
      .shaderCode);
    g *= this.width;
    f *= this.height;
    d *= this.width;
    var b = a * this.height,
      c = d - g;
    a -= f;
    var p = Math.sqrt(c * c + a * a);
    glfx.simpleShader.call(this, l.tiltShift, {
      blurRadius: e,
      gradientRadius: q,
      start: [g, f],
      end: [d, b],
      delta: [-a / p, c / p],
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "triangleBlur",
  param: [glfx.param("blur", "px(0,50)", 0)],
  shaderCode: [
    "uniform sampler2D texture;\nuniform vec2 delta;\nvarying vec2 texCoord;",
    glfx.randomShader,
    "void main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\t/* randomize the lookup values to hide the fixed number of samples */\n\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sample = texture2D(texture, texCoord + delta * percent);\n\t\tsample.rgb *= sample.a;\n\t\tcolor += sample * weight;\n\t\ttotal += weight;\n\t}\n\tgl_FragColor = color / total;\n\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}"
  ].join("\n"),
  shader: function(g, f) {
    f = isFinite(f) ? f : g;
    var d = glfx.gl,
      a = glfx.filters.triangleBlur;
    a.dirty && delete d.triangleBlur;
    d.triangleBlur = d.triangleBlur || new glfx.Shader(null, a.shaderCode);
    glfx.simpleShader.call(this, d.triangleBlur, {
      delta: [g / this.width * this.pixelRatio, 0]
    });
    glfx.simpleShader.call(this, d.triangleBlur, {
      delta: [0, f / this.height * this.pixelRatio]
    });
    return this
  }
});
glfx.register({
  type: "zoomBlur",
  param: [glfx.param("centerX", "float", .5), glfx.param("centerY",
    "float", .5), glfx.param("strength", "float", .3)],
  ondrag: glfx.dragCenterPoint,
  shader: function(g, f, d) {
    var a = glfx.gl;
    a.zoomBlur = a.zoomBlur || new glfx.Shader(null,
      "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 center;\t\t\tuniform float strength;\t\t\tuniform vec2 texSize;\t\t\tvarying vec2 texCoord;\t\t\t" +
      glfx.randomShader +
      "\t\t\tvoid main() {\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tvec2 toCenter = center - texCoord * texSize;\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = 0.0; t <= 40.0; t++) {\t\t\t\t\tfloat percent = (t + offset) / 40.0;\t\t\t\t\tfloat weight = 4.0 * (percent - percent * percent);\t\t\t\t\tvec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\t\t\t\t\t\t\t\t\t\t/* switch to pre-multiplied alpha to correctly blur transparent images */\t\t\t\t\tsample.rgb *= sample.a;\t\t\t\t\t\t\t\t\t\tcolor += sample * weight;\t\t\t\t\ttotal += weight;\t\t\t\t}\t\t\t\t\t\t\t\tgl_FragColor = color / total;\t\t\t\t\t\t\t\t/* switch back from pre-multiplied alpha */\t\t\t\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\t\t\t}\t\t"
    );
    glfx.simpleShader.call(this, a.zoomBlur, {
      center: [this.width * (1 - g), this.height * f],
      strength: d,
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "colorHalftone",
  param: [glfx.param("centerX", "float", .5), glfx.param("centerY",
    "float", .5), glfx.param("angle", "radian", 320), glfx.param(
    "size", "int(1,20)", 7)],
  ondrag: glfx.dragCenterPoint,
  shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform vec2 center;\n\t\t\tuniform float angle;\n\t\t\tuniform float scale;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\t\n\t\t\tfloat pattern(float angle) {\n\t\t\t\tfloat s = sin(angle), c = cos(angle);\n\t\t\t\tvec2 tex = texCoord * texSize - center;\n\t\t\t\tvec2 point = vec2(\n\t\t\t\t\tc * tex.x - s * tex.y,\n\t\t\t\t\ts * tex.x + c * tex.y\n\t\t\t\t) * scale;\n\t\t\t\treturn (sin(point.x) * sin(point.y)) * 4.0;\n\t\t\t}\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tvec3 cmy = 1.0 - color.rgb;\n\t\t\t\tfloat k = min(cmy.x, min(cmy.y, cmy.z));\n\t\t\t\tcmy = (cmy - k) / (1.0 - k);\n\t\t\t\tcmy = clamp(cmy * 10.0 - 3.0 + vec3(pattern(angle + 0.26179), pattern(angle + 1.30899), pattern(angle)), 0.0, 1.0);\n\t\t\t\tk = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539), 0.0, 1.0);\n\t\t\t\tgl_FragColor = vec4(1.0 - cmy - k, color.a);\n\t\t\t}",
  shader: function(g,
    f, d, a) {
    var e = glfx.gl,
      q = glfx.filters.colorHalftone;
    q.dirty && delete e.colorHalftone;
    e.colorHalftone = e.colorHalftone || new glfx.Shader(null, q.shaderCode);
    glfx.simpleShader.call(this, e.colorHalftone, {
      center: [this.width * (1 - g), this.height * f],
      angle: d,
      scale: Math.PI / a,
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "dotScreen",
  param: [glfx.param("centerX", "float", .5), glfx.param("centerY",
    "float", .5), glfx.param("angle", "radian", 1.1), glfx.param(
    "size", "px(0,20)", 3)],
  ondrag: glfx.dragCenterPoint,
  shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform vec2 center;\n\t\t\tuniform float angle;\n\t\t\tuniform float scale;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\t\n\t\t\tfloat pattern() {\n\t\t\t\tfloat s = sin(angle), c = cos(angle);\n\t\t\t\tvec2 tex = texCoord * texSize - center;\n\t\t\t\tvec2 point = vec2(\n\t\t\t\t\tc * tex.x - s * tex.y,\n\t\t\t\t\ts * tex.x + c * tex.y\n\t\t\t\t) * scale;\n\t\t\t\treturn (sin(point.x) * sin(point.y)) * 4.0;\n\t\t\t}\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tfloat average = (color.r + color.g + color.b) / 3.0;\n\t\t\t\tgl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n\t\t\t}",
  shader: function(g, f, d, a) {
    var e = glfx.gl,
      q = glfx.filters.dotScreen;
    q.dirty && delete e.dotScreen;
    e.dotScreen = e.dotScreen || new glfx.Shader(null, q.shaderCode);
    glfx.simpleShader.call(this, e.dotScreen, {
      center: [this.width * (1 - g), this.height * f],
      angle: d,
      scale: Math.PI / a,
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "edgeWork",
  param: [glfx.param("radius", "px(0.1,25)", 4)],
  shader: function(g) {
    var f = glfx.gl;
    f.edgeWork1 = f.edgeWork1 || new glfx.Shader(null,
      "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 delta;\t\t\tvarying vec2 texCoord;\t\t\t" +
      glfx.randomShader +
      "\t\t\tvoid main() {\t\t\t\tvec2 color = vec2(0.0);\t\t\t\tvec2 total = vec2(0.0);\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = -30.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset - 0.5) / 30.0;\t\t\t\t\tfloat weight = 1.0 - abs(percent);\t\t\t\t\tvec3 sample = texture2D(texture, texCoord + delta * percent).rgb;\t\t\t\t\tfloat average = (sample.r + sample.g + sample.b) / 3.0;\t\t\t\t\tcolor.x += average * weight;\t\t\t\t\ttotal.x += weight;\t\t\t\t\tif (abs(t) < 15.0) {\t\t\t\t\t\tweight = weight * 2.0 - 1.0;\t\t\t\t\t\tcolor.y += average * weight;\t\t\t\t\t\ttotal.y += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tgl_FragColor = vec4(color / total, 0.0, 1.0);\t\t\t}\t\t"
    );
    f.edgeWork2 = f.edgeWork2 || new glfx.Shader(null,
      "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 delta;\t\t\tvarying vec2 texCoord;\t\t\t" +
      glfx.randomShader +
      "\t\t\tvoid main() {\t\t\t\tvec2 color = vec2(0.0);\t\t\t\tvec2 total = vec2(0.0);\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = -30.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset - 0.5) / 30.0;\t\t\t\t\tfloat weight = 1.0 - abs(percent);\t\t\t\t\tvec2 sample = texture2D(texture, texCoord + delta * percent).xy;\t\t\t\t\tcolor.x += sample.x * weight;\t\t\t\t\ttotal.x += weight;\t\t\t\t\tif (abs(t) < 15.0) {\t\t\t\t\t\tweight = weight * 2.0 - 1.0;\t\t\t\t\t\tcolor.y += sample.y * weight;\t\t\t\t\t\ttotal.y += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tfloat c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\t\t\t\tgl_FragColor = vec4(c, c, c, 1.0);\t\t\t}\t\t"
    );
    glfx.simpleShader.call(this, f.edgeWork1, {
      delta: [g / this.width, 0]
    });
    glfx.simpleShader.call(this, f.edgeWork2, {
      delta: [0, g / this.height]
    });
    return this
  }
});
glfx.register({
  type: "film",
  param: [glfx.param("pixelSize", "float(0,10)", .5), glfx.param(
    "amount", "float(0,1)", .2), glfx.param("opacity", "float(0,2)",
    1), glfx.param("sCount", "int(0,2024)", 1024)],
  shaderCode: [
    "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float time;\nuniform float opacity;\nuniform float sCount;\nuniform float amount;\nuniform float pixelSize;",
    glfx.helper.simplex_noise,
    "void main() {\nvec4 sample = texture2D(texture, texCoord);\nvec3 color = sample.rgb; \nfloat alpha = sample.a;\nfloat noise = texCoord.x * texCoord.y * time * 1000.0;\nvec3 cResult = color + color * clamp(0.1 + noise * 100.0, 0.0, 1.0);\nvec2 sc = vec2(sin(texCoord.y * sCount), cos(texCoord.y * sCount));\ncResult += color * vec3(sc.x, sc.y, sc.x) * opacity;\nfloat xs = floor(gl_FragCoord.x / pixelSize);\nfloat ys = floor(gl_FragCoord.y / pixelSize);\nvec4 snow = vec4(snoise(vec2(xs * time, ys * time)) * amount);\nvec4 res = vec4(cResult, alpha);\ngl_FragColor = vec4((res.rgb + snow.rgb), alpha);\n}"
  ].join("\n"),
  shader: function(g, f, d, a) {
    var e = glfx.gl,
      q = glfx.filters.film;
    q.dirty && delete e.film;
    e.film = e.film || new glfx.Shader(null, q.shaderCode);
    glfx.simpleShader.call(this, e.film, {
      time: (this.now - this.startTime) / 1E3,
      amount: f || 0,
      pixelSize: isFinite(g) ? g : 10,
      opacity: d || 0,
      sCount: Math.min(2.5 * this.height, a) || 0,
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "kaleidoscope",
  param: [glfx.param("angle", "radian", 1.1), glfx.param("sides",
    "int(1,25)", 3)],
  shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float sides;\nuniform float angle;\nvoid main() {\n\tvec2 p = texCoord - 0.5;\n\tfloat r = length(p);\n\tfloat a = atan(p.y, p.x) + angle;\n\tfloat tau = 2.0 * 3.1416 ;\n\ta = mod(a, tau/sides);\n\ta = abs(a - tau/sides/2.) ;\n\tp = r * vec2(cos(a), sin(a));\n\tvec4 color = texture2D(texture, p + 0.5);\n\tgl_FragColor = color;\n}",
  shader: function(g,
    f) {
    var d = glfx.gl,
      a = glfx.filters.kaleidoscope;
    a.dirty && delete d.kaleidoscope;
    d.kaleidoscope = d.kaleidoscope || new glfx.Shader(null, a.shaderCode);
    glfx.simpleShader.call(this, d.kaleidoscope, {
      angle: g,
      sides: Math.round(f)
    });
    return this
  }
});
glfx.register({
  type: "oldFilm",
  param: [glfx.param("sepia", "float", .7), glfx.param("noise",
    "float", .3), glfx.param("burn", "float", .3), glfx.param(
    "scratch", "float", .3)],
  shaderCode: [
    "uniform vec2 ImageSize;\nuniform sampler2D Sample0;\nuniform float sepia;\nuniform float noise;\nuniform float burn;\nuniform float scratch;\nuniform float random;\nuniform float time;\nvarying vec2 texCoord;",
    glfx.helper.simplex_noise,
    "void main () {\n\tvec4 sample = texture2D(Sample0, texCoord);\n\tvec3 color = sample.xyz;\n\tcolor += color * burn;\n\tfloat average = (color.x + color.y + color.z) / 3.0;\n\tcolor.xyz += (average - color.xyz) * (1.0);\n\tfloat r = color.x;\n\tfloat g = color.y;\n\tfloat b = color.z;\n\tcolor.x = min(1.0, (r * (1.0 - (0.607 * sepia))) + (g * (0.769 * sepia)) + (b * (0.189 * sepia)));\n\tcolor.y = min(1.0, (r * 0.349 * sepia) + (g * (1.0 - (0.314 * sepia))) + (b * 0.168 * sepia));\n\tcolor.z = min(1.0, (r * 0.272 * sepia) + (g * 0.534 * sepia) + (b * (1.0 - (0.869 * sepia))));\n\tfloat coord = snoise(texCoord * vec2(1024.0 + random * 512.0, 1024.0 + random * 512.0)) * 0.5;\n\tcolor += coord * noise;\n\tif ( random < scratch ) {\n\t\tfloat dist = 1.0 / scratch;\n\t\tfloat d = distance(texCoord, vec2(random * dist, random * dist));\n\t\tif ( d < 0.4 ) {\n\t\t\tfloat xPeriod = 8.0;\n\t\t\tfloat yPeriod = 1.0;\n\t\t\tfloat pi = 3.141592;\n\t\t\tfloat phase = time;\n\t\t\tfloat turbulence = snoise(texCoord * 2.5);\n\t\t\tfloat vScratch = 0.5 + (sin(((texCoord.x * xPeriod + texCoord.y * yPeriod + turbulence)) * pi + phase) * 0.5);\n\t\t\tvScratch = clamp((vScratch * 10000.0) + 0.35, 0.0, 1.0);\n\t\t\tcolor.xyz *= vScratch;\n\t\t}\n\t}\n\tgl_FragColor.xyz = color;\n\tgl_FragColor.w = sample.a;\n}"
  ].join("\n"),
  shader: function(g, f, d, a) {
    var e = glfx.gl,
      q = glfx.filters.oldFilm;
    q.dirty && delete e.oldFilm;
    e.oldFilm = e.oldFilm || new glfx.Shader(null, q.shaderCode);
    glfx.simpleShader.call(this, e.oldFilm, {
      sepia: g,
      noise: f,
      burn: d,
      scratch: a,
      random: this.random,
      time: (this.now - this.startTime) / 1E3
    });
    return this
  }
});
glfx.register({
  type: "popArt",
  param: [glfx.param("dividerValue", "float(0,1)", 1), glfx.param(
    "gamma", "float(0,10)", 10), glfx.param("numColors",
    "float(0,256)", 256)],
  shaderCode: "\tuniform sampler2D texture;\n\tuniform float dividerValue;\n\tuniform float gamma;\n\tuniform float numColors;\n\tvarying vec2 texCoord;\n\tvoid main() {\n\t\tvec2 off = texCoord;\n\t\tif (texCoord.s > 0.5) {\n\t\t\toff.s = (off.s - 0.5) * 2.0;\n\t\t\tif (texCoord.t > 0.5) {\n\t\t\t\toff.t = (off.t - 0.5) * 2.0;\n\t\t\t} else {\n\t\t\t\toff.t *= 2.0;\n\t\t\t}\n\t\t} else {\n\t\t\tif (texCoord.t > 0.5) {\n\t\t\t\toff.s *= 2.0;\n\t\t\t\toff.t = (off.t - 0.5) * 2.0;\n\t\t\t} else {\n\t\t\t\toff.s *= 2.0;\n\t\t\t\toff.t *= 2.0;\n\t\t\t}\n\t\t}\n\t\tvec3 color = texture2D(texture, vec2(off)).rgb;\n\t\tif (texCoord.s > 0.5) {\n\t\t\tif (texCoord.t < 0.5) {\n\t\t\t} else {\n\t\t\t\tcolor.g *= 0.25;\n\t\t\t}\n\t\t} else {\n\t\t\tif (texCoord.t > 0.5) {\n\t\t\t\tcolor.b *= 0.25;\n\t\t\t} else {\n\t\t\t\tcolor.r *= 0.25;\n\t\t\t}\n\t\t}\n\t\tvec4 c = vec4(0.0);\n\t\tif (texCoord.x < dividerValue) {\n\t\t\tvec3 x = color;\n\t\t\tx = pow(x, vec3(gamma, gamma, gamma));\n\t\t\tx = x * numColors;\n\t\t\tx = floor(x);\n\t\t\tx = x / numColors;\n\t\t\tx = pow(x, vec3(1.0/gamma));\n\t\t\tc = vec4(x, 1.0);\n\t\t} else {\n\t\t\tc = texture2D(texture, texCoord);\n\t\t}\n\t\tgl_FragColor.a = 1.0;\n\t\tgl_FragColor.rgb = c.rgb * 1.5;\n\t}",
  shader: function(g,
    f, d) {
    var a = glfx.gl,
      e = glfx.filters.popArt;
    e.dirty && delete a.popArt;
    a.popArt = a.popArt || new glfx.Shader(null, e.shaderCode);
    glfx.simpleShader.call(this, a.popArt, {
      numColors: d || 12,
      dividerValue: g || 1,
      gamma: f || 1.2
    });
    return this
  }
});
glfx.register({
  type: "RGBShift",
  param: [glfx.param("angle", "radian", 1.1), glfx.param("amount",
    "float(0,0.1)", .05)],
  shaderCode: "uniform sampler2D texture;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float amount;\nuniform float angle;\nvoid main() {\n\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\tfloat value = 0.0;\n    vec3 col;\n    vec4 sample0 = texture2D(texture, vec2(texCoord.x + value, texCoord.y) + offset);\n    vec4 sample1 = texture2D(texture, texCoord);\n    vec4 sample2 = texture2D(texture, vec2(texCoord.x - value, texCoord.y) - offset);\n    float alpha = max(max(sample0.a, sample1.a), sample2.a);\n    col.r = sample0.r;\n    col.g = sample1.g;\n    col.b = sample2.b;\n    gl_FragColor = vec4(col, alpha);\n}",
  shader: function(g,
    f) {
    var d = glfx.gl,
      a = glfx.filters.RGBShift;
    a.dirty && delete d.RGBShift;
    d.RGBShift = d.RGBShift || new glfx.Shader(null, a.shaderCode);
    glfx.simpleShader.call(this, d.RGBShift, {
      texSize: [this.width, this.height],
      time: (this.now - this.startTime) / 1E3,
      angle: g,
      amount: f
    });
    return this
  }
});
(function(g, f) {
  if ("object" === typeof exports) f(g.require("seriously"));
  else if ("function" === typeof g.define && g.define.amd) g.define([
    "seriously"
  ], f);
  else {
    var d = g.Seriously;
    d || (d = {
      plugin: function(a, d) {
        this[a] = d
      }
    });
    f(d)
  }
})(this, function(g, f) {
  g.plugin("scanlines", {
    shader: function(d, a) {
      a.fragment =
        "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float lines;\nuniform float width;\nuniform float intensity;\n\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tfloat darken = 2.0 * abs( fract(vTexCoord.y * lines) - 0.5);\n\tdarken = clamp(darken - width + 0.5, 0.0, 1.0);\n\tdarken = 1.0 - ((1.0 - darken) * intensity);\n\tgl_FragColor = vec4(pixel.rgb * darken, 1.0);\n}\n";
      return a
    },
    inPlace: !0,
    inputs: {
      source: {
        type: "image",
        uniform: "source"
      },
      lines: {
        type: "number",
        uniform: "lines",
        defaultValue: 60
      },
      size: {
        type: "number",
        uniform: "size",
        defaultValue: .2,
        min: 0,
        max: 1
      },
      intensity: {
        type: "number",
        uniform: "intensity",
        defaultValue: .1,
        min: 0,
        max: 1
      }
    },
    title: "Scan Lines",
    description: ""
  })
});
glfx.register({
  type: "tron",
  param: [glfx.param("amount", "float(0,2)", .2), glfx.param(
    "opacity", "float(0,1)", 1), glfx.param("colorIntensity",
    "float(1,100)", 5), glfx.param("alphaCutoff", "float(0,0.025)",
    0), glfx.param("variation", "float(0,6.28)", 3), glfx.param(
    "distance", "float(0,50)", 3), glfx.param("speed",
    "float(0,10)", 3)],
  shaderCode: "uniform sampler2D texture0;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float alphaCutoff;\nuniform float colorIntensity;\nuniform float amount;\nuniform float opacity;\nuniform float speed;\nuniform float distance;\nuniform float variation;\nfloat luma(vec2 p, float dx, float dy) {\n\tvec4 c = texture2D(texture0, (p + vec2(dx * amount, dy * amount)) / texSize);\n\treturn 0.212656 * c.r + 0.715158 * c.g + 0.072186 * c.b;\n}\nvoid main(void) {\n\tvec2 wave = gl_FragCoord.xy;\n\twave.x = wave.x - 1.0 * sin(wave.y * variation + time * speed) * distance;\n  \twave.y = wave.y + sin(wave.y * variation + time * (speed * 0.66)) * distance;\n\tfloat t1 = luma(wave, -1.0, -1.0);\n\tfloat t3 = luma(wave, -1.0, 1.0);\n\tfloat t4 = luma(wave, 1.0, -1.0);\n\tfloat t6 = luma(wave, 1.0, 1.0);\n\tfloat H = -t1 - luma(wave, -1.0, 0.0) * 2.0 - t3 + t4 + luma(wave, 1.0, 0.0) * 2.0 + t6;\n\tfloat V = -t1 - luma(wave, 0.0, -1.0) * 2.0 - t4 + t3 + luma(wave, 0.0, 1.0) * 2.0 + t6;\n\tfloat sobel = H * H + V * V;\n\tvec2 p = gl_FragCoord.xy / texSize;\n\tvec4 edgeGradient = vec4(p.x * sobel, p.y * sobel, sobel, 1.0);\n\tvec4 original = texture2D(texture0, p);\n\tif (sobel < alphaCutoff) {\n\t\tedgeGradient *= 1.0 / colorIntensity;\n\t}\n\tif (amount < 0.0) {\n\t\tgl_FragColor = original * opacity - edgeGradient * colorIntensity;\n\t} else {\n\t\tgl_FragColor = original * opacity + edgeGradient * colorIntensity;\n\t}\n}",
  shader: function(g, f, d, a, e, q, l) {
    var b = glfx.gl,
      c = glfx.filters.tron;
    c.dirty && delete b.tron;
    b.tron = b.tron || new glfx.Shader(null, c.shaderCode);
    glfx.simpleShader.call(this, b.tron, {
      time: (this.now - this.startTime) / 1E3,
      amount: g || 0,
      opacity: f || 0,
      alphaCutoff: a || 0,
      colorIntensity: d || 0,
      variation: e || 0,
      distance: q || 0,
      speed: l || 0,
      texSize: [this.width, this.height]
    });
    return this
  }
});
(function(g, f) {
  if ("object" === typeof exports) f(g.require("seriously"));
  else if ("function" === typeof g.define && g.define.amd) g.define([
    "seriously"
  ], f);
  else {
    var d = g.Seriously;
    d || (d = {
      plugin: function(a, d) {
        this[a] = d
      }
    });
    f(d)
  }
})(this, function(g, f) {
  g.plugin("tvglitch", function() {
    return {
      initialize: function(d) {
        var a, e, f, l = this.gl,
          b;
        this.lastHeight = this.height;
        b = [];
        e = .3 - .02;
        f = .8 - .2;
        for (a = 0; 20 > a; a++) b.push(2 * Math.random() - 1), b.push(
            Math.random() * f + .2), b.push(Math.random() * e + .02), b
          .push(.2 * Math.random());
        this.particleBuffer =
          l.createBuffer();
        l.bindBuffer(l.ARRAY_BUFFER, this.particleBuffer);
        l.bufferData(l.ARRAY_BUFFER, new Float32Array(b), l.STATIC_DRAW);
        this.particleBuffer.itemSize = 4;
        this.particleBuffer.numItems = 20;
        this.particleShader = new g.util.ShaderProgram(l,
          "#ifdef GL_ES\nprecision mediump float;\n#endif \n\nattribute vec4 particle;\n\nuniform float time;\nuniform float height;\n\nvarying float intensity;\n\nvoid main(void) {\n\tfloat y = particle.x + time * particle.y;\n\ty = fract((y + 1.0) / 2.0) * 4.0 - 2.0;\n\tintensity = particle.w;\n\tgl_Position = vec4(0.0, -y , 1.0, 2.0);\n\tgl_PointSize = height * particle.z;\n}\n",
          "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying float intensity;\n\nvoid main(void) {\n\tgl_FragColor = vec4(1.0);\n\tgl_FragColor.a = 2.0 * intensity * (1.0 - abs(gl_PointCoord.y - 0.5));\n}\n"
        );
        this.particleFrameBuffer = new g.util.FrameBuffer(l, 1, this.height /
          2);
        d()
      },
      shader: function(d, a) {
        a.fragment =
          "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\n#define HardLight(top, bottom)  (1.0 - 2.0 * (1.0 - top) * (1.0 - bottom))\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform sampler2D particles;\nuniform float time;\nuniform float scanlines;\nuniform float lineSync;\nuniform float lineHeight;\nuniform float distortion;\nuniform float vsync;\nuniform float bars;\nuniform float frameSharpness;\nuniform float frameShape;\nuniform float frameLimit;\nuniform vec4 frameColor;\n\n" +
          g.util.shader.noiseHelpers + g.util.shader.snoise2d +
          "\nvoid main(void) {\n\tvec2 texCoord = vTexCoord;\n\tfloat drandom = snoise(vec2(time * 50.0, texCoord.y /lineHeight));\n\tfloat distortAmount = distortion * (drandom - 0.25) * 0.5;\n\tvec4 particleOffset = texture2D(particles, vec2(0.0, texCoord.y));\n\tdistortAmount -= lineSync * (2.0 * particleOffset.a - 0.5);\n\ttexCoord.x -= distortAmount;\n\ttexCoord.x = mod(texCoord.x, 1.0);\n\tfloat roll;\n\tif (vsync != 0.0) {\n\t\troll = fract(time / vsync);\n\t\ttexCoord.y = mod(texCoord.y - roll, 1.0);\n\t}\n\tvec4 pixel = texture2D(source, texCoord);\n\tfloat barsAmount = particleOffset.r;\n\tif (barsAmount > 0.0) {\n\t\tpixel = vec4(pixel.r + bars * barsAmount,pixel.g + bars * barsAmount,pixel.b + bars * barsAmount,pixel.a);\n\t}\n\tif (mod(texCoord.y / lineHeight, 2.0) < 1.0 ) {\n\t\tpixel.rgb *= (1.0 - scanlines);\n\t}\n\tfloat f = (1.0 - vPosition.x * vPosition.x) * (1.0 - vPosition.y * vPosition.y);\n\tfloat frame = clamp( frameSharpness * (pow(f, frameShape) - frameLimit), 0.0, 1.0);\n\tgl_FragColor = mix(frameColor, pixel, frame); //vec4(vec3(particleOffset), 1.0);\n}\n";
        return a
      },
      draw: function(d, a, e, f, g) {
        var b = this.lastTime !== this.inputs.time,
          c, p = this.gl;
        this.lastHeight !== this.height && (this.lastHeight = this.height,
          b = !0);
        e.lineHeight = 1 / this.height;
        this.inputs.verticalSync ? (c = .2 / this.inputs.verticalSync,
          e.vsync = c) : (c = 1, e.vsync = 0);
        e.time = this.inputs.time % (1E4 * c) / 1E3;
        e.distortion = Math.random() * this.inputs.distortion;
        b && (this.inputs.lineSync || this.inputs.bars) && (this.particleShader
          .useProgram(), p.viewport(0, 0, 1, this.height / 2), p.bindFramebuffer(
            p.FRAMEBUFFER, this.particleFrameBuffer.frameBuffer),
          p.clear(p.COLOR_BUFFER_BIT | p.DEPTH_BUFFER_BIT), p.enableVertexAttribArray(
            this.particleShader.location_particle), p.bindBuffer(p.ARRAY_BUFFER,
            this.particleBuffer), p.vertexAttribPointer(this.particleShader
            .location_particle, this.particleBuffer.itemSize, p.FLOAT, !
            1, 0, 0), p.enable(p.BLEND), p.blendFunc(p.SRC_ALPHA, p.ONE),
          this.particleShader.set_time(e.time), this.particleShader.set_height(
            this.height), p.drawArrays(p.POINTS, 0, 20), this.lastTime =
          this.inputs.time);
        e.particles = this.particleFrameBuffer.texture;
        g(d, a, e, f)
      },
      destroy: function() {
        delete this.particleBuffer;
        this.particleFrameBuffer && this.particleFrameBuffer.destroy()
      },
      inPlace: !1,
      inputs: {
        source: {
          type: "image",
          uniform: "source",
          shaderDirty: !1
        },
        time: {
          type: "number",
          defaultValue: 0
        },
        distortion: {
          type: "number",
          defaultValue: .1,
          min: 0,
          max: 1
        },
        verticalSync: {
          type: "number",
          defaultValue: .1,
          min: 0,
          max: 1
        },
        lineSync: {
          type: "number",
          uniform: "lineSync",
          defaultValue: .2,
          min: 0,
          max: 1
        },
        scanlines: {
          type: "number",
          uniform: "scanlines",
          defaultValue: .3,
          min: 0,
          max: 1
        },
        bars: {
          type: "number",
          uniform: "bars",
          defaultValue: 0,
          min: 0,
          max: 1
        },
        frameShape: {
          type: "number",
          uniform: "frameShape",
          min: 0,
          max: 2,
          defaultValue: .27
        },
        frameLimit: {
          type: "number",
          uniform: "frameLimit",
          min: -1,
          max: 1,
          defaultValue: .34
        },
        frameSharpness: {
          type: "number",
          uniform: "frameSharpness",
          min: 0,
          max: 40,
          defaultValue: 8.4
        },
        frameColor: {
          type: "color",
          uniform: "frameColor",
          defaultValue: [0, 0, 0, 1]
        }
      },
      description: "",
      title: "TV Glitch"
    }
  }())
});
glfx.register({
  type: "vignette",
  param: [glfx.param("size", "float", .5), glfx.param("blur",
    "float", 1)],
  shaderCode: "uniform sampler2D texture;\nuniform float size;\nuniform float blur;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\t\n\tfloat dist = distance(texCoord, vec2(0.5, 0.5));\n\tcolor.rgb *= smoothstep(0.8, blur * 0.799, dist * (size + blur));\n\t\n\tgl_FragColor = color;\n}",
  shader: function(g, f) {
    var d = glfx.gl,
      a = glfx.filters.vignette;
    a.dirty && delete d.vignette;
    d.vignette = d.vignette || new glfx.Shader(null, a.shaderCode);
    glfx.simpleShader.call(this, d.vignette, {
      size: sketch.util.clamp(0, g, 1),
      blur: sketch.util.clamp(0, 1 - f, 1)
    });
    return this
  }
});
glfx.register({
  type: "denoise",
  param: [glfx.param("exponent", "int(10,30)", 20)],
  shader: function(g) {
    var f = glfx.gl;
    f.denoise = f.denoise || new glfx.Shader(null,
      "\t\t\tuniform sampler2D texture;\t\t\tuniform float exponent;\t\t\tuniform float strength;\t\t\tuniform vec2 texSize;\t\t\tvarying vec2 texCoord;\t\t\tvoid main() {\t\t\t\tvec4 center = texture2D(texture, texCoord);\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tfor (float x = -4.0; x <= 4.0; x += 1.0) {\t\t\t\t\tfor (float y = -4.0; y <= 4.0; y += 1.0) {\t\t\t\t\t\tvec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);\t\t\t\t\t\tfloat weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));\t\t\t\t\t\tweight = pow(weight, exponent);\t\t\t\t\t\tcolor += sample * weight;\t\t\t\t\t\ttotal += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tcolor = color / total;\t\t\t\tif (color.a > 1.0) color.a = 1.0;\t\t\t\tif (color.r > 1.0) color.r = 1.0;\t\t\t\tif (color.g > 1.0) color.g = 1.0;\t\t\t\tif (color.b > 1.0) color.b = 1.0;\t\t\t\tgl_FragColor = color;\t\t\t}\t\t"
    );
    for (var d =
        0; 2 > d; d++) glfx.simpleShader.call(this, f.denoise, {
      exponent: Math.max(0, g),
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "noise",
  param: [glfx.param("amount", "float", .5)],
  shaderCode: [
    "uniform sampler2D texture;\nuniform float amount;\nuniform float random;\nvarying vec2 texCoord;",
    glfx.helper.simplex_noise,
    "void main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat diff = snoise(texCoord * vec2(1024.0 + random * 512.0, 1024.0 + random * 512.0)) * 0.5;\n\tcolor.r += diff;\n\tcolor.g += diff;\n\tcolor.b += diff;\n\tgl_FragColor = color;\n}"
  ].join("\n"),
  shader: function(g) {
    var f = glfx.gl,
      d = glfx.filters.noise;
    d.dirty && delete f.noise;
    f.noise = f.noise || new glfx.Shader(null, d.shaderCode);
    glfx.simpleShader.call(this, f.noise, {
      amount: sketch.util.clamp(0, g, 1),
      random: Math.random()
    });
    return this
  }
});
glfx.register({
  type: "mosaic",
  param: [glfx.param("pixelSize", "float(0,50)", .9)],
  shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform vec2 texSize;\nuniform vec2 pixelSize;\nvoid main(void) {\n   vec2 size = texSize / pixelSize;\n   vec2 color = floor(texCoord * size) / size + pixelSize / texSize * 0.5;\n   gl_FragColor = texture2D(texture, color);\n}",
  shader: function(g, f) {
    f = isFinite(f) ? f : g;
    var d = glfx.gl,
      a = glfx.filters.mosaic;
    a.dirty && delete d.mosaic;
    d.mosaic = d.mosaic || new glfx.Shader(null,
      a.shaderCode);
    glfx.simpleShader.call(this, d.mosaic, {
      pixelSize: [g * this.pixelRatio, f * this.pixelRatio],
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "hexagonalPixelate",
  param: [glfx.param("centerX", "float", .5), glfx.param("centerY",
    "float", .5), glfx.param("scale", "px(1,100)", 15)],
  ondrag: glfx.dragCenterPoint,
  shaderCode: "uniform sampler2D texture;\nuniform vec2 center;\nuniform float scale;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nvoid main() {\n\tvec2 tex = (texCoord * texSize - center) / scale;\n\ttex.y /= 0.866025404;\n\ttex.x -= tex.y * 0.5;\n\t\n\tvec2 a;\n\tif (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) a = vec2(floor(tex.x), floor(tex.y));\n\telse a = vec2(ceil(tex.x), ceil(tex.y));\n\tvec2 b = vec2(ceil(tex.x), floor(tex.y));\n\tvec2 c = vec2(floor(tex.x), ceil(tex.y));\n\t\n\tvec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n\tvec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n\tvec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n\tvec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n\t\n\tfloat alen = length(TEX - A);\n\tfloat blen = length(TEX - B);\n\tfloat clen = length(TEX - C);\n\t\n\tvec2 choice;\n\tif (alen < blen) {\n\t\tif (alen < clen) choice = a;\n\t\telse choice = c;\n\t} else {\n\t\tif (blen < clen) choice = b;\n\t\telse choice = c;\n\t}\n\t\n\tchoice.x += choice.y * 0.5;\n\tchoice.y *= 0.866025404;\n\tchoice *= scale / texSize;\n\tgl_FragColor = texture2D(texture, choice + center / texSize);\n}",
  shader: function(g,
    f, d) {
    var a = glfx.gl,
      e = glfx.filters.hexagonalPixelate;
    e.dirty && delete a.hexagonalPixelate;
    a.hexagonalPixelate = a.hexagonalPixelate || new glfx.Shader(
      null, e.shaderCode);
    glfx.simpleShader.call(this, a.hexagonalPixelate, {
      center: [this.width * (1 - g), this.height * f],
      scale: d,
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "edgeDetect",
  param: [glfx.param("amount", "float(-3,3)", .5), glfx.param(
    "diameter", "float(0,1)", 1), glfx.param("opacity",
    "float(0,1)", 1)],
  shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float amount;\nuniform float diameter;\nuniform float opacity;\nvoid main() {\n\tfloat step_x = 0.0015 * diameter;\n\tfloat step_y = 0.0015 * diameter;\n\tvec4 sample = texture2D(texture, texCoord);\n\tvec3 t1 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y - step_y)).rgb;\n\tvec3 t2 = texture2D(texture, vec2(texCoord.x, texCoord.y - step_y)).rgb * 2.0;\n\tvec3 t3 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y - step_y)).rgb;\n\tvec3 t4 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y)).rgb * 2.0;\n\tvec3 t5 = sample.rgb;\n\tvec3 t6 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y)).rgb * 2.0;\n\tvec3 t7 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y + step_y)).rgb;\n\tvec3 t8 = texture2D(texture, vec2(texCoord.x, texCoord.y + step_y)).rgb * 2.0;\n\tvec3 t9 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y + step_y)).rgb;\n\tvec3 H = t1 + t2 + t3 - t7 - t8 - t9;\n\tvec3 V = t1 - t3 + t4 - t6 + t7 - t9;\n\tvec3 res = sqrt(H * H + V * V);\n\tgl_FragColor.a = sample.a;\n\tgl_FragColor.rgb = (res * amount) + (t5 * opacity);\n}",
  shader: function(g,
    f, d) {
    var a = glfx.gl,
      e = glfx.filters.edgeDetect;
    e.dirty && delete a.edgeDetect;
    a.edgeDetect = a.edgeDetect || new glfx.Shader(null, e.shaderCode);
    glfx.simpleShader.call(this, a.edgeDetect, {
      amount: isFinite(g) ? g : 0,
      opacity: isFinite(d) ? d : 0,
      diameter: isFinite(f) ? f : 1
    });
    return this
  }
});
glfx.register({
  type: "ink",
  param: [glfx.param("strength", "float(-0.5,0.5)", .25)],
  shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform float strength;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\tvoid main() {\n\t\t\t\tvec2 dx = vec2(1.0 / texSize.x, 0.0);\n\t\t\t\tvec2 dy = vec2(0.0, 1.0 / texSize.y);\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tfloat bigTotal = 0.0;\n\t\t\t\tfloat smallTotal = 0.0;\n\t\t\t\tvec3 bigAverage = vec3(0.0);\n\t\t\t\tvec3 smallAverage = vec3(0.0);\n\t\t\t\tfor (float x = -2.0; x <= 2.0; x += 1.0) {\n\t\t\t\t\tfor (float y = -2.0; y <= 2.0; y += 1.0) {\n\t\t\t\t\t\tvec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n\t\t\t\t\t\tbigAverage += sample;\n\t\t\t\t\t\tbigTotal += 1.0;\n\t\t\t\t\t\tif (abs(x) + abs(y) < 2.0) {\n\t\t\t\t\t\t\tsmallAverage += sample;\n\t\t\t\t\t\t\tsmallTotal += 1.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n\t\t\t\tgl_FragColor = vec4(color.rgb - dot(edge, edge) * strength * 100000.0, color.a);\n\t\t\t}",
  shader: function(g) {
    var f =
      glfx.gl,
      d = glfx.filters.ink;
    d.dirty && delete f.ink;
    f.ink = f.ink || new glfx.Shader(null, d.shaderCode);
    glfx.simpleShader.call(this, f.ink, {
      strength: g * g * g * g * g,
      texSize: [this.width, this.height]
    });
    return this
  }
});
glfx.register({
  type: "unsharpMask",
  param: [glfx.param("radius", "float(0,20)", 10), glfx.param(
    "strength", "float(0,10)", 1)],
  defaults: [20, 2],
  shaderCode: "\t\t\tuniform sampler2D blurredTexture;\n\t\t\tuniform sampler2D originalTexture;\n\t\t\tuniform float strength;\n\t\t\tuniform float threshold;\n\t\t\tvarying vec2 texCoord;\n\t\t\tvoid main() {\n\t\t\t\tvec4 blurred = texture2D(blurredTexture, texCoord);\n\t\t\t\tvec4 original = texture2D(originalTexture, texCoord);\n\t\t\t\tgl_FragColor = mix(blurred, original, 1.0 + strength);\n\t\t\t}",
  shader: function(g,
    f) {
    var d = glfx.gl,
      a = glfx.filters.unsharpMask;
    a.dirty && delete d.unsharpMask;
    d.unsharpMask = d.unsharpMask || new glfx.Shader(null, a.shaderCode);
    this._.extraTexture.ensureFormat(this._.texture);
    this._.texture.use();
    this._.extraTexture.drawTo(function() {
      glfx.Shader.getDefaultShader().drawRect()
    });
    this._.extraTexture.use(1);
    this.triangleBlur(g);
    d.unsharpMask.textures({
      originalTexture: 1
    });
    glfx.simpleShader.call(this, d.unsharpMask, {
      strength: f
    });
    this._.extraTexture.unuse(1);
    return this
  }
});
(function() {
  var g =
    "NORMAL ADD SUBTRACT MULTIPLY DARKEN COLOUR_BURN LINEAR_BURN LIGHTEN SCREEN COLOUR_DODGE LINEAR_DODGE OVERLAY SOFT_LIGHT HARD_LIGHT VIVID_LIGHT LINEAR_LIGHT PIN_LIGHT DIFFERENCE EXCLUSION"
    .split(" ");
  glfx.register({
    type: "blend",
    param: [glfx.param("blendmode", "int(0," + (g.length - 1) + ")",
      1), glfx.param("srcAmount", "float(0,1)", 1), glfx.param(
      "dstAmount", "float(0,1)", 1)],
    getBlendMode: function(f) {
      return isFinite(f) ? g[f] : f
    },
    shaderCode: "uniform vec3 blendmode;\nuniform float srcAmount;\nuniform float dstAmount;\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nvarying vec2 texCoord;\nvec3 blend (vec3 src, vec3 dst) {\n\t#ifdef NORMAL\n\t\treturn src + dst;\n\t#endif\n\t#ifdef ADD\n\t\treturn src + dst;\n\t#endif\n\t#ifdef SUBTRACT\n\t\treturn src - dst;\n\t#endif\n\t#ifdef MULTIPLY\n\t\treturn src * dst;\n\t#endif\n\t#ifdef DARKEN\n\t\treturn min(src, dst);\n\t#endif\n\t#ifdef COLOUR_BURN\n\t\treturn vec3((src.x == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.x) / src.x)),\n\t\t\t\t\t(src.y == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.y) / src.y)),\n\t\t\t\t\t(src.z == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.z) / src.z)));\n\t#endif\n\t#ifdef LINEAR_BURN\n\t\treturn (src + dst) - 1.0;\n\t#endif\n\t#ifdef LIGHTEN\n\t\treturn max(src, dst);\n\t#endif\n\t#ifdef SCREEN\n\t\treturn (src + dst) - (src * dst);\n\t#endif\n\t#ifdef COLOUR_DODGE\n\t\treturn vec3((src.x == 1.0) ? 1.0 : min(1.0, dst.x / (1.0 - src.x)),\n\t\t\t\t\t(src.y == 1.0) ? 1.0 : min(1.0, dst.y / (1.0 - src.y)),\n\t\t\t\t\t(src.z == 1.0) ? 1.0 : min(1.0, dst.z / (1.0 - src.z)));\n\t#endif\n\t\t\t\n\t#ifdef LINEAR_DODGE\n\t\treturn src + dst;\n\t#endif\n\t#ifdef OVERLAY\n\t\treturn vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n\t\t\t\t\t(dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n\t\t\t\t\t(dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n\t#endif\n\t#ifdef SOFT_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (dst.x - (1.0 - 2.0 * src.x) * dst.x * (1.0 - dst.x)) : (((src.x > 0.5) && (dst.x <= 0.25)) ? (dst.x + (2.0 * src.x - 1.0) * (4.0 * dst.x * (4.0 * dst.x + 1.0) * (dst.x - 1.0) + 7.0 * dst.x)) : (dst.x + (2.0 * src.x - 1.0) * (sqrt(dst.x) - dst.x))),\n\t\t\t\t\t(src.y <= 0.5) ? (dst.y - (1.0 - 2.0 * src.y) * dst.y * (1.0 - dst.y)) : (((src.y > 0.5) && (dst.y <= 0.25)) ? (dst.y + (2.0 * src.y - 1.0) * (4.0 * dst.y * (4.0 * dst.y + 1.0) * (dst.y - 1.0) + 7.0 * dst.y)) : (dst.y + (2.0 * src.y - 1.0) * (sqrt(dst.y) - dst.y))),\n\t\t\t\t\t(src.z <= 0.5) ? (dst.z - (1.0 - 2.0 * src.z) * dst.z * (1.0 - dst.z)) : (((src.z > 0.5) && (dst.z <= 0.25)) ? (dst.z + (2.0 * src.z - 1.0) * (4.0 * dst.z * (4.0 * dst.z + 1.0) * (dst.z - 1.0) + 7.0 * dst.z)) : (dst.z + (2.0 * src.z - 1.0) * (sqrt(dst.z) - dst.z))));\n\t#endif\n\t#ifdef HARD_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - src.x) * (1.0 - dst.x)),\n\t\t\t\t\t(src.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - src.y) * (1.0 - dst.y)),\n\t\t\t\t\t(src.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - src.z) * (1.0 - dst.z)));\n\t#endif\n\t#ifdef VIVID_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (1.0 - (1.0 - dst.x) / (2.0 * src.x)) : (dst.x / (2.0 * (1.0 - src.x))),\n\t\t\t\t\t(src.y <= 0.5) ? (1.0 - (1.0 - dst.y) / (2.0 * src.y)) : (dst.y / (2.0 * (1.0 - src.y))),\n\t\t\t\t\t(src.z <= 0.5) ? (1.0 - (1.0 - dst.z) / (2.0 * src.z)) : (dst.z / (2.0 * (1.0 - src.z))));\n\t#endif\n\t#ifdef LINEAR_LIGHT\n\t\treturn 2.0 * src + dst - 1.0;\n\t#endif\n\t#ifdef PIN_LIGHT\n\t\treturn vec3((src.x > 0.5) ? max(dst.x, 2.0 * (src.x - 0.5)) : min(dst.x, 2.0 * src.x),\n\t\t\t\t\t(src.x > 0.5) ? max(dst.y, 2.0 * (src.y - 0.5)) : min(dst.y, 2.0 * src.y),\n\t\t\t\t\t(src.z > 0.5) ? max(dst.z, 2.0 * (src.z - 0.5)) : min(dst.z, 2.0 * src.z));\n\t#endif\n\t#ifdef DIFFERENCE\n\t\treturn abs(dst - src);\n\t#endif\n\t#ifdef EXCLUSION\n\t\treturn src + dst - 2.0 * src * dst;\n\t#endif\n}\nvoid main() {\n   vec4 src = texture2D(texture0, texCoord);\n   vec4 dst = texture2D(texture1, texCoord);\n\tvec3 color = clamp(blend(src.xyz*srcAmount, dst.xyz*dstAmount), 0.0, 1.0);\n   gl_FragColor.rgb = color;\n   gl_FragColor.a = src.a * dst.a;\n}",
    shader: function(f, d, a, e, q) {
      var l = glfx.gl;
      f = isFinite(f) ? g[f] : f;
      var b = glfx.filters.blend;
      if (b.dirty || this.mode !== f) delete l.blend, this.mode = f;
      l.blend = l.blend || new glfx.Shader(null, b.shaderCode, f);
      this._.texture.loadContentsOf(e);
      this._.extraTexture.loadContentsOf(q);
      this._.extraTexture.use(1);
      l.blend.textures({
        texture0: 0,
        texture1: 1
      });
      glfx.simpleShader.call(this, l.blend, {
        blendmode: f,
        srcAmount: d,
        dstAmount: a,
        texSize: [this.width, this.height]
      });
      this._.extraTexture.unuse(1);
      return this
    }
  })
})();
glfx.register({
  type: "bulgePinch",
  param: [glfx.param("centerX", "float", .5), glfx.param("centerY",
    "float", .5), glfx.param("radius", "float", .5), glfx.param(
    "strength", "float(-1,1)", .5)],
  ondrag: glfx.dragCenterPoint,
  shaderCode: [
    "uniform float radius;\nuniform float strength;\nuniform vec2 center;",
    "coord -= center;\nfloat distance = length(coord);\nif (distance < radius) {\n\tfloat percent = distance / radius;\n\tif (strength > 0.0) {\n\t\tcoord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n\t} else {\n\t\tcoord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n\t}\n}\ncoord += center;"
  ],
  shader: function(g, f, d, a) {
    var e = glfx.gl,
      q = glfx.filters.bulgePinch;
    q.dirty && delete e.bulgePinch;
    e.bulgePinch = e.bulgePinch || glfx.helper.warpShader(q.shaderCode[
      0], q.shaderCode[1]);
    glfx.simpleShader.call(this, e.bulgePinch, {
      radius: d * this.width,
      strength: sketch.util.clamp(-1, a, 1),
      center: [this.width * (1 - g), this.height * f],
      texSize: [this.width, this.height]
    });
    return this
  }
});
(function() {
  var g =
    "texture/concrete_1.jpeg texture/concrete_2.jpeg texture/concrete_3.jpeg texture/concrete_4.jpeg texture/concrete_5.jpeg texture/fabric_1.jpeg texture/fabric_2.jpeg texture/fabric_3.jpeg texture/leather_1.jpeg texture/leather_2.jpeg texture/leather_3.jpeg texture/leather_4.jpeg texture/leather_5.jpeg texture/leather_6.jpeg texture/leather_7.jpeg texture/leather_8.jpeg texture/paint_1.jpeg texture/paint_2.jpeg texture/paint_3.jpeg texture/paper_1.jpeg texture/paper_2.jpeg texture/paper_3.jpeg texture/paper_4.jpeg texture/paper_5.jpeg texture/paper_6.jpeg texture/paper_7.jpeg texture/plastic_1.jpeg texture/plastic_2.jpeg texture/plastic_3.jpeg texture/plastic_4.jpeg texture/plastic_5.jpeg texture/rocks_1.jpeg texture/rocks_2.jpeg texture/rocks_3.jpeg texture/rocks_4.jpeg texture/rocks_5.jpeg texture/rocks_6.jpeg texture/rocks_7.jpeg texture/water_1.jpeg texture/water_2.jpeg texture/water_3.jpeg texture/wood_1.jpeg texture/wood_2.jpeg texture/wood_3.jpeg texture/wood_4.jpeg texture/wood_5.jpeg texture/wood_6.jpeg texture/wood_7.jpeg texture/wood_8.jpeg texture/wood_9.jpeg texture/crack3.jpg"
    .split(" ");
  glfx.register({
    type: "displacement",
    textures: g,
    loadResource: function(f, d) {
      var a = glfx.filters.displacement.textures;
      return "string" !== typeof a[f] ? !1 : glfx.loadResource(a, f,
        d)
    },
    param: [glfx.param("zoom", "float(0,3)", 1), glfx.param(
        "dotDepth", "float(0,3)", 1), glfx.param("dotSize",
        "float(0,20)", 1), glfx.param("textureDepth", "float(0,3)", 1),
      glfx.param("textureId", "int(0," + (g.length - 1) + ")", 1),
      glfx.param("strength", "float(-1,1)", .1)
    ],
    shaderCode: "uniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float time;\nuniform float zoom;\nuniform float dotDepth;\nuniform float dotSize;\nuniform float strength;\nuniform float textureDepth;\nuniform float textureId;\nvarying vec2 texCoord;\nfloat random(float seed) {\n\treturn fract(sin(seed)*23443.23);\n}\nvec2 random2f(vec2 p) {\n\treturn vec2(random(p.x+p.y*100.), random(p.x+p.y*1000.));\n}\nfloat voronoi( in vec2 x ) {\n\tvec2 p = floor( x );\n\tvec2 f = fract( x );\n\tfloat res = 8.0;\n\tfor( float j=-1.; j<=1.; j++ )\n\tfor( float i=-1.; i<=1.; i++ ) {\n\t    vec2  b = vec2( i, j );\n\t    vec2  r = b - f + random2f( p + b );\n\t    float d = dot( r, r );\n\t    res = min( res, d );\n\t}\n\treturn sqrt( res );\n}\nvoid main() {\n\tfloat t = time / dotSize;\n\tfloat b = voronoi(0.003 * sin(t) * texCoord + 2.0 * t);\n\tfloat g = voronoi(0.2 * sin(t) * texCoord);\n\tfloat r = voronoi(t * texCoord - 1.0 * t);\n\tvec4 tex = texture2D(texture1, texCoord);\n\tvec4 dot = tex * vec4(r, g, b, 1.0);\n\tvec4 dis;\n\tif (textureId == 0.0) {\n\t\tdis = dot * dotDepth + tex * textureDepth;\n\t} else {\n\t\tdis = dot * dotDepth + 1.0 - tex * textureDepth;\n\t}\n\tdis.x -= 0.5;\n\tdis.y -= 0.5;\n\tdis.x *= strength;\n\tdis.y *= strength;\n\tvec2 res_uv = texCoord;\n\tres_uv.x = res_uv.x + dis.x;\n\tres_uv.y = res_uv.y + dis.y;\n\tgl_FragColor = texture2D(texture0, zoom * res_uv);\n}",
    shader: function(f, d, a, e, g, l) {
      var b = glfx.gl,
        c = glfx.filters.displacement;
      c.dirty && delete b.displacement;
      b.displacement = b.displacement || new glfx.Shader(null, c.shaderCode);
      isFinite(g) && 0 !== g ? (this._.extraTexture.loadContentsOf(
          glfx.filters.displacement.textures[g]), this._.extraTexture
        .use(1)) : this._.texture.use(1);
      b.displacement.textures({
        texture0: 0,
        texture1: 1
      });
      glfx.simpleShader.call(this, b.displacement, {
        time: 100,
        zoom: isFinite(f) ? f : 1,
        dotDepth: isFinite(d) ? d : 1,
        dotSize: a || .001,
        textureDepth: isFinite(e) ?
          e : 1,
        strength: isFinite(l) ? l : 1,
        textureId: g || 0
      });
      return this
    }
  })
})();
glfx.register({
  type: "ripple",
  param: [glfx.param("wave", "float(0,10)", Math.PI / .75), glfx.param(
    "distortion", "float(0,100)", 1), glfx.param("centerX", "float",
    .5), glfx.param("centerY", "float", .5)],
  shaderCode: "varying vec2 texCoord;\nuniform vec2 center;\nuniform sampler2D texture;\nuniform float time;\nuniform float wave;\nuniform float distortion;\nvoid main(void) {\n\tfloat scalar = abs(1.0 - abs(distance(texCoord, center)));\n\tfloat sinOffset = sin(wave * time / scalar);\n\tsinOffset = clamp(sinOffset, 0.0, 1.0);\n\tfloat sinSign = cos(wave / scalar);\n\tsinOffset = sinOffset * distortion / 32.0;\n\tgl_FragColor = texture2D(texture, texCoord + sinOffset * sinSign);\n}",
  shader: function(g,
    f, d, a) {
    var e = glfx.gl,
      q = glfx.filters.ripple;
    q.dirty && delete e.ripple;
    e.ripple = e.ripple || new glfx.Shader(null, q.shaderCode);
    glfx.simpleShader.call(this, e.ripple, {
      time: (this.now - this.startTime) / 1E3,
      texSize: [this.width, this.height],
      center: [1 - d, a],
      distortion: f,
      wave: g
    });
    return this
  }
});
glfx.register({
  type: "swirl",
  param: [glfx.param("centerX", "float", .5), glfx.param("centerY",
    "float", .5), glfx.param("radius", "int(0,width)", 200), glfx.param(
    "angle", "radian(-10,10)", 1)],
  ondrag: glfx.dragCenterPoint,
  shaderCode: [
    "uniform float radius;\nuniform float angle;\nuniform vec2 center;",
    "coord -= center;\nfloat distance = length(coord);\nif (distance < radius) {\n\tfloat percent = (radius - distance) / radius;\n\tfloat theta = percent * percent * angle;\n\tfloat s = sin(theta);\n\tfloat c = cos(theta);\n\tcoord = vec2(\n\t\tcoord.x * c - coord.y * s,\n\t\tcoord.x * s + coord.y * c\n\t);\n}\ncoord += center;"
  ],
  shader: function(g, f, d, a) {
    var e = glfx.gl,
      q = glfx.filters.swirl;
    q.dirty && delete e.swirl;
    e.swirl = e.swirl || glfx.helper.warpShader(q.shaderCode[0], q.shaderCode[
      1]);
    glfx.simpleShader.call(this, e.swirl, {
      radius: d,
      center: [this.width * (1 - g), this.height * f],
      angle: a,
      texSize: [this.width, this.height]
    });
    return this
  }
});
"undefined" === typeof sketch && (sketch = {});
(function(g) {
  var f = g.dom,
    d = g.util,
    a = g.windows = [];
  a.focused = [];
  var e = a.idToIndex = {};
  g.module.Listener(a);
  a.add = function(b) {
    g.ui.zIndexGlobal = g.ui.zIndexGlobal || 100;
    var c = b.id,
      l = f.$(c);
    if (isFinite(e[c])) return g.feature.debug && console.warn(
      "element already exists"), a;
    if (c) {
      if (!l) return g.feature.debug && console.warn(
        "window does not exist", b), a
    } else {
      for (var q in b) l = b[q], l.id = q, a.add(l);
      return a.restore()
    }
    var m = b.display;
    !0 === m && (m = "block");
    !1 === m && (m = "none");
    var u = (b.position || "top left").split(" ");
    q = b.vAlign = u[0] || "top";
    u = b.hAlign = u[1] || "left";
    "px" === b.format && ("top" === q ? b.top = (b.top || 0) / window
      .innerHeight : b.bottom = (b.bottom || 0) / window.innerHeight,
      "left" === u ? b.left = (b.left || 0) / window.innerWidth : b.right =
      (b.right || 0) / window.innerWidth);
    b.element = l;
    l.setAttribute("data-id", c);
    if (b.autoclose) {
      var t = b.ghost = document.createElement("div");
      0 === c.indexOf("#") ? t.id = c + "-ghost" : t.className = c +
        "-ghost";
      t.style.cssText =
        "width: 100%; height: 100%; position: fixed; top: 0; z-index: 100;";
      l.parentNode.insertBefore(t,
        l);
      eventjs.add(t, "mousemove", function(a) {
        "eyeDropper" === g.ui.colorPicker.state && g.ui.colorPicker.mouseLayerUpdate(
          a)
      });
      eventjs.add(t, "mousedown", function(b) {
        eventjs.prevent(b);
        "eyeDropper" === g.ui.colorPicker.state ? g.ui.colorPicker.mouseLayerExit(
          b) : a.close(c)
      })
    }
    a.addWindowEvent(l);
    e[c] = a.length;
    a.push(b);
    d.getItem(c, function(a) {
      a && (a = JSON.parse(a), "boolean" === typeof m && m ? a.display =
        "block" : m && (a.display = m), "NONE" === b.display && (a.display =
          "none"), "BLOCK" === b.display && (a.display = "block"), b.autoclose &&
        (t.style.display = a.display), d.cloneInto(a, b))
    });
    return a
  };
  a.setCurrentTab = function(b, c) {
    b && c && (f.setClass({
      className: "selected",
      list: "div",
      target: f.$(b + " " + c)
    }), a.record({
      id: b,
      className: c
    }))
  };
  a.byId = function(b) {
    b = e[b];
    return isFinite(b) ? a[b] : !1
  };
  a.record = function(b) {
    var c = a.byId(b.id);
    if (c) {
      "undefined" !== typeof b.left && (c.left = b.left);
      "undefined" !== typeof b.top && (c.top = b.top);
      "undefined" !== typeof b.right && (c.right = b.right);
      "undefined" !== typeof b.bottom && (c.bottom = b.bottom);
      "undefined" !== typeof b.display &&
        (c.display = b.display);
      "undefined" !== typeof b.index && (c.index = b.index);
      "undefined" !== typeof b.className && (c.className = b.className);
      var e = JSON.stringify(c, d.json.filterCircular);
      d.setItem(b.id, e);
      a.focusElement(b.id, c.display)
    }
  };
  a.restore = function() {
    var b = document.body || document.documentElement,
      c = b.scrollTop,
      d = b.scrollLeft,
      e = window.innerWidth,
      l = window.innerHeight;
    q.element && a.setContainer(q.element);
    for (var b = [], u = {}, t = 0; t < a.length; t++) {
      var h = a[t],
        r = h.vAlign,
        k = h.hAlign,
        v = f.$(h.id);
      if (v && v.style) {
        v.style.display =
          "block";
        var v = f.measure(v),
          x = q[r || "top"],
          s = q[k || "left"],
          z = "top" === r ? h.top * l : l - h.bottom * l - v.height,
          z, h = "left" === k ? h.left * e : e - h.right * e - v.width;
        z += c + x;
        h += d + s;
        x = Math.min(z, l);
        s = Math.min(h, e);
        u.BOTTOM = z + v.height - l;
        u.TOP = x - z;
        u.RIGHT = h + v.width - e;
        u.LEFT = s - h;
        u[r] = Math.max(u[r] || 0, u[r.toUpperCase()]);
        u[k] = Math.max(u[k] || 0, u[k.toUpperCase()]);
        b.push({
          top: Math.max(0, z),
          left: Math.max(0, h)
        })
      }
    }
    c = 100;
    for (t = 0; t < a.length; t++) h = a[t], h.display && !0 !== h.display ||
      (h.display = "block"), (v = f.$(h.id)) && v.style && (e = b[t],
        d = "bottom" ===
        h.vAlign ? e.top - u.bottom : e.top + u.top, e = "right" === h.hAlign ?
        e.left - u.right : e.left + u.left, d = Math.ceil(d), e = Math.ceil(
          e), v.style.top = d + "px", v.style.left = e + "px", v.style.display =
        h.display || "block", v.style.zIndex = h.zIndexFixed || h.index ||
        ++c, g.ui.zIndexGlobal = Math.max(g.ui.zIndexGlobal, h.index ||
          0), "block" === h.display && -1 === v.className.indexOf(
          "opened") && v.classList.add("opened"));
    return a
  };
  a.blink = function(b, c) {
    var d = f.$(b);
    if (d)
      if (a.isOpen(d) || a.open(b), setTimeout(function() {
          d.blinking = !1
        }, 250), d.blinking) c &&
        c(!0);
      else return d.blinking = !0, d.classList.remove("blink"), d.classList
        .add("blink-stall"), setTimeout(function() {
          d.classList.remove("blink-stall"); - 1 === d.className.indexOf(
            "opened") ? a.open(b) : d.classList.add("blink");
          c && c(!0)
        }, 0), a
  };
  a.open = function(b, c) {
    c = !1 !== c;
    var d = f.$(b);
    if (d && -1 !== d.className.indexOf("sk-window")) {
      d.classList.add("opened");
      var e = a.byId(b),
        l = e.zIndexFixed ? e.zIndexFixed : ++g.ui.zIndexGlobal;
      d.style.display = "block";
      d.style.zIndex = l;
      d.style.opacity = 1;
      clearTimeout(d.interval);
      a.record({
        id: b,
        display: "block",
        index: l
      });
      e.autoclose && e.ghost && (e.ghost.style.display = "block");
      c && setTimeout(a.restore, 500);
      return a
    }
  };
  a.close = function(b) {
    var c = a.byId(b);
    if (c && !1 !== c.closeable) {
      var d = f.$(b);
      d.classList.remove("opened");
      d.style.opacity = 0;
      d.interval = setTimeout(function() {
        d.style.opacity = 1;
        d.style.display = "none";
        a.record({
          id: b,
          display: "none"
        })
      }, 250);
      c.autoclose && c.ghost && (c.ghost.style.display = "none")
    }
    return a
  };
  a.focus = function(b) {
    var c = f.$(b);
    if (c) {
      var d = a.byId(b),
        d = d.zIndexFixed ? d.zIndexFixed : ++g.ui.zIndexGlobal;
      c.style.zIndex = d;
      a.record({
        id: b,
        index: d
      })
    }
    return a
  };
  a.clearFocus = function() {
    a.focused = []
  };
  a.focusElement = function(b, c) {
    if ("none" !== c) {
      var d = a.focused.slice(-1)[0],
        e = " " + a.focused.join(" ") + " ";
      d !== b && -1 === e.indexOf(b) && a.focused.push(b)
    }
  };
  a.hasFocus = function() {
    return isFinite(e[a.focused.slice(-1)[0]])
  };
  a.closeFocused = function() {
    var b = a.focused.pop();
    a.close(b)
  };
  a.isOpen = function(a) {
    "string" === typeof a && (a = f.$(a));
    if (a) return "none" === a.style.display ? !1 : -1 !== (" " + a.className +
      " ").indexOf(" opened ")
  };
  a.isClosed = function(b) {
    return !a.isOpen(b)
  };
  a.toggle = function(b, c) {
    var d, e = f.$(b);
    e ? (a.isOpen(e) ? (a.close(b), d = !1) : (a.open(b), a.restore(),
      d = !0), c && setTimeout(function() {
      c(d)
    }, 1)) : g.feature.debug && console.warn("missing", arguments)
  };
  var q = {
    x: 0,
    y: 0,
    left: 0,
    right: 0,
    top: 0,
    bottom: 0,
    vAlign: "top",
    hAlign: "left"
  };
  a.setClamp = function(b, c, d, e, f) {
    "object" === typeof b && (b.element && a.setContainer(b.element),
      f = b.format, e = b.height, d = b.width, c = b.y, b = b.x);
    q.x = b || null;
    q.y = c || null;
    q.width = d || null;
    q.height = e || null;
    q.format =
      f
  };
  a.setContainer = function(a) {
    var c = f.measure(a);
    q.element = a;
    q.metrics = c;
    q.left = c.x1;
    q.right = c.x2;
    q.top = c.y1;
    q.bottom = c.y2
  };
  a.drag = function(b, c) {
    var d = document.body || document.documentElement,
      e = d.scrollTop,
      m = d.scrollLeft,
      u = window.innerWidth,
      t = window.innerHeight,
      h = l(b),
      r = a.byId(h);
    if (!1 !== r.draggable) return eventjs.proxy.drag({
      event: c,
      target: b,
      position: "move",
      listener: function(c, d) {
        a.emit("drag");
        eventjs.cancel(c);
        var l = f.measure(d.target);
        d.width = l.width;
        d.height = l.height;
        var p = q.x || 0,
          z = q.y || 0,
          y = q.width ||
          window.innerWidth,
          B = q.height || window.innerHeight;
        d.x + d.width > y && (d.x = y - d.width);
        d.x < p && (d.x = p);
        d.y + d.height > B && (d.y = B - d.height);
        d.y < z && (d.y = z);
        b.style.left = Math.ceil(d.x + m) + "px";
        b.style.top = Math.ceil(d.y + e) + "px";
        d.pointerDown ? (l = r.zIndexFixed ? r.zIndexFixed : ++g.ui
          .zIndexGlobal, b.style.zIndex = l) : d.pointerUp && (p = {},
          p.id = h, p.index = g.ui.zIndexGlobal, "bottom" === r.vAlign ?
          p.bottom = (t - d.y - q.bottom - l.height) / t : p.top =
          (d.y - q.top) / t, "right" === r.hAlign ? p.right = (u -
            d.x - q.right - l.width) / u : p.left = (d.x - q.left) /
          u, a.record(p),
          a.restore())
      }
    })
  };
  a.addWindowEvent = function(b) {
    if (void 0 === b.hasWindowEvent) {
      b.hasWindowEvent = !0;
      var c;
      l(b);
      eventjs.add({
        target: b,
        contextmenu: function(a) {
          c && c.remove && c.remove()
        },
        mousedown: function(b) {
          c = a.drag(this, b)
        },
        mouseover: function(a) {
          eventjs.stop(a);
          g.ui.tooltip && g.ui.tooltip.update("")
        }
      });
      var e = b.querySelector("span.sk-close");
      e && (g.ui.tooltip && g.ui.tooltip.add(e, "Close"), eventjs.add({
        target: e,
        mousedown: eventjs.stop,
        click: function(b, c) {
          eventjs.cancel(b);
          window.setTimeout(function() {
            for (var b =
                c.target; b !== document;)
              if (b.classList.contains("sk-window")) {
                a.close(l(b));
                break
              } else if (b.parentNode) b = b.parentNode;
            else break
          }, 1)
        }
      }));
      d.each(b.querySelectorAll(".tree"), function(b) {
        eventjs.add(b, "click", function(b, c) {
          a.setCurrentTab("#sk-open", ".start")
        })
      })
    }
  };
  var l = function(a) {
    return a.getAttribute("data-id") || a.id
  }
})(sketch);

(function(g) {
  function f(a) {
    return a.replace(/,/g, ".").replace(/[^0-9\.]/g, "")
  }

  var d, a = null,
    e = "0.0.0",
    q = null,
    l = null,
    b = null,
    c = {},
    p = 0,
    w = {},
    m = 0,
    u = {},
    t = null,
    h = null,
    r = function() {
      var a, b, c, d, e = "./inc/ZeroClipboard/ZeroClipboard.swf";
      if (!document.currentScript || !(d = document.currentScript.src)) {
        var f = document.getElementsByTagName("script");
        if ("readyState" in f[0])
          for (a = f.length; a-- && ("interactive" !== f[a].readyState ||
              !(d = f[a].src)););
        else if ("loading" === document.readyState) d = f[f.length - 1].src;
        else {
          for (a = f.length; a--;) {
            c =
              f[a].src;
            if (!c) {
              b = null;
              break
            }
            c = c.split("#")[0].split("?")[0];
            c = c.slice(0, c.lastIndexOf("/") + 1);
            if (null == b) b = c;
            else if (b !== c) {
              b = null;
              break
            }
          }
          null !== b && (d = b)
        }
      }
      d && (d = d.split("#")[0].split("?")[0], e = d.slice(0, d.lastIndexOf(
        "/") + 1) + e);
      return e
    }(),
    k = function() {
      var a = /\-([a-z])/g,
        b = function(a, b) {
          return b.toUpperCase()
        };
      return function(c) {
        return c.replace(a, b)
      }
    }(),
    v = function(a) {
      a || (a = g.event);
      var b;
      this !== g ? b = this : a.target ? b = a.target : a.srcElement &&
        (b = a.srcElement);
      J.activate(b)
    },
    x = function(a, b) {
      if (!a || 1 !==
        a.nodeType) return a;
      if (a.classList) return a.classList.contains(b) || a.classList.add(
        b), a;
      if (b && "string" === typeof b) {
        var c = (b || "").split(/\s+/);
        if (1 === a.nodeType)
          if (a.className) {
            for (var d = " " + a.className + " ", e = a.className, f = 0,
                h = c.length; f < h; f++) 0 > d.indexOf(" " + c[f] + " ") &&
              (e += " " + c[f]);
            a.className = e.replace(/^\s+|\s+$/g, "")
          } else a.className = b
      }
      return a
    },
    s = function(a, b) {
      if (!a || 1 !== a.nodeType) return a;
      if (a.classList) return a.classList.contains(b) && a.classList.remove(
        b), a;
      if (b && "string" === typeof b || void 0 ===
        b) {
        var c = (b || "").split(/\s+/);
        if (1 === a.nodeType && a.className)
          if (b) {
            for (var d = (" " + a.className + " ").replace(/[\n\t]/g, " "),
                e = 0, f = c.length; e < f; e++) d = d.replace(" " + c[e] +
              " ", " ");
            a.className = d.replace(/^\s+|\s+$/g, "")
          } else a.className = ""
      }
      return a
    },
    z = function(a, b, c) {
      if ("function" === typeof b.indexOf) return b.indexOf(a, c);
      var d = b.length;
      for ("undefined" === typeof c ? c = 0 : 0 > c && (c = d + c); c <
        d; c++)
        if (b.hasOwnProperty(c) && b[c] === a) return c;
      return -1
    },
    y = function(a) {
      if ("string" === typeof a) throw new TypeError(
        "ZeroClipboard doesn't accept query strings.");
      return a.length ? a : [a]
    },
    B = function(a, b, c, d) {
      d ? g.setTimeout(function() {
        a.apply(b, c)
      }, 0) : a.apply(b, c)
    },
    A = function(a) {
      var b, c;
      a && ("number" === typeof a && 0 < a ? b = a : "string" ===
        typeof a && (c = parseInt(a, 10)) && !isNaN(c) && 0 < c && (b =
          c));
      b || ("number" === typeof K.zIndex && 0 < K.zIndex ? b = K.zIndex :
        "string" === typeof K.zIndex && (c = parseInt(K.zIndex, 10)) &&
        !isNaN(c) && 0 < c && (b = c));
      return b || 0
    },
    C = function(a, b) {
      if (a && !1 !== b && "undefined" !== typeof console && console &&
        (console.warn || console.log)) {
        var c = "`" + a +
          "` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";
        console.warn ? console.warn(c) : console.log(c)
      }
    },
    F = function() {
      var a, b, c, d, e, f = arguments[0] || {};
      a = 1;
      for (b = arguments.length; a < b; a++)
        if (null != (c = arguments[a]))
          for (d in c) c.hasOwnProperty(d) && (e = c[d], f !== e && void 0 !==
            e && (f[d] = e));
      return f
    },
    E = function(a) {
      if (null == a || "" === a) return null;
      a = a.replace(/^\s+|\s+$/g, "");
      if ("" === a) return null;
      var b = a.indexOf("//");
      a = -1 === b ? a : a.slice(b + 2);
      var c = a.indexOf("/");
      return (a = -1 === c ? a : -1 === b || 0 === c ? null : a.slice(0,
        c)) && ".swf" === a.slice(-4).toLowerCase() ? null : a || null
    },
    D = function() {
      var a =
        function(a, b) {
          var c, d, e;
          if (null != a && "*" !== b[0] && ("string" === typeof a && (a = [
              a
            ]), "object" === typeof a && "length" in a))
            for (c = 0, d = a.length; c < d; c++)
              if (a.hasOwnProperty(c) && (e = E(a[c]))) {
                if ("*" === e) {
                  b.length = 0;
                  b.push("*");
                  break
                } - 1 === z(e, b) && b.push(e)
              }
        },
        b = {
          always: "always",
          samedomain: "sameDomain",
          never: "never"
        };
      return function(c, d) {
        var e, f = d.allowScriptAccess;
        if ("string" === typeof f && (e = f.toLowerCase()) &&
          /^always|samedomain|never$/.test(e)) return b[e];
        e = E(d.moviePath);
        null === e && (e = c);
        f = [];
        a(d.trustedOrigins, f);
        a(d.trustedDomains, f);
        var h = f.length;
        if (0 < h) {
          if (1 === h && "*" === f[0]) return "always";
          if (-1 !== z(c, f)) return 1 === h && c === e ? "sameDomain" :
            "always"
        }
        return "never"
      }
    }(),
    P = function(a) {
      if (null == a) return [];
      if (Object.keys) return Object.keys(a);
      var b = [],
        c;
      for (c in a) a.hasOwnProperty(c) && b.push(c);
      return b
    },
    G = function() {
      var a = !1;
      if ("boolean" === typeof q) a = !1 === q;
      else {
        if ("function" === typeof ActiveXObject) try {
            new ActiveXObject("ShockwaveFlash.ShockwaveFlash") && (a = !0)
          } catch (b) {}!a && navigator.mimeTypes[
            "application/x-shockwave-flash"] &&
          (a = !0)
      }
      return a
    },
    J = function(c, d) {
      if (!(this instanceof J)) return new J(c, d);
      this.id = "" + p++;
      w[this.id] = {
        instance: this,
        elements: [],
        handlers: {}
      };
      c && this.clip(c);
      "undefined" !== typeof d && (C(
        "new ZeroClipboard(elements, options)", K.debug), J.config(d));
      this.options = J.config();
      "boolean" !== typeof q && (q = !G());
      if (!1 === q && !0 !== l && null === a) {
        b = l = !1;
        var e, f, k = document.getElementById(
          "global-zeroclipboard-html-bridge");
        if (!k) {
          e = J.config();
          e.jsModuleId = "string" === typeof t && t || "string" ===
            typeof h && h || null;
          var k = D(g.location.host,
              K),
            m, r, s, v = [],
            u = [],
            x = [];
          e.trustedOrigins && ("string" === typeof e.trustedOrigins ? u.push(
              e.trustedOrigins) : "object" === typeof e.trustedOrigins &&
            "length" in e.trustedOrigins && (u = u.concat(e.trustedOrigins))
          );
          e.trustedDomains && ("string" === typeof e.trustedDomains ? u.push(
              e.trustedDomains) : "object" === typeof e.trustedDomains &&
            "length" in e.trustedDomains && (u = u.concat(e.trustedDomains))
          );
          if (u.length)
            for (m = 0, r = u.length; m < r; m++)
              if (u.hasOwnProperty(m) && u[m] && "string" === typeof u[m] &&
                (s = E(u[m]))) {
                if ("*" === s) {
                  x = [s];
                  break
                }
                x.push.apply(x, [s, "//" + s, g.location.protocol + "//" + s])
              }
          x.length && v.push("trustedOrigins=" + encodeURIComponent(x.join(
            ",")));
          "string" === typeof e.jsModuleId && e.jsModuleId && v.push(
            "jsModuleId=" + encodeURIComponent(e.jsModuleId));
          e = v.join("&");
          m = K.moviePath + (null == K || K && !0 === K.cacheBust && !0 ===
            K.useNoCache ? (-1 === K.moviePath.indexOf("?") ? "?" : "&") +
            "noCache=" + (new Date).getTime() : "");
          e =
            '      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="' +
            m + '"/>         <param name="allowScriptAccess" value="' + k +
            '"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="' +
            e + '"/>         <embed src="' + m +
            '"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="' +
            k +
            '"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="' +
            e +
            '"           scale="exactfit">         </embed>       </object>';
          k = document.createElement("div");
          k.id = "global-zeroclipboard-html-bridge";
          k.setAttribute("class", "global-zeroclipboard-container");
          k.style.position = "absolute";
          k.style.left = "0px";
          k.style.top = "-9999px";
          k.style.width = "15px";
          k.style.height =
            "15px";
          k.style.zIndex = "" + A(K.zIndex);
          document.body.appendChild(k);
          k.innerHTML = e
        }(e = document["global-zeroclipboard-flash-bridge"]) && (f = e.length) && (e = e[f - 1]);
        a = e || k.children[0].lastElementChild;
      }
    };

  J.prototype.setText = function(d) {
    console.log("[Set Text] method call");
    d && "" !== d && 
      (c["text/plain"] = d, !0 === b && a &&"function" === typeof a.setText ? 
        a.setText(d) : b = !1);
    return this;
  };

  J.prototype.setSize = function(c, d) {
    console.log("[Set Size] method call");
    !0 === b && a && "function" === typeof a.setSize ? a.setSize(c, d) : b = !1;
    return this
  };
  var N = function(c) {
    !0 === b && a && "function" === typeof a.setHandCursor ?
      a.setHandCursor(c) : b = !1
  };
  J.prototype.destroy = function() {
    this.unclip();
    this.off();
    delete w[this.id]
  };
  J.version = "1.3.5";
  var K = {
    swfPath: r,
    trustedDomains: g.location.host ? [g.location.host] : [],
    cacheBust: !0,
    forceHandCursor: !1,
    zIndex: 999999999,
    debug: !0,
    title: null,
    autoActivate: !0
  };
  J.config = function(a) {
    "object" === typeof a && null !== a && F(K, a);
    if ("string" === typeof a && a) {
      if (K.hasOwnProperty(a)) return K[a]
    } else {
      a = {};
      for (var b in K) K.hasOwnProperty(b) && (a[b] = "object" ===
        typeof K[b] && null !== K[b] ? "length" in K[b] ? K[b].slice(0) :
        F({}, K[b]) : K[b]);
      return a
    }
  };
  J.destroy = function() {
    J.deactivate();
    for (var c in w)
      if (w.hasOwnProperty(c) && w[c]) {
        var d = w[c].instance;
        d && "function" === typeof d.destroy && d.destroy()
      }(c = O(a)) && c.parentNode && (c.parentNode.removeChild(c), a =
      b = null)
  };
  J.activate = function(b) {
    d && (s(d, K.hoverClass), s(d, K.activeClass));
    d = b;
    x(b, K.hoverClass);
    V();
    var c = K.title || b.getAttribute("title");
    if (c) {
      var e = O(a);
      e && e.setAttribute("title", c)
    }
    if (!(c = !0 === K.forceHandCursor)) {
      a: {
        g.getComputedStyle ? c = g.getComputedStyle(b, null).getPropertyValue(
            "cursor") :
          (c = k("cursor"), c = b.currentStyle ? b.currentStyle[c] : b.style[
            c]);
        if (!c || "auto" === c)
          if (b = b.tagName.toLowerCase(), "a" === b) {
            b = "pointer";
            break a
          }
        b = c
      }
      c = "pointer" === b
    }
    N(c)
  };
  J.deactivate = function() {
    var b = O(a);
    b && (b.style.left = "0px", b.style.top = "-9999px", b.removeAttribute(
      "title"));
    d && (s(d, K.hoverClass), s(d, K.activeClass), d = null)
  };
  var O = function(a) {
      var b = /^OBJECT|EMBED$/;
      for (a = a && a.parentNode; a && b.test(a.nodeName) && a.parentNode;)
        a = a.parentNode;
      return a || null
    },
    V = function() {
      if (d) {
        var c = d,
          e = 0,
          f = 0,
          h = 0,
          k = 0,
          l = A(K.zIndex) -
          1;
        c.getBoundingClientRect && (k = c.getBoundingClientRect(),
          "pageXOffset" in g && "pageYOffset" in g ? (e = g.pageXOffset,
            f = g.pageYOffset) : (e = 1, "function" === typeof document.body
            .getBoundingClientRect && (e = document.body.getBoundingClientRect(),
              e = e.right - e.left, f = document.body.offsetWidth, e =
              Math.round(e / f * 100) / 100), f = e, e = Math.round(
              document.documentElement.scrollLeft / f), f = Math.round(
              document.documentElement.scrollTop / f)), h = document.documentElement
          .clientTop || 0, e = k.left + e - (document.documentElement.clientLeft ||
            0),
          f = k.top + f - h, h = "width" in k ? k.width : k.right - k.left,
          k = "height" in k ? k.height : k.bottom - k.top);
        if (c = O(a)) c.style.top = f + "px", c.style.left = e + "px", c
          .style.width = h + "px", c.style.height = k + "px", c.style.zIndex =
          l + 1;
        !0 === b && a && "function" === typeof a.setSize ? a.setSize(h,
          k) : b = !1
      }
      return this
    };
  J.prototype.on = function(a, c) {
    var d, f, h, g = {},
      k = w[this.id] && w[this.id].handlers;
    if ("string" === typeof a && a) h = a.toLowerCase().split(/\s+/);
    else if ("object" === typeof a && a && "undefined" === typeof c)
      for (d in a)
        if (a.hasOwnProperty(d) && "string" ===
          typeof d && d && "function" === typeof a[d]) this.on(d, a[d]);
    if (h && h.length) {
      d = 0;
      for (f = h.length; d < f; d++) a = h[d].replace(/^on/, ""), g[a] = !
        0, k[a] || (k[a] = []), k[a].push(c);
      g.noflash && q && L.call(this, "noflash", {});
      g.wrongflash && l && L.call(this, "wrongflash", {
        flashVersion: e
      });
      g.load && b && L.call(this, "load", {
        flashVersion: e
      })
    }
    return this
  };
  J.prototype.off = function(a, b) {
    var c, d, e, f, h, g = w[this.id] && w[this.id].handlers;
    if (0 === arguments.length) f = P(g);
    else if ("string" === typeof a && a) f = a.split(/\s+/);
    else if ("object" === typeof a &&
      a && "undefined" === typeof b)
      for (c in a) a.hasOwnProperty(c) && "string" === typeof c && c &&
        "function" === typeof a[c] && this.off(c, a[c]);
    if (f && f.length)
      for (c = 0, d = f.length; c < d; c++)
        if (a = f[c].toLowerCase().replace(/^on/, ""), (h = g[a]) && h.length)
          if (b)
            for (e = z(b, h); - 1 !== e;) h.splice(e, 1), e = z(b, h, e);
          else g[a].length = 0;
    return this
  };
  J.prototype.handlers = function(a) {
    var b, c = null,
      d = w[this.id] && w[this.id].handlers;
    if (d) {
      if ("string" === typeof a && a) return d[a] ? d[a].slice(0) :
        null;
      c = {};
      for (b in d) d.hasOwnProperty(b) && d[b] && (c[b] =
        d[b].slice(0))
    }
    return c
  };
  J.prototype.clip = function(a) {
    a = y(a);
    for (var b = 0; b < a.length; b++)
      if (a.hasOwnProperty(b) && a[b] && 1 === a[b].nodeType) {
        if (a[b].zcClippingId) - 1 === z(this.id, u[a[b].zcClippingId]) &&
          u[a[b].zcClippingId].push(this.id);
        else if (a[b].zcClippingId = "zcClippingId_" + m++, u[a[b].zcClippingId] = [
            this.id
          ], !0 === K.autoActivate) {
          var c = a[b],
            d = v;
          c && 1 === c.nodeType && (c.addEventListener ? c.addEventListener(
            "mouseover", d, !1) : c.attachEvent && c.attachEvent(
            "onmouseover", d))
        }
        c = w[this.id].elements; - 1 === z(a[b],
          c) && c.push(a[b])
      }
    return this
  };
  J.prototype.unclip = function(a) {
    var b = w[this.id];
    if (b) {
      var b = b.elements,
        c;
      a = "undefined" === typeof a ? b.slice(0) : y(a);
      for (var d = a.length; d--;)
        if (a.hasOwnProperty(d) && a[d] && 1 === a[d].nodeType) {
          for (c = 0; - 1 !== (c = z(a[d], b, c));) b.splice(c, 1);
          var e = u[a[d].zcClippingId];
          if (e) {
            for (c = 0; - 1 !== (c = z(this.id, e, c));) e.splice(c, 1);
            0 === e.length && (!0 === K.autoActivate && (c = a[d], e = v,
              c && 1 === c.nodeType && (c.removeEventListener ? c.removeEventListener(
                "mouseover", e, !1) : c.detachEvent && c.detachEvent(
                "onmouseover",
                e))), delete a[d].zcClippingId)
          }
        }
    }
    return this
  };
  J.prototype.elements = function() {
    var a = w[this.id];
    return a && a.elements ? a.elements.slice(0) : []
  };
  K.hoverClass = "zeroclipboard-is-hover";
  K.activeClass = "zeroclipboard-is-active";
  K.trustedOrigins = null;
  K.allowScriptAccess = null;
  K.useNoCache = !0;
  K.moviePath = "./inc/ZeroClipboard/ZeroClipboard.swf";
  J.detectFlashSupport = function() {
    C("ZeroClipboard.detectFlashSupport", K.debug);
    return G()
  };
  J.dispatch = function(a, b) {
    if ("string" === typeof a && a) {
      var c = a.toLowerCase().replace(/^on/,
        "");
      if (c) {
        var e;
        if (d && !0 === K.autoActivate) {
          var f, h, g, k;
          e = [];
          if (d && 1 === d.nodeType && (f = d.zcClippingId) && u.hasOwnProperty(
              f) && (f = u[f]) && f.length)
            for (h = 0, g = f.length; h < g; h++)(k = w[f[h]].instance) &&
              k instanceof J && e.push(k)
        } else {
          g = [];
          k = P(w);
          e = 0;
          for (f = k.length; e < f; e++)(h = w[k[e]].instance) && h instanceof J &&
            g.push(h);
          e = g
        }
        f = 0;
        for (h = e.length; f < h; f++) L.call(e[f], c, b)
      }
    }
  };
  J.prototype.setHandCursor = function(a) {
    C("ZeroClipboard.prototype.setHandCursor", K.debug);
    a = "boolean" === typeof a ? a : !!a;
    N(a);
    K.forceHandCursor =
      a;
    return this
  };
  J.prototype.reposition = function() {
    C("ZeroClipboard.prototype.reposition", K.debug);
    return V()
  };
  J.prototype.receiveEvent = function(a, b) {
    C("ZeroClipboard.prototype.receiveEvent", K.debug);
    if ("string" === typeof a && a) {
      var c = a.toLowerCase().replace(/^on/, "");
      c && L.call(this, c, b)
    }
  };
  J.prototype.setCurrent = function(a) {
    C("ZeroClipboard.prototype.setCurrent", K.debug);
    J.activate(a);
    return this
  };
  J.prototype.resetBridge = function() {
    C("ZeroClipboard.prototype.resetBridge", K.debug);
    J.deactivate();
    return this
  };
  J.prototype.setTitle = function(b) {
    C("ZeroClipboard.prototype.setTitle", K.debug);
    if (b = b || K.title || d && d.getAttribute("title")) {
      var c = O(a);
      c && c.setAttribute("title", b)
    }
    return this
  };
  J.setDefaults = function(a) {
    C("ZeroClipboard.setDefaults", K.debug);
    J.config(a)
  };
  J.prototype.addEventListener = function(a, b) {
    C("ZeroClipboard.prototype.addEventListener", K.debug);
    return this.on(a, b)
  };
  J.prototype.removeEventListener = function(a, b) {
    C("ZeroClipboard.prototype.removeEventListener", K.debug);
    return this.off(a, b)
  };
  J.prototype.ready =
    function() {
      C("ZeroClipboard.prototype.ready", K.debug);
      return !0 === b
    };
  var L = function(a, h) {
    a = a.toLowerCase().replace(/^on/, "");
    var k = h && h.flashVersion && f(h.flashVersion) || null,
      m = d,
      p = !0;
    switch (a) {
      case "load":
        if (k) {
          if (!(10 <= parseFloat(f(k)))) {
            L.call(this, "onWrongFlash", {
              flashVersion: k
            });
            return
          }
          l = !1;
          b = !0;
          e = k
        }
        break;
      case "wrongflash":
        !k || 10 <= parseFloat(f(k)) || (l = !0, b = !1, e = k);
        break;
      case "mouseover":
        x(m, K.hoverClass);
        break;
      case "mouseout":
        !0 === K.autoActivate && J.deactivate();
        break;
      case "mousedown":
        x(m, K.activeClass);
        break;
      case "mouseup":
        s(m, K.activeClass);
        break;
      case "datarequested":
        if (m) {
          var r = m.getAttribute("data-clipboard-target");
          (r = (r = r ? document.getElementById(r) : null) ? r.value ||
            r.textContent || r.innerText : m.getAttribute(
              "data-clipboard-text")) && this.setText(r)
        }
        p = !1;
        break;
      case "complete":
        if (c)
          for (var q in c) c.hasOwnProperty(q) && delete c[q];
        if (k = m) {
          a: {
            try {
              r = document.activeElement;
              break a
            } catch (t) {}
            r = null
          }
          k = m !== r
        }
        k && m.focus && m.focus()
    }
    r = [this, h];
    if ((k = w[this.id] && w[this.id].handlers[a]) && k.length) {
      var v, u, z =
        m || this;
      q = 0;
      for (v = k.length; q < v; q++) u = k[q], m = z, "string" ===
        typeof u && "function" === typeof g[u] && (u = g[u]), "object" ===
        typeof u && u && "function" === typeof u.handleEvent && (m = u,
          u = u.handleEvent), "function" === typeof u && B(u, m, r, p)
    }
    return this
  };
  "function" === typeof define && define.amd ? define(["require",
      "exports", "module"
    ], function(a, b, c) {
      t = c && c.id || null;
      return J
    }) : "object" === typeof module && module && "object" === typeof module
    .exports && module.exports && "function" === typeof g.require ? (h =
      module.id || null, module.exports = J) :
    g.ZeroClipboard = J;
})(function() {
  return this;
}());

(function() {
  var g;
  (function(f, d, a, e, q, l) {
    function b(a, b, d, e, h) {
      return t(a, a, d, e, b, a.defaultView.pageXOffset, a.defaultView
        .pageYOffset).then(function(g) {
        f.p("windowClone");
        E("Document cloned");
        var k = na + h,
          l = "[" + k + "='" + h + "']";
        a.querySelector(l).removeAttribute(k);
        g = g.contentWindow;
        l = b.node || g.document.querySelector(l);
        g = {
          contentWindow: f
        };
        return c(l, g, b, d, e)
      })
    }

    function c(a, b, c, e, h) {
      var g = b.contentWindow,
        k = a.ownerDocument || g.document;
      b = f.html2canvas.support || (f.html2canvas.support = new mb(k));
      var l = f.html2canvas.imageLoader ||
        (f.html2canvas.imageLoader = new C(c, b));
      e = "view" === c.type ? e : Math.max(a.offsetWidth, w(k));
      h = "view" === c.type ? h : Math.max(a.offsetHeight, m(k));
      var r = new c.renderer(e, h, l, c, d);
      f.p("parse.a");
      h = new L(a, r, b, l, c);
      f.p("parse.b");
      var q = O(a, h.parent.transformMatrix);
      return h.ready.then(function() {
        f.p("render");
        E("Finished rendering");
        var b;
        b = "view" === c.type ? p(r.canvas, {
            width: r.canvas.width,
            height: r.canvas.height,
            top: 0,
            left: 0,
            x: 0,
            y: 0
          }) : a === k.body || a === k.documentElement || null != c.canvas ?
          r.canvas : p(r.canvas, {
            width: null !=
              c.width ? c.width : q.width,
            height: null != c.height ? c.height : q.height,
            top: q.top,
            left: q.left,
            x: g.pageXOffset,
            y: g.pageYOffset
          });
        f.p("cleanup");
        return b;
      });
    }

    function p(a, b) {
      var c = d.createElement("canvas"),
        e = Math.min(a.width - 1, Math.max(0, b.left)),
        f = Math.min(a.width, Math.max(1, b.left + b.width)),
        h = Math.min(a.height - 1, Math.max(0, b.top)),
        g = Math.min(a.height, Math.max(1, b.top + b.height));
      c.width = b.width;
      c.height = b.height;
      E("Cropping canvas at:", "left:", b.left, "top:", b.top,
        "width:", f - e, "height:", g - h);
      E("Resulting crop with width",
        b.width, "and height", b.height, " with x", e, "and y", h);
      c.getContext("2d").drawImage(a, e, h, f - e, g - h, b.x, b.y, f -
        e, g - h);
      return c;
    }

    function w(a) {
      return Math.max(Math.max(a.body.scrollWidth, a.documentElement.scrollWidth),
        Math.max(a.body.offsetWidth, a.documentElement.offsetWidth),
        Math.max(a.body.clientWidth, a.documentElement.clientWidth));
    }

    function m(a) {
      return Math.max(Math.max(a.body.scrollHeight, a.documentElement
        .scrollHeight), Math.max(a.body.offsetHeight, a.documentElement
        .offsetHeight), Math.max(a.body.clientHeight,
        a.documentElement.clientHeight));
    }

    function u() {
      return "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
    }

    function t(a, b, c, d, e, f, h) {
      return new g(function(b) {
        return b(a)
      })
    }

    function h(a, b, c, d, e, h) {
      return (new tb(a, b, f.document)).then(r(a)).then(function(a) {
        return t(a, c, d, e, h, 0, 0)
      })
    }

    function r(a) {
      return function(b) {
        var c = new DOMParser,
          e;
        try {
          e = c.parseFromString(b, "text/html")
        } catch (f) {
          E(
            "DOMParser not supported, falling back to createHTMLDocument"
          );
          e = d.implementation.createHTMLDocument("");
          try {
            e.open(), e.write(b), e.close()
          } catch (h) {
            E(
              "createHTMLDocument write not supported, falling back to document.body.innerHTML"
            ), e.body.innerHTML = b
          }
        }
        b = e.querySelector("base");
        b && b.href.host || (b = e.createElement("base"), b.href = a,
          e.head.insertBefore(b, e.head.firstChild));
        return e
      }
    }

    function k(a) {
      var b = d.createElement("a");
      b.href = a;
      b.href = b.href;
      return b
    }

    function v(a) {
      this.b = this.g = this.r = 0;
      this.a = null;
      this.fromArray(a) || this.namedColor(a) || this.rgb(a) || this.rgba(
        a) || this.hex6(a) || this.hex3(a)
    }

    function x(a) {
      this.src =
        a;
      E("DummyImageContainer for", a);
      if (!this.promise || !this.image) {
        E("Initiating DummyImageContainer");
        x.prototype.image = new Image;
        var b = this.image;
        x.prototype.promise = new g(function(a, c) {
          b.onload = a;
          b.onerror = c;
          b.src = u();
          !0 === b.complete && a(b)
        })
      }
    }

    function s(a, b) {
      var c = d.createElement("div"),
        e = d.createElement("img"),
        f = d.createElement("span"),
        h;
      c.style.visibility = "hidden";
      c.style.fontFamily = a;
      c.style.fontSize = b;
      c.style.margin = 0;
      c.style.padding = 0;
      d.body.appendChild(c);
      e.src = u();
      e.width = 1;
      e.height = 1;
      e.style.margin =
        0;
      e.style.padding = 0;
      e.style.verticalAlign = "baseline";
      f.style.fontFamily = a;
      f.style.fontSize = b;
      f.style.margin = 0;
      f.style.padding = 0;
      f.appendChild(d.createTextNode("Hidden Text"));
      c.appendChild(f);
      c.appendChild(e);
      h = e.offsetTop - f.offsetTop + 1;
      c.removeChild(f);
      c.appendChild(d.createTextNode("Hidden Text"));
      c.style.lineHeight = "normal";
      e.style.verticalAlign = "super";
      e = e.offsetTop - c.offsetTop + 1;
      d.body.removeChild(c);
      this.baseline = h;
      this.lineWidth = 1;
      this.middle = e
    }

    function z() {
      this.data = {}
    }

    function y(a, b, c) {
      this.image =bnull;
      this.src = a;
      var d = this,
        e = O(a);
      this.promise = (b ? new g(function(b) {
        "about:blank" === a.contentWindow.document.URL || null == a
          .contentWindow.document.documentElement ? a.contentWindow.onload =
          a.onload = function() {
            b(a)
          } : b(a)
      }) : this.proxyLoad(c.proxy, e, c)).then(function(a) {
        return html2canvas(a.contentWindow.document.documentElement, {
          type: "view",
          width: a.width,
          height: a.height,
          proxy: c.proxy,
          javascriptEnabled: c.javascriptEnabled,
          removeContainer: c.removeContainer,
          allowTaint: c.allowTaint,
          imageTimeout: c.imageTimeout /
            2
        })
      }).then(function(a) {
        return d.image = a
      })
    }

    function B(a) {
      this.src = a.value;
      this.colorStops = [];
      this.type = null;
      this.y1 = this.x1 = this.y0 = this.x0 = .5;
      this.promise = g.resolve(!0);
    }

    function A(a, b) {
      this.src = a;
      this.image = new Image;
      var c = this;
      this.tainted = null;
      this.promise = new g(function(d, e) {
        c.image.onload = d;
        c.image.onerror = e;
        b && (c.image.crossOrigin = "anonymous");
        c.image.src = a;
        !0 === c.image.complete && d(c.image)
      })
    }

    function C(a, b) {
      this.link = null;
      this.options = a;
      this.support = b;
      this.origin = this.getOrigin(f.location.href)
    }

    function F(a) {
      B.apply(this, arguments);
      this.type = this.TYPES.LINEAR;
      var b = null === a.args[0].match(this.stepRegExp);
      b ? a.args[0].split(" ").reverse().forEach(function(a) {
        switch (a) {
          case "left":
            this.x0 = 0;
            this.x1 = 1;
            break;
          case "top":
            this.y0 = 0;
            this.y1 = 1;
            break;
          case "right":
            this.x0 = 1;
            this.x1 = 0;
            break;
          case "bottom":
            this.y0 = 1;
            this.y1 = 0;
            break;
          case "to":
            a = this.y0;
            var b = this.x0;
            this.y0 = this.y1;
            this.x0 = this.x1;
            this.x1 = b;
            this.y1 = a
        }
      }, this) : (this.y0 = 0, this.y1 = 1);
      this.colorStops = a.args.slice(b ? 1 : 0).map(function(a) {
        a = a.match(this.stepRegExp);
        return {
          color: new v(a[1]),
          stop: "%" === a[3] ? a[2] / 100 : null
        }
      }, this);
      null === this.colorStops[0].stop && (this.colorStops[0].stop =
        0);
      null === this.colorStops[this.colorStops.length - 1].stop && (
        this.colorStops[this.colorStops.length - 1].stop = 1);
      this.colorStops.forEach(function(a, b) {
        null === a.stop && this.colorStops.slice(b).some(function(c, d) {
          return null !== c.stop ? (a.stop = (c.stop - this.colorStops[
              b - 1].stop) / (d + 1) + this.colorStops[b - 1].stop, !
            0) : !1;
        }, this);
      }, this);
    }

    function E() {
      f.html2canvas.logging && f.console && f.console.log && Function.prototype.bind.call(
        f.console.log, f.console).apply(f.console, [Date.now() - f.html2canvas.start + "ms","html2canvas:"
          ].concat([].slice.call(arguments, 0)));
    }

    function D(a, b) {
      this.node = a;
      this.parent = b;
      this.borders = this.bounds = this.stack = null;
      this.clip = [];
      this.backgroundClip = [];
      this.computedStyles = this.visible = this.offsetBounds = null;
      this.colors = {};
      this.styles = {};
      this.transformMatrix = this.transformData = this.backgroundImages =
        null;
      this.isPseudoElement = !1;
      this.opacity = null;
    }

    function P(a) {
      if (a && "matrix" ===
        a[1]) return a[2].split(",").map(function(a) {
        return parseFloat(a.trim());
      })
    }

    function G(a) {
      return -1 !== a.toString().indexOf("%");
    }

    function J(a) {
      var b, c, d, e, f, h = [],
        g = 0,
        k = 0,
        l, m, p = function() {
          b && ('"' === c.substr(0, 1) && (c = c.substr(1, c.length - 2)),
            c && m.push(c), "-" === b.substr(0, 1) && 0 < (e = b.indexOf(
              "-", 1) + 1) && (d = b.substr(0, e), b = b.substr(e)), h.push({
              prefix: d,
              method: b.toLowerCase(),
              value: f,
              args: m,
              image: null
            }));
          m = [];
          b = d = c = f = ""
        };
      m = [];
      b = d = c = f = "";
      a.split("").forEach(function(a) {
        if (!(0 === g && -1 < " \r\n\t".indexOf(a))) {
          switch (a) {
            case '"':
              l ?
                l === a && (l = null) : l = a;
              break;
            case "(":
              if (l) break;
              else {
                if (0 === g) {
                  g = 1;
                  f += a;
                  return
                }
                k++
              }
              break;
            case ")":
              if (l) break;
              else if (1 === g) {
                if (0 === k) {
                  g = 0;
                  f += a;
                  p();
                  return
                }
                k--
              }
              break;
            case ",":
              if (!l) {
                if (0 === g) {
                  p();
                  return
                }
                if (1 === g && 0 === k && !b.match(/^url$/i)) {
                  m.push(c);
                  c = "";
                  f += a;
                  return
                }
              }
          }
          f += a;
          0 === g ? b += a : c += a
        }
      });
      p();
      return h;
    }

    function N(a) {
      return a.replace("px", "");
    }

    function K(a) {
      return parseFloat(a);
    }

    function O(a, b) {
      b = b || [1, 0, 0, 1, 0, 0];
      if (a.getBoundingClientRect) {
        var c = a.getBoundingClientRect(),
          d = null == a.offsetWidth ? c.width : a.offsetWidth,
          e = null == a.offsetHeight ? c.height : a.offsetHeight;
        return {
          top: c.top,
          bottom: c.bottom || c.top + c.height,
          right: c.left + d,
          left: c.left,
          width: Math.abs(d * b[0]),
          height: Math.abs(e * b[3])
        };
      }
      return {}
    }

    function V(a) {
      var b = a.offsetParent ? V(a.offsetParent) : {
        top: 0,
        left: 0
      };
      return {
        top: a.offsetTop + b.top,
        bottom: a.offsetTop + a.offsetHeight + b.top,
        right: a.offsetLeft + b.left + a.offsetWidth,
        left: a.offsetLeft + b.left,
        width: a.offsetWidth,
        height: a.offsetHeight
      };
    }

    function L(a, b, c, d, e) {
      E("Starting NodeParser");
      this.renderer = b;
      this.options = e;
      this.range = null;
      this.support = c;
      this.renderQueue = [];
      this.stack = new lb(!0, 1, a.ownerDocument, null);
      c = this.parent = new D(a, null);
      e.background && b.rectangle(0, 0, b.width, b.height, new v(e.background));
      if (a === a.ownerDocument.documentElement) {
        var f = new D(c.color("backgroundColor").isTransparent() ? a.ownerDocument.body : a.ownerDocument.documentElement, null);
        b.rectangle(0, 0, b.width, b.height, f.color("backgroundColor"));
      }
      c.visibile = c.isElementVisible();
      this.createPseudoHideStyles(a.ownerDocument);
      this.disableAnimations(a.ownerDocument);
      this.nodes = pb([c].concat(this.getChildren(c)).filter(function(
        a) {
        return a.visible = a.isElementVisible()
      }).map(this.getPseudoElements, this));
      this.fontMetrics = new z;
      E("Fetched nodes, total:", this.nodes.length);
      E("Calculate overflow clips");
      this.calculateOverflowClips();
      E("Start fetching images");
      this.images = d.fetch(this.nodes.filter(ia));
      this.ready = this.images.ready.then($(function() {
        E("Images loaded, starting parsing");
        E("Creating stacking contexts");
        this.createStackingContexts();
        E("Sorting stacking contexts");
        this.sortStackingContexts(this.stack);
        this.parse(this.stack);
        E("Render queue created with " + this.renderQueue.length + " items");
        return new g($(function(a) {
          if(e.async) {
            if("function" === typeof e.async) {
              e.async.call(this, this.renderQueue, a);
            }
            else {
              if(0 < this.renderQueue.length) {
                this.renderIndex = 0;
                this.asyncRenderer(this.renderQueue,a);
              }
              else {
                a();
              }
            }
          }
          else {
            this.renderQueue.forEach(this.paint,this);
            a();
          }
        }, this));
          /*e.async ? "function" === typeof e.async ? e.async.call(
              this, this.renderQueue, a) : 
          0 < this.renderQueue.length ?
            (this.renderIndex = 0, this.asyncRenderer(this.renderQueue,
              a)) : a() : (this.renderQueue.forEach(this.paint,this), a())
        }, this))*/
      }, this))
    }

    function T(a) {
      return a.replace(/(\-[a-z])/g, function(a) {
        return a.toUpperCase().replace("-", "");
      })
    }

    function Q() {}

    function U(a, b, c, d) {
      return a.map(function(e, f) {
        if (0 < e.width) {
          var h = b.left,
            g = b.top,
            k = b.width,
            l = b.height - a[2].width;
          switch (f) {
            case 0:
              l = a[0].width;
              e.args = ea({
                  c1: [h, g],
                  c2: [h + k, g],
                  c3: [h + k - a[1].width, g + l],
                  c4: [h + a[3].width, g + l]
                }, d[0], d[1], c.topLeftOuter, c.topLeftInner, c.topRightOuter,
                c.topRightInner);
              break;
            case 1:
              h = b.left + b.width - a[1].width;
              k = a[1].width;
              e.args = ea({
                  c1: [h + k, g],
                  c2: [h + k, g + l + a[2].width],
                  c3: [h, g + l],
                  c4: [h, g + a[0].width]
                }, d[1], d[2], c.topRightOuter, c.topRightInner, c.bottomRightOuter,
                c.bottomRightInner);
              break;
            case 2:
              g = g + b.height - a[2].width;
              l = a[2].width;
              e.args = ea({
                  c1: [h + k, g + l],
                  c2: [h, g + l],
                  c3: [h + a[3].width, g],
                  c4: [h + k - a[3].width, g]
                }, d[2], d[3], c.bottomRightOuter, c.bottomRightInner,
                c.bottomLeftOuter, c.bottomLeftInner);
              break;
            case 3:
              k = a[3].width, e.args = ea({
                  c1: [h, g + l + a[2].width],
                  c2: [h, g],
                  c3: [h + k, g + a[0].width],
                  c4: [h + k, g + l]
                }, d[3], d[0], c.bottomLeftOuter, c.bottomLeftInner, c.topLeftOuter,
                c.topLeftInner)
          }
        }
        return e;
      });
    }

    function da(a, b, c, d) {
      var e = 4 * ((Math.sqrt(2) - 1) / 3),
        f = c * e,
        e = d * e;
      c = a + c;
      d = b + d;
      return {
        topLeft: R({
          x: a,
          y: d
        }, {
          x: a,
          y: d - e
        }, {
          x: c - f,
          y: b
        }, {
          x: c,
          y: b
        }),
        topRight: R({
          x: a,
          y: b
        }, {
          x: a + f,
          y: b
        }, {
          x: c,
          y: d - e
        }, {
          x: c,
          y: d
        }),
        bottomRight: R({
          x: c,
          y: b
        }, {
          x: c,
          y: b + e
        }, {
          x: a + f,
          y: d
        }, {
          x: a,
          y: d
        }),
        bottomLeft: R({
          x: c,
          y: d
        }, {
          x: c - f,
          y: d
        }, {
          x: a,
          y: b + e
        }, {
          x: a,
          y: b
        })
      };
    }

    function aa(a, b, c) {
      var d = a.left,
        e = a.top,
        f = a.width;
      a = a.height;
      var h = b[0][0],
        g = b[0][1],
        k = b[1][0],
        l = b[1][1],
        m = b[2][0],
        p = b[2][1],
        r = b[3][0];
      b = b[3][1];
      var q = f - k,
        s = a - p,
        t = f - m,
        v = a - b;
      return {
        topLeftOuter: da(d, e, h, g).topLeft.subdivide(.5),
        topLeftInner: da(d + c[3].width, e + c[0].width, Math.max(0, h - c[3].width), Math.max(0, g - c[0].width)).topLeft.subdivide(.5),
        topRightOuter: da(d + q, e, k, l).topRight.subdivide(.5),
        topRightInner: da(d + Math.min(q, f + c[3].width), e + c[0].width, q > f + c[3].width ? 0 : k - c[3].width, l - c[0].width).topRight.subdivide(.5),
        bottomRightOuter: da(d + t, e + s, m, p).bottomRight.subdivide(.5),
        bottomRightInner: da(d + Math.min(t, f - c[3].width), e + Math.min(s, a + c[0].width), Math.max(0, m - c[1].width), p - c[2].width).bottomRight.subdivide(.5),
        bottomLeftOuter: da(d, e + v, r, b).bottomLeft.subdivide(.5),
        bottomLeftInner: da(d + c[3].width, e + v, Math.max(0, r - c[3].width), b - c[2].width).bottomLeft.subdivide(.5)
      };
    }

    function R(a, b, c, d) {
      var e = function(a, b, c) {
        return {
          x: a.x + (b.x - a.x) * c,
          y: a.y + (b.y - a.y) * c
        };
      };
      return {
        start: a,
        startControl: b,
        endControl: c,
        end: d,
        subdivide: function(f) {
          var h = e(a, b, f),
            g = e(b, c, f),
            k = e(c, d, f),
            l = e(h, g, f),
            g = e(g, k, f);
          f = e(l, g, f);
          return [R(a, h, l, f), R(f, g, k, d)]
        },
        curveTo: function(a) {
          a.push(["bezierCurve", b.x, b.y, c.x, c.y, d.x, d.y])
        },
        curveToReversed: function(d) {
          d.push(["bezierCurve", c.x, c.y, b.x, b.y, a.x, a.y])
        }
      };
    }

    function ea(a, b, c, d, e, f, h) {
      var g = [];
      0 < b[0] || 0 < b[1] ? (g.push(["line", d[1].start.x, d[1].start.y]), d[1].curveTo(g)) : g.push(["line", a.c1[0], a.c1[1]]);
      0 < c[0] || 0 < c[1] ? (g.push(["line", f[0].start.x, f[0].start.y]), f[0].curveTo(g), g.push(["line", h[0].end.x, h[0].end.y]),
        h[0].curveToReversed(g)) : (g.push(["line", a.c2[0], a.c2[1]]), g.push(["line", a.c3[0], a.c3[1]]));
      0 < b[0] || 0 < b[1] ? (g.push(["line", e[1].end.x, e[1].end.y]),
        e[1].curveToReversed(g)) : g.push(["line", a.c4[0], a.c4[1]]);
      return g;
    }

    function Z(a, b, c, d, e, f, h) {
      0 < b[0] || 0 < b[1] ? (a.push(["line", d[0].start.x, d[0].start.y]), d[0].curveTo(a), d[1].curveTo(a)) : a.push(["line", f, h]);
      (0 < c[0] || 0 < c[1]) && a.push(["line", e[0].start.x, e[0].start.y]);
    }

    function ga(a) {
      return 0 > a.cssInt("zIndex");
    }

    function W(a) {
      return 0 < a.cssInt("zIndex");
    }

    function ma(a) {
      return 0 === a.cssInt("zIndex");
    }

    function ua(a) {
      return -1 !== ["inline", "inline-block", "inline-table"].indexOf(a.css("display"));
    }

    function ja(a) {
      return 0 < a.node.data.trim().length;
    }

    function ta(a) {
      return ["TopLeft", "TopRight", "BottomRight", "BottomLeft"].map(
        function(b) {
          b = a.css("border" +
            b + "Radius").split(" ");
          1 >= b.length && (b[1] = b[0]);
          return b.map(Y);
        });
    }

    function Da(a) {
      return a.nodeType === Node.TEXT_NODE || a.nodeType === Node.ELEMENT_NODE;
    }

    function va(a) {
      return "static" !== a.css("position");
    }

    function X(a) {
      return "none" !== a.css("float");
    }

    function oa(a) {
      var b = this;
      return function() {
        return !a.apply(b, arguments);
      };
    }

    function ia(a) {
      return a.node.nodeType === Node.ELEMENT_NODE;
    }

    function ca(a) {
      return a.node.nodeType === Node.TEXT_NODE;
    }

    function ba(a) {
      return function(b, c) {
        return b.cssInt("zIndex") + a.indexOf(b) /
          a.length - (c.cssInt("zIndex") + a.indexOf(c) / a.length);
      };
    }

    function $(a, b) {
      return function() {
        return a.apply(b, arguments);
      };
    }

    function Y(a) {
      return parseInt(a, 10);
    }

    function pa(a) {
      return a.width;
    }

    function Wa(a) {
      return a.node.nodeType !== Node.ELEMENT_NODE || -1 === "SCRIPT HEAD TITLE OBJECT BR OPTION".split(" ").indexOf(a.node.nodeName);
    }

    function pb(a) {
      return [].concat.apply([], a);
    }

    function Na(a) {
      for (var b = [], c = 0, d = !1, e; a.length;) - 1 !== [32, 13, 10, 9, 45].indexOf(a[c]) === d ? (e = a.splice(0, c), e.length && b.push(f.html2canvas.punycode.ucs2.encode(e)),
        d = !d, c = 0) : c++, c >= a.length && (e = a.splice(0, c), e.length && b.push(f.html2canvas.punycode.ucs2.encode(e)));
    return b
    }

    function tb(a, proxy, c) {
      if (!proxy) return g.reject("No proxy configured");
      var d = ub(Ia);
      a = xb(proxy, a, d);
      return Ia ? za(a) : fb(c, a, d).then(function(a) {
        return qa(a.content);
      });
    }

    function ab(a, b, c) {
      var d = ub(Ba);
      a = xb(b, a, d);
      return Ba ? g.resolve(a) : fb(c, a, d).then(function(a) {
          return "data:" + a.type + ";base64," + a.content;
        });
    }

    function fb(a, b, c) {
      return new g(function(d, e) {
        var h = a.createElement("script"),
          g = function() {
            delete f.html2canvas.proxy[c];
            a.body.removeChild(h);
          };
        f.html2canvas.proxy[c] = function(a) {
          g();
          d(a);
        };
        h.src = b;
        h.onerror = function(a) {
          g();
          e(a);
        };
        a.body.appendChild(h);
      });
    }

    function ub(a) {
      return a ? "" : "html2canvas_" + Date.now() + "_" + ++bb + "_" + Math.round(1E5 * Math.random());
    }

    function xb(a, b, c) {
      return a + "?url=" + encodeURIComponent(b) + (c.length ? "&callback=html2canvas.proxy." + c : "");
    }

    function wb(a, b) {
      var c = d.createElement("a");
      c.href = a;
      this.src = a = c.href;
      this.image = new Image;
      var e = this;
      this.promise = new g(function(c, f) {
        e.image.crossOrigin = "Anonymous";
        e.image.onload = c;
        e.image.onerror = f;
        (new ab(a, b, d)).then(function(a) {
          e.image.src = a
        })["catch"](f);
      });
    }

    function Ja(a, b, c) {
      D.call(this, a, b);
      this.isPseudoElement = !0;
      this.before = ":before" === c;
    }

    function $a(a, b, c, d, e) {
      this.width = a;
      this.height = b;
      this.images = c;
      this.options = d;
      this.document = e;
    }

    function lb(a, b, c, d) {
      D.call(this, c, d);
      this.ownStacking = a;
      this.contexts = [];
      this.children = [];
      this.opacity = (this.parent ? this.parent.stack.opacity : 1) * b;
    }

    function mb(a) {
      this.rangeBounds = this.testRangeBounds(a);
      this.cors = this.testCORS();
      this.svg = this.testSVG()
    }

    function Qa(a) {
      this.src = a;
      this.image = null;
      var b = this;
      this.promise = this.hasFabric().then(function() {
        return b.isInline(a) ? g.resolve(b.inlineFormatting(a)) : za(a);
      }).then(function(a) {
        return new g(function(c) {
          html2canvas.fabric.loadSVGFromString(a, b.createCanvas.call(b, c));
        });
      });
    }

    function qa(a) {
      var b = a.length, c, d, e, f, h, g, k = "";
      for (c = 0; c < b; c += 4) {
        d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[c]);
        e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[c + 1]);
        f = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[c + 2]);
        h = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[c + 3]);
        d = d << 2 | e >> 4;
        e = (e & 15) << 4 | f >> 2;
        g = (f & 3) << 6 | h;
        k = 64 === f ? k + String.fromCharCode(d) : 64 === h || -1 === h ? k + String.fromCharCode(d, e) : k + String.fromCharCode(d, e, g);
      }
      return k;
    }

    function Ea(a, b) {
      this.src = a;
      this.image = null;
      var c = this;
      this.promise = b ? new g(function(b, d) {
        c.image = new Image;
        c.image.onload = b;
        c.image.onerror = d;
        c.image.src = "data:image/svg+xml," +
          (new XMLSerializer).serializeToString(a);
        !0 === c.image.complete && b(c.image)
      }) : this.hasFabric().then(function() {
        return new g(function(b) {
          html2canvas.fabric.parseSVGDocument(a, c.createCanvas.call(
            c, b))
        })
      })
    }

    function Oa(a, b) {
      D.call(this, a, b)
    }

    function Fa(a, b, c) {
      if (0 < a.length) return b + c.toUpperCase()
    }

    function Ka(a) {
      B.apply(this, arguments);
      this.type = "linear" === a.args[0] ? this.TYPES.LINEAR : this.TYPES
        .RADIAL
    }

    function za(a) {
      return new g(function(b, c) {
        var d = new XMLHttpRequest;
        console.debug(a);
        d.open("GET", a);
        d.onload = function() {
          200 ===
            d.status ? b(d.responseText) : c(Error(d.statusText))
        };
        d.onerror = function() {
          c(Error("Network Error"))
        };
        d.send()
      })
    }

    function Aa(a, b) {
      $a.apply(this, arguments);
      this.canvas = this.options.canvas || this.document.createElement(
        "canvas");
      this.options.canvas || (this.canvas.width = a, this.canvas.height =
        b);
      this.ctx = this.canvas.getContext("2d");
      this.taintCtx = this.document.createElement("canvas").getContext(
        "2d");
      this.ctx.textBaseline = "bottom";
      E("Initialized CanvasRenderer with size", a, "x", b)
    }

    function ya(a) {
      return 0 < a.length
    }

    (function() {
      function a(b) {
        return "function" === typeof b
      }

      function b() {}

      function c(a, b, d, e) {
        try {
          a.call(b, d, e);
        } catch (f) {
          return f;
        }
      }

      function d(a, b, e) {
        z(function(a) {
          var d = !1,
            h = c(e, b, function(c) {
              d || (d = !0, b !== c ? f(a, c) : k(a, c))
            }, function(b) {
              d || (d = !0, m(a, b))
            }, "Settle: " + (a._label || " unknown promise"));
          !d && h && (d = !0, m(a, h))
        }, a)
      }

      function e(a, b) {
        b._state === X ? k(a, b._result) : a._state === Y ? m(a, b._result) :
          p(b, l, function(b) {
            f(a, b)
          }, function(b) {
            m(a, b)
          })
      }

      function f(b, c) {
        if (b === c) m(b, new TypeError(
          "You cannot resolve a promise with itself"));
        else if ("function" === typeof c || "object" === typeof c &&
          null !== c)
          if (c.constructor === b.constructor) e(b, c);
          else {
            var h;
            try {
              h = c.then
            } catch (g) {
              ba.error = g, h = ba
            }
            h === ba ? m(b, ba.error) : h === l ? k(b, c) : a(h) ? d(b,
              c, h) : k(b, c)
          } else k(b, c)
      }

      function h(a) {
        a._onerror && a._onerror(a._result);
        r(a)
      }

      function k(a, b) {
        a._state === A && (a._result = b, a._state = X, 0 !== a._subscribers
          .length && z(r, a))
      }

      function m(a, b) {
        a._state === A && (a._state = Y, a._result = b, z(h, a))
      }

      function p(a, b, c, d) {
        var e = a._subscribers,
          f = e.length;
        a._onerror = null;
        e[f] = b;
        e[f + X] =
          c;
        e[f + Y] = d;
        0 === f && a._state && z(r, a)
      }

      function r(a) {
        var b = a._subscribers,
          c = a._state;
        if (0 !== b.length) {
          for (var d, e, f = a._result, h = 0; h < b.length; h += 3) d =
            b[h], e = b[h + c], d ? s(c, d, e, f) : e(f);
          a._subscribers.length = 0
        }
      }

      function q() {
        this.error = null
      }

      function s(b, c, d, e) {
        var h = a(d),
          g, l, p, r;
        if (h) {
          try {
            g = d(e)
          } catch (q) {
            B.error = q, g = B
          }
          g === B ? (r = !0, l = g.error, g = null) : p = !0;
          if (c === g) {
            m(c, new TypeError(
              "A promises callback cannot return that same promise."));
            return
          }
        } else g = e, p = !0;
        c._state === A && (h && p ? f(c, g) : r ? m(c, l) : b === X ?
          k(c, g) : b ===
          Y && m(c, g))
      }

      function t(a, b) {
        try {
          b(function(b) {
            f(a, b)
          }, function(b) {
            m(a, b)
          })
        } catch (c) {
          m(a, c)
        }
      }

      function v(a, c, d, e) {
        this._instanceConstructor = a;
        this.promise = new a(b, e);
        this._abortOnReject = d;
        this._validateInput(c) ? (this._input = c, this._remaining =
          this.length = c.length, this._init(), 0 === this.length ?
          k(this.promise, this._result) : (this.length = this.length ||
            0, this._enumerate(), 0 === this._remaining && k(this.promise,
              this._result))) : m(this.promise, this._validationError())
      }

      function u(c) {
        this._id = $++;
        this._result = this._state =
          l;
        this._subscribers = [];
        if (b !== c) {
          if (!a(c)) throw new TypeError(
            "You must pass a resolver function as the first argument to the promise constructor"
          );
          if (!(this instanceof u)) throw new TypeError(
            "Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function."
          );
          t(this, c)
        }
      }
      var x = Array.isArray ? Array.isArray : function(a) {
          return "[object Array]" === Object.prototype.toString.call(a)
        },
        w = 0,
        z = function(a, b) {
          y[w] = a;
          y[w + 1] = b;
          w += 2;
          2 === w && ca()
        },
        y = Array(1E3),
        ca;
      ca = function() {
          return function() {
            for (var a = 0; a < w; a += 2)
              (0, y[a])(y[a + 1]), y[a] =l, y[a + 1] = l;
            w = 0;
          }
        }();
      var A = void 0,
        X = 1,
        Y = 2,
        ba = new q,
        B = new q;
      v.prototype._validateInput = function(a) {
        return x(a)
      };
      v.prototype._validationError = function() {
        return Error("Array Methods must be provided an Array")
      };
      v.prototype._init = function() {
        this._result = Array(this.length)
      };
      v.prototype._enumerate = function() {
        for (var a = this.length, b = this.promise, c = this._input,
            d = 0; b._state === A && d < a; d++) this._eachEntry(c[d],
          d)
      };
      v.prototype._eachEntry = function(a,
        b) {
        var c = this._instanceConstructor;
        "object" === typeof a && null !== a ? a.constructor === c &&
          a._state !== A ? (a._onerror = null, this._settledAt(a._state,
            b, a._result)) : this._willSettleAt(c.resolve(a), b) : (
            this._remaining--, this._result[b] = this._makeResult(X, b,
              a))
      };
      v.prototype._settledAt = function(a, b, c) {
        var d = this.promise;
        d._state === A && (this._remaining--, this._abortOnReject &&
          a === Y ? m(d, c) : this._result[b] = this._makeResult(a,
            b, c));
        0 === this._remaining && k(d, this._result)
      };
      v.prototype._makeResult = function(a, b, c) {
        return c
      };
      v.prototype._willSettleAt = function(a, b) {
        var c = this;
        p(a, l, function(a) {
          c._settledAt(X, b, a)
        }, function(a) {
          c._settledAt(Y, b, a)
        })
      };
      var $ = 0;
      u.all = function(a, b) {
        return (new v(this, a, !0, b)).promise
      };
      u.race = function(a, c) {
        function d(a) {
          f(h, a)
        }

        function e(a) {
          m(h, a)
        }
        var h = new this(b, c);
        if (!x(a)) return m(h, new TypeError(
          "You must pass an array to race.")), h;
        for (var g = a.length, k = 0; h._state === A && k < g; k++) p(
          this.resolve(a[k]), l, d, e);
        return h
      };
      u.resolve = function(a, c) {
        if (a && "object" === typeof a && a.constructor === this)
          return a;
        var d = new this(b, c);
        f(d, a);
        return d
      };
      u.reject = function(a, c) {
        var d = new this(b, c);
        m(d, a);
        return d
      };
      u.prototype = {
        constructor: u,
        then: function(a, c) {
          var d = this._state;
          if (d === X && !a || d === Y && !c) return this;
          var e = new this.constructor(b),
            f = this._result;
          if (d) {
            var h = arguments[d - 1];
            z(function() {
              s(d, e, h, f)
            })
          } else p(this, e, a, c);
          return e
        },
        "catch": function(a) {
          return this.then(null, a)
        }
      };
      g = u
    }).call(this);

    if ("function" !== typeof Object.create || "function" !== typeof d.createElement("canvas").getContext) 
      f.html2canvas = function() {
        return g.reject("No canvas support")
        };
    else {
      (function(b) {
        function c(a) {
          throw RangeError(ia[a]);
        }

        function d(a, b) {
          for (var c = a.length, e = []; c--;) e[c] = b(a[c]);
          return e
        }

        function f(a, b) {
          var c = a.split("@"),
            e = "";
          1 < c.length && (e = c[0] + "@", a = c[1]);
          c = a.split($);
          c = d(c, b).join(".");
          return e + c
        }

        function h(a) {
          for (var b = [], c = 0, d = a.length, e, f; c < d;) e = a.charCodeAt(
            c++), 55296 <= e && 56319 >= e && c < d ? (f = a.charCodeAt(
            c++), 56320 == (f & 64512) ? b.push(((e & 1023) << 10) +
            (f & 1023) + 65536) : (b.push(e), c--)) : b.push(e);
          return b
        }

        function g(a) {
          return d(a, function(a) {
            var b = "";
            65535 < a &&
              (a -= 65536, b += J(a >>> 10 & 1023 | 55296), a = 56320 |
                a & 1023);
            return b += J(a)
          }).join("")
        }

        function k(a, b) {
          return a + 22 + 75 * (26 > a) - ((0 != b) << 5)
        }

        function l(a, b, c) {
          var d = 0;
          a = c ? ab(a / ca) : a >> 1;
          for (a += ab(a / b); a > C * z >> 1; d += x) a = ab(a / C);
          return ab(d + (C + 1) * a / (a + y))
        }

        function m(a) {
          var b = [],
            d = a.length,
            e, f = 0,
            h = X,
            k = A,
            p, r, q, s, t;
          p = a.lastIndexOf(Y);
          0 > p && (p = 0);
          for (r = 0; r < p; ++r) 128 <= a.charCodeAt(r) && c(
            "not-basic"), b.push(a.charCodeAt(r));
          for (p = 0 < p ? p + 1 : 0; p < d;) {
            r = f;
            e = 1;
            for (q = x;; q += x) {
              p >= d && c("invalid-input");
              s = a.charCodeAt(p++);
              s = 10 > s - 48 ?
                s - 22 : 26 > s - 65 ? s - 65 : 26 > s - 97 ? s - 97 : x;
              (s >= x || s > ab((u - f) / e)) && c("overflow");
              f += s * e;
              t = q <= k ? w : q >= k + z ? z : q - k;
              if (s < t) break;
              s = x - t;
              e > ab(u / s) && c("overflow");
              e *= s
            }
            e = b.length + 1;
            k = l(f - r, e, 0 == r);
            ab(f / e) > u - h && c("overflow");
            h += ab(f / e);
            f %= e;
            b.splice(f++, 0, h)
          }
          return g(b)
        }

        function p(a) {
          var b, d, e, f, g, m, r, q, s, t = [],
            v, y, ca;
          a = h(a);
          v = a.length;
          b = X;
          d = 0;
          g = A;
          for (m = 0; m < v; ++m) s = a[m], 128 > s && t.push(J(s));
          for ((e = f = t.length) && t.push(Y); e < v;) {
            r = u;
            for (m = 0; m < v; ++m) s = a[m], s >= b && s < r && (r = s);
            y = e + 1;
            r - b > ab((u - d) / y) && c("overflow");
            d += (r - b) * y;
            b =
              r;
            for (m = 0; m < v; ++m)
              if (s = a[m], s < b && ++d > u && c("overflow"), s == b) {
                q = d;
                for (r = x;; r += x) {
                  s = r <= g ? w : r >= g + z ? z : r - g;
                  if (q < s) break;
                  ca = q - s;
                  q = x - s;
                  t.push(J(k(s + ca % q, 0)));
                  q = ab(ca / q)
                }
                t.push(J(k(q, 0)));
                g = l(d, y, e == f);
                d = 0;
                ++e
              }++d;
            ++b
          }
          return t.join("")
        }
        var r = "object" == typeof a && a && !a.nodeType && a,
          s = "object" == typeof module && module && !module.nodeType &&
          module,
          t = "object" == typeof e && e;
        if (t.global === t || t.window === t || t.self === t) b = t;
        var v, u = 2147483647,
          x = 36,
          w = 1,
          z = 26,
          y = 38,
          ca = 700,
          A = 72,
          X = 128,
          Y = "-",
          ba = /^xn--/,
          B = /[^\x20-\x7E]/,
          $ = /[\x2E\u3002\uFF0E\uFF61]/g,
          ia = {
            overflow: "Overflow: input needs wider integers to process",
            "not-basic": "Illegal input >= 0x80 (not a basic code point)",
            "invalid-input": "Invalid input"
          },
          C = x - w,
          ab = Math.floor,
          J = String.fromCharCode,
          pa;
        v = {
          version: "1.3.1",
          ucs2: {
            decode: h,
            encode: g
          },
          decode: m,
          encode: p,
          toASCII: function(a) {
            return f(a, function(a) {
              return B.test(a) ? "xn--" + p(a) : a
            })
          },
          toUnicode: function(a) {
            return f(a, function(a) {
              return ba.test(a) ? m(a.slice(4).toLowerCase()) : a
            })
          }
        };
        if ("function" == typeof q && "object" == typeof q.amd && q.amd)
          q("punycode",
            function() {
              return v
            });
        else if (r && s)
          if (module.exports == r) s.exports = v;
          else
            for (pa in v) v.hasOwnProperty(pa) && (r[pa] = v[pa]);
        else b.punycode = v
      })(this);

      var na = "data-html2canvas-node",
        ib = 0;
      f.html2canvas = function(a, e) {
        var m = ib++;
        e = e || {};
        e.logging && (f.html2canvas.logging = !0, f.html2canvas.start =
          Date.now());
        e.async = "undefined" === typeof e.async ? !0 : e.async;
        e.allowTaint = "undefined" === typeof e.allowTaint ? !1 : e.allowTaint;
        e.removeContainer = "undefined" === typeof e.removeContainer ?
          !0 : e.removeContainer;
        e.javascriptEnabled =
          "undefined" === typeof e.javascriptEnabled ? !1 : e.javascriptEnabled;
        e.imageTimeout = "undefined" === typeof e.imageTimeout ? 1E4 :
          e.imageTimeout;
        e.renderer = "function" === typeof e.renderer ? e.renderer :
          Aa;
        e.strict = !!e.strict;
        if ("string" === typeof a) {
          if ("string" !== typeof e.proxy) return g.reject(
            "Proxy must be used when rendering url");
          var p = null != e.width ? e.width : f.innerWidth,
            r = null != e.height ? e.height : f.innerHeight;
          return h(k(a), e.proxy, d, p, r, e).then(function(a) {
            return c(a.contentWindow.document.documentElement, a,
              e, p, r)
          })
        }
        var q = (a === l ? [d.documentElement] : a.length ? a : [a])[0];
        q.setAttribute(na + m, m);
        e.node = q;
        f.p = sketch.util.perf();
        return b(q.ownerDocument, e, q.ownerDocument.defaultView.innerWidth,
          q.ownerDocument.defaultView.innerHeight, m).then(function(a) {
          "function" === typeof e.onrendered && (E(
            "options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"
          ), e.onrendered(a));
          return a
        })
      };
      f.html2canvas.punycode = this.punycode;
      f.html2canvas.proxy = {};
      v.prototype.darken = function(a) {
        a = 1 - a;
        return new v([Math.round(this.r *
          a), Math.round(this.g * a), Math.round(this.b * a), this.a])
      };
      v.prototype.isTransparent = function() {
        return 0 === this.a
      };
      v.prototype.isBlack = function() {
        return 0 === this.r && 0 === this.g && 0 === this.b
      };
      v.prototype.fromArray = function(a) {
        Array.isArray(a) && (this.r = Math.min(a[0], 255), this.g =
          Math.min(a[1], 255), this.b = Math.min(a[2], 255), 3 < a.length &&
          (this.a = a[3]));
        return Array.isArray(a)
      };
      var la = /^#([a-f0-9]{3})$/i;
      v.prototype.hex3 = function(a) {
        var b = null;
        null !== (b = a.match(la)) && (this.r = parseInt(b[1][0] + b[1]
            [0], 16), this.g =
          parseInt(b[1][1] + b[1][1], 16), this.b = parseInt(b[1][2] +
            b[1][2], 16));
        return null !== b
      };
      var Ga = /^#([a-f0-9]{6})$/i;
      v.prototype.hex6 = function(a) {
        var b = null;
        null !== (b = a.match(Ga)) && (this.r = parseInt(b[1].substring(
            0, 2), 16), this.g = parseInt(b[1].substring(2, 4), 16),
          this.b = parseInt(b[1].substring(4, 6), 16));
        return null !== b
      };
      var ra = /^rgb\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3})\)$/;
      v.prototype.rgb = function(a) {
        var b = null;
        null !== (b = a.match(ra)) && (this.r = Number(b[1]), this.g =
          Number(b[2]), this.b = Number(b[3]));
        return null !==
          b
      };
      var Ca = /^rgba\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *, *(\d+\.?\d*)\)$/;
      v.prototype.rgba = function(a) {
        var b = null;
        null !== (b = a.match(Ca)) && (this.r = Number(b[1]), this.g =
          Number(b[2]), this.b = Number(b[3]), this.a = Number(b[4]));
        return null !== b
      };
      v.prototype.toString = function() {
        return null !== this.a && 1 !== this.a ? "rgba(" + [this.r,
            this.g, this.b, this.a
          ].join() + ")" : "rgb(" + [this.r, this.g, this.b].join() +
          ")"
      };
      v.prototype.namedColor = function(a) {
        var b = wa[a.toLowerCase()];
        if (b) this.r = b[0], this.g = b[1], this.b = b[2];
        else if ("transparent" ===
          a.toLowerCase()) return this.r = this.g = this.b = this.a = 0, !
          0;
        return !!b
      };
      v.prototype.isColor = !0;
      var wa = {
        aliceblue: [240, 248, 255],
        antiquewhite: [250, 235, 215],
        aqua: [0, 255, 255],
        aquamarine: [127, 255, 212],
        azure: [240, 255, 255],
        beige: [245, 245, 220],
        bisque: [255, 228, 196],
        black: [0, 0, 0],
        blanchedalmond: [255, 235, 205],
        blue: [0, 0, 255],
        blueviolet: [138, 43, 226],
        brown: [165, 42, 42],
        burlywood: [222, 184, 135],
        cadetblue: [95, 158, 160],
        chartreuse: [127, 255, 0],
        chocolate: [210, 105, 30],
        coral: [255, 127, 80],
        cornflowerblue: [100, 149, 237],
        cornsilk: [255,
          248, 220
        ],
        crimson: [220, 20, 60],
        cyan: [0, 255, 255],
        darkblue: [0, 0, 139],
        darkcyan: [0, 139, 139],
        darkgoldenrod: [184, 134, 11],
        darkgray: [169, 169, 169],
        darkgreen: [0, 100, 0],
        darkgrey: [169, 169, 169],
        darkkhaki: [189, 183, 107],
        darkmagenta: [139, 0, 139],
        darkolivegreen: [85, 107, 47],
        darkorange: [255, 140, 0],
        darkorchid: [153, 50, 204],
        darkred: [139, 0, 0],
        darksalmon: [233, 150, 122],
        darkseagreen: [143, 188, 143],
        darkslateblue: [72, 61, 139],
        darkslategray: [47, 79, 79],
        darkslategrey: [47, 79, 79],
        darkturquoise: [0, 206, 209],
        darkviolet: [148, 0, 211],
        deeppink: [255,
          20, 147
        ],
        deepskyblue: [0, 191, 255],
        dimgray: [105, 105, 105],
        dimgrey: [105, 105, 105],
        dodgerblue: [30, 144, 255],
        firebrick: [178, 34, 34],
        floralwhite: [255, 250, 240],
        forestgreen: [34, 139, 34],
        fuchsia: [255, 0, 255],
        gainsboro: [220, 220, 220],
        ghostwhite: [248, 248, 255],
        gold: [255, 215, 0],
        goldenrod: [218, 165, 32],
        gray: [128, 128, 128],
        green: [0, 128, 0],
        greenyellow: [173, 255, 47],
        grey: [128, 128, 128],
        honeydew: [240, 255, 240],
        hotpink: [255, 105, 180],
        indianred: [205, 92, 92],
        indigo: [75, 0, 130],
        ivory: [255, 255, 240],
        khaki: [240, 230, 140],
        lavender: [230, 230,
          250
        ],
        lavenderblush: [255, 240, 245],
        lawngreen: [124, 252, 0],
        lemonchiffon: [255, 250, 205],
        lightblue: [173, 216, 230],
        lightcoral: [240, 128, 128],
        lightcyan: [224, 255, 255],
        lightgoldenrodyellow: [250, 250, 210],
        lightgray: [211, 211, 211],
        lightgreen: [144, 238, 144],
        lightgrey: [211, 211, 211],
        lightpink: [255, 182, 193],
        lightsalmon: [255, 160, 122],
        lightseagreen: [32, 178, 170],
        lightskyblue: [135, 206, 250],
        lightslategray: [119, 136, 153],
        lightslategrey: [119, 136, 153],
        lightsteelblue: [176, 196, 222],
        lightyellow: [255, 255, 224],
        lime: [0, 255, 0],
        limegreen: [50,
          205, 50
        ],
        linen: [250, 240, 230],
        magenta: [255, 0, 255],
        maroon: [128, 0, 0],
        mediumaquamarine: [102, 205, 170],
        mediumblue: [0, 0, 205],
        mediumorchid: [186, 85, 211],
        mediumpurple: [147, 112, 219],
        mediumseagreen: [60, 179, 113],
        mediumslateblue: [123, 104, 238],
        mediumspringgreen: [0, 250, 154],
        mediumturquoise: [72, 209, 204],
        mediumvioletred: [199, 21, 133],
        midnightblue: [25, 25, 112],
        mintcream: [245, 255, 250],
        mistyrose: [255, 228, 225],
        moccasin: [255, 228, 181],
        navajowhite: [255, 222, 173],
        navy: [0, 0, 128],
        oldlace: [253, 245, 230],
        olive: [128, 128, 0],
        olivedrab: [107,
          142, 35
        ],
        orange: [255, 165, 0],
        orangered: [255, 69, 0],
        orchid: [218, 112, 214],
        palegoldenrod: [238, 232, 170],
        palegreen: [152, 251, 152],
        paleturquoise: [175, 238, 238],
        palevioletred: [219, 112, 147],
        papayawhip: [255, 239, 213],
        peachpuff: [255, 218, 185],
        peru: [205, 133, 63],
        pink: [255, 192, 203],
        plum: [221, 160, 221],
        powderblue: [176, 224, 230],
        purple: [128, 0, 128],
        rebeccapurple: [102, 51, 153],
        red: [255, 0, 0],
        rosybrown: [188, 143, 143],
        royalblue: [65, 105, 225],
        saddlebrown: [139, 69, 19],
        salmon: [250, 128, 114],
        sandybrown: [244, 164, 96],
        seagreen: [46, 139, 87],
        seashell: [255, 245, 238],
        sienna: [160, 82, 45],
        silver: [192, 192, 192],
        skyblue: [135, 206, 235],
        slateblue: [106, 90, 205],
        slategray: [112, 128, 144],
        slategrey: [112, 128, 144],
        snow: [255, 250, 250],
        springgreen: [0, 255, 127],
        steelblue: [70, 130, 180],
        tan: [210, 180, 140],
        teal: [0, 128, 128],
        thistle: [216, 191, 216],
        tomato: [255, 99, 71],
        turquoise: [64, 224, 208],
        violet: [238, 130, 238],
        wheat: [245, 222, 179],
        white: [255, 255, 255],
        whitesmoke: [245, 245, 245],
        yellow: [255, 255, 0],
        yellowgreen: [154, 205, 50]
      };
      z.prototype.getMetrics = function(a, b) {
        this.data[a +
          "-" + b] === l && (this.data[a + "-" + b] = new s(a, b));
        return this.data[a + "-" + b]
      };
      y.prototype.proxyLoad = function(a, b, c) {
        var d = this.src;
        return h(d.src, a, d.ownerDocument, b.width, b.height, c)
      };
      B.prototype.TYPES = {
        LINEAR: 1,
        RADIAL: 2
      };
      C.prototype.findImages = function(a) {
        var b = [];
        a.reduce(function(a, b) {
          switch (b.node.nodeName) {
            case "IMG":
              return a.concat([{
                args: [b.node.src],
                method: "url"
              }]);
            case "svg":
            case "IFRAME":
              return a.concat([{
                args: [b.node],
                method: b.node.nodeName
              }])
          }
          return a
        }, []).forEach(this.addImage(b, this.loadImage),
          this);
        return b
      };
      C.prototype.findBackgroundImage = function(a, b) {
        b.parseBackgroundImages().filter(this.hasImageBackground).forEach(
          this.addImage(a, this.loadImage), this);
        return a
      };
      C.prototype.addImage = function(a, b) {
        return function(c) {
          c.args.forEach(function(d) {
            this.imageExists(a, d) || (a.splice(0, 0, b.call(this, c)),
              E("Added image #" + a.length, "string" === typeof d ? d
                .substring(0, 100) : d))
          }, this)
        }
      };
      C.prototype.hasImageBackground = function(a) {
        return "none" !== a.method
      };
      C.prototype.loadImage = function(a) {
        return "url" ===
          a.method ? (a = a.args[0], !this.isSVG(a) || this.support.svg ||
            this.options.allowTaint ? a.match(/data:image\/.*;base64,/i) ?
            new A(a.replace(/url\(['"]{0,}|['"]{0,}\)$/ig, ""), !1) :
            this.isSameOrigin(a) || !0 === this.options.allowTaint ||
            this.isSVG(a) ? new A(a, !1) : this.support.cors && !this.options
            .allowTaint && this.options.useCORS ? new A(a, !0) : this.options
            .proxy ? new wb(a, this.options.proxy) : new x(a) : new Qa(a)
          ) : "linear-gradient" === a.method ? new F(a) : "gradient" ===
          a.method ? new Ka(a) : "svg" === a.method ? new Ea(a.args[0],
            this.support.svg) :
          "IFRAME" === a.method ? new y(a.args[0], this.isSameOrigin(a.args[
            0].src), this.options) : new x(a)
      };
      C.prototype.isSVG = function(a) {
        return "svg" === a.substring(a.length - 3).toLowerCase() || Qa
          .prototype.isInline(a)
      };
      C.prototype.imageExists = function(a, b) {
        return a.some(function(a) {
          return a.src === b
        })
      };
      C.prototype.isSameOrigin = function(a) {
        return this.getOrigin(a) === this.origin
      };
      C.prototype.getOrigin = function(a) {
        var b = this.link || (this.link = d.createElement("a"));
        b.href = a;
        b.href = b.href;
        return b.protocol + b.hostname + b.port
      };
      C.prototype.getPromise = function(a) {
        return this.timeout(a, this.options.imageTimeout)["catch"](
          function() {
            return (new x(a.src)).promise.then(function(b) {
              a.image = b
            })
          })
      };
      C.prototype.get = function(a) {
        var b = null;
        return this.images.some(function(c) {
          return (b = c).src === a
        }) ? b : null
      };
      C.prototype.fetch = function(a) {
        this.images = a.reduce($(this.findBackgroundImage, this), this
          .findImages(a));
        this.images.forEach(function(a, b) {
          a.promise.then(function() {
            E("Succesfully loaded image #" + (b + 1), a)
          }, function(c) {
            E("Failed loading image #" +
              (b + 1), a, c)
          })
        });
        this.ready = g.all(this.images.map(this.getPromise, this));
        E("Finished searching images");
        return this
      };
      C.prototype.timeout = function(a, b) {
        var c, d = g.race([a.promise, new g(function(d, e) {
          c = setTimeout(function() {
            E("Timed out loading image", a);
            e(a)
          }, b)
        })]).then(function(a) {
          clearTimeout(c);
          return a
        });
        d["catch"](function() {
          clearTimeout(c)
        });
        return d
      };
      F.prototype = Object.create(B.prototype);
      F.prototype.stepRegExp =
        /((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/;
      D.prototype.cloneTo = function(a) {
        a.visible = this.visible;
        a.borders = this.borders;
        a.bounds = this.bounds;
        a.clip = this.clip;
        a.backgroundClip = this.backgroundClip;
        a.computedStyles = this.computedStyles;
        a.styles = this.styles;
        a.backgroundImages = this.backgroundImages;
        a.opacity = this.opacity
      };
      D.prototype.getOpacity = function() {
        return null === this.opacity ? this.opacity = this.cssFloat(
          "opacity") : this.opacity
      };
      D.prototype.assignStack = function(a) {
        this.stack = a;
        a.children.push(this)
      };
      D.prototype.isElementVisible = function() {
        return this.node.nodeType ===
          Node.TEXT_NODE ? this.parent.visible : "none" !== this.css(
            "display") && "hidden" !== this.css("visibility") && !this.node
          .hasAttribute("data-html2canvas-ignore") && ("INPUT" !== this
            .node.nodeName || "hidden" !== this.node.getAttribute("type")
          )
      };
      D.prototype.css = function(a) {
        this.computedStyles || (this.computedStyles = this.isPseudoElement ?
          this.parent.computedStyle(this.before ? ":before" : ":after") :
          this.computedStyle(null));
        return this.styles[a] || (this.styles[a] = this.computedStyles[
          a])
      };
      D.prototype.prefixedCss = function(a) {
        var b = ["webkit", "moz", "ms", "o"],
          c = this.css(a);
        c === l && b.some(function(b) {
          c = this.css(b + a.substr(0, 1).toUpperCase() + a.substr(1));
          return c !== l
        }, this);
        return c === l ? null : c
      };
      D.prototype.computedStyle = function(a) {
        return this.node.ownerDocument.defaultView.getComputedStyle(
          this.node, a)
      };
      D.prototype.cssInt = function(a) {
        a = parseInt(this.css(a), 10);
        return isNaN(a) ? 0 : a
      };
      D.prototype.color = function(a) {
        return this.colors[a] || (this.colors[a] = new v(this.css(a)))
      };
      D.prototype.cssFloat = function(a) {
        a = parseFloat(this.css(a));
        return isNaN(a) ? 0 : a
      };
      D.prototype.fontWeight = function() {
        var a = this.css("fontWeight");
        switch (parseInt(a, 10)) {
          case 401:
            a = "bold";
            break;
          case 400:
            a = "normal"
        }
        return a
      };
      D.prototype.parseClip = function() {
        var a = this.css("clip").match(this.CLIP);
        return a ? {
          top: parseInt(a[1], 10),
          right: parseInt(a[2], 10),
          bottom: parseInt(a[3], 10),
          left: parseInt(a[4], 10)
        } : null
      };
      D.prototype.parseBackgroundImages = function() {
        return this.backgroundImages || (this.backgroundImages = J(
          this.css("backgroundImage")))
      };
      D.prototype.cssList = function(a,
        b) {
        var c = (this.css(a) || "").split(","),
          c = c[b || 0] || c[0] || "auto",
          c = c.trim().split(" ");
        1 === c.length && (c = [c[0], c[0]]);
        return c
      };
      D.prototype.parseBackgroundSize = function(a, b, c) {
        c = this.cssList("backgroundSize", c);
        var d;
        if (G(c[0])) d = a.width * parseFloat(c[0]) / 100;
        else {
          if (/contain|cover/.test(c[0])) return b = b.width / b.height,
            a.width / a.height < b ^ "contain" === c[0] ? {
              width: a.height * b,
              height: a.height
            } : {
              width: a.width,
              height: a.width / b
            };
          d = parseInt(c[0], 10)
        }
        a = "auto" === c[0] && "auto" === c[1] ? b.height : "auto" ===
          c[1] ? d / b.width *
          b.height : G(c[1]) ? a.height * parseFloat(c[1]) / 100 :
          parseInt(c[1], 10);
        "auto" === c[0] && (d = a / b.height * b.width);
        return {
          width: d,
          height: a
        }
      };
      D.prototype.parseBackgroundPosition = function(a, b, c, d) {
        c = this.cssList("backgroundPosition", c);
        var e;
        e = G(c[0]) ? (a.width - (d || b).width) * (parseFloat(c[0]) /
          100) : parseInt(c[0], 10);
        a = "auto" === c[1] ? e / b.width * b.height : G(c[1]) ? (a.height -
          (d || b).height) * parseFloat(c[1]) / 100 : parseInt(c[1],
          10);
        "auto" === c[0] && (e = a / b.height * b.width);
        return {
          left: e,
          top: a
        }
      };
      D.prototype.parseBackgroundRepeat =
        function(a) {
          return this.cssList("backgroundRepeat", a)[0]
        };
      D.prototype.parseTextShadows = function() {
        var a = this.css("textShadow"),
          b = [];
        if (a && "none" !== a)
          for (var a = a.match(this.TEXT_SHADOW_PROPERTY), c = 0; a &&
            c < a.length; c++) {
            var d = a[c].match(this.TEXT_SHADOW_VALUES);
            b.push({
              color: new v(d[0]),
              offsetX: d[1] ? parseFloat(d[1].replace("px", "")) : 0,
              offsetY: d[2] ? parseFloat(d[2].replace("px", "")) : 0,
              blur: d[3] ? parseFloat(d[3].replace("px", "")) : 0
            })
          }
        return b
      };
      D.prototype.parseTransform = function() {
        if (!this.transformData)
          if (this.hasTransform()) {
            var a =
              this.parseBounds(),
              b = this.prefixedCss("transformOrigin").split(" ").map(N).map(
                K);
            b[0] += a.left;
            b[1] += a.top;
            this.transformData = {
              origin: b,
              matrix: this.parseTransformMatrix()
            }
          } else this.transformData = {
            origin: [0, 0],
            matrix: [1, 0, 0, 1, 0, 0]
          };
        return this.transformData
      };
      D.prototype.parseTransformMatrix = function() {
        if (!this.transformMatrix) {
          var a = this.prefixedCss("transform");
          this.transformMatrix = (a = a ? P(a.match(this.MATRIX_PROPERTY)) :
            null) ? a : [1, 0, 0, 1, 0, 0]
        }
        return this.transformMatrix
      };
      D.prototype.parseBounds = function() {
        return this.bounds ||
          (this.bounds = this.hasTransform() ? V(this.node) : O(this.node))
      };
      D.prototype.hasTransform = function() {
        return "1,0,0,1,0,0" !== this.parseTransformMatrix().join(",") ||
          this.parent && this.parent.hasTransform()
      };
      D.prototype.getValue = function() {
        var a = this.node.value || "";
        "SELECT" === this.node.tagName ? (a = this.node, a = (a = a.options[
            a.selectedIndex || 0]) ? a.text || "" : "") : "password" ===
          this.node.type && (a = Array(a.length + 1).join("\u2022"));
        return 0 === a.length ? this.node.placeholder || "" : a
      };
      D.prototype.MATRIX_PROPERTY = /(matrix)\((.+)\)/;
      D.prototype.TEXT_SHADOW_PROPERTY =
        /((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;
      D.prototype.TEXT_SHADOW_VALUES =
        /(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;
      D.prototype.CLIP =
        /^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/;
      L.prototype.calculateOverflowClips = function() {
        this.nodes.forEach(function(a) {
          if (ia(a)) {
            !0 === a.isPseudoElement && a.appendToDOM();
            a.borders = this.parseBorders(a);
            var b = "hidden" === a.css("overflow") ? [a.borders.clip] : [],
              c = a.parseClip();
            c && -1 !== ["absolute", "fixed"].indexOf(a.css("position")) &&
              b.push([
                ["rect", a.bounds.left + c.left, a.bounds.top + c.top,
                  c.right - c.left, c.bottom - c.top
                ]
              ]);
            a.clip = a.parent && a.parent.clip.length ? a.parent.clip.concat(
              b) : b;
            a.backgroundClip = "hidden" !== a.css("overflow") ? a.clip
              .concat([a.borders.clip]) : a.clip;
            !0 === a.isPseudoElement && a.cleanDOM()
          } else ca(a) && (a.clip = a.parent && a.parent.clip.length ?
            a.parent.clip : []);
          !0 !== a.isPseudoElement && (a.bounds = null)
        }, this)
      };
      L.prototype.asyncRenderer = function(a, b, c) {
        c = c || Date.now();
        this.paint(a[this.renderIndex++]);
        a.length === this.renderIndex ?
          b() : c + 20 > Date.now() ? this.asyncRenderer(a, b, c) :
          setTimeout($(function() {
            this.asyncRenderer(a, b)
          }, this), 0)
      };
      L.prototype.createPseudoHideStyles = function(a) {
        this.createStyles(a, "." + Ja.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE +
          ':before { content: "" !important; display: none !important; }.' +
          Ja.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER +
          ':after { content: "" !important; display: none !important; }'
        )
      };
      L.prototype.disableAnimations = function(a) {
        this.createStyles(a,
          "* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}"
        )
      };
      L.prototype.createStyles = function(a, b) {};
      L.prototype.getPseudoElements = function(a) {
        var b = [
          [a]
        ];
        if (a.node.nodeType === Node.ELEMENT_NODE) {
          var c = this.getPseudoElement(a, ":before");
          a = this.getPseudoElement(a, ":after");
          c && b.push(c);
          a && b.push(a)
        }
        return pb(b)
      };
      L.prototype.getPseudoElement = function(a, b) {
        var c = a.computedStyle(b);
        if (!c || !c.content || "none" === c.content ||
          "-moz-alt-content" === c.content || "none" === c.display)
          return null;
        var e, f = c.content,
          h = f.substr(0, 1);
        e = h === f.substr(f.length - 1) && h.match(/'|"/) ? f.substr(
          1,
          f.length - 2) : f;
        for (var g = "url" === e.substr(0, 3), f = d.createElement(g ?
              "img" : "html2canvaspseudoelement"), h = new Ja(f, a, b), k =
            c.length - 1; 0 <= k; k--) {
          var l = T(c.item(k));
          f.style[l] = c[l]
        }
        f.className = Ja.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE +
          " " + Ja.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
        if (g) return f.src = J(e)[0].args[0], [h];
        c = d.createTextNode(e);
        f.appendChild(c);
        return [h, new Oa(c, h)]
      };
      L.prototype.getChildren = function(a) {
        return pb([].filter.call(a.node.childNodes, Da).map(function(
          b) {
          var c = [b.nodeType === Node.TEXT_NODE ?
            new Oa(b, a) : new D(b, a)
          ].filter(Wa);
          return b.nodeType === Node.ELEMENT_NODE && c.length &&
            "TEXTAREA" !== b.tagName ? c[0].isElementVisible() ? c.concat(
              this.getChildren(c[0])) : [] : c
        }, this))
      };
      L.prototype.newStackingContext = function(a, b) {
        var c = new lb(b, a.getOpacity(), a.node, a.parent);
        a.cloneTo(c);
        (b ? c.getParentStack(this) : c.parent.stack).contexts.push(c);
        a.stack = c
      };
      L.prototype.createStackingContexts = function() {
        this.nodes.forEach(function(a) {
          var b;
          if (b = ia(a))(b = this.isRootElement(a) || 1 > a.getOpacity()) ||
            (b = a.css("position"),
              b = "auto" !== (-1 !== ["absolute", "relative", "fixed"].indexOf(
                b) ? a.css("zIndex") : "auto")), b = b || this.isBodyWithTransparentRoot(
              a) || a.hasTransform();
          b ? this.newStackingContext(a, !0) : ia(a) && (va(a) && ma(
              a) || -1 !== ["inline-block", "inline-table"].indexOf(a.css(
              "display")) || X(a)) ? this.newStackingContext(a, !1) : a
            .assignStack(a.parent.stack)
        }, this)
      };
      L.prototype.isBodyWithTransparentRoot = function(a) {
        return "BODY" === a.node.nodeName && a.parent.color(
          "backgroundColor").isTransparent()
      };
      L.prototype.isRootElement = function(a) {
        return null ===
          a.parent
      };
      L.prototype.sortStackingContexts = function(a) {
        a.contexts.sort(ba(a.contexts.slice(0)));
        a.contexts.forEach(this.sortStackingContexts, this)
      };
      L.prototype.parseTextBounds = function(a) {
        return function(b, c, d) {
          if ("none" !== a.parent.css("textDecoration").substr(0, 4) ||
            0 !== b.trim().length) {
            if (this.support.rangeBounds && !a.parent.hasTransform())
              return c = d.slice(0, c).join("").length, this.getRangeBounds(
                a.node, c, b.length);
            if (a.node && "string" === typeof a.node.data) return b = a
              .node.splitText(b.length), c = this.getWrapperBounds(a.node,
                a.parent.hasTransform()), a.node = b, c
          } else if (!this.support.rangeBounds || a.parent.hasTransform())
            a.node = a.node.splitText(b.length);
          return {}
        }
      };
      L.prototype.getWrapperBounds = function(a, b) {
        var c = a.ownerDocument.createElement("html2canvaswrapper"),
          d = a.parentNode,
          e = a.cloneNode(!0);
        c.appendChild(a.cloneNode(!0));
        d.replaceChild(c, a);
        var f = b ? V(c) : O(c);
        d.replaceChild(e, c);
        return f
      };
      L.prototype.getRangeBounds = function(a, b, c) {
        var d = this.range || (this.range = a.ownerDocument.createRange());
        d.setStart(a, b);
        d.setEnd(a,
          b + c);
        return d.getBoundingClientRect()
      };
      L.prototype.parse = function(a) {
        var b = a.contexts.filter(ga),
          c = a.children.filter(ia),
          d = c.filter(oa(X)),
          e = d.filter(oa(va)).filter(oa(ua)),
          c = c.filter(oa(va)).filter(X),
          f = d.filter(oa(va)).filter(ua),
          d = a.contexts.concat(d.filter(va)).filter(ma),
          h = a.children.filter(ca).filter(ja);
        a = a.contexts.filter(W);
        b.concat(e).concat(c).concat(f).concat(d).concat(h).concat(a).forEach(
          function(a) {
            this.renderQueue.push(a);
            a instanceof lb && (this.parse(a), this.renderQueue.push(
              new Q))
          },
          this)
      };
      L.prototype.paint = function(a) {
        try {
          a instanceof Q ? this.renderer.ctx.restore() : ca(a) ? (!0 ===
            a.parent.isPseudoElement && a.parent.appendToDOM(), this.paintText(
              a), !0 === a.parent.isPseudoElement && a.parent.cleanDOM()
          ) : this.paintNode(a)
        } catch (b) {
          if (E(b), this.options.strict) throw b;
        }
      };
      L.prototype.paintNode = function(a) {
        a instanceof lb && (this.renderer.setOpacity(a.opacity), this.renderer
          .ctx.save(), a.hasTransform() && this.renderer.setTransform(
            a.parseTransform()));
        "INPUT" === a.node.nodeName && "checkbox" === a.node.type ?
          this.paintCheckbox(a) : "INPUT" === a.node.nodeName &&
          "radio" === a.node.type ? this.paintRadio(a) : this.paintElement(
            a)
      };
      L.prototype.paintElement = function(a) {
        var b = a.parseBounds();
        this.renderer.clip(a.backgroundClip, function() {
          this.renderer.renderBackground(a, b, a.borders.borders.map(
            pa))
        }, this);
        this.renderer.clip(a.clip, function() {
          this.renderer.renderBorders(a.borders.borders)
        }, this);
        this.renderer.clip(a.backgroundClip, function() {
          switch (a.node.nodeName) {
            case "svg":
            case "IFRAME":
              var c = this.images.get(a.node);
              c ? this.renderer.renderImage(a, b, a.borders, c) : E(
                "Error loading <" + a.node.nodeName + ">", a.node);
              break;
            case "IMG":
              (c = this.images.get(a.node.src)) ? this.renderer.renderImage(
                a, b, a.borders, c): E("Error loading <img>", a.node.src);
              break;
            case "CANVAS":
              this.renderer.renderImage(a, b, a.borders, {
                image: a.node
              });
              break;
            case "SELECT":
            case "INPUT":
            case "TEXTAREA":
              this.paintFormValue(a)
          }
        }, this)
      };
      L.prototype.paintCheckbox = function(a) {
        var b = a.parseBounds(),
          c = Math.min(b.width, b.height),
          d = {
            width: c - 1,
            height: c - 1,
            top: b.top,
            left: b.left
          },
          b = [3, 3],
          e = [b, b, b, b],
          f = [1, 1, 1, 1].map(function(a) {
            return {
              color: new v("#A5A5A5"),
              width: a
            }
          }),
          h = aa(d, e, f);
        this.renderer.clip(a.backgroundClip, function() {
          this.renderer.rectangle(d.left + 1, d.top + 1, d.width - 2,
            d.height - 2, new v("#DEDEDE"));
          this.renderer.renderBorders(U(f, d, h, e));
          a.node.checked && (this.renderer.font(new v("#424242"),
              "normal", "normal", "bold", c - 3 + "px", "arial"), this
            .renderer.text("\u2714", d.left + c / 6, d.top + c - 1))
        }, this)
      };
      L.prototype.paintRadio = function(a) {
        var b = a.parseBounds(),
          c = Math.min(b.width,
            b.height) - 2;
        this.renderer.clip(a.backgroundClip, function() {
          this.renderer.circleStroke(b.left + 1, b.top + 1, c, new v(
            "#DEDEDE"), 1, new v("#A5A5A5"));
          a.node.checked && this.renderer.circle(Math.ceil(b.left + c /
              4) + 1, Math.ceil(b.top + c / 4) + 1, Math.floor(c / 2),
            new v("#424242"))
        }, this)
      };
      L.prototype.paintFormValue = function(a) {
        var b = a.getValue();
        if (0 < b.length) {
          var c = a.node.ownerDocument,
            d = c.createElement("html2canvaswrapper");
          "lineHeight textAlign fontFamily fontWeight fontSize color paddingLeft paddingTop paddingRight paddingBottom width height borderLeftStyle borderTopStyle borderLeftWidth borderTopWidth boxSizing whiteSpace wordWrap"
          .split(" ").forEach(function(b) {
            try {
              d.style[b] =
                a.css(b)
            } catch (c) {
              E(
                "html2canvas: Parse: Exception caught in renderFormValue: " +
                c.message)
            }
          });
          var e = a.parseBounds();
          d.style.position = "fixed";
          d.style.left = e.left + "px";
          d.style.top = e.top + "px";
          d.textContent = b;
          c.body.appendChild(d);
          this.paintText(new Oa(d.firstChild, a));
          c.body.removeChild(d)
        }
      };
      L.prototype.paintText = function(a) {
        a.applyTextTransform();
        var b = f.html2canvas.punycode.ucs2.decode(a.node.data),
          c = this.options.letterRendering && !/^(normal|none|0px)$/.test(
            a.parent.css("letterSpacing")) || /[^\u0000-\u00ff]/.test(a.node
            .data) ?
          b.map(function(a) {
            return f.html2canvas.punycode.ucs2.encode([a])
          }) : Na(b),
          b = a.parent.css("color"),
          d = a.parent.css("fontFamily"),
          e = a.parent.css("fontSize"),
          h = a.parent.css("fontStyle"),
          g = a.parent.css("fontVariant"),
          k = a.parent.fontWeight(),
          l = a.parent.parseTextShadows().reverse(),
          m = this.fontMetrics.getMetrics(d, e);
        this.renderer.font(b, h, g, k, e, d);
        var p = l.length;
        0 === p ? this.renderer.clearShadow() : 1 === p && (!(b = new v(
          b)) || null !== b.a && 1 !== b.a || (this.renderer.fontShadow(
            l[0].color, l[0].offsetX, l[0].offsetY, l[0].blur),
          p = !1));
        this.renderer.clip(a.parent.clip, function() {
          var b = this.parseTextBounds(a),
            d = this.renderer.ctx.fillStyle;
          c.map(b, this).forEach(function(b, e) {
            var f = c[e];
            if (b && b.width) {
              if (p) {
                var h = this.renderer.width;
                this.renderer.setVariable("fillStyle", "#000");
                l.forEach(function(c) {
                  this.renderer.fontShadow(c.color, c.offsetX - h, c.offsetY,
                    c.blur);
                  this.renderer.text(f, b.left + h, b.bottom);
                  this.renderTextDecoration(a.parent, b, m)
                }, this);
                this.renderer.setVariable("fillStyle", d);
                this.renderer.clearShadow()
              }
              this.renderer.text(f,
                b.left, b.bottom);
              this.renderTextDecoration(a.parent, b, m)
            }
          }, this)
        }, this)
      };
      L.prototype.renderTextDecoration = function(a, b, c) {
        switch (a.css("textDecoration").split(" ")[0]) {
          case "underline":
            this.renderer.rectangle(b.left, Math.round(b.top + c.baseline +
              c.lineWidth), b.width, 1, a.color("color"));
            break;
          case "overline":
            this.renderer.rectangle(b.left, Math.round(b.top), b.width,
              1, a.color("color"));
            break;
          case "line-through":
            this.renderer.rectangle(b.left, Math.ceil(b.top + c.middle +
              c.lineWidth), b.width, 1, a.color("color"))
        }
      };
      var Ta = {
        inset: [
          ["darken", .6],
          ["darken", .1],
          ["darken", .1],
          ["darken", .6]
        ]
      };
      L.prototype.parseBorders = function(a) {
        var b = a.parseBounds(),
          c = ta(a),
          d = ["Top", "Right", "Bottom", "Left"].map(function(b, c) {
            var d = a.css("border" + b + "Style"),
              e = a.color("border" + b + "Color");
            "inset" === d && e.isBlack() && (e = new v([255, 255, 255,
              e.a
            ]));
            d = Ta[d] ? Ta[d][c] : null;
            return {
              width: a.cssInt("border" + b + "Width"),
              color: d ? e[d[0]](d[1]) : e,
              args: null
            }
          }),
          e = aa(b, c, d);
        return {
          clip: this.parseBackgroundClip(a, e, d, c, b),
          borders: U(d, b, e, c)
        }
      };
      L.prototype.parseBackgroundClip =
        function(a, b, c, d, e) {
          var f = [];
          switch (a.css("backgroundClip")) {
            case "content-box":
            case "padding-box":
              Z(f, d[0], d[1], b.topLeftInner, b.topRightInner, e.left + c[
                3].width, e.top + c[0].width);
              Z(f, d[1], d[2], b.topRightInner, b.bottomRightInner, e.left +
                e.width - c[1].width, e.top + c[0].width);
              Z(f, d[2], d[3], b.bottomRightInner, b.bottomLeftInner, e.left +
                e.width - c[1].width, e.top + e.height - c[2].width);
              Z(f, d[3], d[0], b.bottomLeftInner, b.topLeftInner, e.left +
                c[3].width, e.top + e.height - c[2].width);
              break;
            default:
              Z(f, d[0], d[1], b.topLeftOuter,
                b.topRightOuter, e.left, e.top), Z(f, d[1], d[2], b.topRightOuter,
                b.bottomRightOuter, e.left + e.width, e.top), Z(f, d[2], d[
                  3], b.bottomRightOuter, b.bottomLeftOuter, e.left + e.width,
                e.top + e.height), Z(f, d[3], d[0], b.bottomLeftOuter, b.topLeftOuter,
                e.left, e.top + e.height)
          }
          return f
        };
      var bb = 0,
        Ia = "withCredentials" in new XMLHttpRequest,
        Ba = "crossOrigin" in new Image;
      Ja.prototype.cloneTo = function(a) {
        Ja.prototype.cloneTo.call(this, a);
        a.isPseudoElement = !0;
        a.before = this.before
      };
      Ja.prototype = Object.create(D.prototype);
      Ja.prototype.appendToDOM =
        function() {
          this.before ? this.parent.node.insertBefore(this.node, this.parent
            .node.firstChild) : this.parent.node.appendChild(this.node);
          this.parent.node.className += " " + this.getHideClass()
        };
      Ja.prototype.cleanDOM = function() {
        this.node.parentNode.removeChild(this.node);
        this.parent.node.className = this.parent.node.className.replace(
          this.getHideClass(), "")
      };
      Ja.prototype.getHideClass = function() {
        return this["PSEUDO_HIDE_ELEMENT_CLASS_" + (this.before ?
          "BEFORE" : "AFTER")]
      };
      Ja.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE =
        "___html2canvas___pseudoelement_before";
      Ja.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER =
        "___html2canvas___pseudoelement_after";
      $a.prototype.renderImage = function(a, b, c, d) {
        var e = a.cssInt("paddingLeft"),
          f = a.cssInt("paddingTop"),
          h = a.cssInt("paddingRight");
        a = a.cssInt("paddingBottom");
        c = c.borders;
        h = b.width - (c[1].width + c[3].width + e + h);
        a = b.height - (c[0].width + c[2].width + f + a);
        this.drawImage(d, 0, 0, d.image.width || h, d.image.height ||
          a, b.left + e + c[3].width, b.top + f + c[0].width, h, a)
      };
      $a.prototype.renderBackground = function(a,
        b, c) {
        0 < b.height && 0 < b.width && (this.renderBackgroundColor(a,
          b), this.renderBackgroundImage(a, b, c))
      };
      $a.prototype.renderBackgroundColor = function(a, b) {
        var c = a.color("backgroundColor");
        c.isTransparent() || this.rectangle(b.left, b.top, b.width, b.height,
          c)
      };
      $a.prototype.renderBorders = function(a) {
        a.forEach(this.renderBorder, this)
      };
      $a.prototype.renderBorder = function(a) {
        a.color.isTransparent() || null === a.args || this.drawShape(a
          .args, a.color)
      };
      $a.prototype.renderBackgroundImage = function(a, b, c) {
        a.parseBackgroundImages().reverse().forEach(function(d,
          e, f) {
          switch (d.method) {
            case "url":
              var h = this.images.get(d.args[0]);
              h ? this.renderBackgroundRepeating(a, b, h, f.length - (e +
                1), c) : E("Error loading background-image", d.args[0]);
              break;
            case "linear-gradient":
            case "gradient":
              (e = this.images.get(d.value)) ? this.renderBackgroundGradient(
                e, b, c): E("Error loading background-image", d.args[0]);
              break;
            case "none":
              break;
            default:
              E("Unknown background-image type", d.args[0])
          }
        }, this)
      };
      $a.prototype.renderBackgroundRepeating = function(a, b, c, d, e) {
        var f = a.parseBackgroundSize(b,
            c.image, d),
          h = a.parseBackgroundPosition(b, c.image, d, f);
        switch (a.parseBackgroundRepeat(d)) {
          case "repeat-x":
          case "repeat no-repeat":
            this.backgroundRepeatShape(c, h, f, b, b.left + e[3], b.top +
              h.top + e[0], 99999, f.height, e);
            break;
          case "repeat-y":
          case "no-repeat repeat":
            this.backgroundRepeatShape(c, h, f, b, b.left + h.left + e[3],
              b.top + e[0], f.width, 99999, e);
            break;
          case "no-repeat":
            this.backgroundRepeatShape(c, h, f, b, b.left + h.left + e[3],
              b.top + h.top + e[0], f.width, f.height, e);
            break;
          default:
            this.renderBackgroundRepeat(c, h, f, {
              top: b.top,
              left: b.left
            }, e[3], e[0])
        }
      };
      lb.prototype = Object.create(D.prototype);
      lb.prototype.getParentStack = function(a) {
        var b = this.parent ? this.parent.stack : null;
        return b ? b.ownStacking ? b : b.getParentStack(a) : a.stack
      };
      mb.prototype.testRangeBounds = function(a) {
        var b, c, d = !1;
        a.createRange && (b = a.createRange(), b.getBoundingClientRect &&
          (c = a.createElement("boundtest"), c.style.height = "123px",
            c.style.display = "block", a.body.appendChild(c), b.selectNode(
              c), b = b.getBoundingClientRect(), b = b.height, 123 === b &&
            (d = !0), a.body.removeChild(c)));
        return d
      };
      mb.prototype.testCORS = function() {
        return "undefined" !== typeof(new Image).crossOrigin
      };
      mb.prototype.testSVG = function() {
        var a = new Image,
          b = d.createElement("canvas"),
          c = b.getContext("2d");
        a.src =
          "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";
        try {
          c.drawImage(a, 0, 0), b.toDataURL()
        } catch (e) {
          return !1
        }
        return !0
      };
      Qa.prototype.hasFabric = function() {
        return html2canvas.fabric ? g.resolve() : g.reject(Error(
          "html2canvas.svg.js is not loaded, cannot render svg"))
      };
      Qa.prototype.inlineFormatting =
        function(a) {
          return /^data:image\/svg\+xml;base64,/.test(a) ? this.decode64(
            this.removeContentType(a)) : this.removeContentType(a)
        };
      Qa.prototype.removeContentType = function(a) {
        return a.replace(/^data:image\/svg\+xml(;base64)?,/, "")
      };
      Qa.prototype.isInline = function(a) {
        return /^data:image\/svg\+xml/i.test(a)
      };
      Qa.prototype.createCanvas = function(a) {
        var b = this;
        return function(c, d) {
          var e = new html2canvas.fabric.StaticCanvas("c");
          b.image = e.lowerCanvasEl;
          e.setWidth(d.width).setHeight(d.height).add(html2canvas.fabric
            .util.groupSVGElements(c,
              d)).renderAll();
          a(e.lowerCanvasEl)
        }
      };
      Qa.prototype.decode64 = function(a) {
        return "function" === typeof f.atob ? f.atob(a) : qa(a)
      };
      Ea.prototype = Object.create(Qa.prototype);
      Oa.prototype = Object.create(D.prototype);
      Oa.prototype.applyTextTransform = function() {
        this.node.data = this.transform(this.parent.css(
          "textTransform"))
      };
      Oa.prototype.transform = function(a) {
        var b = this.node.data;
        switch (a) {
          case "lowercase":
            return b.toLowerCase();
          case "capitalize":
            return b.replace(/(^|\s|:|-|\(|\))([a-z])/g, Fa);
          case "uppercase":
            return b.toUpperCase();
          default:
            return b
        }
      };
      Ka.prototype = Object.create(B.prototype);
      Aa.prototype = Object.create($a.prototype);
      Aa.prototype.setFillStyle = function(a) {
        this.ctx.fillStyle = "object" === typeof a && a.isColor ? a.toString() :
          a;
        return this.ctx
      };
      Aa.prototype.rectangle = function(a, b, c, d, e) {
        this.setFillStyle(e).fillRect(a, b, c, d)
      };
      Aa.prototype.circle = function(a, b, c, d) {
        this.setFillStyle(d);
        this.ctx.beginPath();
        this.ctx.arc(a + c / 2, b + c / 2, c / 2, 0, 2 * Math.PI, !0);
        this.ctx.closePath();
        this.ctx.fill()
      };
      Aa.prototype.circleStroke = function(a,
        b, c, d, e, f) {
        this.circle(a, b, c, d);
        this.ctx.strokeStyle = f.toString();
        this.ctx.stroke()
      };
      Aa.prototype.drawShape = function(a, b) {
        this.shape(a);
        this.setFillStyle(b).fill()
      };
      Aa.prototype.taints = function(a) {
        if (null === a.tainted) {
          this.taintCtx.drawImage(a.image, 0, 0);
          try {
            this.taintCtx.getImageData(0, 0, 1, 1), a.tainted = !1
          } catch (b) {
            this.taintCtx = d.createElement("canvas").getContext("2d"),
              a.tainted = !0
          }
        }
        return a.tainted
      };
      Aa.prototype.drawImage = function(a, b, c, d, e, f, h, g, k) {
        this.taints(a) && !this.options.allowTaint || this.ctx.drawImage(
          a.image,
          b, c, d, e, f, h, g, k)
      };
      Aa.prototype.clip = function(a, b, c) {
        this.ctx.save();
        a.filter(ya).forEach(function(a) {
          this.shape(a).clip()
        }, this);
        b.call(c);
        this.ctx.restore()
      };
      Aa.prototype.shape = function(a) {
        this.ctx.beginPath();
        a.forEach(function(a, b) {
          "rect" === a[0] ? this.ctx.rect.apply(this.ctx, a.slice(1)) :
            this.ctx[0 === b ? "moveTo" : a[0] + "To"].apply(this.ctx,
              a.slice(1))
        }, this);
        this.ctx.closePath();
        return this.ctx
      };
      Aa.prototype.font = function(a, b, c, d, e, f) {
        this.setFillStyle(a).font = [b, c, d, e, f].join(" ").split(
          ",")[0]
      };
      Aa.prototype.fontShadow =
        function(a, b, c, d) {
          this.setVariable("shadowColor", a.toString()).setVariable(
            "shadowOffsetX", b).setVariable("shadowOffsetY", c).setVariable(
            "shadowBlur", d)
        };
      Aa.prototype.clearShadow = function() {
        this.setVariable("shadowColor", "rgba(0,0,0,0)")
      };
      Aa.prototype.setOpacity = function(a) {
        this.ctx.globalAlpha = a
      };
      Aa.prototype.setTransform = function(a) {
        this.ctx.translate(a.origin[0], a.origin[1]);
        this.ctx.transform.apply(this.ctx, a.matrix);
        this.ctx.translate(-a.origin[0], -a.origin[1])
      };
      Aa.prototype.setVariable = function(a,
        b) {
        this.ctx[a] !== b && (this.ctx[a] = b);
        return this
      };
      Aa.prototype.text = function(a, b, c) {
        this.ctx.fillText(a, b, c)
      };
      Aa.prototype.backgroundRepeatShape = function(a, b, c, d, e, f,
        h, g, k) {
        e = [
          ["line", Math.round(e), Math.round(f)],
          ["line", Math.round(e + h), Math.round(f)],
          ["line", Math.round(e + h), Math.round(g + f)],
          ["line", Math.round(e), Math.round(g + f)]
        ];
        this.clip([e], function() {
          this.renderBackgroundRepeat(a, b, c, d, k[3], k[0])
        }, this)
      };
      Aa.prototype.renderBackgroundRepeat = function(a, b, c, d, e, f) {
        e = Math.round(d.left + b.left + e);
        b =
          Math.round(d.top + b.top + f);
        this.setFillStyle(this.ctx.createPattern(this.resizeImage(a, c),
          "repeat"));
        this.ctx.translate(e, b);
        this.ctx.fill();
        this.ctx.translate(-e, -b)
      };
      Aa.prototype.renderBackgroundGradient = function(a, b) {
        if (a instanceof F) {
          var c = this.ctx.createLinearGradient(b.left + b.width * a.x0,
            b.top + b.height * a.y0, b.left + b.width * a.x1, b.top + b
            .height * a.y1);
          a.colorStops.forEach(function(a) {
            c.addColorStop(a.stop, a.color.toString())
          });
          this.rectangle(b.left, b.top, b.width, b.height, c)
        }
      };
      Aa.prototype.resizeImage =
        function(a, b) {
          var c = a.image;
          if (c.width === b.width && c.height === b.height) return c;
          var e = d.createElement("canvas");
          e.width = b.width;
          e.height = b.height;
          e.getContext("2d").drawImage(c, 0, 0, c.width, c.height, 0, 0,
            b.width, b.height);
          return e
        }
    }
  }).call({}, "undefined" !== typeof window ? window : void 0, "undefined" !== typeof document ? document : void 0)
})();

//Not sure what this function is doing
(function() {
  function g() {
    return function() {}
  }

  function f(a, b) {
    var c = a.split("."),
      d = T;
    c[0] in d || !d.execScript || d.execScript("var " + c[0]);
    for (var e; c.length && (e = c.shift());)
      c.length || void 0 === b ? d = d[e] ? d[e] : d[e] = {} : d[e] = b;
  }

  function d(a, b) {
    function c() {}
    c.prototype = b.prototype;
    a.superClass_ = b.prototype;
    a.prototype = new c;
    a.prototype.constructor = a
  }

  function a() {}

  function e() {}

  function q() {}

  function l() {}

  function b() {
    this.channel = []
  }

  function c() {}

  function p() {}

  function w(a, b) {
    this.input = Q ? new Uint8Array(a) : a;
    this.ip = b | 0;
  }

  function m(a) {
    return (a.input[a.ip++] << 24 | a.input[a.ip++] << 16 | a.input[a.ip++] << 8 | a.input[a.ip++]) >>> 0;
  }

  function u(a) {
    return a.input[a.ip++] << 24 | a.input[a.ip++] << 16 | a.input[a.ip++] <<
      8 | a.input[a.ip++]
  }

  function t(a) {
    return a.input[a.ip++] << 8 | a.input[a.ip++];
  }

  function h(a) {
    return (a.input[a.ip++] << 8 | a.input[a.ip++]) << 16 >> 16;
  }

  function r(a) {
    return a.input[a.ip++];
  }

  function k(a, b) {
    return Q ? a.input.subarray(a.ip, a.ip += b) : a.input.slice(a.ip, a.ip += b);
  }

  function v(a, b) {
    var c = a.input,
      d = a.ip,
      e = [],
      f;
    for (f = 0; f < b; ++f)
      e[f] = String.fromCharCode(c[d++]);
    a.ip = d;
    return e.join("");
  }

  function x(a, b) {
    var c = a.input,
      d = a.ip,
      e = [],
      f;
    for (f = 0; f < b; ++f)
      e[f] = String.fromCharCode(c[d++] << 8 | c[d++]);
    a.ip = d;
    return e.join("");
  }

  function s(a, b) {
    var c, d, e, f = [],
      h = 0;
    for (c = a.ip + b; a.ip < c;)
      if (d = a.input[a.ip++] << 24 >> 24, 0 > d)
        for (d = 1 - d, e = r(a); 0 < d--;)
          f[h++] = e;
      else
        for (d = 1 + d; 0 < d--;)
          f[h++] = r(a);
    return f
  }

  function z() {}

  function y() {}

  function B(a, b, c) {
    this.header = a;
    this.colorModeData = b;
    this.channel = c;
    this.parsed = !1;
  }

  function A() {}

  function C() {}

  function F() {}

  function E() {}

  function D() {}

  function P() {}

  function G() {
    this.info = []
  }

  function J() {}

  function N() {}

  function K() {}

  function O() {
    this.layerRecord = [];
    this.channelImageData = []
  }

  function V() {}

  function L(a, b) {
    b || (b = {});
    this.stream = new w(a, b.inputPosition | 0);
  }

  var T = this,
    Q = void 0 !== T.Uint8Array && void 0 !== T.Uint16Array && void 0 !== T.Uint32Array;
  a.prototype.parse = function(b, c) {
    var d;
    this.offset = b.ip;
    this.signature = v(b, 4);
    this.key = v(b, 4);
    d = m(b);
    this.length = d + 12;
    "function" === typeof a[this.key] ? (this.info = new a[this.key],
      this.info.parse(b, d, c)) : T.console.warn(
      "additional layer information: not implemented", this.key);
    b.seek(this.offset + this.length, 0)
  };
  var U = {
    bevl: {}
  };
  U.bevl = g();
  U.bevl.prototype.parse = function(a) {
    this.offset = a.ip;
    this.size = m(a);
    this.version = m(a);
    this.angle = u(a);
    this.strength = u(a);
    this.blur = u(a);
    this.highlightBlendModeSignature = v(a, 4);
    this.highlightBlendModeKey = v(a, 4);
    this.shadowBlendModeSignature = v(a, 4);
    this.shadowBlendModeKey = v(a, 4);
    a.seek(2);
    this.highlightColor = [m(a), m(a)];
    a.seek(2);
    this.shadowColor = [m(a), m(a)];
    this.bevelStyle = r(a);
    this.highlightOpacity = r(a);
    this.shadowOpacity = r(a);
    this.enabled = !!r(a);
    this.use = !!r(a);
    this.up = !!r(a);
    2 === this.version && (a.seek(2), this.readHighlightColor = [m(a),
      m(a)
    ], a.seek(2), this.readShadowColor = [m(a), m(a)]);
    this.length = a.ip - this.offset
  };
  U.cmnS = {};
  U.cmnS = g();
  U.cmnS.prototype.parse = function(a) {
    this.offset = a.ip;
    this.size = m(a);
    this.version = m(a);
    this.visible = !!r(a);
    a.seek(2);
    this.length = a.ip - this.offset
  };
  U.dsdw = {};
  U.dsdw = g();
  U.dsdw.prototype.parse = function(a) {
    this.offset =
      a.ip;
    this.size = m(a);
    this.version = m(a);
    this.blur = u(a);
    this.intensity = u(a);
    this.angle = u(a);
    this.distance = u(a);
    a.seek(2);
    this.color = [m(a), m(a)];
    this.signature = v(a, 4);
    this.blend = v(a, 4);
    this.enabled = !!r(a);
    this.use = !!r(a);
    this.opacity = r(a);
    a.seek(2);
    this.nativeColor = [m(a), m(a)];
    this.length = a.ip - this.offset
  };
  U.iglw = {};
  U.iglw = g();
  U.iglw.prototype.parse = function(a) {
    this.offset = a.ip;
    this.size = m(a);
    this.version = m(a);
    this.blur = u(a);
    this.intensity = u(a);
    a.seek(2);
    this.color = [m(a), m(a)];
    this.signature = v(a, 4);
    this.blend =
      v(a, 4);
    this.enabled = !!r(a);
    this.opacity = r(a);
    2 === this.version && (this.invert = !!r(a), a.seek(2), this.nativeColor = [
      m(a), m(a)
    ]);
    this.length = a.ip - this.offset
  };
  U.isdw = {};
  U.isdw = U.dsdw;
  U.oglw = {};
  U.oglw = g();
  U.oglw.prototype.parse = function(a) {
    this.offset = a.ip;
    this.size = m(a);
    this.version = m(a);
    this.blur = u(a);
    this.intensity = u(a);
    a.seek(2);
    this.color = [m(a), m(a)];
    this.signature = v(a, 4);
    this.blend = v(a, 4);
    this.enabled = !!r(a);
    this.opacity = r(a);
    2 === this.version && (a.seek(2), this.nativeColor = [m(a), m(a)]);
    this.length = a.ip -
      this.offset
  };
  U.sofi = {};
  U.sofi = g();
  U.sofi.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    this.size = m(a);
    this.version = m(a);
    b = v(a, 4);
    if ("8BIM" !== b) throw Error("invalid signature:", b);
    this.blend = v(a, 4);
    a.seek(2);
    this.color = [t(a) >> 8, t(a) >> 8, t(a) >> 8, t(a) >> 8];
    this.opacity = r(a);
    this.enabled = !!r(a);
    a.seek(2);
    this.nativeColor = [h(a) >> 8, h(a) >> 8, h(a) >> 8, h(a) >> 8];
    this.length = a.ip - this.offset
  };
  a.Patt = g();
  a.Patt.prototype.parse = function(a, b, c) {
    b = a.ip + b;
    for (this.offset = a.ip; a.ip < b;) m(a), m(a), u(a), h(a), h(a),
      x(a,
        m(a)), v(a, a.input[a.ip++]), c.colorMode === da && k(a, 768),
      k(a, b - this.offset);
    this.length = a.ip - this.offset
  };
  a.PlLd = g();
  a.PlLd.prototype.parse = function(a) {
    this.offset = a.ip;
    this.type = v(a, 4);
    if ("plcL" !== this.type) throw Error("invalid type:", this.type);
    this.version = m(a);
    this.id = v(a, a.input[a.ip++]);
    this.page = u(a);
    this.totalPage = u(a);
    this.antiAlias = u(a);
    this.placedLayerType = u(a);
    this.transform = [a.readFloat64(), a.readFloat64(), a.readFloat64(),
      a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64(),
      a.readFloat64()
    ];
    this.warpVersion = u(a);
    this.warpDescriptorVersion = u(a);
    this.descriptor = new q;
    this.descriptor.parse(a);
    this.length = a.ip - this.offset
  };
  a.SoLd = g();
  a.SoLd.prototype.parse = function(a) {
    this.offset = a.ip;
    this.identifier = v(a, 4);
    if ("soLD" !== this.identifier) throw Error("invalid identifier:",
      this.identifier);
    this.version = m(a);
    this.descriptorVersion = u(a);
    this.descriptor = new q;
    this.descriptor.parse(a);
    this.length = a.ip - this.offset
  };
  a.TySh = g();
  a.TySh.prototype.parse = function(a) {
    this.offset = a.ip;
    this.version = h(a);
    this.transform = [a.readFloat64(), a.readFloat64(), a.readFloat64(),
      a.readFloat64(), a.readFloat64(), a.readFloat64()
    ];
    this.textVersion = h(a);
    this.textDescriptorVersion = u(a);
    this.textData = new q;
    this.textData.parse(a);
    this.textData.items !== this.textData.item.length ? T.console.error(
      "Descriptor parsing failed") : (this.warpVersion = h(a), this.warpDescriptorVersion =
      u(a), this.warpData = new q, this.warpData.parse(a), T.console.log(
        "TySh implementation is incomplete"), this.left = u(a), this.top =
      u(a), this.right = u(a), this.bottom = u(a), this.length =
      a.ip - this.offset)
  };
  a.clbl = g();
  a.clbl.prototype.parse = function(a) {
    this.offset = a.ip;
    this.blendClippedElements = !!r(a);
    a.seek(3);
    this.length = a.ip - this.offset
  };
  a.fxrp = g();
  a.fxrp.prototype.parse = function(a) {
    this.offset = a.ip;
    this.referencePoint = [a.readFloat64(), a.readFloat64()];
    this.length = a.ip - this.offset
  };
  a.iOpa = g();
  a.iOpa.prototype.parse = function(a) {
    this.offset = a.ip;
    this.opacity = r(a);
    a.seek(3);
    this.length = a.ip - this.offset
  };
  a.infx = g();
  a.infx.prototype.parse = function(a) {
    this.offset = a.ip;
    this.blendInteriorElements = !!r(a);
    a.seek(3);
    this.length = a.ip - this.offset
  };
  a.knko = g();
  a.knko.prototype.parse = function(a) {
    this.offset = a.ip;
    this.knockout = !!r(a);
    a.seek(3);
    this.length = a.ip - this.offset
  };
  a.lclr = g();
  a.lclr.prototype.parse = function(a) {
    this.offset = a.ip;
    this.color = [m(a), m(a)];
    this.length = a.ip - this.offset
  };
  a.lfx2 = g();
  a.lfx2.prototype.parse = function(a) {
    this.offset = a.ip;
    this.version = m(a);
    this.descriptorVersion = m(a);
    this.descriptor = new q;
    this.descriptor.parse(a);
    this.length = a.ip - this.offset
  };
  a.lnsr = g();
  a.lnsr.prototype.parse =
    function(a) {
      this.offset = a.ip;
      this.id = v(a, 4);
      this.length = a.ip - this.offset
    };
  a.lrFX = g();
  a.lrFX.prototype.parse = function(a) {
    var b, c, d;
    this.offset = a.ip;
    this.version = t(a);
    this.count = t(a);
    this.effect = [];
    for (d = 0; d < this.count; ++d) {
      b = v(a, 4);
      if ("8BIM" !== b) {
        T.console.warn("invalid signature:", b);
        break
      }
      this.key = b = v(a, 4);
      if ("function" === typeof U[this.key]) c = new U[this.key], c.parse(
        a), this.effect[d] = {
        key: b,
        effect: c
      };
      else {
        T.console.warn("detect unknown key:", b);
        break
      }
    }
    this.length = a.ip - this.offset
  };
  a.lsct = g();
  a.lsct.prototype.parse =
    function(a, b) {
      var c;
      this.offset = a.ip;
      this.type = m(a);
      if (12 === b) {
        c = v(a, 4);
        if ("8BIM" !== c) throw Error(
          "invalid section divider setting signature:", c);
        this.key = v(a, 4)
      }
      this.length = a.ip - this.offset
    };
  a.lspf = g();
  a.lspf.prototype.parse = function(a) {
    this.offset = a.ip;
    this.flags = m(a);
    this.length = a.ip - this.offset
  };
  a.luni = g();
  a.luni.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    this.layerName = x(a, b);
    1 === (b & 1) && a.seek(2);
    this.length = a.ip - this.offset
  };
  a.lyid = g();
  a.lyid.prototype.parse = function(a) {
    this.offset =
      a.ip;
    this.layerId = m(a);
    this.length = a.ip - this.offset
  };
  a.lyvr = g();
  a.lyvr.prototype.parse = function(a) {
    this.offset = a.ip;
    this.version = m(a);
    this.length = a.ip - this.offset
  };
  a.shmd = g();
  a.shmd.prototype.parse = function(a) {
    var b, c, d, e, f = this.metadata = [],
      h, g;
    this.offset = a.ip;
    this.items = m(a);
    h = 0;
    for (g = this.items; h < g; ++h) b = v(a, 4), c = v(a, 4), d = r(
      a), a.seek(3), e = m(a), e = k(a, e), f[h] = {
      signature: b,
      key: c,
      copy: d,
      data: e
    };
    this.length = a.ip - this.offset
  };
  a.vmsk = g();
  a.vmsk.prototype.parse = function(a, b) {
    var c = a.ip + b;
    this.offset = a.ip;
    this.version = m(a);
    for (this.flags = m(a); a.ip + 26 <= c;) this.path = new p, this.path
      .parse(a);
    this.length = a.ip - this.offset
  };
  q.prototype.parse = function(a) {
    var b, c, d, e;
    this.offset = a.ip;
    b = m(a);
    this.name = x(a, b);
    b = m(a) || 4;
    this.classId = v(a, b);
    this.items = m(a);
    this.item = [];
    d = 0;
    for (e = this.items; d < e; ++d) {
      b = m(a) || 4;
      b = v(a, b);
      c = v(a, 4);
      if ("function" !== typeof q[c]) {
        T.console.warn("OSType Key not implemented:", c);
        break
      }
      c = new q[c];
      c.parse(a);
      this.item.push({
        key: b,
        data: c
      })
    }
    this.length = a.ip - this.offset
  };
  a.GdFl = g();
  a.GdFl.prototype.parse =
    function(a) {
      this.offset = a.ip;
      this.version = m(a);
      this.descriptor = new q;
      this.descriptor.parse(a);
      this.length = a.ip - this.offset
    };
  a.SoCo = g();
  a.SoCo.prototype.parse = function(a) {
    this.offset = a.ip;
    this.version = m(a);
    this.descriptor = new q;
    this.descriptor.parse(a);
    this.length = a.ip - this.offset
  };
  q.ObAr = g();
  q.ObAr.prototype.parse = function(a) {
    this.offset = a.ip;
    T.console.warn(
      "OSType key not implemented (undocumented): ObAr(ObjectArray?)"
    );
    this.length = a.ip - this.offset
  };
  q.Objc = g();
  q.Objc.prototype.parse = function(a) {
    this.offset =
      a.ip;
    this.value = new q;
    this.value.parse(a);
    this.length = a.ip - this.offset
  };
  q.GlbO = q.Objc;
  q.TEXT = g();
  q.TEXT.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    this.string = x(a, b);
    this.length = a.ip - this.offset
  };
  q.UnFl = g();
  q.UnFl.prototype.parse = function(a) {
    var b = this.value = [],
      c, d;
    this.offset = a.ip;
    this.key = v(a, 4);
    c = m(a);
    for (d = 0; d < c; ++d) b[d] = a.readFloat64();
    this.length = a.ip - this.offset
  };
  q.UntF = g();
  q.UntF.prototype.parse = function(a) {
    this.offset = a.ip;
    this.units = v(a, 4);
    this.value = a.readFloat64();
    this.length =
      a.ip - this.offset
  };
  q.VlLs = g();
  q.VlLs.prototype.parse = function(a) {
    var b, c, d, e;
    this.offset = a.ip;
    this.item = [];
    b = m(a);
    for (c = 0; c < b; ++c) {
      d = v(a, 4);
      if ("function" !== typeof q[d]) {
        T.console.error("OSType Key not implemented:", d);
        return
      }
      e = new q[d];
      e.parse(a);
      this.item.push({
        type: d,
        data: e
      })
    }
    this.length = a.ip - this.offset
  };
  q.alis = g();
  q.alis.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    this.value = k(a, b);
    this.length = a.ip - this.offset
  };
  q.bool = g();
  q.bool.prototype.parse = function(a) {
    this.offset = a.ip;
    this.value = !!r(a);
    this.length = a.ip - this.offset
  };
  q.doub = g();
  q.doub.prototype.parse = function(a) {
    this.offset = a.ip;
    this.value = a.readFloat64();
    this.length = a.ip - this.offset
  };
  q["enum"] = g();
  q["enum"].prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    0 === b && (b = 4);
    this.type = v(a, b);
    b = m(a);
    0 === b && (b = 4);
    this["enum"] = v(a, b);
    this.length = a.ip - this.offset
  };
  q["long"] = g();
  q["long"].prototype.parse = function(a) {
    this.offset = a.ip;
    this.value = u(a);
    this.length = a.ip - this.offset
  };
  q["obj "] = g();
  q["obj "].prototype.parse = function(a) {
    var b,
      c, d, e;
    this.offset = a.ip;
    this.item = [];
    b = this.items = m(a);
    for (e = 0; e < b; ++e) {
      c = v(a, 4);
      d = q["obj "].Table[c];
      if ("function" !== typeof q[d]) {
        T.console.error("OSType Key not implemented:", d);
        return
      }
      d = new q[d];
      d.parse(a);
      this.item.push({
        key: c,
        data: d
      })
    }
    this.length = a.ip - this.offset
  };
  q["obj "].Table = {
    prop: "prop",
    Clss: "type",
    Enmr: "enum",
    rele: "rele",
    Idnt: "long",
    indx: "long",
    name: "TEXT"
  };
  q.prop = g();
  q.prop.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    this.name = x(a, b);
    b = m(a) || 4;
    this.classId = v(a, b);
    b = m(a) ||
      4;
    this.keyId = v(a, b);
    this.length = a.ip - this.offset
  };
  q.rele = g();
  q.rele.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    this.name = x(a, b);
    b = m(a) || 4;
    this.classId = v(a, b);
    this.value = m(a);
    this.length = a.ip - this.offset
  };
  q.tdta = g();
  q.tdta.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    this.data = k(a, b);
    this.length = a.ip - this.offset
  };
  q.type = g();
  q.type.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    this.name = x(a, b);
    b = m(a) || 4;
    this.classId = v(a, b);
    this.length = a.ip - this.offset
  };
  q.GlbC = q.type;
  var da = 2;
  b.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    this.length = m(a) + 4;
    if (4 === this.length) window.console.log(
      "skip: layer blending ranges(empty body)");
    else
      for (b = this.offset + this.length, this.black = t(a), this.white =
        t(a), this.destRange = m(a); a.ip < b;) this.channel.push([m(a),
        m(a)
      ])
  };
  c.prototype.parse = function(a) {
    var b;
    this.offset = a.ip;
    b = m(a);
    this.length = b + 4;
    0 === b ? window.console.log("skip: layer mask data (empty body)") :
      (this.top = u(a), this.left = u(a), this.bottom = u(a), this.right =
        u(a), this.defaultColor =
        r(a), this.flags = r(a), 20 === b ? this.padding = t(a) : (this
          .realFlags = r(a), this.realBackground = r(a), this.top2 = u(a),
          this.left2 = u(a), this.bottom2 = u(a), this.right2 = u(a)))
  };
  p.prototype.parse = function(a) {
    this.offset = a.ip;
    this.type = h(a);
    a.seek(26, this.offset);
    this.length = a.ip - this.offset
  };
  var aa = w.prototype;
  if (Q) var R = new ArrayBuffer(8),
    ea = new Uint8Array(R),
    Z = new Float64Array(R);
  else var ga = Math.pow(2, 48),
    W = Math.pow(2, 40),
    ma = Math.pow(2, 32),
    ua = Math.pow(2, 24),
    ja = Math.pow(2, 16),
    ta = Math.pow(2, 8),
    Da = Math.pow(2, -1022),
    va = Math.pow(2, -52);
  aa.readFloat64 = function() {
    var a;
    if (Q) {
      a = this.input;
      for (var b = this.ip, c = 8; --c;) ea[c] = a[b++];
      a = Z[0]
    } else {
      var c = this.input,
        d = this.ip;
      a = 0 === (c[d] & 128);
      b = (c[d++] & 127) << 4 | (c[d] & 240) >> 4;
      c = (c[d++] & 15) * ga + c[d++] * W + c[d++] * ma + c[d++] * ua +
        c[d++] * ja + c[d++] * ta + c[d++];
      a = 0 === b ? 0 === c ? 0 : (a ? 1 : -1) * Da * c * va : 2047 ===
        b ? c ? NaN : a ? Infinity : -Infinity : (a ? 1 : -1) * (Math.pow(
          2, b - 1023) + c * Math.pow(2, b - 1075))
    }
    this.ip += 8;
    return a
  };
  w.prototype.slice = function(a, b) {
    this.ip = b;
    return Q ? this.input.subarray(a, b) : this.input.slice(a,
      b)
  };
  w.prototype.fetch = function(a, b) {
    return Q ? this.input.subarray(a, b) : this.input.slice(a, b)
  };
  w.prototype.seek = function(a, b) {
    "number" !== typeof b && (b = this.ip);
    this.ip = b + a
  };
  z.prototype.parse = function(a) {
    this.offset = a.ip;
    this.length = m(a) + 4;
    this.overlayColorSpace = t(a);
    this.colorComponents = [t(a), t(a), t(a), t(a)];
    this.opacity = t(a);
    this.kind = r(a);
    this.filter = k(a, this.offset + this.length - a.ip);
    a.seek(this.offset + this.length, 0)
  };
  y.prototype.parse = function(a) {
    this.offset = a.ip;
    this.signature = v(a, 4);
    if ("8BPS" !==
      this.signature) throw Error("invalid signature");
    this.version = t(a);
    this.reserved = k(a, 6);
    this.channels = t(a);
    this.rows = m(a);
    this.columns = m(a);
    this.depth = t(a);
    this.colorMode = t(a);
    this.length = a.ip - this.offset
  };
  B.prototype.parse = function() {
    switch (this.header.colorMode) {
      case 0:
        window.console.error("bitmap color mode not supported");
        break;
      case 8:
        window.console.warn(
          "duotone color mode implementation is incomplete");
      case 1:
        var a = this.channel[0],
          b, c = a.length,
          d = this.redChannel = new(Q ? Uint8Array : Array)(c),
          e =
          this.greenChannel = new(Q ? Uint8Array : Array)(c),
          f = this.blueChannel = new(Q ? Uint8Array : Array)(c),
          h = this.header.depth / 8,
          g;
        for (b = g = 0; b < c; ++g, b += h) d[g] = e[g] = f[g] = a[b];
        break;
      case da:
        a = this.channel[0];
        c = a.length;
        e = this.redChannel = new(Q ? Uint8Array : Array)(c);
        f = this.greenChannel = new(Q ? Uint8Array : Array)(c);
        h = this.blueChannel = new(Q ? Uint8Array : Array)(c);
        g = this.colorModeData.data;
        var k = g.length / 3;
        for (b = d = 0; b < c; ++d, b += 1) e[d] = g[a[b]], f[d] = g[a[
          b] + k], h[d] = g[a[b] + 2 * k];
        break;
      case 7:
        window.console.warn(
          "multichannel color mode implementation is incomplete");
      case 3:
        a = this.redChannel = this.channel[0];
        b = this.greenChannel = this.channel[1];
        c = this.blueChannel = this.channel[2];
        e = this.header.depth / 8;
        if (1 !== e) {
          if (4 === this.channel.length)
            for (d = this.alphaChannel = this.channel[3], f = g = 0, h =
              a.length; f < h; ++g, f += e) a[g] = a[f], b[g] = b[f], c[g] =
              c[f], d[g] = d[f];
          else
            for (f = g = 0, h = a.length; f < h; ++g, f += e) a[g] = a[f],
              b[g] = b[f], c[g] = c[f];
          Q ? (this.redChannel = a.subarray(0, g), this.greenChannel = b
              .subarray(0, g), this.blueChannel = c.subarray(0, g)) : a.length =
            b.length = c.length = g;
          4 === this.channel.length &&
            (Q ? this.alphaChannel = d.subarray(0, g) : d.length = g)
        }
        break;
      case 4:
        a = this.channel[0];
        b = this.channel[1];
        c = this.channel[2];
        d = this.channel[3];
        f = a.length;
        h = this.redChannel = new(Q ? Uint8Array : Array)(f);
        g = this.greenChannel = new(Q ? Uint8Array : Array)(f);
        for (var k = this.blueChannel = new(Q ? Uint8Array : Array)(f),
            l, m, p, r, q = this.header.depth / 8, s, e = s = 0; e < f; ++
          s, e += q) l = 255 - a[e], m = 255 - b[e], p = 255 - c[e], r =
          255 - d[e], h[s] = 65535 - (l * (255 - r) + (r << 8)) >> 8, g[
            s] = 65535 - (m * (255 - r) + (r << 8)) >> 8, k[s] = 65535 -
          (p * (255 - r) + (r << 8)) >> 8;
        break;
      case 9:
        for (a =
          this.channel[0], b = this.channel[1], c = this.channel[2], e =
          a.length, f = this.redChannel = new(Q ? Uint8Array : Array)(e),
          h = this.greenChannel = new(Q ? Uint8Array : Array)(e), g =
          this.blueChannel = new(Q ? Uint8Array : Array)(e), k = 6 / 29,
          m = this.header.depth / 8, d = l = 0; d < e; ++l, d += m) q =
          ((100 * a[d] >> 8) + 16) / 116, p = q + (b[d] - 128) / 500, r =
          q - (c[d] - 128) / 200, p = p > k ? .950456 * Math.pow(p, 3) :
          3 * (p - 16 / 116) * Math.pow(k, 2), q = q > k ? 1 * Math.pow(
            q, 3) : 3 * (q - 16 / 116) * Math.pow(k, 2), r = r > k ?
          1.088754 * Math.pow(r, 3) : 3 * (r - 16 / 116) * Math.pow(k, 2),
          f[l] = 255 * Math.pow(2.041588 *
            p - .565007 * q - .344731 * r, 1 / 2.2), h[l] = 255 * Math.pow(-
            .969244 * p + 1.875968 * q + .041555 * r, 1 / 2.2), g[l] =
          255 * Math.pow(.013444 * p - .118362 * q + 1.015175 * r, 1 /
            2.2)
    }
    this.parsed = !0
  };
  A.prototype.parse = function(a, b) {
    var c;
    this.offset = a.ip;
    c = m(a);
    this.length = c + 4;
    if (b.colorMode === da && 768 !== c) throw Error(
      "invalid color mode data");
    this.data = k(a, c)
  };
  d(C, l);
  C.prototype.parse = function(a, b) {
    var c = this.channel = [],
      d, e = b.channels,
      f = b.depth / 8 * b.rows * b.columns;
    for (d = 0; d < e; ++d) c[d] = k(a, f)
  };
  d(F, l);
  F.prototype.parse = function(a, b) {
    var c,
      d = this.channel = [],
      e = this.lineLength = [],
      f, h, g = b.rows,
      k = b.channels,
      l;
    for (c = 0; c < g * k; ++c) e[c] = t(a);
    for (f = 0; f < k; ++f) {
      h = [];
      for (c = l = 0; c < g; ++c) h[c] = s(a, b.depth / 8 * e[f * g +
        c]), l += h[c].length;
      if (Q)
        for (d[f] = new Uint8Array(l), l = c = 0, g = h.length; c < g; ++
          c) d[f].set(h[c], l), l += h[c].length;
      else d[f] = Array.prototype.concat.apply([], h)
    }
  };
  E.prototype.parse = function(a, b) {
    this.offset = a.ip;
    this.compressionMethod = t(a);
    switch (this.compressionMethod) {
      case 0:
        this.image = new C;
        break;
      case 1:
        this.image = new F;
        break;
      default:
        throw Error("unknown compression method");
    }
    this.image.parse(a, b);
    this.length = a.ip - this.offset
  };
  E.prototype.createCanvas = function(a, b) {
    var c = document.createElement("canvas"),
      d = c.getContext("2d"),
      e = c.width = a.columns,
      f = c.height = a.rows,
      h, g, k, l, m, p;
    h = new B(a, b, this.image.channel);
    h.parsed || h.parse();
    p = [h.redChannel, h.greenChannel, h.blueChannel];
    if (0 >= e || 0 >= f) return null;
    h = d.createImageData(e, f);
    g = h.data;
    for (l = 0; l < f; ++l)
      for (k = 0; k < e; ++k) m = l * e + k, g[4 * m] = p[0][m], g[4 *
        m + 1] = p[1][m], g[4 * m + 2] = p[2][m], g[4 * m + 3] = 255;
    d.putImageData(h, 0, 0);
    return c
  };
  D.prototype.parse =
    function(a) {
      this.offset = a.ip;
      if ("8BIM" !== v(a, 4)) throw Error("invalid signature");
      this.identifier = t(a);
      this.name = v(a, a.input[a.ip++]);
      this.dataSize = m(a);
      this.data = k(a, this.dataSize);
      this.length = a.ip - this.offset
    };
  P.prototype.parse = function(a) {
    this.offset = a.ip;
    this.length = m(a) + 4;
    this.imageResource = new D;
    this.imageResource.parse(a);
    a.seek(this.offset + this.length, 0)
  };
  G.prototype.parse = function(d, e) {
    var f, g;
    this.offset = d.ip;
    this.top = u(d);
    this.left = u(d);
    this.bottom = u(d);
    this.right = u(d);
    this.channels = t(d);
    f = 0;
    for (g = this.channels; f < g; ++f) this.info[f] = {
      id: h(d),
      length: m(d)
    };
    if ("8BIM" !== v(d, 4)) throw Error(
      "invalid blend mode signature");
    this.blendMode = v(d, 4);
    this.opacity = r(d);
    this.clipping = r(d);
    this.flags = r(d);
    this.filter = r(d);
    this.extraLength = m(d);
    f = d.ip + this.extraLength;
    this.layerMaskData = new c;
    this.layerMaskData.parse(d);
    this.blendingRanges = new b;
    this.blendingRanges.parse(d);
    g = r(d);
    this.name = v(d, g);
    d.seek((4 - (1 + g) % 4) % 4);
    for (this.additionalLayerInfo = []; d.ip < f;) g = new a, g.parse(
      d, e), this.additionalLayerInfo.push(g);
    this.length = d.ip - this.offset
  };
  d(J, e);
  J.prototype.parse = function(a, b, c) {
    this.channel = k(a, c)
  };
  d(N, e);
  N.prototype.parse = function(a, b, c) {
    var d = this.lineLength = [],
      e = [];
    b = b.bottom - b.top;
    var f = a.ip + c,
      h = 0;
    for (c = 0; c < b; ++c) d[c] = t(a);
    for (c = 0; c < b && !(e[c] = s(a, d[c]), h += e[c].length, a.ip >=
        f); ++c);
    if (Q)
      for (this.channel = new Uint8Array(h), a = c = 0, b = e.length; c <
        b; ++c) this.channel.set(e[c], a), a += e[c].length;
    else this.channel = Array.prototype.concat.apply([], e)
  };
  K.prototype.parse = function(a, b) {
    var c = this.channel = [],
      d, e, f,
      h, g;
    this.offset = a.ip;
    e = 0;
    for (f = b.channels; e < f; ++e)
      if (h = a.ip, g = b.info[e], d = t(a), 2 !== g.length) {
        switch (d) {
          case 0:
            d = new J;
            break;
          case 1:
            d = new N;
            break;
          default:
            throw Error("unknown compression method: " + d);
        }
        d.parse(a, b, g.length - 2);
        c[e] = d;
        a.seek(g.length + h, 0)
      }
    this.length = a.ip - this.offset
  };
  K.prototype.createCanvas = function(a, b, c) {
    var d = document.createElement("canvas"),
      e = d.getContext("2d"),
      f = d.width = c.right - c.left,
      h = d.height = c.bottom - c.top,
      g, k, l = this.channel,
      m = [],
      p, r, q, s;
    if (0 === f || 0 === h) return null;
    g = e.createImageData(f,
      h);
    k = g.data;
    p = 0;
    for (r = l.length; p < r; ++p) switch (c.info[p].id) {
      case 0:
      case 1:
      case 2:
      case 3:
        m[c.info[p].id] = l[p].channel;
        break;
      case -1:
        q = l[p].channel;
        break;
      case -2:
        s = l[p].channel;
        break;
      default:
        window.console.warn("not supported channel id", c.info[p].id)
    }
    q && m.push(q);
    a = new B(a, b, m);
    a.parsed || a.parse();
    l = [a.redChannel, a.greenChannel, a.blueChannel, a.alphaChannel];
    for (b = 0; b < h; ++b)
      for (a = 0; a < f; ++a) c = b * f + a, k[4 * c + 0] = l[0][c], k[
          4 * c + 1] = l[1][c], k[4 * c + 2] = l[2][c], k[4 * c + 3] = s ?
        s[c] / 255 * (l[3] ? l[3][c] : 255) : l[3] ? l[3][c] :
        255;
    e.putImageData(g, 0, 0);
    return d
  };
  O.prototype.parse = function(a, b) {
    var c, d, e;
    this.offset = a.ip;
    this.length = m(a) + 4;
    this.layerCount = Math.abs(h(a));
    c = 0;
    for (d = this.layerCount; c < d; ++c) e = new G, e.parse(a, b),
      this.layerRecord[c] = e;
    c = 0;
    for (d = this.layerCount; c < d; ++c) e = new K, e.parse(a, this.layerRecord[
      c]), this.channelImageData[c] = e;
    a.seek(this.offset + this.length, 0)
  };
  V.prototype.parse = function(b, c) {
    var d;
    this.offset = b.ip;
    d = m(b);
    this.length = d + 4;
    0 === d && window.console.log(
      "skip: layer and mask information (empty body)");
    d = b.ip + d;
    this.layerInfo = new O;
    this.globalLayerMaskInfo = new z;
    this.additionalLayerInfo = new a;
    this.layerInfo.parse(b, c);
    this.globalLayerMaskInfo.parse(b, c);
    this.additionalLayerInfo.parse(b, c);
    b.seek(d, 0)
  };
  L.prototype.parse = function() {
    var a = this.stream;
    this.header = new y;
    this.colorModeData = new A;
    this.imageResources = new P;
    this.layerAndMaskInformation = new V;
    this.imageData = new E;
    this.header.parse(a);
    this.colorModeData.parse(a, this.header);
    this.imageResources.parse(a);
    this.layerAndMaskInformation.parse(a,
      this.header);
    this.imageData.parse(a, this.header)
  };
  f("PSD.Parser", L);
  f("PSD.Parser.prototype.parse", L.prototype.parse)
}).call(this);

//PDFJS building
"undefined" === typeof PDFJS && (("undefined" !== typeof window ? window : this).PDFJS = {});
PDFJS.version = "1.0.266";
PDFJS.build = "5b16323";
(function() {
  function g(msg) {
    PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.infos && console.log("Info: " + msg)
  }

  function f(msg) {
    PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.warnings && console.log("Warning: " + msg)
  }

  function d(b) {
    if (1 < arguments.length) {
      var c = ["Error:"];
      c.push.apply(c, arguments);
      console.log.apply(console, c);
      b = [].join.call(arguments, " ")
    } else console.log("Error: " + b);
    console.log(a());
    C.notify(A.unknown);
    throw Error(b);
  }

  function a() {
    try {
      throw Error();
    } catch (a) {
      return a.stack ? a.stack.split("\n").slice(2).join("\n") :
        ""
    }
  }

  function e(a, b) {
    if (!b) return a;
    if (/^[a-z][a-z0-9+\-.]*:/i.test(b)) return b;
    var c;
    if ("/" == b.charAt(0)) return c = a.indexOf("://"), "/" === b.charAt(
      1) ? ++c : c = a.indexOf("/", c + 3), a.substring(0, c) + b;
    var d = a.length;
    c = a.lastIndexOf("#");
    d = 0 <= c ? c : d;
    c = a.lastIndexOf("?", d);
    c = a.lastIndexOf("/", 0 <= c ? c : d);
    return a.substring(0, c + 1) + b
  }

  function q(a, b) {
    if (!a) return !1;
    var c = /^[a-z][a-z0-9+\-.]*(?=:)/i.exec(a);
    if (!c) return b;
    c = c[0].toLowerCase();
    switch (c) {
      case "http":
      case "https":
      case "ftp":
      case "mailto":
        return !0;
      default:
        return !1
    }
  }

  function l(a, b, c) {
    Object.defineProperty(a, b, {
      value: c,
      enumerable: !0,
      configurable: !0,
      writable: !1
    });
    return c
  }

  function b(a) {
    for (var b = a.length, c = new Uint8Array(b), d = 0; d < b; ++d) c[
      d] = a.charCodeAt(d) & 255;
    return c
  }

  function c(a) {
    var b, c = a.length,
      d = [];
    if ("\u00fe" === a[0] && "\u00ff" === a[1])
      for (b = 2; b < c; b += 2) d.push(String.fromCharCode(a.charCodeAt(
        b) << 8 | a.charCodeAt(b + 1)));
    else
      for (b = 0; b < c; ++b) {
        var e = J[a.charCodeAt(b)];
        d.push(e ? String.fromCharCode(e) : a.charAt(b))
      }
    return d.join("")
  }

  function p(a) {
    return a instanceof Name;
  }

  function w(a, b) {
    if (!(a instanceof Dict)) return !1;
    if (!b) return !0;
    var c = a.get("Type");
    return p(c) && c.name == b
  }

  function m(a) {
    return a instanceof Array;
  }

  function u() {
    var a = {};
    a.promise = new Promise(function(b, c) {
      a.resolve = b;
      a.reject = c
    });
    return a
  }

  function t(a, b) {
    this.name = a;
    this.comObj = b;
    this.callbackIndex = 1;
    this.postMessageTransfers = !0;
    var c = this.callbacksCapabilities = {},
      e = this.actionHandler = {};
    e.console_log = [function(a) {
      console.log.apply(console, a)
    }];
    e.console_error = [function(a) {
      console.error.apply(console,
        a)
    }];
    e._unsupported_feature = [function(a) {
      C.notify(a)
    }];
    b.onmessage = function(a) {
      var f = a.data;
      if (f.isReply)
        if (a = f.callbackId, f.callbackId in c) {
          var h = c[a];
          delete c[a];
          "error" in f ? h.reject(f.error) : h.resolve(f.data)
        } else d("Cannot resolve callback " + a);
      else if (f.action in e) {
        var g = e[f.action];
        f.callbackId ? Promise.resolve().then(function() {
          return g[0].call(g[1], f.data)
        }).then(function(a) {
          b.postMessage({
            isReply: !0,
            callbackId: f.callbackId,
            data: a
          })
        }, function(a) {
          b.postMessage({
            isReply: !0,
            callbackId: f.callbackId,
            error: a
          })
        }) : g[0].call(g[1], f.data)
      } else d("Unknown action from worker: " + f.action)
    }
  }

  function h(a, b, c) {
    var d = new Image;
    d.onload = function() {
      c.resolve(a, d)
    };
    d.src = b
  }

  function r(a, b) {
    var c = document.createElement("canvas");
    c.width = a;
    c.height = b;
    return c
  }

  function k(a) {
    a.mozCurrentTransform || (a._scaleX = a._scaleX || 1, a._scaleY =
      a._scaleY || 1, a._originalSave = a.save, a._originalRestore =
      a.restore, a._originalRotate = a.rotate, a._originalScale = a.scale,
      a._originalTranslate = a.translate, a._originalTransform = a.transform,
      a._originalSetTransform = a.setTransform, a._transformMatrix = [
        a._scaleX, 0, 0, a._scaleY, 0, 0
      ], a._transformStack = [], Object.defineProperty(a,
        "mozCurrentTransform", {
          get: function() {
            return this._transformMatrix
          }
        }), Object.defineProperty(a, "mozCurrentTransformInverse", {
        get: function() {
          var a = this._transformMatrix,
            b = a[0],
            c = a[1],
            d = a[2],
            e = a[3],
            f = a[4],
            a = a[5],
            h = b * e - c * d,
            g = c * d - b * e;
          return [e / h, c / g, d / g, b / h, (e * f - d * a) / g, (c *
            f - b * a) / h]
        }
      }), a.save = function() {
        var a = this._transformMatrix;
        this._transformStack.push(a);
        this._transformMatrix =
          a.slice(0, 6);
        this._originalSave()
      }, a.restore = function() {
        var a = this._transformStack.pop();
        a && (this._transformMatrix = a, this._originalRestore())
      }, a.translate = function(a, b) {
        var c = this._transformMatrix;
        c[4] = c[0] * a + c[2] * b + c[4];
        c[5] = c[1] * a + c[3] * b + c[5];
        this._originalTranslate(a, b)
      }, a.scale = function(a, b) {
        var c = this._transformMatrix;
        c[0] *= a;
        c[1] *= a;
        c[2] *= b;
        c[3] *= b;
        this._originalScale(a, b)
      }, a.transform = function(b, c, d, e, f, h) {
        var g = this._transformMatrix;
        this._transformMatrix = [g[0] * b + g[2] * c, g[1] * b + g[3] *
          c, g[0] *
          d + g[2] * e, g[1] * d + g[3] * e, g[0] * f + g[2] * h + g[4],
          g[1] * f + g[3] * h + g[5]
        ];
        a._originalTransform(b, c, d, e, f, h)
      }, a.setTransform = function(b, c, d, e, f, h) {
        this._transformMatrix = [b, c, d, e, f, h];
        a._originalSetTransform(b, c, d, e, f, h)
      }, a.rotate = function(a) {
        var b = Math.cos(a),
          c = Math.sin(a),
          d = this._transformMatrix;
        this._transformMatrix = [d[0] * b + d[2] * c, d[1] * b + d[3] *
          c, d[0] * -c + d[2] * b, d[1] * -c + d[3] * b, d[4], d[5]
        ];
        this._originalRotate(a)
      })
  }

  function v(a) {
    var b = a.width,
      c = a.height,
      d, e, f = b + 1,
      h = new Uint8Array(f * (c + 1)),
      g = new Uint8Array([0, 2, 4,
        0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0
      ]),
      k = b + 7 & -8,
      l = a.data,
      m = new Uint8Array(k * c),
      p = 0;
    a = 0;
    for (d = l.length; a < d; a++) {
      e = 128;
      for (var r = l[a]; 0 < e;) m[p++] = r & e ? 0 : 255, e >>= 1
    }
    p = l = 0;
    0 !== m[p] && (h[0] = 1, ++l);
    for (d = 1; d < b; d++) m[p] !== m[p + 1] && (h[d] = m[p] ? 2 : 1, ++
      l), p++;
    0 !== m[p] && (h[d] = 2, ++l);
    for (a = 1; a < c; a++) {
      p = a * k;
      e = a * f;
      m[p - k] !== m[p] && (h[e] = m[p] ? 1 : 8, ++l);
      r = (m[p] ? 4 : 0) + (m[p - k] ? 8 : 0);
      for (d = 1; d < b; d++) r = (r >> 2) + (m[p + 1] ? 4 : 0) + (m[p -
        k + 1] ? 8 : 0), g[r] && (h[e + d] = g[r], ++l), p++;
      m[p - k] !== m[p] && (h[e + d] = m[p] ? 2 : 4, ++l);
      if (1E3 < l) return null
    }
    p = k * (c - 1);
    e = a * f;
    0 !== m[p] && (h[e] = 8, ++l);
    for (d = 1; d < b; d++) m[p] !== m[p + 1] && (h[e + d] = m[p] ? 4 :
      8, ++l), p++;
    0 !== m[p] && (h[e + d] = 4, ++l);
    if (1E3 < l) return null;
    var g = new Int32Array([0, f, -1, 0, -f, 0, 0, 0, 1]),
      q = [];
    for (a = 0; l && a <= c; a++) {
      k = a * f;
      for (m = k + b; k < m && !h[k];) k++;
      if (k !== m) {
        m = [k % f, a];
        p = h[k];
        d = k;
        do {
          e = g[p];
          do k += e; while (!h[k]);
          e = h[k];
          5 !== e && 10 !== e ? (p = e, h[k] = 0) : (p = e & 51 * p >> 4,
            h[k] &= p >> 2 | p << 2);
          m.push(k % f);
          m.push(k / f | 0);
          --l
        } while (d !== k);
        q.push(m);
        --a
      }
    }
    return function(a) {
      a.save();
      a.scale(1 / b, -1 / c);
      a.translate(0, -c);
      a.beginPath();
      for (var d = 0,
          e = q.length; d < e; d++) {
        var f = q[d];
        a.moveTo(f[0], f[1]);
        for (var h = 2, g = f.length; h < g; h += 2) a.lineTo(f[h], f[
          h + 1])
      }
      a.fill();
      a.beginPath();
      a.restore()
    }
  }

  function x(a) {
    var b = ta[a[0]];
    b || d("Unknown IR type: " + a[0]);
    return b.fromIR(a)
  }
  var s = "undefined" === typeof window ? this : window,
    z = "undefined" == typeof window,
    y = [.001, 0, 0, .001, 0, 0];

  s.PDFJS || (s.PDFJS = {});
  s.PDFJS.pdfBug = !1;
  PDFJS.VERBOSITY_LEVELS = {
    errors: 0,
    warnings: 1,
    infos: 5
  };

  var B = PDFJS.OPS = {
      dependency: 1,
      setLineWidth: 2,
      setLineCap: 3,
      setLineJoin: 4,
      setMiterLimit: 5,
      setDash: 6,
      setRenderingIntent: 7,
      setFlatness: 8,
      setGState: 9,
      save: 10,
      restore: 11,
      transform: 12,
      moveTo: 13,
      lineTo: 14,
      curveTo: 15,
      curveTo2: 16,
      curveTo3: 17,
      closePath: 18,
      rectangle: 19,
      stroke: 20,
      closeStroke: 21,
      fill: 22,
      eoFill: 23,
      fillStroke: 24,
      eoFillStroke: 25,
      closeFillStroke: 26,
      closeEOFillStroke: 27,
      endPath: 28,
      clip: 29,
      eoClip: 30,
      beginText: 31,
      endText: 32,
      setCharSpacing: 33,
      setWordSpacing: 34,
      setHScale: 35,
      setLeading: 36,
      setFont: 37,
      setTextRenderingMode: 38,
      setTextRise: 39,
      moveText: 40,
      setLeadingMoveText: 41,
      setTextMatrix: 42,
      nextLine: 43,
      showText: 44,
      showSpacedText: 45,
      nextLineShowText: 46,
      nextLineSetSpacingShowText: 47,
      setCharWidth: 48,
      setCharWidthAndBounds: 49,
      setStrokeColorSpace: 50,
      setFillColorSpace: 51,
      setStrokeColor: 52,
      setStrokeColorN: 53,
      setFillColor: 54,
      setFillColorN: 55,
      setStrokeGray: 56,
      setFillGray: 57,
      setStrokeRGBColor: 58,
      setFillRGBColor: 59,
      setStrokeCMYKColor: 60,
      setFillCMYKColor: 61,
      shadingFill: 62,
      beginInlineImage: 63,
      beginImageData: 64,
      endInlineImage: 65,
      paintXObject: 66,
      markPoint: 67,
      markPointProps: 68,
      beginMarkedContent: 69,
      beginMarkedContentProps: 70,
      endMarkedContent: 71,
      beginCompat: 72,
      endCompat: 73,
      paintFormXObjectBegin: 74,
      paintFormXObjectEnd: 75,
      beginGroup: 76,
      endGroup: 77,
      beginAnnotations: 78,
      endAnnotations: 79,
      beginAnnotation: 80,
      endAnnotation: 81,
      paintJpegXObject: 82,
      paintImageMaskXObject: 83,
      paintImageMaskXObjectGroup: 84,
      paintImageXObject: 85,
      paintInlineImageXObject: 86,
      paintInlineImageXObjectGroup: 87,
      paintImageXObjectRepeat: 88,
      paintImageMaskXObjectRepeat: 89,
      paintSolidColorImageMask: 90,
      constructPath: 91
    },
    A = PDFJS.UNSUPPORTED_FEATURES = {
      unknown: "unknown",
      forms: "forms",
      javaScript: "javaScript",
      smask: "smask",
      shadingPattern: "shadingPattern",
      font: "font"
    },
    C = PDFJS.UnsupportedManager = function() {
      var a = [];
      return {
        listen: function(b) {
          a.push(b)
        },
        notify: function(b) {
          f('Unsupported feature "' + b + '"');
          for (var c = 0, d = a.length; c < d; c++) a[c](b)
        }
      }
    }();
  PDFJS.isValidUrl = q;
  var F = PDFJS.PasswordResponses = {
    NEED_PASSWORD: 1,
    INCORRECT_PASSWORD: 2
  };

  (function() {
    function a(b, c) {
      this.name = "PasswordException";
      this.message = b;
      this.code = c
    }
    a.prototype = Error();
    return a.constructor = a
  })();

  (function() {
    function a(b,
      c) {
      this.name = "UnknownErrorException";
      this.message = b;
      this.details = c
    }
    a.prototype = Error();
    return a.constructor = a
  })();

  (function() {
    function a(b) {
      this.name = "InvalidPDFException";
      this.message = b
    }
    a.prototype = Error();
    return a.constructor = a
  })();

  (function() {
    function a(b) {
      this.name = "MissingPDFException";
      this.message = b
    }
    a.prototype = Error();
    return a.constructor = a
  })();

  var E = function() {
    function a(b) {
      this.message = b
    }
    a.prototype = Error();
    a.prototype.name = "NotImplementedException";
    return a.constructor = a
  }();

  (function() {
    function a(b,
      c) {
      this.begin = b;
      this.end = c;
      this.message = "Missing data [" + b + ", " + c + ")"
    }
    a.prototype = Error();
    a.prototype.name = "MissingDataException";
    return a.constructor = a
  })();

  (function() {
    function a(b) {
      this.message = b
    }
    a.prototype = Error();
    a.prototype.name = "XRefParseException";
    return a.constructor = a
  })();

  Object.defineProperty(PDFJS, "isLittleEndian", {
    configurable: !0,
    get: function() {
      var a = PDFJS,
        b = new Uint8Array(2);
      b[0] = 1;
      b = new Uint16Array(b.buffer);
      return l(a, "isLittleEndian", 1 === b[0])
    }
  });
  Object.defineProperty(PDFJS, "hasCanvasTypedArrays", {
    configurable: !0,
    get: function() {
      var a = PDFJS,
        b = document.createElement("canvas");
      b.width = b.height = 1;
      b = b.getContext("2d").createImageData(1, 1);
      return l(a, "hasCanvasTypedArrays", "undefined" !== typeof b.data
        .buffer)
    }
  });

  var D = function() {
      function a(d, e) {
        this.buffer = d;
        this.byteLength = d.length;
        for (var f = this.length = void 0 === e ? this.byteLength >> 2 :
            e; c < f;) Object.defineProperty(a.prototype, c, b(c)), c++
      }

      function b(a) {
        return {
          get: function() {
            var b = this.buffer,
              c = a << 2;
            return (b[c] | b[c + 1] << 8 | b[c + 2] << 16 | b[c + 3] <<
              24) >>> 0
          },
          set: function(b) {
            var c = this.buffer,
              d = a << 2;
            c[d] = b & 255;
            c[d + 1] = b >> 8 & 255;
            c[d + 2] = b >> 16 & 255;
            c[d + 3] = b >>> 24 & 255
          }
        }
      }
      a.prototype = Object.create(null);
      var c = 0;
      return a
    }(),
    P = [1, 0, 0, 1, 0, 0],
    G = PDFJS.Util = function() {
      function a() {}
      a.makeCssRgb = function(a) {
        return "rgb(" + a[0] + "," + a[1] + "," + a[2] + ")"
      };
      a.transform = function(a, b) {
        return [a[0] * b[0] + a[2] * b[1], a[1] * b[0] + a[3] * b[1], a[
          0] * b[2] + a[2] * b[3], a[1] * b[2] + a[3] * b[3], a[0] * b[
          4] + a[2] * b[5] + a[4], a[1] * b[4] + a[3] * b[5] + a[5]]
      };
      a.applyTransform = function(a, b) {
        return [a[0] * b[0] + a[1] * b[2] + b[4],
          a[0] * b[1] + a[1] * b[3] + b[5]
        ]
      };
      a.applyInverseTransform = function(a, b) {
        var c = b[0] * b[3] - b[1] * b[2];
        return [(a[0] * b[3] - a[1] * b[2] + b[2] * b[5] - b[4] * b[3]) /
          c, (-a[0] * b[1] + a[1] * b[0] + b[4] * b[1] - b[5] * b[0]) /
          c
        ]
      };
      a.getAxialAlignedBoundingBox = function(b, c) {
        var d = a.applyTransform(b, c),
          e = a.applyTransform(b.slice(2, 4), c),
          f = a.applyTransform([b[0], b[3]], c),
          h = a.applyTransform([b[2], b[1]], c);
        return [Math.min(d[0], e[0], f[0], h[0]), Math.min(d[1], e[1],
          f[1], h[1]), Math.max(d[0], e[0], f[0], h[0]), Math.max(d[1],
          e[1], f[1], h[1])]
      };
      a.inverseTransform =
        function(a) {
          var b = a[0] * a[3] - a[1] * a[2];
          return [a[3] / b, -a[1] / b, -a[2] / b, a[0] / b, (a[2] * a[5] -
            a[4] * a[3]) / b, (a[4] * a[1] - a[5] * a[0]) / b]
        };
      a.apply3dTransform = function(a, b) {
        return [a[0] * b[0] + a[1] * b[1] + a[2] * b[2], a[3] * b[0] +
          a[4] * b[1] + a[5] * b[2], a[6] * b[0] + a[7] * b[1] + a[8] *
          b[2]
        ]
      };
      a.singularValueDecompose2dScale = function(a) {
        var b = [a[0], a[2], a[1], a[3]],
          c = a[0] * b[0] + a[1] * b[2],
          d = a[2] * b[1] + a[3] * b[3],
          e = (c + d) / 2;
        a = Math.sqrt((c + d) * (c + d) - 4 * (c * d - (a[2] * b[0] + a[
          3] * b[2]) * (a[0] * b[1] + a[1] * b[3]))) / 2;
        b = e - a || 1;
        return [Math.sqrt(e + a || 1), Math.sqrt(b)]
      };
      a.normalizeRect = function(a) {
        var b = a.slice(0);
        a[0] > a[2] && (b[0] = a[2], b[2] = a[0]);
        a[1] > a[3] && (b[1] = a[3], b[3] = a[1]);
        return b
      };
      a.intersect = function(b, c) {
        function d(a, b) {
          return a - b
        }
        var e = [b[0], b[2], c[0], c[2]].sort(d),
          f = [b[1], b[3], c[1], c[3]].sort(d),
          h = [];
        b = a.normalizeRect(b);
        c = a.normalizeRect(c);
        if (e[0] === b[0] && e[1] === c[0] || e[0] === c[0] && e[1] ===
          b[0]) h[0] = e[1], h[2] = e[2];
        else return !1;
        if (f[0] === b[1] && f[1] === c[1] || f[0] === c[1] && f[1] ===
          b[1]) h[1] = f[1], h[3] = f[2];
        else return !1;
        return h
      };
      a.sign = function(a) {
        return 0 >
          a ? -1 : 1
      };
      a.concatenateToArray = function(a, b) {
        Array.prototype.push.apply(a, b)
      };
      a.prependToArray = function(a, b) {
        Array.prototype.unshift.apply(a, b)
      };
      a.extendObj = function(a, b) {
        for (var c in b) a[c] = b[c]
      };
      a.getInheritableProperty = function(a, b) {
        for (; a && !a.has(b);) a = a.get("Parent");
        return a ? a.get(b) : null
      };
      a.inherit = function(a, b, c) {
        a.prototype = Object.create(b.prototype);
        a.prototype.constructor = a;
        for (var d in c) a.prototype[d] = c[d]
      };
      a.loadScript = function(a, b) {
        var c = document.createElement("script"),
          d = !1;
        c.setAttribute("src",
          a);
        b && (c.onload = function() {
          d || b();
          d = !0
        });
        document.getElementsByTagName("head")[0].appendChild(c)
      };
      return a
    }();
  PDFJS.PageViewport = function() {
    function a(b, c, d, e, f, h) {
      this.viewBox = b;
      this.scale = c;
      this.rotation = d;
      this.offsetX = e;
      this.offsetY = f;
      var g = (b[2] + b[0]) / 2,
        k = (b[3] + b[1]) / 2,
        l, m, p;
      d %= 360;
      switch (0 > d ? d + 360 : d) {
        case 180:
          d = -1;
          m = l = 0;
          p = 1;
          break;
        case 90:
          d = 0;
          m = l = 1;
          p = 0;
          break;
        case 270:
          d = 0;
          m = l = -1;
          p = 0;
          break;
        default:
          d = 1, m = l = 0, p = -1
      }
      h && (m = -m, p = -p);
      0 === d ? (e = Math.abs(k - b[1]) * c + e, f = Math.abs(g - b[0]) *
        c + f, h = Math.abs(b[3] -
          b[1]) * c, b = Math.abs(b[2] - b[0]) * c) : (e = Math.abs(g -
        b[0]) * c + e, f = Math.abs(k - b[1]) * c + f, h = Math.abs(
        b[2] - b[0]) * c, b = Math.abs(b[3] - b[1]) * c);
      this.transform = [d * c, l * c, m * c, p * c, e - d * c * g - m *
        c * k, f - l * c * g - p * c * k
      ];
      this.width = h;
      this.height = b;
      this.fontScale = c
    }
    a.prototype = {
      clone: function(b) {
        b = b || {};
        var c = "scale" in b ? b.scale : this.scale,
          d = "rotation" in b ? b.rotation : this.rotation;
        return new a(this.viewBox.slice(), c, d, this.offsetX, this.offsetY,
          b.dontFlip)
      },
      convertToViewportPoint: function(a, b) {
        return G.applyTransform([a, b], this.transform)
      },
      convertToViewportRectangle: function(a) {
        var b = G.applyTransform([a[0], a[1]], this.transform);
        a = G.applyTransform([a[2], a[3]], this.transform);
        return [b[0], b[1], a[0], a[1]]
      },
      convertToPdfPoint: function(a, b) {
        return G.applyInverseTransform([a, b], this.transform)
      }
    };
    return a
  }();

  var J = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 728, 711, 710, 729, 733, 731, 730, 732, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    8226, 8224, 8225, 8230, 8212, 8211, 402, 8260, 8249, 8250, 8722,
    8240, 8222, 8220, 8221, 8216, 8217, 8218, 8482, 64257, 64258, 321,
    338, 352, 376, 381, 305, 322, 339, 353, 382, 0, 8364
  ];

  PDFJS.createPromiseCapability = u;
  (function() {
    function a(c) {
      this._status = b;
      this._handlers = [];
      try {
        c.call(this, this._resolve.bind(this), this._reject.bind(this))
      } catch (d) {
        this._reject(d)
      }
    }
    if (s.Promise) "function" !== typeof s.Promise.all && (s.Promise.all =
      function(a) {
        var b = 0,
          c = [],
          d, e, f = new s.Promise(function(a, b) {
            d =
              a;
            e = b
          });
        a.forEach(function(a, f) {
          b++;
          a.then(function(a) {
            c[f] = a;
            b--;
            0 === b && d(c)
          }, e)
        });
        0 === b && d(c);
        return f
      }), "function" !== typeof s.Promise.resolve && (s.Promise.resolve =
      function(a) {
        return new s.Promise(function(b) {
          b(a)
        })
      }), "function" !== typeof s.Promise.reject && (s.Promise.reject =
      function(a) {
        return new s.Promise(function(b, c) {
          c(a)
        })
      }), "function" !== typeof s.Promise.prototype["catch"] && (s.Promise
      .prototype["catch"] = function(a) {
        return s.Promise.prototype.then(void 0, a)
      });
    else {
      var b = 0,
        c = {
          handlers: [],
          running: !1,
          unhandledRejections: [],
          pendingRejectionCheck: !1,
          scheduleHandlers: function(a) {
            a._status != b && (this.handlers = this.handlers.concat(a._handlers),
              a._handlers = [], this.running || (this.running = !0,
                setTimeout(this.runHandlers.bind(this), 0)))
          },
          runHandlers: function() {
            for (var a = Date.now() + 1; 0 < this.handlers.length;) {
              var b = this.handlers.shift(),
                c = b.thisPromise._status,
                d = b.thisPromise._value;
              try {
                1 === c ? "function" == typeof b.onResolve && (d = b.onResolve(
                  d)) : "function" === typeof b.onReject && (d = b.onReject(
                    d), c = 1, b.thisPromise._unhandledRejection &&
                  this.removeUnhandeledRejection(b.thisPromise))
              } catch (e) {
                c = 2, d = e
              }
              b.nextPromise._updateStatus(c, d);
              if (Date.now() >= a) break
            }
            0 < this.handlers.length ? setTimeout(this.runHandlers.bind(
              this), 0) : this.running = !1
          },
          addUnhandledRejection: function(a) {
            this.unhandledRejections.push({
              promise: a,
              time: Date.now()
            });
            this.scheduleRejectionCheck()
          },
          removeUnhandeledRejection: function(a) {
            a._unhandledRejection = !1;
            for (var b = 0; b < this.unhandledRejections.length; b++)
              this.unhandledRejections[b].promise === a && (this.unhandledRejections
                .splice(b),
                b--)
          },
          scheduleRejectionCheck: function() {
            this.pendingRejectionCheck || (this.pendingRejectionCheck = !
              0, setTimeout(function() {
                this.pendingRejectionCheck = !1;
                for (var a = Date.now(), b = 0; b < this.unhandledRejections
                  .length; b++)
                  if (500 < a - this.unhandledRejections[b].time) {
                    var c = this.unhandledRejections[b].promise._value,
                      d = "Unhandled rejection: " + c;
                    c.stack && (d += "\n" + c.stack);
                    f(d);
                    this.unhandledRejections.splice(b);
                    b--
                  }
                this.unhandledRejections.length && this.scheduleRejectionCheck()
              }.bind(this), 500))
          }
        };
      a.all = function(b) {
        function c(a) {
          2 !==
            f._status && (g = [], e(a))
        }
        var d, e, f = new a(function(a, b) {
            d = a;
            e = b
          }),
          h = b.length,
          g = [];
        if (0 === h) return d(g), f;
        for (var k = 0, l = b.length; k < l; ++k) {
          var m = b[k],
            p = function(a) {
              return function(b) {
                2 !== f._status && (g[a] = b, h--, 0 === h && d(g))
              }
            }(k);
          a.isPromise(m) ? m.then(p, c) : p(m)
        }
        return f
      };
      a.isPromise = function(a) {
        return a && "function" === typeof a.then
      };
      a.resolve = function(b) {
        return new a(function(a) {
          a(b)
        })
      };
      a.reject = function(b) {
        return new a(function(a, c) {
          c(b)
        })
      };
      a.prototype = {
        _status: null,
        _value: null,
        _handlers: null,
        _unhandledRejection: null,
        _updateStatus: function(b, d) {
          1 !== this._status && 2 !== this._status && (1 == b && a.isPromise(
            d) ? d.then(this._updateStatus.bind(this, 1), this._updateStatus
            .bind(this, 2)) : (this._status = b, this._value = d, 2 ===
            b && 0 === this._handlers.length && (this._unhandledRejection = !
              0, c.addUnhandledRejection(this)), c.scheduleHandlers(
              this)))
        },
        _resolve: function(a) {
          this._updateStatus(1, a)
        },
        _reject: function(a) {
          this._updateStatus(2, a)
        },
        then: function(b, d) {
          var e = new a(function(a, b) {
            this.reject = this.resolve = b
          });
          this._handlers.push({
            thisPromise: this,
            onResolve: b,
            onReject: d,
            nextPromise: e
          });
          c.scheduleHandlers(this);
          return e
        },
        "catch": function(a) {
          return this.then(void 0, a)
        }
      };
      s.Promise = a
    }
  })();

  var N = function() {
    function a() {
      this.started = {};
      this.times = [];
      this.enabled = !0
    }
    a.prototype = {
      time: function(a) {
        this.enabled && (a in this.started && f(
            "Timer is already running for " + a), this.started[a] =
          Date.now())
      },
      timeEnd: function(a) {
        this.enabled && (a in this.started || f(
            "Timer has not been started for " + a), this.times.push({
            name: a,
            start: this.started[a],
            end: Date.now()
          }),
          delete this.started[a])
      },
      toString: function() {
        var a, b, c = this.times,
          d = "",
          e = 0;
        a = 0;
        for (b = c.length; a < b; ++a) {
          var f = c[a].name;
          f.length > e && (e = f.length)
        }
        a = 0;
        for (b = c.length; a < b; ++a) {
          for (var h = c[a], f = h.end - h.start, h = h.name; h.length <
            e;) h += " ";
          d += h + " " + f + "ms\n"
        }
        return d
      }
    };
    return a
  }();
  PDFJS.createBlob = function(a, b) {
    if ("undefined" !== typeof Blob) return new Blob([a], {
      type: b
    });
    var c = new MozBlobBuilder;
    c.append(a);
    return c.getBlob(b)
  };
  PDFJS.createObjectURL = function() {
    return function(a, b) {
      if (!PDFJS.disableCreateObjectURL &&
        "undefined" !== typeof URL && URL.createObjectURL) {
        var c = PDFJS.createBlob(a, b);
        return URL.createObjectURL(c)
      }
      for (var c = "data:" + b + ";base64,", d = 0, e = a.length; d <
        e; d += 3) var f = a[d] & 255,
        h = a[d + 1] & 255,
        g = a[d + 2] & 255,
        c = c + (
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" [
            f >> 2
          ] +
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" [
            (f & 3) << 4 | h >> 4
          ] +
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" [
            d + 1 < e ? (h & 15) << 2 | g >> 6 : 64
          ] +
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" [
            d +
            2 < e ? g & 63 : 64
          ]);
      return c
    }
  }();

  t.prototype = {
    on: function(a, b, c) {
      var e = this.actionHandler;
      e[a] && d('There is already an actionName called "' + a + '"');
      e[a] = [b, c]
    },
    send: function(a, b, c) {
      this.postMessage({
        action: a,
        data: b
      }, c)
    },
    sendWithPromise: function(a, b, c) {
      var d = this.callbackIndex++;
      a = {
        action: a,
        data: b,
        callbackId: d
      };
      b = u();
      this.callbacksCapabilities[d] = b;
      try {
        this.postMessage(a, c)
      } catch (e) {
        b.reject(e)
      }
      return b.promise
    },
    postMessage: function(a, b) {
      b && this.postMessageTransfers ? this.comObj.postMessage(a, b) :
        this.comObj.postMessage(a)
    }
  };

  var K = ["Link", "Text", "Widget"],
    O = function() {
      function a(b, c, d) {
        var e = G.getAxialAlignedBoundingBox(c, d);
        c = e[0];
        d = e[1];
        var f = e[2],
          e = e[3];
        if (c === f || d === e) return [1, 0, 0, 1, b[0], b[1]];
        f = (b[2] - b[0]) / (f - c);
        e = (b[3] - b[1]) / (e - d);
        return [f, 0, 0, e, b[0] - c * f, b[1] - d * e]
      }

      function b(a) {
        if (a.data) this.data = a.data;
        else {
          var c = a.dict,
            d = this.data = {};
          d.subtype = c.get("Subtype").name;
          var e = c.get("Rect") || [0, 0, 0, 0];
          d.rect = G.normalizeRect(e);
          d.annotationFlags = c.get("F");
          e = c.get("C");
          m(e) && 3 === e.length ? d.color = e : d.color = [0, 0, 0];
          if (c.has("BS")) e =
            c.get("BS"), d.borderWidth = e.has("W") ? e.get("W") : 1;
          else if (e = c.get("Border") || [0, 0, 1], d.borderWidth = e[2] ||
            0, e = e[3], 0 < d.borderWidth && e)
            if (m(e)) {
              var f = e.length;
              if (0 < f) {
                for (var h = !1, g = 0, k = 0; k < f; k++)
                  if (0 <= +e[k]) 0 < e[k] && g++;
                  else {
                    h = !0;
                    break
                  }
                if (h || 0 === g) d.borderWidth = 0
              }
            } else d.borderWidth = 0;
          var l, e = c.get("AP");
          w(e) ? (e = e.get("N"), w(e) ? (c = c.get("AS")) && e.has(c.name) &&
            (l = e.get(c.name)) : l = e) : l = void 0;
          this.appearance = l;
          d.hasAppearance = !!this.appearance;
          d.id = a.ref.num
        }
      }
      b.prototype = {
        getData: function() {
          return this.data
        },
        hasHtml: function() {
          return !1
        },
        getHtmlElement: function(a) {
          throw new E(
            "getHtmlElement() should be implemented in subclass");
        },
        getEmptyContainer: function(a, b, c) {
          z && d(
            "getEmptyContainer() should be called from main thread");
          c = c || 0;
          b = b || this.data.rect;
          a = document.createElement(a);
          a.style.borderWidth = c + "px";
          var e = b[3] - b[1] - 2 * c;
          a.style.width = b[2] - b[0] - 2 * c + "px";
          a.style.height = e + "px";
          return a
        },
        isInvisible: function() {
          var a = this.data;
          return a && -1 !== K.indexOf(a.subtype) ? !1 : !!(a && a.annotationFlags &&
            a.annotationFlags &
            1)
        },
        isViewable: function() {
          var a = this.data;
          return !(this.isInvisible() || !a || a.annotationFlags && a.annotationFlags &
            34 || !a.rect)
        },
        isPrintable: function() {
          var a = this.data;
          return !!(!this.isInvisible() && a && a.annotationFlags && a.annotationFlags &
            4 && a.rect)
        },
        loadResources: function(a) {
          return new Promise(function(b, c) {
            this.appearance.dict.getAsync("Resources").then(function(
              d) {
              d ? (new ObjectLoader(d.map, a, d.xref)).load().then(
                function() {
                  b(d)
                }, c) : b()
            }, c)
          }.bind(this))
        },
        getOperatorList: function(b) {
          if (!this.appearance) return Promise.resolve(new OperatorList);
          var c = this.data,
            d = this.appearance.dict,
            e = this.loadResources(
              "ExtGState ColorSpace Pattern Shading XObject Font".split(
                " ")),
            f = d.get("BBox") || [0, 0, 1, 1],
            h = d.get("Matrix") || [1, 0, 0, 1, 0, 0],
            g = a(c.rect, f, h),
            k = this;
          return e.then(function(a) {
            var d = new OperatorList;
            d.addOp(B.beginAnnotation, [c.rect, g, h]);
            return b.getOperatorList(k.appearance, a, d).then(function() {
              d.addOp(B.endAnnotation, []);
              k.appearance.reset();
              return d
            })
          })
        }
      };
      b.getConstructor = function(a, c) {
        if (a) {
          if ("Link" === a) return U;
          if ("Text" === a) return Q;
          if ("Widget" === a) {
            if (c) return "Tx" === c ? L : V
          } else return b
        }
      };
      b.fromData = function(a) {
        var c = b.getConstructor(a.subtype, a.fieldType);
        if (c) return new c({
          data: a
        })
      };
      b.fromRef = function(a, c) {
        var d = a.fetchIfRef(c);
        if (w(d)) {
          var e = d.get("Subtype");
          if (e = p(e) ? e.name : "") {
            var h = G.getInheritableProperty(d, "FT"),
              h = p(h) ? h.name : "";
            if (h = b.getConstructor(e, h)) {
              d = new h({
                dict: d,
                ref: c
              });
              if (d.isViewable() || d.isPrintable()) return d;
              f("unimplemented annotation type: " + e)
            }
          }
        }
      };
      b.appendToOperatorList = function(a, b, c, d, e) {
        var f = u();
        c = [];
        for (var h = 0, g = a.length; h < g; ++h)("display" === e && a[
          h].isViewable() || "print" === e && a[h].isPrintable()) && c.push(
          a[h].getOperatorList(d));
        Promise.all(c).then(function(a) {
          b.addOp(B.beginAnnotations, []);
          for (var c = 0, d = a.length; c < d; ++c) b.addOpList(a[c]);
          b.addOp(B.endAnnotations, []);
          f.resolve()
        }, function(a) {
          f.reject(a)
        });
        return f.promise
      };
      return b
    }();
  PDFJS.Annotation = O;

  var V = function() {
      function a(b) {
        O.call(this, b);
        if (!b.data) {
          var d = b.dict,
            e = this.data;
          e.fieldValue = c(G.getInheritableProperty(d, "V") || "");
          e.alternativeText = c(d.get("TU") || "");
          e.defaultAppearance = G.getInheritableProperty(d, "DA") || "";
          var f = G.getInheritableProperty(d, "FT");
          e.fieldType = p(f) ? f.name : "";
          e.fieldFlags = G.getInheritableProperty(d, "Ff") || 0;
          this.fieldResources = G.getInheritableProperty(d, "DR") ||
            Dict.empty;
          var f = [],
            h = d;
          for (b = b.ref; h;) {
            var d = h.get("Parent"),
              g = h.getRaw("Parent");
            if (h = h.get("T")) f.unshift(c(h));
            else {
              var h = d.get("Kids"),
                k, l;
              k = 0;
              for (l = h.length; k < l; k++) {
                var m = h[k];
                if (m.num == b.num && m.gen == b.gen) break
              }
              f.unshift("`" + k)
            }
            h =
              d;
            b = g
          }
          e.fullName = f.join(".")
        }
      }
      var b = O.prototype;
      G.inherit(a, O, {
        isViewable: function() {
          return "Sig" === this.data.fieldType ? (f(
              "unimplemented annotation type: Widget signature"), !1) :
            b.isViewable.call(this)
        }
      });
      return a
    }(),
    L = function() {
      function a(b) {
        V.call(this, b);
        b.data || (this.data.textAlignment = G.getInheritableProperty(b
          .dict, "Q"))
      }
      G.inherit(a, V, {
        hasHtml: function() {
          return !this.data.hasAppearance && !!this.data.fieldValue
        },
        getHtmlElement: function(a) {
          z && d("getHtmlElement() shall be called from main thread");
          var b = this.data,
            c = this.getEmptyContainer("div");
          c.style.display = "table";
          var e = document.createElement("div");
          e.textContent = b.fieldValue;
          e.style.textAlign = ["left", "center", "right"][b.textAlignment];
          e.style.verticalAlign = "middle";
          e.style.display = "table-cell";
          a = b.fontRefName ? a.getData(b.fontRefName) : null;
          var f = e.style;
          f.fontSize = b.fontSize + "px";
          f.direction = 0 > b.fontDirection ? "rtl" : "ltr";
          a && (f.fontWeight = a.black ? a.bold ? "bolder" : "bold" :
            a.bold ? "bold" : "normal", f.fontStyle = a.italic ?
            "italic" : "normal", b = a.loadedName,
            f.fontFamily = (b ? '"' + b + '", ' : "") + (a.fallbackName ||
              "Helvetica, sans-serif"));
          c.appendChild(e);
          return c
        },
        getOperatorList: function(a) {
          if (this.appearance) return O.prototype.getOperatorList.call(
            this, a);
          var c = new OperatorList,
            d = this.data;
          if (!d.defaultAppearance) return Promise.resolve(c);
          d = new Stream(b(d.defaultAppearance));
          return a.getOperatorList(d, this.fieldResources, c).then(
            function() {
              return c
            })
        }
      });
      return a
    }(),
    T = function() {
      function a(b) {
        O.call(this, b)
      }
      G.inherit(a, O, {
        hasHtml: function() {
          return !0
        },
        highlight: function() {
          this.highlightElement &&
            this.highlightElement.hasAttribute("hidden") && this.highlightElement
            .removeAttribute("hidden")
        },
        unhighlight: function() {
          this.highlightElement && !this.highlightElement.hasAttribute(
            "hidden") && this.highlightElement.setAttribute("hidden", !
            0)
        },
        initContainer: function() {
          for (var a = this.data, b = this.getEmptyContainer("section",
                a.rect, a.borderWidth), c = b.style.backgroundColor = a.color,
              d = [], e = 0; 3 > e; ++e) d[e] = Math.round(255 * c[e]);
          a.colorCssRgb = G.makeCssRgb(d);
          a = document.createElement("div");
          a.className = "annotationHighlight";
          a.style.left = a.style.top = "-4px";
          a.style.right = a.style.bottom = "-4px";
          a.setAttribute("hidden", !0);
          this.highlightElement = a;
          b.appendChild(this.highlightElement);
          return b
        }
      });
      return a
    }(),
    Q = function() {
      function a(b) {
        T.call(this, b);
        if (!b.data) {
          b = b.dict;
          var d = this.data,
            e = b.get("Contents"),
            f = b.get("T");
          d.content = c(e || "");
          d.title = c(f || "");
          d.hasAppearance ? d.name = "NoIcon" : (d.rect[1] = d.rect[3] -
            22, d.rect[2] = d.rect[0] + 22, d.name = b.has("Name") ? b.get(
              "Name").name : "Note");
          b.has("C") && (d.hasBgColor = !0)
        }
      }
      G.inherit(a, T, {
        getHtmlElement: function(a) {
          z && d("getHtmlElement() shall be called from main thread");
          var b = this.data,
            c = b.rect;
          10 > c[3] - c[1] && (c[3] = c[1] + 10);
          10 > c[2] - c[0] && (c[2] = c[0] + (c[3] - c[1]));
          var e = this.initContainer();
          e.className = "annotText";
          a = document.createElement("img");
          a.style.height = e.style.height;
          a.style.width = e.style.width;
          var f = b.name;
          a.src = PDFJS.imageResourcesPath + "annotation-" + f.toLowerCase() +
            ".svg";
          a.alt = "[{{type}} Annotation]";
          a.dataset.l10nId = "text_annotation_type";
          a.dataset.l10nArgs = JSON.stringify({
            type: f
          });
          f = document.createElement("div");
          f.className = "annotTextContentWrapper";
          f.style.left = Math.floor(c[2] - c[0] + 5) + "px";
          f.style.top = "-10px";
          var h = document.createElement("div");
          h.className = "annotTextContent";
          h.setAttribute("hidden", !0);
          if (b.hasBgColor) {
            for (var g = b.color, k = [], c = 0; 3 > c; ++c) {
              var l = Math.round(255 * g[c]);
              k[c] = Math.round(.7 * (255 - l)) + l
            }
            h.style.backgroundColor = G.makeCssRgb(k)
          }
          g = document.createElement("h1");
          k = document.createElement("p");
          g.textContent = b.title;
          if (b.content || b.title) {
            for (var l = document.createElement("span"),
                m = b.content.split(/(?:\r\n?|\n)/), c = 0, b = m.length; c <
              b; ++c) l.appendChild(document.createTextNode(m[c])), c <
              b - 1 && l.appendChild(document.createElement("br"));
            k.appendChild(l);
            var p = !1,
              r = function(a) {
                a && (p = !0);
                h.hasAttribute("hidden") && (e.style.zIndex += 1, h.removeAttribute(
                  "hidden"))
              },
              q = function(a) {
                a && (p = !1);
                h.hasAttribute("hidden") || p || (e.style.zIndex -= 1, h.setAttribute(
                  "hidden", !0))
              };
            a.addEventListener("click", function() {
              p ? q(!0) : r(!0)
            }, !1);
            a.addEventListener("mouseover", function() {
              r()
            }, !1);
            a.addEventListener("mouseout",
              function() {
                q()
              }, !1);
            h.addEventListener("click", function() {
              q(!0)
            }, !1)
          } else h.setAttribute("hidden", !0);
          h.appendChild(g);
          h.appendChild(k);
          f.appendChild(h);
          e.appendChild(a);
          e.appendChild(f);
          return e
        }
      });
      return a
    }(),
    U = function() {
      function a(b) {
        T.call(this, b);
        if (!b.data) {
          var c = b.dict;
          b = this.data;
          var d = c.get("A");
          if (d)
            if (c = d.get("S").name, "URI" === c) {
              var e = d.get("URI");
              p(e) ? e = "/" + e.name : e && (e = e && 0 === e.indexOf(
                "www.") ? "http://" + e : e);
              q(e, !1) || (e = "");
              b.url = e
            } else "GoTo" === c ? b.dest = d.get("D") : "GoToR" === c ? (
              c = d.get("F"),
              w(c) && (e = c.get("F") || ""), q(e, !1) || (e = ""), b.url =
              e, b.dest = d.get("D")) : "Named" === c ? b.action = d.get(
              "N").name : f("unrecognized link type: " + c);
          else c.has("Dest") && (e = c.get("Dest"), b.dest = p(e) ? e.name :
            e)
        }
      }
      G.inherit(a, T, {
        hasOperatorList: function() {
          return !1
        },
        getHtmlElement: function(a) {
          a = this.initContainer();
          a.className = "annotLink";
          a.style.borderColor = this.data.colorCssRgb;
          a.style.borderStyle = "solid";
          var b = document.createElement("a");
          b.href = b.title = this.data.url || "";
          a.appendChild(b);
          return a
        }
      });
      return a
    }();

  PDFJS.maxImageSize = void 0 === PDFJS.maxImageSize ? -1 : PDFJS.maxImageSize;
  PDFJS.cMapUrl = void 0 === PDFJS.cMapUrl ? null : PDFJS.cMapUrl;
  PDFJS.cMapPacked = void 0 === PDFJS.cMapPacked ? !1 : PDFJS.cMapPacked;
  PDFJS.disableFontFace = void 0 === PDFJS.disableFontFace ? !1 : PDFJS.disableFontFace;
  PDFJS.imageResourcesPath = void 0 === PDFJS.imageResourcesPath ? "" : PDFJS.imageResourcesPath;
  PDFJS.disableWorker = void 0 === PDFJS.disableWorker ? !1 : PDFJS.disableWorker;
  PDFJS.workerSrc = void 0 === PDFJS.workerSrc ? null : PDFJS.workerSrc;
  PDFJS.disableRange = void 0 === PDFJS.disableRange ? !1 : PDFJS.disableRange;
  PDFJS.disableAutoFetch = void 0 === PDFJS.disableAutoFetch ? !1 : PDFJS.disableAutoFetch;
  PDFJS.pdfBug = void 0 === PDFJS.pdfBug ? !1 : PDFJS.pdfBug;
  PDFJS.postMessageTransfers = void 0 === PDFJS.postMessageTransfers ? !0 : PDFJS.postMessageTransfers;
  PDFJS.disableCreateObjectURL = void 0 === PDFJS.disableCreateObjectURL ? !1 : PDFJS.disableCreateObjectURL;
  PDFJS.disableWebGL = void 0 === PDFJS.disableWebGL ? !0 : PDFJS.disableWebGL;
  PDFJS.verbosity = void 0 === PDFJS.verbosity ? PDFJS.VERBOSITY_LEVELS .warnings : PDFJS.verbosity;
  PDFJS.getDocument = function(a, b, c, f) {
    var h, g;
    "string" === typeof a ? a = {
        url: a
      } : "object" == typeof a && null !== a && void 0 !== a &&
      "byteLength" in a ? a = {
        data: a
      } : "object" !== typeof a && d(
        "Invalid parameter in getDocument, need either Uint8Array, string or a parameter object"
      );
    a.url || a.data || d(
      "Invalid parameter array, need either .data or .url");
    var k = {};
    for (h in a) k[h] = "url" === h && "undefined" !== typeof window ?
      e(window.location.href, a[h]) : a[h];
    a = u();
    h = u();
    g = new R(a, h, b, f);
    a.promise.then(function() {
      g.passwordCallback =
        c;
      g.fetchDocument(k)
    });
    return h.promise
  };

  var da = function() {
      function a(b, c) {
        this.pdfInfo = b;
        this.transport = c
      }
      a.prototype = {get numPages() {
          return this.pdfInfo.numPages
        },
        get fingerprint() {
          return this.pdfInfo.fingerprint
        },
        getPage: function(a) {
          return this.transport.getPage(a)
        },
        getPageIndex: function(a) {
          return this.transport.getPageIndex(a)
        },
        getDestinations: function() {
          return this.transport.getDestinations()
        },
        getAttachments: function() {
          return this.transport.getAttachments()
        },
        getJavaScript: function() {
          return this.transport.getJavaScript()
        },
        getOutline: function() {
          return this.transport.getOutline()
        },
        getMetadata: function() {
          return this.transport.getMetadata()
        },
        getData: function() {
          return this.transport.getData()
        },
        getDownloadInfo: function() {
          return this.transport.downloadInfoCapability.promise
        },
        cleanup: function() {
          this.transport.startCleanup()
        },
        destroy: function() {
          this.transport.destroy()
        }
      };
      return a
    }(),
    aa = function() {
      function a(b, c, d) {
        this.pageIndex = b;
        this.pageInfo = c;
        this.transport = d;
        this.stats = new N;
        this.stats.enabled = !!s.PDFJS.enableStats;
        this.commonObjs =
          d.commonObjs;
        this.objs = new ea;
        this.pendingDestroy = this.cleanupAfterRender = !1;
        this.intentStates = {}
      }
      a.prototype = {get pageNumber() {
          return this.pageIndex + 1
        },
        get rotate() {
          return this.pageInfo.rotate
        },
        get ref() {
          return this.pageInfo.ref
        },
        get view() {
          return this.pageInfo.view
        },
        getViewport: function(a, b) {
          2 > arguments.length && (b = this.rotate);
          return new PDFJS.PageViewport(this.view, a, b, 0, 0)
        },
        getAnnotations: function() {
          return this.annotationsPromise ? this.annotationsPromise :
            this.annotationsPromise = this.transport.getAnnotations(this
              .pageIndex)
        },
        render: function(a) {
          function b(a) {
            var d = e.renderTasks.indexOf(f);
            0 <= d && e.renderTasks.splice(d, 1);
            h.cleanupAfterRender && (h.pendingDestroy = !0);
            h._tryDestroy();
            a ? f.capability.reject(a) : f.capability.resolve();
            c.timeEnd("Rendering");
            c.timeEnd("Overall")
          }
          var c = this.stats;
          c.time("Overall");
          this.pendingDestroy = !1;
          var d = "intent" in a ? "print" == a.intent ? "print" :
            "display" : "display";
          this.intentStates[d] || (this.intentStates[d] = {});
          var e = this.intentStates[d];
          e.displayReadyCapability || (e.receivingOperatorList = !0, e.displayReadyCapability =
            u(), e.operatorList = {
              fnArray: [],
              argsArray: [],
              lastChunk: !1
            }, this.stats.time("Page Request"), this.transport.messageHandler
            .send("RenderPageRequest", {
              pageIndex: this.pageNumber - 1,
              intent: d
            }));
          var f = new ga(b, a, this.objs, this.commonObjs, e.operatorList,
            this.pageNumber);
          e.renderTasks || (e.renderTasks = []);
          e.renderTasks.push(f);
          a = new Z(f);
          var h = this;
          e.displayReadyCapability.promise.then(function(a) {
            h.pendingDestroy ? b() : (c.time("Rendering"), f.initalizeGraphics(
              a), f.operatorListChanged())
          }, function(a) {
            b(a)
          });
          return a
        },
        getTextContent: function() {
          return this.transport.messageHandler.sendWithPromise(
            "GetTextContent", {
              pageIndex: this.pageNumber - 1
            })
        },
        destroy: function() {
          this.pendingDestroy = !0;
          this._tryDestroy()
        },
        _tryDestroy: function() {
          this.pendingDestroy && !Object.keys(this.intentStates).some(
            function(a) {
              a = this.intentStates[a];
              return 0 !== a.renderTasks.length || a.receivingOperatorList
            }, this) && (Object.keys(this.intentStates).forEach(
              function(a) {
                delete this.intentStates[a]
              }, this), this.objs.clear(), this.annotationsPromise =
            null,
            this.pendingDestroy = !1)
        },
        _startRenderPage: function(a, b) {
          this.intentStates[b].displayReadyCapability.resolve(a)
        },
        _renderPageChunk: function(a, b) {
          var c = this.intentStates[b],
            d, e;
          d = 0;
          for (e = a.length; d < e; d++) c.operatorList.fnArray.push(a.fnArray[
            d]), c.operatorList.argsArray.push(a.argsArray[d]);
          c.operatorList.lastChunk = a.lastChunk;
          for (d = 0; d < c.renderTasks.length; d++) c.renderTasks[d].operatorListChanged();
          a.lastChunk && (c.receivingOperatorList = !1, this._tryDestroy())
        }
      };
      return a
    }(),
    R = function() {
      function a(b,
        c, e, f) {
        this.pdfDataRangeTransport = e;
        this.workerReadyCapability = c;
        this.progressCallback = f;
        this.commonObjs = new ea;
        this.pageCache = [];
        this.pagePromises = [];
        this.downloadInfoCapability = u();
        this.passwordCallback = null;
        if (!s.PDFJS.disableWorker && "undefined" !== typeof Worker) {
          (c = PDFJS.workerSrc) || d("No PDFJS.workerSrc specified");
          try {
            var h = new Worker(c),
              k = new t("main", h);
            this.messageHandler = k;
            k.on("test", function(a) {
              a && a.supportTypedArray ? (this.worker = h, a.supportTransfers ||
                (PDFJS.postMessageTransfers = !1), this.setupMessageHandler(
                  k),
                b.resolve()) : (s.PDFJS.disableWorker = !0, this.loadFakeWorkerFiles()
                .then(function() {
                  this.setupFakeWorker();
                  b.resolve()
                }.bind(this)))
            }.bind(this));
            var l = new Uint8Array([PDFJS.postMessageTransfers ? 255 : 0]);
            try {
              k.send("test", l, [l.buffer])
            } catch (m) {
              g("Cannot use postMessage transfers"), l[0] = 0, k.send(
                "test", l)
            }
            return
          } catch (p) {
            g("The worker has been disabled.")
          }
        }
        s.PDFJS.disableWorker = !0;
        this.loadFakeWorkerFiles().then(function() {
          this.setupFakeWorker();
          b.resolve()
        }.bind(this))
      }
      a.prototype = {
        destroy: function() {
          this.pageCache = [];
          this.pagePromises = [];
          var a = this;
          this.messageHandler.sendWithPromise("Terminate", null).then(
            function() {
              X.clear();
              a.worker && a.worker.terminate()
            })
        },
        loadFakeWorkerFiles: function() {
          PDFJS.fakeWorkerFilesLoadedCapability || (PDFJS.fakeWorkerFilesLoadedCapability =
            u(), G.loadScript(PDFJS.workerSrc));
          return PDFJS.fakeWorkerFilesLoadedCapability.promise
        },
        setupFakeWorker: function() {
          f("Setting up fake worker.");
          var a = {
              postMessage: function(b) {
                a.onmessage({
                  data: b
                })
              },
              terminate: function() {}
            },
            b = new t("main", a);
          this.setupMessageHandler(b);
          PDFJS.WorkerMessageHandler.setup(b)
        },
        setupMessageHandler: function(a) {
          function b(c) {
            a.send("UpdatePassword", c)
          }
          this.messageHandler = a;
          var c = this.pdfDataRangeTransport;
          c && (c.addRangeListener(function(b, c) {
            a.send("OnDataRange", {
              begin: b,
              chunk: c
            })
          }), c.addProgressListener(function(b) {
            a.send("OnDataProgress", {
              loaded: b
            })
          }), a.on("RequestDataRange", function(a) {
            c.requestDataRange(a.begin, a.end)
          }, this));
          a.on("GetDoc", function(a) {
            var b = a.pdfInfo;
            this.numPages = a.pdfInfo.numPages;
            this.pdfDocument = a = new da(b, this);
            this.workerReadyCapability.resolve(a)
          }, this);
          a.on("NeedPassword", function(a) {
            if (this.passwordCallback) return this.passwordCallback(b,
              F.NEED_PASSWORD);
            this.workerReadyCapability.reject(a.exception.message, a.exception)
          }, this);
          a.on("IncorrectPassword", function(a) {
            if (this.passwordCallback) return this.passwordCallback(b,
              F.INCORRECT_PASSWORD);
            this.workerReadyCapability.reject(a.exception.message, a.exception)
          }, this);
          a.on("InvalidPDF", function(a) {
              this.workerReadyCapability.reject(a.exception.name, a.exception)
            },
            this);
          a.on("MissingPDF", function(a) {
            this.workerReadyCapability.reject(a.exception.message, a.exception)
          }, this);
          a.on("UnknownError", function(a) {
            this.workerReadyCapability.reject(a.exception.message, a.exception)
          }, this);
          a.on("DataLoaded", function(a) {
            this.downloadInfoCapability.resolve(a)
          }, this);
          a.on("StartRenderPage", function(a) {
            var b = this.pageCache[a.pageIndex];
            b.stats.timeEnd("Page Request");
            b._startRenderPage(a.transparency, a.intent)
          }, this);
          a.on("RenderPageChunk", function(a) {
            this.pageCache[a.pageIndex]._renderPageChunk(a.operatorList,
              a.intent)
          }, this);
          a.on("commonobj", function(a) {
            var b = a[0],
              c = a[1];
            if (!this.commonObjs.hasData(b)) switch (c) {
              case "Font":
                a = a[2];
                var d;
                if ("error" in a) {
                  var e = a.error;
                  f("Error during font loading: " + e);
                  this.commonObjs.resolve(b, e);
                  break
                } else d = new oa(a);
                X.bind([d], function(a) {
                  this.commonObjs.resolve(b, d)
                }.bind(this));
                break;
              case "FontPath":
                this.commonObjs.resolve(b, a[2]);
                break;
              default:
                e("Got unknown common object type " + c)
            }
          }, this);
          a.on("obj", function(a) {
            var b = a[0],
              c = a[2],
              e = this.pageCache[a[1]];
            if (!e.objs.hasData(b)) switch (c) {
              case "JpegStream":
                a =
                  a[3];
                h(b, a, e.objs);
                break;
              case "Image":
                a = a[3];
                e.objs.resolve(b, a);
                a && "data" in a && 8E6 < a.data.length && (e.cleanupAfterRender = !
                  0);
                break;
              default:
                d("Got unknown object type " + c)
            }
          }, this);
          a.on("DocProgress", function(a) {
            this.progressCallback && this.progressCallback({
              loaded: a.loaded,
              total: a.total
            })
          }, this);
          a.on("DocError", function(a) {
            this.workerReadyCapability.reject(a)
          }, this);
          a.on("PageError", function(a) {
            var b = this.pageCache[a.pageNum - 1].intentStates[a.intent];
            b.displayReadyCapability.promise ? b.displayReadyCapability
              .reject(a.error) :
              d(a.error)
          }, this);
          a.on("JpegDecode", function(a) {
            var b = a[0],
              c = a[1];
            return 3 != c && 1 != c ? Promise.reject(Error(
                "Only 3 components or 1 component can be returned")) :
              new Promise(function(a, d) {
                var e = new Image;
                e.onload = function() {
                  var b = e.width,
                    d = e.height,
                    f = b * d,
                    h = 4 * f,
                    f = new Uint8Array(f * c),
                    g = r(b, d).getContext("2d");
                  g.drawImage(e, 0, 0);
                  var g = g.getImageData(0, 0, b, d).data,
                    k, l;
                  if (3 == c)
                    for (l = k = 0; k < h; k += 4, l += 3) f[l] = g[k],
                      f[l + 1] = g[k + 1], f[l + 2] = g[k + 2];
                  else if (1 == c)
                    for (l = k = 0; k < h; k += 4, l++) f[l] = g[k];
                  a({
                    data: f,
                    width: b,
                    height: d
                  })
                };
                e.onerror = function() {
                  d(Error("JpegDecode failed to load image"))
                };
                e.src = b
              })
          })
        },
        fetchDocument: function(a) {
          a.disableAutoFetch = PDFJS.disableAutoFetch;
          a.chunkedViewerLoading = !!this.pdfDataRangeTransport;
          this.messageHandler.send("GetDocRequest", {
            source: a,
            disableRange: PDFJS.disableRange,
            maxImageSize: PDFJS.maxImageSize,
            cMapUrl: PDFJS.cMapUrl,
            cMapPacked: PDFJS.cMapPacked,
            disableFontFace: PDFJS.disableFontFace,
            disableCreateObjectURL: PDFJS.disableCreateObjectURL,
            verbosity: PDFJS.verbosity
          })
        },
        getData: function() {
          return this.messageHandler.sendWithPromise("GetData",
            null)
        },
        getPage: function(a, b) {
          if (0 >= a || a > this.numPages || (a | 0) !== a) return
          Promise.reject(Error("Invalid page request"));
          var c = a - 1;
          if (c in this.pagePromises) return this.pagePromises[c];
          var d = this.messageHandler.sendWithPromise("GetPage", {
            pageIndex: c
          }).then(function(a) {
            a = new aa(c, a, this);
            return this.pageCache[c] = a
          }.bind(this));
          return this.pagePromises[c] = d
        },
        getPageIndex: function(a) {
          return this.messageHandler.sendWithPromise("GetPageIndex", {
            ref: a
          })
        },
        getAnnotations: function(a) {
          return this.messageHandler.sendWithPromise("GetAnnotations", {
            pageIndex: a
          })
        },
        getDestinations: function() {
          return this.messageHandler.sendWithPromise("GetDestinations",
            null)
        },
        getAttachments: function() {
          return this.messageHandler.sendWithPromise("GetAttachments",
            null)
        },
        getJavaScript: function() {
          return this.messageHandler.sendWithPromise("GetJavaScript",
            null)
        },
        getOutline: function() {
          return this.messageHandler.sendWithPromise("GetOutline", null)
        },
        getMetadata: function() {
          return this.messageHandler.sendWithPromise("GetMetadata",
            null).then(function(a) {
            return {
              info: a[0],
              metadata: a[1] ?
                new PDFJS.Metadata(a[1]) : null
            }
          })
        },
        startCleanup: function() {
          this.messageHandler.sendWithPromise("Cleanup", null).then(
            function() {
              for (var a = 0, b = this.pageCache.length; a < b; a++) {
                var c = this.pageCache[a];
                c && c.destroy()
              }
              this.commonObjs.clear();
              X.clear()
            }.bind(this))
        }
      };
      return a
    }(),
    ea = function() {
      function a() {
        this.objs = {}
      }
      a.prototype = {
        ensureObj: function(a) {
          if (this.objs[a]) return this.objs[a];
          var b = {
            capability: u(),
            data: null,
            resolved: !1
          };
          return this.objs[a] = b
        },
        get: function(a, b) {
          if (b) return this.ensureObj(a).capability.promise.then(b),
            null;
          var c = this.objs[a];
          c && c.resolved || d(
            "Requesting object that isn't resolved yet " + a);
          return c.data
        },
        resolve: function(a, b) {
          var c = this.ensureObj(a);
          c.resolved = !0;
          c.data = b;
          c.capability.resolve(b)
        },
        isResolved: function(a) {
          var b = this.objs;
          return b[a] ? b[a].resolved : !1
        },
        hasData: function(a) {
          return this.isResolved(a)
        },
        getData: function(a) {
          var b = this.objs;
          return b[a] && b[a].resolved ? b[a].data : null
        },
        clear: function() {
          this.objs = {}
        }
      };
      return a
    }(),
    Z = function() {
      function a(b) {
        this.internalRenderTask = b;
        this.promise =
          this.internalRenderTask.capability.promise
      }
      a.prototype = {
        cancel: function() {
          this.internalRenderTask.cancel()
        },
        then: function(a, b) {
          return this.promise.then(a, b)
        }
      };
      return a
    }(),
    ga = function() {
      function a(b, c, d, e, f, h) {
        this.callback = b;
        this.params = c;
        this.objs = d;
        this.commonObjs = e;
        this.operatorListIdx = null;
        this.operatorList = f;
        this.pageNumber = h;
        this.running = !1;
        this.graphicsReadyCallback = null;
        this.cancelled = this.graphicsReady = !1;
        this.capability = u();
        this._continueBound = this._continue.bind(this);
        this._scheduleNextBound =
          this._scheduleNext.bind(this);
        this._nextBound = this._next.bind(this)
      }
      a.prototype = {
        initalizeGraphics: function(a) {
          if (!this.cancelled) {
            PDFJS.pdfBug && "StepperManager" in s && s.StepperManager.enabled &&
              (this.stepper = s.StepperManager.create(this.pageNumber - 1),
                this.stepper.init(this.operatorList), this.stepper.nextBreakPoint =
                this.stepper.getNextBreakPoint());
            var b = this.params;
            this.gfx = new ua(b.canvasContext, this.commonObjs, this.objs,
              b.imageLayer);
            this.gfx.beginDrawing(b.viewport, a);
            this.operatorListIdx = 0;
            this.graphicsReady = !0;
            this.graphicsReadyCallback && this.graphicsReadyCallback()
          }
        },
        cancel: function() {
          this.running = !1;
          this.cancelled = !0;
          this.callback("cancelled")
        },
        operatorListChanged: function() {
          this.graphicsReady ? (this.stepper && this.stepper.updateOperatorList(
              this.operatorList), this.running || this._continue()) :
            this.graphicsReadyCallback || (this.graphicsReadyCallback =
              this._continueBound)
        },
        _continue: function() {
          this.running = !0;
          this.cancelled || (this.params.continueCallback ? this.params
            .continueCallback(this._scheduleNextBound) :
            this._scheduleNext())
        },
        _scheduleNext: function() {
          window.requestAnimationFrame(this._nextBound)
        },
        _next: function() {
          this.cancelled || (this.operatorListIdx = this.gfx.executeOperatorList(
              this.operatorList, this.operatorListIdx, this._continueBound,
              this.stepper), this.operatorListIdx === this.operatorList.argsArray
            .length && (this.running = !1, this.operatorList.lastChunk &&
              (this.gfx.endDrawing(), this.callback())))
        }
      };
      return a
    }();
  PDFJS.Metadata = function() {
    function a(b) {
      return b.replace(/>\\376\\377([^<]+)/g, function(a,
        b) {
        for (var c = b.replace(/\\([0-3])([0-7])([0-7])/g, function(
            a, b, c, d) {
            return String.fromCharCode(64 * b + 8 * c + 1 * d)
          }), d = "", e = 0; e < c.length; e += 2) var f = 256 * c.charCodeAt(
            e) + c.charCodeAt(e + 1),
          d = d + ("&#x" + (65536 + f).toString(16).substring(1) +
            ";");
        return ">" + d
      })
    }

    function b(c) {
      "string" === typeof c ? (c = a(c), c = (new DOMParser).parseFromString(
        c, "application/xml")) : c instanceof Document || d(
        "Metadata: Invalid metadata object");
      this.metaDocument = c;
      this.metadata = {};
      this.parse()
    }
    b.prototype = {
      parse: function() {
        var a = this.metaDocument.documentElement;
        if ("rdf:rdf" !== a.nodeName.toLowerCase())
          for (a = a.firstChild; a && "rdf:rdf" !== a.nodeName.toLowerCase();)
            a = a.nextSibling;
        var b = a ? a.nodeName.toLowerCase() : null;
        if (a && "rdf:rdf" === b && a.hasChildNodes()) {
          var a = a.childNodes,
            c, d, e, f, h, g;
          e = 0;
          for (h = a.length; e < h; e++)
            if (b = a[e], "rdf:description" === b.nodeName.toLowerCase())
              for (f = 0, g = b.childNodes.length; f < g; f++) "#text" !==
                b.childNodes[f].nodeName.toLowerCase() && (c = b.childNodes[
                    f], d = c.nodeName.toLowerCase(), this.metadata[d] = c.textContent
                  .trim())
        }
      },
      get: function(a) {
        return this.metadata[a] ||
          null
      },
      has: function(a) {
        return "undefined" !== typeof this.metadata[a]
      }
    };
    return b
  }();

  var W = function() {
      var a = {};
      return {
        getCanvas: function(b, c, d, e) {
          b in a ? (b = a[b], b.canvas.width = c, b.canvas.height = d, b
            .context.setTransform(1, 0, 0, 1, 0, 0)) : (c = r(c, d), d =
            c.getContext("2d"), e && k(d), a[b] = b = {
              canvas: c,
              context: d
            });
          return b
        },
        clear: function() {
          a = {}
        }
      }
    }(),
    ma = function() {
      function a(b) {
        this.alphaIsShape = !1;
        this.fontSize = 0;
        this.fontSizeScale = 1;
        this.textMatrix = P;
        this.fontMatrix = y;
        this.wordSpacing = this.charSpacing = this.lineY = this.lineX =
          this.y = this.x = this.leading = 0;
        this.textHScale = 1;
        this.textRise = this.textRenderingMode = 0;
        this.strokeColor = this.fillColor = "#000000";
        this.lineWidth = this.strokeAlpha = this.fillAlpha = 1;
        this.activeSMask = null;
        this.old = b
      }
      a.prototype = {
        clone: function() {
          return Object.create(this)
        },
        setCurrentPoint: function(a, b) {
          this.x = a;
          this.y = b
        }
      };
      return a
    }(),
    ua = function() {
      function a(b, c, d, e) {
        this.ctx = b;
        this.current = new ma;
        this.stateStack = [];
        this.pendingClip = null;
        this.pendingEOFill = !1;
        this.xobjs = this.res = null;
        this.commonObjs = c;
        this.objs = d;
        this.imageLayer = e;
        this.groupStack = [];
        this.baseTransform = this.processingType3 = null;
        this.baseTransformStack = [];
        this.groupLevel = 0;
        this.smaskStack = [];
        this.smaskCounter = 0;
        this.tempSMask = null;
        b && k(b)
      }

      function b(a, c) {
        if ("undefined" !== typeof ImageData && c instanceof ImageData)
          a.putImageData(c, 0, 0);
        else {
          var e = c.height,
            f = c.width,
            h = e / 16,
            g = Math.floor(h),
            h = Math.ceil(h),
            e = e - 16 * g,
            k = a.createImageData(f, 16),
            l = 0,
            m, p = c.data,
            r = k.data,
            q, s, t;
          if (1 === c.kind) {
            var v = p.byteLength,
              r = PDFJS.hasCanvasTypedArrays ? new Uint32Array(r.buffer) :
              new D(r),
              u = r.length,
              x = f + 7 >> 3,
              w = PDFJS.isLittleEndian || !PDFJS.hasCanvasTypedArrays ?
              4278190080 : 255;
            for (q = 0; q < h; q++) {
              t = q < g ? 16 : e;
              for (s = m = 0; s < t; s++) {
                for (var z = v - l, y = 0, z = z > x ? f : 8 * z - 7, A = z &
                    -8, B = 0, C = 0; y < A; y += 8) C = p[l++], r[m++] = C &
                  128 ? 4294967295 : w, r[m++] = C & 64 ? 4294967295 : w, r[
                    m++] = C & 32 ? 4294967295 : w, r[m++] = C & 16 ?
                  4294967295 : w, r[m++] = C & 8 ? 4294967295 : w, r[m++] =
                  C & 4 ? 4294967295 : w, r[m++] = C & 2 ? 4294967295 : w, r[
                    m++] = C & 1 ? 4294967295 : w;
                for (; y < z; y++) 0 === B && (C = p[l++], B = 128), r[m++] =
                  C & B ? 4294967295 : w, B >>= 1
              }
              for (; m < u;) r[m++] = 0;
              a.putImageData(k,
                0, 16 * q)
            }
          } else if (3 === c.kind) {
            s = 0;
            t = 64 * f;
            for (q = 0; q < g; q++) r.set(p.subarray(l, l + t)), l += t,
              a.putImageData(k, 0, s), s += 16;
            q < h && (r.set(p.subarray(l, l + f * e * 4)), a.putImageData(
              k, 0, s))
          } else if (2 === c.kind)
            for (t = 16 * f, q = 0; q < h; q++) {
              q >= g && (t = e, t *= f);
              m = 0;
              for (s = t; s--;) r[m++] = p[l++], r[m++] = p[l++], r[m++] =
                p[l++], r[m++] = 255;
              a.putImageData(k, 0, 16 * q)
            } else d("bad image kind: " + c.kind)
        }
      }

      function c(a, b) {
        for (var d = b.height, e = b.width, f = d / 16, h = Math.floor(
              f), f = Math.ceil(f), d = d - 16 * h, g = a.createImageData(
              e, 16), k = 0, l = b.data, m = g.data,
            p = 0; p < f; p++) {
          for (var r = p < h ? 16 : d, q = 3, s = 0; s < r; s++)
            for (var t = 0, v = 0; v < e; v++) {
              if (!t) var u = l[k++],
                t = 128;
              m[q] = u & t ? 0 : 255;
              q += 4;
              t >>= 1
            }
          a.putImageData(g, 0, 16 * p)
        }
      }

      function e(a, b) {
        for (var c =
            "strokeStyle fillStyle fillRule globalAlpha lineWidth lineCap lineJoin miterLimit globalCompositeOperation font"
            .split(" "), d = 0, f = c.length; d < f; d++) {
          var h = c[d];
          h in a && (b[h] = a[h])
        }
        "setLineDash" in a ? (b.setLineDash(a.getLineDash()), b.lineDashOffset =
          a.lineDashOffset) : "mozDash" in a && (b.mozDash = a.mozDash,
          b.mozDashOffset = a.mozDashOffset)
      }

      function h(a, b, c, d, e, f) {
        f = f ? function(a, b, c, d) {
          for (var e = d.length, f = 3; f < e; f += 4) {
            var h = d[f] / 255;
            if (0 === h) d[f - 3] = a, d[f - 2] = b, d[f - 1] = c;
            else if (1 > h) {
              var g = 1 - h;
              d[f - 3] = d[f - 3] * h + a * g | 0;
              d[f - 2] = d[f - 2] * h + b * g | 0;
              d[f - 1] = d[f - 1] * h + c * g | 0
            }
          }
        }.bind(null, f[0], f[1], f[2]) : function() {};
        e = "Luminosity" === e ? function(a, b) {
          for (var c = a.length, d = 3; d < c; d += 4) b[d] = b[d] * (
            77 * a[d - 3] + 152 * a[d - 2] + 28 * a[d - 1] | 0) >> 16
        } : function(a, b) {
          for (var c = a.length, d = 3; d < c; d += 4) b[d] = b[d] * a[
            d] / 255 | 0
        };
        for (var g = Math.min(d, Math.ceil(65536 / c)), k = 0; k < d; k +=
          g) {
          var l =
            Math.min(g, d - k),
            m = a.getImageData(0, k, c, l),
            l = b.getImageData(0, k, c, l);
          f(m.data);
          e(m.data, l.data);
          a.putImageData(l, 0, k)
        }
      }
      var p = ["butt", "round", "square"],
        r = ["miter", "round", "bevel"],
        q = {},
        s = {};
      a.prototype = {
        beginDrawing: function(a, b) {
          var c = this.ctx.canvas.width,
            d = this.ctx.canvas.height;
          b ? this.ctx.clearRect(0, 0, c, d) : (this.ctx.mozOpaque = !0,
            this.ctx.save(), this.ctx.fillStyle = "rgb(255, 255, 255)",
            this.ctx.fillRect(0, 0, c, d), this.ctx.restore());
          c = a.transform;
          this.ctx.save();
          this.ctx.transform.apply(this.ctx,
            c);
          this.baseTransform = this.ctx.mozCurrentTransform.slice();
          this.imageLayer && this.imageLayer.beginLayout()
        },
        executeOperatorList: function(a, b, c, d) {
          var e = a.argsArray;
          a = a.fnArray;
          b = b || 0;
          var f = e.length;
          if (f == b) return b;
          for (var h = Date.now() + 15, g = this.commonObjs, k = this.objs,
              l;;) {
            if (d && b === d.nextBreakPoint) return d.breakIt(b, c), b;
            l = a[b];
            if (l !== B.dependency) this[l].apply(this, e[b]);
            else {
              l = e[b];
              for (var m = 0, p = l.length; m < p; m++) {
                var r = l[m],
                  q = "g_" == r.substring(0, 2);
                if (!q && !k.isResolved(r)) return k.get(r, c), b;
                if (q &&
                  !g.isResolved(r)) return g.get(r, c), b
              }
            }
            b++;
            if (b == f) return b;
            if (c && Date.now() > h) return c(), b
          }
        },
        endDrawing: function() {
          this.ctx.restore();
          W.clear();
          ja.clear();
          this.imageLayer && this.imageLayer.endLayout()
        },
        setLineWidth: function(a) {
          this.current.lineWidth = a;
          this.ctx.lineWidth = a
        },
        setLineCap: function(a) {
          this.ctx.lineCap = p[a]
        },
        setLineJoin: function(a) {
          this.ctx.lineJoin = r[a]
        },
        setMiterLimit: function(a) {
          this.ctx.miterLimit = a
        },
        setDash: function(a, b) {
          var c = this.ctx;
          "setLineDash" in c ? (c.setLineDash(a), c.lineDashOffset =
            b) : (c.mozDash = a, c.mozDashOffset = b)
        },
        setRenderingIntent: function(a) {},
        setFlatness: function(a) {},
        setGState: function(a) {
          for (var b = 0, c = a.length; b < c; b++) {
            var d = a[b],
              e = d[1];
            switch (d[0]) {
              case "LW":
                this.setLineWidth(e);
                break;
              case "LC":
                this.setLineCap(e);
                break;
              case "LJ":
                this.setLineJoin(e);
                break;
              case "ML":
                this.setMiterLimit(e);
                break;
              case "D":
                this.setDash(e[0], e[1]);
                break;
              case "RI":
                this.setRenderingIntent(e);
                break;
              case "FL":
                this.setFlatness(e);
                break;
              case "Font":
                this.setFont(e[0], e[1]);
                break;
              case "CA":
                this.current.strokeAlpha =
                  d[1];
                break;
              case "ca":
                this.current.fillAlpha = d[1];
                this.ctx.globalAlpha = d[1];
                break;
              case "BM":
                e && e.name && "Normal" !== e.name ? (d = e.name.replace(
                    /([A-Z])/g,
                    function(a) {
                      return "-" + a.toLowerCase()
                    }).substring(1), this.ctx.globalCompositeOperation = d,
                  this.ctx.globalCompositeOperation !== d && f(
                    'globalCompositeOperation "' + d + '" is not supported'
                  )) : this.ctx.globalCompositeOperation = "source-over";
                break;
              case "SMask":
                this.current.activeSMask && this.endSMaskGroup(), this.current
                  .activeSMask = e ? this.tempSMask : null, this.current.activeSMask &&
                  this.beginSMaskGroup(), this.tempSMask = null
            }
          }
        },
        beginSMaskGroup: function() {
          var a = this.current.activeSMask,
            b = W.getCanvas("smaskGroupAt" + this.groupLevel, a.canvas.width,
              a.canvas.height, !0),
            c = this.ctx,
            d = c.mozCurrentTransform;
          this.ctx.save();
          b = b.context;
          b.scale(1 / a.scaleX, 1 / a.scaleY);
          b.translate(-a.offsetX, -a.offsetY);
          b.transform.apply(b, d);
          e(c, b);
          this.ctx = b;
          this.setGState([
            ["BM", "Normal"],
            ["ca", 1],
            ["CA", 1]
          ]);
          this.groupStack.push(c);
          this.groupLevel++
        },
        endSMaskGroup: function() {
          var a = this.ctx;
          this.groupLevel--;
          var b = this.ctx = this.groupStack.pop(),
            c = this.current.activeSMask,
            d = c.canvas,
            e = c.context;
          b.setTransform(c.scaleX, 0, 0, c.scaleY, c.offsetX, c.offsetY);
          var f = c.backdrop || null;
          ja.isEnabled ? (a = ja.composeSMask(a.canvas, d, {
            subtype: c.subtype,
            backdrop: f
          }), b.setTransform(1, 0, 0, 1, 0, 0), b.drawImage(a, c.offsetX,
            c.offsetY)) : (h(e, a, d.width, d.height, c.subtype, f), b.drawImage(
            d, 0, 0));
          this.ctx.restore()
        },
        save: function() {
          this.ctx.save();
          var a = this.current;
          this.stateStack.push(a);
          this.current = a.clone();
          this.current.activeSMask &&
            (this.current.activeSMask = null)
        },
        restore: function() {
          var a = this.stateStack.pop();
          a && (this.current.activeSMask && this.endSMaskGroup(), this.current =
            a, this.ctx.restore())
        },
        transform: function(a, b, c, d, e, f) {
          this.ctx.transform(a, b, c, d, e, f)
        },
        constructPath: function(a, b) {
          for (var c = this.ctx, d = this.current, e = d.x, f = d.y, h =
              0, g = 0, k = a.length; h < k; h++) switch (a[h] | 0) {
            case B.moveTo:
              e = b[g++];
              f = b[g++];
              c.moveTo(e, f);
              break;
            case B.lineTo:
              e = b[g++];
              f = b[g++];
              c.lineTo(e, f);
              break;
            case B.curveTo:
              e = b[g + 4];
              f = b[g + 5];
              c.bezierCurveTo(b[g],
                b[g + 1], b[g + 2], b[g + 3], e, f);
              g += 6;
              break;
            case B.curveTo2:
              c.bezierCurveTo(e, f, b[g], b[g + 1], b[g + 2], b[g + 3]);
              e = b[g + 2];
              f = b[g + 3];
              g += 4;
              break;
            case B.curveTo3:
              e = b[g + 2];
              f = b[g + 3];
              c.bezierCurveTo(b[g], b[g + 1], e, f, e, f);
              g += 4;
              break;
            case B.closePath:
              c.closePath()
          }
          d.setCurrentPoint(e, f)
        },
        closePath: function() {
          this.ctx.closePath()
        },
        rectangle: function(a, b, c, d) {
          0 === c && (c = this.getSinglePixelWidth());
          0 === d && (d = this.getSinglePixelWidth());
          this.ctx.rect(a, b, c, d)
        },
        stroke: function(a) {
          a = "undefined" !== typeof a ? a : !0;
          var b = this.ctx,
            c = this.current.strokeColor;
          0 === this.current.lineWidth && (b.lineWidth = this.getSinglePixelWidth());
          b.globalAlpha = this.current.strokeAlpha;
          c && c.hasOwnProperty("type") && "Pattern" === c.type ? (b.save(),
            b.strokeStyle = c.getPattern(b, this), b.stroke(), b.restore()
          ) : b.stroke();
          a && this.consumePath();
          b.globalAlpha = this.current.fillAlpha
        },
        closeStroke: function() {
          this.closePath();
          this.stroke()
        },
        fill: function(a) {
          a = "undefined" !== typeof a ? a : !0;
          var b = this.ctx,
            c = this.current.fillColor,
            d = !1;
          c && c.hasOwnProperty("type") && "Pattern" ===
            c.type && (b.save(), b.fillStyle = c.getPattern(b, this), d = !
              0);
          if (this.pendingEOFill) {
            if (void 0 !== b.mozFillRule) b.mozFillRule = "evenodd", b.fill(),
              b.mozFillRule = "nonzero";
            else try {
              b.fill("evenodd")
            } catch (e) {
              b.fill()
            }
            this.pendingEOFill = !1
          } else b.fill();
          d && b.restore();
          a && this.consumePath()
        },
        eoFill: function() {
          this.pendingEOFill = !0;
          this.fill()
        },
        fillStroke: function() {
          this.fill(!1);
          this.stroke(!1);
          this.consumePath()
        },
        eoFillStroke: function() {
          this.pendingEOFill = !0;
          this.fillStroke()
        },
        closeFillStroke: function() {
          this.closePath();
          this.fillStroke()
        },
        closeEOFillStroke: function() {
          this.pendingEOFill = !0;
          this.closePath();
          this.fillStroke()
        },
        endPath: function() {
          this.consumePath()
        },
        clip: function() {
          this.pendingClip = q
        },
        eoClip: function() {
          this.pendingClip = s
        },
        beginText: function() {
          this.current.textMatrix = P;
          this.current.x = this.current.lineX = 0;
          this.current.y = this.current.lineY = 0
        },
        endText: function() {
          var a = this.pendingTextPaths,
            b = this.ctx;
          if (void 0 === a) b.beginPath();
          else {
            b.save();
            b.beginPath();
            for (var c = 0; c < a.length; c++) {
              var d = a[c];
              b.setTransform.apply(b,
                d.transform);
              b.translate(d.x, d.y);
              d.addToPath(b, d.fontSize)
            }
            b.restore();
            b.clip();
            b.beginPath();
            delete this.pendingTextPaths
          }
        },
        setCharSpacing: function(a) {
          this.current.charSpacing = a
        },
        setWordSpacing: function(a) {
          this.current.wordSpacing = a
        },
        setHScale: function(a) {
          this.current.textHScale = a / 100
        },
        setLeading: function(a) {
          this.current.leading = -a
        },
        setFont: function(a, b) {
          var c = this.commonObjs.get(a),
            e = this.current;
          c || d("Can't find font for " + a);
          e.fontMatrix = c.fontMatrix ? c.fontMatrix : y;
          0 !== e.fontMatrix[0] && 0 !== e.fontMatrix[3] ||
            f("Invalid font matrix for font " + a);
          0 > b ? (b = -b, e.fontDirection = -1) : e.fontDirection = 1;
          this.current.font = c;
          this.current.fontSize = b;
          if (!c.isType3Font) {
            var e = c.black ? c.bold ? "bolder" : "bold" : c.bold ?
              "bold" : "normal",
              h = c.italic ? "italic" : "normal",
              c = '"' + (c.loadedName || "sans-serif") + '", ' + c.fallbackName,
              g = 16 <= b ? b : 16;
            this.current.fontSizeScale = 16 != g ? 1 : b / 16;
            this.ctx.font = h + " " + e + " " + g + "px " + c
          }
        },
        setTextRenderingMode: function(a) {
          this.current.textRenderingMode = a
        },
        setTextRise: function(a) {
          this.current.textRise = a
        },
        moveText: function(a,
          b) {
          this.current.x = this.current.lineX += a;
          this.current.y = this.current.lineY += b
        },
        setLeadingMoveText: function(a, b) {
          this.setLeading(-b);
          this.moveText(a, b)
        },
        setTextMatrix: function(a, b, c, d, e, f) {
          this.current.textMatrix = [a, b, c, d, e, f];
          this.current.x = this.current.lineX = 0;
          this.current.y = this.current.lineY = 0
        },
        nextLine: function() {
          this.moveText(0, this.current.leading)
        },
        applyTextTransforms: function() {
          var a = this.ctx,
            b = this.current;
          a.transform.apply(a, b.textMatrix);
          a.translate(b.x, b.y + b.textRise);
          0 < b.fontDirection ?
            a.scale(b.textHScale, -1) : a.scale(-b.textHScale, 1)
        },
        paintChar: function(a, b, c) {
          var d = this.ctx,
            e = this.current,
            f = e.font,
            h = e.fontSize / e.fontSizeScale,
            g = e.textRenderingMode,
            e = g & 3,
            g = !!(g & 4),
            k;
          if (f.disableFontFace || g) k = f.getPathGenerator(this.commonObjs,
            a);
          f.disableFontFace ? (d.save(), d.translate(b, c), d.beginPath(),
            k(d, h), 0 !== e && 2 !== e || d.fill(), 1 !== e && 2 !== e ||
            d.stroke(), d.restore()) : (0 !== e && 2 !== e || d.fillText(
            a, b, c), 1 !== e && 2 !== e || d.strokeText(a, b, c));
          g && (this.pendingTextPaths || (this.pendingTextPaths = [])).push({
            transform: d.mozCurrentTransform,
            x: b,
            y: c,
            fontSize: h,
            addToPath: k
          })
        },
        get isFontSubpixelAAEnabled() {
          var a = document.createElement("canvas").getContext("2d");
          a.scale(1.5, 1);
          a.fillText("I", 0, 10);
          for (var a = a.getImageData(0, 0, 10, 10).data, b = !1, c = 3; c <
            a.length; c += 4)
            if (0 < a[c] && 255 > a[c]) {
              b = !0;
              break
            }
          return l(this, "isFontSubpixelAAEnabled", b)
        },
        showText: function(a) {
          var b = this.ctx,
            c = this.current,
            d = c.font,
            e = c.fontSize,
            f = c.fontSizeScale,
            h = c.charSpacing,
            g = c.wordSpacing,
            k = c.textHScale * c.fontDirection,
            l = c.fontMatrix || y,
            m = a.length,
            p = d.vertical,
            r = d.defaultVMetrics,
            q, s, t;
          if (0 !== e)
            if (d.isType3Font) {
              b.save();
              b.transform.apply(b, c.textMatrix);
              b.translate(c.x, c.y);
              b.scale(k, 1);
              for (q = 0; q < m; ++q) s = a[q], null === s ? (this.ctx.translate(
                g, 0), c.x += g * k) : (this.processingType3 = s, this.save(),
                b.scale(e, e), b.transform.apply(b, l), this.executeOperatorList(
                  d.charProcOperatorList[s.operatorListId]), this.restore(),
                t = (G.applyTransform([s.width, 0], l)[0] * e + h) * c.fontDirection,
                b.translate(t, 0), c.x += t * k);
              b.restore();
              this.processingType3 = null
            } else {
              b.save();
              this.applyTextTransforms();
              q = c.lineWidth;
              var l = c.textMatrix[0],
                v = c.textMatrix[1],
                l = Math.sqrt(l * l + v * v);
              q = 0 === l || 0 === q ? this.getSinglePixelWidth() : q / l;
              1 != f && (b.scale(f, f), q /= f);
              b.lineWidth = q;
              for (q = l = 0; q < m; ++q)
                if (s = a[q], null === s) l += c.fontDirection * g;
                else {
                  var v = !1,
                    u = s.fontChar,
                    x = s.vmetric || r;
                  if (p) var w = s.vmetric ? x[1] : .5 * s.width,
                    w = -w * e * c.fontMatrix[0],
                    z = x[2] * e * c.fontMatrix[0];
                  t = x ? -x[0] : s.width;
                  x = t * e * c.fontMatrix[0] + h * c.fontDirection;
                  s = s.accent;
                  var A, B, C;
                  p ? (A = w / f, B = (l + z) / f) : (A = l / f, B = 0);
                  d.remeasure && 0 < t && this.isFontSubpixelAAEnabled && (
                    v = 1E3 * b.measureText(u).width /
                    c.fontSize * c.fontSizeScale, t /= v, v = !0, b.save(),
                    b.scale(t, 1), A /= t, s && (C /= t));
                  this.paintChar(u, A, B);
                  s && (C = A + s.offset.x / f, u = B - s.offset.y / f,
                    this.paintChar(s.fontChar, C, u));
                  l += x;
                  v && b.restore()
                }
              p ? c.y -= l * k : c.x += l * k;
              b.restore()
            }
        },
        showSpacedText: function(a) {
          for (var b = this.current, c = b.fontSize, d = .001 * b.textHScale *
              b.fontDirection, e = a.length, f = b.font.vertical, h = 0; h <
            e; ++h) {
            var g = a[h];
            "number" == typeof g ? (g = -g * c * d, f ? b.y += g : b.x +=
              g) : this.showText(g)
          }
        },
        nextLineShowText: function(a) {
          this.nextLine();
          this.showText(a)
        },
        nextLineSetSpacingShowText: function(a, b, c) {
          this.setWordSpacing(a);
          this.setCharSpacing(b);
          this.nextLineShowText(c)
        },
        setCharWidth: function(a, b) {},
        setCharWidthAndBounds: function(a, b, c, d, e, f) {
          this.rectangle(c, d, e - c, f - d);
          this.clip();
          this.endPath()
        },
        getColorN_Pattern: function(a) {
          return "TilingPattern" == a[0] ? new va(a, a[1], this.ctx,
            this.objs, this.commonObjs, this.baseTransform) : x(a)
        },
        setStrokeColorN: function() {
          this.current.strokeColor = this.getColorN_Pattern(arguments)
        },
        setFillColorN: function() {
          this.current.fillColor =
            this.getColorN_Pattern(arguments)
        },
        setStrokeRGBColor: function(a, b, c) {
          var d = G.makeCssRgb(arguments);
          this.ctx.strokeStyle = d;
          this.current.strokeColor = d
        },
        setFillRGBColor: function(a, b, c) {
          var d = G.makeCssRgb(arguments);
          this.ctx.fillStyle = d;
          this.current.fillColor = d
        },
        shadingFill: function(a) {
          var b = this.ctx;
          this.save();
          a = x(a);
          b.fillStyle = a.getPattern(b, this, !0);
          var c = b.mozCurrentTransformInverse;
          if (c) {
            var b = b.canvas,
              d = b.width,
              e = b.height,
              b = G.applyTransform([0, 0], c);
            a = G.applyTransform([0, e], c);
            var f = G.applyTransform([d,
                0
              ], c),
              h = G.applyTransform([d, e], c),
              c = Math.min(b[0], a[0], f[0], h[0]),
              d = Math.min(b[1], a[1], f[1], h[1]),
              e = Math.max(b[0], a[0], f[0], h[0]),
              b = Math.max(b[1], a[1], f[1], h[1]);
            this.ctx.fillRect(c, d, e - c, b - d)
          } else this.ctx.fillRect(-1E10, -1E10, 2E10, 2E10);
          this.restore()
        },
        beginInlineImage: function() {
          d("Should not call beginInlineImage")
        },
        beginImageData: function() {
          d("Should not call beginImageData")
        },
        paintFormXObjectBegin: function(a, b) {
          this.save();
          this.baseTransformStack.push(this.baseTransform);
          a && m(a) && 6 == a.length &&
            this.transform.apply(this, a);
          this.baseTransform = this.ctx.mozCurrentTransform;
          b && m(b) && 4 == b.length && (this.rectangle(b[0], b[1], b[2] -
            b[0], b[3] - b[1]), this.clip(), this.endPath())
        },
        paintFormXObjectEnd: function() {
          this.restore();
          this.baseTransform = this.baseTransformStack.pop()
        },
        beginGroup: function(a) {
          this.save();
          var b = this.ctx;
          a.isolated || g("TODO: Support non-isolated groups.");
          a.knockout && f("Knockout groups not supported.");
          var c = b.mozCurrentTransform;
          a.matrix && b.transform.apply(b, a.matrix);
          a.bbox || d("Bounding box is required.");
          var h = G.getAxialAlignedBoundingBox(a.bbox, b.mozCurrentTransform),
            h = G.intersect(h, [0, 0, b.canvas.width, b.canvas.height]) || [
              0, 0, 0, 0
            ],
            k = Math.floor(h[0]),
            l = Math.floor(h[1]),
            m = Math.max(Math.ceil(h[2]) - k, 1),
            p = Math.max(Math.ceil(h[3]) - l, 1),
            r = h = 1;
          4096 < m && (h = m / 4096, m = 4096);
          4096 < p && (r = p / 4096, p = 4096);
          var q = "groupAt" + this.groupLevel;
          a.smask && (q += "_smask_" + this.smaskCounter++ % 2);
          m = W.getCanvas(q, m, p, !0);
          p = m.context;
          p.scale(1 / h, 1 / r);
          p.translate(-k, -l);
          p.transform.apply(p, c);
          a.smask ? this.smaskStack.push({
            canvas: m.canvas,
            context: p,
            offsetX: k,
            offsetY: l,
            scaleX: h,
            scaleY: r,
            subtype: a.smask.subtype,
            backdrop: a.smask.backdrop
          }) : (b.setTransform(1, 0, 0, 1, 0, 0), b.translate(k, l), b
            .scale(h, r));
          e(b, p);
          this.ctx = p;
          this.setGState([
            ["BM", "Normal"],
            ["ca", 1],
            ["CA", 1]
          ]);
          this.groupStack.push(b);
          this.groupLevel++
        },
        endGroup: function(a) {
          this.groupLevel--;
          var b = this.ctx;
          this.ctx = this.groupStack.pop();
          void 0 !== this.ctx.imageSmoothingEnabled ? this.ctx.imageSmoothingEnabled = !
            1 : this.ctx.mozImageSmoothingEnabled = !1;
          a.smask ? this.tempSMask = this.smaskStack.pop() :
            this.ctx.drawImage(b.canvas, 0, 0);
          this.restore()
        },
        beginAnnotations: function() {
          this.save();
          this.current = new ma
        },
        endAnnotations: function() {
          this.restore()
        },
        beginAnnotation: function(a, b, c) {
          this.save();
          a && m(a) && 4 == a.length && (this.rectangle(a[0], a[1], a[2] -
            a[0], a[3] - a[1]), this.clip(), this.endPath());
          this.transform.apply(this, b);
          this.transform.apply(this, c)
        },
        endAnnotation: function() {
          this.restore()
        },
        paintJpegXObject: function(a, b, c) {
          var d = this.objs.get(a);
          if (d) {
            this.save();
            var e = this.ctx;
            e.scale(1 / b, -1 / c);
            e.drawImage(d,
              0, 0, d.width, d.height, 0, -c, b, c);
            this.imageLayer && (d = e.mozCurrentTransformInverse, e =
              this.getCanvasPosition(0, 0), this.imageLayer.appendImage({
                objId: a,
                left: e[0],
                top: e[1],
                width: b / d[0],
                height: c / d[3]
              }));
            this.restore()
          } else f("Dependent image isn't ready yet")
        },
        paintImageMaskXObject: function(a) {
          var b = this.ctx,
            d = a.width,
            e = a.height,
            f = this.processingType3;
          !f || "compiled" in f || (f.compiled = 1E3 >= d && 1E3 >= e ?
            v({
              data: a.data,
              width: d,
              height: e
            }) : null);
          f && f.compiled ? f.compiled(b) : (b = W.getCanvas(
              "maskCanvas", d, e), f = b.context,
            f.save(), c(f, a), f.globalCompositeOperation = "source-in",
            a = this.current.fillColor, f.fillStyle = a && a.hasOwnProperty(
              "type") && "Pattern" === a.type ? a.getPattern(f, this) :
            a, f.fillRect(0, 0, d, e), f.restore(), this.paintInlineImageXObject(
              b.canvas))
        },
        paintImageMaskXObjectRepeat: function(a, b, d, e) {
          var f = a.width,
            h = a.height,
            g = this.ctx,
            k = W.getCanvas("maskCanvas", f, h),
            l = k.context;
          l.save();
          c(l, a);
          l.globalCompositeOperation = "source-in";
          a = this.current.fillColor;
          l.fillStyle = a && a.hasOwnProperty("type") && "Pattern" ===
            a.type ?
            a.getPattern(l, this) : a;
          l.fillRect(0, 0, f, h);
          l.restore();
          l = 0;
          for (a = e.length; l < a; l += 2) g.save(), g.transform(b, 0,
            0, d, e[l], e[l + 1]), g.scale(1, -1), g.drawImage(k.canvas,
            0, 0, f, h, 0, -1, 1, 1), g.restore()
        },
        paintImageMaskXObjectGroup: function(a) {
          for (var b = this.ctx, d = 0, e = a.length; d < e; d++) {
            var f = a[d],
              h = f.width,
              g = f.height,
              k = W.getCanvas("maskCanvas", h, g),
              l = k.context;
            l.save();
            c(l, f);
            l.globalCompositeOperation = "source-in";
            var m = this.current.fillColor;
            l.fillStyle = m && m.hasOwnProperty("type") && "Pattern" ===
              m.type ? m.getPattern(l,
                this) : m;
            l.fillRect(0, 0, h, g);
            l.restore();
            b.save();
            b.transform.apply(b, f.transform);
            b.scale(1, -1);
            b.drawImage(k.canvas, 0, 0, h, g, 0, -1, 1, 1);
            b.restore()
          }
        },
        paintImageXObject: function(a) {
          (a = this.objs.get(a)) ? this.paintInlineImageXObject(a): f(
            "Dependent image isn't ready yet")
        },
        paintImageXObjectRepeat: function(a, b, c, d) {
          if (a = this.objs.get(a)) {
            for (var e = a.width, h = a.height, g = [], k = 0, l = d.length; k <
              l; k += 2) g.push({
              transform: [b, 0, 0, c, d[k], d[k + 1]],
              x: 0,
              y: 0,
              w: e,
              h: h
            });
            this.paintInlineImageXObjectGroup(a, g)
          } else f("Dependent image isn't ready yet")
        },
        paintInlineImageXObject: function(a) {
          var c = a.width,
            d = a.height,
            e = this.ctx;
          this.save();
          e.scale(1 / c, -1 / d);
          var f = e.mozCurrentTransformInverse,
            h = f[0],
            g = f[1],
            h = Math.max(Math.sqrt(h * h + g * g), 1),
            g = f[2],
            k = f[3],
            g = Math.max(Math.sqrt(g * g + k * k), 1),
            l;
          if (a instanceof HTMLElement || !a.data) k = a;
          else {
            l = W.getCanvas("inlineImage", c, d);
            var m = l.context;
            b(m, a);
            k = l.canvas
          }
          for (var p = c, r = d, q = "prescale1"; 2 < h && 1 < p || 2 <
            g && 1 < r;) {
            var s = p,
              t = r;
            2 < h && 1 < p && (s = Math.ceil(p / 2), h /= p / s);
            2 < g && 1 < r && (t = Math.ceil(r / 2), g /= r / t);
            l = W.getCanvas(q, s, t);
            m = l.context;
            m.clearRect(0, 0, s, t);
            m.drawImage(k, 0, 0, p, r, 0, 0, s, t);
            k = l.canvas;
            p = s;
            r = t;
            q = "prescale1" === q ? "prescale2" : "prescale1"
          }
          e.drawImage(k, 0, 0, p, r, 0, -d, c, d);
          this.imageLayer && (e = this.getCanvasPosition(0, -d), this.imageLayer
            .appendImage({
              imgData: a,
              left: e[0],
              top: e[1],
              width: c / f[0],
              height: d / f[3]
            }));
          this.restore()
        },
        paintInlineImageXObjectGroup: function(a, c) {
          var d = this.ctx,
            e = a.width,
            f = a.height,
            h = W.getCanvas("inlineImage", e, f);
          b(h.context, a);
          for (var g = 0, k = c.length; g < k; g++) {
            var l = c[g];
            d.save();
            d.transform.apply(d,
              l.transform);
            d.scale(1, -1);
            d.drawImage(h.canvas, l.x, l.y, l.w, l.h, 0, -1, 1, 1);
            this.imageLayer && (l = this.getCanvasPosition(l.x, l.y),
              this.imageLayer.appendImage({
                imgData: a,
                left: l[0],
                top: l[1],
                width: e,
                height: f
              }));
            d.restore()
          }
        },
        paintSolidColorImageMask: function() {
          this.ctx.fillRect(0, 0, 1, 1)
        },
        markPoint: function(a) {},
        markPointProps: function(a, b) {},
        beginMarkedContent: function(a) {},
        beginMarkedContentProps: function(a, b) {},
        endMarkedContent: function() {},
        beginCompat: function() {},
        endCompat: function() {},
        consumePath: function() {
          var a =
            this.ctx;
          if (this.pendingClip) {
            if (this.pendingClip == s)
              if (void 0 !== a.mozFillRule) a.mozFillRule = "evenodd", a.clip(),
                a.mozFillRule = "nonzero";
              else try {
                a.clip("evenodd")
              } catch (b) {
                a.clip()
              } else a.clip();
            this.pendingClip = null
          }
          a.beginPath()
        },
        getSinglePixelWidth: function(a) {
          a = this.ctx.mozCurrentTransformInverse;
          return Math.sqrt(Math.max(a[0] * a[0] + a[1] * a[1], a[2] * a[
            2] + a[3] * a[3]))
        },
        getCanvasPosition: function(a, b) {
          var c = this.ctx.mozCurrentTransform;
          return [c[0] * a + c[2] * b + c[4], c[1] * a + c[3] * b + c[5]]
        }
      };
      for (var t in B) a.prototype[B[t]] =
        a.prototype[t];
      return a
    }(),
    ja = function() {
      function a(b, c, d) {
        d = b.createShader(d);
        b.shaderSource(d, c);
        b.compileShader(d);
        if (!b.getShaderParameter(d, b.COMPILE_STATUS)) throw b = b.getShaderInfoLog(
          d), Error("Error during shader compilation: " + b);
        return d
      }

      function b(a, c) {
        for (var d = a.createProgram(), e = 0, f = c.length; e < f; ++e)
          a.attachShader(d, c[e]);
        a.linkProgram(d);
        if (!a.getProgramParameter(d, a.LINK_STATUS)) throw d = a.getProgramInfoLog(
          d), Error("Error during program linking: " + d);
        return d
      }

      function c(a, b, d) {
        a.activeTexture(d);
        d = a.createTexture();
        a.bindTexture(a.TEXTURE_2D, d);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.NEAREST);
        a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE,
          b);
        return d
      }

      function d() {
        e || (f = document.createElement("canvas"), e = f.getContext(
          "webgl", {
            premultipliedalpha: !1
          }))
      }
      var e, f, h = null,
        g = null;
      return {get isEnabled() {
          if (PDFJS.disableWebGL) return !1;
          var a = !1;
          try {
            d(), a = !!e
          } catch (b) {}
          return l(this, "isEnabled", a)
        },
        composeSMask: function(g, k, l) {
          var m = g.width,
            p = g.height;
          if (!h) {
            var r, q;
            d();
            r = f;
            f = null;
            q = e;
            e = null;
            var s = a(q,
                "  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",
                q.VERTEX_SHADER),
              t = a(q,
                "  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",
                q.FRAGMENT_SHADER),
              v = b(q, [s, t]);
            q.useProgram(v);
            s = {};
            s.gl = q;
            s.canvas = r;
            s.resolutionLocation = q.getUniformLocation(v, "u_resolution");
            s.positionLocation = q.getAttribLocation(v, "a_position");
            s.backdropLocation = q.getUniformLocation(v, "u_backdrop");
            s.subtypeLocation = q.getUniformLocation(v, "u_subtype");
            r = q.getAttribLocation(v, "a_texCoord");
            var t = q.getUniformLocation(v, "u_image"),
              v = q.getUniformLocation(v, "u_mask"),
              u = q.createBuffer();
            q.bindBuffer(q.ARRAY_BUFFER, u);
            q.bufferData(q.ARRAY_BUFFER, new Float32Array([0,
              0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1
            ]), q.STATIC_DRAW);
            q.enableVertexAttribArray(r);
            q.vertexAttribPointer(r, 2, q.FLOAT, !1, 0, 0);
            q.uniform1i(t, 0);
            q.uniform1i(v, 1);
            h = s
          }
          q = h;
          s = q.canvas;
          r = q.gl;
          s.width = m;
          s.height = p;
          r.viewport(0, 0, r.drawingBufferWidth, r.drawingBufferHeight);
          r.uniform2f(q.resolutionLocation, m, p);
          l.backdrop ? r.uniform4f(q.resolutionLocation, l.backdrop[0],
            l.backdrop[1], l.backdrop[2], 1) : r.uniform4f(q.resolutionLocation,
            0, 0, 0, 0);
          r.uniform1i(q.subtypeLocation, "Luminosity" === l.subtype ? 1 :
            0);
          g = c(r, g, r.TEXTURE0);
          k =
            c(r, k, r.TEXTURE1);
          l = r.createBuffer();
          r.bindBuffer(r.ARRAY_BUFFER, l);
          r.bufferData(r.ARRAY_BUFFER, new Float32Array([0, 0, m, 0, 0,
            p, 0, p, m, 0, m, p
          ]), r.STATIC_DRAW);
          r.enableVertexAttribArray(q.positionLocation);
          r.vertexAttribPointer(q.positionLocation, 2, r.FLOAT, !1, 0, 0);
          r.clearColor(0, 0, 0, 0);
          r.enable(r.BLEND);
          r.blendFunc(r.ONE, r.ONE_MINUS_SRC_ALPHA);
          r.clear(r.COLOR_BUFFER_BIT);
          r.drawArrays(r.TRIANGLES, 0, 6);
          r.flush();
          r.deleteTexture(g);
          r.deleteTexture(k);
          r.deleteBuffer(l);
          return s
        },
        drawFigures: function(c, h, k,
          l, m) {
          if (!g) {
            var p, r;
            d();
            p = f;
            f = null;
            r = e;
            e = null;
            var q = a(r,
                "  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",
                r.VERTEX_SHADER),
              s = a(r,
                "  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",
                r.FRAGMENT_SHADER),
              q = b(r, [q,
                s
              ]);
            r.useProgram(q);
            s = {};
            s.gl = r;
            s.canvas = p;
            s.resolutionLocation = r.getUniformLocation(q, "u_resolution");
            s.scaleLocation = r.getUniformLocation(q, "u_scale");
            s.offsetLocation = r.getUniformLocation(q, "u_offset");
            s.positionLocation = r.getAttribLocation(q, "a_position");
            s.colorLocation = r.getAttribLocation(q, "a_color");
            g = s
          }
          p = g;
          r = p.canvas;
          q = p.gl;
          r.width = c;
          r.height = h;
          q.viewport(0, 0, q.drawingBufferWidth, q.drawingBufferHeight);
          q.uniform2f(p.resolutionLocation, c, h);
          c = 0;
          var t, v, u;
          t = 0;
          for (v = l.length; t < v; t++) switch (l[t].type) {
            case "lattice":
              u =
                l[t].coords.length / l[t].verticesPerRow | 0;
              c += (u - 1) * (l[t].verticesPerRow - 1) * 6;
              break;
            case "triangles":
              c += l[t].coords.length
          }
          s = new Float32Array(2 * c);
          h = new Uint8Array(3 * c);
          var x = m.coords,
            w = m.colors,
            z = 0,
            y = 0;
          t = 0;
          for (v = l.length; t < v; t++) {
            u = l[t];
            var A = u.coords,
              B = u.colors;
            switch (u.type) {
              case "lattice":
                var C = u.verticesPerRow;
                u = A.length / C | 0;
                for (var J = 1; J < u; J++)
                  for (var G = J * C + 1, D = 1; D < C; D++, G++) s[z] = x[A[
                      G - C - 1]], s[z + 1] = x[A[G - C - 1] + 1], s[z + 2] =
                    x[A[G - C]], s[z + 3] = x[A[G - C] + 1], s[z + 4] = x[A[G -
                      1]], s[z + 5] = x[A[G - 1] + 1], h[y] = w[B[G -
                      C - 1]], h[y + 1] = w[B[G - C - 1] + 1], h[y + 2] = w[B[
                      G - C - 1] + 2], h[y + 3] = w[B[G - C]], h[y + 4] = w[B[
                      G - C] + 1], h[y + 5] = w[B[G - C] + 2], h[y + 6] = w[B[
                      G - 1]], h[y + 7] = w[B[G - 1] + 1], h[y + 8] = w[B[G -
                      1] + 2], s[z + 6] = s[z + 2], s[z + 7] = s[z + 3], s[z +
                      8] = s[z + 4], s[z + 9] = s[z + 5], s[z + 10] = x[A[G]],
                    s[z + 11] = x[A[G] + 1], h[y + 9] = h[y + 3], h[y + 10] =
                    h[y + 4], h[y + 11] = h[y + 5], h[y + 12] = h[y + 6], h[y +
                      13] = h[y + 7], h[y + 14] = h[y + 8], h[y + 15] = w[B[G]],
                    h[y + 16] = w[B[G] + 1], h[y + 17] = w[B[G] + 2], z += 12,
                    y += 18;
                break;
              case "triangles":
                for (u = 0, C = A.length; u < C; u++) s[z] = x[A[u]], s[z +
                    1] = x[A[u] + 1], h[y] = w[B[t]], h[y + 1] =
                  w[B[u] + 1], h[y + 2] = w[B[u] + 2], z += 2, y += 3
            }
          }
          k ? q.clearColor(k[0] / 255, k[1] / 255, k[2] / 255, 1) : q.clearColor(
            0, 0, 0, 0);
          q.clear(q.COLOR_BUFFER_BIT);
          k = q.createBuffer();
          q.bindBuffer(q.ARRAY_BUFFER, k);
          q.bufferData(q.ARRAY_BUFFER, s, q.STATIC_DRAW);
          q.enableVertexAttribArray(p.positionLocation);
          q.vertexAttribPointer(p.positionLocation, 2, q.FLOAT, !1, 0, 0);
          l = q.createBuffer();
          q.bindBuffer(q.ARRAY_BUFFER, l);
          q.bufferData(q.ARRAY_BUFFER, h, q.STATIC_DRAW);
          q.enableVertexAttribArray(p.colorLocation);
          q.vertexAttribPointer(p.colorLocation,
            3, q.UNSIGNED_BYTE, !1, 0, 0);
          q.uniform2f(p.scaleLocation, m.scaleX, m.scaleY);
          q.uniform2f(p.offsetLocation, m.offsetX, m.offsetY);
          q.drawArrays(q.TRIANGLES, 0, c);
          q.flush();
          q.deleteBuffer(k);
          q.deleteBuffer(l);
          return r
        },
        clear: function() {
          g = h = null
        }
      }
    }(),
    ta = {
      RadialAxial: {
        fromIR: function(a) {
          var b = a[1],
            c = a[2],
            d = a[3],
            e = a[4],
            f = a[5],
            h = a[6];
          return {
            type: "Pattern",
            getPattern: function(a) {
              var g;
              "axial" === b ? g = a.createLinearGradient(d[0], d[1], e[0],
                e[1]) : "radial" === b && (g = a.createRadialGradient(d[0],
                d[1], f, e[0], e[1], h));
              a = 0;
              for (var k = c.length; a < k; ++a) {
                var l = c[a];
                g.addColorStop(l[0], l[1])
              }
              return g
            }
          }
        }
      }
    },
    Da = function() {
      function a(b, c, d, e, f, h, g, k) {
        var l = c.coords,
          m = c.colors,
          p = b.data;
        b = 4 * b.width;
        var r;
        l[d + 1] > l[e + 1] && (r = d, d = e, e = r, r = h, h = g, g =
          r);
        l[e + 1] > l[f + 1] && (r = e, e = f, f = r, r = g, g = k, k =
          r);
        l[d + 1] > l[e + 1] && (r = d, d = e, e = r, r = h, h = g, g =
          r);
        r = (l[d] + c.offsetX) * c.scaleX;
        d = (l[d + 1] + c.offsetY) * c.scaleY;
        var q = (l[e] + c.offsetX) * c.scaleX;
        e = (l[e + 1] + c.offsetY) * c.scaleY;
        var s = (l[f] + c.offsetX) * c.scaleX;
        c = (l[f + 1] + c.offsetY) * c.scaleY;
        if (!(d >= c)) {
          f = m[h];
          l = m[h +
            1];
          h = m[h + 2];
          var t = m[g],
            v = m[g + 1];
          g = m[g + 2];
          var u = m[k],
            x = m[k + 1];
          k = m[k + 2];
          for (var w = Math.round(d), m = Math.round(c), z, y, A, B, C,
              J, G, D, F = w; F <= m; F++) {
            F < e ? (D = F < d ? 0 : d === e ? 1 : (d - F) / (d - e), w =
              r - (r - q) * D, z = f - (f - t) * D, y = l - (l - v) * D,
              A = h - (h - g) * D) : (D = F > c ? 1 : e === c ? 0 : (e -
                F) / (e - c), w = q - (q - s) * D, z = t - (t - u) * D, y =
              v - (v - x) * D, A = g - (g - k) * D);
            D = F < d ? 0 : F > c ? 1 : (d - F) / (d - c);
            B = r - (r - s) * D;
            C = f - (f - u) * D;
            J = l - (l - x) * D;
            G = h - (h - k) * D;
            D = Math.round(Math.min(w, B));
            for (var E = Math.round(Math.max(w, B)), K = b * F + 4 * D, N =
                D; N <= E; N++) D = (w - N) / (w - B), D = 0 > D ? 0 : 1 <
              D ? 1 : D, p[K++] = z - (z -
                C) * D | 0, p[K++] = y - (y - J) * D | 0, p[K++] = A - (A -
                G) * D | 0, p[K++] = 255
          }
        }
      }
      return function(b, c, e, f, h, g) {
        var k = Math.floor(b[0]),
          l = Math.floor(b[1]),
          m = Math.ceil(b[2]) - k;
        b = Math.ceil(b[3]) - l;
        var p = Math.min(Math.ceil(Math.abs(m * c[0] * 1.1)), 3E3),
          r = Math.min(Math.ceil(Math.abs(b * c[1] * 1.1)), 3E3),
          m = m / p;
        b /= r;
        f = {
          coords: e,
          colors: f,
          offsetX: -k,
          offsetY: -l,
          scaleX: 1 / m,
          scaleY: 1 / b
        };
        var q;
        if (ja.isEnabled) h = ja.drawFigures(p, r, g, h, f), e = W.getCanvas(
          "mesh", p, r, !1), e.context.drawImage(h, 0, 0);
        else {
          e = W.getCanvas("mesh", p, r, !1);
          c = e.context;
          r = c.createImageData(p,
            r);
          if (g) {
            var s = r.data,
              p = 0;
            for (q = s.length; p < q; p += 4) s[p] = g[0], s[p + 1] = g[1],
              s[p + 2] = g[2], s[p + 3] = 255
          }
          for (p = 0; p < h.length; p++) {
            g = r;
            var t = h[p];
            q = f;
            var s = t.coords,
              v = t.colors,
              u = void 0,
              x = void 0;
            switch (t.type) {
              case "lattice":
                for (var t = t.verticesPerRow, x = Math.floor(s.length / t) -
                    1, w = t - 1, u = 0; u < x; u++)
                  for (var z = u * t, y = 0; y < w; y++, z++) a(g, q, s[z],
                    s[z + 1], s[z + t], v[z], v[z + 1], v[z + t]), a(g, q, s[
                      z + t + 1], s[z + 1], s[z + t], v[z + t + 1], v[z + 1],
                    v[z + t]);
                break;
              case "triangles":
                u = 0;
                for (x = s.length; u < x; u += 3) a(g, q, s[u], s[u + 1], s[
                  u + 2], v[u], v[u + 1], v[u +
                  2]);
                break;
              default:
                d("illigal figure")
            }
          }
          c.putImageData(r, 0, 0)
        }
        h = e.canvas;
        return {
          canvas: h,
          offsetX: k,
          offsetY: l,
          scaleX: m,
          scaleY: b
        }
      }
    }();
  ta.Mesh = {
    fromIR: function(a) {
      var b = a[2],
        c = a[3],
        d = a[4],
        e = a[5],
        f = a[6],
        h = a[8];
      return {
        type: "Pattern",
        getPattern: function(a, g, k) {
          var l;
          if (k) l = G.singularValueDecompose2dScale(a.mozCurrentTransform);
          else {
            l = G.singularValueDecompose2dScale(f);
            var m = G.singularValueDecompose2dScale(g.baseTransform);
            l = [l[0] * m[0], l[1] * m[1]]
          }
          l = Da(e, l, b, c, d, k ? null : h);
          k || (a.setTransform.apply(a, g.baseTransform),
            f && a.transform.apply(a, f));
          a.translate(l.offsetX, l.offsetY);
          a.scale(l.scaleX, l.scaleY);
          return a.createPattern(l.canvas, "no-repeat")
        }
      }
    }
  };
  ta.Dummy = {
    fromIR: function() {
      return {
        type: "Pattern",
        getPattern: function() {
          return "hotpink"
        }
      }
    }
  };

  var va = function() {
    function a(b, c, d, e, f, h) {
      this.operatorList = b[2];
      this.matrix = b[3] || [1, 0, 0, 1, 0, 0];
      this.bbox = b[4];
      this.xstep = b[5];
      this.ystep = b[6];
      this.paintType = b[7];
      this.tilingType = b[8];
      this.color = c;
      this.objs = e;
      this.commonObjs = f;
      this.baseTransform = h;
      this.type = "Pattern";
      this.ctx =
        d
    }
    a.prototype = {
      createPatternCanvas: function(a) {
        var b = this.operatorList,
          c = this.bbox,
          d = this.xstep,
          e = this.ystep,
          f = this.paintType,
          h = this.color,
          k = this.objs,
          l = this.commonObjs;
        g("TilingType: " + this.tilingType);
        var m = c[0],
          p = c[1],
          r = c[2],
          q = c[3],
          s = [m, p],
          t = [m + d, p + e],
          v = t[0] - s[0],
          t = t[1] - s[1],
          u = G.singularValueDecompose2dScale(this.matrix),
          x = G.singularValueDecompose2dScale(this.baseTransform),
          u = [u[0] * x[0], u[1] * x[1]],
          v = Math.min(Math.ceil(Math.abs(v * u[0])), 3E3),
          t = Math.min(Math.ceil(Math.abs(t * u[1])), 3E3),
          u = W.getCanvas("pattern",
            v, t, !0),
          x = u.context,
          k = new ua(x, l, k);
        k.groupLevel = a.groupLevel;
        this.setFillAndStrokeStyleToContext(x, f, h);
        this.setScale(v, t, d, e);
        this.transformToScale(k);
        k.transform.apply(k, [1, 0, 0, 1, -s[0], -s[1]]);
        this.clipBbox(k, c, m, p, r, q);
        k.executeOperatorList(b);
        return u.canvas
      },
      setScale: function(a, b, c, d) {
        this.scale = [a / c, b / d]
      },
      transformToScale: function(a) {
        var b = this.scale;
        a.transform.apply(a, [b[0], 0, 0, b[1], 0, 0])
      },
      scaleToContext: function() {
        var a = this.scale;
        this.ctx.scale(1 / a[0], 1 / a[1])
      },
      clipBbox: function(a, b, c, d,
        e, f) {
        b && m(b) && 4 == b.length && (a.rectangle(c, d, e - c, f - d),
          a.clip(), a.endPath())
      },
      setFillAndStrokeStyleToContext: function(a, b, c) {
        switch (b) {
          case 1:
            b = this.ctx;
            a.fillStyle = b.fillStyle;
            a.strokeStyle = b.strokeStyle;
            break;
          case 2:
            b = G.makeCssRgb(c);
            a.fillStyle = b;
            a.strokeStyle = b;
            break;
          default:
            d("Unsupported paint type: " + b)
        }
      },
      getPattern: function(a, b) {
        var c = this.createPatternCanvas(b);
        a = this.ctx;
        a.setTransform.apply(a, this.baseTransform);
        a.transform.apply(a, this.matrix);
        this.scaleToContext();
        return a.createPattern(c,
          "repeat")
      }
    };
    return a
  }();

  PDFJS.disableFontFace = !1;
  var X = {
      insertRule: function(a) {
        var b = document.getElementById("PDFJS_FONT_STYLE_TAG");
        b || (b = document.createElement("style"), b.id =
          "PDFJS_FONT_STYLE_TAG", document.documentElement.getElementsByTagName(
            "head")[0].appendChild(b));
        b = b.sheet;
        b.insertRule(a, b.cssRules.length)
      },
      clear: function() {
        var a = document.getElementById("PDFJS_FONT_STYLE_TAG");
        a && a.parentNode.removeChild(a)
      },
      get loadTestFont() {
        return l(this, "loadTestFont", atob(
          "T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="
        ))
      },
      loadTestFontId: 0,
      loadingContext: {
        requests: [],
        nextRequestId: 0
      },
      isSyncFontLoadingSupported: function() {
        if (z) return !1;
        var a = /Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(window.navigator
          .userAgent);
        return a && 14 <= a[1] ? !0 : !1
      }(),
      bind: function(a, b) {
        z && d("bind() shall be called from main thread");
        for (var c = [], e = [], f = 0, h = a.length; f < h; f++) {
          var g = a[f];
          if (!g.attached && !1 !== g.loading) {
            g.attached = !0;
            var k = g.bindDOM();
            k && (c.push(k), e.push(g))
          }
        }
        f = X.queueLoadingCallback(b);
        0 < c.length && !this.isSyncFontLoadingSupported ? X.prepareFontLoadEvent(
          c,
          e, f) : f.complete()
      },
      queueLoadingCallback: function(a) {
        var b = X.loadingContext,
          c = {
            id: "pdfjs-font-loading-" + b.nextRequestId++,
            complete: function() {
              c.end && d("completeRequest() cannot be called twice");
              for (c.end = Date.now(); 0 < b.requests.length && b.requests[
                  0].end;) {
                var a = b.requests.shift();
                setTimeout(a.callback, 0)
              }
            },
            callback: a,
            started: Date.now()
          };
        b.requests.push(c);
        return c
      },
      prepareFontLoadEvent: function(a, b, c) {
        function d(a, b) {
          return a.charCodeAt(b) << 24 | a.charCodeAt(b + 1) << 16 | a.charCodeAt(
            b + 2) << 8 | a.charCodeAt(b +
            3) & 255
        }

        function e(a, b, c, d) {
          var f = a.substr(0, b);
          a = a.substr(b + c);
          return f + d + a
        }

        function h(a, b) {
          m++;
          30 < m ? (f("Load test font never loaded."), b()) : (l.font =
            "30px " + a, l.fillText(".", 0, 20), 0 < l.getImageData(0,
              0, 1, 1).data[3] ? b() : setTimeout(h.bind(null, a, b)))
        }
        var g, k;
        a = document.createElement("canvas");
        a.width = 1;
        a.height = 1;
        var l = a.getContext("2d"),
          m = 0;
        a = "lt" + Date.now() + this.loadTestFontId++;
        var p = this.loadTestFont,
          p = e(p, 976, a.length, a),
          r = d(p, 16);
        g = 0;
        for (k = a.length - 3; g < k; g += 4) r = r - 1482184792 + d(a,
          g) | 0;
        g < a.length &&
          (r = r - 1482184792 + d(a + "XXX", g) | 0);
        p = e(p, 16, 4, String.fromCharCode(r >> 24 & 255, r >> 16 &
          255, r >> 8 & 255, r & 255));
        g = "url(data:font/opentype;base64," + btoa(p) + ");";
        X.insertRule('@font-face { font-family:"' + a + '";src:' + g +
          "}");
        p = [];
        g = 0;
        for (k = b.length; g < k; g++) p.push(b[g].loadedName);
        p.push(a);
        var q = document.createElement("div");
        q.setAttribute("style",
          "visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"
        );
        g = 0;
        for (k = p.length; g < k; ++g) b = document.createElement(
            "span"), b.textContent = "Hi",
          b.style.fontFamily = p[g], q.appendChild(b);
        document.body.appendChild(q);
        h(a, function() {
          document.body.removeChild(q);
          c.complete()
        })
      }
    },
    oa = function() {
      function a(b, c, d) {
        this.compiledGlyphs = {};
        if (1 === arguments.length) {
          var e = arguments[0],
            f;
          for (f in e) this[f] = e[f]
        }
      }
      a.prototype = {
        bindDOM: function() {
          if (!this.data) return null;
          if (PDFJS.disableFontFace) return this.disableFontFace = !0,
            null;
          var a, b = new Uint8Array(this.data);
          a = b.length;
          if (8192 > a) a = String.fromCharCode.apply(null, b);
          else {
            for (var c = [], d = 0; d < a; d += 8192) {
              var e =
                Math.min(d + 8192, a),
                e = b.subarray(d, e);
              c.push(String.fromCharCode.apply(null, e))
            }
            a = c.join("")
          }
          b = this.loadedName;
          a = "url(data:" + this.mimetype + ";base64," + window.btoa(a) +
            ");";
          b = '@font-face { font-family:"' + b + '";src:' + a + "}";
          X.insertRule(b);
          PDFJS.pdfBug && "FontInspector" in s && s.FontInspector.enabled &&
            s.FontInspector.fontAdded(this, a);
          return b
        },
        getPathGenerator: function(a, b) {
          if (!(b in this.compiledGlyphs)) {
            var c = a.get(this.loadedName + "_path_" + b);
            this.compiledGlyphs[b] = new Function("c", "size", c)
          }
          return this.compiledGlyphs[b]
        }
      };
      return a
    }()
}).call("undefined" === typeof window ? this : window);

PDFJS.workerSrc || "undefined" === typeof document || (PDFJS.workerSrc = function() {
    var PDFJSworkerSrc = (document.body || document.getElementsByTagName("head")[0]).lastChild.src;
    return PDFJSworkerSrc && PDFJSworkerSrc.replace(/\.js$/i, ".worker.js")
  }());

//Function stiil need retouch
! function(newObj, windowObj) {
  windowObj["true"] = newObj;
  var sketchAPI = function(windowObj) {
    function c(a) {
      var c = {};
      this.subscribe = function(a, b, d) {
        if ("function" != typeof b) return !1;
        c.hasOwnProperty(a) || (c[a] = {});
        var e = Math.random().toString(35);
        return c[a][e] = [b, !!d], e
      };
      this.unsubscribe = function(a) {
        for (var b in c)
          if (c[b][a]) return delete c[b][a], !0;
        return !1
      };
      this.publish = function(d) {
        if (c.hasOwnProperty(d)) {
          var e = Array.prototype.slice.call(arguments, 1),
            f = [],
            g;
          for (g in c[d]) {
            var l = c[d][g];
            try {
              l[0].apply(a, e)
            } catch (m) {
              windowObj.console && console.error("jsPDF PubSub Error",
                m.message, m)
            }
            l[1] && f.push(g)
          }
          f.length && f.forEach(this.unsubscribe)
        }
      }
    }

    function d(l, q, h, r) {
      var k = {};
      "object" == typeof l && (k = l, l = k.orientation, q = k.unit ||
        q, h = k.format || h, r = k.compress || k.compressPdf || r);
      q = q || "mm";
      h = h || "a4";
      l = ("" + (l || "P")).toLowerCase();
      var v, x, s, z, y, B = ("" + h).toLowerCase(),
        A = !!r && "function" == typeof Uint8Array,
        C = k.textColor || "0 g",
        F = k.drawColor || "0 G",
        E = k.fontSize || 16,
        D = k.lineHeight || 1.15,
        P = k.lineWidth || .200025,
        G = 2,
        J = !1,
        N = [],
        K = {},
        O = {},
        V = 0,
        L = [],
        T = [],
        Q = 0,
        U = 0,
        da = 0,
        aa = {
          title: "",
          subject: "",
          author: "",
          keywords: "",
          creator: ""
        },
        R = {},
        ea = new c(R),
        Z = function(a) {
          return a.toFixed(2)
        },
        ga = function(a) {
          return ("0" + parseInt(a)).slice(-2)
        },
        W = function(a) {
          J ? L[V].push(a) : (da += a.length + 1, T.push(a))
        },
        ma = function() {
          return G++, N[G] = da, W(G + " 0 obj"), G
        },
        ua = function(a) {
          W("stream");
          W(a);
          W("endstream")
        },
        ja = function(a, b) {
          var c;
          c = a;
          var d = b,
            e, f, h, g, k, l, m;
          if (d = d || {}, e = d.sourceEncoding || "Unicode", h = d.outputEncoding, (
              d.autoencode || h) && K[v].metadata && K[v].metadata[e] && K[
              v].metadata[e].encoding && (f = K[v].metadata[e].encoding, !
              h &&
              K[v].encoding && (h = K[v].encoding), !h && f.codePages && (
                h = f.codePages[0]), "string" == typeof h && (h = f[h]), h)) {
            k = !1;
            g = [];
            e = 0;
            for (f = c.length; f > e; e++)(l = h[c.charCodeAt(e)]) ? g.push(
                String.fromCharCode(l)) : g.push(c[e]), g[e].charCodeAt(0) >>
              8 && (k = !0);
            c = g.join("")
          }
          for (e = c.length; void 0 === k && 0 !== e;) c.charCodeAt(e -
            1) >> 8 && (k = !0), e--;
          if (k) {
            g = d.noBOM ? [] : [254, 255];
            e = 0;
            for (f = c.length; f > e; e++) {
              if (l = c.charCodeAt(e), m = l >> 8, m >> 8) throw Error(
                "Character at position " + e + " of string '" + c +
                "' exceeds 16bits. Cannot be encoded into UCS-2 BE");
              g.push(m);
              g.push(l - (m << 8))
            }
            c = String.fromCharCode.apply(void 0, g)
          }
          return c.replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(
            /\)/g, "\\)")
        },
        ta = function() {
          V++;
          J = !0;
          L[V] = [];
          W(Z(P * x) + " w");
          W(F);
          0 !== Q && W(Q + " J");
          0 !== U && W(U + " j");
          ea.publish("addPage", {
            pageNumber: V
          })
        },
        Da = function(a, b) {
          var c;
          a = void 0 !== a ? a : K[v].fontName;
          b = void 0 !== b ? b : K[v].fontStyle;
          try {
            c = O[a][b]
          } catch (d) {}
          if (!c) throw Error("Unable to look up font label for font '" +
            a + "', '" + b +
            "'. Refer to getFontList() for available fonts.");
          return c
        },
        va =
        function() {
          J = !1;
          G = 2;
          T = [];
          N = [];
          W("%PDF-" + windowObj);
          var a, c, h, g, k, l = z * x,
            m = y * x;
          k = windowObj.adler32cs || d.adler32cs;
          A && "undefined" == typeof k && (A = !1);
          for (a = 1; V >= a; a++) {
            if (ma(), W("<</Type /Page"), W("/Parent 1 0 R"), W(
                "/Resources 2 0 R"), W("/Contents " + (G + 1) + " 0 R>>"),
              W("endobj"), c = L[a].join("\n"), ma(), A) {
              h = [];
              for (g = c.length; g--;) h[g] = c.charCodeAt(g);
              g = k.from(c);
              c = new e(6);
              c.append(new Uint8Array(h));
              c = c.flush();
              h = new Uint8Array(c.length + 6);
              h.set(new Uint8Array([120, 156]));
              h.set(c, 2);
              h.set(new Uint8Array([255 & g, g >> 8 & 255,
                g >> 16 & 255, g >> 24 & 255
              ]), c.length + 2);
              c = String.fromCharCode.apply(null, h);
              W("<</Length " + c.length + " /Filter [/FlateDecode]>>")
            } else W("<</Length " + c.length + ">>");
            ua(c);
            W("endobj")
          }
          N[1] = da;
          W("1 0 obj");
          W("<</Type /Pages");
          a = "/Kids [";
          for (g = 0; V > g; g++) a += 3 + 2 * g + " 0 R ";
          W(a + "]");
          W("/Count " + V);
          W("/MediaBox [0 0 " + Z(l) + " " + Z(m) + "]");
          W(">>");
          W("endobj");
          for (var r in K) K.hasOwnProperty(r) && (l = K[r], l.objectNumber =
            ma(), W("<</BaseFont/" + l.PostScriptName + "/Type/Font"),
            "string" == typeof l.encoding && W("/Encoding/" +
              l.encoding), W("/Subtype/Type1>>"), W("endobj"));
          ea.publish("putResources");
          N[2] = da;
          W("2 0 obj");
          W("<<");
          W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");
          W("/Font <<");
          for (var q in K) K.hasOwnProperty(q) && W("/" + q + " " + K[q]
            .objectNumber + " 0 R");
          W(">>");
          W("/XObject <<");
          ea.publish("putXobjectDict");
          W(">>");
          W(">>");
          W("endobj");
          ea.publish("postPutResources");
          ma();
          W("<<");
          W("/Producer (jsPDF " + d.version + ")");
          for (var s in aa) aa.hasOwnProperty(s) && aa[s] && W("/" + s.substr(
              0, 1).toUpperCase() + s.substr(1) + " (" +
            ja(aa[s]) + ")");
          r = new Date;
          W(["/CreationDate (D:", r.getFullYear(), ga(r.getMonth() + 1),
            ga(r.getDate()), ga(r.getHours()), ga(r.getMinutes()), ga(r
              .getSeconds()), ")"
          ].join(""));
          W(">>");
          W("endobj");
          ma();
          W("<<");
          W("/Type /Catalog");
          W("/Pages 1 0 R");
          W("/OpenAction [3 0 R /FitH null]");
          W("/PageLayout /OneColumn");
          ea.publish("putCatalog");
          W(">>");
          W("endobj");
          q = da;
          W("xref");
          W("0 " + (G + 1));
          W("0000000000 65535 f ");
          for (r = 1; G >= r; r++) W(("0000000000" + N[r]).slice(-10) +
            " 00000 n ");
          W("trailer");
          W("<<");
          W("/Size " + (G +
            1));
          W("/Root " + G + " 0 R");
          W("/Info " + (G - 1) + " 0 R");
          return W(">>"), W("startxref"), W(q), W("%%EOF"), J = !0, T.join(
            "\n")
        },
        X = function(a) {
          var b = "S";
          return "F" === a ? b = "f" : "FD" === a || "DF" === a ? b =
            "B" : ("f" === a || "f*" === a || "B" === a || "B*" === a) &&
            (b = a), b
        },
        oa = function() {
          for (var a = va(), b = a.length, c = new ArrayBuffer(b), d =
              new Uint8Array(c); b--;) d[b] = a.charCodeAt(b);
          return c
        },
        ia = function() {
          return new Blob([oa()], {
            type: "application/pdf"
          })
        },
        ca = function(a) {
          return a.foo = function() {
            try {
              return a.apply(this, arguments)
            } catch (c) {
              var d =
                c.stack || "";
              ~d.indexOf(" at ") && (d = d.split(" at ")[1]);
              d = "Error in function " + d.split("\n")[0].split("<")[0] +
                ": " + c.message;
              if (!windowObj.console) throw Error(d);
              windowObj.console.error(d, c);
              windowObj.alert && alert(d)
            }
          }, a.foo.bar = a, a.foo
        }(function(c, d) {
          var e = "dataur" === ("" + c).substr(0, 6) ?
            "data:application/pdf;base64," + btoa(va()) : 0;
          switch (c) {
            case void 0:
              return va();
            case "save":
              if (navigator.getUserMedia && (void 0 === windowObj.URL || void 0 ===
                  windowObj.URL.createObjectURL)) return R.output(
                "dataurlnewwindow");
              a(ia(), d);
              "function" == typeof a.unload &&
                windowObj.setTimeout && setTimeout(a.unload, 911);
              break;
            case "arraybuffer":
              return oa();
            case "blob":
              return ia();
            case "bloburi":
            case "bloburl":
              return windowObj.URL && windowObj.URL.createObjectURL(ia()) || void 0;
            case "datauristring":
            case "dataurlstring":
              return e;
            case "dataurlnewwindow":
              var f = windowObj.open(e);
              if (f || "undefined" == typeof safari) return f;
            case "datauri":
            case "dataurl":
              return windowObj.document.location.href = e;
            default:
              throw Error('Output type "' + c + '" is not supported.');
          }
        });
      switch (q) {
        case "pt":
          x = 1;
          break;
        case "mm":
          x = 72 / 25.4;
          break;
        case "cm":
          x =
            72 / 2.54;
          break;
        case "in":
          x = 72;
          break;
        case "px":
          x = 96 / 72;
          break;
        case "pc":
          x = 12;
          break;
        case "em":
          x = 12;
          break;
        case "ex":
          x = 6;
          break;
        default:
          throw "Invalid unit: " + q;
      }
      if (newObj.hasOwnProperty(B)) y = newObj[B][1] / x, z = newObj[B][0] / x;
      else try {
        y = h[1], z = h[0]
      } catch (ba) {
        throw Error("Invalid format: " + h);
      }
      if ("p" === l || "portrait" === l) l = "p", z > y && (s = z, z =
        y, y = s);
      else {
        if ("l" !== l && "landscape" !== l) throw "Invalid orientation: " +
          l;
        l = "l";
        y > z && (s = z, z = y, y = s)
      }
      R.internal = {
        pdfEscape: ja,
        getStyle: X,
        getFont: function() {
          return K[Da.apply(R, arguments)]
        },
        getFontSize: function() {
          return E
        },
        getLineHeight: function() {
          return E * D
        },
        write: function(a) {
          W(1 === arguments.length ? a : Array.prototype.join.call(
            arguments, " "))
        },
        getCoordinateString: function(a) {
          return Z(a * x)
        },
        getVerticalCoordinateString: function(a) {
          return Z((y - a) * x)
        },
        collections: {},
        newObject: ma,
        putStream: ua,
        events: ea,
        scaleFactor: x,
        pageSize: {
          width: z,
          height: y
        },
        output: function(a, b) {
          return ca(a, b)
        },
        getNumberOfPages: function() {
          return L.length - 1
        },
        pages: L
      };
      R.addPage = function() {
        return ta(), this
      };
      R.text = function(a, b, c, d, e) {
        function f(a) {
          return a =
            a.split("\t").join(Array(k.TabLen || 9).join(" ")), ja(a, d)
        }
        "number" == typeof a && (s = c, c = b, b = a, a = s);
        "string" == typeof a && a.match(/[\n\r]/) && (a = a.split(
          /\r\n|\r|\n/g));
        "number" == typeof d && (e = d, d = null);
        var h = "",
          g = "Td";
        e && (e *= Math.PI / 180, h = Math.cos(e), g = Math.sin(e), h = [
          Z(h), Z(g), Z(-1 * g), Z(h), ""
        ].join(" "), g = "Tm");
        if (d = d || {}, "noBOM" in d || (d.noBOM = !0), "autoencode" in
          d || (d.autoencode = !0), "string" == typeof a) a = f(a);
        else {
          if (!(a instanceof Array)) throw Error(
            'Type of text must be string or Array. "' + a +
            '" is not recognized.');
          a = a.concat();
          e = [];
          for (var l = a.length; l--;) e.push(f(a.shift()));
          a = e.join(") Tj\nT* (")
        }
        return W("BT\n/" + v + " " + E + " Tf\n" + E * D + " TL\n" + C +
          "\n" + h + Z(b * x) + " " + Z((y - c) * x) + " " + g + "\n(" +
          a + ") Tj\nET"), this
      };
      R.line = function(a, b, c, d) {
        return this.lines([
          [c - a, d - b]
        ], a, b)
      };
      R.lines = function(a, b, c, d, e, f) {
        var h, g, k, l, m, p, r, q;
        "number" == typeof a && (s = c, c = b, b = a, a = s);
        d = d || [1, 1];
        W((b * x).toFixed(3) + " " + ((y - c) * x).toFixed(3) + " m ");
        h = d[0];
        d = d[1];
        g = a.length;
        q = c;
        for (c = 0; g > c; c++) k = a[c], 2 === k.length ? (b = k[0] *
          h + b, q = k[1] * d + q, W((b * x).toFixed(3) +
            " " + ((y - q) * x).toFixed(3) + " l")) : (l = k[0] * h + b,
          m = k[1] * d + q, p = k[2] * h + b, r = k[3] * d + q, b = k[
            4] * h + b, q = k[5] * d + q, W((l * x).toFixed(3) + " " +
            ((y - m) * x).toFixed(3) + " " + (p * x).toFixed(3) + " " +
            ((y - r) * x).toFixed(3) + " " + (b * x).toFixed(3) + " " +
            ((y - q) * x).toFixed(3) + " c"));
        return f && W(" h"), null !== e && W(X(e)), this
      };
      R.rect = function(a, b, c, d, e) {
        X(e);
        return W([Z(a * x), Z((y - b) * x), Z(c * x), Z(-d * x), "re"]
          .join(" ")), null !== e && W(X(e)), this
      };
      R.triangle = function(a, b, c, d, e, f, h) {
        return this.lines([
            [c - a, d - b],
            [e - c, f - d],
            [a - e, b - f]
          ], a, b, [1, 1], h, !0),
          this
      };
      R.roundedRect = function(a, b, c, d, e, f, h) {
        var g = 4 / 3 * (Math.SQRT2 - 1);
        return this.lines([
          [c - 2 * e, 0],
          [e * g, 0, e, f - f * g, e, f],
          [0, d - 2 * f],
          [0, f * g, -(e * g), f, -e, f],
          [-c + 2 * e, 0],
          [-(e * g), 0, -e, -(f * g), -e, -f],
          [0, -d + 2 * f],
          [0, -(f * g), e * g, -f, e, -f]
        ], a + e, b, [1, 1], h), this
      };
      R.ellipse = function(a, b, c, d, e) {
        var f = 4 / 3 * (Math.SQRT2 - 1) * c,
          h = 4 / 3 * (Math.SQRT2 - 1) * d;
        return W([Z((a + c) * x), Z((y - b) * x), "m", Z((a + c) * x),
          Z((y - (b - h)) * x), Z((a + f) * x), Z((y - (b - d)) * x),
          Z(a * x), Z((y - (b - d)) * x), "c"
        ].join(" ")), W([Z((a - f) * x), Z((y - (b - d)) * x), Z((a -
          c) * x), Z((y - (b - h)) *
          x), Z((a - c) * x), Z((y - b) * x), "c"].join(" ")), W([Z((a -
          c) * x), Z((y - (b + h)) * x), Z((a - f) * x), Z((y - (b +
          d)) * x), Z(a * x), Z((y - (b + d)) * x), "c"].join(" ")), W(
          [Z((a + f) * x), Z((y - (b + d)) * x), Z((a + c) * x), Z((y -
            (b + h)) * x), Z((a + c) * x), Z((y - b) * x), "c"].join(
            " ")), null !== e && W(X(e)), this
      };
      R.circle = function(a, b, c, d) {
        return this.ellipse(a, b, c, c, d)
      };
      R.setProperties = function(a) {
        for (var b in aa) aa.hasOwnProperty(b) && a[b] && (aa[b] = a[b]);
        return this
      };
      R.setFontSize = function(a) {
        return E = a, this
      };
      R.setFont = function(a, b) {
        return v = Da(a, b), this
      };
      R.setFontStyle =
        R.setFontType = function(a) {
          return v = Da(void 0, a), this
        };
      R.getFontList = function() {
        var a, b, c, d = {};
        for (a in O)
          if (O.hasOwnProperty(a))
            for (b in d[a] = c = [], O[a]) O[a].hasOwnProperty(b) && c.push(
              b);
        return d
      };
      R.setLineWidth = function(a) {
        return W((a * x).toFixed(2) + " w"), this
      };
      R.setDrawColor = function(a, b, c, d) {
        var e;
        return e = void 0 === b || void 0 === d && a === b === c ?
          "string" == typeof a ? a + " G" : Z(a / 255) + " G" : void 0 ===
          d ? "string" == typeof a ? [a, b, c, "RG"].join(" ") : [Z(a /
            255), Z(b / 255), Z(c / 255), "RG"].join(" ") : "string" ==
          typeof a ? [a,
            b, c, d, "K"
          ].join(" ") : [Z(a), Z(b), Z(c), Z(d), "K"].join(" "), W(e),
          this
      };
      R.setFillColor = function(a, b, c, d) {
        var e;
        return e = void 0 === b || void 0 === d && a === b === c ?
          "string" == typeof a ? a + " g" : Z(a / 255) + " g" : void 0 ===
          d ? "string" == typeof a ? [a, b, c, "rg"].join(" ") : [Z(a /
            255), Z(b / 255), Z(c / 255), "rg"].join(" ") : "string" ==
          typeof a ? [a, b, c, d, "k"].join(" ") : [Z(a), Z(b), Z(c), Z(
            d), "k"].join(" "), W(e), this
      };
      R.setTextColor = function(a, b, c) {
        "string" == typeof a && /^#[0-9A-Fa-f]{6}$/.test(a) && (c =
          parseInt(a.substr(1), 16), a = c >> 16 & 255, b = c >>
          8 & 255, c &= 255);
        return C = 0 === a && 0 === b && 0 === c || "undefined" ==
          typeof b ? (a / 255).toFixed(3) + " g" : [(a / 255).toFixed(3), (
            b / 255).toFixed(3), (c / 255).toFixed(3), "rg"].join(" "),
          this
      };
      R.CapJoinStyles = {
        0: 0,
        butt: 0,
        but: 0,
        miter: 0,
        1: 1,
        round: 1,
        rounded: 1,
        circle: 1,
        2: 2,
        projecting: 2,
        project: 2,
        square: 2,
        bevel: 2
      };
      R.setLineCap = function(a) {
        var b = this.CapJoinStyles[a];
        if (void 0 === b) throw Error("Line cap style of '" + a +
          "' is not recognized. See or extend .CapJoinStyles property for valid styles"
        );
        return Q = b, W(b + " J"), this
      };
      R.setLineJoin =
        function(a) {
          var b = this.CapJoinStyles[a];
          if (void 0 === b) throw Error("Line join style of '" + a +
            "' is not recognized. See or extend .CapJoinStyles property for valid styles"
          );
          return U = b, W(b + " j"), this
        };
      R.output = ca;
      R.save = function(a) {
        R.output("save", a)
      };
      for (var $ in d.API) d.API.hasOwnProperty($) && ("events" === $ &&
        d.API.events.length ? ! function(a, b) {
          var c, d, e;
          for (e = b.length - 1; - 1 !== e; e--) c = b[e][0], d = b[e][
            1
          ], a.subscribe.apply(a, [c].concat("function" == typeof d ? [
            d
          ] : d))
        }(ea, d.API.events) : R[$] = d.API[$]);
      return function() {
        for (var a = [
            ["Helvetica", "helvetica", "normal"],
            ["Helvetica-Bold", "helvetica", "bold"],
            ["Helvetica-Oblique", "helvetica", "italic"],
            ["Helvetica-BoldOblique", "helvetica", "bolditalic"],
            ["Courier", "courier", "normal"],
            ["Courier-Bold", "courier", "bold"],
            ["Courier-Oblique", "courier", "italic"],
            ["Courier-BoldOblique", "courier", "bolditalic"],
            ["Times-Roman", "times", "normal"],
            ["Times-Bold", "times", "bold"],
            ["Times-Italic", "times", "italic"],
            ["Times-BoldItalic", "times", "bolditalic"]
          ], b = 0, c = a.length; c > b; b++) {
          var d, e = a[b][0],
            f =
            a[b][1];
          d = a[b][2];
          var h = "F" + (Object.keys(K).length + 1).toString(10),
            e = K[h] = {
              id: h,
              PostScriptName: e,
              fontName: f,
              fontStyle: d,
              encoding: "StandardEncoding",
              metadata: {}
            },
            g = h;
          O.hasOwnProperty(f) || (O[f] = {});
          O[f][d] = g;
          d = (ea.publish("addFont", e), h);
          h = a[b][0].split("-");
          e = h[0];
          h = h[1] || "";
          O.hasOwnProperty(e) || (O[e] = {});
          O[e][h] = d
        }
        ea.publish("addFonts", {
          fonts: K,
          dictionary: O
        })
      }(), v = "F1", ta(), ea.publish("initialized"), R
    }
    var f = "1.3",
      g = {
        a0: [2383.94, 3370.39],
        a1: [1683.78, 2383.94],
        a2: [1190.55, 1683.78],
        a3: [841.89, 1190.55],
        a4: [595.28, 841.89],
        a5: [419.53, 595.28],
        a6: [297.64, 419.53],
        a7: [209.76, 297.64],
        a8: [147.4, 209.76],
        a9: [104.88, 147.4],
        a10: [73.7, 104.88],
        b0: [2834.65, 4008.19],
        b1: [2004.09, 2834.65],
        b2: [1417.32, 2004.09],
        b3: [1000.63, 1417.32],
        b4: [708.66, 1000.63],
        b5: [498.9, 708.66],
        b6: [354.33, 498.9],
        b7: [249.45, 354.33],
        b8: [175.75, 249.45],
        b9: [124.72, 175.75],
        b10: [87.87, 124.72],
        c0: [2599.37, 3676.54],
        c1: [1836.85, 2599.37],
        c2: [1298.27, 1836.85],
        c3: [918.43, 1298.27],
        c4: [649.13, 918.43],
        c5: [459.21, 649.13],
        c6: [323.15, 459.21],
        c7: [229.61, 323.15],
        c8: [161.57, 229.61],
        c9: [113.39, 161.57],
        c10: [79.37, 113.39],
        dl: [311.81, 623.62],
        letter: [612, 792],
        "government-letter": [576, 756],
        legal: [612, 1008],
        "junior-legal": [576, 360],
        ledger: [1224, 792],
        tabloid: [792, 1224],
        "credit-card": [153, 243]
      };
    return d.API = {
        events: []
      }, d.version = "1.0.209-git 2014-07-28T16:27:diegocr", "function" ==
      typeof define && define.amd ? define("jsPDF", function() {
        return d
      }) : windowObj.jsPDF = d, d;
  }("undefined" != typeof self && self || "undefined" != typeof window && window || this);
 
  ! function(a) {
    a.addHTML = function(a, b, d, e, f) {
      if ("undefined" == typeof html2canvas && "undefined" == typeof rasterizeHTML)
        throw Error(
          "You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js"
        );
      "number" != typeof b && (e = b, f = d);
      "function" == typeof e && (f = e, e = null);
      var g = this.internal,
        h = g.scaleFactor,
        l = g.pageSize.width,
        k = g.pageSize.height;
      return (e = e || {}, e.onrendered = function(a) {
          b = parseInt(b) || 0;
          d = parseInt(d) || 0;
          var c = e.dim || {},
            g = c.h || 0,
            q = c.w || Math.min(l, a.width / h) - b,
            t = "JPEG";
          if (e.format && (t = e.format), a.height >
            k && e.pagesplit) g = function() {
            for (var c = 0;;) {
              var e = document.createElement("canvas");
              e.width = Math.min(l * h, a.width);
              e.height = Math.min(k * h, a.height - c);
              e.getContext("2d").drawImage(a, 0, c, a.width, e.height, 0,
                0, e.width, e.height);
              var g = [e, b, c ? 0 : d, e.width / h, e.height / h, t,
                null, "SLOW"
              ];
              if (this.addImage.apply(this, g), c += e.height, c >= a.height)
                break;
              this.addPage()
            }
            f(q, c, null, g)
          }.bind(this), "CANVAS" === a.nodeName ? (c = new Image, c.onload =
            g, c.src = a.toDataURL("image/png"), a = c) : g();
          else {
            var c = Math.random().toString(35),
              B = [a, b, d, q, g, t, c, "SLOW"];
            this.addImage.apply(this, B);
            f(q, g, c, B)
          }
        }.bind(this), "undefined" == typeof html2canvas || e.rstz) ?
        "undefined" != typeof rasterizeHTML ? (g = "drawDocument",
          "string" == typeof a && (g = /^http/.test(a) ? "drawURL" :
            "drawHTML"), e.width = e.width || l * h, rasterizeHTML[g](a,
            void 0, e).then(function(a) {
            e.onrendered(a.image)
          }, function(a) {
            f(null, a)
          })) : null : html2canvas(a, e)
    }
  }(sketchAPI.API);

  (function(a) {
    var c = ["jpeg", "jpg", "png"],
      d = function(a) {
        var b = this.internal.newObject(),
          c = this.internal.write,
          e = this.internal.putStream;
        if (a.n = b, c("<</Type /XObject"), c("/Subtype /Image"), c(
            "/Width " + a.w), c("/Height " + a.h), a.cs === this.color_spaces
          .INDEXED ? c("/ColorSpace [/Indexed /DeviceRGB " + (a.pal.length /
            3 - 1) + " " + ("smask" in a ? b + 2 : b + 1) + " 0 R]") : (c(
              "/ColorSpace /" + a.cs), a.cs === this.color_spaces.DEVICE_CMYK &&
            c("/Decode [1 0 1 0 1 0 1 0]")), c("/BitsPerComponent " + a.bpc),
          "f" in a && c("/Filter /" + a.f), "dp" in a && c(
            "/DecodeParms <<" + a.dp + ">>"), "trns" in a && a.trns.constructor ==
          Array) {
          for (var f = "", h = 0, g = a.trns.length; g > h; h++) f += a.trns[
              h] + " " +
            a.trns[h] + " ";
          c("/Mask [" + f + "]")
        }
        if ("smask" in a && c("/SMask " + (b + 1) + " 0 R"), c(
            "/Length " + a.data.length + ">>"), e(a.data), c("endobj"),
          "smask" in a) b = {
          w: a.w,
          h: a.h,
          cs: "DeviceGray",
          bpc: a.bpc,
          dp: "/Predictor 15 /Colors 1 /BitsPerComponent " + a.bpc +
            " /Columns " + a.w,
          data: a.smask
        }, "f" in a && (b.f = a.f), d.call(this, b);
        a.cs === this.color_spaces.INDEXED && (this.internal.newObject(),
          c("<< /Length " + a.pal.length + ">>"), e(this.arrayBufferToBinaryString(
            new Uint8Array(a.pal))), c("endobj"))
      },
      e = function() {
        var a = this.internal.collections.addImage_images,
          b;
        for (b in a) d.call(this, a[b])
      },
      f = function() {
        var a, b = this.internal.collections.addImage_images,
          c = this.internal.write,
          d;
        for (d in b) a = b[d], c("/I" + a.i, a.n, "0", "R")
      },
      g = function(c) {
        return c && "string" == typeof c && (c = c.toUpperCase()), c in
          a.image_compression ? c : a.image_compression.NONE
      },
      l = function(a) {
        var b = 0;
        if (a) {
          if (Object.keys) a = Object.keys(a).length;
          else {
            var b = 0,
              c;
            for (c in a) a.hasOwnProperty(c) && b++;
            a = b
          }
          b = a
        }
        return b
      },
      h = function(a) {
        return "string" == typeof a && Array.prototype.reduce && a.split(
          "").reduce(function(a,
          b) {
          return a = (a << 5) - a + b.charCodeAt(0), a & a
        }, 0)
      },
      r = function(a, b) {
        var c;
        if (b)
          for (var d in b)
            if (a === b[d].alias) {
              c = b[d];
              break
            }
        return c
      };
    a.color_spaces = {
      DEVICE_RGB: "DeviceRGB",
      DEVICE_GRAY: "DeviceGray",
      DEVICE_CMYK: "DeviceCMYK",
      CAL_GREY: "CalGray",
      CAL_RGB: "CalRGB",
      LAB: "Lab",
      ICC_BASED: "ICCBased",
      INDEXED: "Indexed",
      PATTERN: "Pattern",
      SEPERATION: "Seperation",
      DEVICE_N: "DeviceN"
    };
    a.decode = {
      DCT_DECODE: "DCTDecode",
      FLATE_DECODE: "FlateDecode",
      LZW_DECODE: "LZWDecode",
      JPX_DECODE: "JPXDecode",
      JBIG2_DECODE: "JBIG2Decode",
      ASCII85_DECODE: "ASCII85Decode",
      ASCII_HEX_DECODE: "ASCIIHexDecode",
      RUN_LENGTH_DECODE: "RunLengthDecode",
      CCITT_FAX_DECODE: "CCITTFaxDecode"
    };
    a.image_compression = {
      NONE: "NONE",
      FAST: "FAST",
      MEDIUM: "MEDIUM",
      SLOW: "SLOW"
    };
    a.isString = function(a) {
      return "string" == typeof a
    };
    a.extractInfoFromBase64DataURI = function(a) {
      return /^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(a)
    };
    a.supportsArrayBuffer = function() {
      return "undefined" != typeof ArrayBuffer && "undefined" !=
        typeof Uint8Array
    };
    a.isArrayBuffer = function(a) {
      return this.supportsArrayBuffer() ? a instanceof
      ArrayBuffer: !1
    };
    a.isArrayBufferView = function(a) {
      return this.supportsArrayBuffer() ? "undefined" == typeof Uint32Array ?
        !1 : a instanceof Int8Array || a instanceof Uint8Array ||
        "undefined" != typeof Uint8ClampedArray && a instanceof Uint8ClampedArray ||
        a instanceof Int16Array || a instanceof Uint16Array || a instanceof Int32Array ||
        a instanceof Uint32Array || a instanceof Float32Array || a instanceof Float64Array :
        !1
    };
    a.binaryStringToUint8Array = function(a) {
      for (var b = a.length, c = new Uint8Array(b), d = 0; b > d; d++)
        c[d] = a.charCodeAt(d);
      return c
    };
    a.arrayBufferToBinaryString = function(a) {
      this.isArrayBuffer(a) && (a = new Uint8Array(a));
      for (var b = "", c = a.byteLength, d = 0; c > d; d++) b +=
        String.fromCharCode(a[d]);
      return b
    };
    a.arrayBufferToBase64 = function(a) {
      var b, c, d, e, f, h = "";
      a = new Uint8Array(a);
      e = a.byteLength;
      for (var g = e % 3, l = e - g, m = 0; l > m; m += 3) f = a[m] <<
        16 | a[m + 1] << 8 | a[m + 2], b = (16515072 & f) >> 18, c = (
          258048 & f) >> 12, d = (4032 & f) >> 6, e = 63 & f, h +=
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          b
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          c
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          d
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          e
        ];
      return 1 == g ? (f = a[l], b = (252 & f) >> 2, c = (3 & f) << 4,
        h +=
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          b
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          c
        ] + "==") : 2 == g && (f = a[l] << 8 | a[l + 1], b = (64512 &
          f) >> 10, c = (1008 & f) >> 4, d = (15 & f) << 2, h +=
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          b
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          c
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [
          d
        ] + "="), h
    };
    a.createImageInfo = function(a, b, c, d, e, f, h, g, l, m, p, r) {
      a = {
        alias: g,
        w: b,
        h: c,
        cs: d,
        bpc: e,
        i: h,
        data: a
      };
      return f && (a.f = f), l && (a.dp = l), m && (a.trns = m), p &&
        (a.pal = p), r && (a.smask = r), a
    };
    a.addImage = function(d, p, q, s, z, y, B, A) {
      if ("number" == typeof p) {
        var C = y;
        y = z;
        z = s;
        s = q;
        q = p;
        p = C
      }
      var F;
      F = this.internal.collections.addImage_images;
      C = (F || (this.internal.collections.addImage_images = F = {},
        this.internal.events.subscribe("putResources", e), this.internal
        .events.subscribe("putXobjectDict",
          f)), F);
      if (!(F = r(d, C))) {
        var E;
        if ("object" == typeof d && 1 === d.nodeType) {
          a: {
            F = d;
            d = p;
            if ("IMG" === F.nodeName && F.hasAttribute("src")) {
              var D = "" + F.getAttribute("src");
              if (0 === D.indexOf("data:image/")) {
                F = D;
                break a
              }!d && /\.png(?:[?#].*)?$/i.test(D) && (d = "png")
            }
            if ("CANVAS" === F.nodeName) D = F;
            else {
              D = document.createElement("canvas");
              D.width = F.clientWidth || F.width;
              D.height = F.clientHeight || F.height;
              var P = D.getContext("2d");
              if (!P) throw "addImage requires canvas to be supported by browser.";
              P.drawImage(F, 0, 0, D.width, D.height)
            }
            F =
              D.toDataURL("png" == ("" + d).toLowerCase() ? "image/png" :
                "image/jpeg")
          }
          d = F
        }
        if (("undefined" == typeof B || null === B) && (B = h(d)), !(F =
            r(B, C))) {
          this.isString(d) && ((D = this.extractInfoFromBase64DataURI(d)) ?
            (p = D[2], d = atob(D[3])) : 137 === d.charCodeAt(0) && 80 ===
            d.charCodeAt(1) && 78 === d.charCodeAt(2) && 71 === d.charCodeAt(
              3) && (p = "png"));
          if (p = (p || "JPEG").toLowerCase(), -1 === c.indexOf(p)) throw Error(
            "addImage currently only supports formats " + c + ", not '" +
            p + "'");
          if ("function" != typeof a["process" + p.toUpperCase()]) throw Error(
            "please ensure that the plugin for '" +
            p + "' support is added");
          if (this.supportsArrayBuffer() && (E = d, d = this.binaryStringToUint8Array(
              d)), F = this["process" + p.toUpperCase()](d, l(C), B, g(A),
              E), !F) throw Error(
            "An unkwown error occurred whilst processing the image");
        }
      }
      p = q;
      q = F;
      B = F.i;
      A = y;
      y = (z || A || (z = -96, A = -96), 0 > z && (z = -72 * q.w / z /
          this.internal.scaleFactor), 0 > A && (A = -72 * q.h / A /
          this.internal.scaleFactor), 0 === z && (z = A * q.w / q.h), 0 ===
        A && (A = z * q.h / q.w), [z, A]);
      A = this.internal.getCoordinateString;
      E = this.internal.getVerticalCoordinateString;
      z = y[0];
      y = y[1];
      C[B] = q;
      this.internal.write("q", A(z), "0 0", A(y), A(p), E(s + y),
        "cm /I" + q.i, "Do Q");
      return this
    };
    a.processJPEG = function(a, b, c, d, e) {
      var f;
      d = this.color_spaces.DEVICE_RGB;
      var h = this.decode.DCT_DECODE;
      if (this.isString(a)) {
        a: {
          e = a;
          var g, l, m;
          if (255 === !e.charCodeAt(0) || 216 === !e.charCodeAt(1) ||
            255 === !e.charCodeAt(2) || 224 === !e.charCodeAt(3) || 74 ===
            !e.charCodeAt(6) || 70 === !e.charCodeAt(7) || 73 === !e.charCodeAt(
              8) || 70 === !e.charCodeAt(9) || 0 === !e.charCodeAt(10))
            throw Error("getJpegSize requires a binary string jpeg file");
          for (var p =
              256 * e.charCodeAt(4) + e.charCodeAt(5), r = 4, q = e.length; q >
            r;) {
            if (r += p, 255 !== e.charCodeAt(r)) throw Error(
              "getJpegSize could not find the size of the image");
            if (192 === e.charCodeAt(r + 1) || 193 === e.charCodeAt(r + 1) ||
              194 === e.charCodeAt(r + 1) || 195 === e.charCodeAt(r + 1) ||
              196 === e.charCodeAt(r + 1) || 197 === e.charCodeAt(r + 1) ||
              198 === e.charCodeAt(r + 1) || 199 === e.charCodeAt(r + 1)) {
              e = (l = 256 * e.charCodeAt(r + 5) + e.charCodeAt(r + 6), g =
                256 * e.charCodeAt(r + 7) + e.charCodeAt(r + 8), m = e.charCodeAt(
                  r + 9), [g, l, m]);
              break a
            }
            r += 2;
            p = 256 * e.charCodeAt(r) +
              e.charCodeAt(r + 1)
          }
          e = void 0
        }
        a = (f = e, this.createImageInfo(a, f[0], f[1], 1 == f[3] ?
          this.color_spaces.DEVICE_GRAY : d, 8, h, b, c))
      } else {
        this.isArrayBuffer(a) && (a = new Uint8Array(a));
        if (this.isArrayBufferView(a)) {
          a: {
            g = a;
            if (65496 !== (g[0] << 8 | g[1])) throw Error(
              "Supplied data is not a JPEG");
            var t;
            l = g.length;
            m = (g[4] << 8) + g[5];
            for (var u = 4; l > u;) {
              if (u += m, p = g.subarray(u, u + 5), m = (p[2] << 8) + p[3], (
                  192 === p[1] || 194 === p[1]) && 255 === p[0] && 7 < m) {
                l = u + 5;
                g = (p = g.subarray(l, l + 5), r = (p[2] << 8) + p[3], q =
                  (p[0] << 8) + p[1], t = p[4], {
                    width: r,
                    height: q,
                    numcomponents: t
                  });
                break a
              }
              u += 2
            }
            throw Error(
              "getJpegSizeFromBytes could not find the size of the image"
            );
          }
          b = (f = g, a = e || this.arrayBufferToBinaryString(a), this.createImageInfo(
            a, f.width, f.height, 1 == f.numcomponents ? this.color_spaces
            .DEVICE_GRAY : d, 8, h, b, c))
        } else b = null;
        a = b
      }
      return a
    };
    a.processJPG = function() {
      return this.processJPEG.apply(this, arguments)
    }
  })(sketchAPI.API);

  (function(a) {
    a.autoPrint = function() {
      var a;
      return this.internal.events.subscribe("postPutResources",
        function() {
          a = this.internal.newObject();
          this.internal.write("<< /S/Named /Type/Action /N/Print >>",
            "endobj")
        }), this.internal.events.subscribe("putCatalog", function() {
        this.internal.write("/OpenAction " + a + " 0 R")
      }), this
    }
  })(sketchAPI.API);

  (function(a) {
    var c, d, e, f, g = {
        x: void 0,
        y: void 0,
        w: void 0,
        h: void 0,
        ln: void 0
      },
      l = 1,
      h = {
        left: 0,
        top: 0,
        bottom: 0
      };
    a.setHeaderFunction = function(a) {
      f = a
    };
    a.getTextDimensions = function(a) {
      c = this.internal.getFont().fontName;
      d = this.table_font_size || this.internal.getFontSize();
      e = this.internal.getFont().fontStyle;
      var b, f, h = 19.049976 / 25.4;
      return f = document.createElement("font"), f.id = "jsPDFCell",
        f.style.fontStyle = e, f.style.fontName = c, f.style.fontSize =
        d + "pt", f.innerText = a, document.body.appendChild(f), b = {
          w: (f.offsetWidth + 1) * h,
          h: (f.offsetHeight + 1) * h
        }, document.body.removeChild(f), b
    };
    a.cellAddPage = function() {
      var a = this.margins || h;
      this.addPage();
      g = {
        x: a.left,
        y: a.top,
        w: void 0,
        h: void 0,
        ln: void 0
      };
      l += 1
    };
    a.cellInitialize = function() {
      g = {
        x: void 0,
        y: void 0,
        w: void 0,
        h: void 0,
        ln: void 0
      };
      l = 1
    };
    a.cell = function(a, b, c, d, e, f, l) {
      var m = g;
      void 0 !== m.ln && (m.ln === f ? (a = m.x + m.w, b = m.y) : (m.y +
        m.h + d + 13 >= this.internal.pageSize.height -
        (this.margins || h).bottom && (this.cellAddPage(), this.printHeaders &&
          this.tableHeaderRow && this.printHeaderRow(f, !0)), b = g.y +
        g.h));
      if (void 0 !== e[0])
        if (this.printingHeaderRow ? this.rect(a, b, c, d, "FD") : this
          .rect(a, b, c, d), "right" === l) {
          if (e instanceof Array)
            for (l = 0; l < e.length; l++) {
              var m = e[l],
                p = this.getStringUnitWidth(m) * this.internal.getFontSize();
              this.text(m, a + c - p - 3, b + this.internal.getLineHeight() *
                (l + 1))
            }
        } else this.text(e, a + 3, b + this.internal.getLineHeight());
      g = {
        x: a,
        y: b,
        w: c,
        h: d,
        ln: f
      };
      return this
    };
    a.arrayMax =
      function(a, b) {
        var c, d, e, f = a[0];
        c = 0;
        for (d = a.length; d > c; c += 1) e = a[c], b ? -1 === b(f, e) &&
          (f = e) : e > f && (f = e);
        return f
      };
    a.table = function(c, d, e, f, m) {
      if (!e) throw "No data for PDF table";
      var p, q, w, A, C, F, E, D, P = [];
      F = [];
      var G = {},
        J = {},
        N = [];
      E = [];
      w = !1;
      var K = !0;
      q = 12;
      A = h;
      if (A.width = this.internal.pageSize.width, m && (!0 === m.autoSize &&
          (w = !0), !1 === m.printHeaders && (K = !1), m.fontSize && (q =
            m.fontSize), m.margins && (A = m.margins)), this.lnMod = 0, g = {
          x: void 0,
          y: void 0,
          w: void 0,
          h: void 0,
          ln: void 0
        }, l = 1, this.printHeaders = K, this.margins = A, this.setFontSize(
          q),
        this.table_font_size = q, void 0 === f || null === f) P =
        Object.keys(e[0]);
      else if (f[0] && "string" != typeof f[0])
        for (A = 19.049976 / 25.4, m = 0, q = f.length; q > m; m += 1) p =
          f[m], P.push(p.name), F.push(p.prompt), J[p.name] = p.width *
          A;
      else P = f;
      if (w)
        for (D = function(a) {
            return a[p]
          }, m = 0, q = P.length; q > m; m += 1) {
          p = P[m];
          G[p] = e.map(D);
          N.push(this.getTextDimensions(F[m] || p).w);
          C = G[p];
          f = 0;
          for (w = C.length; w > f; f += 1) A = C[f], N.push(this.getTextDimensions(
            A).w);
          J[p] = a.arrayMax(N)
        }
      if (K) {
        G = this.calculateLineHeight(P, J, F.length ? F : P);
        m = 0;
        for (q = P.length; q >
          m; m += 1) p = P[m], E.push([c, d, J[p], G, String(F.length ?
          F[m] : p)]);
        this.setTableHeaderRow(E);
        this.printHeaderRow(1, !1)
      }
      m = 0;
      for (q = e.length; q > m; m += 1)
        for (F = e[m], G = this.calculateLineHeight(P, J, F), f = 0, E =
          P.length; E > f; f += 1) p = P[f], this.cell(c, d, J[p], G, F[
          p], m + 2, p.align);
      return this.lastCellPos = g, this.table_x = c, this.table_y = d,
        this
    };
    a.calculateLineHeight = function(a, b, c) {
      for (var d, e = 0, f = 0; f < a.length; f++) d = a[f], c[d] =
        this.splitTextToSize(String(c[d]), b[d] - 3), d = this.internal
        .getLineHeight() * c[d].length + 3, d > e && (e = d);
      return e
    };
    a.setTableHeaderRow = function(a) {
      this.tableHeaderRow = a
    };
    a.printHeaderRow = function(a, b) {
      if (!this.tableHeaderRow) throw "Property tableHeaderRow does not exist.";
      var c, d, e;
      if (this.printingHeaderRow = !0, void 0 !== f) d = f(this, l), g = {
        x: d[0],
        y: d[1],
        w: d[2],
        h: d[3],
        ln: -1
      };
      this.setFontStyle("bold");
      var h = [];
      d = 0;
      for (e = this.tableHeaderRow.length; e > d; d += 1) this.setFillColor(
          200, 200, 200), c = this.tableHeaderRow[d], b && (c[1] = this.margins &&
          this.margins.top || 0, h.push(c)), c = [].concat(c), this.cell
        .apply(this, c.concat(a));
      0 < h.length &&
        this.setTableHeaderRow(h);
      this.setFontStyle("normal");
      this.printingHeaderRow = !1
    }
  })(sketchAPI.API);

  (function(a) {
    var c, d, e, f, g, l, h, r, k, q, x, s, z, y, B, A, C, F, E;
    c = function() {
      function a() {}
      return function(b) {
        return a.prototype = b, new a
      }
    }();
    k = function(a) {
      var b, c, d, e, f;
      c = 0;
      d = a.length;
      for (f = e = !1; !e && c !== d;)(b = a[c] = a[c].trimLeft()) &&
        (e = !0), c++;
      for (c = d - 1; d && !f && -1 !== c;)(b = a[c] = a[c].trimRight()) &&
        (f = !0), c--;
      e = /\s+$/g;
      f = !0;
      for (c = 0; c !== d;) b = a[c].replace(/\s+/g, " "), f && (b = b
        .trimLeft()), b && (f = e.test(b)), a[c] = b, c++;
      return a
    };
    q = function(a, b, c, d) {
      return this.pdf = a, this.x = b, this.y = c, this.settings = d,
        this.watchFunctions = [], this.init(), this
    };
    x = function(a) {
      var b, c;
      b = void 0;
      c = a.split(",");
      for (a = c.shift(); !b && a;) b = e[a.trim().toLowerCase()], a =
        c.shift();
      return b
    };
    s = function(a) {
      a = "auto" === a ? "0px" : a; - 1 < a.indexOf("em") && !isNaN(
        Number(a.replace("em", ""))) && (a = 18.719 * Number(a.replace(
        "em", "")) + "px"); - 1 < a.indexOf("pt") && !isNaN(Number(a.replace(
        "pt", ""))) && (a = 1.333 * Number(a.replace("pt", "")) + "px");
      var b;
      return (b = z[a]) ? b : (b = {
          "xx-small": 9,
          "x-small": 11,
          small: 13,
          medium: 16,
          large: 19,
          "x-large": 23,
          "xx-large": 28,
          auto: 0
        }[{
          css_line_height_string: a
        }], void 0 !== b ? z[a] = b / 16 : (b = parseFloat(a)) ? z[a] =
        b / 16 : (b = a.match(/([\d\.]+)(px)/), z[a] = 3 === b.length ?
          parseFloat(b[1]) / 16 : 1))
    };
    r = function(a) {
      var b, c, d;
      return d = function(a) {
          var b;
          return b = function(a) {
              return document.defaultView && document.defaultView.getComputedStyle ?
                document.defaultView.getComputedStyle(a, null) : a.currentStyle ?
                a.currentStyle : a.style
            }(a),
            function(a) {
              return a = a.replace(/-\D/g, function(a) {
                  return a.charAt(1).toUpperCase()
                }),
                b[a]
            }
        }(a), b = {}, c = void 0, b["font-family"] = x(d("font-family")) ||
        "times", b["font-style"] = f[d("font-style")] || "normal", b[
          "text-align"] = TextAlignMap[d("text-align")] || "left", c = g[
          d("font-weight")] || "normal", "bold" === c && (b["font-style"] =
          "normal" === b["font-style"] ? c : c + b["font-style"]), b[
          "font-size"] = s(d("font-size")) || 1, b["line-height"] = s(d(
          "line-height")) || 1, b.display = "inline" === d("display") ?
        "inline" : "block", "block" === b.display && (b["margin-top"] =
          s(d("margin-top")) || 0, b["margin-bottom"] = s(d(
            "margin-bottom")) ||
          0, b["padding-top"] = s(d("padding-top")) || 0, b[
            "padding-bottom"] = s(d("padding-bottom")) || 0, b[
            "margin-left"] = s(d("margin-left")) || 0, b["margin-right"] =
          s(d("margin-right")) || 0, b["padding-left"] = s(d(
            "padding-left")) || 0, b["padding-right"] = s(d(
            "padding-right")) || 0), b["float"] = l[d("cssFloat")] ||
        "none", b.clear = h[d("clear")] || "none", b
    };
    y = function(a, b, c) {
      var d, e, f, h;
      if (f = !1, d = c["#" + a.id])
        if ("function" == typeof d) f = d(a, b);
        else
          for (e = 0, h = d.length; !f && e !== h;) f = d[e](a, b), e++;
      if (d = c[a.nodeName], !f && d)
        if ("function" ==
          typeof d) f = d(a, b);
        else
          for (e = 0, h = d.length; !f && e !== h;) f = d[e](a, b), e++;
      return f
    };
    E = function(a, b) {
      var c, d, e, f, h, g;
      c = [];
      d = [];
      e = 0;
      g = a.rows[0].cells.length;
      for (f = a.clientWidth; g > e;) h = a.rows[0].cells[e], d[e] = {
        name: h.textContent.toLowerCase().replace(/\s+/g, ""),
        prompt: h.textContent.replace(/\r?\n/g, ""),
        width: h.clientWidth / f * b.pdf.internal.pageSize.width
      }, e++;
      for (e = 1; e < a.rows.length;) {
        g = a.rows[e];
        h = {};
        for (f = 0; f < g.cells.length;) h[d[f].name] = g.cells[f].textContent
          .replace(/\r?\n/g, ""), f++;
        c.push(h);
        e++
      }
      return {
        rows: c,
        headers: d
      }
    };
    var D = {
        SCRIPT: 1,
        STYLE: 1,
        NOSCRIPT: 1,
        OBJECT: 1,
        EMBED: 1,
        SELECT: 1
      },
      P = 1;
    d = function(a, b, c) {
      var e, f, h, g, k, l, m;
      f = a.childNodes;
      e = void 0;
      a = r(a);
      (g = "block" === a.display) && (b.setBlockBoundary(), b.setBlockStyle(
        a));
      h = 0;
      for (k = f.length; k > h;) {
        if (e = f[h], "object" == typeof e) {
          if (b.executeWatchFunctions(e), 1 === e.nodeType && "HEADER" ===
            e.nodeName) {
            var q = e,
              s = b.pdf.margins_doc.top;
            b.pdf.internal.events.subscribe("addPage", function() {
              b.y = s;
              d(q, b, c);
              b.pdf.margins_doc.top = b.y + 10;
              b.y += 10
            }, !1)
          }
          if (8 === e.nodeType && "#comment" ===
            e.nodeName) ~e.textContent.indexOf("ADD_PAGE") && (b.pdf.addPage(),
            b.y = b.pdf.margins_doc.top);
          else if (1 !== e.nodeType || D[e.nodeName])
            if (3 === e.nodeType) {
              if ((l = e.nodeValue) && "LI" === e.parentNode.nodeName)
                if ("OL" === e.parentNode.parentNode.nodeName) l = P++ +
                  ". " + l;
                else {
                  var t = 2;
                  20 < 16 * a["font-size"] && (t = 3);
                  m = function(a, b) {
                    this.pdf.circle(a, b, t, "FD")
                  }
                }
              b.addText(l, a)
            } else "string" == typeof e && b.addText(e, a);
          else if ("IMG" === e.nodeName && B[e.getAttribute("src")]) {
            b.pdf.internal.pageSize.height - b.pdf.margins_doc.bottom <
              b.y + e.height && b.y > b.pdf.margins_doc.top && (b.pdf.addPage(),
                b.y = b.pdf.margins_doc.top, b.executeWatchFunctions(e));
            l = r(e);
            var u = b.x,
              v = 12 / b.pdf.internal.scaleFactor,
              x = (l["margin-left"] + l["padding-left"]) * v,
              w = (l["margin-right"] + l["padding-right"]) * v,
              z = (l["margin-top"] + l["padding-top"]) * v,
              v = (l["margin-bottom"] + l["padding-bottom"]) * v,
              u = u + (void 0 !== l["float"] && "right" === l["float"] ? b
                .settings.width - e.width - w : x);
            b.pdf.addImage(B[e.getAttribute("src")], u, b.y + z, e.width,
              e.height);
            void 0 !== l["float"] ? ("right" ===
              l["float"] || "left" === l["float"]) && (b.watchFunctions.push(
                function(a, c, d, e) {
                  return b.y >= c ? (b.x += a, b.settings.width += d, !0) :
                    e && 1 === e.nodeType && !D[e.nodeName] && b.x + e.width >
                    b.pdf.margins_doc.left + b.pdf.margins_doc.width ? (b.x +=
                      a, b.y = c, b.settings.width += d, !0) : !1
                }.bind(this, "left" === l["float"] ? -e.width - x - w : 0,
                  b.y + e.height + z + v, e.width)), b.watchFunctions.push(
                function(a, c, d) {
                  return b.y < a && c === b.pdf.internal.getNumberOfPages() ?
                    1 === d.nodeType && "both" === r(d).clear ? (b.y = a, !0) :
                    !1 : !0
                }.bind(this, b.y + e.height, b.pdf.internal.getNumberOfPages())
              ),
              b.settings.width -= e.width + x + w, "left" === l["float"] &&
              (b.x += e.width + x + w)) : b.y += e.height + v
          } else "TABLE" === e.nodeName ? (l = E(e, b), b.y += 10, b.pdf
              .table(b.x, b.y, l.rows, l.headers, {
                autoSize: !1,
                printHeaders: !0,
                margins: b.pdf.margins_doc
              }), b.y = b.pdf.lastCellPos.y + b.pdf.lastCellPos.h + 20) :
            "OL" === e.nodeName || "UL" === e.nodeName ? (P = 1, y(e, b,
              c) || d(e, b, c), b.y += 10) : "LI" === e.nodeName ? (l = b.x,
              b.x += "UL" === e.parentNode.nodeName ? 22 : 10, b.y += 3, y(
                e, b, c) || d(e, b, c), b.x = l) : y(e, b, c) || d(e, b, c)
        }
        h++
      }
      return g ? b.setBlockBoundary(m) : void 0
    };
    B = {};
    A = function(a, b, c, d) {
      function e() {
        b.pdf.internal.events.publish("imagesLoaded");
        d()
      }

      function f(a, b, c) {
        if (a) {
          var d = new Image;
          ++h;
          d.crossOrigin = "";
          d.onerror = d.onload = function() {
            d.complete && (0 === d.src.indexOf("data:image/") && (d.width =
                b || d.width || 0, d.height = c || d.height || 0), d.width +
              d.height && (B[a] = B[a] || d));
            --h || e()
          };
          d.src = a
        }
      }
      a = a.getElementsByTagName("img");
      c = a.length;
      for (var h = 0; c--;) f(a[c].getAttribute("src"), a[c].width, a[
        c].height);
      return h || e()
    };
    C = function(a, b, c, e) {
      var f = a.getElementsByTagName("footer");
      if (0 < f.length) {
        f = f[0];
        a = b.pdf.internal.write;
        var h = b.y;
        b.pdf.internal.write = function() {};
        d(f, b, c);
        var g = Math.ceil(b.y - h) + 5;
        b.y = h;
        b.pdf.internal.write = a;
        b.pdf.margins_doc.bottom += g;
        a = function(a) {
          a = void 0 !== a ? a.pageNumber : 1;
          var e = b.y;
          b.y = b.pdf.internal.pageSize.height - b.pdf.margins_doc.bottom;
          b.pdf.margins_doc.bottom -= g;
          for (var h = f.getElementsByTagName("span"), k = 0; k < h.length; ++
            k) - 1 < (" " + h[k].className + " ").replace(/[\n\t]/g, " ")
            .indexOf(" pageCounter ") && (h[k].innerHTML = a), -1 < (" " +
              h[k].className + " ").replace(/[\n\t]/g,
              " ").indexOf(" totalPages ") && (h[k].innerHTML =
              "###jsPDFVarTotalPages###");
          d(f, b, c);
          b.pdf.margins_doc.bottom += g;
          b.y = e
        };
        for (var h = f.getElementsByTagName("span"), k = 0; k < h.length; ++
          k) - 1 < (" " + h[k].className + " ").replace(/[\n\t]/g, " ").indexOf(
          " totalPages ") && b.pdf.internal.events.subscribe(
          "htmlRenderingFinished", b.pdf.putTotalPages.bind(b.pdf,
            "###jsPDFVarTotalPages###"), !0);
        b.pdf.internal.events.subscribe("addPage", a, !1);
        a();
        D.FOOTER = 1
      }
      e()
    };
    F = function(a, b, c, e, f, h) {
      if (!b) return !1;
      "string" == typeof b || b.parentNode ||
        (b = "" + b.innerHTML);
      "string" == typeof b && (b = function(a) {
        var b, c, d;
        return d = "jsPDFhtmlText" + Date.now().toString() + (1E3 *
            Math.random()).toFixed(0), c = document.createElement("div"),
          c.style.cssText =
          "position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",
          c.innerHTML = '<iframe style="height:1px;width:1px" name="' +
          d + '" />', document.body.appendChild(c),
          b = window.frames[d], b.document.body.innerHTML = a, b.document
          .body
      }(b.replace(/<\/?script[^>]*?>/gi, "")));
      var g = new q(a, c, e, f);
      return h = h || function() {}, A.call(this, b, g, f.elementHandlers,
        function() {
          C.call(this, b, g, f.elementHandlers, function() {
            d(b, g, f.elementHandlers);
            g.pdf.internal.events.publish("htmlRenderingFinished");
            h(g.dispose())
          })
        }), g.dispose()
    };
    q.prototype.init = function() {
      return this.paragraph = {
        text: [],
        style: []
      }, this.pdf.internal.write("q")
    };
    q.prototype.dispose = function() {
      return this.pdf.internal.write("Q"), {
        x: this.x,
        y: this.y
      }
    };
    q.prototype.executeWatchFunctions = function(a) {
      var b = !1,
        c = [];
      if (0 < this.watchFunctions.length) {
        for (var d = 0; d < this.watchFunctions.length; ++d) !0 ===
          this.watchFunctions[d](a) ? b = !0 : c.push(this.watchFunctions[
            d]);
        this.watchFunctions = c
      }
      return b
    };
    q.prototype.splitFragmentsIntoLines = function(a, b) {
      var d, e, f, h, g, k, l, m, p, r, q, s, t;
      p = this.pdf.internal.scaleFactor;
      h = {};
      k = l = t = g = f = m = e = void 0;
      r = [];
      q = [r];
      d = 0;
      for (s = this.settings.width; a.length;)
        if (g = a.shift(), t = b.shift(), g)
          if (e = t["font-family"], m = t["font-style"],
            f = h[e + m], f || (f = this.pdf.internal.getFont(e, m).metadata
              .Unicode, h[e + m] = f), l = {
              widths: f.widths,
              kerning: f.kerning,
              fontSize: 12 * t["font-size"],
              textIndent: d
            }, k = this.pdf.getStringUnitWidth(g, l) * l.fontSize / p, d +
            k > s) {
            d = this.pdf.splitTextToSize(g, s, l);
            for (r.push([d.shift(), t]); d.length;) r = [
              [d.shift(), t]
            ], q.push(r);
            d = this.pdf.getStringUnitWidth(r[0][0], l) * l.fontSize / p
          } else r.push([g, t]), d += k;
      if (void 0 !== t["text-align"] && ("center" === t["text-align"] ||
          "right" === t["text-align"] || "justify" === t["text-align"]))
        for (e =
          0; e < q.length; ++e) f = this.pdf.getStringUnitWidth(q[e][0][
            0
          ], l) * l.fontSize / p, 0 < e && (q[e][0][1] = c(q[e][0][1])),
          f = s - f, "right" === t["text-align"] ? q[e][0][1][
            "margin-left"
          ] = f : "center" === t["text-align"] ? q[e][0][1][
            "margin-left"
          ] = f / 2 : "justify" === t["text-align"] && (h = q[e][0][0].split(
              " ").length - 1, q[e][0][1]["word-spacing"] = f / h, e === q
            .length - 1 && (q[e][0][1]["word-spacing"] = 0));
      return q
    };
    q.prototype.RenderTextFragment = function(a, b) {
      var c;
      c = 0;
      this.pdf.internal.pageSize.height - this.pdf.margins_doc.bottom <
        this.y + this.pdf.internal.getFontSize() &&
        (this.pdf.internal.write("ET", "Q"), this.pdf.addPage(), this.y =
          this.pdf.margins_doc.top, this.pdf.internal.write("q", "BT",
            this.pdf.internal.getCoordinateString(this.x), this.pdf.internal
            .getVerticalCoordinateString(this.y), "Td"), c = Math.max(c,
            b["line-height"], b["font-size"]), this.pdf.internal.write(0, (-
            12 * c).toFixed(2), "Td"));
      c = this.pdf.internal.getFont(b["font-family"], b["font-style"]);
      void 0 !== b["word-spacing"] && 0 < b["word-spacing"] && this.pdf
        .internal.write(b["word-spacing"].toFixed(2), "Tw");
      this.pdf.internal.write("/" +
        c.id, (12 * b["font-size"]).toFixed(2), "Tf", "(" + this.pdf.internal
        .pdfEscape(a) + ") Tj");
      void 0 !== b["word-spacing"] && this.pdf.internal.write(0, "Tw")
    };
    q.prototype.renderParagraph = function(a) {
      var b, c, d, e, f, h, g, l, m;
      if (c = k(this.paragraph.text), h = this.paragraph.style, b =
        this.paragraph.blockstyle, l = this.paragraph.blockstyle || {},
        this.paragraph = {
          text: [],
          style: [],
          blockstyle: {},
          priorblockstyle: b
        }, c.join("").trim()) {
        h = this.splitFragmentsIntoLines(c, h);
        g = f = void 0;
        c = 12 / this.pdf.internal.scaleFactor;
        f = (Math.max((b["margin-top"] ||
            0) - (l["margin-bottom"] || 0), 0) + (b["padding-top"] || 0)) *
          c;
        l = ((b["margin-bottom"] || 0) + (b["padding-bottom"] || 0)) *
          c;
        b = this.pdf.internal.write;
        e = d = void 0;
        this.y += f;
        b("q", "BT", this.pdf.internal.getCoordinateString(this.x),
          this.pdf.internal.getVerticalCoordinateString(this.y), "Td");
        for (var p = 0; h.length;) {
          f = h.shift();
          d = g = 0;
          for (e = f.length; d !== e;) f[d][0].trim() && (g = Math.max(g,
              f[d][1]["line-height"], f[d][1]["font-size"]), m = 7 * f[d]
            [1]["font-size"]), d++;
          d = 0;
          void 0 !== f[0][1]["margin-left"] && 0 < f[0][1]["margin-left"] &&
            (wantedIndent = this.pdf.internal.getCoordinateString(f[0][1]
              ["margin-left"]), d = wantedIndent - p, p = wantedIndent);
          b(d, (-12 * g).toFixed(2), "Td");
          d = 0;
          for (e = f.length; d !== e;) f[d][0] && this.RenderTextFragment(
            f[d][0], f[d][1]), d++;
          if (this.y += g * c, this.executeWatchFunctions(f[0][1]) && 0 <
            h.length) {
            var r = [],
              q = [];
            h.forEach(function(a) {
              for (var b = 0, c = a.length; b !== c;) a[b][0] && (r.push(
                a[b][0] + " "), q.push(a[b][1])), ++b
            });
            h = this.splitFragmentsIntoLines(k(r), q);
            b("ET", "Q");
            b("q", "BT", this.pdf.internal.getCoordinateString(this.x),
              this.pdf.internal.getVerticalCoordinateString(this.y), "Td"
            )
          }
        }
        return a && "function" == typeof a && a.call(this, this.x - 9,
          this.y - m / 2), b("ET", "Q"), this.y += l
      }
    };
    q.prototype.setBlockBoundary = function(a) {
      return this.renderParagraph(a)
    };
    q.prototype.setBlockStyle = function(a) {
      return this.paragraph.blockstyle = a
    };
    q.prototype.addText = function(a, b) {
      return this.paragraph.text.push(a), this.paragraph.style.push(b)
    };
    e = {
      helvetica: "helvetica",
      "sans-serif": "helvetica",
      "times new roman": "times",
      serif: "times",
      times: "times",
      monospace: "courier",
      courier: "courier"
    };
    g = {
      100: "normal",
      200: "normal",
      300: "normal",
      400: "normal",
      500: "bold",
      600: "bold",
      700: "bold",
      800: "bold",
      900: "bold",
      normal: "normal",
      bold: "bold",
      bolder: "bold",
      lighter: "normal"
    };
    f = {
      normal: "normal",
      italic: "italic",
      oblique: "italic"
    };
    TextAlignMap = {
      left: "left",
      right: "right",
      center: "center",
      justify: "justify"
    };
    l = {
      none: "none",
      right: "right",
      left: "left"
    };
    h = {
      none: "none",
      both: "both"
    };
    z = {
      normal: 1
    };
    a.fromHTML = function(a, b, c, d, e, f) {
      return this.margins_doc = f || {
          top: 0,
          bottom: 0
        }, d || (d = {}), d.elementHandlers ||
        (d.elementHandlers = {}), F(this, a, isNaN(b) ? 4 : b, isNaN(c) ?
          4 : c, d, e)
    }
  })(sketchAPI.API);

  (function(a) {
    var c, d, e;
    a.addJS = function(a) {
      return e = a, this.internal.events.subscribe("postPutResources",
        function() {
          c = this.internal.newObject();
          this.internal.write("<< /Names [(EmbeddedJS) " + (c + 1) +
            " 0 R] >>", "endobj");
          d = this.internal.newObject();
          this.internal.write("<< /S /JavaScript /JS (", e, ") >>",
            "endobj")
        }), this.internal.events.subscribe("putCatalog", function() {
        void 0 !== c && void 0 !== d && this.internal.write(
          "/Names <</JavaScript " +
          c + " 0 R>>")
      }), this
    }
  })(sketchAPI.API);

  (function(a) {
    var c = function(c, l, k, v) {
        var x = 5,
          s = g;
        switch (v) {
          case a.image_compression.FAST:
            x = 3;
            s = windowObj;
            break;
          case a.image_compression.MEDIUM:
            x = 6;
            s = q;
            break;
          case a.image_compression.SLOW:
            x = 9, s = t
        }
        for (var z, y, B = c.length / l, A = new Uint8Array(c.length + B), C = [d, windowObj, g, q, t], F = 0; B > F; F++) {
          if (y = F * l, v = c.subarray(y, y + l), s) A.set(s(v, k, z), y +
            F);
          else {
            for (var E = 0, D = C.length, P = []; D > E; E++) P[E] = C[E](
              v, k, z);
            z = P.concat();
            for (var G = void 0, D = E = void 0, J = 0, N = z.length; N >
              J;) {
              for (var G = z[J].slice(1), K = 0, O = G.length,
                  V = 0; O > K;) V += Math.abs(G[K++]);
              G = V;
              (E > G || !E) && (E = G, D = J);
              J++
            }
            A.set(P[D], y + F)
          }
          z = v
        }
        c = A;
        l = Uint8Array;
        y = Math.LOG2E * Math.log(32768) - 8 << 4 | 8;
        k = y << 8;
        s = Math.min(3, 0);
        y = (k |= s << 6, k |= 0, k += 31 - k % 31, [y, k & 255]);
        l = new l(y);
        y = 1;
        s = 0;
        v = c.length;
        for (B = 0; 0 < v;) {
          k = void 0 < v ? void 0 : v;
          v -= k;
          do y += c[B++], s += y; while (--k);
          y %= 65521;
          s %= 65521
        }
        k = (s << 16 | y) >>> 0;
        y = new e(x);
        x = y.append(c);
        y = y.flush();
        c = l.length + x.length + y.length;
        s = new Uint8Array(c + 4);
        return s.set(l), s.set(x, l.length), s.set(y, l.length + x.length),
          s[c++] = k >>> 24 & 255, s[c++] = k >>>
          16 & 255, s[c++] = k >>> 8 & 255, s[c++] = 255 & k, a.arrayBufferToBinaryString(
            s)
      },
      d = function(a) {
        a = Array.apply([], a);
        return a.unshift(0), a
      },
      f = function(a, b) {
        var c, d = [],
          e = 0,
          f = a.length;
        for (d[0] = 1; f > e; e++) c = a[e - b] || 0, d[e + 1] = a[e] -
          c + 256 & 255;
        return d
      },
      g = function(a, b, c) {
        var d = [],
          e = 0,
          f = a.length;
        for (d[0] = 2; f > e; e++) b = c && c[e] || 0, d[e + 1] = a[e] -
          b + 256 & 255;
        return d
      },
      q = function(a, b, c) {
        var d, e, f = [],
          g = 0,
          l = a.length;
        for (f[0] = 3; l > g; g++) d = a[g - b] || 0, e = c && c[g] || 0,
          f[g + 1] = a[g] + 256 - (d + e >>> 1) & 255;
        return f
      },
      t = function(a, b, c) {
        var d, e, f, g = [],
          l =
          0,
          m = a.length;
        for (g[0] = 4; m > l; l++) {
          d = a[l - b] || 0;
          e = c && c[l] || 0;
          f = c && c[l - b] || 0;
          var p = d + e - f,
            q = Math.abs(p - d),
            t = Math.abs(p - e),
            p = Math.abs(p - f);
          d = t >= q && p >= q ? d : p >= t ? e : f;
          g[l + 1] = a[l] - d + 256 & 255
        }
        return g
      };
    a.processPNG = function(d, f, g, m) {
      var p, q, t, u, w, A, C = this.color_spaces.DEVICE_RGB,
        F = this.decode.FLATE_DECODE,
        E = 8;
      if (this.isArrayBuffer(d) && (d = new Uint8Array(d)), this.isArrayBufferView(
          d)) {
        if ("function" != typeof PNG || "function" != typeof l) throw Error(
          "PNG support requires png.js and zlib.js");
        if (p = new PNG(d), d = p.imgData,
          E = p.bits, C = p.colorSpace, u = p.colors, -1 !== [4, 6].indexOf(
            p.colorType)) {
          if (8 === p.bits)
            for (var D, P, G = new window["Uint" + p.pixelBitlength +
                  "Array"](p.decodePixels().buffer), J = G.length, N = new Uint8Array(
                  J * p.colors), K = new Uint8Array(J), O = p.pixelBitlength -
                p.bits, V = 0, L = 0; J > V; V++) {
              D = G[V];
              for (P = 0; O > P;) N[L++] = D >>> P & 255, P += p.bits;
              K[V] = D >>> P & 255
            }
          if (16 === p.bits) {
            G = new Uint32Array(p.decodePixels().buffer);
            J = G.length;
            N = new Uint8Array(32 / p.pixelBitlength * J * p.colors);
            K = new Uint8Array(32 / p.pixelBitlength * J);
            E = 1 < p.colors;
            for (P = L = V = 0; J > V;) D = G[V++], N[L++] = D >>> 0 &
              255, E && (N[L++] = D >>> 16 & 255, D = G[V++], N[L++] = D >>>
                0 & 255), K[P++] = D >>> 16 & 255;
            E = 8
          }
          if (J = m !== a.image_compression.NONE)
            if (J = "function" == typeof e, !J) throw Error(
              "requires deflate.js for compression");
          J ? (d = c(N, p.width * p.colors, p.colors, m), A = c(K, p.width,
            1, m)) : (d = N, A = K, F = null)
        }
        if (3 === p.colorType && (C = this.color_spaces.INDEXED, w = p.palette,
            p.transparency.indexed)) {
          m = p.transparency.indexed;
          V = K = 0;
          for (J = m.length; J > V; ++V) K += m[V];
          if (K /= 255, K === J - 1 && -1 !== m.indexOf(0)) t = [m.indexOf(
            0)];
          else if (K !== J) {
            G = p.decodePixels();
            K = new Uint8Array(G.length);
            V = 0;
            for (J = G.length; J > V; V++) K[V] = m[G[V]];
            A = c(K, p.width, 1)
          }
        }
        return q = F === this.decode.FLATE_DECODE ?
          "/Predictor 15 /Colors " + u + " /BitsPerComponent " + E +
          " /Columns " + p.width : "/Colors " + u +
          " /BitsPerComponent " + E + " /Columns " + p.width, (this.isArrayBuffer(
            d) || this.isArrayBufferView(d)) && (d = this.arrayBufferToBinaryString(
            d)), (A && this.isArrayBuffer(A) || this.isArrayBufferView(A)) &&
          (A = this.arrayBufferToBinaryString(A)), this.createImageInfo(
            d, p.width,
            p.height, C, E, F, f, g, q, t, w, A)
      }
      throw Error(
        "Unsupported PNG image data, try using JPEG instead.");
    }
  })(sketchAPI.API);

  (function(a) {
    a.addSVG = function(a, b, d, e, f) {
      function g(a) {
        for (var b = parseFloat(a[1]), c = parseFloat(a[2]), d = [], e =
            3, f = a.length; f > e;) "c" === a[e] ? (d.push([parseFloat(
            a[e + 1]), parseFloat(a[e + 2]), parseFloat(a[e + 3]),
          parseFloat(a[e + 4]), parseFloat(a[e + 5]), parseFloat(a[e +
            6])
        ]), e += 7) : "l" === a[e] ? (d.push([parseFloat(a[e + 1]),
          parseFloat(a[e + 2])
        ]), e += 3) : e += 1;
        return [b, c, d]
      }
      if (void 0 === b || void 0 === d) throw Error(
        "addSVG needs values for 'x' and 'y'");
      var h = function(a) {
          var b = a.createElement("iframe"),
            c = a.createElement("style");
          c.type = "text/css";
          c.styleSheet ? c.styleSheet.cssText =
            ".jsPDF_sillysvg_iframe {display:none;position:absolute;}" :
            c.appendChild(a.createTextNode(
              ".jsPDF_sillysvg_iframe {display:none;position:absolute;}"));
          a.getElementsByTagName("head")[0].appendChild(c);
          return b.name = "childframe", b.setAttribute("width", 0), b.setAttribute(
              "height", 0), b.setAttribute("frameborder", "0"), b.setAttribute(
              "scrolling", "no"), b.setAttribute("seamless",
              "seamless"), b.setAttribute("class", "jsPDF_sillysvg_iframe"),
            a.body.appendChild(b), b
        }(document),
        h = function(a, b) {
          var c = (b.contentWindow || b.contentDocument).document;
          return c.write(a), c.close(), c.getElementsByTagName("svg")[0]
        }(a, h);
      a = [1, 1];
      var l = parseFloat(h.getAttribute("width")),
        k = parseFloat(h.getAttribute("height"));
      l && k && (e && f ? a = [e / l, f / k] : e ? a = [e / l, e / l] :
        f && (a = [f / k, f / k]));
      var q, l = h.childNodes;
      e = 0;
      for (f = l.length; f > e; e++) h = l[e], h.tagName && "PATH" ===
        h.tagName.toUpperCase() && (q = g(h.getAttribute("d").split(" ")),
          q[0] = q[0] * a[0] + b, q[1] = q[1] * a[1] + d, this.lines.call(
            this, q[2], q[0], q[1], a));
      return this
    }
  })(sketchAPI.API);

  (function(a) {
    var c = a.getCharWidthsArray = function(a, b) {
        b || (b = {});
        var c, d, e, f = b.widths ? b.widths : this.internal.getFont().metadata
          .Unicode.widths,
          g = f.fof ? f.fof : 1,
          l = b.kerning ? b.kerning : this.internal.getFont().metadata.Unicode
          .kerning,
          m = l.fof ? l.fof : 1,
          p = 0,
          q = f[0] || g,
          u = [];
        c = 0;
        for (d = a.length; d > c; c++) e = a.charCodeAt(c), u.push((f[e] ||
          q) / g + (l[e] && l[e][p] || 0) / m), p = e;
        return u
      },
      d = function(a) {
        for (var b = a.length, c = 0; b;) b--,
          c += a[b];
        return c
      },
      e = a.getStringUnitWidth = function(a, b) {
        return d(c.call(this, a, b))
      },
      f = function(a, b, c, d) {
        for (var e = [], f = 0, g = a.length, l = 0; f !== g && l + b[f] <
          c;) l += b[f], f++;
        e.push(a.slice(0, f));
        c = f;
        for (l = 0; f !== g;) l + b[f] > d && (e.push(a.slice(c, f)), l =
          0, c = f), l += b[f], f++;
        return c !== f && e.push(a.slice(c, f)), e
      },
      g = function(a, b, g) {
        g || (g = {});
        var k, l, q, s, u, y = [],
          B = [y];
        s = g.textIndent || 0;
        var A = 0,
          C = 0,
          F = a.split(" "),
          E = c(" ", g)[0];
        if (u = -1 === g.lineIndent ? F[0].length + 2 : g.lineIndent ||
          0) {
          var D = Array(u).join(" "),
            P = [];
          F.map(function(a) {
            a =
              a.split(/\s*\n/);
            1 < a.length ? P = P.concat(a.map(function(a, b) {
              return (b && a.length ? "\n" : "") + a
            })) : P.push(a[0])
          });
          F = P;
          u = e(D, g)
        }
        a = 0;
        for (q = F.length; q > a; a++) {
          var G = 0;
          if (k = F[a], u && "\n" == k[0] && (k = k.substr(1), G = 1), l =
            c(k, g), C = d(l), s + A + C > b || G) {
            if (C > b) {
              s = f(k, l, b - (s + A), b);
              y.push(s.shift());
              for (y = [s.pop()]; s.length;) B.push([s.shift()]);
              C = d(l.slice(k.length - y[0].length))
            } else y = [k];
            B.push(y);
            s = C + u
          } else y.push(k), s += A + C;
          A = E
        }
        return B.map(u ? function(a, b) {
          return (b ? D : "") + a.join(" ")
        } : function(a) {
          return a.join(" ")
        })
      };
    a.splitTextToSize =
      function(a, b, c) {
        c || (c = {});
        var d = c.fontSize || this.internal.getFontSize(),
          e;
        e = {
          0: 1
        };
        var f = {};
        if (c.widths && c.kerning) e = {
          widths: c.widths,
          kerning: c.kerning
        };
        else {
          var l = this.internal.getFont(c.fontName, c.fontStyle);
          e = l.metadata.Unicode ? {
            widths: l.metadata.Unicode.widths || e,
            kerning: l.metadata.Unicode.kerning || f
          } : {
            widths: e,
            kerning: f
          }
        }
        a = Array.isArray(a) ? a : a.split(/\r?\n/);
        b = 1 * this.internal.scaleFactor * b / d;
        e.textIndent = c.textIndent ? 1 * c.textIndent * this.internal.scaleFactor /
          d : 0;
        e.lineIndent = c.lineIndent;
        f = [];
        c = 0;
        for (d = a.length; d > c; c++) f = f.concat(g(a[c], b, e));
        return f
      }
  })(sketchAPI.API);

  (function(a) {
    var c = function(a) {
        for (var b = {}, c = 0; 16 > c; c++) 
          b["klmnopqrstuvwxyz" [c]] = "0123456789abcdef" [c];
        for (var d, e, f, g, l = {}, m = 1, p = l, q = [], w = "", C = "", F = a.length - 1, c = 1; c != F;)
         g = a[c], c += 1, "'" == g ? d ? (f = d.join(""), d = void 0) : d = [] : d ? d.push(g) :
          "{" == g ? (q.push([p, f]), p = {}, f = void 0) : "}" == g ? (e =
            q.pop(), e[0][e[1]] = p, f = void 0, p = e[0]) : "-" == g ? m = -
          1 : void 0 === f ? b.hasOwnProperty(g) ? (w += b[g], f =
            parseInt(w, 16) * m, m = 1, w = "") : w += g : b.hasOwnProperty(
            g) ? (C += b[g],
            p[f] = parseInt(C, 16) * m, m = 1, f = void 0, C = "") : C +=
          g;
        return l
      },
      d = {
        codePages: ["WinAnsiEncoding"],
        WinAnsiEncoding: c(
          "{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}"
        )
      },
      e = {
        Unicode: {
          Courier: d,
          "Courier-Bold": d,
          "Courier-BoldOblique": d,
          "Courier-Oblique": d,
          Helvetica: d,
          "Helvetica-Bold": d,
          "Helvetica-BoldOblique": d,
          "Helvetica-Oblique": d,
          "Times-Roman": d,
          "Times-Bold": d,
          "Times-BoldItalic": d,
          "Times-Italic": d
        }
      },
      f = {
        Unicode: {
          "Courier-Oblique": c(
            "{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
          "Times-BoldItalic": c(
            "{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"
          ),
          "Helvetica-Bold": c(
            "{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"
          ),
          Courier: c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
          "Courier-BoldOblique": c(
            "{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
          "Times-Bold": c(
            "{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"
          ),
          Helvetica: c(
            "{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"
          ),
          "Helvetica-BoldOblique": c(
            "{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"
          ),
          "Courier-Bold": c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
          "Times-Italic": c(
            "{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"
          ),
          "Times-Roman": c(
            "{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"
          ),
          "Helvetica-Oblique": c(
            "{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"
          )
        }
      };
    a.events.push(["addFonts", function(a) {
      var b, c, d, g, l;
      for (c in a.fonts) a.fonts.hasOwnProperty(c) && (b = a.fonts[c],
        d = f.Unicode[b.PostScriptName], d && (g = b.metadata.Unicode ?
          b.metadata.Unicode : b.metadata.Unicode = {}, g.widths = d.widths,
          g.kerning = d.kerning), l = e.Unicode[b.PostScriptName], l &&
        (g = b.metadata.Unicode ? b.metadata.Unicode : b.metadata.Unicode = {},
          g.encoding = l, l.codePages && l.codePages.length && (b.encoding =
            l.codePages[0])))
    }])
  })(sketchAPI.API);

  (function(a) {
    a.putTotalPages = function(a) {
      a = new RegExp(a, "g");
      for (var b = 1; b <=
        this.internal.getNumberOfPages(); b++)
        for (var d = 0; d < this.internal.pages[b].length; d++) this.internal
          .pages[b][d] = this.internal.pages[b][d].replace(a, this.internal
            .getNumberOfPages());
      return this
    }
  })(sketchAPI.API);

  (function(a) {
    if (a.URL = a.URL || a.webkitURL, a.Blob && a.URL) try {
      return new Blob, void 0
    } catch (c) {}
    var d = a.BlobBuilder || a.WebKitBlobBuilder || a.MozBlobBuilder || function(a) {
        var b = function(a) {
            return Object.prototype.toString.call(a).match(
              /^\[object\s(.*)\]$/)[1]
          },
          c = function() {
            this.data = []
          },
          d = function(a, b, c) {
            this.data =
              a;
            this.size = a.length;
            this.type = b;
            this.encoding = c
          },
          e = c.prototype,
          f = d.prototype,
          g = a.FileReaderSync,
          l = function(a) {
            this.code = this[this.name = a]
          },
          p =
          "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR"
          .split(" "),
          q = p.length,
          z = a.URL || a.webkitURL || a,
          y = z.createObjectURL,
          B = z.revokeObjectURL,
          A = z,
          C = a.btoa,
          F = a.atob,
          E = a.ArrayBuffer,
          D = a.Uint8Array,
          P = /^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;
        for (d.fake = f.fake = !0; q--;) l.prototype[p[q]] = q + 1;
        return z.createObjectURL ||
          (A = a.URL = function(a) {
            var b, c = document.createElementNS(
              "http://www.w3.org/1999/xhtml", "a");
            return c.href = a, "origin" in c || ("data:" === c.protocol.toLowerCase() ?
                c.origin = null : (b = a.match(P), c.origin = b && b[1])),
              c
          }), A.createObjectURL = function(a) {
            var b, c = a.type;
            return null === c && (c = "application/octet-stream"), a instanceof d ?
              (b = "data:" + c, "base64" === a.encoding ? b + ";base64," +
                a.data : "URI" === a.encoding ? b + "," + decodeURIComponent(
                  a.data) : C ? b + ";base64," + C(a.data) : b + "," +
                encodeURIComponent(a.data)) : y ? y.call(z, a) : void 0
          },
          A.revokeObjectURL = function(a) {
            "data:" !== a.substring(0, 5) && B && B.call(z, a)
          }, e.append = function(a) {
            var c = this.data;
            if (D && (a instanceof E || a instanceof D)) {
              var e = "";
              a = new D(a);
              for (var f = 0, h = a.length; h > f; f++) e += String.fromCharCode(
                a[f]);
              c.push(e)
            } else if ("Blob" === b(a) || "File" === b(a)) {
              if (!g) throw new l("NOT_READABLE_ERR");
              e = new g;
              c.push(e.readAsBinaryString(a))
            } else a instanceof d ? "base64" === a.encoding && F ? c.push(
                F(a.data)) : "URI" === a.encoding ? c.push(
                decodeURIComponent(a.data)) : "raw" === a.encoding && c.push(
                a.data) :
              ("string" != typeof a && (a += ""), c.push(unescape(
                encodeURIComponent(a))))
          }, e.getBlob = function(a) {
            return arguments.length || (a = null), new d(this.data.join(""),
              a, "raw")
          }, e.toString = function() {
            return "[object BlobBuilder]"
          }, f.slice = function(a, b, c) {
            var e = arguments.length;
            return 3 > e && (c = null), new d(this.data.slice(a, 1 < e ? b :
              this.data.length), c, this.encoding)
          }, f.toString = function() {
            return "[object Blob]"
          }, f.close = function() {
            this.size = 0;
            delete this.data
          }, c
      }(a);
    a.Blob = function(a, b) {
      var c = b ? b.type || "" : "",
        e = new d;
      if (a)
        for (var f = 0, g = a.length; g > f; f++)
          e.append(a[f]);
      return e.getBlob(c)
    }
  })("undefined" != typeof self && self || "undefined" != typeof window &&
    window || this.content || this);

  var a = a || "undefined" != typeof navigator && navigator.msSaveOrOpenBlob &&
    navigator.msSaveOrOpenBlob.bind(navigator) || function(a) {
      if ("undefined" == typeof navigator || !/MSIE [1-9]\./.test(
          navigator.userAgent)) {
        var c = a.document,
          d = c.createElementNS("http://www.w3.org/1999/xhtml", "a"),
          e = !a.externalHost && "download" in d,
          f = function(d) {
            var e = c.createEvent("MouseEvents");
            e.initMouseEvent("click", !0, !1, a, 0, 0, 0, 0, 0, !1, !1, !1, !
              1, 0, null);
            d.dispatchEvent(e)
          },
          g = a.webkitRequestFileSystem,
          l = a.requestFileSystem || g || a.mozRequestFileSystem,
          h = function(c) {
            (a.setImmediate || a.setTimeout)(function() {
              throw c;
            }, 0)
          },
          q = 0,
          k = function(c) {
            var d = function() {
              "string" == typeof c ? (a.URL || a.webkitURL || a).revokeObjectURL(
                c) : c.remove()
            };
            a.chrome ? d() : setTimeout(d, 10)
          },
          v = function(a, b, c) {
            b = [].concat(b);
            for (var d = b.length; d--;) {
              var e = a["on" + b[d]];
              if ("function" == typeof e) try {
                e.call(a, c || a)
              } catch (f) {
                h(f)
              }
            }
          },
          x = function(c, h) {
            var s, x, C, F = this,
              E = c.type,
              D = !1,
              P = function() {
                v(F, ["writestart", "progress", "write", "writeend"])
              },
              G = function() {
                ((D || !s) && (s = (a.URL || a.webkitURL || a).createObjectURL(
                  c)), x) ? x.location.href = s: void 0 == a.open(s, "_blank") &&
                  "undefined" != typeof safari && (a.location.href = s);
                F.readyState = F.DONE;
                P();
                k(s)
              },
              J = function(a) {
                return function() {
                  return F.readyState !== F.DONE ? a.apply(this, arguments) :
                    void 0
                }
              },
              N = {
                create: !0,
                exclusive: !1
              };
            return F.readyState = F.INIT, h || (h = "download"), e ? (s = (
                a.URL || a.webkitURL || a).createObjectURL(c),
              d.href = s, d.download = h, f(d), F.readyState = F.DONE, P(),
              k(s), void 0) : (a.chrome && E && "application/octet-stream" !==
              E && (C = c.slice || c.webkitSlice, c = C.call(c, 0, c.size,
                "application/octet-stream"), D = !0), g && "download" !== h &&
              (h += ".download"), ("application/octet-stream" === E || g) &&
              (x = a), l ? (q += c.size, l(a.TEMPORARY, q, J(function(a) {
                a.root.getDirectory("saved", N, J(function(a) {
                  var b = function() {
                    a.getFile(h, N, J(function(a) {
                      a.createWriter(J(function(b) {
                        b.onwriteend = function(b) {
                          x.location.href = a.toURL();
                          F.readyState = F.DONE;
                          v(F, "writeend", b);
                          k(a)
                        };
                        b.onerror = function() {
                          var a = b.error;
                          a.code !== a.ABORT_ERR && G()
                        };
                        ["writestart", "progress", "write", "abort"]
                        .forEach(function(a) {
                          b["on" + a] = F["on" + a]
                        });
                        b.write(c);
                        F.abort = function() {
                          b.abort();
                          F.readyState = F.DONE
                        };
                        F.readyState = F.WRITING
                      }), G)
                    }), G)
                  };
                  a.getFile(h, {
                    create: !1
                  }, J(function(a) {
                    a.remove();
                    b()
                  }), J(function(a) {
                    a.code === a.NOT_FOUND_ERR ? b() : G()
                  }))
                }), G)
              }), G), void 0) : (G(), void 0))
          },
          s = x.prototype;
        return s.abort = function() {
            this.readyState = this.DONE;
            v(this, "abort")
          }, s.readyState = s.INIT =
          0, s.WRITING = 1, s.DONE = 2, s.error = s.onwritestart = s.onprogress =
          s.onwrite = s.onabort = s.onerror = s.onwriteend = null,
          function(a, b) {
            return new x(a, b)
          }
      }
    }("undefined" != typeof self && self || "undefined" != typeof window &&
      window || this.content);
  "undefined" != typeof module && null !== module && (module.exports = a);

  void function(a, c) {
    "object" == typeof module ? module.exports = c() : a.adler32cs = c()
  }(sketchAPI, function() {
    var a = "function" == typeof ArrayBuffer && "function" == typeof Uint8Array,
      c = null,
      d = function() {
        if (!a) return function() {
          return !1
        };
        try {
          var d =
            require("buffer");
          "function" == typeof d.Buffer && (c = d.Buffer)
        } catch (e) {}
        return function(a) {
          return a instanceof ArrayBuffer || null !== c && a instanceof c
        }
      }(),
      e = function() {
        return null !== c ? function(a) {
          return (new c(a, "utf8")).toString("binary")
        } : function(a) {
          return unescape(encodeURIComponent(a))
        }
      }(),
      f = function(a, b) {
        for (var c = 65535 & a, d = a >>> 16, e = 0, f = b.length; f > e; e++)
          c = (c + (255 & b.charCodeAt(e))) % 65521, d = (d + c) % 65521;
        return (d << 16 | c) >>> 0
      },
      g = function(a, b) {
        for (var c = 65535 & a, d = a >>> 16, e = 0, f = b.length; f > e; e++)
          c = (c + b[e]) %
          65521, d = (d + c) % 65521;
        return (d << 16 | c) >>> 0
      },
      l = {},
      h = l.Adler32 = function() {
        var c = function(a) {
            if (!(this instanceof c)) throw new TypeError(
              "Constructor cannot called be as a function.");
            if (!isFinite(a = null == a ? 1 : +a)) throw Error(
              "First arguments needs to be a finite number.");
            this.checksum = a >>> 0
          },
          k = c.prototype = {};
        return k.constructor = c, c.from = function(a) {
            return a.prototype = k, a
          }(function(a) {
            if (!(this instanceof c)) throw new TypeError(
              "Constructor cannot called be as a function.");
            if (null == a) throw Error(
              "First argument needs to be a string.");
            this.checksum = f(1, a.toString())
          }), c.fromUtf8 = function(a) {
            return a.prototype = k, a
          }(function(a) {
            if (!(this instanceof c)) throw new TypeError(
              "Constructor cannot called be as a function.");
            if (null == a) throw Error(
              "First argument needs to be a string.");
            a = e(a.toString());
            this.checksum = f(1, a)
          }), a && (c.fromBuffer = function(a) {
            return a.prototype = k, a
          }(function(a) {
            if (!(this instanceof c)) throw new TypeError(
              "Constructor cannot called be as a function.");
            if (!d(a)) throw Error(
              "First argument needs to be ArrayBuffer.");
            a = new Uint8Array(a);
            return this.checksum = g(1, a)
          })), k.update = function(a) {
            if (null == a) throw Error(
              "First argument needs to be a string.");
            return a = a.toString(), this.checksum = f(this.checksum, a)
          }, k.updateUtf8 = function(a) {
            if (null == a) throw Error(
              "First argument needs to be a string.");
            a = e(a.toString());
            return this.checksum = f(this.checksum, a)
          }, a && (k.updateBuffer = function(a) {
            if (!d(a)) throw Error(
              "First argument needs to be ArrayBuffer.");
            a = new Uint8Array(a);
            return this.checksum = g(this.checksum, a)
          }), k.clone =
          function() {
            return new h(this.checksum)
          }, c
      }();
    return l.from = function(a) {
      if (null == a) throw Error(
        "First argument needs to be a string.");
      return f(1, a.toString())
    }, l.fromUtf8 = function(a) {
      if (null == a) throw Error(
        "First argument needs to be a string.");
      a = e(a.toString());
      return f(1, a)
    }, a && (l.fromBuffer = function(a) {
      if (!d(a)) throw Error("First argument need to be ArrayBuffer.");
      a = new Uint8Array(a);
      return g(1, a)
    }), l
  });
  
  var e = function() {
    function a() {
      var b = this;
      b.build_tree = function(a) {
        var c, d, e, f = b.dyn_tree;
        d =
          b.stat_desc.static_tree;
        var h = b.stat_desc.elems,
          g = -1;
        a.heap_len = 0;
        a.heap_max = x;
        for (c = 0; h > c; c++) 0 !== f[2 * c] ? (a.heap[++a.heap_len] =
          g = c, a.depth[c] = 0) : f[2 * c + 1] = 0;
        for (; 2 > a.heap_len;) e = a.heap[++a.heap_len] = 2 > g ? ++g :
          0, f[2 * e] = 1, a.depth[e] = 0, a.opt_len--, d && (a.static_len -=
            d[2 * e + 1]);
        b.max_code = g;
        for (c = Math.floor(a.heap_len / 2); 1 <= c; c--) a.pqdownheap(
          f, c);
        e = h;
        do c = a.heap[1], a.heap[1] = a.heap[a.heap_len--], a.pqdownheap(
            f, 1), d = a.heap[1], a.heap[--a.heap_max] = c, a.heap[--a.heap_max] =
          d, f[2 * e] = f[2 * c] + f[2 * d], a.depth[e] = Math.max(a.depth[
              c],
            a.depth[d]) + 1, f[2 * c + 1] = f[2 * d + 1] = e, a.heap[1] =
          e++, a.pqdownheap(f, 1); while (2 <= a.heap_len);
        a.heap[--a.heap_max] = a.heap[1];
        var k, m, h = b.dyn_tree,
          g = b.stat_desc.static_tree,
          p = b.stat_desc.extra_bits,
          q = b.stat_desc.extra_base,
          r = b.stat_desc.max_length,
          s = 0;
        for (d = 0; l >= d; d++) a.bl_count[d] = 0;
        h[2 * a.heap[a.heap_max] + 1] = 0;
        for (c = a.heap_max + 1; x > c; c++) e = a.heap[c], d = h[2 *
            h[2 * e + 1] + 1] + 1, d > r && (d = r, s++), h[2 * e + 1] =
          d, e > b.max_code || (a.bl_count[d]++, k = 0, e >= q && (k =
            p[e - q]), m = h[2 * e], a.opt_len += m * (d + k), g && (a.static_len +=
            m * (g[2 * e + 1] + k)));
        if (0 !== s) {
          do {
            for (d = r - 1; 0 === a.bl_count[d];) d--;
            a.bl_count[d]--;
            a.bl_count[d + 1] += 2;
            a.bl_count[r]--;
            s -= 2
          } while (0 < s);
          for (d = r; 0 !== d; d--)
            for (e = a.bl_count[d]; 0 !== e;) k = a.heap[--c], k > b.max_code ||
              (h[2 * k + 1] != d && (a.opt_len += (d - h[2 * k + 1]) * h[
                2 * k], h[2 * k + 1] = d), e--)
        }
        k = b.max_code;
        m = a.bl_count;
        a = [];
        e = 0;
        for (c = 1; l >= c; c++) a[c] = e = e + m[c - 1] << 1;
        for (m = 0; k >= m; m++)
          if (h = f[2 * m + 1], 0 !== h) {
            c = f;
            e = 2 * m;
            d = a[h]++;
            g = 0;
            do g |= 1 & d, d >>>= 1, g <<= 1; while (0 < --h);
            c[e] = g >>> 1
          }
      }
    }

    function c(a, b, c, d, e) {
      this.static_tree = a;
      this.extra_bits = b;
      this.extra_base =
        c;
      this.elems = d;
      this.max_length = e
    }

    function d(a, b, c, e, f) {
      this.good_length = a;
      this.max_lazy = b;
      this.nice_length = c;
      this.max_chain = e;
      this.func = f
    }

    function e(a, b, c, d) {
      var f = a[2 * b];
      a = a[2 * c];
      return a > f || f == a && d[b] <= d[c]
    }

    function f() {
      function d() {
        var a;
        for (a = 0; v > a; a++) Ha[2 * a] = 0;
        for (a = 0; h > a; a++) eb[2 * a] = 0;
        for (a = 0; q > a; a++) Ma[2 * a] = 0;
        Ha[2 * s] = 1;
        Ya = La = sa.opt_len = sa.static_len = 0
      }

      function g(a, b) {
        var c, d, e = -1,
          f = a[1],
          h = 0,
          k = 7,
          l = 4;
        0 === f && (k = 138, l = 3);
        a[2 * (b + 1) + 1] = 65535;
        for (c = 0; b >= c; c++) d = f, f = a[2 * (c + 1) + 1], ++h <
          k && d == f || (l > h ?
            Ma[2 * d] += h : 0 !== d ? (d != e && Ma[2 * d]++, Ma[2 * z]++) :
            10 >= h ? Ma[2 * y]++ : Ma[2 * B]++, h = 0, e = d, 0 === f ?
            (k = 138, l = 3) : d == f ? (k = 6, l = 3) : (k = 7, l = 4))
      }

      function l(a) {
        sa.pending_buf[sa.pending++] = a
      }

      function m(a) {
        l(255 & a);
        l(a >>> 8 & 255)
      }

      function p(a, b) {
        Va > A - b ? (db |= a << Va & 65535, m(db), db = a >>> A - Va,
          Va += b - A) : (db |= a << Va & 65535, Va += b)
      }

      function t(a, b) {
        var c = 2 * a;
        p(65535 & b[c], 65535 & b[c + 1])
      }

      function u(a, b) {
        var c, d, e = -1,
          f = a[1],
          h = 0,
          g = 7,
          k = 4;
        0 === f && (g = 138, k = 3);
        for (c = 0; b >= c; c++)
          if (d = f, f = a[2 * (c + 1) + 1], !(++h < g && d == f)) {
            if (k > h) {
              do t(d, Ma); while (0 !== --h)
            } else 0 !== d ? (d != e && (t(d, Ma), h--), t(z, Ma), p(h -
              3, 2)) : 10 >= h ? (t(y, Ma), p(h - 3, 3)) : (t(B, Ma), p(
              h - 11, 7));
            h = 0;
            e = d;
            0 === f ? (g = 138, k = 3) : d == f ? (g = 6, k = 3) : (g =
              7, k = 4)
          }
      }

      function x() {
        16 == Va ? (m(db), db = 0, Va = 0) : 8 <= Va && (l(255 & db),
          db >>>= 8, Va -= 8)
      }

      function U(c, d) {
        var e, f, g;
        if (sa.pending_buf[Pa + 2 * Ya] = c >>> 8 & 255, sa.pending_buf[
            Pa + 2 * Ya + 1] = 255 & c, sa.pending_buf[qb + Ya] = 255 &
          d, Ya++, 0 === c ? Ha[2 * d]++ : (La++, c--, Ha[2 * (a._length_code[
            d] + k + 1)]++, eb[2 * a.d_code(c)]++), 0 === (8191 & Ya) &&
          2 < Sa) {
          e = 8 * Ya;
          f = fa - Xa;
          for (g = 0; h > g; g++) e += eb[2 * g] * (5 + a.extra_dbits[g]);
          if (e >>>= 3, La < Math.floor(Ya / 2) && e < Math.floor(f / 2))
            return !0
        }
        return Ya == nb - 1
      }

      function $a(c, d) {
        var e, f, h, g, l = 0;
        if (0 !== Ya) {
          do e = sa.pending_buf[Pa + 2 * l] << 8 & 65280 | 255 & sa.pending_buf[
              Pa + 2 * l + 1], f = 255 & sa.pending_buf[qb + l], l++, 0 ===
            e ? t(f, c) : (h = a._length_code[f], t(h + k + 1, c), g = a
              .extra_lbits[h], 0 !== g && (f -= a.base_length[h], p(f, g)),
              e--, h = a.d_code(e), t(h, d), g = a.extra_dbits[h], 0 !==
              g && (e -= a.base_dist[h], p(e, g))); while (Ya > l)
        }
        t(s, c);
        vb = c[2 * s + 1]
      }

      function lb() {
        8 < Va ? m(db) : 0 < Va && l(255 & db);
        Va = db = 0
      }

      function mb(a, b, c) {
        lb();
        vb =
          8;
        c && (m(b), m(~b));
        sa.pending_buf.set(la.subarray(a, a + b), sa.pending);
        sa.pending += b
      }

      function Qa(e) {
        var f = 0 <= Xa ? Xa : -1,
          h = fa - Xa,
          k, l, m = 0;
        if (0 < Sa) {
          rb.build_tree(sa);
          kb.build_tree(sa);
          g(Ha, rb.max_code);
          g(eb, kb.max_code);
          cb.build_tree(sa);
          for (m = q - 1; 3 <= m && 0 === Ma[2 * a.bl_order[m] + 1]; m--)
          ;
          m = (sa.opt_len += 3 * (m + 1) + 14, m);
          k = sa.opt_len + 3 + 7 >>> 3;
          l = sa.static_len + 3 + 7 >>> 3;
          k >= l && (k = l)
        } else k = l = h + 5;
        if (k >= h + 4 && -1 != f) p((ca << 1) + (e ? 1 : 0), 3), mb(f,
          h, !0);
        else if (l == k) p((ba << 1) + (e ? 1 : 0), 3), $a(c.static_ltree,
          c.static_dtree);
        else {
          p(($ <<
            1) + (e ? 1 : 0), 3);
          f = rb.max_code + 1;
          h = kb.max_code + 1;
          m += 1;
          p(f - 257, 5);
          p(h - 1, 5);
          p(m - 4, 4);
          for (k = 0; m > k; k++) p(Ma[2 * a.bl_order[k] + 1], 3);
          u(Ha, f - 1);
          u(eb, h - 1);
          $a(Ha, eb)
        }
        d();
        e && lb();
        Xa = fa;
        Fa.flush_pending()
      }

      function qa() {
        var a, b, c, d;
        do {
          if (d = Ga - xa - fa, 0 === d && 0 === fa && 0 === xa) d = ya;
          else if (-1 == d) d--;
          else if (fa >= ya + ya - Wa) {
            la.set(la.subarray(ya, ya + ya), 0);
            Ua -= ya;
            fa -= ya;
            Xa -= ya;
            c = a = Ta;
            do b = 65535 & Ca[--c], Ca[c] = b >= ya ? b - ya : 0; while (
              0 !== --a);
            c = a = ya;
            do b = 65535 & ra[--c], ra[c] = b >= ya ? b - ya : 0; while (
              0 !== --a);
            d += ya
          }
          if (0 === Fa.avail_in) break;
          a = Fa.read_buf(la, fa + xa, d);
          xa += a;
          xa >= Y && (wa = 255 & la[fa], wa = (wa << Ba ^ 255 & la[fa +
            1]) & Ia)
        } while (Wa > xa && 0 !== Fa.avail_in)
      }

      function Ea(a) {
        var b, c, d = Ra,
          e = fa,
          f = Za,
          h = fa > ya - Wa ? fa - (ya - Wa) : 0,
          g = jb,
          k = ib,
          l = fa + pa,
          m = la[e + f - 1],
          p = la[e + f];
        Za >= gb && (d >>= 2);
        g > xa && (g = xa);
        do
          if (b = a, la[b + f] == p && la[b + f - 1] == m && la[b] ==
            la[e] && la[++b] == la[e + 1]) {
            e += 2;
            for (b++; la[++e] == la[++b] && la[++e] == la[++b] && la[++e] ==
              la[++b] && la[++e] == la[++b] && la[++e] == la[++b] && la[++
                e] == la[++b] && la[++e] == la[++b] && la[++e] == la[++b] &&
              l > e;);
            if (c = pa - (l - e), e = l - pa, c > f) {
              if (Ua =
                a, f = c, c >= g) break;
              m = la[e + f - 1];
              p = la[e + f]
            }
          }
        while ((a = 65535 & ra[a & k]) > h && 0 !== --d);
        return xa >= f ? f : xa
      }

      function Oa(a) {
        for (var b, c, d = 0;;) {
          if (Wa > xa) {
            if (qa(), Wa > xa && a == P) return ma;
            if (0 === xa) break
          }
          if (xa >= Y && (wa = (wa << Ba ^ 255 & la[fa + (Y - 1)]) & Ia,
              d = 65535 & Ca[wa], ra[fa & ib] = Ca[wa], Ca[wa] = fa), Za =
            ka, ha = Ua, ka = Y - 1, 0 !== d && ob > Za && ya - Wa >= (
              fa - d & 65535) && (sb != E && (ka = Ea(d)), 5 >= ka && (sb ==
              F || ka == Y && 4096 < fa - Ua) && (ka = Y - 1)), Za >= Y &&
            Za >= ka) {
            c = fa + xa - Y;
            b = U(fa - 1 - ha, Za - Y);
            xa -= Za - 1;
            Za -= 2;
            do ++fa <= c && (wa = (wa << Ba ^ 255 & la[fa + (Y - 1)]) &
              Ia, d = 65535 & Ca[wa],
              ra[fa & ib] = Ca[wa], Ca[wa] = fa); while (0 !== --Za);
            if (hb = 0, ka = Y - 1, fa++, b && (Qa(!1), 0 === Fa.avail_out))
              return ma
          } else if (0 !== hb) {
            if (b = U(0, 255 & la[fa - 1]), b && Qa(!1), fa++, xa--, 0 ===
              Fa.avail_out) return ma
          } else hb = 1, fa++, xa--
        }
        return 0 !== hb && (U(0, 255 & la[fa - 1]), hb = 0), Qa(a == N),
          0 === Fa.avail_out ? a == N ? ja : ma : a == N ? ta : ua
      }
      var Fa, Ka, za, Aa, ya, na, ib, la, Ga, ra, Ca, wa, Ta, bb, Ia,
        Ba, Xa, ka, ha, hb, fa, Ua, xa, Za, Ra, ob, Sa, sb, gb, jb, Ha,
        eb, Ma, sa = this,
        rb = new a,
        kb = new a,
        cb = new a;
      sa.depth = [];
      var qb, nb, Ya, Pa, La, vb, db, Va;
      sa.bl_count = [];
      sa.heap = [];
      Ha = [];
      eb = [];
      Ma = [];
      sa.pqdownheap = function(a, b) {
        for (var c = sa.heap, d = c[b], f = b << 1; f <= sa.heap_len &&
          (f < sa.heap_len && e(a, c[f + 1], c[f], sa.depth) && f++, !e(
            a, d, c[f], sa.depth));) c[b] = c[f], b = f, f <<= 1;
        c[b] = d
      };
      sa.deflateInit = function(a, b, e, f, h, g) {
        f || (f = ia);
        h || (h = aa);
        g || (g = D);
        a.msg = null;
        b == C && (b = 6);
        if (1 > h || h > da || f != ia || 9 > e || 15 < e || 0 > b ||
          9 < b || 0 > g || g > E) a = L;
        else {
          a.dstate = sa;
          na = e;
          ya = 1 << na;
          ib = ya - 1;
          bb = h + 7;
          Ta = 1 << bb;
          Ia = Ta - 1;
          Ba = Math.floor((bb + Y - 1) / Y);
          la = new Uint8Array(2 * ya);
          ra = [];
          Ca = [];
          nb = 1 << h + 6;
          sa.pending_buf = new Uint8Array(4 *
            nb);
          za = 4 * nb;
          Pa = Math.floor(nb / 2);
          qb = 3 * nb;
          Sa = b;
          sb = g;
          a.total_in = a.total_out = 0;
          a.msg = null;
          sa.pending = 0;
          sa.pending_out = 0;
          Ka = X;
          Aa = P;
          rb.dyn_tree = Ha;
          rb.stat_desc = c.static_l_desc;
          kb.dyn_tree = eb;
          kb.stat_desc = c.static_d_desc;
          cb.dyn_tree = Ma;
          cb.stat_desc = c.static_bl_desc;
          Va = db = 0;
          vb = 8;
          d();
          Ga = 2 * ya;
          for (a = Ca[Ta - 1] = 0; Ta - 1 > a; a++) Ca[a] = 0;
          ob = ga[Sa].max_lazy;
          gb = ga[Sa].good_length;
          jb = ga[Sa].nice_length;
          Ra = ga[Sa].max_chain;
          xa = Xa = fa = 0;
          ka = Za = Y - 1;
          wa = hb = 0;
          a = K
        }
        return a
      };
      sa.deflateEnd = function() {
        return Ka != va && Ka != X && Ka != oa ? L :
          (sa.pending_buf = null, Ca = null, ra = null, la = null, sa.dstate =
            null, Ka == X ? T : K)
      };
      sa.deflateParams = function(a, b, c) {
        var d = K;
        return b == C && (b = 6), 0 > b || 9 < b || 0 > c || c > E ? L :
          (ga[Sa].func != ga[b].func && 0 !== a.total_in && (d = a.deflate(
            G)), Sa != b && (Sa = b, ob = ga[Sa].max_lazy, gb = ga[Sa].good_length,
            jb = ga[Sa].nice_length, Ra = ga[Sa].max_chain), sb = c, d)
      };
      sa.deflateSetDictionary = function(a, b, c) {
        a = c;
        var d = 0;
        if (!b || Ka != va) return L;
        if (Y > a) return K;
        a > ya - Wa && (a = ya - Wa, d = c - a);
        la.set(b.subarray(d, d + a), 0);
        Xa = fa = a;
        wa = 255 & la[0];
        wa = (wa << Ba ^ 255 & la[1]) &
          Ia;
        for (b = 0; a - Y >= b; b++) wa = (wa << Ba ^ 255 & la[b + (Y -
          1)]) & Ia, ra[b & ib] = Ca[wa], Ca[wa] = b;
        return K
      };
      sa.deflate = function(a, b) {
        var d, e, f, h;
        if (b > N || 0 > b) return L;
        if (!a.next_out || !a.next_in && 0 !== a.avail_in || Ka == oa &&
          b != N) return a.msg = W[V - L], L;
        if (0 === a.avail_out) return a.msg = W[V - Q], Q;
        Fa = a;
        h = Aa;
        Aa = b;
        Ka == va && (e = ia + (na - 8 << 4) << 8, f = (Sa - 1 & 255) >>
          1, 3 < f && (f = 3), e |= f << 6, 0 !== fa && (e |= Da), Ka =
          X, e += 31 - e % 31, l(e >> 8 & 255), l(e & 255));
        if (0 !== sa.pending) {
          if (Fa.flush_pending(), 0 === Fa.avail_out) return Aa = -1, K
        } else if (0 === Fa.avail_in && h >= b &&
          b != N) return Fa.msg = W[V - Q], Q;
        if (Ka == oa && 0 !== Fa.avail_in) return a.msg = W[V - Q], Q;
        if (0 !== Fa.avail_in || 0 !== xa || b != P && Ka != oa) {
          switch (h = -1, ga[Sa].func) {
            case R:
              a: {
                h = 65535;
                for (h > za - 5 && (h = za - 5);;) {
                  if (1 >= xa) {
                    if (qa(), 0 === xa && b == P) {
                      h = ma;
                      break a
                    }
                    if (0 === xa) break
                  }
                  if ((fa += xa, xa = 0, d = Xa + h, (0 === fa || fa >= d) &&
                      (xa = fa - d, fa = d, Qa(!1), 0 === Fa.avail_out)) ||
                    fa - Xa >= ya - Wa && (Qa(!1), 0 === Fa.avail_out)) {
                    h = ma;
                    break a
                  }
                }
                h = (Qa(b == N), 0 === Fa.avail_out ? b == N ? ja : ma :
                  b == N ? ta : ua)
              }
              break;
            case ea:
              a: {
                for (h = 0;;) {
                  if (Wa > xa) {
                    if (qa(), Wa > xa && b == P) {
                      h = ma;
                      break a
                    }
                    if (0 ===
                      xa) break
                  }
                  if (xa >= Y && (wa = (wa << Ba ^ 255 & la[fa + (Y - 1)]) &
                      Ia, h = 65535 & Ca[wa], ra[fa & ib] = Ca[wa], Ca[wa] =
                      fa), 0 !== h && ya - Wa >= (fa - h & 65535) && sb != E &&
                    (ka = Ea(h)), ka >= Y)
                    if (d = U(fa - Ua, ka - Y), xa -= ka, ob >= ka && xa >=
                      Y) {
                      ka--;
                      do fa++, wa = (wa << Ba ^ 255 & la[fa + (Y - 1)]) & Ia,
                        h = 65535 & Ca[wa], ra[fa & ib] = Ca[wa], Ca[wa] = fa; while (
                        0 !== --ka);
                      fa++
                    } else fa += ka, ka = 0, wa = 255 & la[fa], wa = (wa <<
                      Ba ^ 255 & la[fa + 1]) & Ia;
                  else d = U(0, 255 & la[fa]), xa--, fa++;
                  if (d && (Qa(!1), 0 === Fa.avail_out)) {
                    h = ma;
                    break a
                  }
                }
                h = (Qa(b == N), 0 === Fa.avail_out ? b == N ? ja : ma :
                  b == N ? ta : ua)
              }
              break;
            case Z:
              h =
                Oa(b)
          }
          if ((h == ja || h == ta) && (Ka = oa), h == ma || h == ja)
            return 0 === Fa.avail_out && (Aa = -1), K;
          if (h == ua) {
            if (b == G) p(ba << 1, 3), t(s, c.static_ltree), x(), 9 > 1 +
              vb + 10 - Va && (p(ba << 1, 3), t(s, c.static_ltree), x()),
              vb = 7;
            else if (p((ca << 1) + 0, 3), mb(0, 0, !0), b == J)
              for (d = 0; Ta > d; d++) Ca[d] = 0;
            if (Fa.flush_pending(), 0 === Fa.avail_out) return Aa = -1,
              K
          }
        }
        return b != N ? K : O
      }
    }

    function g() {
      this.total_out = this.avail_out = this.total_in = this.avail_in =
        this.next_out_index = this.next_in_index = 0
    }
    var l = 15,
      h = 30,
      q = 19,
      k = 256,
      v = k + 1 + 29,
      x = 2 * v + 1,
      s = 256,
      z = 16,
      y = 17,
      B = 18,
      A = 16,
      C = -1,
      F = 1,
      E = 2,
      D = 0,
      P = 0,
      G = 1,
      J = 3,
      N = 4,
      K = 0,
      O = 1,
      V = 2,
      L = -2,
      T = -3,
      Q = -5,
      U = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8,
        8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10,
        10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11,
        11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12,
        12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
        12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13,
        13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
        13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14,
        14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
        14, 14, 14, 14,
        14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
        14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
        14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
        15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
        15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
        15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
        15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20,
        21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23,
        23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
        24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,
        25, 25, 25, 25, 26, 26, 26,
        26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
        26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27,
        27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,
        27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28,
        28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,
        28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,
        28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,
        28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29,
        29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
        29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
        29, 29, 29, 29, 29, 29, 29,
        29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
        29, 29, 29, 29, 29, 29
      ];
    a._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11,
      11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15,
      15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17,
      17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19,
      19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20,
      20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,
      21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,
      22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,
      23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
      24,
      24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
      25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,
      25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,
      26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
      26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
      27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,
      27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28
    ];
    a.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24,
      28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0
    ];
    a.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96,
      128, 192, 256, 384, 512,
      768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384,
      24576
    ];
    a.d_code = function(a) {
      return 256 > a ? U[a] : U[256 + (a >>> 7)]
    };
    a.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3,
      3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0
    ];
    a.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7,
      7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13
    ];
    a.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      2, 3, 7
    ];
    a.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13,
      2, 14, 1, 15
    ];
    c.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108,
      8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8,
      252, 8, 2, 8, 130, 8,
      66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82,
      8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8,
      202, 8, 42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218,
      8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8,
      38, 8, 166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54,
      8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8,
      174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190,
      8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8,
      97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113,
      8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8,
      233, 8, 25, 8, 153, 8, 89, 8, 217, 8,
      57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8, 69, 8, 197, 8, 37,
      8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8,
      181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173,
      8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8,
      125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9,
      211, 9, 467, 9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9,
      243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9,
      203, 9, 459, 9, 43, 9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9,
      235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9,
      219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379, 9,
      251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391,
      9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9,
      103, 9, 359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9, 407, 9,
      87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9,
      119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9,
      79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9,
      111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9,
      95, 9, 351, 9, 223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9,
      127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7,
      80, 7, 48, 7, 112, 7, 8, 7, 72, 7, 40, 7, 104, 7, 24, 7, 88, 7,
      56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7,
      116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163,
      8, 99, 8, 227, 8
    ];
    c.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28,
      5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5,
      17, 5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11,
      5, 27, 5, 7, 5, 23, 5
    ];
    c.static_l_desc = new c(c.static_ltree, a.extra_lbits, k + 1, v, l);
    c.static_d_desc = new c(c.static_dtree, a.extra_dbits, 0, h, l);
    c.static_bl_desc = new c(null, a.extra_blbits, 0, q, 7);
    var da = 9,
      aa = 8,
      R = 0,
      ea = 1,
      Z = 2,
      ga = [new d(0, 0, 0, 0, R), new d(4, 4, 8, 4, ea), new d(4, 5, 16,
          8, ea), new d(4, 6, 32, 32, ea), new d(4, 4, 16, 16, Z), new d(
          8, 16, 32, 32, Z), new d(8, 16, 128, 128,
          Z), new d(8, 32, 128, 256, Z), new d(32, 128, 258, 1024, Z),
        new d(32, 258, 258, 4096, Z)
      ],
      W =
      "need dictionary;stream end;;;stream error;data error;;buffer error;;"
      .split(";"),
      ma = 0,
      ua = 1,
      ja = 2,
      ta = 3,
      Da = 32,
      va = 42,
      X = 113,
      oa = 666,
      ia = 8,
      ca = 0,
      ba = 1,
      $ = 2,
      Y = 3,
      pa = 258,
      Wa = pa + Y + 1;
    return g.prototype = {
        deflateInit: function(a, b) {
          return this.dstate = new f, b || (b = l), this.dstate.deflateInit(
            this, a, b)
        },
        deflate: function(a) {
          return this.dstate ? this.dstate.deflate(this, a) : L
        },
        deflateEnd: function() {
          if (!this.dstate) return L;
          var a = this.dstate.deflateEnd();
          return this.dstate = null, a
        },
        deflateParams: function(a, b) {
          return this.dstate ? this.dstate.deflateParams(this, a, b) : L
        },
        deflateSetDictionary: function(a, b) {
          return this.dstate ? this.dstate.deflateSetDictionary(this, a,
            b) : L
        },
        read_buf: function(a, b, c) {
          var d = this.avail_in;
          return d > c && (d = c), 0 === d ? 0 : (this.avail_in -= d, a.set(
            this.next_in.subarray(this.next_in_index, this.next_in_index +
              d), b), this.next_in_index += d, this.total_in += d, d)
        },
        flush_pending: function() {
          var a = this.dstate.pending;
          a > this.avail_out && (a = this.avail_out);
          0 !== a && (this.next_out.set(this.dstate.pending_buf.subarray(
                this.dstate.pending_out, this.dstate.pending_out + a),
              this.next_out_index), this.next_out_index += a, this.dstate
            .pending_out += a, this.total_out += a, this.avail_out -= a,
            this.dstate.pending -= a, 0 === this.dstate.pending && (this
              .dstate.pending_out = 0))
        }
      },
      function(a) {
        var b = new g,
          c = P,
          d = new Uint8Array(512);
        "undefined" == typeof a && (a = C);
        b.deflateInit(a);
        b.next_out = d;
        this.append = function(a, e) {
          var f, h, g = [],
            k = 0,
            l = 0,
            m = 0;
          if (a.length) {
            b.next_in_index = 0;
            b.next_in = a;
            b.avail_in =
              a.length;
            do {
              if (b.next_out_index = 0, b.avail_out = 512, f = b.deflate(c),
                f != K) throw "deflating: " + b.msg;
              b.next_out_index && (512 == b.next_out_index ? g.push(new Uint8Array(
                d)) : g.push(new Uint8Array(d.subarray(0, b.next_out_index))));
              m += b.next_out_index;
              e && 0 < b.next_in_index && b.next_in_index != k && (e(b.next_in_index),
                k = b.next_in_index)
            } while (0 < b.avail_in || 0 === b.avail_out);
            return h = new Uint8Array(m), g.forEach(function(a) {
              h.set(a, l);
              l += a.length
            }), h
          }
        };
        this.flush = function() {
          var a, c, e = [],
            f = 0,
            h = 0;
          do {
            if (b.next_out_index = 0,
              b.avail_out = 512, a = b.deflate(N), a != O && a != K) throw "deflating: " +
              b.msg;
            0 < 512 - b.avail_out && e.push(new Uint8Array(d.subarray(0,
              b.next_out_index)));
            h += b.next_out_index
          } while (0 < b.avail_in || 0 === b.avail_out);
          return b.deflateEnd(), c = new Uint8Array(h), e.forEach(
            function(a) {
              c.set(a, f);
              f += a.length
            }), c
        }
      }
  }(this);

  ! function(a) {
    var c;
    c = function() {
      function c(a) {
        var b, d, e, f, g, l;
        this.data = a;
        this.pos = 8;
        this.palette = [];
        this.imgData = [];
        this.transparency = {};
        this.animation = null;
        this.text = {};
        for (f = null;;) {
          b = this.readUInt32();
          l = a = void 0;
          l = [];
          for (a = 0; 4 > a; ++a) l.push(String.fromCharCode(this.data[
            this.pos++]));
          switch (a = l.join("")) {
            case "IHDR":
              this.width = this.readUInt32();
              this.height = this.readUInt32();
              this.bits = this.data[this.pos++];
              this.colorType = this.data[this.pos++];
              this.compressionMethod = this.data[this.pos++];
              this.filterMethod = this.data[this.pos++];
              this.interlaceMethod = this.data[this.pos++];
              break;
            case "acTL":
              this.animation = {
                numFrames: this.readUInt32(),
                numPlays: this.readUInt32() || 1 / 0,
                frames: []
              };
              break;
            case "PLTE":
              this.palette =
                this.read(b);
              break;
            case "fcTL":
              f && this.animation.frames.push(f);
              this.pos += 4;
              f = {
                width: this.readUInt32(),
                height: this.readUInt32(),
                xOffset: this.readUInt32(),
                yOffset: this.readUInt32()
              };
              a = this.readUInt16();
              b = this.readUInt16() || 100;
              f.delay = 1E3 * a / b;
              f.disposeOp = this.data[this.pos++];
              f.blendOp = this.data[this.pos++];
              f.data = [];
              break;
            case "IDAT":
            case "fdAT":
              "fdAT" === a && (this.pos += 4, b -= 4);
              a = (null != f ? f.data : void 0) || this.imgData;
              for (l = 0; 0 <= b ? b > l : l > b; 0 <= b ? ++l : --l) a.push(
                this.data[this.pos++]);
              break;
            case "tRNS":
              switch (this.transparency = {}, this.colorType) {
                case 3:
                  if (e = this.palette.length / 3, this.transparency.indexed =
                    this.read(b), this.transparency.indexed.length > e) throw Error(
                    "More transparent colors than palette size");
                  if (g = e - this.transparency.indexed.length, 0 < g)
                    for (b = 0; 0 <= g ? g > b : b > g; 0 <= g ? ++b : --b)
                      this.transparency.indexed.push(255);
                  break;
                case 0:
                  this.transparency.grayscale = this.read(b)[0];
                  break;
                case 2:
                  this.transparency.rgb = this.read(b)
              }
              break;
            case "tEXt":
              l = this.read(b);
              b = l.indexOf(0);
              a = String.fromCharCode.apply(String, l.slice(0, b));
              this.text[a] =
                String.fromCharCode.apply(String, l.slice(b + 1));
              break;
            case "IEND":
              f && this.animation.frames.push(f);
              a: {
                switch (this.colorType) {
                  case 0:
                  case 3:
                  case 4:
                    e = 1;
                    break a;
                  case 2:
                  case 6:
                    e = 3;
                    break a
                }
                e = void 0
              }
              this.colors = e;
              this.hasAlphaChannel = 4 === (d = this.colorType) || 6 === d;
              d = this.colors + (this.hasAlphaChannel ? 1 : 0);
              this.pixelBitlength = this.bits * d;
              a: {
                switch (this.colors) {
                  case 1:
                    d = "DeviceGray";
                    break a;
                  case 3:
                    d = "DeviceRGB";
                    break a
                }
                d = void 0
              }
              return this.colorSpace = d, this.imgData = new Uint8Array(
                this.imgData), void 0;
            default:
              this.pos +=
                b
          }
          if (this.pos += 4, this.pos > this.data.length) throw Error(
            "Incomplete or corrupt PNG file");
        }
      }
      var d, e, f;
      c.load = function(a, b, d) {
        var e;
        return "function" == typeof b && (d = b), e = new XMLHttpRequest,
          e.open("GET", a, !0), e.responseType = "arraybuffer", e.onload =
          function() {
            var a, f;
            return a = new Uint8Array(e.response || e.mozResponseArrayBuffer),
              f = new c(a), "function" == typeof(null != b ? b.getContext :
                void 0) && f.render(b), "function" == typeof d ? d(f) :
              void 0
          }, e.send(null)
      };
      c.prototype.read = function(a) {
        var b, c;
        c = [];
        for (b = 0; 0 <= a ? a > b :
          b > a; 0 <= a ? ++b : --b) c.push(this.data[this.pos++]);
        return c
      };
      c.prototype.readUInt32 = function() {
        var a, b, c, d;
        return a = this.data[this.pos++] << 24, b = this.data[this.pos++] <<
          16, c = this.data[this.pos++] << 8, d = this.data[this.pos++],
          a | b | c | d
      };
      c.prototype.readUInt16 = function() {
        var a, b;
        return a = this.data[this.pos++] << 8, b = this.data[this.pos++],
          a | b
      };
      c.prototype.decodePixels = function(a) {
        var b, c, d, e, f, g, m, p, q, t, u, w, D, P, G;
        if (null == a && (a = this.imgData), 0 === a.length) return new Uint8Array(
          0);
        a = new l(a);
        a = a.getBytes();
        p = this.pixelBitlength /
          8;
        w = p * this.width;
        q = new Uint8Array(w * this.height);
        g = a.length;
        for (c = t = u = 0; g > t;) {
          switch (a[t++]) {
            case 0:
              for (b = 0; w > b; b += 1) q[c++] = a[t++];
              break;
            case 1:
              for (e = G = 0; w > G; e = G += 1) b = a[t++], f = p > e ? 0 :
                q[c - p], q[c++] = (b + f) % 256;
              break;
            case 2:
              for (e = f = 0; w > f; e = f += 1) b = a[t++], d = (e - e %
                  p) / p, D = u && q[(u - 1) * w + d * p + e % p], q[c++] =
                (D + b) % 256;
              break;
            case 3:
              for (e = G = 0; w > G; e = G += 1) b = a[t++], d = (e - e %
                  p) / p, f = p > e ? 0 : q[c - p], D = u && q[(u - 1) * w +
                  d * p + e % p], q[c++] = (b + Math.floor((f + D) / 2)) %
                256;
              break;
            case 4:
              for (e = G = 0; w > G; e = G += 1) b = a[t++], d = (e - e %
                  p) / p, f = p > e ? 0 : q[c - p],
                0 === u ? D = P = 0 : (D = q[(u - 1) * w + d * p + e % p],
                  P = d && q[(u - 1) * w + (d - 1) * p + e % p]), m = f + D -
                P, e = Math.abs(m - f), d = Math.abs(m - D), m = Math.abs(m -
                  P), f = d >= e && m >= e ? f : m >= d ? D : P, q[c++] = (b +
                  f) % 256;
              break;
            default:
              throw Error("Invalid filter algorithm: " + a[t - 1]);
          }
          u++
        }
        return q
      };
      c.prototype.decodePalette = function() {
        var a, b, c, d, e, f, g, l, m;
        c = this.palette;
        f = this.transparency.indexed || [];
        e = new Uint8Array((f.length || 0) + c.length);
        b = g = a = d = 0;
        for (l = c.length; l > g; b = g += 3) e[d++] = c[b], e[d++] = c[
            b + 1], e[d++] = c[b + 2], e[d++] = null != (m = f[a++]) ? m :
          255;
        return e
      };
      c.prototype.copyToImageData = function(a, b) {
        var c, d, e, f, g, l, m, p, q;
        if (d = this.colors, p = null, c = this.hasAlphaChannel, this.palette
          .length && (p = null != (q = this._decodedPalette) ? q : this._decodedPalette =
            this.decodePalette(), d = 4, c = !0), e = a.data || a, m = e.length,
          g = p || b, f = l = 0, 1 === d)
          for (; m > f;) d = p ? 4 * b[f / 4] : l, l = g[d++], e[f++] =
            l, e[f++] = l, e[f++] = l, e[f++] = c ? g[d++] : 255, l = d;
        else
          for (; m > f;) d = p ? 4 * b[f / 4] : l, e[f++] = g[d++], e[f++] =
            g[d++], e[f++] = g[d++], e[f++] = c ? g[d++] : 255, l = d
      };
      c.prototype.decode = function() {
        var a;
        return a = new Uint8Array(this.width *
            this.height * 4), this.copyToImageData(a, this.decodePixels()),
          a
      };
      try {
        e = a.document.createElement("canvas"), f = e.getContext("2d")
      } catch (g) {
        return -1
      }
      return d = function(a) {
          var b;
          return f.width = a.width, f.height = a.height, f.clearRect(0, 0,
              a.width, a.height), f.putImageData(a, 0, 0), b = new Image, b
            .src = e.toDataURL(), b
        }, c.prototype.decodeFrames = function(a) {
          var b, c, e, f, g, l, m;
          if (this.animation) {
            l = this.animation.frames;
            m = [];
            b = f = 0;
            for (g = l.length; g > f; b = ++f) b = l[b], c = a.createImageData(
                b.width, b.height), e = this.decodePixels(new Uint8Array(b.data)),
              this.copyToImageData(c, e), b.imageData = c, m.push(b.image =
                d(c));
            return m
          }
        }, c.prototype.renderFrame = function(a, b) {
          var c, d, e;
          return d = this.animation.frames, c = d[b], e = d[b - 1], 0 ===
            b && a.clearRect(0, 0, this.width, this.height), 1 === (null !=
              e ? e.disposeOp : void 0) ? a.clearRect(e.xOffset, e.yOffset,
              e.width, e.height) : 2 === (null != e ? e.disposeOp : void 0) &&
            a.putImageData(e.imageData, e.xOffset, e.yOffset), 0 === c.blendOp &&
            a.clearRect(c.xOffset, c.yOffset, c.width, c.height), a.drawImage(
              c.image, c.xOffset, c.yOffset)
        }, c.prototype.animate =
        function(a) {
          var b, c, d, e, f, g, l = this;
          return c = 0, g = this.animation, e = g.numFrames, d = g.frames,
            f = g.numPlays, (b = function() {
              var g, m;
              return g = c++ % e, m = d[g], l.renderFrame(a, g), 1 < e &&
                f > c / e ? l.animation._timeout = setTimeout(b, m.delay) :
                void 0
            })()
        }, c.prototype.stopAnimation = function() {
          var a;
          return clearTimeout(null != (a = this.animation) ? a._timeout :
            void 0)
        }, c.prototype.render = function(a) {
          var b, c;
          return a._png && a._png.stopAnimation(), a._png = this, a.width =
            this.width, a.height = this.height, b = a.getContext("2d"),
            this.animation ?
            (this.decodeFrames(b), this.animate(b)) : (c = b.createImageData(
                this.width, this.height), this.copyToImageData(c, this.decodePixels()),
              b.putImageData(c, 0, 0))
        }, c
    }();
    a.PNG = c
  }("undefined" != typeof window && window || this);

  var q = function() {
      function a() {
        this.bufferLength = this.pos = 0;
        this.eof = !1;
        this.buffer = null
      }
      return a.prototype = {
        ensureBuffer: function(a) {
          var b = this.buffer,
            d = b ? b.byteLength : 0;
          if (d > a) return b;
          for (var e = 512; a > e;) e <<= 1;
          a = new Uint8Array(e);
          for (e = 0; d > e; ++e) a[e] = b[e];
          return this.buffer = a
        },
        getByte: function() {
          for (var a =
              this.pos; this.bufferLength <= a;) {
            if (this.eof) return null;
            this.readBlock()
          }
          return this.buffer[this.pos++]
        },
        getBytes: function(a) {
          var b = this.pos;
          if (a) {
            this.ensureBuffer(b + a);
            for (a = b + a; !this.eof && this.bufferLength < a;) this.readBlock();
            var d = this.bufferLength;
            a > d && (a = d)
          } else {
            for (; !this.eof;) this.readBlock();
            a = this.bufferLength
          }
          return this.pos = a, this.buffer.subarray(b, a)
        },
        lookChar: function() {
          for (var a = this.pos; this.bufferLength <= a;) {
            if (this.eof) return null;
            this.readBlock()
          }
          return String.fromCharCode(this.buffer[this.pos])
        },
        getChar: function() {
          for (var a = this.pos; this.bufferLength <= a;) {
            if (this.eof) return null;
            this.readBlock()
          }
          return String.fromCharCode(this.buffer[this.pos++])
        },
        makeSubStream: function(a, b, d) {
          for (var e = a + b; this.bufferLength <= e && !this.eof;) this
            .readBlock();
          return new Stream(this.buffer, a, b, d)
        },
        skip: function(a) {
          a || (a = 1);
          this.pos += a
        },
        reset: function() {
          this.pos = 0
        }
      }, a
    }(),
    l = function() {
      function a(b) {
        throw Error(b);
      }

      function c(c) {
        var d = 0,
          e = c[d++],
          f = c[d++]; - 1 != e && -1 != f || a(
          "Invalid header in flate stream");
        8 != (15 &
          e) && a("Unknown compression method in flate stream");
        0 != ((e << 8) + f) % 31 && a("Bad FCHECK in flate stream");
        32 & f && a("FDICT bit set in flate stream");
        this.bytes = c;
        this.bytesPos = d;
        this.codeBuf = this.codeSize = 0;
        q.call(this)
      }
      if ("undefined" != typeof Uint32Array) {
        var d = new Uint32Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4,
            12, 3, 13, 2, 14, 1, 15
          ]),
          e = new Uint32Array([3, 4, 5, 6, 7, 8, 9, 10, 65547, 65549,
            65551, 65553, 131091, 131095, 131099, 131103, 196643, 196651,
            196659, 196667, 262211, 262227, 262243, 262259, 327811, 327843,
            327875, 327907, 258, 258,
            258
          ]),
          f = new Uint32Array([1, 2, 3, 4, 65541, 65543, 131081, 131085,
            196625, 196633, 262177, 262193, 327745, 327777, 393345, 393409,
            459009, 459137, 524801, 525057, 590849, 591361, 657409, 658433,
            724993, 727041, 794625, 798721, 868353, 876545
          ]),
          g = [new Uint32Array([459008, 524368, 524304, 524568, 459024,
            524400, 524336, 590016, 459016, 524384, 524320, 589984,
            524288, 524416, 524352, 590048, 459012, 524376, 524312,
            589968, 459028, 524408, 524344, 590032, 459020, 524392,
            524328, 59E4, 524296, 524424, 524360, 590064, 459010, 524372,
            524308, 524572, 459026, 524404, 524340,
            590024, 459018, 524388, 524324, 589992, 524292, 524420,
            524356, 590056, 459014, 524380, 524316, 589976, 459030,
            524412, 524348, 590040, 459022, 524396, 524332, 590008,
            524300, 524428, 524364, 590072, 459009, 524370, 524306,
            524570, 459025, 524402, 524338, 590020, 459017, 524386,
            524322, 589988, 524290, 524418, 524354, 590052, 459013,
            524378, 524314, 589972, 459029, 524410, 524346, 590036,
            459021, 524394, 524330, 590004, 524298, 524426, 524362,
            590068, 459011, 524374, 524310, 524574, 459027, 524406,
            524342, 590028, 459019, 524390, 524326, 589996, 524294,
            524422, 524358,
            590060, 459015, 524382, 524318, 589980, 459031, 524414,
            524350, 590044, 459023, 524398, 524334, 590012, 524302,
            524430, 524366, 590076, 459008, 524369, 524305, 524569,
            459024, 524401, 524337, 590018, 459016, 524385, 524321,
            589986, 524289, 524417, 524353, 590050, 459012, 524377,
            524313, 589970, 459028, 524409, 524345, 590034, 459020,
            524393, 524329, 590002, 524297, 524425, 524361, 590066,
            459010, 524373, 524309, 524573, 459026, 524405, 524341,
            590026, 459018, 524389, 524325, 589994, 524293, 524421,
            524357, 590058, 459014, 524381, 524317, 589978, 459030,
            524413, 524349,
            590042, 459022, 524397, 524333, 590010, 524301, 524429,
            524365, 590074, 459009, 524371, 524307, 524571, 459025,
            524403, 524339, 590022, 459017, 524387, 524323, 589990,
            524291, 524419, 524355, 590054, 459013, 524379, 524315,
            589974, 459029, 524411, 524347, 590038, 459021, 524395,
            524331, 590006, 524299, 524427, 524363, 590070, 459011,
            524375, 524311, 524575, 459027, 524407, 524343, 590030,
            459019, 524391, 524327, 589998, 524295, 524423, 524359,
            590062, 459015, 524383, 524319, 589982, 459031, 524415,
            524351, 590046, 459023, 524399, 524335, 590014, 524303,
            524431, 524367,
            590078, 459008, 524368, 524304, 524568, 459024, 524400,
            524336, 590017, 459016, 524384, 524320, 589985, 524288,
            524416, 524352, 590049, 459012, 524376, 524312, 589969,
            459028, 524408, 524344, 590033, 459020, 524392, 524328,
            590001, 524296, 524424, 524360, 590065, 459010, 524372,
            524308, 524572, 459026, 524404, 524340, 590025, 459018,
            524388, 524324, 589993, 524292, 524420, 524356, 590057,
            459014, 524380, 524316, 589977, 459030, 524412, 524348,
            590041, 459022, 524396, 524332, 590009, 524300, 524428,
            524364, 590073, 459009, 524370, 524306, 524570, 459025,
            524402, 524338,
            590021, 459017, 524386, 524322, 589989, 524290, 524418,
            524354, 590053, 459013, 524378, 524314, 589973, 459029,
            524410, 524346, 590037, 459021, 524394, 524330, 590005,
            524298, 524426, 524362, 590069, 459011, 524374, 524310,
            524574, 459027, 524406, 524342, 590029, 459019, 524390,
            524326, 589997, 524294, 524422, 524358, 590061, 459015,
            524382, 524318, 589981, 459031, 524414, 524350, 590045,
            459023, 524398, 524334, 590013, 524302, 524430, 524366,
            590077, 459008, 524369, 524305, 524569, 459024, 524401,
            524337, 590019, 459016, 524385, 524321, 589987, 524289,
            524417, 524353,
            590051, 459012, 524377, 524313, 589971, 459028, 524409,
            524345, 590035, 459020, 524393, 524329, 590003, 524297,
            524425, 524361, 590067, 459010, 524373, 524309, 524573,
            459026, 524405, 524341, 590027, 459018, 524389, 524325,
            589995, 524293, 524421, 524357, 590059, 459014, 524381,
            524317, 589979, 459030, 524413, 524349, 590043, 459022,
            524397, 524333, 590011, 524301, 524429, 524365, 590075,
            459009, 524371, 524307, 524571, 459025, 524403, 524339,
            590023, 459017, 524387, 524323, 589991, 524291, 524419,
            524355, 590055, 459013, 524379, 524315, 589975, 459029,
            524411, 524347,
            590039, 459021, 524395, 524331, 590007, 524299, 524427,
            524363, 590071, 459011, 524375, 524311, 524575, 459027,
            524407, 524343, 590031, 459019, 524391, 524327, 589999,
            524295, 524423, 524359, 590063, 459015, 524383, 524319,
            589983, 459031, 524415, 524351, 590047, 459023, 524399,
            524335, 590015, 524303, 524431, 524367, 590079
          ]), 9],
          l = [new Uint32Array([327680, 327696, 327688, 327704, 327684,
            327700, 327692, 327708, 327682, 327698, 327690, 327706,
            327686, 327702, 327694, 0, 327681, 327697, 327689, 327705,
            327685, 327701, 327693, 327709, 327683, 327699, 327691,
            327707,
            327687, 327703, 327695, 0
          ]), 5];
        return c.prototype = Object.create(q.prototype), c.prototype.getBits =
          function(c) {
            for (var d, e = this.codeSize, f = this.codeBuf, g = this.bytes,
                l = this.bytesPos; c > e;) "undefined" == typeof(d = g[l++]) &&
              a("Bad encoding in flate stream"), f |= d << e, e += 8;
            return d = f & (1 << c) - 1, this.codeBuf = f >> c, this.codeSize =
              e - c, this.bytesPos = l, d
          }, c.prototype.getCode = function(c) {
            var d = c[0],
              e = c[1];
            c = this.codeSize;
            for (var f = this.codeBuf, g = this.bytes, l = this.bytesPos; e >
              c;) {
              var m;
              "undefined" == typeof(m = g[l++]) && a(
                "Bad encoding in flate stream");
              f |= m << c;
              c += 8
            }
            e = d[f & (1 << e) - 1];
            d = e >> 16;
            e &= 65535;
            return (0 == c || d > c || 0 == d) && a(
                "Bad encoding in flate stream"), this.codeBuf = f >> d, this.codeSize =
              c - d, this.bytesPos = l, e
          }, c.prototype.generateHuffmanTable = function(a) {
            for (var b = a.length, c = 0, d = 0; b > d; ++d) a[d] > c && (c =
              a[d]);
            for (var e = 1 << c, f = new Uint32Array(e), g = 1, l = 0, m =
                2; c >= g; ++g, l <<= 1, m <<= 1)
              for (var p = 0; b > p; ++p)
                if (a[p] == g) {
                  for (var q = 0, t = l, d = 0; g > d; ++d) q = q << 1 | 1 & t,
                    t >>= 1;
                  for (d = q; e > d; d += m) f[d] = g << 16 | p;
                  ++l
                }
            return [f, c]
          }, c.prototype.readBlock = function() {
            function c(a, b, d, e,
              f) {
              for (a = a.getBits(d) + e; 0 < a--;) b[y++] = f
            }
            var q = this.getBits(3);
            if (1 & q && (this.eof = !0), q >>= 1, 0 == q) {
              var k, v = this.bytes,
                x = this.bytesPos;
              "undefined" == typeof(k = v[x++]) && a(
                "Bad block header in flate stream");
              var s = k;
              "undefined" == typeof(k = v[x++]) && a(
                "Bad block header in flate stream");
              s |= k << 8;
              "undefined" == typeof(k = v[x++]) && a(
                "Bad block header in flate stream");
              q = k;
              "undefined" == typeof(k = v[x++]) && a(
                "Bad block header in flate stream");
              (q | k << 8) != (65535 & ~s) && a(
                "Bad uncompressed block length in flate stream");
              this.codeSize =
                this.codeBuf = 0;
              k = this.bufferLength;
              q = this.ensureBuffer(k + s);
              this.bufferLength = s = k + s;
              for (var z = k; s > z; ++z) {
                if ("undefined" == typeof(k = v[x++])) {
                  this.eof = !0;
                  break
                }
                q[z] = k
              }
              return this.bytesPos = x, void 0
            }
            if (1 == q) x = g, k = l;
            else if (2 == q) {
              q = this.getBits(5) + 257;
              k = this.getBits(5) + 1;
              for (var v = this.getBits(4) + 4, x = Array(d.length), y = 0; v >
                y;) x[d[y++]] = this.getBits(3);
              x = this.generateHuffmanTable(x);
              y = v = 0;
              k = q + k;
              for (s = Array(k); k > y;) z = this.getCode(x), 16 == z ? c(
                  this, s, 2, 3, v) : 17 == z ? c(this, s, 3, 3, v = 0) : 18 ==
                z ? c(this, s, 7, 11, v = 0) : s[y++] =
                v = z;
              x = this.generateHuffmanTable(s.slice(0, q));
              k = this.generateHuffmanTable(s.slice(q, k))
            } else a("Unknown block type in flate stream");
            s = (q = this.buffer) ? q.length : 0;
            for (z = this.bufferLength;;) {
              var B = this.getCode(x);
              if (256 > B) z + 1 >= s && (q = this.ensureBuffer(z + 1), s =
                q.length), q[z++] = B;
              else {
                if (256 == B) return this.bufferLength = z, void 0;
                var B = B - 257,
                  B = e[B],
                  A = B >> 16;
                0 < A && (A = this.getBits(A));
                v = (65535 & B) + A;
                B = this.getCode(k);
                B = f[B];
                A = B >> 16;
                0 < A && (A = this.getBits(A));
                B = (65535 & B) + A;
                z + v >= s && (q = this.ensureBuffer(z + v), s = q.length);
                for (A = 0; v > A; ++A, ++z) q[z] = q[z - B]
              }
            }
          }, c
      }
    }();

  ! function(a) {
    "undefined" == typeof a.btoa && (a.btoa = function(a) {
      var b, d, e, f, g = 0,
        h = 0,
        l = "",
        l = [];
      if (!a) return a;
      do b = a.charCodeAt(g++), d = a.charCodeAt(g++), e = a.charCodeAt(
          g++), f = b << 16 | d << 8 | e, b = f >> 18 & 63, d = f >> 12 &
        63, e = f >> 6 & 63, f &= 63, l[h++] =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .charAt(b) +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .charAt(d) +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .charAt(e) +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .charAt(f); while (g < a.length);
      l = l.join("");
      a = a.length % 3;
      return (a ? l.slice(0, a - 3) : l) + "===".slice(a || 3)
    });
    "undefined" == typeof a.atob && (a.atob = function(a) {
      var b, d, e, f, g, h = 0,
        l = 0,
        k = [];
      if (!a) return a;
      a += "";
      do b =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .indexOf(a.charAt(h++)), d =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .indexOf(a.charAt(h++)), f =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .indexOf(a.charAt(h++)),
        g =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
        .indexOf(a.charAt(h++)), e = b << 18 | d << 12 | f << 6 | g, b =
        e >> 16 & 255, d = e >> 8 & 255, e &= 255, k[l++] = 64 == f ?
        String.fromCharCode(b) : 64 == g ? String.fromCharCode(b, d) :
        String.fromCharCode(b, d, e); while (h < a.length);
      return k.join("")
    });
    Array.prototype.map || (Array.prototype.map = function(a) {
      if (void 0 === this || null === this || "function" != typeof a)
        throw new TypeError;
      for (var b = Object(this), d = b.length >>> 0, e = Array(d), f =
          1 < arguments.length ? arguments[1] : void 0, g = 0; d > g; g++)
        g in
        b && (e[g] = a.call(f, b[g], g, b));
      return e
    });
    Array.isArray || (Array.isArray = function(a) {
      return "[object Array]" === Object.prototype.toString.call(a)
    });
    Array.prototype.forEach || (Array.prototype.forEach = function(a,
      b) {
      if (void 0 === this || null === this || "function" != typeof a)
        throw new TypeError;
      for (var d = Object(this), e = d.length >>> 0, f = 0; e > f; f++)
        f in d && a.call(b, d[f], f, d)
    });
    Object.keys || (Object.keys = function() {
      var a = Object.prototype.hasOwnProperty,
        b = !{
          toString: null
        }.propertyIsEnumerable("toString"),
        d =
        "toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor"
        .split(" "),
        e = d.length;
      return function(f) {
        if ("object" != typeof f && ("function" != typeof f || null ===
            f)) throw new TypeError;
        var g, h = [];
        for (g in f) a.call(f, g) && h.push(g);
        if (b)
          for (g = 0; e > g; g++) a.call(f, d[g]) && h.push(d[g]);
        return h
      }
    }());
    String.prototype.trim || (String.prototype.trim = function() {
      return this.replace(/^\s+|\s+$/g, "")
    });
    String.prototype.trimLeft || (String.prototype.trimLeft = function() {
      return this.replace(/^\s+/g, "")
    });
    String.prototype.trimRight || (String.prototype.trimRight =
      function() {
        return this.replace(/\s+$/g,
          "")
      })
  }("undefined" != typeof self && self || "undefined" != typeof window && window || this)
}({}, function() {
    return this
  }());

//Initialize PDF open and save
"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  console.info("[PDF initialize] function call");
  sketchObj.module = sketchObj.module || {};
  sketchObj.module.PDF = function(sketchObj) {
    console.log("[PDF] function call");
    var sketchUtil = sketchObj.util;
    this.save = function(a) {
      console.log("[PDF Save] function call");
      a = a || {};
      var e = a.dpi,
        g = a.quality,
        l = a.onsuccess || sketchUtil.errorHandler("onsuccess");
      a.onerror || sketchUtil.errorHandler("onerror");
      var b = a.onprogress,
        c = sketchObj.doc,
        p = c.pages.data,
        w = sketchUtil.count(p) || 1,
        m = 0,
        u = 0;
      0 === p.length ? (m = c.bounds.width, u = c.bounds.height) : sketchUtil.foreach(
        p,
        function(a) {
          m = Math.max(m, a.width);
          u = Math.max(u, a.height)
        });
      var t = sketchUtil.toMetrics["px>mm"],
        h = new jsPDF(m > u ? "landscape" : "portrait", "mm", [m * t,
          u * t
        ]),
        r = h.internal.pageSize.width,
        k = h.internal.pageSize.height,
        v = 0,
        x = new sketchUtil.Queue({
          range: {
            from: 0,
            to: w - 1
          },
          oncomplete: function() {
            b && b(100);
            l(h.output("blob"))
          },
          next: function(d, l, m) {
            0 !== m && h.addPage();
            var t = p[m] || c.bounds;
            Array.isArray(p) ? (a.x = 0, a.y = v) : (sketchObj.doc = t, a.x =
              0, a.y = 0);
            a.width = t.width;
            a.height = t.height;
            sketchObj.save.canvas(a, function(a) {
              var c = a.ctx;
              c.globalCompositeOperation = "destination-atop";
              c.fillStyle = "#fff";
              c.fillRect(0, 0, a.width, a.height);
              var c = a.toDataURL("image/jpeg", g),
                d = 72 / e;
              a = Math.max(a.width * d / r, a.height * d / k);
              h.addImage(c, "JPEG",
                0, 0, t.width / a, t.height / a);
              v += t.height;
              b && b(m / w * 100);
              sketchObj.client.ios ? x.next() : setTimeout(x.next, 1)
            })
          }
        })
    };
    this.open = function(pdfFile) {
      console.log("[PDF Open] function call");
      var sketchDoc = sketchObj.doc,
        sketchFeature = sketchObj.feature,
        sketchDocScene = sketchDoc.scene,
        pdfPoint = pdfFile.point,
        pdfOpenAsNew = pdfFile.openAsNew,
        pdfOnprogress = pdfFile.onprogress,
        pdfOnsuccess = pdfFile.onsuccess;
      PDFJS.getDocument(pdfFile.file).then(function(a) {
        var u = [],
          t = 0,
          h = 0,
          r = new sketchUtil.Queue({
            range: {
              from: 1,
              to: a.numPages
            },
            oncomplete: function() {
              pdfOnprogress && pdfOnprogress(100);
              if (pdfOpenAsNew) {
                sketchUtil.exec("new");
                sketchDoc.setSize(h, t);
                sketchDoc.pages = {};
                sketchDoc.pages.data = [];
                sketchDoc.pages.length = u.length;
                var a = 0,
                  m = new sketchUtil.Queue({
                    items: u,
                    flatten: !0,
                    oncomplete: function() {
                      sketchDoc.setTool("select");
                      sketchObj.exec("zoom-reset");
                      sketchDocScene.selectByIdx(y, !1);
                      pdfOnsuccess && pdfOnsuccess()
                    },
                    next: function(b, c, d) {
                      b = u[d];
                      sketchDoc.pages.data[d] = {
                        src: b.src,
                        width: b.width,
                        height: b.height
                      };
                      d = 0;
                      c = a;
                      "objectBoundingBox" === sketchFeature.tools.media.units && (d +=
                        b.width / 2, c += b.height / 2);
                      sketchDocScene.add({
                        type: "image",
                        src: b.src,
                        width: b.width,
                        height: b.height,
                        x: d,
                        y: c
                      }, this.next);
                      a += b.height
                    }
                  })
              } else {
                var r = sketchFeature.io.translateX,
                  s = sketchFeature.io.translateY,
                  z = u.length - 1;
                pdfPoint = pdfPoint || sketchDocScene.getCenterPoint();
                pdfPoint.x -= z / 2 * r;
                pdfPoint.y -= z / 2 * s;
                var y = {},
                  m = new sketchUtil.Queue({
                    items: u,
                    flatten: !0,
                    oncomplete: function() {
                      sketchDoc.setTool("select");
                      sketchDocScene.selectByIdx(y, !1);
                      sketchDoc.render("scene.addPDF");
                      pdfOnsuccess && pdfOnsuccess()
                    },
                    next: function(a, c, d) {
                      sketchDocScene.add({
                        type: "image",
                        src: a.src,
                        x: pdfPoint.x + d * r,
                        y: pdfPoint.y + d * s
                      }, function(a) {
                        y[a.zIndex] = !0;
                        m.next()
                      })
                    }
                  })
              }
            },
            next: function(b) {
              a.getPage(b).then(function(c) {
                var sketchDoc = c.getViewport(1.5),
                  sketchObj = sketchUtil.Canvas(sketchDoc.width, sketchDoc.height);
                c.render({
                  canvasContext: sketchObj.ctx,
                  viewport: sketchDoc
                }).then(function() {
                  h = Math.max(sketchObj.width, h);
                  t += sketchObj.height;
                  sketchObj.toBlobURL(function(c) {
                    pdfOnprogress && pdfOnprogress(Math.round(b / a.numPages * 100));
                    u.push({
                      src: c,
                      width: sketchObj.width,
                      height: sketchObj.height
                    });
                    r.next()
                  })
                })
              })
            }
          })
      })
    }
  };
  "undefined" !== typeof module && module.exports && (module.exports = sketchObj.module.PDF)
})(sketch);

//Add debug PDF
"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  console.info("[PDF Debug] function called");
  sketchObj.addDebugPDF = function() {
    console.log("[Add Debug PDF] function call");
    try {
      PDFJS.getDocument("../tests/PDF/helloworld.pdf").then(function(d) {
        for (var a = Promise.resolve(), e = 1; e <= d.numPages; e++) 
          a = a.then(function(a) {
            return d.getPage(a).then(function(a) {
              a.getViewport(1.5);
              console.log(a);
              return a.getOperatorList().then(function(b) {
                console.log(b);
                var c = a.getViewport(1.5);
                return (new PDFJS.SVGGraphics(a.commonObjs, a.objs))
                  .getSVG(b, c).then(function(a) {
                    console.log(a);
                    var b = document.createElement("div");
                    b.appendChild(a);
                    console.log(b.innerHTML.split("svg:").join(""));
                    sk.doc.addObject({
                      type: "clipart",
                      src: b.innerHTML.split("svg:").join("")
                    })
                  })
              })
            })
          }.bind(null, e))
      })
    } catch (f) {
      console.error("Fail to debug PDF: " + f);
    }
    new function(d) {
      this.alphaIsShape = !1;
      this.fontSize = 0;
      this.fontSizeScale = 1;
      this.textMatrix = [1, 0, 0, 1, 0, 0];
      this.textMatrixScale = 1;
      this.fontMatrix = [.001, 0, 0, .001, 0, 0];
      this.wordSpacing = this.charSpacing = this.lineY = this.lineX =
        this.y = this.x = this.leading = 0;
      this.textHScale = 1;
      this.textRise = this.textRenderingMode = 0;
      this.strokeColor = this.fillColor = "#000000";
      this.lineWidth = this.strokeAlpha = this.fillAlpha = 1;
      this.activeSMask = null;
      this.old = d;
    };
    (function(d) {
      var a = {},
        e;
      for (e in d) a[d[e]] = e;
      return a;
    })(PDFJS.OPS)
  };
  sketchObj.debugTest = function(f, d) {
    f.loc.search.debug && d.scene.add({
      scale: 1,
      data: [],
      onload: function() {
        d.restoreSettings(function() {
          f.style.setFill(
            "0,fffeccb1,0.25,fff7a071,0.5,fff17432,0.5,ffed641c,0.5,ffea5507,0.75,fff27532,1,fffb955e"
          )
        })
      }
    })
  }
})(sketch);

//Initialize Dom
"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  console.log("[Build Dom] function called");
  var f, d, a, sketchDom = sketchObj.dom,
    sketchLang = sketchObj.lang,
    sketchUtil = sketchObj.util,
    sketchVector = sketchObj.vector,
    c = function() {
      var a, b, c, d = sketchObj.loc.getSearch(),
        f = sketchDom.$(".sk-canvas .sk-canvas-content");
      f.offsetWidth && f.offsetHeight ? (a = f.offsetWidth, b = f.offsetHeight,
        c = "px") : (b = a = 100, c = "%");
      sketchObj.construct({
        container: f,
        focusElement: document.body,
        onready: k,
        onsupport: r,
        icons: {
          brushes: {
            src: "icon-paintbrush",
            children: {
              crayon: "icon-pencil",
              //pencil: "icon-pencil",
              pen: "icon-pen",
              calligraphy: "icon-calligraphy",
              marker: "icon-crayon"
            }
          },
          shapes: {
            src: "icon-triangle",
            children: {
              rectangle: "icon-rectangle",
              //square: "icon-square",
              //regularPolygon: "icon-polygon",
              triangle: "icon-triangle",
              //star: "icon-star",
              //burst: "icon-burst",
              //circle: "icon-circle",
              //pie: "icon-pie",
              //ring: "icon-ring",
              //radialBurst: "icon-radial-burst",
              //gear: "icon-gear",
              //spiral: "icon-spiral",
              ellipse: "icon-ellipse",
            }
          },
          utilities: {
            src: "icon-select",
            children: {
              select: "icon-select",
              crop: "icon-crop",
              zoom: "icon-zoom",
              screenshot: "icon-marquee"
            }
          }
        },
        feature: {
          lang: "en",
          cache257: !0,
          beta: !!d.beta,
          debug: !!d.debug,
          debugCache: !!d.debug,
          preventScroll: !d.debug,
          preventTouch: !0,
          beforeUnloadPrompt: function() {
            if (!sketchObj.feature.debug && sketchObj.doc.needsSync()) return "You\u2019re about to exit without saving, are you sure?"
          },
          kiosk: !1,
          defaultSketch: "sketch=new",
          prefix: "sketchpad",
          io: {
            pdf: !0,
            psd: !0,
            translateX: 10,
            translateY: 10,
            exportDrop: !0
          },
          doc: {
            title: "Drawing",
            description: "made with Sketchpad - https://sketch.io/sketchpad",
            format: "sketch",
            width: parseInt(d.width || a),
            height: parseInt(d.height || b),
            units: d.units || c,
            centerOnLoad: !0,
            centerOnResize: !0,
            background: d.background || "transparent"
          },
          canvas: {
            glfx: !0,
            drawCenterPoint: !0,
            useBGRender: !1,
            useBGSave: !0,
            usePixelRatioDesktop: !1,
            containerScale: !0
          },
          zoom: {
            fromCenter: !0,
            increment: .1,
            min: .25,
            max: 6,
            value: 1
          },
          ui: {
            subtool: "list",
            dynamicCursor: !0,
            tooltips: !0,
            quickSelect: !0,
            cursors: {
              crop: "crosshair",
              screenshot: "crosshair",
              floodfill: "crosshair",
              zoom: "move"
            }
          },
          pane: {
            position: "left",
            open: !0,
            save: !0,
            configure: !0,
            history: !0,
            layers: !0
          },
          hotkeys: "select text pen arrow path stamp star clipart floodfill"
            .split(" "),
          vector: {
            record: !0,
            edit: !0
          },
          history: {
            vector: !0,
            limit: sketchUtil.INFINITY,
            autoSelect: !0
          },
          tools: {
            defaults: {
              addByClick: !1,
              addByDrag: !0,
              drawBBox: !0,
              maxHeight: 8192,
              maxWidth: 8192,
              minHeight: 3,
              minWidth: 3,
              movable: !0,
              units: "userSpaceOnUse",
              usePointInBBox: !0,
              usePointInImageData: !0,
              usePointInPath: !1,
              usePointNearest: !0,
              controls: {
                touch: {
                  width: 12,
                  height: 12,
                  padding: 16
                },
                mouse: {
                  width: 12,
                  height: 12,
                  padding: 8
                },
                normal: {
                  fillStyle: "#000"
                },
                hover: {
                  fillStyle: "#0080C2"
                },
                focus: {
                  fillStyle: "#dd167a"
                },
                anchor: {
                  command: "move",
                  title: "click-to-select",
                  "title:selected": "drag-to-move",
                  "title.text": "dbltap-to-edit",
                  "title.text:selected": "click-to-edit",
                  padding: 0
                },
                spinner: {
                  title: "drag-to-rotate",
                  command: "rotate",
                  cursor: "n-rotate",
                  shape: "circle"
                },
                n: {
                  title: "drag-to-resize",
                  command: "scale",
                  cursor: "n-resize"
                },
                s: {
                  title: "drag-to-resize",
                  command: "scale",
                  cursor: "s-resize"
                },
                e: {
                  title: "drag-to-resize",
                  command: "scale",
                  cursor: "e-resize"
                },
                w: {
                  title: "drag-to-resize",
                  command: "scale",
                  cursor: "w-resize"
                },
                nw: {
                  title: "drag-to-resize",
                  command: "scale",
                  cursor: "nw-resize",
                  onmousedown: "scale"
                },
                ne: {
                  title: "drag-to-resize",
                  command: "scale",
                  cursor: "ne-resize",
                  onmousedown: "scale"
                },
                se: {
                  title: "drag-to-resize",
                  command: "scale",
                  cursor: "se-resize",
                  onmousedown: "scale"
                },
                sw: {
                  title: "drag-to-resize",
                  command: "scale",
                  cursor: "sw-resize",
                  onmousedown: "scale"
                }
              }
            },
            media: {
              addByClick: !0,
              useSearch: "no"
            },
            text: {
              addByClick: !0,
              defaultHeight: 100,
              defaultWidth: 300,
              minHeight: 15,
              minWidth: 15,
              useSearch: "text"
            }
          },
          placement: {
            mediaClick: !1,
            mediaDrag: !0
          },
          palette: {
            colorPicker: !0,
            drag: !0,
            eyeDropper: !0,
            grid: !0,
            header: "",
            hexInput: !0
          },
          style: {
            fromGlobalStyleOnSetTool: !0,
            fromGlobalBlendOnSetTool: !1,
            blend: !0,
            color: {
              fill: "#000",
              stroke: "#f00"
            },
            gradient: !0,
            pattern: !0,
            colorMode: !0,
            colorNoise: !0,
            lineJoin: !0
          },
          stream: {
            api: "WebSocket",
            maxFileSize: 0,
            audio: !1,
            video: !0,
            videoAtop: !0,
            text: !1
          },
          sync: {
            enabled: !0,
            onsave: function() {
              sketchObj.ui.log(sketchLang.translate("changes-saved"));
              sketchObj.loader.create("syncing", sketchLang.translate("syncing") + "...",
                100)
            },
            onprogress: function(a) {
              sketchObj.loader.create("syncing", sketchLang.translate("syncing") + "...",
                a)
            },
            folder: !0,
            thumb: {
              format: "jpeg",
              toBlob: !0,
              suffix: "thumb",
              compress: .92,
              width: 480,
              height: 480,
              useBBox: !1,
              useVisibleRegion: !1,
              center: !0,
              crop: "edge"
            }
          }
        },
        hosts: {
          localhost: {
            HOST: "localhost/websites/sketch/",
            IO: "localhost:4000",
            RTC: "localhost:3001",
            GET: "localhost/websites/sketch/sketch-src/www/filesystem?sketch=",
            //GET: "localhost/sketch.io/sketch-src/www/filesystem.php?sketch=",
            POST: "localhost/websites/sketch/sketch-src/www/filesystem.php",
            //POST: "localhost/sketch.io/sketch-src/www/filesystem.php",
            alias: ["192.168.0.133", "mudcube.local"]
          },
          "localhost:3001": {
            feature: {
              stream: {
                audio: !1,
                sketch: !0,
                realtime: !0,
                sketchRTC: !0,
                video: !0,
                videoAtop: !0
              }
            },
            HOST: "localhost:3001/",
            IO: "localhost:4000",
            RTC: "localhost:3001",
            GET: "localhost:4000/get/?file=",
            POST: "localhost:4000/save/",
            alias: ["192.168.0.133:3001", "mudcube.local:3001"]
          },
          "sketch.io": {
            HOST: "sketch.io/sketchpad/",
            GET: d.GET || "sketch.io/get/?file=",
            POST: d.POST || "sketch.io/save/",
            IO: "sketch.io:4000",
            RTC: "sketch.io"
          },
          "board-cast.com": {
            HOST: "board-cast.com/sketch/",
            GET: d.GET || "board-cast.com/get/?file=",
            POST: d.POST || "board-cast.com/save/",
            IO: "board-cast.com:4000",
            RTC: "board-cast.com"
          }
        }
      })
    },
    p = function() {
      var b = window.location.host,
        c = -1 !== b.indexOf("hangout"),
        b = -1 !== b.indexOf(":3001"),
        e = {
          menu: ""
          //about: ""
        };
      c ? (f = e, d = {}, a = {
        select: "",
        text: "",
        pen: "",
        triangle: ""
        //clipart: ""
      }) : b ? (f = e, d = {}, a = {
        select: "",
        text: "",
        pen: "",
        triangle: "",
        //clipart: "",
        camera: ""
      }) : (f = e, a = {
        undo: "",
        redo: ""
      }, d = {
        select: "",
        text: "",
        pen: "",
        triangle: "",
       //clipart: "",
        //floodfill: "",
        eraser: ""
      });
      sketchObj.feature.beta && (sketchUtil.cloneInto({
        brushes: {
          children: {
            oil: "icon-oil",
            textbrush: "icon-text",
            shader: "icon-brush"
          }
        },
        shapes: {
          children: {
            supershape: "icon-infinity"
          }
        }
      }, sketchObj.ui.icons), d.floodfill = "", d.camera = "")
    },
    w = function(a, b) {
      var c = -1 !== window.location.host.indexOf("hangout"),
        d = function() {
          var a = function() {
            sketchObj.peer && sketchObj.net.socket && (sketchObj.peer.startFileServer(sketchObj.net.socket),
              sketchObj.peer.requestAssets());
            b && b()
          };
          if (c) {
            var d = sketchObj.server.getResource(); - 1 === d.indexOf("/") && (d =
              "room/" + d);
            sketchObj.net.SocketIO("room/hangout", a)
          } else sketchObj.open.fromQuery(window.location.search, a, a)
        };
      sketchObj.fs.init ? sketchObj.fs.init(function(a) {
        sketchObj.fs.updateProjects(!1, d)
      }, d) : d()
    };

  sketchObj.on("resize", function() {
    var b = window.innerWidth - 0 - 0;
    sketchDom.setCSS(".sk-toolset .sk-tool", "display", "");
    for (var c = "menu brush shape select clipart text".split(" "), d = 0; d < c.length; d++) {
      var g = c[d],
        h = a[g] || f[g];
      h && (b <= 40 * (d + 1) ? (h.display = !1, sketchDom.setCSS(
          ".sk-toolset #tool-" + g, "display", "none")) : h.display = !
        0)
    }
    m();
  });

  var m = function() {
      var b = sketchDom.$(".sk-canvas .sk-canvas-content"),
        c = b.querySelector(".sk-toolset-stylesheet") || document.createElement(
          "style"),
        g = sketchUtil.count(a, "display", !0),
        h = sketchUtil.count(f, "display", !0),
        k = sketchUtil.count(d, "display", !0),
        m = h + g + k,
        p = g / m * 100,
        q = h / m * 100,
        m = k / m * 100,
        r = Math.min(45 * g, 700),
        s = Math.min(45 * h, 700),
        t = Math.min(100 *
          k, 700);
      c.className = "sk-toolset-stylesheet";
      c.type = "text/css";
      c.innerHTML = "\tdiv.sk-toolset div.left {\t\twidth: " + q +
        "%;\t\tmax-width: " + s +
        "px;\t}\tdiv.sk-toolset div.center {\t\twidth:" + m +
        "%;\t\tmax-width: " + t +
        "px;\t}\tdiv.sk-toolset div.right {\t\twidth: " + p +
        "%;\t\tmax-width: " + r +
        "px;\t}\tdiv.sk-toolset div.left .sk-tool {\t\twidth: " + 1 / h *
        100 + "%;\t}\tdiv.sk-toolset div.center .sk-tool {\t\twidth: " +
        1 / k * 100 +
        "%;\t}\tdiv.sk-toolset div.right .sk-tool {\t\twidth: " + 1 / g *
        100 + "%;\t}";
      b.appendChild(c)
    },
    u = function() {
      //Initialize button in menu top bar
      var initializeTopNav = function(buttons, navSide) {
        for (var button in buttons) {
          var d = buttons[button],
            f = button.replace("menu-", ""),
            h = "";
          sketchObj.detect.utility[button] && (h = " utilities");
          sketchObj.detect.shape[button] && (h = " shapes");
          sketchObj.detect.brush[button] && "floodfill" !== button && "eraser" !== button && (h =
            " brushes");
          f = {
            id: "tool-" + button,
            title: f,
            className: "sk-tool" + h,
            parent: navSide
          };
          0 === d.indexOf(".") || 0 === d.indexOf("http") ? f.src = d :
            f.symbol = "icon-" + (d || button);
          f = new sketchObj.ui.Button(f);
          console.dir(f);
          h && (h = sketchDom.create('<span class="sk-arrow"></span>'), f.appendChild(
            h));
          buttons[button] = {
            icon: d,
            display: !0
          }
        }
      };
      sketchObj.client.fn.getUserMedia() || delete a.camera;
      sketchObj.ui.tooltip && eventjs.add({
        target: sketchDom.$(".sk-toolset"),
        mouseover: function(a) {
          sketchObj.ui.tooltip.update("")
        }
      });
      initializeTopNav(f, sketchDom.$(".sk-toolset .left"));
      initializeTopNav(a, sketchDom.$(".sk-toolset .right"));
      initializeTopNav(d, sketchDom.$(".sk-toolset .center"));
      sketchObj.ui.TSEvents.add();
      sketchObj.on.resize();
      m();
      sketchObj.exec.register("about", function() {
        window.open("./guide/")
      });
      eventjs.add("#tool-undo", "click", function(a, b) {
        var c = b.target,
          d = c.parentNode,
          f = sketchDom.$("#tool-redo", d);
        f ? f.style.display = "" : (f = sketchDom.append(d,
            '<span class="sk-tool" id="tool-redo" data-title="redo"><span class="sk-tool-title">Redo</span><span class="sk-icon icon-redo"></span></span>'
          ),
          sketchObj.ui.tooltip.add(f, "redo"), eventjs.add(c, "mousedown",
            eventjs.stop), eventjs.add(f, "mousedown", eventjs.stop),
          eventjs.add(f, "click", function() {
            sketchObj.exec("redo")
          }));
        var h = eventjs.add(document.body, "mousedown", function(a) {
          f.style.display = "none";
          h.remove()
        })
      })
    },
    t = function() {
      window.zip && (zip.workerScriptsPath = sketchObj.loc.HOST + "inc/Zip/");
      window.PDFJS && (PDFJS.workerSrc = sketchObj.loc.HOST +
        "inc/pdf/pdf.worker.min.js");
      p();
      !1 === sketchObj.client.fs && sketchDom.setCSS(".open-doc-start", "display",
        "none");
      if (sketchObj.client.nodewebkit) {
        var a = require("nw.gui"),
          b = a.Window.get(),
          c = new a.Menu({
            type: "menubar"
          });
        c.createMacBuiltin("Sketchpad", {
          hideEdit: !0
        });
        b.menu = c;
        c = new a.Menu;
        c.append(new a.MenuItem({
          label: "New...",
          click: function() {
            sketchObj.exec("new-confirm")
          }
        }));
        c.append(new a.MenuItem({
          type: "separator"
        }));
        c.append(new a.MenuItem({
          label: "Open...",
          click: function() {
            sketchObj.open.chooseEntry(function(a) {
              sketchObj.doc.addMedia({
                openAsNew: !0,
                blob: a
              })
            }, function() {})
          }
        }));
        c.append(new a.MenuItem({
          type: "separator"
        }));
        c.append(new a.MenuItem({
          label: "Save as...",
          click: function() {
            sketchObj.save.chooseEntry(sketchObj.save.blob(),
              function(a) {
                console.log(a)
              },
              function() {})
          }
        }));
        c.append(new a.MenuItem({
          type: "separator"
        }));
        c.append(new a.MenuItem({
          label: "Print...",
          click: function() {
            sketchObj.exec("print")
          }
        }));
        var d = new a.Menu;
        d.append(new a.MenuItem({
          label: "Undo",
          key: "z",
          modifiers: "cmd",
          click: function() {
            sketchObj.exec("undo")
          }
        }));
        d.append(new a.MenuItem({
          label: "Redo",
          key: "Z",
          modifiers: "cmd",
          click: function() {
            sketchObj.exec("redo")
          }
        }));
        d.append(new a.MenuItem({
          type: "separator"
        }));
        d.append(new a.MenuItem({
          label: "Cut",
          key: "x",
          modifiers: "cmd",
          click: function() {
            sketchObj.exec("layer-cut")
          }
        }));
        d.append(new a.MenuItem({
          label: "Copy",
          key: "c",
          modifiers: "cmd",
          click: function() {
            sketchObj.exec("layer-copy")
          }
        }));
        d.append(new a.MenuItem({
          label: "Paste",
          key: "v",
          modifiers: "cmd",
          click: function() {
            sketchObj.exec("layer-paste")
          }
        }));
        d.append(new a.MenuItem({
          label: "Delete",
          click: function() {
            sketchObj.exec("layer-delete")
          }
        }));
        d.append(new a.MenuItem({
          type: "separator"
        }));
        d.append(new a.MenuItem({
          label: "Select All",
          key: "a",
          modifiers: "cmd",
          click: function() {
            sketchObj.exec("select-all")
          }
        }));
        var f = new a.Menu;
        f.append(new a.MenuItem({
          label: "Report an issue...",
          click: function() {}
        }));
        f.append(new a.MenuItem({
          label: "Sketchpad Help",
          click: function() {}
        }));
        b.menu.insert(new a.MenuItem({
          label: "File",
          submenu: c
        }), 1);
        b.menu.insert(new a.MenuItem({
          label: "Edit",
          submenu: d
        }), 2);
        b.menu.append(new a.MenuItem({
          label: "Help",
          submenu: f
        }))
      }
    },
    h = function(a) {
      var b = sketchDom.$(".sk-viewport");
      a = isFinite(a) ? a : sketchObj.sidebar.opened ? 220 : 0;
      b.style.paddingLeft = a + "px"
    },
    r = function(a) {
      sketchUtil.getItem("browser-upgrade", function(a) {
        if (!a && (a = sketchObj.client.canvas, !sketchObj.client.fileReader || !a)) {
          var b = "Your browser is out of date =(<p>",
            b = a ? b + "Loading your own images will not work.<p>" : b +
            "Sketchpad will not work in this browser.<p>";
          sketchObj.client.safari && sketchObj.client.windows && (b +=
            "Apple discontinued Safari support for Windows in 2012.<p>"
          );
          sketchObj.ui.alert({
            callback: function() {
              sketchUtil.setItem("browser-upgrade")
            },
            message: b +
              '<p><a href="http://browsehappy.com/">Upgrade your browser now!</a>',
            labels: {
              ok: "Not now"
            }
          })
        }
      });
      sketchUtil.getItem("show-sidebar-left", function(a) {
        "false" === a && h(0)
      });
      t()
    },
    k = function(sketchModule) {
      sketchObj.doc = sketchModule;
      sketchObj.ui.log("Welcome to BoardCast");
      sketchModule.config.stamp.src = "stamp/Butterflies/1-live.png";
      sketchModule.config.image.src =
        "clipart/animals/1216139760278927551lemmling_Cartoon_cow.svg";
      sketchModule.config.clipart.src =
        "clipart/animals/1216139760278927551lemmling_Cartoon_cow.svg";
      w(sketchModule, function() {
        sketchObj.feature.debug && sketchObj.debugTest(sketchObj, sketchModule)
      });
      u();
      sketchDom.$(".sk-canvas").style.display = "block";
      sketchDom.$("#filters").style.display = "none";
      sketchObj.ui.scrollable("#filters");
      sketchObj.rtc && (sketchObj.feature.stream.videoAtop ? (sketchDom.$("#videos").style.display =
          "block", sketchObj.rtc.arrange.fn("singleBottomRight")) :
        sketchDom.$("#videos").style.display = "none");
      var b = function() {
        setTimeout(function() {
          sketchObj.on.resize();
          sketchObj.on.beforeresize();
          sketchModule.setCanvasSize();
          sketchModule.orient.reset();
          sketchModule.render.dirtyControls = !0;
          sketchModule.render.sceneGCO()
        }, 350)
      };
      sketchObj.sidebar.on("open", b);
      sketchObj.sidebar.on("close", b);
      sketchObj.on("beforeresize", function() {
        h()
      });
      sketchObj.on("open", function() {
        sketchObj.ui.setPane(sketchObj.ui.fullpath, !0)
      });
      sketchUtil.getItem("show-sidebar-left", function(a) {
        "false" !== a && sketchObj.sidebar.open()
      });
      setTimeout(function() {
        var a = sketchDom.$(".sk-instant");
        a && a.classList.remove("sk-instant")
      }, 250)
    },
    x = "body",
    s = "ready";
  "function" === typeof FlashCanvas && (x = window, s = "load");
  eventjs.add(x, s, function() {
    sketchObj.loader = sketchObj.loader ||
      new sketchObj.ui.Loader;
    c();
    sketchVector.text.attach({
      name: "Capriola",
      filepath: "media/font/capriola/Capriola"
    })
  })
})(sketch);

//Initialize Sketch buttons event
"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  console.info("[Button Events] function call");
  sketchObj.setup.add(function(sketchObj, d) {
    var sketchIo = sketchObj.io,
      sketchLang = sketchObj.lang,
      uiContextMenuCreate = sketchObj.ui.contextMenu.create,
      tempArray = [];
    tempArray.push({
      label: sketchLang.translate("delete"),
      onclick: function() {
        sketchObj.fs.removeProject()
      }
    });
    tempArray.push({
      label: sketchLang.translate("duplicate"),
      onclick: function() {
        sketchObj.fs.createProject()
      }
    });
    sketchObj.ui.menu.fileEntry = uiContextMenuCreate(tempArray);
    tempArray = [];
    tempArray.push({
      label: sketchLang.translate("layer-to-back"),
      onclick: function() {
        sketchObj.exec("layer-to-back")
      }
    });
    tempArray.push({
      label: sketchLang.translate("layer-to-front"),
      onclick: function() {
        sketchObj.exec("layer-to-front")
      }
    });
    tempArray.push({
      label: sketchLang.translate("layer-backwards"),
      onclick: function() {
        sketchObj.exec("layer-backwards")
      }
    });
    tempArray.push({
      label: sketchLang.translate("layer-forwards"),
      onclick: function() {
        sketchObj.exec("layer-forwards")
      }
    });
    tempArray.push({
      label: sketchLang.translate("delete"),
      onclick: function() {
        sketchObj.exec("layer-delete")
      }
    });
    sketchObj.ui.menu.layers = uiContextMenuCreate(tempArray);
    tempArray = [];
    tempArray.push({
      label: sketchLang.translate("select-all"),
      onclick: function() {
        sketchObj.exec("select-all")
      }
    });
    tempArray.push({
      label: sketchLang.translate("copy-all"),
      onclick: function() {
        sketchObj.exec("select-all");
        sketchObj.exec("layer-copy")
      }
    });
    tempArray.push({
      label: sketchLang.translate("cut-all"),
      onclick: function() {
        sketchObj.exec("select-all");
        sketchObj.exec("layer-cut")
      }
    });
    tempArray.push({
      label: sketchLang.translate("paste"),
      onclick: function() {
        sketchObj.exec("layer-paste")
      }
    });
    tempArray.push({
      label: sketchLang.translate("undo"),
      onclick: function() {
        sketchObj.exec("undo")
      }
    });
    tempArray.push({
      label: sketchLang.translate("redo"),
      onclick: function() {
        sketchObj.exec("redo")
      }
    });
    sketchObj.ui.menu.selectDefault = uiContextMenuCreate(tempArray);
    tempArray = [];
    sketchIo.blobToABR && (sketchObj.feature.debug && tempArray.push({
      label: sketchLang.translate("merge-objects"),
      onclick: function() {
        sketchObj.exec("layer-merge")
      }
    }), tempArray.push({
      label: '<span class="icon-export"></span> ' + sketchLang.translate(
        "convert-to-stamp"),
      onclick: function() {
        sketchObj.exec("layer-to-stamp")
      }
    }));
    tempArray.push({
      label: sketchLang.translate("layer-to-back"),
      onclick: function() {
        sketchObj.exec("layer-to-back")
      }
    });
    tempArray.push({
      label: sketchLang.translate("layer-to-front"),
      onclick: function() {
        sketchObj.exec("layer-to-front")
      }
    });
    tempArray.push({
      label: sketchLang.translate("layer-backwards"),
      onclick: function() {
        sketchObj.exec("layer-backwards")
      }
    });
    tempArray.push({
      label: sketchLang.translate("layer-forwards"),
      onclick: function() {
        sketchObj.exec("layer-forwards")
      }
    });
    tempArray.push({
      label: sketchLang.translate("cut"),
      onclick: function() {
        sketchObj.exec("layer-cut")
      }
    });
    tempArray.push({
      label: sketchLang.translate("copy"),
      onclick: function() {
        sketchObj.exec("layer-copy")
      }
    });
    tempArray.push({
      label: sketchLang.translate("paste"),
      onclick: function() {
        sketchObj.exec("layer-paste")
      }
    });
    tempArray.push({
      label: sketchLang.translate("duplicate"),
      onclick: function() {
        sketchObj.exec("layer-duplicate")
      }
    });
    tempArray.push({
      label: sketchLang.translate("delete"),
      onclick: function() {
        sketchObj.exec("layer-delete")
      }
    });
    tempArray.push({
      label: sketchLang.translate("download"),
      onclick: function() {
        sketchObj.exec("layer-download")
      }
    });
    sketchObj.ui.menu.select = sketchObj.ui.menu.selectMultiple = uiContextMenuCreate(tempArray);
    sketchIo = function(a) {
      var c = [],
        d = sketchObj.ui.icons[a];
      if (d) {
        var d = d.children,
          l;
        for (l in d) c.push({
          label: '<span class="' + d[l] + '"></span> ',// +
          //  sketchLang.translate(l),
          onclick: function(a) {
            return function(b) {
              b = a.replace(" ", "_");
              sketchObj.exec(b);
              sketchObj.ui.setToolMenu(b, !0)
            }
          }(l)
        });
        sketchObj.ui.menu[a] = uiContextMenuCreate(c)
      }
    };
    sketchIo("brushes");
    sketchIo("media");
    sketchIo("shapes");
    sketchIo("utilities");
  })
})(sketch);

//Initialize configure sidebar
"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  console.info("[Configure] function call");
  sketchObj.module = sketchObj.module || {};
  sketchObj.module.Configure = function(sketchObj, d) {
    console.info("[Sketch Module Configure] function call");
    var configureMenu = {},
      sketchUtil = sketchObj.util,
      sketchUiVar = sketchObj.ui.vars,
      uiButton = sketchUiVar.Button,
      uiCheckbox = sketchUiVar.Checkbox,
      uiPalette = sketchUiVar.Palette,
      uiRange = sketchUiVar.Range,
      uiResource = sketchUiVar.Resource,
      uiSelect = sketchUiVar.Select,
      uiSubtool = sketchUiVar.SubTool,
      configureMenuAddClone = configureMenu.addClone = function(b, c, d) {
        if (b = sketchUtil.clone("object" === typeof b ? b : configureMenu[b]))
          if (b.type = c, configureMenu[c] = b, d)
            for (var f in d) null === d[f] ? delete b[f] : b[f] = d[f]
      },
      uiRangeConstructor = function(param, value, min, max, format, g) {
        console.log("[Sketch Ui Vars Range] constructor call");
        return new uiRange(sketchUtil.cloneInto(g, {
          param: param,
          value: value,
          min: min,
          max: max,
          format: format
        }))
      },
      sketchStyleFillConstructor = function(a) {
        console.log("[Sketch Style Fill] constructor call");
        return sketchObj.style ? new sketchObj.style.Fill(a) : console.warn(
          "requires sk.style")
      },
      sketchStyleStrokeConstructor = function(a) {
        console.log("[Sketch Style Stroke] constructor call");
        return sketchObj.style ?
          new sketchObj.style.Stroke(a) : console.warn("requires sk.style")
      },
      opacity = function(a) {
        a = isFinite(a) ? a : 100;
        return new uiRange({
          param: "opacity",
          value: a,
          min: .001,
          max: 100,
          format: "%",
          gradient: ["#333", "#bbb"]
        })
      },
      composite = function() {
        return new uiSelect({
          label: "blend",
          param: "composite",
          selected: "normal",
          title: "choose-blend",
          options: function() {
            return sketchObj.style.getBlendOptions()
          },
          onchange: function(a, b) {
            sketchObj.style.setComposite(b, null, !0)
          }
        })
      },
      s = {
        subtool: new uiSubtool({
          param: "utility",
          title: "utilities"
        })
      };
    configureMenuAddClone(s, "select", {
      toolkit: "select"
    });
    configureMenuAddClone(s, "screenshot", {
      toolkit: "screenshot"
    });
    configureMenuAddClone(s, "eyedropper", {
      toolkit: "eyedropper"
    });
    configureMenu.crop = {
      toolkit: "crop",
      type: "crop",
      subtool: new uiSubtool({
        param: "utility",
        title: "utilities"
      }),
      ratio: new uiSelect({
        options: function() {
          return sketchObj.ui.DOC.param.preset
        },
        param: "ratio",
        selected: "size:377x197,units:px,dpi:72",
        label: "aspect-ratio",
        title: "choose-aspect-ratio",
        onchange: function(a, b) {
          var c = {};
          c[a] = sketchObj.ui.DOC.param.presetData[b];
          d.tool.update(c)
        }
      }),
      constrain: new uiCheckbox({
        checked: !0,
        label: "constrain",
        param: "constrain",
        title: "choose-constrain",
        onchange: function(a) {
          var b = {};
          b[this.param] =
            a;
          d.tool.update(b)
        }
      })
    };
    configureMenu.zoom = {
      toolkit: "zoom",
      type: "zoom",
      subtool: new uiSubtool({
        param: "utility",
        title: "utilities"
      })
    };
    configureMenu.group = {
      toolkit: "group",
      type: "group",
      composite: composite(),
      opacity: opacity()
    };
    s = {
      toolkit: "shape",
      subtool: new uiSubtool({
        param: "shape",
        title: "shapes"
      }),
      palette: new uiPalette,
      composite: composite(),
      fill: sketchStyleFillConstructor(),
      stroke: sketchStyleFillConstructor(),
      opacity: opacity()
    };
    configureMenuAddClone(s, "pie", {
      angle: uiRangeConstructor("angle", [0, 270], 0, 360, "float", {
        canCross: !0
      })
    });
    configureMenuAddClone(s, "ring", {
      angle: uiRangeConstructor("angle", [0, 360], 0, 360, "float", {
        canCross: !0
      }),
      cutout: uiRangeConstructor("cutout", .5, 0, .99, "float")
    });
    configureMenuAddClone(s, "rectangle", {
      roundness: uiRangeConstructor("roundness",
        0, 0, 1, "float"),
      cutout: uiRangeConstructor("cutout", 0, 0, .99, "float")
    });
    configureMenuAddClone(s, "square", {
      roundness: uiRangeConstructor("roundness", 0, 0, 1, "float"),
      cutout: uiRangeConstructor("cutout", 0, 0, .99, "float")
    });
    configureMenuAddClone(s, "regularPolygon", {
      sides: uiRangeConstructor("sides", 5, 3, 25, "int"),
      cutout: uiRangeConstructor("cutout", 0, 0, .99, "float")
    });
    configureMenuAddClone(s, "gear", {
      sides: uiRangeConstructor("sides", 30, 2, 100, "int"),
      slope: uiRangeConstructor("slope", .9, .01, 1, "float"),
      cutout: uiRangeConstructor("cutout", 0, 0, .99, "float")
    });
    configureMenuAddClone(s, "star", {
      sides: uiRangeConstructor("sides", 5, 2, 50, "int"),
      slope: uiRangeConstructor("slope", .5, .01, 1, "float"),
      cutout: uiRangeConstructor("cutout", 0, 0, .99, "float")
    });
    configureMenuAddClone(s, "burst", {
      sides: uiRangeConstructor("sides", 5, 2, 50, "int"),
      slope: uiRangeConstructor("slope", .001, .001, 10, "float"),
      cutout: uiRangeConstructor("cutout", 0, 0, .99, "float")
    });
    configureMenuAddClone(s, "radialBurst", {
      sides: uiRangeConstructor("sides", 12, 2, 100, "int"),
      spread: uiRangeConstructor("spread", .5, .01, 1, "float")
    });
    configureMenuAddClone(s, "spiral", {
      sides: uiRangeConstructor("sides", 10, 1, 25, "int"),
      coils: uiRangeConstructor("coils", 1, .001, 10, "float"),
      spread: uiRangeConstructor("spread", 25, .5, 50, "%")
    });
    configureMenuAddClone(s, "supershape", {
      points: uiRangeConstructor("points", 500, 50, 1E3, "int"),
      m: uiRangeConstructor("m", 39, .1, 50, "int"),
      n1: uiRangeConstructor("n1", 1, .1, 15, "float"),
      n2: uiRangeConstructor("n2", .9, .1, 15, "float"),
      n3: uiRangeConstructor("n3", .25, .1, 15, "float"),
      cutout: uiRangeConstructor("cutout", 0, 0, .99, "float")
    });
    configureMenuAddClone(s, "ellipse", {
      cutout: uiRangeConstructor("cutout",
        0, 0, .99, "float")
    });
    configureMenuAddClone(s, "circle", {
      cutout: uiRangeConstructor("cutout", 0, 0, .99, "float")
    });
    configureMenuAddClone("regularPolygon", "triangle", {
      sides: null
    });
    configureMenu.text = {
      toolkit: "text",
      type: "text",
      resource: new uiResource({
        format: "text",
        label: "fontFamily",
        title: "choose-font"
      }),
      palette: new uiPalette,
      composite: composite(),
      fill: sketchStyleFillConstructor(),
      stroke: sketchStyleFillConstructor(),
      opacity: opacity(),
      fontWeight: "normal",
      fontSize: uiRangeConstructor("fontSize", 30, 1, 120, "float"),
      fontFamily: "Arial",
      fontVariant: "normal",
      fontStyle: "normal",
      textAlign: "center",
      textDecoration: "none",
      textTransform: "none",
      whiteSpace: "pre-wrap"
    };
    configureMenu.speechbubble = {
      toolkit: "speechbubble",
      type: "speechbubble",
      composite: composite(),
      opacity: opacity()
    };
    s = {
      toolkit: "media",
      type: "image",
      composite: composite(),
      opacity: opacity(),
      hue: uiRangeConstructor("hue", 0, 0, 360, "float", {
        gradient: "#f00 #ff0 #0f0 #0ff #00f #f0f #f00".split(" ")
      }),
      saturation: uiRangeConstructor("saturation", 1, 0, 3, "float", {
        gradient: "#ffffff #ffffbf #9eff9e #7ffffa #5e5eff #ff3fff #f00"
          .split(" ")
      }),
      temperature: uiRangeConstructor("temperature", 0, -32, 32, "float", {
        gradient: ["#568fcf", "#f7e146"]
      }),
      tint: uiRangeConstructor("tint", 0, -32, 32, "float", {
        gradient: ["#00ae47", "#c73baf"]
      }),
      exposure: uiRangeConstructor("exposure", 1, 0, 2, "float", {
        gradient: ["#333",
          "#bbb"
        ]
      }),
      brightness: uiRangeConstructor("brightness", 0, -100, 100, "float", {
        gradient: ["#333", "#bbb"]
      }),
      contrast: uiRangeConstructor("contrast", 0, -.5, .5, "float", {
        gradient: ["#bbb", "#333"]
      }),
      reset: new uiButton({
        title: "reset",
        style: "width: 94%; margin: 0 3%;",
        callback: function(a) {
          eventjs.prevent(a);
          d.toolkit.setParams({
            selection: d.selection.items,
            filter: "image",
            params: {
              hue: 0,
              saturation: 1,
              temperature: 0,
              tint: 0,
              exposure: 1,
              brightness: 0,
              contrast: 0
            }
          });
          sketchObj.ui.configureBuild()
        }
      })
    };
    configureMenuAddClone(s, "image");
    configureMenuAddClone(s, "video");
    configureMenu.clipart = {
      toolkit: "media",
      type: "clipart",
      filePicker: new sketchUiVar.FilePicker("clipart"),
      resource: new uiResource({
        format: "clipart",
        label: "clipart",
        title: "choose-clipart"
      }),
      src: "clipart/animals/1216139760278927551lemmling_Cartoon_cow.svg",
      composite: composite(),
      opacity: opacity()
    };
    configureMenuAddClone("clipart", "symbol");
    configureMenu.vectorfill = {
      toolkit: "vectorfill",
      type: "vectorfill",
      palette: new uiPalette,
      composite: composite(),
      fill: sketchStyleFillConstructor(),
      opacity: opacity()
    };
    k = {
      toolkit: "brush",
      subtool: new uiSubtool({
        param: "brush",
        title: "brushes"
      }),
      palette: new uiPalette,
      composite: composite(),
      fill: sketchStyleFillConstructor({
        enabled: !1
      }),
      stroke: sketchStyleFillConstructor({
        enabled: !0,
        lineWidth: 2
      }),
      opacity: opacity(),
      spacing: {
        min: 1,
        max: 25
      },
      buttons: new sketchUiVar.HTML({
        construct: function(a) {
          sketchObj.ui.appendButton(a,
            new uiButton({
              className: "grey",
              title: "close path",
              style: "float: left; margin: 5px 0 5px 5px; width: 43%;",
              callback: function(a) {
                d.tool.device.brush.closePath();
                d.tool.device.brush.savePath()
              }
            }));
          sketchObj.ui.appendButton(a, new uiButton({
            className: "grey",
            title: "finish editing",
            style: "float: right; margin: 5px 5px 5px 0; width: 50%;",
            callback: function(a) {
              d.tool.device.brush.savePath()
            }
          }));
          a.appendChild(sketchObj.dom.create(
            '<div style="clear: both"></div>'))
        }
      })
    };
    configureMenuAddClone(k, "polyline");
    configureMenuAddClone(k, "polygon");
    configureMenuAddClone(k, "path");
    configureMenuAddClone(k, "scissor", {
      fill: !1,
      stroke: !1,
      closePath: !1
    });
    k = {
      toolkit: "brush",
      subtool: new uiSubtool({
        param: "brush",
        title: "brushes"
      }),
      palette: new uiPalette,
      composite: composite(),
      fill: sketchStyleFillConstructor(),
      opacity: opacity(),
      spacing: {
        min: 1,
        max: 25
      }
    };
    configureMenuAddClone(k, "textbrush", {
      diameter: uiRangeConstructor("diameter", 10, 1, 100, "px"),
      content: new sketchUiVar.Textarea({
        label: "content",
        param: "content",
        value: "\u201cThe quick brown fox jumps over the lazy dog\u201d is an English-language pangram \u2013 a phrase that contains all of the letters of the English alphabet."
      })
    });
    configureMenuAddClone(k, "arrow", {
      diameter: uiRangeConstructor("diameter", 42, 1, 250, "px"),
      curved: new uiCheckbox({
        checked: !1,
        label: "curved",
        param: "curved"
      })
    });
    configureMenuAddClone(k, "pencil", {
      diameter: uiRangeConstructor("diameter", 3, 1, 100, "px")
    });
    configureMenuAddClone(k, "marker", {
      diameter: uiRangeConstructor("diameter", 40, 1, 250, "px"),
      opacity: opacity(50)
    });
    configureMenuAddClone(k, "eraser", {
      subtool: !1,
      palette: !1,
      fill: !1,
      composite: "destination-out",
      diameter: uiRangeConstructor("diameter", 40, 1, 250, "px"),
      blur: uiRangeConstructor("blur", 0, 0, 100, "%")
    });
    configureMenuAddClone(k, "paintbrush", {
      diameter: uiRangeConstructor("diameter", 40, 1, 250, "px"),
      blur: uiRangeConstructor("blur", 10, 0, 100, "%")
    });
    configureMenuAddClone(k, "streamer", {
      diameter: uiRangeConstructor("diameter", [.001, 15], .001, 150, "px"),
      spacing: {
        min: 1,
        max: sketchUtil.INFINITY
      }
    });
    configureMenuAddClone(k, "pen", {
      diameter: uiRangeConstructor("diameter", [.001, 10], .001, 50, "px"),
      spacing: {
        min: 1,
        max: sketchUtil.INFINITY
      }
    });
    configureMenuAddClone(k, "calligraphy", {
      diameter: uiRangeConstructor("diameter", 10, 1, 50, "px")
    });
    configureMenuAddClone(k, "chrome", {
      opacity: opacity(25),
      spacing: {
        min: 1,
        max: 100
      },
      lineWidth: uiRangeConstructor("lineWidth", 1, .1, 5, "px"),
      spread: uiRangeConstructor("spread", 15, 1, 50, "float"),
      lookback: 2E3
    });
    configureMenuAddClone(k, "shader", {
      opacity: opacity(75),
      spacing: {
        min: 1,
        max: 3
      },
      lineWidth: uiRangeConstructor("lineWidth", .5, .1, 5, "px"),
      spread: uiRangeConstructor("spread", 40, 1, 50, "float"),
      lookback: 2E3
    });
    configureMenuAddClone(k, "sketchy", {
      opacity: opacity(50),
      spacing: {
        min: 1,
        max: 100
      },
      lineWidth: uiRangeConstructor("lineWidth", 1, .1, 5, "px"),
      spread: uiRangeConstructor("spread", 25, 1, 100, "float"),
      lookback: 2E3
    });
    configureMenuAddClone(k, "web", {
      opacity: opacity(25),
      spacing: {
        min: 1,
        max: 100
      },
      lineWidth: uiRangeConstructor("lineWidth", 1, .1, 5, "px"),
      spread: uiRangeConstructor("spread", 25, 1, 100, "int"),
      lookback: 2E3
    });
    configureMenuAddClone(k, "fur", {
      spacing: {
        min: 1,
        max: 10
      },
      lineWidth: uiRangeConstructor("lineWidth", 1, .1, 25, "px"),
      diameter: uiRangeConstructor("diameter", 75, 1, 750, "px"),
      lookback: 2E3
    });
    configureMenuAddClone(k, "hair", {
      spacing: {
        min: 1,
        max: 5
      },
      lineWidth: uiRangeConstructor("lineWidth", .5, .1, 10, "px"),
      diameter: uiRangeConstructor("diameter", 50, 1, 250, "px"),
      lookback: 5
    });
    configureMenuAddClone(k, "spirograph", {
      opacity: opacity(60),
      lineWidth: uiRangeConstructor("lineWidth", .1, .1, 5, "px"),
      distance: uiRangeConstructor("distance", 25, 1, 250, "float"),
      contract: .005,
      innerRadius: uiRangeConstructor("innerRadius", 43.92920353982301,
        1, 100, "float"),
      outerRadius: uiRangeConstructor("outerRadius", 35.16814159292035, 1, 100,
        "float"),
      increment: uiRangeConstructor("increment", .576991150442478, .1, 5, "float"),
      spacing: uiRangeConstructor("spacing", [1, 5], 1, 50, "px"),
      speed: uiRangeConstructor("speed", 100, 1, 100, "float")
    });
    configureMenuAddClone(k, "spraypaint", {
      opacity: opacity(25),
      spacing: {
        min: 1,
        max: 50
      },
      diameter: uiRangeConstructor("diameter", 40, 25, 250, "px")
    });
    configureMenuAddClone(k, "crayon", {
      opacity: opacity(30),
      diameter: uiRangeConstructor("diameter", 4, 1, 250, "px")
    });
    configureMenu.stamp = {
      toolkit: "brush",
      type: "stamp",
      subtool: new uiSubtool({
        param: "brush",
        title: "brushes"
      }),
      resource: new uiResource({
        format: "stamp",
        label: "stamp",
        title: "choose-stamp"
      }),
      palette: new uiPalette,
      composite: composite(),
      fill: sketchStyleFillConstructor(),
      opacity: opacity(85),
      diameter: uiRangeConstructor("diameter", 100, 5, 500, "px"),
      rotate: uiRangeConstructor("rotate", [1, 360], 1, 360, "degree"),
      scale: uiRangeConstructor("scale", [.05, 1.5], .05, 3, "%"),
      translate: uiRangeConstructor("translate", [0, 0], 0, 250, "px"),
      spacing: uiRangeConstructor("spacing", [12, sketchUtil.INFINITY], 1, 250, "px"),
      pollock: !1
    };
    configureMenuAddClone(k, "floodfill", {
      spacing: !1,
      tolerance: uiRangeConstructor("tolerance", 60, 1, 100, "%"),
      antialias: !1,
      contiguous: new uiCheckbox({
        checked: !0,
        label: "contiguous",
        param: "contiguous"
      })
    });
    configureMenuAddClone(k, "oil", {
      spacing: {
        min: 1,
        max: 1
      },
      blend: .98,
      bristles: 8,
      diameter: uiRangeConstructor("diameter", 50, 1, 100, "px")
    });
    configureMenuAddClone(k, "pastel", {
      spacing: !1,
      blend: .97,
      bristles: 35,
      rotate: uiRangeConstructor("rotate", [1, 360], 1, 360, "degree", {
        hidden: !0
      }),
      diameter: uiRangeConstructor("diameter", 25, 3, 42, "px")
    });
    (function() {
      var b = sketchUtil.clone(configureMenu);
      configureMenu.reset = function(c) {
        configureMenu[c] = sketchUtil.clone(b[c])
      }
    })();
    configureMenu.name = "ConfigureMenu";
    return configureMenu;
  }
})(sketch);

//Languages
"undefined" === typeof sketch && (sketch = {});
(function(sketchObj) {
  console.info("[Languages] function call")
  sketchObj.lang = sketchObj.lang || {};
  sketchObj.lang.locales = sketchObj.lang.locales || {};
  sketchObj.lang.available = {
    de: {
      en: "German",
      "native": "Deutsch"
    },
    en: {
      en: "English",
      "native": "English"
    },
    es: {
      en: "Spanish",
      "native": "Espa\u00f1ol"
    },
    fr: {
      en: "French",
      "native": "Fran\u00e7ais"
    },
    it: {
      en: "Italian",
      "native": "Italiano"
    },
    nl: {
      en: "Dutch",
      "native": "Nederlands"
    },
    pl: {
      en: "Polish",
      "native": "Polski"
    },
    pt: {
      en: "Portuguese",
      "native": "Portugu\u00eas"
    },
    sv: {
      en: "Swedish",
      "native": "Svenska"
    },
    ar: {
      en: "Arabic",
      "native": "\u0627\u0644\u0639\u0631\u0628\u064a\u0629"
    },
    ko: {
      en: "Korean",
      "native": "\ud55c\uad6d\uc5b4"
    },
    ja: {
      en: "Japanese",
      "native": "\u65e5\u672c\u8a9e"
    },
    ru: {
      en: "Russian",
      "native": "\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u042f\u0437\u044b\u043a"
    },
    he: {
      en: "Hebrew",
      "native": ""
    },
    zh: {
      en: "Chinese",
      "native": "\u4e2d\u6587"
    }
  };
  sketchObj.util.cloneInto({
      en: {
        "about-version": "[?] SketchAPI %s",
        "delete-doc-confirm": "Are you sure?",
        "change-doc-confirm": "Save current image?",
        "select-tool-count": "%s layers selected",
        "select-tool-message": "Use the <span class='icon-select'></span> Select tool to Move, Rotate, Scale, Delete, and reorganize the layers of your design.",
        "useMaxCopies-alert": "You can only include %s %s of this clipart.",
        "welcome-to": "Welcome to %s",
        "zoom-tool-message": "Use the <span class='icon-zoom'></span> Zoom tool to fine tune your image.",
        start: "Start",
        "load-fail-restore": "Last time your document did not load properly.<p>Do you want to re-attempt to load your document?",
        "console-message": "Sketch.io developes HTML5 graphics applications.\nWe specialize in WebGL, WebRTC and Canvas.\n\nVisit https://sketch.io/ for project inquiries.",
        "copy-to-clipboard": "Copy to Clipboard",
        "could-not-authorize": "%s could not authorize",
        "image-ready-to-share": "Your image is ready to be shared!",
        "share-link-copied": "Share link copied!",
        "still-uploading": "Still uploading to %s",
        "upload-complete": "%s upload complete!",
        "upload-failed": "%s upload failed!",
        "uploading-to": "Uploading to %s",
        "changes-saved": "All changes saved!",
        "upload-invalid": "Invalid format uploaded",
        "user-entered": "%s has entered the room.",
        "user-exited": "%s has left the room.",
        author: "Author",
        license: "License",
        project: "File",
        "special-thanks": "Special thanks",
        background: "Background",
        "change-media": "Change Media",
        "cut-objects": "Cut Selection",
        "merge-objects": "Merge Objects",
        "merge-paths": "Merge Paths",
        "new-doc-created": "New Document Created!",
        "new-doc": "New Document",
        "paste-objects": "Paste Selection",
        "resize-doc": "Resize File",
        "remove-objects": "Remove Selection",
        "reset-clipart-color": "Reset Clipart Color",
        "split-path": "Split Path",
        "update-clipart-color": "Change Clipart Color",
        "update-style": "Update Style",
        "update-text": "Update Text",
        angle: "Angle",
        antialias: "Antialias",
        anticlockwise: "Anticlockwise",
        blend: "Blend",
        bristles: "Bristles",
        coils: "Coils",
        composite: "Composite",
        constrain: "Constrain",
        content: "Content",
        contract: "Contract",
        cutout: "Cutout",
        diameter: "Size",
        distance: "Distance",
        fill: "Fill",
        increment: "Increment",
        innerRadius: "Inner Radius",
        lineWidth: "Line Width",
        lookback: "Lookback",
        opacity: "Opacity",
        outerRadius: "Outer Radius",
        palette: "Palette",
        points: "Points",
        ratio: "Ratio",
        reset: "Reset",
        roundness: "Roundness",
        imperfection: "Imperfection",
        sides: "Sides",
        slope: "Slope",
        spacing: "Spacing",
        speed: "Speed",
        spread: "Spread",
        stroke: "Outline",
        arrow: "Arrow",
        brush: "Brush",
        calligraphy: "Calligraphy",
        chrome: "Chrome",
        crayon: "Pencil",
        eraser: "Eraser",
        fur: "Fur",
        paintbrush: "Paintbrush",
        pen: "Pen",
        pencil: "Pencil",
        marker: "Marker",
        sketchy: "Sketchy",
        spirograph: "Spirograph",
        spraypaint: "Spraypaint",
        streamer: "Streamer",
        web: "Web",
        oil: "Oil",
        burst: "Burst",
        circle: "Circle",
        ellipse: "Ellipse",
        gear: "Gear",
        pie: "Pie",
        radialBurst: "Radial Burst",
        rectangle: "Rectangle",
        regularPolygon: "Regular Polygon",
        ring: "Ring",
        shape: "Shape",
        spiral: "Spiral",
        square: "Square",
        star: "Star",
        triangle: "Triangle",
        select: "Select",
        "quick-selection": "Quick Selection",
        "add-to-selection": "Add to Selection",
        "subtract-from-selection": "Subtract from Selection",
        "select-all": "Select all",
        "select-inverse": "Select inverse",
        unselect: "Unselect",
        "crop-draw": "Crop Area",
        crop: "Crop",
        "screenshot-log": "Click & drag to create your screenshot.",
        screenshot: "Screenshot",
        "take-snapshot": "Take Snapshot",
        zoom: "Zoom",
        "zoom-in": "Zoom in",
        "zoom-out": "Zoom out",
        "zoom-to-default": "Zoom to actual size",
        stamp: "Stamp",
        "choose-stamp": "Set stamp category",
        "convert-to-stamp": "Convert to Stamp",
        clipart: "Clipart",
        "load-your-own-image": "Load your own image",
        "choose-clipart": "Set clipart category",
        floodfill: "Floodfill",
        contiguous: "Contiguous",
        tolerance: "Tolerance",
        text: "Text",
        fontFamily: "Font Family",
        fontSize: "Font Size",
        fontStyle: "Font Style",
        fontVariant: "Font Variant",
        fontWeight: "Font Weight",
        textAlign: "Text Align",
        textDecoration: "Text Decoration",
        textTransform: "Text Transform",
        whiteSpace: "White Space",
        "choose-font": "Set font family",
        brightness: "Brightness",
        camera: "Camera",
        contrast: "Contrast",
        exposure: "Exposure",
        hue: "Hue",
        luminosity: "Luminosity",
        saturation: "Saturation",
        temperature: "Temperature",
        tint: "Tint",
        blur: "Blur",
        pixelSize: "Pixel Size",
        copy: "Copy",
        "copy-all": "Copy all",
        cut: "Cut",
        "cut-all": "Cut all",
        "delete": "Delete",
        duplicate: "Duplicate",
        "layer-backwards": "Send Backwards",
        "layer-forwards": "Send Forwards",
        "layer-to-back": "Send to Back",
        "layer-to-front": "Send to Front",
        paste: "Paste",
        history: "History",
        undo: "Undo",
        redo: "Redo",
        move: "Move",
        "move-left": "Move Left",
        "move-right": "Move Right",
        "move-up": "Move Up",
        "move-down": "Move Down",
        rotate: "Rotate",
        scale: "Scale",
        transform: "Transform",
        translate: "Translate",
        "click-to-edit": "Click to Edit",
        "click-to-select": "Click to Select",
        "dbltap-to-edit": "Double Click to Edit",
        "drag-to-move": "Drag to Move",
        "drag-to-resize": "Drag to Resize",
        "drag-to-rotate": "Drag to Rotate",
        black: "Black",
        blueprint: "Blueprint",
        graphPaper: "Graph Paper",
        grid: "Grid",
        lined: "Lined",
        looseLeaf: "Loose Leaf",
        notebook: "Notebook",
        transparent: "Transparent",
        white: "White",
        color: "Color",
        gradient: "Gradient",
        pattern: "Pattern",
        eyedropper: "Eyedropper",
        "choose-blend": "Set blending mode",
        "color-burn": "Color Burn",
        "color-dodge": "Color Dodge",
        darken: "Darken",
        difference: "Difference",
        disco: "Disco",
        erase: "Erase",
        exclusion: "Exclusion",
        "hard-light": "Hard Light",
        lighten: "Lighten",
        multiply: "Multiply",
        normal: "Normal",
        overlay: "Overlay",
        screen: "Screen",
        "soft-light": "Soft Light",
        "source-atop": "Source Atop",
        "destination-over": "Destination Over",
        cancel: "Cancel",
        "continue": "Continue",
        "delete-doc": "Delete",
        ok: "Ok",
        "open-doc": "Open",
        quit: "Quit",
        download: "Download",
        "download-format": "Download %s",
        save: "Save",
        "save-format": "Save %s",
        dontSave: "Don&rsquo;t Save",
        "keyboard-shortcuts": "Keyboard Shortcuts",
        shortcuts: "Shortcuts",
        "ask-question": "Ask Question",
        "draw-with-friend": "Draw with a friend",
        "report-bug": "Report Bug",
        "request-feature": "Request Feature",
        connecting: "Connecting",
        "decoding-format": "Decoding %s",
        downloading: "Downloading",
        loading: "Loading",
        "loading-error": "Error loading",
        "opening-format": "Opening %s",
        "reading-files": "Reading files",
        "reading-format": "Reading %s",
        rendering: "Rendering",
        syncing: "Syncing",
        "choose-brush": "Choose Brush",
        "choose-media": "Choose Media",
        "choose-shape": "Choose Shape",
        "choose-utility": "Choose Utility",
        "choose-units": "Set units",
        "%": "%",
        cm: "cm",
        inches: "inches",
        mm: "mm",
        pixels: "pixels",
        "choose-fill": "Set fill style",
        "choose-stroke": "Set outline style",
        about: "About",
        attachment: "Attachment",
        "community-page": "Community",
        configure: "Configure",
        "export": "Export",
        file: "File",
        layers: "Layers",
        menu: "Sidebar",
        "my-docs": "My Files",
        "new": "New",
        open: "Open",
        print: "Print",
        "video-tutorials": "Video Tutorials",
        "choose-preset-size": "Set preset size",
        "sans serif": "Sans Serif",
        serif: "Serif",
        display: "Display",
        bold: "Bold",
        handwriting: "Handwriting",
        plants: "Plants",
        people: "People",
        animals: "Animals",
        "water colors": "Water colors",
        typogrunge: "Typogrunge",
        tizzape: "Tizzape",
        "simple smudges": "Simple Smudges",
        retro: "Retro",
        leafs: "Leafs",
        footprints: "Footprints",
        flowers: "Flowers",
        doodles: "Doodles",
        butterflies: "Butterflies",
        "aspect-ratio": "Aspect Ratio",
        "choose-aspect-ratio": "Set Aspect Ratio",
        "choose-constrain": "Constrain Proportions",
        "hide-layer": "Hide layer",
        "show-layer": "Show layer",
        "convert-format": "Convert to %s",
        "update-format": "Update %s",
        image: "Image",
        saving: "Saving",
        colorNoise: "Noise",
        colorMode: "Type",
        linear: "Linear Gradient",
        radial: "Radial Gradient",
        cycle: "Color Cycle",
        lineJoin: "Corner",
        lineCap: "Cap",
        round: "Round",
        bevel: "Bevel",
        miter: "Miter",
        enable: "Enable",
        disable: "Disable",
        projects: "Files",
        paper: "Paper",
        quality: "Quality",
        fileFormat: "Format",
        sizeTo: "Size To",
        size: "Size",
        percent: "Percent",
        share: "Share",
        dpi: "DPI",
        settings: "Settings",
        tool: "Tool",
        width: "Width",
        height: "Height",
        x: "X",
        y: "Y",
        "no-layers": "No layers added",
        "layer-order": "Layer Order",
        document: "Document",
        library: "Library",
        utilities: "Utilities",
        brushes: "Brushes",
        shapes: "Shapes",
        highlighter: "Highlighter",
        polyarrow: "Arrow",
        polyline: "Line",
        polygon: "Polygon",
        path: "Path",
        help: "Help",
        curved: "Curved",
        textbrush: "Textbrush",
        shader: "Shader",
        fitWithin: "Fit Within",
        "72dpi": "72\u2014Web",
        "150dpi": "150\u2014Draft Printing",
        "300dpi": "300\u2014High-Res Printing",
        "upload-as-new": "Upload as new",
        place: "Place into",
        upload: "Upload",
        resize: "Resize",
        dimensions: "Dimensions",
        apply: "Apply",
        create: "Create",
        "set-background": "Change Background",
        rename: "Rename",
        "screenshot-tool-message": "Use the <span class='icon-screenshot'></span> Screenshot tool to download a selection of your drawing."
      }
    },
    sketchObj.lang.locales)
})(sketch);